var RT=Object.defineProperty;var d0=e=>{throw TypeError(e)};var IT=(e,t,n)=>t in e?RT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var rl=(e,t,n)=>IT(e,typeof t!="symbol"?t+"":t,n),Eh=(e,t,n)=>t.has(e)||d0("Cannot "+n);var H=(e,t,n)=>(Eh(e,t,"read from private field"),n?n.call(e):t.get(e)),He=(e,t,n)=>t.has(e)?d0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Me=(e,t,n,r)=>(Eh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ot=(e,t,n)=>(Eh(e,t,"access private method"),n);var yc=(e,t,n,r)=>({set _(s){Me(e,t,s,n)},get _(){return H(e,t,r)}});function DT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var l_={exports:{}},of={},u_={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),LT=Symbol.for("react.portal"),$T=Symbol.for("react.fragment"),MT=Symbol.for("react.strict_mode"),FT=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),zT=Symbol.for("react.forward_ref"),VT=Symbol.for("react.suspense"),KT=Symbol.for("react.memo"),WT=Symbol.for("react.lazy"),f0=Symbol.iterator;function HT(e){return e===null||typeof e!="object"?null:(e=f0&&e[f0]||e["@@iterator"],typeof e=="function"?e:null)}var c_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d_=Object.assign,f_={};function Na(e,t,n){this.props=e,this.context=t,this.refs=f_,this.updater=n||c_}Na.prototype.isReactComponent={};Na.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Na.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h_(){}h_.prototype=Na.prototype;function jg(e,t,n){this.props=e,this.context=t,this.refs=f_,this.updater=n||c_}var Og=jg.prototype=new h_;Og.constructor=jg;d_(Og,Na.prototype);Og.isPureReactComponent=!0;var h0=Array.isArray,p_=Object.prototype.hasOwnProperty,Rg={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function g_(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)p_.call(t,r)&&!m_.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Tu,type:e,key:i,ref:o,props:s,_owner:Rg.current}}function qT(e,t){return{$$typeof:Tu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ig(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tu}function GT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var p0=/\/+/g;function Ch(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GT(""+e.key):t.toString(36)}function Qc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Tu:case LT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ch(o,0):r,h0(s)?(n="",e!=null&&(n=e.replace(p0,"$&/")+"/"),Qc(s,t,n,"",function(u){return u})):s!=null&&(Ig(s)&&(s=qT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(p0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",h0(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Ch(i,a);o+=Qc(i,t,n,l,s)}else if(l=HT(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Ch(i,a++),o+=Qc(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function vc(e,t,n){if(e==null)return e;var r=[],s=0;return Qc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function QT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kn={current:null},Yc={transition:null},YT={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Yc,ReactCurrentOwner:Rg};function y_(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:vc,forEach:function(e,t,n){vc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vc(e,function(){t++}),t},toArray:function(e){return vc(e,function(t){return t})||[]},only:function(e){if(!Ig(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Na;st.Fragment=$T;st.Profiler=FT;st.PureComponent=jg;st.StrictMode=MT;st.Suspense=VT;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT;st.act=y_;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=d_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Rg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)p_.call(t,l)&&!m_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Tu,type:e.type,key:s,ref:i,props:r,_owner:o}};st.createContext=function(e){return e={$$typeof:UT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:BT,_context:e},e.Consumer=e};st.createElement=g_;st.createFactory=function(e){var t=g_.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:zT,render:e}};st.isValidElement=Ig;st.lazy=function(e){return{$$typeof:WT,_payload:{_status:-1,_result:e},_init:QT}};st.memo=function(e,t){return{$$typeof:KT,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=Yc.transition;Yc.transition={};try{e()}finally{Yc.transition=t}};st.unstable_act=y_;st.useCallback=function(e,t){return kn.current.useCallback(e,t)};st.useContext=function(e){return kn.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return kn.current.useDeferredValue(e)};st.useEffect=function(e,t){return kn.current.useEffect(e,t)};st.useId=function(){return kn.current.useId()};st.useImperativeHandle=function(e,t,n){return kn.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return kn.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return kn.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return kn.current.useMemo(e,t)};st.useReducer=function(e,t,n){return kn.current.useReducer(e,t,n)};st.useRef=function(e){return kn.current.useRef(e)};st.useState=function(e){return kn.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return kn.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return kn.current.useTransition()};st.version="18.3.1";u_.exports=st;var S=u_.exports;const ze=sf(S),m0=DT({__proto__:null,default:ze},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=S,ZT=Symbol.for("react.element"),XT=Symbol.for("react.fragment"),eP=Object.prototype.hasOwnProperty,tP=JT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nP={key:!0,ref:!0,__self:!0,__source:!0};function v_(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)eP.call(t,r)&&!nP.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ZT,type:e,key:i,ref:o,props:s,_owner:tP.current}}of.Fragment=XT;of.jsx=v_;of.jsxs=v_;l_.exports=of;var k=l_.exports,jp={},w_={exports:{}},Hn={},b_={exports:{}},x_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ce,se){var ye=ce.length;ce.push(se);e:for(;0<ye;){var Z=ye-1>>>1,X=ce[Z];if(0<s(X,se))ce[Z]=se,ce[ye]=X,ye=Z;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var se=ce[0],ye=ce.pop();if(ye!==se){ce[0]=ye;e:for(var Z=0,X=ce.length,K=X>>>1;Z<K;){var fe=2*(Z+1)-1,oe=ce[fe],_e=fe+1,$e=ce[_e];if(0>s(oe,ye))_e<X&&0>s($e,oe)?(ce[Z]=$e,ce[_e]=ye,Z=_e):(ce[Z]=oe,ce[fe]=ye,Z=fe);else if(_e<X&&0>s($e,ye))ce[Z]=$e,ce[_e]=ye,Z=_e;else break e}}return se}function s(ce,se){var ye=ce.sortIndex-se.sortIndex;return ye!==0?ye:ce.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,_=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ce){for(var se=n(u);se!==null;){if(se.callback===null)r(u);else if(se.startTime<=ce)r(u),se.sortIndex=se.expirationTime,t(l,se);else break;se=n(u)}}function C(ce){if(v=!1,w(ce),!_)if(n(l)!==null)_=!0,ve(O);else{var se=n(u);se!==null&&le(C,se.startTime-ce)}}function O(ce,se){_=!1,v&&(v=!1,g($),$=-1),m=!0;var ye=h;try{for(w(se),f=n(l);f!==null&&(!(f.expirationTime>se)||ce&&!de());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var X=Z(f.expirationTime<=se);se=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(l)&&r(l),w(se)}else r(l);f=n(l)}if(f!==null)var K=!0;else{var fe=n(u);fe!==null&&le(C,fe.startTime-se),K=!1}return K}finally{f=null,h=ye,m=!1}}var I=!1,R=null,$=-1,F=5,z=-1;function de(){return!(e.unstable_now()-z<F)}function L(){if(R!==null){var ce=e.unstable_now();z=ce;var se=!0;try{se=R(!0,ce)}finally{se?G():(I=!1,R=null)}}else I=!1}var G;if(typeof y=="function")G=function(){y(L)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Q=A.port2;A.port1.onmessage=L,G=function(){Q.postMessage(null)}}else G=function(){b(L,0)};function ve(ce){R=ce,I||(I=!0,G())}function le(ce,se){$=b(function(){ce(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){_||m||(_=!0,ve(O))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ce){switch(h){case 1:case 2:case 3:var se=3;break;default:se=h}var ye=h;h=se;try{return ce()}finally{h=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,se){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ye=h;h=ce;try{return se()}finally{h=ye}},e.unstable_scheduleCallback=function(ce,se,ye){var Z=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Z+ye:Z):ye=Z,ce){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ye+X,ce={id:c++,callback:se,priorityLevel:ce,startTime:ye,expirationTime:X,sortIndex:-1},ye>Z?(ce.sortIndex=ye,t(u,ce),n(l)===null&&ce===n(u)&&(v?(g($),$=-1):v=!0,le(C,ye-Z))):(ce.sortIndex=X,t(l,ce),_||m||(_=!0,ve(O))),ce},e.unstable_shouldYield=de,e.unstable_wrapCallback=function(ce){var se=h;return function(){var ye=h;h=se;try{return ce.apply(this,arguments)}finally{h=ye}}}})(x_);b_.exports=x_;var rP=b_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sP=S,Kn=rP;function Ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var __=new Set,Gl={};function go(e,t){ka(e,t),ka(e+"Capture",t)}function ka(e,t){for(Gl[e]=t,e=0;e<t.length;e++)__.add(t[e])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,iP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g0={},y0={};function oP(e){return Op.call(y0,e)?!0:Op.call(g0,e)?!1:iP.test(e)?y0[e]=!0:(g0[e]=!0,!1)}function aP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lP(e,t,n,r){if(t===null||typeof t>"u"||aP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sn(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){on[e]=new Sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];on[t]=new Sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){on[e]=new Sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){on[e]=new Sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){on[e]=new Sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){on[e]=new Sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){on[e]=new Sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){on[e]=new Sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){on[e]=new Sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dg=/[\-:]([a-z])/g;function Ng(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dg,Ng);on[t]=new Sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dg,Ng);on[t]=new Sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dg,Ng);on[t]=new Sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){on[e]=new Sn(e,1,!1,e.toLowerCase(),null,!1,!1)});on.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){on[e]=new Sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lg(e,t,n,r){var s=on.hasOwnProperty(t)?on[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lP(t,n,s,r)&&(n=null),r||s===null?oP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ks=sP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wc=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),$g=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),k_=Symbol.for("react.provider"),S_=Symbol.for("react.context"),Mg=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),Dp=Symbol.for("react.suspense_list"),Fg=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),E_=Symbol.for("react.offscreen"),v0=Symbol.iterator;function sl(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Th;function vl(e){if(Th===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Th=t&&t[1]||""}return`
`+Th+e}var Ph=!1;function Ah(e,t){if(!e||Ph)return"";Ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ph=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vl(e):""}function uP(e){switch(e.tag){case 5:return vl(e.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 2:case 15:return e=Ah(e.type,!1),e;case 11:return e=Ah(e.type.render,!1),e;case 1:return e=Ah(e.type,!0),e;default:return""}}function Np(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case Bo:return"Portal";case Rp:return"Profiler";case $g:return"StrictMode";case Ip:return"Suspense";case Dp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S_:return(e.displayName||"Context")+".Consumer";case k_:return(e._context.displayName||"Context")+".Provider";case Mg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fg:return t=e.displayName||null,t!==null?t:Np(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return Np(e(t))}catch{}}return null}function cP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Np(t);case 8:return t===$g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dP(e){var t=C_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bc(e){e._valueTracker||(e._valueTracker=dP(e))}function T_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=C_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lp(e,t){var n=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function w0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P_(e,t){t=t.checked,t!=null&&Lg(e,"checked",t,!1)}function $p(e,t){P_(e,t);var n=fi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mp(e,t.type,fi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function b0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mp(e,t,n){(t!=="number"||yd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var wl=Array.isArray;function ra(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function x0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ee(92));if(wl(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fi(n)}}function A_(e,t){var n=fi(t.value),r=fi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function j_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?j_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xc,O_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xc=xc||document.createElement("div"),xc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ql(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fP=["Webkit","ms","Moz","O"];Object.keys(Pl).forEach(function(e){fP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pl[t]=Pl[e]})});function R_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pl.hasOwnProperty(e)&&Pl[e]?(""+t).trim():t+"px"}function I_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var hP=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(e,t){if(t){if(hP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ee(62))}}function zp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vp=null;function Bg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kp=null,sa=null,ia=null;function k0(e){if(e=ju(e)){if(typeof Kp!="function")throw Error(Ee(280));var t=e.stateNode;t&&(t=df(t),Kp(e.stateNode,e.type,t))}}function D_(e){sa?ia?ia.push(e):ia=[e]:sa=e}function N_(){if(sa){var e=sa,t=ia;if(ia=sa=null,k0(e),t)for(e=0;e<t.length;e++)k0(t[e])}}function L_(e,t){return e(t)}function $_(){}var jh=!1;function M_(e,t,n){if(jh)return e(t,n);jh=!0;try{return L_(e,t,n)}finally{jh=!1,(sa!==null||ia!==null)&&($_(),N_())}}function Yl(e,t){var n=e.stateNode;if(n===null)return null;var r=df(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ee(231,t,typeof n));return n}var Wp=!1;if(ps)try{var il={};Object.defineProperty(il,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Wp=!1}function pP(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Al=!1,vd=null,wd=!1,Hp=null,mP={onError:function(e){Al=!0,vd=e}};function gP(e,t,n,r,s,i,o,a,l){Al=!1,vd=null,pP.apply(mP,arguments)}function yP(e,t,n,r,s,i,o,a,l){if(gP.apply(this,arguments),Al){if(Al){var u=vd;Al=!1,vd=null}else throw Error(Ee(198));wd||(wd=!0,Hp=u)}}function yo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function F_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S0(e){if(yo(e)!==e)throw Error(Ee(188))}function vP(e){var t=e.alternate;if(!t){if(t=yo(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return S0(s),e;if(i===r)return S0(s),t;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?e:t}function B_(e){return e=vP(e),e!==null?U_(e):null}function U_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U_(e);if(t!==null)return t;e=e.sibling}return null}var z_=Kn.unstable_scheduleCallback,E0=Kn.unstable_cancelCallback,wP=Kn.unstable_shouldYield,bP=Kn.unstable_requestPaint,Nt=Kn.unstable_now,xP=Kn.unstable_getCurrentPriorityLevel,Ug=Kn.unstable_ImmediatePriority,V_=Kn.unstable_UserBlockingPriority,bd=Kn.unstable_NormalPriority,_P=Kn.unstable_LowPriority,K_=Kn.unstable_IdlePriority,af=null,Hr=null;function kP(e){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(af,e,void 0,(e.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:CP,SP=Math.log,EP=Math.LN2;function CP(e){return e>>>=0,e===0?32:31-(SP(e)/EP|0)|0}var _c=64,kc=4194304;function bl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=bl(a):(i&=o,i!==0&&(r=bl(i)))}else o=n&~s,o!==0?r=bl(o):i!==0&&(r=bl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ar(t),s=1<<n,r|=e[n],t&=~s;return r}function TP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ar(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=TP(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W_(){var e=_c;return _c<<=1,!(_c&4194240)&&(_c=64),e}function Oh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ar(t),e[t]=n}function AP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ar(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function zg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ar(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var dt=0;function H_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var q_,Vg,G_,Q_,Y_,Gp=!1,Sc=[],ni=null,ri=null,si=null,Jl=new Map,Zl=new Map,Fs=[],jP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Jl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(t.pointerId)}}function ol(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ju(t),t!==null&&Vg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function OP(e,t,n,r,s){switch(t){case"focusin":return ni=ol(ni,e,t,n,r,s),!0;case"dragenter":return ri=ol(ri,e,t,n,r,s),!0;case"mouseover":return si=ol(si,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Jl.set(i,ol(Jl.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Zl.set(i,ol(Zl.get(i)||null,e,t,n,r,s)),!0}return!1}function J_(e){var t=Ui(e.target);if(t!==null){var n=yo(t);if(n!==null){if(t=n.tag,t===13){if(t=F_(n),t!==null){e.blockedOn=t,Y_(e.priority,function(){G_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vp=r,n.target.dispatchEvent(r),Vp=null}else return t=ju(n),t!==null&&Vg(t),e.blockedOn=n,!1;t.shift()}return!0}function T0(e,t,n){Jc(e)&&n.delete(t)}function RP(){Gp=!1,ni!==null&&Jc(ni)&&(ni=null),ri!==null&&Jc(ri)&&(ri=null),si!==null&&Jc(si)&&(si=null),Jl.forEach(T0),Zl.forEach(T0)}function al(e,t){e.blockedOn===t&&(e.blockedOn=null,Gp||(Gp=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,RP)))}function Xl(e){function t(s){return al(s,e)}if(0<Sc.length){al(Sc[0],e);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ni!==null&&al(ni,e),ri!==null&&al(ri,e),si!==null&&al(si,e),Jl.forEach(t),Zl.forEach(t),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)J_(n),n.blockedOn===null&&Fs.shift()}var oa=ks.ReactCurrentBatchConfig,_d=!0;function IP(e,t,n,r){var s=dt,i=oa.transition;oa.transition=null;try{dt=1,Kg(e,t,n,r)}finally{dt=s,oa.transition=i}}function DP(e,t,n,r){var s=dt,i=oa.transition;oa.transition=null;try{dt=4,Kg(e,t,n,r)}finally{dt=s,oa.transition=i}}function Kg(e,t,n,r){if(_d){var s=Qp(e,t,n,r);if(s===null)Uh(e,t,r,kd,n),C0(e,r);else if(OP(s,e,t,n,r))r.stopPropagation();else if(C0(e,r),t&4&&-1<jP.indexOf(e)){for(;s!==null;){var i=ju(s);if(i!==null&&q_(i),i=Qp(e,t,n,r),i===null&&Uh(e,t,r,kd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uh(e,t,r,null,n)}}var kd=null;function Qp(e,t,n,r){if(kd=null,e=Bg(r),e=Ui(e),e!==null)if(t=yo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=F_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kd=e,null}function Z_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xP()){case Ug:return 1;case V_:return 4;case bd:case _P:return 16;case K_:return 536870912;default:return 16}default:return 16}}var Zs=null,Wg=null,Zc=null;function X_(){if(Zc)return Zc;var e,t=Wg,n=t.length,r,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Zc=s.slice(e,1<r?1-r:void 0)}function Xc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ec(){return!0}function P0(){return!1}function qn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ec:P0,this.isPropagationStopped=P0,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),t}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hg=qn(La),Au=Ct({},La,{view:0,detail:0}),NP=qn(Au),Rh,Ih,ll,lf=Ct({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ll&&(ll&&e.type==="mousemove"?(Rh=e.screenX-ll.screenX,Ih=e.screenY-ll.screenY):Ih=Rh=0,ll=e),Rh)},movementY:function(e){return"movementY"in e?e.movementY:Ih}}),A0=qn(lf),LP=Ct({},lf,{dataTransfer:0}),$P=qn(LP),MP=Ct({},Au,{relatedTarget:0}),Dh=qn(MP),FP=Ct({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),BP=qn(FP),UP=Ct({},La,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zP=qn(UP),VP=Ct({},La,{data:0}),j0=qn(VP),KP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HP[e])?!!t[e]:!1}function qg(){return qP}var GP=Ct({},Au,{key:function(e){if(e.key){var t=KP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qg,charCode:function(e){return e.type==="keypress"?Xc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QP=qn(GP),YP=Ct({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=qn(YP),JP=Ct({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qg}),ZP=qn(JP),XP=Ct({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),e2=qn(XP),t2=Ct({},lf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),n2=qn(t2),r2=[9,13,27,32],Gg=ps&&"CompositionEvent"in window,jl=null;ps&&"documentMode"in document&&(jl=document.documentMode);var s2=ps&&"TextEvent"in window&&!jl,ek=ps&&(!Gg||jl&&8<jl&&11>=jl),R0=" ",I0=!1;function tk(e,t){switch(e){case"keyup":return r2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zo=!1;function i2(e,t){switch(e){case"compositionend":return nk(t);case"keypress":return t.which!==32?null:(I0=!0,R0);case"textInput":return e=t.data,e===R0&&I0?null:e;default:return null}}function o2(e,t){if(zo)return e==="compositionend"||!Gg&&tk(e,t)?(e=X_(),Zc=Wg=Zs=null,zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ek&&t.locale!=="ko"?null:t.data;default:return null}}var a2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a2[e.type]:t==="textarea"}function rk(e,t,n,r){D_(r),t=Sd(t,"onChange"),0<t.length&&(n=new Hg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ol=null,eu=null;function l2(e){pk(e,0)}function uf(e){var t=Wo(e);if(T_(t))return e}function u2(e,t){if(e==="change")return t}var sk=!1;if(ps){var Nh;if(ps){var Lh="oninput"in document;if(!Lh){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),Lh=typeof N0.oninput=="function"}Nh=Lh}else Nh=!1;sk=Nh&&(!document.documentMode||9<document.documentMode)}function L0(){Ol&&(Ol.detachEvent("onpropertychange",ik),eu=Ol=null)}function ik(e){if(e.propertyName==="value"&&uf(eu)){var t=[];rk(t,eu,e,Bg(e)),M_(l2,t)}}function c2(e,t,n){e==="focusin"?(L0(),Ol=t,eu=n,Ol.attachEvent("onpropertychange",ik)):e==="focusout"&&L0()}function d2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uf(eu)}function f2(e,t){if(e==="click")return uf(t)}function h2(e,t){if(e==="input"||e==="change")return uf(t)}function p2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Or=typeof Object.is=="function"?Object.is:p2;function tu(e,t){if(Or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Op.call(t,s)||!Or(e[s],t[s]))return!1}return!0}function $0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M0(e,t){var n=$0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$0(n)}}function ok(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ok(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ak(){for(var e=window,t=yd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yd(e.document)}return t}function Qg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function m2(e){var t=ak(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ok(n.ownerDocument.documentElement,n)){if(r!==null&&Qg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=M0(n,i);var o=M0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var g2=ps&&"documentMode"in document&&11>=document.documentMode,Vo=null,Yp=null,Rl=null,Jp=!1;function F0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jp||Vo==null||Vo!==yd(r)||(r=Vo,"selectionStart"in r&&Qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rl&&tu(Rl,r)||(Rl=r,r=Sd(Yp,"onSelect"),0<r.length&&(t=new Hg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vo)))}function Cc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ko={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},$h={},lk={};ps&&(lk=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function cf(e){if($h[e])return $h[e];if(!Ko[e])return e;var t=Ko[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lk)return $h[e]=t[n];return e}var uk=cf("animationend"),ck=cf("animationiteration"),dk=cf("animationstart"),fk=cf("transitionend"),hk=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){hk.set(e,t),go(t,[e])}for(var Mh=0;Mh<B0.length;Mh++){var Fh=B0[Mh],y2=Fh.toLowerCase(),v2=Fh[0].toUpperCase()+Fh.slice(1);gi(y2,"on"+v2)}gi(uk,"onAnimationEnd");gi(ck,"onAnimationIteration");gi(dk,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(fk,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w2=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function U0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,yP(r,t,void 0,e),e.currentTarget=null}function pk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;U0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;U0(s,a,u),i=l}}}if(wd)throw e=Hp,wd=!1,Hp=null,e}function gt(e,t){var n=t[nm];n===void 0&&(n=t[nm]=new Set);var r=e+"__bubble";n.has(r)||(mk(t,e,2,!1),n.add(r))}function Bh(e,t,n){var r=0;t&&(r|=4),mk(n,e,r,t)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function nu(e){if(!e[Tc]){e[Tc]=!0,__.forEach(function(n){n!=="selectionchange"&&(w2.has(n)||Bh(n,!1,e),Bh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tc]||(t[Tc]=!0,Bh("selectionchange",!1,t))}}function mk(e,t,n,r){switch(Z_(t)){case 1:var s=IP;break;case 4:s=DP;break;default:s=Kg}n=s.bind(null,t,n,e),s=void 0,!Wp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Uh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ui(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}M_(function(){var u=i,c=Bg(n),f=[];e:{var h=hk.get(e);if(h!==void 0){var m=Hg,_=e;switch(e){case"keypress":if(Xc(n)===0)break e;case"keydown":case"keyup":m=QP;break;case"focusin":_="focus",m=Dh;break;case"focusout":_="blur",m=Dh;break;case"beforeblur":case"afterblur":m=Dh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$P;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ZP;break;case uk:case ck:case dk:m=BP;break;case fk:m=e2;break;case"scroll":m=NP;break;case"wheel":m=n2;break;case"copy":case"cut":case"paste":m=zP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O0}var v=(t&4)!==0,b=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,w;y!==null;){w=y;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,g!==null&&(C=Yl(y,g),C!=null&&v.push(ru(y,C,w)))),b)break;y=y.return}0<v.length&&(h=new m(h,_,null,n,c),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Vp&&(_=n.relatedTarget||n.fromElement)&&(Ui(_)||_[ms]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Ui(_):null,_!==null&&(b=yo(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(v=A0,C="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=O0,C="onPointerLeave",g="onPointerEnter",y="pointer"),b=m==null?h:Wo(m),w=_==null?h:Wo(_),h=new v(C,y+"leave",m,n,c),h.target=b,h.relatedTarget=w,C=null,Ui(c)===u&&(v=new v(g,y+"enter",_,n,c),v.target=w,v.relatedTarget=b,C=v),b=C,m&&_)t:{for(v=m,g=_,y=0,w=v;w;w=jo(w))y++;for(w=0,C=g;C;C=jo(C))w++;for(;0<y-w;)v=jo(v),y--;for(;0<w-y;)g=jo(g),w--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=jo(v),g=jo(g)}v=null}else v=null;m!==null&&z0(f,h,m,v,!1),_!==null&&b!==null&&z0(f,b,_,v,!0)}}e:{if(h=u?Wo(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var O=u2;else if(D0(h))if(sk)O=h2;else{O=d2;var I=c2}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(O=f2);if(O&&(O=O(e,u))){rk(f,O,n,c);break e}I&&I(e,h,u),e==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&Mp(h,"number",h.value)}switch(I=u?Wo(u):window,e){case"focusin":(D0(I)||I.contentEditable==="true")&&(Vo=I,Yp=u,Rl=null);break;case"focusout":Rl=Yp=Vo=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,F0(f,n,c);break;case"selectionchange":if(g2)break;case"keydown":case"keyup":F0(f,n,c)}var R;if(Gg)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else zo?tk(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(ek&&n.locale!=="ko"&&(zo||$!=="onCompositionStart"?$==="onCompositionEnd"&&zo&&(R=X_()):(Zs=c,Wg="value"in Zs?Zs.value:Zs.textContent,zo=!0)),I=Sd(u,$),0<I.length&&($=new j0($,e,null,n,c),f.push({event:$,listeners:I}),R?$.data=R:(R=nk(n),R!==null&&($.data=R)))),(R=s2?i2(e,n):o2(e,n))&&(u=Sd(u,"onBeforeInput"),0<u.length&&(c=new j0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=R))}pk(f,t)})}function ru(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sd(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yl(e,n),i!=null&&r.unshift(ru(e,i,s)),i=Yl(e,t),i!=null&&r.push(ru(e,i,s))),e=e.return}return r}function jo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function z0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Yl(n,i),l!=null&&o.unshift(ru(n,l,a))):s||(l=Yl(n,i),l!=null&&o.push(ru(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var b2=/\r\n?/g,x2=/\u0000|\uFFFD/g;function V0(e){return(typeof e=="string"?e:""+e).replace(b2,`
`).replace(x2,"")}function Pc(e,t,n){if(t=V0(t),V0(e)!==t&&n)throw Error(Ee(425))}function Ed(){}var Zp=null,Xp=null;function em(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,_2=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,k2=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(e){return K0.resolve(null).then(e).catch(S2)}:tm;function S2(e){setTimeout(function(){throw e})}function zh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Xl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xl(t)}function ii(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function W0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Kr="__reactFiber$"+$a,su="__reactProps$"+$a,ms="__reactContainer$"+$a,nm="__reactEvents$"+$a,E2="__reactListeners$"+$a,C2="__reactHandles$"+$a;function Ui(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[Kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=W0(e);e!==null;){if(n=e[Kr])return n;e=W0(e)}return t}e=n,n=e.parentNode}return null}function ju(e){return e=e[Kr]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ee(33))}function df(e){return e[su]||null}var rm=[],Ho=-1;function yi(e){return{current:e}}function yt(e){0>Ho||(e.current=rm[Ho],rm[Ho]=null,Ho--)}function mt(e,t){Ho++,rm[Ho]=e.current,e.current=t}var hi={},gn=yi(hi),In=yi(!1),lo=hi;function Sa(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Dn(e){return e=e.childContextTypes,e!=null}function Cd(){yt(In),yt(gn)}function H0(e,t,n){if(gn.current!==hi)throw Error(Ee(168));mt(gn,t),mt(In,n)}function gk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Ee(108,cP(e)||"Unknown",s));return Ct({},n,r)}function Td(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,lo=gn.current,mt(gn,e),mt(In,In.current),!0}function q0(e,t,n){var r=e.stateNode;if(!r)throw Error(Ee(169));n?(e=gk(e,t,lo),r.__reactInternalMemoizedMergedChildContext=e,yt(In),yt(gn),mt(gn,e)):yt(In),mt(In,n)}var is=null,ff=!1,Vh=!1;function yk(e){is===null?is=[e]:is.push(e)}function T2(e){ff=!0,yk(e)}function vi(){if(!Vh&&is!==null){Vh=!0;var e=0,t=dt;try{var n=is;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}is=null,ff=!1}catch(s){throw is!==null&&(is=is.slice(e+1)),z_(Ug,vi),s}finally{dt=t,Vh=!1}}return null}var qo=[],Go=0,Pd=null,Ad=0,ir=[],or=0,uo=null,us=1,cs="";function Ii(e,t){qo[Go++]=Ad,qo[Go++]=Pd,Pd=e,Ad=t}function vk(e,t,n){ir[or++]=us,ir[or++]=cs,ir[or++]=uo,uo=e;var r=us;e=cs;var s=32-Ar(r)-1;r&=~(1<<s),n+=1;var i=32-Ar(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,us=1<<32-Ar(t)+s|n<<s|r,cs=i+e}else us=1<<i|n<<s|r,cs=e}function Yg(e){e.return!==null&&(Ii(e,1),vk(e,1,0))}function Jg(e){for(;e===Pd;)Pd=qo[--Go],qo[Go]=null,Ad=qo[--Go],qo[Go]=null;for(;e===uo;)uo=ir[--or],ir[or]=null,cs=ir[--or],ir[or]=null,us=ir[--or],ir[or]=null}var Vn=null,zn=null,wt=!1,Tr=null;function wk(e,t){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function G0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vn=e,zn=ii(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vn=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=uo!==null?{id:us,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vn=e,zn=null,!0):!1;default:return!1}}function sm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function im(e){if(wt){var t=zn;if(t){var n=t;if(!G0(e,t)){if(sm(e))throw Error(Ee(418));t=ii(n.nextSibling);var r=Vn;t&&G0(e,t)?wk(r,n):(e.flags=e.flags&-4097|2,wt=!1,Vn=e)}}else{if(sm(e))throw Error(Ee(418));e.flags=e.flags&-4097|2,wt=!1,Vn=e}}}function Q0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vn=e}function Ac(e){if(e!==Vn)return!1;if(!wt)return Q0(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!em(e.type,e.memoizedProps)),t&&(t=zn)){if(sm(e))throw bk(),Error(Ee(418));for(;t;)wk(e,t),t=ii(t.nextSibling)}if(Q0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=ii(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=Vn?ii(e.stateNode.nextSibling):null;return!0}function bk(){for(var e=zn;e;)e=ii(e.nextSibling)}function Ea(){zn=Vn=null,wt=!1}function Zg(e){Tr===null?Tr=[e]:Tr.push(e)}var P2=ks.ReactCurrentBatchConfig;function ul(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,e))}return e}function jc(e,t){throw e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y0(e){var t=e._init;return t(e._payload)}function xk(e){function t(g,y){if(e){var w=g.deletions;w===null?(g.deletions=[y],g.flags|=16):w.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=ui(g,y),g.index=0,g.sibling=null,g}function i(g,y,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<y?(g.flags|=2,y):w):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,w,C){return y===null||y.tag!==6?(y=Yh(w,g.mode,C),y.return=g,y):(y=s(y,w),y.return=g,y)}function l(g,y,w,C){var O=w.type;return O===Uo?c(g,y,w.props.children,C,w.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$s&&Y0(O)===y.type)?(C=s(y,w.props),C.ref=ul(g,y,w),C.return=g,C):(C=od(w.type,w.key,w.props,null,g.mode,C),C.ref=ul(g,y,w),C.return=g,C)}function u(g,y,w,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Jh(w,g.mode,C),y.return=g,y):(y=s(y,w.children||[]),y.return=g,y)}function c(g,y,w,C,O){return y===null||y.tag!==7?(y=io(w,g.mode,C,O),y.return=g,y):(y=s(y,w),y.return=g,y)}function f(g,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yh(""+y,g.mode,w),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wc:return w=od(y.type,y.key,y.props,null,g.mode,w),w.ref=ul(g,null,y),w.return=g,w;case Bo:return y=Jh(y,g.mode,w),y.return=g,y;case $s:var C=y._init;return f(g,C(y._payload),w)}if(wl(y)||sl(y))return y=io(y,g.mode,w,null),y.return=g,y;jc(g,y)}return null}function h(g,y,w,C){var O=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(g,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wc:return w.key===O?l(g,y,w,C):null;case Bo:return w.key===O?u(g,y,w,C):null;case $s:return O=w._init,h(g,y,O(w._payload),C)}if(wl(w)||sl(w))return O!==null?null:c(g,y,w,C,null);jc(g,w)}return null}function m(g,y,w,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(w)||null,a(y,g,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case wc:return g=g.get(C.key===null?w:C.key)||null,l(y,g,C,O);case Bo:return g=g.get(C.key===null?w:C.key)||null,u(y,g,C,O);case $s:var I=C._init;return m(g,y,w,I(C._payload),O)}if(wl(C)||sl(C))return g=g.get(w)||null,c(y,g,C,O,null);jc(y,C)}return null}function _(g,y,w,C){for(var O=null,I=null,R=y,$=y=0,F=null;R!==null&&$<w.length;$++){R.index>$?(F=R,R=null):F=R.sibling;var z=h(g,R,w[$],C);if(z===null){R===null&&(R=F);break}e&&R&&z.alternate===null&&t(g,R),y=i(z,y,$),I===null?O=z:I.sibling=z,I=z,R=F}if($===w.length)return n(g,R),wt&&Ii(g,$),O;if(R===null){for(;$<w.length;$++)R=f(g,w[$],C),R!==null&&(y=i(R,y,$),I===null?O=R:I.sibling=R,I=R);return wt&&Ii(g,$),O}for(R=r(g,R);$<w.length;$++)F=m(R,g,$,w[$],C),F!==null&&(e&&F.alternate!==null&&R.delete(F.key===null?$:F.key),y=i(F,y,$),I===null?O=F:I.sibling=F,I=F);return e&&R.forEach(function(de){return t(g,de)}),wt&&Ii(g,$),O}function v(g,y,w,C){var O=sl(w);if(typeof O!="function")throw Error(Ee(150));if(w=O.call(w),w==null)throw Error(Ee(151));for(var I=O=null,R=y,$=y=0,F=null,z=w.next();R!==null&&!z.done;$++,z=w.next()){R.index>$?(F=R,R=null):F=R.sibling;var de=h(g,R,z.value,C);if(de===null){R===null&&(R=F);break}e&&R&&de.alternate===null&&t(g,R),y=i(de,y,$),I===null?O=de:I.sibling=de,I=de,R=F}if(z.done)return n(g,R),wt&&Ii(g,$),O;if(R===null){for(;!z.done;$++,z=w.next())z=f(g,z.value,C),z!==null&&(y=i(z,y,$),I===null?O=z:I.sibling=z,I=z);return wt&&Ii(g,$),O}for(R=r(g,R);!z.done;$++,z=w.next())z=m(R,g,$,z.value,C),z!==null&&(e&&z.alternate!==null&&R.delete(z.key===null?$:z.key),y=i(z,y,$),I===null?O=z:I.sibling=z,I=z);return e&&R.forEach(function(L){return t(g,L)}),wt&&Ii(g,$),O}function b(g,y,w,C){if(typeof w=="object"&&w!==null&&w.type===Uo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case wc:e:{for(var O=w.key,I=y;I!==null;){if(I.key===O){if(O=w.type,O===Uo){if(I.tag===7){n(g,I.sibling),y=s(I,w.props.children),y.return=g,g=y;break e}}else if(I.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$s&&Y0(O)===I.type){n(g,I.sibling),y=s(I,w.props),y.ref=ul(g,I,w),y.return=g,g=y;break e}n(g,I);break}else t(g,I);I=I.sibling}w.type===Uo?(y=io(w.props.children,g.mode,C,w.key),y.return=g,g=y):(C=od(w.type,w.key,w.props,null,g.mode,C),C.ref=ul(g,y,w),C.return=g,g=C)}return o(g);case Bo:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(g,y.sibling),y=s(y,w.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Jh(w,g.mode,C),y.return=g,g=y}return o(g);case $s:return I=w._init,b(g,y,I(w._payload),C)}if(wl(w))return _(g,y,w,C);if(sl(w))return v(g,y,w,C);jc(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,w),y.return=g,g=y):(n(g,y),y=Yh(w,g.mode,C),y.return=g,g=y),o(g)):n(g,y)}return b}var Ca=xk(!0),_k=xk(!1),jd=yi(null),Od=null,Qo=null,Xg=null;function ey(){Xg=Qo=Od=null}function ty(e){var t=jd.current;yt(jd),e._currentValue=t}function om(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function aa(e,t){Od=e,Xg=Qo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(On=!0),e.firstContext=null)}function hr(e){var t=e._currentValue;if(Xg!==e)if(e={context:e,memoizedValue:t,next:null},Qo===null){if(Od===null)throw Error(Ee(308));Qo=e,Od.dependencies={lanes:0,firstContext:e}}else Qo=Qo.next=e;return t}var zi=null;function ny(e){zi===null?zi=[e]:zi.push(e)}function kk(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ny(t)):(n.next=s.next,s.next=n),t.interleaved=n,gs(e,r)}function gs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function ry(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,gs(e,n)}return s=r.interleaved,s===null?(t.next=t,ny(r)):(t.next=s.next,s.next=t),r.interleaved=t,gs(e,n)}function ed(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zg(e,n)}}function J0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rd(e,t,n,r){var s=e.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var h=a.lane,m=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=e,v=a;switch(h=t,m=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){f=_.call(m,f,h);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,h=typeof _=="function"?_.call(m,f,h):_,h==null)break e;f=Ct({},f,h);break e;case 2:Ms=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);fo|=o,e.lanes=o,e.memoizedState=f}}function Z0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var Ou={},qr=yi(Ou),iu=yi(Ou),ou=yi(Ou);function Vi(e){if(e===Ou)throw Error(Ee(174));return e}function sy(e,t){switch(mt(ou,t),mt(iu,e),mt(qr,Ou),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bp(t,e)}yt(qr),mt(qr,t)}function Ta(){yt(qr),yt(iu),yt(ou)}function Ek(e){Vi(ou.current);var t=Vi(qr.current),n=Bp(t,e.type);t!==n&&(mt(iu,e),mt(qr,n))}function iy(e){iu.current===e&&(yt(qr),yt(iu))}var _t=yi(0);function Id(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Kh=[];function oy(){for(var e=0;e<Kh.length;e++)Kh[e]._workInProgressVersionPrimary=null;Kh.length=0}var td=ks.ReactCurrentDispatcher,Wh=ks.ReactCurrentBatchConfig,co=0,Et=null,Vt=null,Zt=null,Dd=!1,Il=!1,au=0,A2=0;function dn(){throw Error(Ee(321))}function ay(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Or(e[n],t[n]))return!1;return!0}function ly(e,t,n,r,s,i){if(co=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,td.current=e===null||e.memoizedState===null?I2:D2,e=n(r,s),Il){i=0;do{if(Il=!1,au=0,25<=i)throw Error(Ee(301));i+=1,Zt=Vt=null,t.updateQueue=null,td.current=N2,e=n(r,s)}while(Il)}if(td.current=Nd,t=Vt!==null&&Vt.next!==null,co=0,Zt=Vt=Et=null,Dd=!1,t)throw Error(Ee(300));return e}function uy(){var e=au!==0;return au=0,e}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Et.memoizedState=Zt=e:Zt=Zt.next=e,Zt}function pr(){if(Vt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Zt===null?Et.memoizedState:Zt.next;if(t!==null)Zt=t,Vt=e;else{if(e===null)throw Error(Ee(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Zt===null?Et.memoizedState=Zt=e:Zt=Zt.next=e}return Zt}function lu(e,t){return typeof t=="function"?t(e):t}function Hh(e){var t=pr(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=Vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((co&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Et.lanes|=c,fo|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Or(r,t.memoizedState)||(On=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Et.lanes|=i,fo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qh(e){var t=pr(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Or(i,t.memoizedState)||(On=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ck(){}function Tk(e,t){var n=Et,r=pr(),s=t(),i=!Or(r.memoizedState,s);if(i&&(r.memoizedState=s,On=!0),r=r.queue,cy(jk.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Zt!==null&&Zt.memoizedState.tag&1){if(n.flags|=2048,uu(9,Ak.bind(null,n,r,s,t),void 0,null),en===null)throw Error(Ee(349));co&30||Pk(n,t,s)}return s}function Pk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ak(e,t,n,r){t.value=n,t.getSnapshot=r,Ok(t)&&Rk(e)}function jk(e,t,n){return n(function(){Ok(t)&&Rk(e)})}function Ok(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Or(e,n)}catch{return!0}}function Rk(e){var t=gs(e,1);t!==null&&jr(t,e,1,-1)}function X0(e){var t=Fr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:e},t.queue=e,e=e.dispatch=R2.bind(null,Et,e),[t.memoizedState,e]}function uu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ik(){return pr().memoizedState}function nd(e,t,n,r){var s=Fr();Et.flags|=e,s.memoizedState=uu(1|t,n,void 0,r===void 0?null:r)}function hf(e,t,n,r){var s=pr();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var o=Vt.memoizedState;if(i=o.destroy,r!==null&&ay(r,o.deps)){s.memoizedState=uu(t,n,i,r);return}}Et.flags|=e,s.memoizedState=uu(1|t,n,i,r)}function ew(e,t){return nd(8390656,8,e,t)}function cy(e,t){return hf(2048,8,e,t)}function Dk(e,t){return hf(4,2,e,t)}function Nk(e,t){return hf(4,4,e,t)}function Lk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $k(e,t,n){return n=n!=null?n.concat([e]):null,hf(4,4,Lk.bind(null,t,e),n)}function dy(){}function Mk(e,t){var n=pr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ay(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fk(e,t){var n=pr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ay(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bk(e,t,n){return co&21?(Or(n,t)||(n=W_(),Et.lanes|=n,fo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,On=!0),e.memoizedState=n)}function j2(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=Wh.transition;Wh.transition={};try{e(!1),t()}finally{dt=n,Wh.transition=r}}function Uk(){return pr().memoizedState}function O2(e,t,n){var r=li(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zk(e))Vk(t,n);else if(n=kk(e,t,n,r),n!==null){var s=_n();jr(n,e,r,s),Kk(n,t,r)}}function R2(e,t,n){var r=li(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zk(e))Vk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Or(a,o)){var l=t.interleaved;l===null?(s.next=s,ny(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=kk(e,t,s,r),n!==null&&(s=_n(),jr(n,e,r,s),Kk(n,t,r))}}function zk(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function Vk(e,t){Il=Dd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zg(e,n)}}var Nd={readContext:hr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},I2={readContext:hr,useCallback:function(e,t){return Fr().memoizedState=[e,t===void 0?null:t],e},useContext:hr,useEffect:ew,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nd(4194308,4,Lk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nd(4194308,4,e,t)},useInsertionEffect:function(e,t){return nd(4,2,e,t)},useMemo:function(e,t){var n=Fr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=O2.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=Fr();return e={current:e},t.memoizedState=e},useState:X0,useDebugValue:dy,useDeferredValue:function(e){return Fr().memoizedState=e},useTransition:function(){var e=X0(!1),t=e[0];return e=j2.bind(null,e[1]),Fr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,s=Fr();if(wt){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=t(),en===null)throw Error(Ee(349));co&30||Pk(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,ew(jk.bind(null,r,i,e),[e]),r.flags|=2048,uu(9,Ak.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Fr(),t=en.identifierPrefix;if(wt){var n=cs,r=us;n=(r&~(1<<32-Ar(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=au++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=A2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},D2={readContext:hr,useCallback:Mk,useContext:hr,useEffect:cy,useImperativeHandle:$k,useInsertionEffect:Dk,useLayoutEffect:Nk,useMemo:Fk,useReducer:Hh,useRef:Ik,useState:function(){return Hh(lu)},useDebugValue:dy,useDeferredValue:function(e){var t=pr();return Bk(t,Vt.memoizedState,e)},useTransition:function(){var e=Hh(lu)[0],t=pr().memoizedState;return[e,t]},useMutableSource:Ck,useSyncExternalStore:Tk,useId:Uk,unstable_isNewReconciler:!1},N2={readContext:hr,useCallback:Mk,useContext:hr,useEffect:cy,useImperativeHandle:$k,useInsertionEffect:Dk,useLayoutEffect:Nk,useMemo:Fk,useReducer:qh,useRef:Ik,useState:function(){return qh(lu)},useDebugValue:dy,useDeferredValue:function(e){var t=pr();return Vt===null?t.memoizedState=e:Bk(t,Vt.memoizedState,e)},useTransition:function(){var e=qh(lu)[0],t=pr().memoizedState;return[e,t]},useMutableSource:Ck,useSyncExternalStore:Tk,useId:Uk,unstable_isNewReconciler:!1};function _r(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function am(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pf={isMounted:function(e){return(e=e._reactInternals)?yo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_n(),s=li(e),i=ds(r,s);i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(jr(t,e,s,r),ed(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_n(),s=li(e),i=ds(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(jr(t,e,s,r),ed(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_n(),r=li(e),s=ds(n,r);s.tag=2,t!=null&&(s.callback=t),t=oi(e,s,r),t!==null&&(jr(t,e,r,n),ed(t,e,r))}};function tw(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!tu(n,r)||!tu(s,i):!0}function Wk(e,t,n){var r=!1,s=hi,i=t.contextType;return typeof i=="object"&&i!==null?i=hr(i):(s=Dn(t)?lo:gn.current,r=t.contextTypes,i=(r=r!=null)?Sa(e,s):hi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function nw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pf.enqueueReplaceState(t,t.state,null)}function lm(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ry(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=hr(i):(i=Dn(t)?lo:gn.current,s.context=Sa(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(am(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&pf.enqueueReplaceState(s,s.state,null),Rd(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pa(e,t){try{var n="",r=t;do n+=uP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Gh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function um(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var L2=typeof WeakMap=="function"?WeakMap:Map;function Hk(e,t,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$d||($d=!0,wm=r),um(e,t)},n}function qk(e,t,n){n=ds(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){um(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){um(e,t),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function rw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new L2;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Y2.bind(null,e,t,n),t.then(e,e))}function sw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iw(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ds(-1,1),t.tag=2,oi(n,t,1))),n.lanes|=1),e)}var $2=ks.ReactCurrentOwner,On=!1;function bn(e,t,n,r){t.child=e===null?_k(t,null,n,r):Ca(t,e.child,n,r)}function ow(e,t,n,r,s){n=n.render;var i=t.ref;return aa(t,s),r=ly(e,t,n,r,i,s),n=uy(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(wt&&n&&Yg(t),t.flags|=1,bn(e,t,r,s),t.child)}function aw(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!wy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Gk(e,t,i,r,s)):(e=od(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:tu,n(o,r)&&e.ref===t.ref)return ys(e,t,s)}return t.flags|=1,e=ui(i,r),e.ref=t.ref,e.return=t,t.child=e}function Gk(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(tu(i,r)&&e.ref===t.ref)if(On=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(On=!0);else return t.lanes=e.lanes,ys(e,t,s)}return cm(e,t,n,r,s)}function Qk(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Jo,Un),Un|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(Jo,Un),Un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,mt(Jo,Un),Un|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,mt(Jo,Un),Un|=r;return bn(e,t,s,n),t.child}function Yk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cm(e,t,n,r,s){var i=Dn(n)?lo:gn.current;return i=Sa(t,i),aa(t,s),n=ly(e,t,n,r,i,s),r=uy(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(wt&&r&&Yg(t),t.flags|=1,bn(e,t,n,s),t.child)}function lw(e,t,n,r,s){if(Dn(n)){var i=!0;Td(t)}else i=!1;if(aa(t,s),t.stateNode===null)rd(e,t),Wk(t,n,r),lm(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=hr(u):(u=Dn(n)?lo:gn.current,u=Sa(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&nw(t,o,r,u),Ms=!1;var h=t.memoizedState;o.state=h,Rd(t,r,o,s),l=t.memoizedState,a!==r||h!==l||In.current||Ms?(typeof c=="function"&&(am(t,n,c,r),l=t.memoizedState),(a=Ms||tw(t,n,a,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Sk(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:_r(t.type,a),o.props=u,f=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=hr(l):(l=Dn(n)?lo:gn.current,l=Sa(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&nw(t,o,r,l),Ms=!1,h=t.memoizedState,o.state=h,Rd(t,r,o,s);var _=t.memoizedState;a!==f||h!==_||In.current||Ms?(typeof m=="function"&&(am(t,n,m,r),_=t.memoizedState),(u=Ms||tw(t,n,u,r,h,_,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return dm(e,t,n,r,i,s)}function dm(e,t,n,r,s,i){Yk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&q0(t,n,!1),ys(e,t,i);r=t.stateNode,$2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ca(t,e.child,null,i),t.child=Ca(t,null,a,i)):bn(e,t,a,i),t.memoizedState=r.state,s&&q0(t,n,!0),t.child}function Jk(e){var t=e.stateNode;t.pendingContext?H0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&H0(e,t.context,!1),sy(e,t.containerInfo)}function uw(e,t,n,r,s){return Ea(),Zg(s),t.flags|=256,bn(e,t,n,r),t.child}var fm={dehydrated:null,treeContext:null,retryLane:0};function hm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zk(e,t,n){var r=t.pendingProps,s=_t.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),mt(_t,s&1),e===null)return im(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yf(o,r,0,null),e=io(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=hm(n),t.memoizedState=fm,e):fy(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return M2(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ui(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ui(a,i):(i=io(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?hm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=fm,r}return i=e.child,e=i.sibling,r=ui(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fy(e,t){return t=yf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oc(e,t,n,r){return r!==null&&Zg(r),Ca(t,e.child,null,n),e=fy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M2(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Gh(Error(Ee(422))),Oc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=yf({mode:"visible",children:r.children},s,0,null),i=io(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ca(t,e.child,null,o),t.child.memoizedState=hm(o),t.memoizedState=fm,i);if(!(t.mode&1))return Oc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=Gh(i,r,void 0),Oc(e,t,o,r)}if(a=(o&e.childLanes)!==0,On||a){if(r=en,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gs(e,s),jr(r,e,s,-1))}return vy(),r=Gh(Error(Ee(421))),Oc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=J2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,zn=ii(s.nextSibling),Vn=t,wt=!0,Tr=null,e!==null&&(ir[or++]=us,ir[or++]=cs,ir[or++]=uo,us=e.id,cs=e.overflow,uo=t),t=fy(t,r.children),t.flags|=4096,t)}function cw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),om(e.return,t,n)}function Qh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xk(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bn(e,t,r.children,n),r=_t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cw(e,n,t);else if(e.tag===19)cw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mt(_t,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Id(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Id(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qh(t,!0,n,null,i);break;case"together":Qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ys(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,n=ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function F2(e,t,n){switch(t.tag){case 3:Jk(t),Ea();break;case 5:Ek(t);break;case 1:Dn(t.type)&&Td(t);break;case 4:sy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;mt(jd,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mt(_t,_t.current&1),t.flags|=128,null):n&t.child.childLanes?Zk(e,t,n):(mt(_t,_t.current&1),e=ys(e,t,n),e!==null?e.sibling:null);mt(_t,_t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xk(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(_t,_t.current),r)break;return null;case 22:case 23:return t.lanes=0,Qk(e,t,n)}return ys(e,t,n)}var e1,pm,t1,n1;e1=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pm=function(){};t1=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Vi(qr.current);var i=null;switch(n){case"input":s=Lp(e,s),r=Lp(e,r),i=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),i=[];break;case"textarea":s=Fp(e,s),r=Fp(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ed)}Up(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gt("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};n1=function(e,t,n,r){n!==r&&(t.flags|=4)};function cl(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function B2(e,t,n){var r=t.pendingProps;switch(Jg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return Dn(t.type)&&Cd(),fn(t),null;case 3:return r=t.stateNode,Ta(),yt(In),yt(gn),oy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ac(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tr!==null&&(_m(Tr),Tr=null))),pm(e,t),fn(t),null;case 5:iy(t);var s=Vi(ou.current);if(n=t.type,e!==null&&t.stateNode!=null)t1(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ee(166));return fn(t),null}if(e=Vi(qr.current),Ac(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Kr]=t,r[su]=i,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<xl.length;s++)gt(xl[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":w0(r,i),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},gt("invalid",r);break;case"textarea":x0(r,i),gt("invalid",r)}Up(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Pc(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Pc(r.textContent,a,e),s=["children",""+a]):Gl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":bc(r),b0(r,i,!0);break;case"textarea":bc(r),_0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ed)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=j_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Kr]=t,e[su]=r,e1(e,t,!1,!1),t.stateNode=e;e:{switch(o=zp(n,r),n){case"dialog":gt("cancel",e),gt("close",e),s=r;break;case"iframe":case"object":case"embed":gt("load",e),s=r;break;case"video":case"audio":for(s=0;s<xl.length;s++)gt(xl[s],e);s=r;break;case"source":gt("error",e),s=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),s=r;break;case"details":gt("toggle",e),s=r;break;case"input":w0(e,r),s=Lp(e,r),gt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),gt("invalid",e);break;case"textarea":x0(e,r),s=Fp(e,r),gt("invalid",e);break;default:s=r}Up(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?I_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&O_(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ql(e,l):typeof l=="number"&&Ql(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&gt("scroll",e):l!=null&&Lg(e,i,l,o))}switch(n){case"input":bc(e),b0(e,r,!1);break;case"textarea":bc(e),_0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ra(e,!!r.multiple,i,!1):r.defaultValue!=null&&ra(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ed)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fn(t),null;case 6:if(e&&t.stateNode!=null)n1(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ee(166));if(n=Vi(ou.current),Vi(qr.current),Ac(t)){if(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,(i=r.nodeValue!==n)&&(e=Vn,e!==null))switch(e.tag){case 3:Pc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kr]=t,t.stateNode=r}return fn(t),null;case 13:if(yt(_t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&zn!==null&&t.mode&1&&!(t.flags&128))bk(),Ea(),t.flags|=98560,i=!1;else if(i=Ac(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ee(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[Kr]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fn(t),i=!1}else Tr!==null&&(_m(Tr),Tr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_t.current&1?Wt===0&&(Wt=3):vy())),t.updateQueue!==null&&(t.flags|=4),fn(t),null);case 4:return Ta(),pm(e,t),e===null&&nu(t.stateNode.containerInfo),fn(t),null;case 10:return ty(t.type._context),fn(t),null;case 17:return Dn(t.type)&&Cd(),fn(t),null;case 19:if(yt(_t),i=t.memoizedState,i===null)return fn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)cl(i,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Id(e),o!==null){for(t.flags|=128,cl(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mt(_t,_t.current&1|2),t.child}e=e.sibling}i.tail!==null&&Nt()>Aa&&(t.flags|=128,r=!0,cl(i,!1),t.lanes=4194304)}else{if(!r)if(e=Id(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!wt)return fn(t),null}else 2*Nt()-i.renderingStartTime>Aa&&n!==1073741824&&(t.flags|=128,r=!0,cl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Nt(),t.sibling=null,n=_t.current,mt(_t,r?n&1|2:n&1),t):(fn(t),null);case 22:case 23:return yy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Un&1073741824&&(fn(t),t.subtreeFlags&6&&(t.flags|=8192)):fn(t),null;case 24:return null;case 25:return null}throw Error(Ee(156,t.tag))}function U2(e,t){switch(Jg(t),t.tag){case 1:return Dn(t.type)&&Cd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(),yt(In),yt(gn),oy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iy(t),null;case 13:if(yt(_t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(_t),null;case 4:return Ta(),null;case 10:return ty(t.type._context),null;case 22:case 23:return yy(),null;case 24:return null;default:return null}}var Rc=!1,hn=!1,z2=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Yo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function mm(e,t,n){try{n()}catch(r){jt(e,t,r)}}var dw=!1;function V2(e,t){if(Zp=_d,e=ak(),Qg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===s&&(a=o),h===i&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xp={focusedElem:e,selectionRange:n},_d=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,b=_.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:_r(t.type,v),b);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(C){jt(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return _=dw,dw=!1,_}function Dl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&mm(t,n,i)}s=s.next}while(s!==r)}}function mf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function r1(e){var t=e.alternate;t!==null&&(e.alternate=null,r1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kr],delete t[su],delete t[nm],delete t[E2],delete t[C2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function s1(e){return e.tag===5||e.tag===3||e.tag===4}function fw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ym(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ed));else if(r!==4&&(e=e.child,e!==null))for(ym(e,t,n),e=e.sibling;e!==null;)ym(e,t,n),e=e.sibling}function vm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(vm(e,t,n),e=e.sibling;e!==null;)vm(e,t,n),e=e.sibling}var tn=null,Er=!1;function Rs(e,t,n){for(n=n.child;n!==null;)i1(e,t,n),n=n.sibling}function i1(e,t,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(af,n)}catch{}switch(n.tag){case 5:hn||Yo(n,t);case 6:var r=tn,s=Er;tn=null,Rs(e,t,n),tn=r,Er=s,tn!==null&&(Er?(e=tn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):tn.removeChild(n.stateNode));break;case 18:tn!==null&&(Er?(e=tn,n=n.stateNode,e.nodeType===8?zh(e.parentNode,n):e.nodeType===1&&zh(e,n),Xl(e)):zh(tn,n.stateNode));break;case 4:r=tn,s=Er,tn=n.stateNode.containerInfo,Er=!0,Rs(e,t,n),tn=r,Er=s;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mm(n,t,o),s=s.next}while(s!==r)}Rs(e,t,n);break;case 1:if(!hn&&(Yo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,t,a)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,Rs(e,t,n),hn=r):Rs(e,t,n);break;default:Rs(e,t,n)}}function hw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new z2),t.forEach(function(r){var s=Z2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:tn=a.stateNode,Er=!1;break e;case 3:tn=a.stateNode.containerInfo,Er=!0;break e;case 4:tn=a.stateNode.containerInfo,Er=!0;break e}a=a.return}if(tn===null)throw Error(Ee(160));i1(i,o,s),tn=null,Er=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){jt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o1(t,e),t=t.sibling}function o1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vr(t,e),$r(e),r&4){try{Dl(3,e,e.return),mf(3,e)}catch(v){jt(e,e.return,v)}try{Dl(5,e,e.return)}catch(v){jt(e,e.return,v)}}break;case 1:vr(t,e),$r(e),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(vr(t,e),$r(e),r&512&&n!==null&&Yo(n,n.return),e.flags&32){var s=e.stateNode;try{Ql(s,"")}catch(v){jt(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&P_(s,i),zp(a,o);var u=zp(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?I_(s,f):c==="dangerouslySetInnerHTML"?O_(s,f):c==="children"?Ql(s,f):Lg(s,c,f,u)}switch(a){case"input":$p(s,i);break;case"textarea":A_(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ra(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?ra(s,!!i.multiple,i.defaultValue,!0):ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[su]=i}catch(v){jt(e,e.return,v)}}break;case 6:if(vr(t,e),$r(e),r&4){if(e.stateNode===null)throw Error(Ee(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){jt(e,e.return,v)}}break;case 3:if(vr(t,e),$r(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xl(t.containerInfo)}catch(v){jt(e,e.return,v)}break;case 4:vr(t,e),$r(e);break;case 13:vr(t,e),$r(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(my=Nt())),r&4&&hw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(hn=(u=hn)||c,vr(t,e),hn=u):vr(t,e),$r(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Be=e,c=e.child;c!==null;){for(f=Be=c;Be!==null;){switch(h=Be,m=h.child,h.tag){case 0:case 11:case 14:case 15:Dl(4,h,h.return);break;case 1:Yo(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(v){jt(r,n,v)}}break;case 5:Yo(h,h.return);break;case 22:if(h.memoizedState!==null){mw(f);continue}}m!==null?(m.return=h,Be=m):mw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=R_("display",o))}catch(v){jt(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vr(t,e),$r(e),r&4&&hw(e);break;case 21:break;default:vr(t,e),$r(e)}}function $r(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(s1(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ql(s,""),r.flags&=-33);var i=fw(e);vm(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fw(e);ym(e,a,o);break;default:throw Error(Ee(161))}}catch(l){jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function K2(e,t,n){Be=e,a1(e)}function a1(e,t,n){for(var r=(e.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||hn;a=Rc;var u=hn;if(Rc=o,(hn=l)&&!u)for(Be=s;Be!==null;)o=Be,l=o.child,o.tag===22&&o.memoizedState!==null?gw(s):l!==null?(l.return=o,Be=l):gw(s);for(;i!==null;)Be=i,a1(i),i=i.sibling;Be=s,Rc=a,hn=u}pw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):pw(e)}}function pw(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||mf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!hn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:_r(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Z0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Z0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Xl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}hn||t.flags&512&&gm(t)}catch(h){jt(t,t.return,h)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function mw(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function gw(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mf(4,t)}catch(l){jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){jt(t,s,l)}}var i=t.return;try{gm(t)}catch(l){jt(t,i,l)}break;case 5:var o=t.return;try{gm(t)}catch(l){jt(t,o,l)}}}catch(l){jt(t,t.return,l)}if(t===e){Be=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Be=a;break}Be=t.return}}var W2=Math.ceil,Ld=ks.ReactCurrentDispatcher,hy=ks.ReactCurrentOwner,dr=ks.ReactCurrentBatchConfig,lt=0,en=null,Bt=null,sn=0,Un=0,Jo=yi(0),Wt=0,cu=null,fo=0,gf=0,py=0,Nl=null,An=null,my=0,Aa=1/0,rs=null,$d=!1,wm=null,ai=null,Ic=!1,Xs=null,Md=0,Ll=0,bm=null,sd=-1,id=0;function _n(){return lt&6?Nt():sd!==-1?sd:sd=Nt()}function li(e){return e.mode&1?lt&2&&sn!==0?sn&-sn:P2.transition!==null?(id===0&&(id=W_()),id):(e=dt,e!==0||(e=window.event,e=e===void 0?16:Z_(e.type)),e):1}function jr(e,t,n,r){if(50<Ll)throw Ll=0,bm=null,Error(Ee(185));Pu(e,n,r),(!(lt&2)||e!==en)&&(e===en&&(!(lt&2)&&(gf|=n),Wt===4&&Bs(e,sn)),Nn(e,r),n===1&&lt===0&&!(t.mode&1)&&(Aa=Nt()+500,ff&&vi()))}function Nn(e,t){var n=e.callbackNode;PP(e,t);var r=xd(e,e===en?sn:0);if(r===0)n!==null&&E0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&E0(n),t===1)e.tag===0?T2(yw.bind(null,e)):yk(yw.bind(null,e)),k2(function(){!(lt&6)&&vi()}),n=null;else{switch(H_(r)){case 1:n=Ug;break;case 4:n=V_;break;case 16:n=bd;break;case 536870912:n=K_;break;default:n=bd}n=m1(n,l1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function l1(e,t){if(sd=-1,id=0,lt&6)throw Error(Ee(327));var n=e.callbackNode;if(la()&&e.callbackNode!==n)return null;var r=xd(e,e===en?sn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fd(e,r);else{t=r;var s=lt;lt|=2;var i=c1();(en!==e||sn!==t)&&(rs=null,Aa=Nt()+500,so(e,t));do try{G2();break}catch(a){u1(e,a)}while(!0);ey(),Ld.current=i,lt=s,Bt!==null?t=0:(en=null,sn=0,t=Wt)}if(t!==0){if(t===2&&(s=qp(e),s!==0&&(r=s,t=xm(e,s))),t===1)throw n=cu,so(e,0),Bs(e,r),Nn(e,Nt()),n;if(t===6)Bs(e,r);else{if(s=e.current.alternate,!(r&30)&&!H2(s)&&(t=Fd(e,r),t===2&&(i=qp(e),i!==0&&(r=i,t=xm(e,i))),t===1))throw n=cu,so(e,0),Bs(e,r),Nn(e,Nt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Ee(345));case 2:Di(e,An,rs);break;case 3:if(Bs(e,r),(r&130023424)===r&&(t=my+500-Nt(),10<t)){if(xd(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){_n(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=tm(Di.bind(null,e,An,rs),t);break}Di(e,An,rs);break;case 4:if(Bs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ar(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W2(r/1960))-r,10<r){e.timeoutHandle=tm(Di.bind(null,e,An,rs),r);break}Di(e,An,rs);break;case 5:Di(e,An,rs);break;default:throw Error(Ee(329))}}}return Nn(e,Nt()),e.callbackNode===n?l1.bind(null,e):null}function xm(e,t){var n=Nl;return e.current.memoizedState.isDehydrated&&(so(e,t).flags|=256),e=Fd(e,t),e!==2&&(t=An,An=n,t!==null&&_m(t)),e}function _m(e){An===null?An=e:An.push.apply(An,e)}function H2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Or(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~py,t&=~gf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ar(t),r=1<<n;e[n]=-1,t&=~r}}function yw(e){if(lt&6)throw Error(Ee(327));la();var t=xd(e,0);if(!(t&1))return Nn(e,Nt()),null;var n=Fd(e,t);if(e.tag!==0&&n===2){var r=qp(e);r!==0&&(t=r,n=xm(e,r))}if(n===1)throw n=cu,so(e,0),Bs(e,t),Nn(e,Nt()),n;if(n===6)throw Error(Ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Di(e,An,rs),Nn(e,Nt()),null}function gy(e,t){var n=lt;lt|=1;try{return e(t)}finally{lt=n,lt===0&&(Aa=Nt()+500,ff&&vi())}}function ho(e){Xs!==null&&Xs.tag===0&&!(lt&6)&&la();var t=lt;lt|=1;var n=dr.transition,r=dt;try{if(dr.transition=null,dt=1,e)return e()}finally{dt=r,dr.transition=n,lt=t,!(lt&6)&&vi()}}function yy(){Un=Jo.current,yt(Jo)}function so(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_2(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(Jg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cd();break;case 3:Ta(),yt(In),yt(gn),oy();break;case 5:iy(r);break;case 4:Ta();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:ty(r.type._context);break;case 22:case 23:yy()}n=n.return}if(en=e,Bt=e=ui(e.current,null),sn=Un=t,Wt=0,cu=null,py=gf=fo=0,An=Nl=null,zi!==null){for(t=0;t<zi.length;t++)if(n=zi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zi=null}return e}function u1(e,t){do{var n=Bt;try{if(ey(),td.current=Nd,Dd){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dd=!1}if(co=0,Zt=Vt=Et=null,Il=!1,au=0,hy.current=null,n===null||n.return===null){Wt=1,cu=t,Bt=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=sw(o);if(m!==null){m.flags&=-257,iw(m,o,a,i,t),m.mode&1&&rw(i,u,t),t=m,l=u;var _=t.updateQueue;if(_===null){var v=new Set;v.add(l),t.updateQueue=v}else _.add(l);break e}else{if(!(t&1)){rw(i,u,t),vy();break e}l=Error(Ee(426))}}else if(wt&&a.mode&1){var b=sw(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),iw(b,o,a,i,t),Zg(Pa(l,a));break e}}i=l=Pa(l,a),Wt!==4&&(Wt=2),Nl===null?Nl=[i]:Nl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Hk(i,l,t);J0(i,g);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ai===null||!ai.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=qk(i,a,t);J0(i,C);break e}}i=i.return}while(i!==null)}f1(n)}catch(O){t=O,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function c1(){var e=Ld.current;return Ld.current=Nd,e===null?Nd:e}function vy(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),en===null||!(fo&268435455)&&!(gf&268435455)||Bs(en,sn)}function Fd(e,t){var n=lt;lt|=2;var r=c1();(en!==e||sn!==t)&&(rs=null,so(e,t));do try{q2();break}catch(s){u1(e,s)}while(!0);if(ey(),lt=n,Ld.current=r,Bt!==null)throw Error(Ee(261));return en=null,sn=0,Wt}function q2(){for(;Bt!==null;)d1(Bt)}function G2(){for(;Bt!==null&&!wP();)d1(Bt)}function d1(e){var t=p1(e.alternate,e,Un);e.memoizedProps=e.pendingProps,t===null?f1(e):Bt=t,hy.current=null}function f1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=U2(n,t),n!==null){n.flags&=32767,Bt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,Bt=null;return}}else if(n=B2(n,t,Un),n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Wt===0&&(Wt=5)}function Di(e,t,n){var r=dt,s=dr.transition;try{dr.transition=null,dt=1,Q2(e,t,n,r)}finally{dr.transition=s,dt=r}return null}function Q2(e,t,n,r){do la();while(Xs!==null);if(lt&6)throw Error(Ee(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ee(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(AP(e,i),e===en&&(Bt=en=null,sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ic||(Ic=!0,m1(bd,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dr.transition,dr.transition=null;var o=dt;dt=1;var a=lt;lt|=4,hy.current=null,V2(e,n),o1(n,e),m2(Xp),_d=!!Zp,Xp=Zp=null,e.current=n,K2(n),bP(),lt=a,dt=o,dr.transition=i}else e.current=n;if(Ic&&(Ic=!1,Xs=e,Md=s),i=e.pendingLanes,i===0&&(ai=null),kP(n.stateNode),Nn(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($d)throw $d=!1,e=wm,wm=null,e;return Md&1&&e.tag!==0&&la(),i=e.pendingLanes,i&1?e===bm?Ll++:(Ll=0,bm=e):Ll=0,vi(),null}function la(){if(Xs!==null){var e=H_(Md),t=dr.transition,n=dt;try{if(dr.transition=null,dt=16>e?16:e,Xs===null)var r=!1;else{if(e=Xs,Xs=null,Md=0,lt&6)throw Error(Ee(331));var s=lt;for(lt|=4,Be=e.current;Be!==null;){var i=Be,o=i.child;if(Be.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Be=u;Be!==null;){var c=Be;switch(c.tag){case 0:case 11:case 15:Dl(8,c,i)}var f=c.child;if(f!==null)f.return=c,Be=f;else for(;Be!==null;){c=Be;var h=c.sibling,m=c.return;if(r1(c),c===u){Be=null;break}if(h!==null){h.return=m,Be=h;break}Be=m}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Be=o;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Dl(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Be=g;break e}Be=i.return}}var y=e.current;for(Be=y;Be!==null;){o=Be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Be=w;else e:for(o=y;Be!==null;){if(a=Be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mf(9,a)}}catch(O){jt(a,a.return,O)}if(a===o){Be=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Be=C;break e}Be=a.return}}if(lt=s,vi(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(af,e)}catch{}r=!0}return r}finally{dt=n,dr.transition=t}}return!1}function vw(e,t,n){t=Pa(n,t),t=Hk(e,t,1),e=oi(e,t,1),t=_n(),e!==null&&(Pu(e,1,t),Nn(e,t))}function jt(e,t,n){if(e.tag===3)vw(e,e,n);else for(;t!==null;){if(t.tag===3){vw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){e=Pa(n,e),e=qk(t,e,1),t=oi(t,e,1),e=_n(),t!==null&&(Pu(t,1,e),Nn(t,e));break}}t=t.return}}function Y2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_n(),e.pingedLanes|=e.suspendedLanes&n,en===e&&(sn&n)===n&&(Wt===4||Wt===3&&(sn&130023424)===sn&&500>Nt()-my?so(e,0):py|=n),Nn(e,t)}function h1(e,t){t===0&&(e.mode&1?(t=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):t=1);var n=_n();e=gs(e,t),e!==null&&(Pu(e,t,n),Nn(e,n))}function J2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),h1(e,n)}function Z2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(t),h1(e,n)}var p1;p1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||In.current)On=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return On=!1,F2(e,t,n);On=!!(e.flags&131072)}else On=!1,wt&&t.flags&1048576&&vk(t,Ad,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rd(e,t),e=t.pendingProps;var s=Sa(t,gn.current);aa(t,n),s=ly(null,t,r,e,s,n);var i=uy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dn(r)?(i=!0,Td(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ry(t),s.updater=pf,t.stateNode=s,s._reactInternals=t,lm(t,r,e,n),t=dm(null,t,r,!0,i,n)):(t.tag=0,wt&&i&&Yg(t),bn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=eA(r),e=_r(r,e),s){case 0:t=cm(null,t,r,e,n);break e;case 1:t=lw(null,t,r,e,n);break e;case 11:t=ow(null,t,r,e,n);break e;case 14:t=aw(null,t,r,_r(r.type,e),n);break e}throw Error(Ee(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_r(r,s),cm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_r(r,s),lw(e,t,r,s,n);case 3:e:{if(Jk(t),e===null)throw Error(Ee(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Sk(e,t),Rd(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Pa(Error(Ee(423)),t),t=uw(e,t,r,n,s);break e}else if(r!==s){s=Pa(Error(Ee(424)),t),t=uw(e,t,r,n,s);break e}else for(zn=ii(t.stateNode.containerInfo.firstChild),Vn=t,wt=!0,Tr=null,n=_k(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),r===s){t=ys(e,t,n);break e}bn(e,t,r,n)}t=t.child}return t;case 5:return Ek(t),e===null&&im(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,em(r,s)?o=null:i!==null&&em(r,i)&&(t.flags|=32),Yk(e,t),bn(e,t,o,n),t.child;case 6:return e===null&&im(t),null;case 13:return Zk(e,t,n);case 4:return sy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ca(t,null,r,n):bn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_r(r,s),ow(e,t,r,s,n);case 7:return bn(e,t,t.pendingProps,n),t.child;case 8:return bn(e,t,t.pendingProps.children,n),t.child;case 12:return bn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,mt(jd,r._currentValue),r._currentValue=o,i!==null)if(Or(i.value,o)){if(i.children===s.children&&!In.current){t=ys(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ds(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),om(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),om(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,aa(t,n),s=hr(s),r=r(s),t.flags|=1,bn(e,t,r,n),t.child;case 14:return r=t.type,s=_r(r,t.pendingProps),s=_r(r.type,s),aw(e,t,r,s,n);case 15:return Gk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:_r(r,s),rd(e,t),t.tag=1,Dn(r)?(e=!0,Td(t)):e=!1,aa(t,n),Wk(t,r,s),lm(t,r,s,n),dm(null,t,r,!0,e,n);case 19:return Xk(e,t,n);case 22:return Qk(e,t,n)}throw Error(Ee(156,t.tag))};function m1(e,t){return z_(e,t)}function X2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,n,r){return new X2(e,t,n,r)}function wy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eA(e){if(typeof e=="function")return wy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mg)return 11;if(e===Fg)return 14}return 2}function ui(e,t){var n=e.alternate;return n===null?(n=ur(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function od(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")wy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Uo:return io(n.children,s,i,t);case $g:o=8,s|=8;break;case Rp:return e=ur(12,n,t,s|2),e.elementType=Rp,e.lanes=i,e;case Ip:return e=ur(13,n,t,s),e.elementType=Ip,e.lanes=i,e;case Dp:return e=ur(19,n,t,s),e.elementType=Dp,e.lanes=i,e;case E_:return yf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k_:o=10;break e;case S_:o=9;break e;case Mg:o=11;break e;case Fg:o=14;break e;case $s:o=16,r=null;break e}throw Error(Ee(130,e==null?e:typeof e,""))}return t=ur(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function io(e,t,n,r){return e=ur(7,e,r,t),e.lanes=n,e}function yf(e,t,n,r){return e=ur(22,e,r,t),e.elementType=E_,e.lanes=n,e.stateNode={isHidden:!1},e}function Yh(e,t,n){return e=ur(6,e,null,t),e.lanes=n,e}function Jh(e,t,n){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function by(e,t,n,r,s,i,o,a,l){return e=new tA(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ur(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ry(i),e}function nA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function g1(e){if(!e)return hi;e=e._reactInternals;e:{if(yo(e)!==e||e.tag!==1)throw Error(Ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ee(171))}if(e.tag===1){var n=e.type;if(Dn(n))return gk(e,n,t)}return t}function y1(e,t,n,r,s,i,o,a,l){return e=by(n,r,!0,e,s,i,o,a,l),e.context=g1(null),n=e.current,r=_n(),s=li(n),i=ds(r,s),i.callback=t??null,oi(n,i,s),e.current.lanes=s,Pu(e,s,r),Nn(e,r),e}function vf(e,t,n,r){var s=t.current,i=_n(),o=li(s);return n=g1(n),t.context===null?t.context=n:t.pendingContext=n,t=ds(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=oi(s,t,o),e!==null&&(jr(e,s,o,i),ed(e,s,o)),o}function Bd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ww(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xy(e,t){ww(e,t),(e=e.alternate)&&ww(e,t)}function rA(){return null}var v1=typeof reportError=="function"?reportError:function(e){console.error(e)};function _y(e){this._internalRoot=e}wf.prototype.render=_y.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));vf(e,t,null,null)};wf.prototype.unmount=_y.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ho(function(){vf(null,e,null,null)}),t[ms]=null}};function wf(e){this._internalRoot=e}wf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fs.length&&t!==0&&t<Fs[n].priority;n++);Fs.splice(n,0,e),n===0&&J_(e)}};function ky(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bw(){}function sA(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Bd(o);i.call(u)}}var o=y1(t,r,e,0,null,!1,!1,"",bw);return e._reactRootContainer=o,e[ms]=o.current,nu(e.nodeType===8?e.parentNode:e),ho(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Bd(l);a.call(u)}}var l=by(e,0,!1,null,null,!1,!1,"",bw);return e._reactRootContainer=l,e[ms]=l.current,nu(e.nodeType===8?e.parentNode:e),ho(function(){vf(t,l,n,r)}),l}function xf(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Bd(o);a.call(l)}}vf(t,o,e,s)}else o=sA(n,t,e,s,r);return Bd(o)}q_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bl(t.pendingLanes);n!==0&&(zg(t,n|1),Nn(t,Nt()),!(lt&6)&&(Aa=Nt()+500,vi()))}break;case 13:ho(function(){var r=gs(e,1);if(r!==null){var s=_n();jr(r,e,1,s)}}),xy(e,1)}};Vg=function(e){if(e.tag===13){var t=gs(e,134217728);if(t!==null){var n=_n();jr(t,e,134217728,n)}xy(e,134217728)}};G_=function(e){if(e.tag===13){var t=li(e),n=gs(e,t);if(n!==null){var r=_n();jr(n,e,t,r)}xy(e,t)}};Q_=function(){return dt};Y_=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};Kp=function(e,t,n){switch(t){case"input":if($p(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=df(r);if(!s)throw Error(Ee(90));T_(r),$p(r,s)}}}break;case"textarea":A_(e,n);break;case"select":t=n.value,t!=null&&ra(e,!!n.multiple,t,!1)}};L_=gy;$_=ho;var iA={usingClientEntryPoint:!1,Events:[ju,Wo,df,D_,N_,gy]},dl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oA={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=B_(e),e===null?null:e.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||rA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{af=Dc.inject(oA),Hr=Dc}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;Hn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ky(t))throw Error(Ee(200));return nA(e,t,null,n)};Hn.createRoot=function(e,t){if(!ky(e))throw Error(Ee(299));var n=!1,r="",s=v1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=by(e,1,!1,null,null,n,!1,r,s),e[ms]=t.current,nu(e.nodeType===8?e.parentNode:e),new _y(t)};Hn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=B_(t),e=e===null?null:e.stateNode,e};Hn.flushSync=function(e){return ho(e)};Hn.hydrate=function(e,t,n){if(!bf(t))throw Error(Ee(200));return xf(null,e,t,!0,n)};Hn.hydrateRoot=function(e,t,n){if(!ky(e))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=y1(t,null,e,1,n??null,s,!1,i,o),e[ms]=t.current,nu(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new wf(t)};Hn.render=function(e,t,n){if(!bf(t))throw Error(Ee(200));return xf(null,e,t,!1,n)};Hn.unmountComponentAtNode=function(e){if(!bf(e))throw Error(Ee(40));return e._reactRootContainer?(ho(function(){xf(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Hn.unstable_batchedUpdates=gy;Hn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bf(n))throw Error(Ee(200));if(e==null||e._reactInternals===void 0)throw Error(Ee(38));return xf(e,t,n,!1,r)};Hn.version="18.3.1-next-f1338f8080-20240426";function w1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w1)}catch(e){console.error(e)}}w1(),w_.exports=Hn;var Sy=w_.exports;const aA=sf(Sy);var xw=Sy;jp.createRoot=xw.createRoot,jp.hydrateRoot=xw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _w="popstate";function lA(e={}){function t(s,i){let{pathname:o="/",search:a="",hash:l=""}=vo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),km("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:du(i))}function r(s,i){Wn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return cA(t,n,r,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Wn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uA(){return Math.random().toString(36).substring(2,10)}function kw(e,t){return{usr:e.state,key:e.key,idx:t}}function km(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vo(t):t,state:n,key:t&&t.key||r||uA()}}function du({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function vo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function cA(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let b=c(),g=b==null?null:b-u;u=b,l&&l({action:a,location:v.location,delta:g})}function h(b,g){a="PUSH";let y=km(v.location,b,g);n&&n(y,b),u=c()+1;let w=kw(y,u),C=v.createHref(y);try{o.pushState(w,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function m(b,g){a="REPLACE";let y=km(v.location,b,g);n&&n(y,b),u=c();let w=kw(y,u),C=v.createHref(y);o.replaceState(w,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function _(b){return dA(b)}let v={get action(){return a},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_w,f),l=b,()=>{s.removeEventListener(_w,f),l=null}},createHref(b){return t(s,b)},createURL:_,encodeLocation(b){let g=_(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:m,go(b){return o.go(b)}};return v}function dA(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:du(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function b1(e,t,n="/"){return fA(e,t,n,!1)}function fA(e,t,n,r){let s=typeof t=="string"?vo(t):t,i=vs(s.pathname||"/",n);if(i==null)return null;let o=x1(e);hA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=SA(i);a=_A(o[l],u,r)}return a}function x1(e,t=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;xt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let f=fs([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),x1(o.children,t,h,f,l)),!(o.path==null&&!o.index)&&t.push({path:f,score:bA(f,o.index),routesMeta:h})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of _1(o.path))i(o,a,!0,u)}),t}function _1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function hA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var pA=/^:[\w-]+$/,mA=3,gA=2,yA=1,vA=10,wA=-2,Sw=e=>e==="*";function bA(e,t){let n=e.split("/"),r=n.length;return n.some(Sw)&&(r+=wA),t&&(r+=gA),n.filter(s=>!Sw(s)).reduce((s,i)=>s+(pA.test(i)?mA:i===""?yA:vA),r)}function xA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function _A(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=Ud({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Ud({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:fs([i,f.pathname]),pathnameBase:PA(fs([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=fs([i,f.pathnameBase]))}return o}function Ud(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},h)=>{if(c==="*"){let _=a[h]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const m=a[h];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function kA(e,t=!1,n=!0){Wn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function SA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function EA(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?vo(e):e;return{pathname:n?n.startsWith("/")?n:CA(n,t):t,search:AA(r),hash:jA(s)}}function CA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ey(e){let t=TA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Cy(e,t,n,r=!1){let s;typeof e=="string"?s=vo(e):(s={...e},xt(!s.pathname||!s.pathname.includes("?"),Zh("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Zh("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Zh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=EA(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var fs=e=>e.join("/").replace(/\/\/+/g,"/"),PA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function OA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var k1=["POST","PUT","PATCH","DELETE"];new Set(k1);var RA=["GET",...k1];new Set(RA);var Ma=S.createContext(null);Ma.displayName="DataRouter";var _f=S.createContext(null);_f.displayName="DataRouterState";S.createContext(!1);var S1=S.createContext({isTransitioning:!1});S1.displayName="ViewTransition";var IA=S.createContext(new Map);IA.displayName="Fetchers";var DA=S.createContext(null);DA.displayName="Await";var Rr=S.createContext(null);Rr.displayName="Navigation";var Ru=S.createContext(null);Ru.displayName="Location";var Ir=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var Ty=S.createContext(null);Ty.displayName="RouteError";function NA(e,{relative:t}={}){xt(Fa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Rr),{hash:s,pathname:i,search:o}=Iu(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:fs([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Fa(){return S.useContext(Ru)!=null}function Gn(){return xt(Fa(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Ru).location}var E1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function C1(e){S.useContext(Rr).static||S.useLayoutEffect(e)}function Qn(){let{isDataRoute:e}=S.useContext(Ir);return e?GA():LA()}function LA(){xt(Fa(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Ma),{basename:t,navigator:n}=S.useContext(Rr),{matches:r}=S.useContext(Ir),{pathname:s}=Gn(),i=JSON.stringify(Ey(r)),o=S.useRef(!1);return C1(()=>{o.current=!0}),S.useCallback((l,u={})=>{if(Wn(o.current,E1),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Cy(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:fs([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}S.createContext(null);function Ba(){let{matches:e}=S.useContext(Ir),t=e[e.length-1];return t?t.params:{}}function Iu(e,{relative:t}={}){let{matches:n}=S.useContext(Ir),{pathname:r}=Gn(),s=JSON.stringify(Ey(n));return S.useMemo(()=>Cy(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function $A(e,t){return T1(e,t)}function T1(e,t,n,r,s){var y;xt(Fa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Rr),{matches:o}=S.useContext(Ir),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let w=f&&f.path||"";P1(u,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=Gn(),m;if(t){let w=typeof t=="string"?vo(t):t;xt(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=h;let _=m.pathname||"/",v=_;if(c!=="/"){let w=c.replace(/^\//,"").split("/");v="/"+_.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=b1(e,{pathname:v});Wn(f||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Wn(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=zA(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:fs([c,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:fs([c,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,s);return t&&g?S.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function MA(){let e=qA(),t=OA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:s},n):null,o)}var FA=S.createElement(MA,null),BA=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(Ir.Provider,{value:this.props.routeContext},S.createElement(Ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UA({routeContext:e,match:t,children:n}){let r=S.useContext(Ma);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Ir.Provider,{value:e},n)}function zA(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);xt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:f,errors:h}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,f)=>{let h,m=!1,_=null,v=null;n&&(h=o&&c.route.id?o[c.route.id]:void 0,_=c.route.errorElement||FA,a&&(l<0&&f===0?(P1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=c.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,f+1)),g=()=>{let y;return h?y=_:m?y=v:c.route.Component?y=S.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,S.createElement(UA,{match:c,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?S.createElement(BA,{location:n.location,revalidation:n.revalidation,component:_,error:h,children:g(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:r}):g()},null)}function Py(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VA(e){let t=S.useContext(Ma);return xt(t,Py(e)),t}function KA(e){let t=S.useContext(_f);return xt(t,Py(e)),t}function WA(e){let t=S.useContext(Ir);return xt(t,Py(e)),t}function Ay(e){let t=WA(e),n=t.matches[t.matches.length-1];return xt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function HA(){return Ay("useRouteId")}function qA(){var r;let e=S.useContext(Ty),t=KA("useRouteError"),n=Ay("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function GA(){let{router:e}=VA("useNavigate"),t=Ay("useNavigate"),n=S.useRef(!1);return C1(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{Wn(n.current,E1),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Ew={};function P1(e,t,n){!t&&!Ew[e]&&(Ew[e]=!0,Wn(!1,n))}S.memo(QA);function QA({routes:e,future:t,state:n,unstable_onError:r}){return T1(e,void 0,n,r,t)}function A1({to:e,replace:t,state:n,relative:r}){xt(Fa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(Rr);Wn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(Ir),{pathname:o}=Gn(),a=Qn(),l=Cy(e,Ey(i),o,r==="path"),u=JSON.stringify(l);return S.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function Qt(e){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){xt(!Fa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=vo(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:h="default"}=n,m=S.useMemo(()=>{let _=vs(l,o);return _==null?null:{location:{pathname:_,search:u,hash:c,state:f,key:h},navigationType:r}},[o,l,u,c,f,h,r]);return Wn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:S.createElement(Rr.Provider,{value:a},S.createElement(Ru.Provider,{children:t,value:m}))}function JA({children:e,location:t}){return $A(Sm(e),t)}function Sm(e,t=[]){let n=[];return S.Children.forEach(e,(r,s)=>{if(!S.isValidElement(r))return;let i=[...t,s];if(r.type===S.Fragment){n.push.apply(n,Sm(r.props.children,i));return}xt(r.type===Qt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sm(r.props.children,i)),n.push(o)}),n}var ad="get",ld="application/x-www-form-urlencoded";function kf(e){return e!=null&&typeof e.tagName=="string"}function ZA(e){return kf(e)&&e.tagName.toLowerCase()==="button"}function XA(e){return kf(e)&&e.tagName.toLowerCase()==="form"}function ej(e){return kf(e)&&e.tagName.toLowerCase()==="input"}function tj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nj(e,t){return e.button===0&&(!t||t==="_self")&&!tj(e)}function Em(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function rj(e,t){let n=Em(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Nc=null;function sj(){if(Nc===null)try{new FormData(document.createElement("form"),0),Nc=!1}catch{Nc=!0}return Nc}var ij=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xh(e){return e!=null&&!ij.has(e)?(Wn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):e}function oj(e,t){let n,r,s,i,o;if(XA(e)){let a=e.getAttribute("action");r=a?vs(a,t):null,n=e.getAttribute("method")||ad,s=Xh(e.getAttribute("enctype"))||ld,i=new FormData(e)}else if(ZA(e)||ej(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?vs(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ad,s=Xh(e.getAttribute("formenctype"))||Xh(a.getAttribute("enctype"))||ld,i=new FormData(a,e),!sj()){let{name:u,type:c,value:f}=e;if(c==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,f)}}else{if(kf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ad,r=null,s=ld,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function aj(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&vs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function lj(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uj(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function cj(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await lj(i,n);return o.links?o.links():[]}return[]}));return pj(r.flat(1).filter(uj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Cw(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function dj(e,t,{includeHydrateFallback:n}={}){return fj(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function fj(e){return[...new Set(e)]}function hj(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function pj(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(hj(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function j1(){let e=S.useContext(Ma);return jy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function mj(){let e=S.useContext(_f);return jy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Oy=S.createContext(void 0);Oy.displayName="FrameworkContext";function O1(){let e=S.useContext(Oy);return jy(e,"You must render this element inside a <HydratedRouter> element"),e}function gj(e,t){let n=S.useContext(Oy),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,h=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[e]),S.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,h,{}]:[i,h,{onFocus:fl(a,m),onBlur:fl(l,_),onMouseEnter:fl(u,m),onMouseLeave:fl(c,_),onTouchStart:fl(f,m)}]:[!1,h,{}]}function fl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function yj({page:e,...t}){let{router:n}=j1(),r=S.useMemo(()=>b1(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(wj,{page:e,matches:r,...t}):null}function vj(e){let{manifest:t,routeModules:n}=O1(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return cj(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function wj({page:e,matches:t,...n}){let r=Gn(),{manifest:s,routeModules:i}=O1(),{basename:o}=j1(),{loaderData:a,matches:l}=mj(),u=S.useMemo(()=>Cw(e,t,l,s,r,"data"),[e,t,l,s,r]),c=S.useMemo(()=>Cw(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,v=!1;if(t.forEach(g=>{var w;let y=s.routes[g.route.id];!y||!y.hasLoader||(!u.some(C=>C.route.id===g.route.id)&&g.route.id in a&&((w=i[g.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?v=!0:_.add(g.route.id))}),_.size===0)return[];let b=aj(e,o,"data");return v&&_.size>0&&b.searchParams.set("_routes",t.filter(g=>_.has(g.route.id)).map(g=>g.route.id).join(",")),[b.pathname+b.search]},[o,a,r,s,u,t,e,i]),h=S.useMemo(()=>dj(c,s),[c,s]),m=vj(c);return S.createElement(S.Fragment,null,f.map(_=>S.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),h.map(_=>S.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),m.map(({key:_,link:v})=>S.createElement("link",{key:_,nonce:n.nonce,...v})))}function bj(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var R1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R1&&(window.__reactRouterVersion="7.9.3")}catch{}function xj({basename:e,children:t,window:n}){let r=S.useRef();r.current==null&&(r.current=lA({window:n,v5Compat:!0}));let s=r.current,[i,o]=S.useState({action:s.action,location:s.location}),a=S.useCallback(l=>{S.startTransition(()=>o(l))},[o]);return S.useLayoutEffect(()=>s.listen(a),[s,a]),S.createElement(YA,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var I1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...h},m){let{basename:_}=S.useContext(Rr),v=typeof u=="string"&&I1.test(u),b,g=!1;if(typeof u=="string"&&v&&(b=u,R1))try{let F=new URL(window.location.href),z=u.startsWith("//")?new URL(F.protocol+u):new URL(u),de=vs(z.pathname,_);z.origin===F.origin&&de!=null?u=de+z.search+z.hash:g=!0}catch{Wn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=NA(u,{relative:s}),[w,C,O]=gj(r,h),I=Ej(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function R(F){t&&t(F),F.defaultPrevented||I(F)}let $=S.createElement("a",{...h,...O,href:b||y,onClick:g||i?t:R,ref:bj(m,C),target:l,"data-discover":!v&&n==="render"?"true":void 0});return w&&!v?S.createElement(S.Fragment,null,$,S.createElement(yj,{page:y})):$});ar.displayName="Link";var _j=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let f=Iu(o,{relative:u.relative}),h=Gn(),m=S.useContext(_f),{navigator:_,basename:v}=S.useContext(Rr),b=m!=null&&Oj(f)&&a===!0,g=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,y=h.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,g=g.toLowerCase()),w&&v&&(w=vs(w,v)||w);const C=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let O=y===g||!s&&y.startsWith(g)&&y.charAt(C)==="/",I=w!=null&&(w===g||!s&&w.startsWith(g)&&w.charAt(g.length)==="/"),R={isActive:O,isPending:I,isTransitioning:b},$=O?t:void 0,F;typeof r=="function"?F=r(R):F=[r,O?"active":null,I?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(R):i;return S.createElement(ar,{...u,"aria-current":$,className:F,ref:c,style:z,to:o,viewTransition:a},typeof l=="function"?l(R):l)});_j.displayName="NavLink";var kj=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=ad,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...h},m)=>{let _=Aj(),v=jj(a,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&I1.test(a),y=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,O=(C==null?void 0:C.getAttribute("formmethod"))||o;_(C||w.currentTarget,{fetcherKey:t,method:O,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:f})};return S.createElement("form",{ref:m,method:b,action:v,onSubmit:r?l:y,...h,"data-discover":!g&&e==="render"?"true":void 0})});kj.displayName="Form";function Sj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D1(e){let t=S.useContext(Ma);return xt(t,Sj(e)),t}function Ej(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Qn(),l=Gn(),u=Iu(e,{relative:i});return S.useCallback(c=>{if(nj(c,t)){c.preventDefault();let f=n!==void 0?n:du(l)===du(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}function Cj(e){Wn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=S.useRef(Em(e)),n=S.useRef(!1),r=Gn(),s=S.useMemo(()=>rj(r.search,n.current?null:t.current),[r.search]),i=Qn(),o=S.useCallback((a,l)=>{const u=Em(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var Tj=0,Pj=()=>`__${String(++Tj)}__`;function Aj(){let{router:e}=D1("useSubmit"),{basename:t}=S.useContext(Rr),n=HA();return S.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=oj(r,t);if(s.navigate===!1){let c=s.fetcherKey||Pj();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function jj(e,{relative:t}={}){let{basename:n}=S.useContext(Rr),r=S.useContext(Ir);xt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Iu(e||".",{relative:t})},o=Gn();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:fs([n,i.pathname])),du(i)}function Oj(e,{relative:t}={}){let n=S.useContext(S1);xt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=D1("useViewTransitionState"),s=Iu(e,{relative:t});if(!n.isTransitioning)return!1;let i=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ud(s.pathname,o)!=null||Ud(s.pathname,i)!=null}const wi="https://script.google.com/macros/s/AKfycbzcaAE9OcLaqxKYvLyMdH4HwodXdw1zSY5QtKmztDNd9Bfaj90URCzWB1j1i6A9a2a5Bw/exec",N1="radtpoqypgqetijvopho",Rj=["searchIndex","allSongs"],Ij=e=>["book-download-status",e],Dj="modulepreload",Nj=function(e){return"/new-sankeertan/"+e},Tw={},Ua=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Nj(l),l in Tw)return;Tw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Dj,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Lj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ry extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Pw extends Ry{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Aw extends Ry{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jw extends Ry{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cm||(Cm={}));var $j=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Mj{constructor(t,{headers:n={},customFetch:r,region:s=Cm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Lj(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $j(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const f=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let h;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(u["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(u["Content-Type"]="application/json",h=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Pw(g)}),_=m.headers.get("x-relay-error");if(_&&_==="true")throw new Aw(m);if(!m.ok)throw new jw(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield m.json():v==="application/octet-stream"?b=yield m.blob():v==="text/event-stream"?b=m:v==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Pw(i)}:{data:null,error:i,response:i instanceof jw||i instanceof Aw?i.context:void 0}}})}}var jn={},Iy={},Sf={},Du={},Ef={},Cf={},Fj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ja=Fj();const Bj=ja.fetch,L1=ja.fetch.bind(ja),$1=ja.Headers,Uj=ja.Request,zj=ja.Response,za=Object.freeze(Object.defineProperty({__proto__:null,Headers:$1,Request:Uj,Response:zj,default:L1,fetch:Bj},Symbol.toStringTag,{value:"Module"})),Vj=NT(za);var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});let Kj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Tf.default=Kj;var M1=Xt&&Xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});const Wj=M1(Vj),Hj=M1(Tf);let qj=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Wj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,f=null,h=null,m=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,_="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(f=[],c=null,m=200,_="OK")}catch{i.status===404&&b===""?(m=204,_="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,_="OK"),c&&this.shouldThrowOnError)throw new Hj.default(c)}return{error:c,data:f,count:h,status:m,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Cf.default=qj;var Gj=Xt&&Xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});const Qj=Gj(Cf);let Yj=class extends Qj.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ef.default=Yj;var Jj=Xt&&Xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Du,"__esModule",{value:!0});const Zj=Jj(Ef);let Xj=class extends Zj.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Du.default=Xj;var eO=Xt&&Xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const hl=eO(Du);let tO=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new hl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new hl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new hl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new hl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new hl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Sf.default=tO;var F1=Xt&&Xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Iy,"__esModule",{value:!0});const nO=F1(Sf),rO=F1(Du);let sO=class B1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new nO.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new B1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new rO.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Iy.default=sO;var Va=Xt&&Xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jn,"__esModule",{value:!0});jn.PostgrestError=jn.PostgrestBuilder=jn.PostgrestTransformBuilder=jn.PostgrestFilterBuilder=jn.PostgrestQueryBuilder=jn.PostgrestClient=void 0;const U1=Va(Iy);jn.PostgrestClient=U1.default;const z1=Va(Sf);jn.PostgrestQueryBuilder=z1.default;const V1=Va(Du);jn.PostgrestFilterBuilder=V1.default;const K1=Va(Ef);jn.PostgrestTransformBuilder=K1.default;const W1=Va(Cf);jn.PostgrestBuilder=W1.default;const H1=Va(Tf);jn.PostgrestError=H1.default;var iO=jn.default={PostgrestClient:U1.default,PostgrestQueryBuilder:z1.default,PostgrestFilterBuilder:V1.default,PostgrestTransformBuilder:K1.default,PostgrestBuilder:W1.default,PostgrestError:H1.default};const{PostgrestClient:oO,PostgrestQueryBuilder:pU,PostgrestFilterBuilder:mU,PostgrestTransformBuilder:gU,PostgrestBuilder:yU,PostgrestError:vU}=iO;class aO{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const lO="2.74.0",uO=`realtime-js/${lO}`,cO="1.0.0",Tm=1e4,dO=1e3,fO=100;var $l;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($l||($l={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var Cr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Cr||(Cr={}));var Pm;(function(e){e.websocket="websocket"})(Pm||(Pm={}));var Mi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Mi||(Mi={}));class hO{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class q1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pt||(pt={}));const Ow=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=pO(o,e,t,s),i),{}):{}},pO=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?G1(i,o):Am(o)},G1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return vO(t,n)}switch(e){case pt.bool:return mO(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return gO(t);case pt.json:case pt.jsonb:return yO(t);case pt.timestamp:return wO(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return Am(t);default:return Am(t)}},Am=e=>e,mO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},gO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},vO=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>G1(t,a))}return e},wO=e=>typeof e=="string"?e.replace(" ","T"):e,Q1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ep{constructor(t,n,r={},s=Tm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rw||(Rw={}));class Ml{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ml.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ml.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ml.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const h=c.map(b=>b.presence_ref),m=f.map(b=>b.presence_ref),_=c.filter(b=>m.indexOf(b.presence_ref)<0),v=f.filter(b=>h.indexOf(b.presence_ref)<0);_.length>0&&(a[u]=_),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(m=>m.presence_ref),h=c.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...h)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Iw||(Iw={}));var Fl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fl||(Fl={}));var ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class Dy{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ep(this,Cr.join,this.params,this.timeout),this.rejoinTimer=new q1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ml(this),this.broadcastEndpointURL=Q1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Fl.PRESENCE]&&this.bindings[Fl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ss.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ss.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var _;if(this.socket.setAuth(),m===void 0){t==null||t(ss.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(_=v==null?void 0:v.length)!==null&&_!==void 0?_:0,g=[];for(let y=0;y<b;y++){const w=v[y],{filter:{event:C,schema:O,table:I,filter:R}}=w,$=m&&m[y];if($&&$.event===C&&$.schema===O&&$.table===I&&$.filter===R)g.push(Object.assign(Object.assign({},w),{id:$.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ss.SUBSCRIBED);return}}).receive("error",m=>{this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===zt.joined&&t===Fl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ep(this,Cr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ep(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>fO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Cr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var _,v,b;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((b=(v=m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var _,v,b,g,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,O=(_=m.filter)===null||_===void 0?void 0:_.event;return C&&((v=n.ids)===null||v===void 0?void 0:v.includes(C))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return C==="*"||C===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const _=h.data,{schema:v,table:b,commit_timestamp:g,type:y,errors:w}=_;h=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:g,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(_))}m.callback(h,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Dy.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Cr.close,{},t)}_onError(t){this._on(Cr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ow(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ow(t.columns,t.old_record)),n}}const tp=()=>{},Lc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bO=[1e3,2e3,5e3,1e4],xO=1e4,_O=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kO{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tm,this.transport=null,this.heartbeatIntervalMs=Lc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tp,this.ref=0,this.reconnectTimer=null,this.logger=tp,this.conn=null,this.sendBuffer=[],this.serializer=new hO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ua(async()=>{const{default:a}=await Promise.resolve().then(()=>za);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Pm.websocket}`,this.httpEndpoint=Q1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=aO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cO}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $l.connecting:return Mi.Connecting;case $l.open:return Mi.Open;case $l.closing:return Mi.Closing;default:return Mi.Closed}}isConnected(){return this.connectionState()===Mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Dy(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(dO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Lc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Cr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([_O],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:uO};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Cr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new q1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Tm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Lc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:tp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>bO[f-1]||xO,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ny extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class SO extends Ny{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jm extends Ny{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var EO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Y1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},CO=()=>EO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ua(()=>Promise.resolve().then(()=>za),void 0)).Response:Response}),Om=e=>{if(Array.isArray(e))return e.map(n=>Om(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Om(r)}),t},TO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const np=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),PO=(e,t,n)=>wo(void 0,void 0,void 0,function*(){const r=yield CO();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new SO(np(s),i,o))}).catch(s=>{t(new jm(np(s),s))}):t(new jm(np(e),e))}),AO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(TO(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Nu(e,t,n,r,s,i){return wo(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,AO(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>PO(l,a,r))})})}function zd(e,t,n,r){return wo(this,void 0,void 0,function*(){return Nu(e,"GET",t,n,r)})}function Br(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Nu(e,"POST",t,r,s,n)})}function Rm(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Nu(e,"PUT",t,r,s,n)})}function jO(e,t,n,r){return wo(this,void 0,void 0,function*(){return Nu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function J1(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Nu(e,"DELETE",t,r,s,n)})}var OO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class RO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return OO(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var IO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class DO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new RO(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return IO(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var En=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const NO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class LO{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Y1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return En(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Dw),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?Rm:Br)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return En(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Dw.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield Rm(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return En(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Br(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ny("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}update(t,n,r){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return En(this,void 0,void 0,function*(){try{return{data:yield Br(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return En(this,void 0,void 0,function*(){try{return{data:{path:(yield Br(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return En(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Br(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return En(this,void 0,void 0,function*(){try{const s=yield Br(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>zd(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new DO(l,this.shouldThrowOnError)}info(t){return En(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield zd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Om(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}exists(t){return En(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield jO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r)&&r instanceof jm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return En(this,void 0,void 0,function*(){try{return{data:yield J1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}list(t,n,r){return En(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},NO),n),{prefix:t||""});return{data:yield Br(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}listV2(t,n){return En(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Br(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const $O="2.74.0",MO={"X-Client-Info":`storage-js/${$O}`};var Oo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class FO{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MO),n),this.fetch=Y1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Oo(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}getBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}createBucket(t){return Oo(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Br(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Oo(this,void 0,void 0,function*(){try{return{data:yield Rm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield Br(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield J1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}class BO extends FO{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new LO(this.url,this.headers,t,this.fetch)}}const UO="2.74.0";let _l="";typeof Deno<"u"?_l="deno":typeof document<"u"?_l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_l="react-native":_l="node";const zO={"X-Client-Info":`supabase-js-${_l}/${UO}`},VO={headers:zO},KO={schema:"public"},WO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HO={};var qO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const GO=e=>{let t;return e?t=e:typeof fetch>"u"?t=L1:t=fetch,(...n)=>t(...n)},QO=()=>typeof Headers>"u"?$1:Headers,YO=(e,t,n)=>{const r=GO(n),s=QO();return(i,o)=>qO(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var JO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function ZO(e){return e.endsWith("/")?e:e+"/"}function XO(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>JO(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function eR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ZO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Z1="2.74.0",Mo=30*1e3,Im=3,rp=Im*Mo,tR="http://localhost:9999",nR="supabase.auth.token",rR={"X-Client-Info":`gotrue-js/${Z1}`},Dm="X-Supabase-Api-Version",X1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iR=10*60*1e3;class fu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class oR extends fu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function aR(e){return Ke(e)&&e.name==="AuthApiError"}class Fi extends fu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class bi extends fu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ds extends bi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lR(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class Ro extends bi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $c extends bi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mc extends bi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uR(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class Nw extends bi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nm extends bi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function sp(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class Lw extends bi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Lm extends bi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$w=` 	
\r=`.split(""),cR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$w.length;t+=1)e[$w[t].charCodeAt(0)]=-2;for(let t=0;t<Vd.length;t+=1)e[Vd[t].charCodeAt(0)]=t;return e})();function Mw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vd[r]),t.queuedBits-=6}}function eS(e,t,n){const r=cR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Fw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{hR(o,r,n)};for(let o=0;o<e.length;o+=1)eS(e.charCodeAt(o),s,i);return t.join("")}function dR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fR(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}dR(r,t)}}function hR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ua(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)eS(e.charCodeAt(s),n,r);return new Uint8Array(t)}function pR(e){const t=[];return fR(e,n=>t.push(n)),new Uint8Array(t)}function Ki(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Mw(s,n,r)),Mw(null,n,r),t.join("")}function mR(e){return Math.round(Date.now()/1e3)+e}function gR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Bn=()=>typeof window<"u"&&typeof document<"u",ji={tested:!1,writable:!1},tS=()=>{if(!Bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ji.tested)return ji.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ji.tested=!0,ji.writable=!0}catch{ji.tested=!0,ji.writable=!1}return ji.writable};function yR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const nS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},vR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Is=async(e,t)=>{await e.removeItem(t)};class Pf{constructor(){this.promise=new Pf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Pf.promiseConstructor=Promise;function ip(e){const t=e.split(".");if(t.length!==3)throw new Lm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!sR.test(t[r]))throw new Lm("JWT not in base64url format");return{header:JSON.parse(Fw(t[0])),payload:JSON.parse(Fw(t[1])),signature:ua(t[2]),raw:{header:t[0],payload:t[1]}}}async function wR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function bR(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function xR(e){return("0"+e.toString(16)).substr(-2)}function _R(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,xR).join("")}async function kR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function SR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await kR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Io(e,t,n=!1){const r=_R();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Fo(e,`${t}-code-verifier`,s);const i=await SR(r);return[i,r===i?"plain":"s256"]}const ER=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CR(e){const t=e.headers.get(Dm);if(!t||!t.match(ER))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function TR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const AR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(e){if(!AR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function op(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bw(e){return JSON.parse(JSON.stringify(e))}var jR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ni=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OR=[502,503,504];async function Uw(e){var t;if(!vR(e))throw new Nm(Ni(e),0);if(OR.includes(e.status))throw new Nm(Ni(e),e.status);let n;try{n=await e.json()}catch(i){throw new Fi(Ni(i),i)}let r;const s=CR(e);if(s&&s.getTime()>=X1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Lw(Ni(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ds}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Lw(Ni(n),e.status,n.weak_password.reasons);throw new oR(Ni(n),e.status||500,r)}const RR=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ge(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Dm]||(i[Dm]=X1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await IR(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function IR(e,t,n,r,s,i){const o=RR(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Nm(Ni(l),0)}if(a.ok||await Uw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Uw(l)}}function br(e){var t;let n=null;LR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=mR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function zw(e){const t=br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function DR(e){return{data:e,error:null}}function NR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=jR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Vw(e){return e}function LR(e){return e.access_token&&e.refresh_token&&e.expires_in}const ap=["global","local","others"];var $R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class MR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=nS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ap[0]){if(ap.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ap.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=$R(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vw});if(c.error)throw c.error;const f=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ke(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Do(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Do(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Do(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Do(t.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Do(t.userId),Do(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vw});if(c.error)throw c.error;const f=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ke(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}function Kw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const No={debug:!!(globalThis&&tS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FR extends rS{}async function BR(e,t,n){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),No.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{No.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw No.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(No.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function UR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sS(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function zR(e){return parseInt(e,16)}function VR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function KR(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=sS(e.address),_=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",b=`${_} wants you to sign in with your Ethereum account:
${m}

${v}`;let g=`URI: ${f}
Version: ${h}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}g+=y}return`${b}
${g}`}class $t extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Kd extends $t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function WR({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(oS(o)){if(i.rp.id!==o)return new $t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function HR({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(oS(r)){if(n.rpId!==r)return new $t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var iS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class qR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const GR=new qR;function QR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=iS(e,["challenge","user","excludeCredentials"]),i=ua(t).buffer,o=Object.assign(Object.assign({},n),{id:ua(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ua(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function YR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=iS(e,["challenge","allowCredentials"]),s=ua(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ua(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function JR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ki(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ki(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ZR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ki(new Uint8Array(s.authenticatorData)),clientDataJSON:Ki(new Uint8Array(s.clientDataJSON)),signature:Ki(new Uint8Array(s.signature)),userHandle:s.userHandle?Ki(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function oS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ww(){var e,t;return!!(Bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function XR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",t)}:{data:null,error:new Kd("Empty credential response",t)}}catch(t){return{data:null,error:WR({error:t,options:e})}}}async function eI(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",t)}:{data:null,error:new Kd("Empty credential response",t)}}catch(t){return{data:null,error:HR({error:t,options:e})}}}const tI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},nI={userVerification:"preferred",hints:["security-key"]};function Wd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Wd(a,o):r[i]=Wd(o)}else r[i]=o}return r}function rI(e,t){return Wd(tI,e,t||{})}function sI(e,t){return Wd(nI,e,t||{})}class iI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??GR.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=rI(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:f}=await XR({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=sI(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:f}=await eI(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new fu("rpId is required for WebAuthn authentication")};try{if(!Ww())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new fu("rpId is required for WebAuthn registration")};try{if(!Ww())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in register",o)}}}}UR();const oI={url:tR,storageKey:nR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hw(e,t,n){return await n()}const Lo={};class hu{get jwks(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hu.nextInstanceID,hu.nextInstanceID+=1,this.instanceID>0&&Bn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},oI),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new MR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nS(s.fetch),this.lock=s.lock||Hw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Bn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=BR:this.lock=Hw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iI(this)},this.persistSession?(s.storage?this.storage=s.storage:tS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),Bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Z1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=yR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Bn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uR(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ke(n)?{error:n}:{error:new Fi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:br}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:f,options:h}=t;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Io(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:_},xform:br})}else if("phone"in t){const{phone:c,password:f,options:h}=t;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:br})}else throw new $c("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zw})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zw})}else throw new $c("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ro}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,c,f,h;let m,_;if("message"in t)m=t.message,_=t.signature;else{const{chain:v,wallet:b,statement:g,options:y}=t;let w;if(Bn())if(typeof b=="object")w=b;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")w=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const C=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),O=await w.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=sS(O[0]);let R=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const F=await w.request({method:"eth_chainId"});R=zR(F)}const $={domain:C.host,address:I,statement:g,uri:C.href,version:"1",chainId:R,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=KR($),_=await w.request({method:"personal_sign",params:[VR(m),I]})}try{const{data:v,error:b}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:_},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:br});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Ro}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(Ke(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,f,h,m;let _,v;if("message"in t)_=t.message,v=t.signature;else{const{chain:b,wallet:g,statement:y,options:w}=t;let C;if(Bn())if(typeof g=="object")C=g;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))C=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const O=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const I=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),y?{statement:y}:null));let R;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")R=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)R=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)_=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),v=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${O.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(c=w==null?void 0:w.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const I=await C.signMessage(new TextEncoder().encode(_),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:b,error:g}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Ki(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:br});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ro}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(Ke(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Oi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:br});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ro}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:br}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ro}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Io(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new $c("You must provide either an email or phone number.")}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:br});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Io(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:DR})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ds;const{error:s}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new $c("You must provide either an email or phone number and a type")}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<rp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Oi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=op()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(n){if(Ke(n))return lR(n)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ds;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Io(this.storage,this.storageKey));const{data:u,error:c}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Us});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ip(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ds;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Bn())throw new Mc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Nw("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Mc("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let h=c+f;l&&(h=parseInt(l));const m=h-c;m*1e3<=Mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const _=h-f;c-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,h,c):c-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,h,c);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(aR(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=gR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Io(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Bn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:br}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ro}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await bR(async s=>(s>0&&await wR(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:br})),(s,i)=>{const o=200*Math.pow(2,s);return i&&sp(i)&&Date.now()+o-r<Mo})}catch(r){if(this._debug(n,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Bn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Oi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fo(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:op()}else if(s&&!s.user&&!s.user){const o=await Oi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Is(this.storage,this.storageKey+"-user"),await Fo(this.storage,this.storageKey,s)):s.user=op()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rp;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${rp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),sp(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Pf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ke(i)){const o={data:null,error:i};return sp(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Bw(s);await Fo(this.storage,this.storageKey,i)}else{const s=Bw(n);await Fo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Bn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mo}ms, refresh threshold is ${Im} ticks`),s<=Im&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Io(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?JR(t.webauthn.credential_response):ZR(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:QR(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:YR(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ip(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+iR>s)return r;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:_}=await this.getSession();if(_||!m.session)return{data:null,error:_};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=ip(r);n!=null&&n.allowExpired||TR(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=PR(s.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,pR(`${a}.${l}`)))throw new Lm("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}hu.nextInstanceID=0;const aI=hu;class lI extends aI{constructor(t){super(t)}}var uI=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class cI{constructor(t,n,r){var s,i,o;this.supabaseUrl=t,this.supabaseKey=n;const a=eR(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:KO,realtime:HO,auth:Object.assign(Object.assign({},WO),{storageKey:l}),global:VO},c=XO(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=YO(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new oO(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new BO(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Mj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return uI(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lI({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new kO(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dI=(e,t,n)=>new cI(e,t,n);function fI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hI="https://"+N1+".supabase.co",pI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",mI=hI,gI=pI,Ut=dI(mI,gI),Ly=S.createContext({session:null,setSession:()=>{},isLoading:!0}),yI=({children:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(!0);S.useEffect(()=>{Ut.auth.getSession().then(({data:{session:a}})=>{n(a),s(!1)});const{data:{subscription:o}}=Ut.auth.onAuthStateChange((a,l)=>{n(l)});return()=>{console.log("AUTH_DEBUG: 5. Cleanup function running."),o.unsubscribe()}},[]);const i={session:t,setSession:n,isLoading:r};return k.jsx(Ly.Provider,{value:i,children:e})},xi=()=>S.useContext(Ly),vI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(null),l=Qn(),{setSession:u}=xi(),c=async f=>{f.preventDefault(),i(!0),a(null);try{const{data:{session:h},error:m}=await Ut.auth.signInWithPassword({email:e,password:n});if(m)a(m.message);else if(h){u(h);const _=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(_||"/categories",{replace:!0})}}catch(h){a(h.message||"An unexpected error occurred during login.")}finally{i(!1)}};return k.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:k.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),k.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:k.jsxs("div",{className:"max-w-md mx-auto",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),k.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),k.jsx("div",{children:o&&k.jsx("p",{className:"text-red-500",children:o})}),k.jsxs("div",{className:"divide-y divide-gray-200",children:[k.jsx("form",{onSubmit:c,children:k.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:f=>t(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),k.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),k.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),k.jsx("div",{className:"relative",children:k.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:s,children:s?"Logging in...":"Login"})})]})}),k.jsxs("p",{children:["Don't have an account? ",k.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),k.jsxs("p",{children:["Forgot your password? ",k.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},wI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(null),l=async u=>{u.preventDefault(),i(!0),a(null);try{const{error:c}=await Ut.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{i(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Sign Up"}),o&&k.jsx("p",{style:{color:"red"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",children:"Password:"}),k.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:s,children:s?"Signing up...":"Sign Up"})]})]})},bI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(!1),[s,i]=S.useState(null),[o,a]=S.useState(null),l=async u=>{u.preventDefault(),r(!0),i(null),a(null);try{const{error:c}=await Ut.auth.updateUser({password:e});c?i(c.message):(a("Password updated successfully!"),t(""))}catch(c){i(c.message||"An unexpected error occurred")}finally{r(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Change Password"}),s&&k.jsx("p",{style:{color:"red"},children:s}),o&&k.jsx("p",{style:{color:"green"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),k.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},xI="auth_redirect_sankeertan",_I=()=>{const e=Qn(),[t]=Cj(),[n,r]=S.useState(!0),[s,i]=S.useState(null),{setSession:o}=S.useContext(Ly);return S.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(f,h,m)=>{r(!0),i(null);try{let _;if(h==="invite"||h==="signup"||h==="email_change"||h==="magiclink"){const v=m;if(!v){i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}_=await Ut.auth.verifyOtp({token:f,type:h,email:v})}else if(h==="recover"){e(`/reset-password?token=${f}`,{replace:!0});return}else if(h==="sms"){const v=m;if(!v){i("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}_=await Ut.auth.verifyOtp({token:f,type:"sms",phone:v})}else{i(`Unsupported authentication type: ${h}`),r(!1),e("/login",{replace:!0});return}if(_!=null&&_.error)i(_.error.message);else{const{data:{session:v}}=await Ut.auth.getSession();v&&o(v),localStorage.setItem(xI,"true"),e("/",{replace:!0})}}catch(_){i(_.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(i("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?k.jsx("div",{children:"Verifying your account..."}):s?k.jsxs("div",{children:["Error verifying account: ",s]}):null};var Lu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ks,Ag,Zx,SI=(Zx=class{constructor(){He(this,Ks,kI);He(this,Ag,!1)}setTimeoutProvider(e){Me(this,Ks,e)}setTimeout(e,t){return H(this,Ks).setTimeout(e,t)}clearTimeout(e){H(this,Ks).clearTimeout(e)}setInterval(e,t){return H(this,Ks).setInterval(e,t)}clearInterval(e){H(this,Ks).clearInterval(e)}},Ks=new WeakMap,Ag=new WeakMap,Zx),Wi=new SI;function EI(e){setTimeout(e,0)}var po=typeof window>"u"||"Deno"in globalThis;function Pn(){}function CI(e,t){return typeof e=="function"?e(t):e}function $m(e){return typeof e=="number"&&e>=0&&e!==1/0}function aS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ci(e,t){return typeof e=="function"?e(t):e}function sr(e,t){return typeof e=="function"?e(t):e}function qw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==$y(o,t.options))return!1}else if(!mu(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function Gw(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(pu(t.options.mutationKey)!==pu(i))return!1}else if(!mu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function $y(e,t){return((t==null?void 0:t.queryKeyHashFn)||pu)(e)}function pu(e){return JSON.stringify(e,(t,n)=>Fm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function mu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>mu(e[n],t[n])):!1}var TI=Object.prototype.hasOwnProperty;function lS(e,t){if(e===t)return e;const n=Qw(e)&&Qw(t);if(!n&&!(Fm(e)&&Fm(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:i[u],f=e[c],h=t[c];if(f===h){a[c]=f,(n?u<s:TI.call(e,c))&&l++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){a[c]=h;continue}const m=lS(f,h);a[c]=m,m===f&&l++}return s===o&&l===s?e:a}function Mm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Qw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Fm(e){if(!Yw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Yw(e){return Object.prototype.toString.call(e)==="[object Object]"}function PI(e){return new Promise(t=>{Wi.setTimeout(t,e)})}function Bm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?lS(e,t):t}function AI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function jI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var My=Symbol();function uS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===My?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function OI(e,t){return typeof e=="function"?e(...t):!!e}var Qi,Ws,da,Xx,RI=(Xx=class extends Lu{constructor(){super();He(this,Qi);He(this,Ws);He(this,da);Me(this,da,t=>{if(!po&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Ws)||this.setEventListener(H(this,da))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Ws))==null||t.call(this),Me(this,Ws,void 0))}setEventListener(t){var n;Me(this,da,t),(n=H(this,Ws))==null||n.call(this),Me(this,Ws,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){H(this,Qi)!==t&&(Me(this,Qi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof H(this,Qi)=="boolean"?H(this,Qi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Qi=new WeakMap,Ws=new WeakMap,da=new WeakMap,Xx),Fy=new RI;function Um(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var II=EI;function DI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=II;const i=a=>{t?e.push(a):s(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var rn=DI(),fa,Hs,ha,e_,NI=(e_=class extends Lu{constructor(){super();He(this,fa,!0);He(this,Hs);He(this,ha);Me(this,ha,t=>{if(!po&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Hs)||this.setEventListener(H(this,ha))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Hs))==null||t.call(this),Me(this,Hs,void 0))}setEventListener(t){var n;Me(this,ha,t),(n=H(this,Hs))==null||n.call(this),Me(this,Hs,t(this.setOnline.bind(this)))}setOnline(t){H(this,fa)!==t&&(Me(this,fa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return H(this,fa)}},fa=new WeakMap,Hs=new WeakMap,ha=new WeakMap,e_),Hd=new NI;function LI(e){return Math.min(1e3*2**e,3e4)}function cS(e){return(e??"online")==="online"?Hd.isOnline():!0}var zm=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function dS(e){let t=!1,n=0,r;const s=Um(),i=()=>s.status!=="pending",o=v=>{var b;if(!i()){const g=new zm(v);h(g),(b=e.onCancel)==null||b.call(e,g)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>Fy.isFocused()&&(e.networkMode==="always"||Hd.isOnline())&&e.canRun(),c=()=>cS(e.networkMode)&&e.canRun(),f=v=>{i()||(r==null||r(),s.resolve(v))},h=v=>{i()||(r==null||r(),s.reject(v))},m=()=>new Promise(v=>{var b;r=g=>{(i()||u())&&v(g)},(b=e.onPause)==null||b.call(e)}).then(()=>{var v;r=void 0,i()||(v=e.onContinue)==null||v.call(e)}),_=()=>{if(i())return;let v;const b=n===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var I;if(i())return;const y=e.retry??(po?0:3),w=e.retryDelay??LI,C=typeof w=="function"?w(n,g):w,O=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!O){h(g);return}n++,(I=e.onFail)==null||I.call(e,n,g),PI(C).then(()=>u()?void 0:m()).then(()=>{t?h(g):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?_():m().then(_),s)}}var Yi,t_,fS=(t_=class{constructor(){He(this,Yi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$m(this.gcTime)&&Me(this,Yi,Wi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(po?1/0:5*60*1e3))}clearGcTimeout(){H(this,Yi)&&(Wi.clearTimeout(H(this,Yi)),Me(this,Yi,void 0))}},Yi=new WeakMap,t_),Ji,pa,rr,Zi,Yt,_u,Xi,kr,ns,n_,$I=(n_=class extends fS{constructor(t){super();He(this,kr);He(this,Ji);He(this,pa);He(this,rr);He(this,Zi);He(this,Yt);He(this,_u);He(this,Xi);Me(this,Xi,!1),Me(this,_u,t.defaultOptions),this.setOptions(t.options),this.observers=[],Me(this,Zi,t.client),Me(this,rr,H(this,Zi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Me(this,Ji,Jw(this.options)),this.state=t.state??H(this,Ji),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Yt))==null?void 0:t.promise}setOptions(t){if(this.options={...H(this,_u),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Jw(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Me(this,Ji,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,rr).remove(this)}setData(t,n){const r=Bm(this.state.data,t,this.options);return ot(this,kr,ns).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ot(this,kr,ns).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=H(this,Yt))==null?void 0:r.promise;return(s=H(this,Yt))==null||s.cancel(t),n?n.then(Pn).catch(Pn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Ji))}isActive(){return this.observers.some(t=>sr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===My||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ci(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!aS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Yt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Yt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,rr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(H(this,Yt)&&(H(this,Xi)?H(this,Yt).cancel({revert:!0}):H(this,Yt).cancelRetry()),this.scheduleGc()),H(this,rr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ot(this,kr,ns).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,f,h,m,_,v,b,g,y,w;if(this.state.fetchStatus!=="idle"&&((l=H(this,Yt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(H(this,Yt))return H(this,Yt).continueRetry(),H(this,Yt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(O=>O.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Me(this,Xi,!0),r.signal)})},i=()=>{const C=uS(this.options,n),I=(()=>{const R={client:H(this,Zi),queryKey:this.queryKey,meta:this.meta};return s(R),R})();return Me(this,Xi,!1),this.options.persister?this.options.persister(C,I,this):C(I)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:H(this,Zi),state:this.state,fetchFn:i};return s(C),C})();(u=this.options.behavior)==null||u.onFetch(a,this),Me(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&ot(this,kr,ns).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),Me(this,Yt,dS({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof zm&&C.revert&&this.setState({...H(this,pa),fetchStatus:"idle"}),r.abort()},onFail:(C,O)=>{ot(this,kr,ns).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{ot(this,kr,ns).call(this,{type:"pause"})},onContinue:()=>{ot(this,kr,ns).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await H(this,Yt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(m=(h=H(this,rr).config).onSuccess)==null||m.call(h,C,this),(v=(_=H(this,rr).config).onSettled)==null||v.call(_,C,this.state.error,this),C}catch(C){if(C instanceof zm){if(C.silent)return H(this,Yt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw ot(this,kr,ns).call(this,{type:"error",error:C}),(g=(b=H(this,rr).config).onError)==null||g.call(b,C,this),(w=(y=H(this,rr).config).onSettled)==null||w.call(y,this.state.data,C,this),C}finally{this.scheduleGc()}}},Ji=new WeakMap,pa=new WeakMap,rr=new WeakMap,Zi=new WeakMap,Yt=new WeakMap,_u=new WeakMap,Xi=new WeakMap,kr=new WeakSet,ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...hS(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Me(this,pa,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),rn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,rr).notify({query:this,type:"updated",action:t})})},n_);function hS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Jw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Cn,at,ku,vn,eo,ma,os,qs,Su,ga,ya,to,no,Gs,va,ct,kl,Vm,Km,Wm,Hm,qm,Gm,Qm,pS,r_,MI=(r_=class extends Lu{constructor(t,n){super();He(this,ct);He(this,Cn);He(this,at);He(this,ku);He(this,vn);He(this,eo);He(this,ma);He(this,os);He(this,qs);He(this,Su);He(this,ga);He(this,ya);He(this,to);He(this,no);He(this,Gs);He(this,va,new Set);this.options=n,Me(this,Cn,t),Me(this,qs,null),Me(this,os,Um()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,at).addObserver(this),Zw(H(this,at),this.options)?ot(this,ct,kl).call(this):this.updateResult(),ot(this,ct,Hm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ym(H(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ym(H(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ot(this,ct,qm).call(this),ot(this,ct,Gm).call(this),H(this,at).removeObserver(this)}setOptions(t){const n=this.options,r=H(this,at);if(this.options=H(this,Cn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof sr(this.options.enabled,H(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ot(this,ct,Qm).call(this),H(this,at).setOptions(this.options),n._defaulted&&!Mm(this.options,n)&&H(this,Cn).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,at),observer:this});const s=this.hasListeners();s&&Xw(H(this,at),r,this.options,n)&&ot(this,ct,kl).call(this),this.updateResult(),s&&(H(this,at)!==r||sr(this.options.enabled,H(this,at))!==sr(n.enabled,H(this,at))||ci(this.options.staleTime,H(this,at))!==ci(n.staleTime,H(this,at)))&&ot(this,ct,Vm).call(this);const i=ot(this,ct,Km).call(this);s&&(H(this,at)!==r||sr(this.options.enabled,H(this,at))!==sr(n.enabled,H(this,at))||i!==H(this,Gs))&&ot(this,ct,Wm).call(this,i)}getOptimisticResult(t){const n=H(this,Cn).getQueryCache().build(H(this,Cn),t),r=this.createResult(n,t);return BI(this,r)&&(Me(this,vn,r),Me(this,ma,this.options),Me(this,eo,H(this,at).state)),r}getCurrentResult(){return H(this,vn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&H(this,os).status==="pending"&&H(this,os).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){H(this,va).add(t)}getCurrentQuery(){return H(this,at)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=H(this,Cn).defaultQueryOptions(t),r=H(this,Cn).getQueryCache().build(H(this,Cn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ot(this,ct,kl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,vn)))}createResult(t,n){var F;const r=H(this,at),s=this.options,i=H(this,vn),o=H(this,eo),a=H(this,ma),u=t!==r?t.state:H(this,ku),{state:c}=t;let f={...c},h=!1,m;if(n._optimisticResults){const z=this.hasListeners(),de=!z&&Zw(t,n),L=z&&Xw(t,r,n,s);(de||L)&&(f={...f,...hS(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:b}=f;m=f.data;let g=!1;if(n.placeholderData!==void 0&&m===void 0&&b==="pending"){let z;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(z=i.data,g=!0):z=typeof n.placeholderData=="function"?n.placeholderData((F=H(this,ya))==null?void 0:F.state.data,H(this,ya)):n.placeholderData,z!==void 0&&(b="success",m=Bm(i==null?void 0:i.data,z,n),h=!0)}if(n.select&&m!==void 0&&!g)if(i&&m===(o==null?void 0:o.data)&&n.select===H(this,Su))m=H(this,ga);else try{Me(this,Su,n.select),m=n.select(m),m=Bm(i==null?void 0:i.data,m,n),Me(this,ga,m),Me(this,qs,null)}catch(z){Me(this,qs,z)}H(this,qs)&&(_=H(this,qs),m=H(this,ga),v=Date.now(),b="error");const y=f.fetchStatus==="fetching",w=b==="pending",C=b==="error",O=w&&y,I=m!==void 0,$={status:b,fetchStatus:f.fetchStatus,isPending:w,isSuccess:b==="success",isError:C,isInitialLoading:O,isLoading:O,data:m,dataUpdatedAt:f.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:C&&!I,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&I,isStale:By(t,n),refetch:this.refetch,promise:H(this,os),isEnabled:sr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const z=G=>{$.status==="error"?G.reject($.error):$.data!==void 0&&G.resolve($.data)},de=()=>{const G=Me(this,os,$.promise=Um());z(G)},L=H(this,os);switch(L.status){case"pending":t.queryHash===r.queryHash&&z(L);break;case"fulfilled":($.status==="error"||$.data!==L.value)&&de();break;case"rejected":($.status!=="error"||$.error!==L.reason)&&de();break}}return $}updateResult(){const t=H(this,vn),n=this.createResult(H(this,at),this.options);if(Me(this,eo,H(this,at).state),Me(this,ma,this.options),H(this,eo).data!==void 0&&Me(this,ya,H(this,at)),Mm(n,t))return;Me(this,vn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!H(this,va).size)return!0;const o=new Set(i??H(this,va));return this.options.throwOnError&&o.add("error"),Object.keys(H(this,vn)).some(a=>{const l=a;return H(this,vn)[l]!==t[l]&&o.has(l)})};ot(this,ct,pS).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ot(this,ct,Hm).call(this)}},Cn=new WeakMap,at=new WeakMap,ku=new WeakMap,vn=new WeakMap,eo=new WeakMap,ma=new WeakMap,os=new WeakMap,qs=new WeakMap,Su=new WeakMap,ga=new WeakMap,ya=new WeakMap,to=new WeakMap,no=new WeakMap,Gs=new WeakMap,va=new WeakMap,ct=new WeakSet,kl=function(t){ot(this,ct,Qm).call(this);let n=H(this,at).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Pn)),n},Vm=function(){ot(this,ct,qm).call(this);const t=ci(this.options.staleTime,H(this,at));if(po||H(this,vn).isStale||!$m(t))return;const r=aS(H(this,vn).dataUpdatedAt,t)+1;Me(this,to,Wi.setTimeout(()=>{H(this,vn).isStale||this.updateResult()},r))},Km=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,at)):this.options.refetchInterval)??!1},Wm=function(t){ot(this,ct,Gm).call(this),Me(this,Gs,t),!(po||sr(this.options.enabled,H(this,at))===!1||!$m(H(this,Gs))||H(this,Gs)===0)&&Me(this,no,Wi.setInterval(()=>{(this.options.refetchIntervalInBackground||Fy.isFocused())&&ot(this,ct,kl).call(this)},H(this,Gs)))},Hm=function(){ot(this,ct,Vm).call(this),ot(this,ct,Wm).call(this,ot(this,ct,Km).call(this))},qm=function(){H(this,to)&&(Wi.clearTimeout(H(this,to)),Me(this,to,void 0))},Gm=function(){H(this,no)&&(Wi.clearInterval(H(this,no)),Me(this,no,void 0))},Qm=function(){const t=H(this,Cn).getQueryCache().build(H(this,Cn),this.options);if(t===H(this,at))return;const n=H(this,at);Me(this,at,t),Me(this,ku,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},pS=function(t){rn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(H(this,vn))}),H(this,Cn).getQueryCache().notify({query:H(this,at),type:"observerResultsUpdated"})})},r_);function FI(e,t){return sr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Zw(e,t){return FI(e,t)||e.state.data!==void 0&&Ym(e,t,t.refetchOnMount)}function Ym(e,t,n){if(sr(t.enabled,e)!==!1&&ci(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&By(e,t)}return!1}function Xw(e,t,n,r){return(e!==t||sr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&By(e,n)}function By(e,t){return sr(t.enabled,e)!==!1&&e.isStaleByTime(ci(t.staleTime,e))}function BI(e,t){return!Mm(e.getCurrentResult(),t)}function eb(e){return{onFetch:(t,n)=>{var c,f,h,m,_;const r=t.options,s=(h=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((_=t.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=uS(t.options,t.fetchOptions),y=async(w,C,O)=>{if(v)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const R=(()=>{const de={client:t.client,queryKey:t.queryKey,pageParam:C,direction:O?"backward":"forward",meta:t.options.meta};return b(de),de})(),$=await g(R),{maxPages:F}=t.options,z=O?jI:AI;return{pages:z(w.pages,$,F),pageParams:z(w.pageParams,C,F)}};if(s&&i.length){const w=s==="backward",C=w?UI:tb,O={pages:i,pageParams:o},I=C(r,O);a=await y(O,I,w)}else{const w=e??i.length;do{const C=l===0?o[0]??r.initialPageParam:tb(r,a);if(l>0&&C==null)break;a=await y(a,C),l++}while(l<w)}return a};t.options.persister?t.fetchFn=()=>{var v,b;return(b=(v=t.options).persister)==null?void 0:b.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function tb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function UI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Eu,Ur,wn,ro,zr,Ns,s_,zI=(s_=class extends fS{constructor(t){super();He(this,zr);He(this,Eu);He(this,Ur);He(this,wn);He(this,ro);Me(this,Eu,t.client),this.mutationId=t.mutationId,Me(this,wn,t.mutationCache),Me(this,Ur,[]),this.state=t.state||VI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,Ur).includes(t)||(H(this,Ur).push(t),this.clearGcTimeout(),H(this,wn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Me(this,Ur,H(this,Ur).filter(n=>n!==t)),this.scheduleGc(),H(this,wn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,Ur).length||(this.state.status==="pending"?this.scheduleGc():H(this,wn).remove(this))}continue(){var t;return((t=H(this,ro))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,f,h,m,_,v,b,g,y,w,C,O,I,R,$,F;const n=()=>{ot(this,zr,Ns).call(this,{type:"continue"})},r={client:H(this,Eu),meta:this.options.meta,mutationKey:this.options.mutationKey};Me(this,ro,dS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(z,de)=>{ot(this,zr,Ns).call(this,{type:"failed",failureCount:z,error:de})},onPause:()=>{ot(this,zr,Ns).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,wn).canRun(this)}));const s=this.state.status==="pending",i=!H(this,ro).canStart();try{if(s)n();else{ot(this,zr,Ns).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=H(this,wn).config).onMutate)==null?void 0:a.call(o,t,this,r));const de=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));de!==this.state.context&&ot(this,zr,Ns).call(this,{type:"pending",context:de,variables:t,isPaused:i})}const z=await H(this,ro).start();return await((f=(c=H(this,wn).config).onSuccess)==null?void 0:f.call(c,z,t,this.state.context,this,r)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,z,t,this.state.context,r)),await((v=(_=H(this,wn).config).onSettled)==null?void 0:v.call(_,z,null,this.state.variables,this.state.context,this,r)),await((g=(b=this.options).onSettled)==null?void 0:g.call(b,z,null,t,this.state.context,r)),ot(this,zr,Ns).call(this,{type:"success",data:z}),z}catch(z){try{throw await((w=(y=H(this,wn).config).onError)==null?void 0:w.call(y,z,t,this.state.context,this,r)),await((O=(C=this.options).onError)==null?void 0:O.call(C,z,t,this.state.context,r)),await((R=(I=H(this,wn).config).onSettled)==null?void 0:R.call(I,void 0,z,this.state.variables,this.state.context,this,r)),await((F=($=this.options).onSettled)==null?void 0:F.call($,void 0,z,t,this.state.context,r)),z}finally{ot(this,zr,Ns).call(this,{type:"error",error:z})}}finally{H(this,wn).runNext(this)}}},Eu=new WeakMap,Ur=new WeakMap,wn=new WeakMap,ro=new WeakMap,zr=new WeakSet,Ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rn.batch(()=>{H(this,Ur).forEach(r=>{r.onMutationUpdate(t)}),H(this,wn).notify({mutation:this,type:"updated",action:t})})},s_);function VI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var as,Sr,Cu,i_,KI=(i_=class extends Lu{constructor(t={}){super();He(this,as);He(this,Sr);He(this,Cu);this.config=t,Me(this,as,new Set),Me(this,Sr,new Map),Me(this,Cu,0)}build(t,n,r){const s=new zI({client:t,mutationCache:this,mutationId:++yc(this,Cu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){H(this,as).add(t);const n=Fc(t);if(typeof n=="string"){const r=H(this,Sr).get(n);r?r.push(t):H(this,Sr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,as).delete(t)){const n=Fc(t);if(typeof n=="string"){const r=H(this,Sr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&H(this,Sr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Fc(t);if(typeof n=="string"){const r=H(this,Sr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Fc(t);if(typeof n=="string"){const s=(r=H(this,Sr).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rn.batch(()=>{H(this,as).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,as).clear(),H(this,Sr).clear()})}getAll(){return Array.from(H(this,as))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Gw(n,r))}findAll(t={}){return this.getAll().filter(n=>Gw(t,n))}notify(t){rn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return rn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Pn))))}},as=new WeakMap,Sr=new WeakMap,Cu=new WeakMap,i_);function Fc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Vr,o_,WI=(o_=class extends Lu{constructor(t={}){super();He(this,Vr);this.config=t,Me(this,Vr,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??$y(s,n);let o=this.get(i);return o||(o=new $I({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){H(this,Vr).has(t.queryHash)||(H(this,Vr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=H(this,Vr).get(t.queryHash);n&&(t.destroy(),n===t&&H(this,Vr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){rn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,Vr).get(t)}getAll(){return[...H(this,Vr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>qw(t,r)):n}notify(t){rn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){rn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){rn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Vr=new WeakMap,o_),Pt,Qs,Ys,wa,ba,Js,xa,_a,a_,HI=(a_=class{constructor(e={}){He(this,Pt);He(this,Qs);He(this,Ys);He(this,wa);He(this,ba);He(this,Js);He(this,xa);He(this,_a);Me(this,Pt,e.queryCache||new WI),Me(this,Qs,e.mutationCache||new KI),Me(this,Ys,e.defaultOptions||{}),Me(this,wa,new Map),Me(this,ba,new Map),Me(this,Js,0)}mount(){yc(this,Js)._++,H(this,Js)===1&&(Me(this,xa,Fy.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pt).onFocus())})),Me(this,_a,Hd.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pt).onOnline())})))}unmount(){var e,t;yc(this,Js)._--,H(this,Js)===0&&((e=H(this,xa))==null||e.call(this),Me(this,xa,void 0),(t=H(this,_a))==null||t.call(this),Me(this,_a,void 0))}isFetching(e){return H(this,Pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,Qs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=H(this,Pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ci(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return H(this,Pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=H(this,Pt).get(r.queryHash),i=s==null?void 0:s.state.data,o=CI(t,i);if(o!==void 0)return H(this,Pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return rn.batch(()=>H(this,Pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=H(this,Pt);rn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=H(this,Pt);return rn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=rn.batch(()=>H(this,Pt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Pn).catch(Pn)}invalidateQueries(e,t={}){return rn.batch(()=>(H(this,Pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=rn.batch(()=>H(this,Pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=H(this,Pt).build(this,t);return n.isStaleByTime(ci(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Pn).catch(Pn)}fetchInfiniteQuery(e){return e.behavior=eb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Pn).catch(Pn)}ensureInfiniteQueryData(e){return e.behavior=eb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hd.isOnline()?H(this,Qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Pt)}getMutationCache(){return H(this,Qs)}getDefaultOptions(){return H(this,Ys)}setDefaultOptions(e){Me(this,Ys,e)}setQueryDefaults(e,t){H(this,wa).set(pu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,wa).values()],n={};return t.forEach(r=>{mu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){H(this,ba).set(pu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,ba).values()],n={};return t.forEach(r=>{mu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,Ys).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$y(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===My&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,Ys).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Pt).clear(),H(this,Qs).clear()}},Pt=new WeakMap,Qs=new WeakMap,Ys=new WeakMap,wa=new WeakMap,ba=new WeakMap,Js=new WeakMap,xa=new WeakMap,_a=new WeakMap,a_),mS=S.createContext(void 0),Af=e=>{const t=S.useContext(mS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qI=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),k.jsx(mS.Provider,{value:e,children:t})),gS=S.createContext(!1),GI=()=>S.useContext(gS);gS.Provider;function QI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var YI=S.createContext(QI()),JI=()=>S.useContext(YI),ZI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},XI=e=>{S.useEffect(()=>{e.clearReset()},[e])},eD=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||OI(n,[e.error,r])),tD=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},nD=(e,t)=>e.isLoading&&e.isFetching&&!t,rD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,nb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function sD(e,t,n){var f,h,m,_,v;const r=GI(),s=JI(),i=Af(),o=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",tD(o),ZI(o,s),XI(s);const a=!i.getQueryCache().get(o.queryHash),[l]=S.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(b=>{const g=c?l.subscribe(rn.batchCalls(b)):Pn;return l.updateResult(),g},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o)},[o,l]),rD(o,u))throw nb(o,l,s);if(eD({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((_=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||_.call(m,o,u),o.experimental_prefetchInRender&&!po&&nD(u,r)){const b=a?nb(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;b==null||b.catch(Pn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function jf(e,t){return sD(e,MI)}var yS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Xt,function(){var n=function(d,p){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(x[T]=E[T])})(d,p)},r=function(){return(r=Object.assign||function(d){for(var p,x=1,E=arguments.length;x<E;x++)for(var T in p=arguments[x])Object.prototype.hasOwnProperty.call(p,T)&&(d[T]=p[T]);return d}).apply(this,arguments)};function s(d,p,x){for(var E,T=0,j=p.length;T<j;T++)!E&&T in p||((E=E||Array.prototype.slice.call(p,0,T))[T]=p[T]);return d.concat(E||Array.prototype.slice.call(p))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Xt,o=Object.keys,a=Array.isArray;function l(d,p){return typeof p!="object"||o(p).forEach(function(x){d[x]=p[x]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(d,p){return c.call(d,p)}function h(d,p){typeof p=="function"&&(p=p(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(p).forEach(function(x){_(d,x,p[x])})}var m=Object.defineProperty;function _(d,p,x,E){m(d,p,l(x&&f(x,"get")&&typeof x.get=="function"?{get:x.get,set:x.set,configurable:!0}:{value:x,configurable:!0,writable:!0},E))}function v(d){return{from:function(p){return d.prototype=Object.create(p.prototype),_(d.prototype,"constructor",d),{extend:h.bind(null,d.prototype)}}}}var b=Object.getOwnPropertyDescriptor,g=[].slice;function y(d,p,x){return g.call(d,p,x)}function w(d,p){return p(d)}function C(d){if(!d)throw new Error("Assertion Failed")}function O(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function I(d,p){if(typeof p=="string"&&f(d,p))return d[p];if(!p)return d;if(typeof p!="string"){for(var x=[],E=0,T=p.length;E<T;++E){var j=I(d,p[E]);x.push(j)}return x}var D=p.indexOf(".");if(D!==-1){var B=d[p.substr(0,D)];return B==null?void 0:I(B,p.substr(D+1))}}function R(d,p,x){if(d&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof p!="string"&&"length"in p){C(typeof x!="string"&&"length"in x);for(var E=0,T=p.length;E<T;++E)R(d,p[E],x[E])}else{var j,D,B=p.indexOf(".");B!==-1?(j=p.substr(0,B),(D=p.substr(B+1))===""?x===void 0?a(d)&&!isNaN(parseInt(j))?d.splice(j,1):delete d[j]:d[j]=x:R(B=!(B=d[j])||!f(d,j)?d[j]={}:B,D,x)):x===void 0?a(d)&&!isNaN(parseInt(p))?d.splice(p,1):delete d[p]:d[p]=x}}function $(d){var p,x={};for(p in d)f(d,p)&&(x[p]=d[p]);return x}var F=[].concat;function z(d){return F.apply([],d)}var Ue="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(p){return p+d+"Array"})}))).filter(function(d){return i[d]}),de=new Set(Ue.map(function(d){return i[d]})),L=null;function G(d){return L=new WeakMap,d=function p(x){if(!x||typeof x!="object")return x;var E=L.get(x);if(E)return E;if(a(x)){E=[],L.set(x,E);for(var T=0,j=x.length;T<j;++T)E.push(p(x[T]))}else if(de.has(x.constructor))E=x;else{var D,B=u(x);for(D in E=B===Object.prototype?{}:Object.create(B),L.set(x,E),x)f(x,D)&&(E[D]=p(x[D]))}return E}(d),L=null,d}var A={}.toString;function Q(d){return A.call(d).slice(8,-1)}var ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",le=typeof ve=="symbol"?function(d){var p;return d!=null&&(p=d[ve])&&p.apply(d)}:function(){return null};function ce(d,p){return p=d.indexOf(p),0<=p&&d.splice(p,1),0<=p}var se={};function ye(d){var p,x,E,T;if(arguments.length===1){if(a(d))return d.slice();if(this===se&&typeof d=="string")return[d];if(T=le(d)){for(x=[];!(E=T.next()).done;)x.push(E.value);return x}if(d==null)return[d];if(typeof(p=d.length)!="number")return[d];for(x=new Array(p);p--;)x[p]=d[p];return x}for(p=arguments.length,x=new Array(p);p--;)x[p]=arguments[p];return x}var Z=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Se=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Se),X={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(d,p){this.name=d,this.message=p}function fe(d,p){return d+". Errors: "+Object.keys(p).map(function(x){return p[x].toString()}).filter(function(x,E,T){return T.indexOf(x)===E}).join(`
`)}function oe(d,p,x,E){this.failures=p,this.failedKeys=E,this.successCount=x,this.message=fe(d,p)}function _e(d,p){this.name="BulkError",this.failures=Object.keys(p).map(function(x){return p[x]}),this.failuresByPos=p,this.message=fe(d,this.failures)}v(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(oe).from(K),v(_e).from(K);var $e=Zn.reduce(function(d,p){return d[p]=p+"Error",d},{}),Oe=K,me=Zn.reduce(function(d,p){var x=p+"Error";function E(T,j){this.name=x,T?typeof T=="string"?(this.message="".concat(T).concat(j?`
 `+j:""),this.inner=j||null):typeof T=="object"&&(this.message="".concat(T.name," ").concat(T.message),this.inner=T):(this.message=X[p]||x,this.inner=null)}return v(E).from(Oe),d[p]=E,d},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var Ze=Se.reduce(function(d,p){return d[p+"Error"]=me[p],d},{}),Ye=Zn.reduce(function(d,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(d[p+"Error"]=me[p]),d},{});function We(){}function Tt(d){return d}function P(d,p){return d==null||d===Tt?p:function(x){return p(d(x))}}function ge(d,p){return function(){d.apply(this,arguments),p.apply(this,arguments)}}function he(d,p){return d===We?p:function(){var x=d.apply(this,arguments);x!==void 0&&(arguments[0]=x);var E=this.onsuccess,T=this.onerror;this.onsuccess=null,this.onerror=null;var j=p.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?ge(E,this.onsuccess):E),T&&(this.onerror=this.onerror?ge(T,this.onerror):T),j!==void 0?j:x}}function M(d,p){return d===We?p:function(){d.apply(this,arguments);var x=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?ge(x,this.onsuccess):x),E&&(this.onerror=this.onerror?ge(E,this.onerror):E)}}function N(d,p){return d===We?p:function(x){var E=d.apply(this,arguments);l(x,E);var T=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,x=p.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?ge(T,this.onsuccess):T),j&&(this.onerror=this.onerror?ge(j,this.onerror):j),E===void 0?x===void 0?void 0:x:l(E,x)}}function te(d,p){return d===We?p:function(){return p.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function we(d,p){return d===We?p:function(){var x=d.apply(this,arguments);if(x&&typeof x.then=="function"){for(var E=this,T=arguments.length,j=new Array(T);T--;)j[T]=arguments[T];return x.then(function(){return p.apply(E,j)})}return p.apply(this,arguments)}}Ye.ModifyError=oe,Ye.DexieError=K,Ye.BulkError=_e;var be=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(d){be=d}var ke={},Ne=100,Ue=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,u(p),d]}(),Se=Ue[0],Zn=Ue[1],Ue=Ue[2],Zn=Zn&&Zn.then,rt=Se&&Se.constructor,Xe=!!Ue,Ot=function(d,p){gr.push([d,p]),De&&(queueMicrotask(lT),De=!1)},Yn=!0,De=!0,Ve=[],et=[],an=Tt,Ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:We,pgp:!1,env:{},finalize:We},Le=Ht,gr=[],Jn=0,Es=[];function Pe(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Le;if(typeof d!="function"){if(d!==ke)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&yr(this,this._value))}this._state=null,this._value=null,++p.ref,function x(E,T){try{T(function(j){if(E._state===null){if(j===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&_o();j&&typeof j.then=="function"?x(E,function(B,V){j instanceof Pe?j._then(B,V):j.then(B,V)}):(E._state=!0,E._value=j,Iv(E)),D&&ko()}},yr.bind(null,E))}catch(j){yr(E,j)}}(this,d)}var Zr={get:function(){var d=Le,p=Ju;function x(E,T){var j=this,D=!d.global&&(d!==Le||p!==Ju),B=D&&!Ts(),V=new Pe(function(W,ee){Yf(j,new Dr(Nv(E,d,D,B),Nv(T,d,D,B),W,ee,d))});return this._consoleTask&&(V._consoleTask=this._consoleTask),V}return x.prototype=ke,x},set:function(d){_(this,"then",d&&d.prototype===ke?Zr:{get:function(){return d},set:Zr.set})}};function Dr(d,p,x,E,T){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof p=="function"?p:null,this.resolve=x,this.reject=E,this.psd=T}function yr(d,p){var x,E;et.push(p),d._state===null&&(x=d._lib&&_o(),p=an(p),d._state=!1,d._value=p,E=d,Ve.some(function(T){return T._value===E._value})||Ve.push(E),Iv(d),x&&ko())}function Iv(d){var p=d._listeners;d._listeners=[];for(var x=0,E=p.length;x<E;++x)Yf(d,p[x]);var T=d._PSD;--T.ref||T.finalize(),Jn===0&&(++Jn,Ot(function(){--Jn==0&&Jf()},[]))}function Yf(d,p){if(d._state!==null){var x=d._state?p.onFulfilled:p.onRejected;if(x===null)return(d._state?p.resolve:p.reject)(d._value);++p.psd.ref,++Jn,Ot(aT,[x,d,p])}else d._listeners.push(p)}function aT(d,p,x){try{var E,T=p._value;!p._state&&et.length&&(et=[]),E=be&&p._consoleTask?p._consoleTask.run(function(){return d(T)}):d(T),p._state||et.indexOf(T)!==-1||function(j){for(var D=Ve.length;D;)if(Ve[--D]._value===j._value)return Ve.splice(D,1)}(p),x.resolve(E)}catch(j){x.reject(j)}finally{--Jn==0&&Jf(),--x.psd.ref||x.psd.finalize()}}function lT(){Si(Ht,function(){_o()&&ko()})}function _o(){var d=Yn;return De=Yn=!1,d}function ko(){var d,p,x;do for(;0<gr.length;)for(d=gr,gr=[],x=d.length,p=0;p<x;++p){var E=d[p];E[0].apply(null,E[1])}while(0<gr.length);De=Yn=!0}function Jf(){var d=Ve;Ve=[],d.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var p=Es.slice(0),x=p.length;x;)p[--x]()}function Gu(d){return new Pe(ke,!1,d)}function vt(d,p){var x=Le;return function(){var E=_o(),T=Le;try{return Ps(x,!0),d.apply(this,arguments)}catch(j){p&&p(j)}finally{Ps(T,!1),E&&ko()}}}h(Pe.prototype,{then:Zr,_then:function(d,p){Yf(this,new Dr(null,null,d,p,Le))},catch:function(d){if(arguments.length===1)return this.then(null,d);var p=d,x=arguments[1];return typeof p=="function"?this.then(null,function(E){return(E instanceof p?x:Gu)(E)}):this.then(null,function(E){return(E&&E.name===p?x:Gu)(E)})},finally:function(d){return this.then(function(p){return Pe.resolve(d()).then(function(){return p})},function(p){return Pe.resolve(d()).then(function(){return Gu(p)})})},timeout:function(d,p){var x=this;return d<1/0?new Pe(function(E,T){var j=setTimeout(function(){return T(new me.Timeout(p))},d);x.then(E,T).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(Pe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ht.env=Dv(),h(Pe,{all:function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(p,x){d.length===0&&p([]);var E=d.length;d.forEach(function(T,j){return Pe.resolve(T).then(function(D){d[j]=D,--E||p(d)},x)})})},resolve:function(d){return d instanceof Pe?d:d&&typeof d.then=="function"?new Pe(function(p,x){d.then(p,x)}):new Pe(ke,!0,d)},reject:Gu,race:function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(p,x){d.map(function(E){return Pe.resolve(E).then(p,x)})})},PSD:{get:function(){return Le},set:function(d){return Le=d}},totalEchoes:{get:function(){return Ju}},newPSD:Cs,usePSD:Si,scheduler:{get:function(){return Ot},set:function(d){Ot=d}},rejectionMapper:{get:function(){return an},set:function(d){an=d}},follow:function(d,p){return new Pe(function(x,E){return Cs(function(T,j){var D=Le;D.unhandleds=[],D.onunhandled=j,D.finalize=ge(function(){var B,V=this;B=function(){V.unhandleds.length===0?T():j(V.unhandleds[0])},Es.push(function W(){B(),Es.splice(Es.indexOf(W),1)}),++Jn,Ot(function(){--Jn==0&&Jf()},[])},D.finalize),d()},p,x,E)})}}),rt&&(rt.allSettled&&_(Pe,"allSettled",function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(p){d.length===0&&p([]);var x=d.length,E=new Array(x);d.forEach(function(T,j){return Pe.resolve(T).then(function(D){return E[j]={status:"fulfilled",value:D}},function(D){return E[j]={status:"rejected",reason:D}}).then(function(){return--x||p(E)})})})}),rt.any&&typeof AggregateError<"u"&&_(Pe,"any",function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(p,x){d.length===0&&x(new AggregateError([]));var E=d.length,T=new Array(E);d.forEach(function(j,D){return Pe.resolve(j).then(function(B){return p(B)},function(B){T[D]=B,--E||x(new AggregateError(T))})})})}),rt.withResolvers&&(Pe.withResolvers=rt.withResolvers));var qt={awaits:0,echoes:0,id:0},uT=0,Qu=[],Yu=0,Ju=0,cT=0;function Cs(d,p,x,E){var T=Le,j=Object.create(T);return j.parent=T,j.ref=0,j.global=!1,j.id=++cT,Ht.env,j.env=Xe?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,allSettled:Pe.allSettled,any:Pe.any,resolve:Pe.resolve,reject:Pe.reject}:{},p&&l(j,p),++T.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Si(j,d,x,E),j.ref===0&&j.finalize(),E}function So(){return qt.id||(qt.id=++uT),++qt.awaits,qt.echoes+=Ne,qt.id}function Ts(){return!!qt.awaits&&(--qt.awaits==0&&(qt.id=0),qt.echoes=qt.awaits*Ne,!0)}function Zu(d){return qt.echoes&&d&&d.constructor===rt?(So(),d.then(function(p){return Ts(),p},function(p){return Ts(),Rt(p)})):d}function dT(){var d=Qu[Qu.length-1];Qu.pop(),Ps(d,!1)}function Ps(d,p){var x,E=Le;(p?!qt.echoes||Yu++&&d===Le:!Yu||--Yu&&d===Le)||queueMicrotask(p?(function(T){++Ju,qt.echoes&&--qt.echoes!=0||(qt.echoes=qt.awaits=qt.id=0),Qu.push(Le),Ps(T,!0)}).bind(null,d):dT),d!==Le&&(Le=d,E===Ht&&(Ht.env=Dv()),Xe&&(x=Ht.env.Promise,p=d.env,(E.global||d.global)&&(Object.defineProperty(i,"Promise",p.PromiseProp),x.all=p.all,x.race=p.race,x.resolve=p.resolve,x.reject=p.reject,p.allSettled&&(x.allSettled=p.allSettled),p.any&&(x.any=p.any))))}function Dv(){var d=i.Promise;return Xe?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Si(d,p,x,E,T){var j=Le;try{return Ps(d,!0),p(x,E,T)}finally{Ps(j,!1)}}function Nv(d,p,x,E){return typeof d!="function"?d:function(){var T=Le;x&&So(),Ps(p,!0);try{return d.apply(this,arguments)}finally{Ps(T,!1),E&&queueMicrotask(Ts)}}}function Zf(d){Promise===rt&&qt.echoes===0?Yu===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Zn).indexOf("[native code]")===-1&&(So=Ts=We);var Rt=Pe.reject,Ei="",Xr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Lv="String expected.",Eo=[],Xu="__dbnames",Xf="readonly",eh="readwrite";function Ci(d,p){return d?p?function(){return d.apply(this,arguments)&&p.apply(this,arguments)}:d:p}var $v={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ec(d){return typeof d!="string"||/\./.test(d)?function(p){return p}:function(p){return p[d]===void 0&&d in p&&delete(p=G(p))[d],p}}function Mv(){throw me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function it(d,p){try{var x=Fv(d),E=Fv(p);if(x!==E)return x==="Array"?1:E==="Array"?-1:x==="binary"?1:E==="binary"?-1:x==="string"?1:E==="string"?-1:x==="Date"?1:E!=="Date"?NaN:-1;switch(x){case"number":case"Date":case"string":return p<d?1:d<p?-1:0;case"binary":return function(T,j){for(var D=T.length,B=j.length,V=D<B?D:B,W=0;W<V;++W)if(T[W]!==j[W])return T[W]<j[W]?-1:1;return D===B?0:D<B?-1:1}(Bv(d),Bv(p));case"Array":return function(T,j){for(var D=T.length,B=j.length,V=D<B?D:B,W=0;W<V;++W){var ee=it(T[W],j[W]);if(ee!==0)return ee}return D===B?0:D<B?-1:1}(d,p)}}catch{}return NaN}function Fv(d){var p=typeof d;return p!="object"?p:ArrayBuffer.isView(d)?"binary":(d=Q(d),d==="ArrayBuffer"?"binary":d)}function Bv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function tc(d,p,x){var E=d.schema.yProps;return E?(p&&0<x.numFailures&&(p=p.filter(function(T,j){return!x.failures[j]})),Promise.all(E.map(function(T){return T=T.updatesTable,p?d.db.table(T).where("k").anyOf(p).delete():d.db.table(T).clear()})).then(function(){return x})):x}var Ga=(Uv.prototype.execute=function(d){var p=this["@@propmod"];if(p.add!==void 0){var x=p.add;if(a(x))return s(s([],a(d)?d:[],!0),x).sort();if(typeof x=="number")return(Number(d)||0)+x;if(typeof x=="bigint")try{return BigInt(d)+x}catch{return BigInt(0)+x}throw new TypeError("Invalid term ".concat(x))}if(p.remove!==void 0){var E=p.remove;if(a(E))return a(d)?d.filter(function(T){return!E.includes(T)}).sort():[];if(typeof E=="number")return Number(d)-E;if(typeof E=="bigint")try{return BigInt(d)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return x=(x=p.replacePrefix)===null||x===void 0?void 0:x[0],x&&typeof d=="string"&&d.startsWith(x)?p.replacePrefix[1]+d.substring(x.length):d},Uv);function Uv(d){this["@@propmod"]=d}function zv(d,p){for(var x=o(p),E=x.length,T=!1,j=0;j<E;++j){var D=x[j],B=p[D],V=I(d,D);B instanceof Ga?(R(d,D,B.execute(V)),T=!0):V!==B&&(R(d,D,B),T=!0)}return T}var Vv=(ht.prototype._trans=function(d,p,x){var E=this._tx||Le.trans,T=this.name,j=be&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function D(W,ee,U){if(!U.schema[T])throw new me.NotFound("Table "+T+" not part of transaction");return p(U.idbtrans,U)}var B=_o();try{var V=E&&E.db._novip===this.db._novip?E===Le.trans?E._promise(d,D,x):Cs(function(){return E._promise(d,D,x)},{trans:E,transless:Le.transless||Le}):function W(ee,U,re,q){if(ee.idbdb&&(ee._state.openComplete||Le.letThrough||ee._vip)){var Y=ee._createTransaction(U,re,ee._dbSchema);try{Y.create(),ee._state.PR1398_maxLoop=3}catch(J){return J.name===$e.InvalidState&&ee.isOpen()&&0<--ee._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ee.close({disableAutoOpen:!1}),ee.open().then(function(){return W(ee,U,re,q)})):Rt(J)}return Y._promise(U,function(J,ne){return Cs(function(){return Le.trans=Y,q(J,ne,Y)})}).then(function(J){if(U==="readwrite")try{Y.idbtrans.commit()}catch{}return U==="readonly"?J:Y._completion.then(function(){return J})})}if(ee._state.openComplete)return Rt(new me.DatabaseClosed(ee._state.dbOpenError));if(!ee._state.isBeingOpened){if(!ee._state.autoOpen)return Rt(new me.DatabaseClosed);ee.open().catch(We)}return ee._state.dbReadyPromise.then(function(){return W(ee,U,re,q)})}(this.db,d,[this.name],D);return j&&(V._consoleTask=j,V=V.catch(function(W){return console.trace(W),Rt(W)})),V}finally{B&&ko()}},ht.prototype.get=function(d,p){var x=this;return d&&d.constructor===Object?this.where(d).first(p):d==null?Rt(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return x.core.get({trans:E,key:d}).then(function(T){return x.hook.reading.fire(T)})}).then(p)},ht.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var p=o(d);if(p.length===1)return this.where(p[0]).equals(d[p[0]]);var x=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&p.every(function(W){return 0<=B.keyPath.indexOf(W)})){for(var V=0;V<p.length;++V)if(p.indexOf(B.keyPath[V])===-1)return!1;return!0}return!1}).sort(function(B,V){return B.keyPath.length-V.keyPath.length})[0];if(x&&this.db._maxKey!==Ei){var j=x.keyPath.slice(0,p.length);return this.where(j).equals(j.map(function(V){return d[V]}))}!x&&be&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var E=this.schema.idxByName;function T(B,V){return it(B,V)===0}var D=p.reduce(function(U,V){var W=U[0],ee=U[1],U=E[V],re=d[V];return[W||U,W||!U?Ci(ee,U&&U.multi?function(q){return q=I(q,V),a(q)&&q.some(function(Y){return T(re,Y)})}:function(q){return T(re,I(q,V))}):ee]},[null,null]),j=D[0],D=D[1];return j?this.where(j.name).equals(d[j.keyPath]).filter(D):x?this.filter(D):this.where(p).equals("")},ht.prototype.filter=function(d){return this.toCollection().and(d)},ht.prototype.count=function(d){return this.toCollection().count(d)},ht.prototype.offset=function(d){return this.toCollection().offset(d)},ht.prototype.limit=function(d){return this.toCollection().limit(d)},ht.prototype.each=function(d){return this.toCollection().each(d)},ht.prototype.toArray=function(d){return this.toCollection().toArray(d)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(d){var p,x=this.db,E=this.name;function T(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Mv&&(function(V,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function ee(){this.constructor=V}n(V,W),V.prototype=W===null?Object.create(W):(ee.prototype=W.prototype,new ee)}(T,p=d),Object.defineProperty(T.prototype,"db",{get:function(){return x},enumerable:!1,configurable:!0}),T.prototype.table=function(){return E},d=T);for(var j=new Set,D=d.prototype;D;D=u(D))Object.getOwnPropertyNames(D).forEach(function(V){return j.add(V)});function B(V){if(!V)return V;var W,ee=Object.create(d.prototype);for(W in V)if(!j.has(W))try{ee[W]=V[W]}catch{}return ee}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),d},ht.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},ht.prototype.add=function(d,p){var x=this,E=this.schema.primKey,T=E.auto,j=E.keyPath,D=d;return j&&T&&(D=ec(j)(d)),this._trans("readwrite",function(B){return x.core.mutate({trans:B,type:"add",keys:p!=null?[p]:null,values:[D]})}).then(function(B){return B.numFailures?Pe.reject(B.failures[0]):B.lastResult}).then(function(B){if(j)try{R(d,j,B)}catch{}return B})},ht.prototype.upsert=function(d,p){var x=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(T){return x.core.get({trans:T,key:d}).then(function(j){var D=j??{};return zv(D,p),E&&R(D,E,d),x.core.mutate({trans:T,type:"put",values:[D],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[p]}}).then(function(B){return B.numFailures?Pe.reject(B.failures[0]):!!j})})})},ht.prototype.update=function(d,p){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(p):(d=I(d,this.schema.primKey.keyPath),d===void 0?Rt(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(p))},ht.prototype.put=function(d,p){var x=this,E=this.schema.primKey,T=E.auto,j=E.keyPath,D=d;return j&&T&&(D=ec(j)(d)),this._trans("readwrite",function(B){return x.core.mutate({trans:B,type:"put",values:[D],keys:p!=null?[p]:null})}).then(function(B){return B.numFailures?Pe.reject(B.failures[0]):B.lastResult}).then(function(B){if(j)try{R(d,j,B)}catch{}return B})},ht.prototype.delete=function(d){var p=this;return this._trans("readwrite",function(x){return p.core.mutate({trans:x,type:"delete",keys:[d]}).then(function(E){return tc(p,[d],E)}).then(function(E){return E.numFailures?Pe.reject(E.failures[0]):void 0})})},ht.prototype.clear=function(){var d=this;return this._trans("readwrite",function(p){return d.core.mutate({trans:p,type:"deleteRange",range:$v}).then(function(x){return tc(d,null,x)})}).then(function(p){return p.numFailures?Pe.reject(p.failures[0]):void 0})},ht.prototype.bulkGet=function(d){var p=this;return this._trans("readonly",function(x){return p.core.getMany({keys:d,trans:x}).then(function(E){return E.map(function(T){return p.hook.reading.fire(T)})})})},ht.prototype.bulkAdd=function(d,p,x){var E=this,T=Array.isArray(p)?p:void 0,j=(x=x||(T?void 0:p))?x.allKeys:void 0;return this._trans("readwrite",function(D){var W=E.schema.primKey,B=W.auto,W=W.keyPath;if(W&&T)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var V=d.length,W=W&&B?d.map(ec(W)):d;return E.core.mutate({trans:D,type:"add",keys:T,values:W,wantResults:j}).then(function(Y){var U=Y.numFailures,re=Y.results,q=Y.lastResult,Y=Y.failures;if(U===0)return j?re:q;throw new _e("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(V," operations failed"),Y)})})},ht.prototype.bulkPut=function(d,p,x){var E=this,T=Array.isArray(p)?p:void 0,j=(x=x||(T?void 0:p))?x.allKeys:void 0;return this._trans("readwrite",function(D){var W=E.schema.primKey,B=W.auto,W=W.keyPath;if(W&&T)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var V=d.length,W=W&&B?d.map(ec(W)):d;return E.core.mutate({trans:D,type:"put",keys:T,values:W,wantResults:j}).then(function(Y){var U=Y.numFailures,re=Y.results,q=Y.lastResult,Y=Y.failures;if(U===0)return j?re:q;throw new _e("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(V," operations failed"),Y)})})},ht.prototype.bulkUpdate=function(d){var p=this,x=this.core,E=d.map(function(D){return D.key}),T=d.map(function(D){return D.changes}),j=[];return this._trans("readwrite",function(D){return x.getMany({trans:D,keys:E,cache:"clone"}).then(function(B){var V=[],W=[];d.forEach(function(U,re){var q=U.key,Y=U.changes,J=B[re];if(J){for(var ne=0,ie=Object.keys(Y);ne<ie.length;ne++){var ue=ie[ne],pe=Y[ue];if(ue===p.schema.primKey.keyPath){if(it(pe,q)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else R(J,ue,pe)}j.push(re),V.push(q),W.push(J)}});var ee=V.length;return x.mutate({trans:D,type:"put",keys:V,values:W,updates:{keys:E,changeSpecs:T}}).then(function(U){var re=U.numFailures,q=U.failures;if(re===0)return ee;for(var Y=0,J=Object.keys(q);Y<J.length;Y++){var ne,ie=J[Y],ue=j[Number(ie)];ue!=null&&(ne=q[ie],delete q[ie],q[ue]=ne)}throw new _e("".concat(p.name,".bulkUpdate(): ").concat(re," of ").concat(ee," operations failed"),q)})})})},ht.prototype.bulkDelete=function(d){var p=this,x=d.length;return this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"delete",keys:d}).then(function(T){return tc(p,d,T)})}).then(function(D){var T=D.numFailures,j=D.lastResult,D=D.failures;if(T===0)return j;throw new _e("".concat(p.name,".bulkDelete(): ").concat(T," of ").concat(x," operations failed"),D)})},ht);function ht(){}function Qa(d){function p(D,B){if(B){for(var V=arguments.length,W=new Array(V-1);--V;)W[V-1]=arguments[V];return x[D].subscribe.apply(null,W),d}if(typeof D=="string")return x[D]}var x={};p.addEventType=j;for(var E=1,T=arguments.length;E<T;++E)j(arguments[E]);return p;function j(D,B,V){if(typeof D!="object"){var W;B=B||te;var ee={subscribers:[],fire:V=V||We,subscribe:function(U){ee.subscribers.indexOf(U)===-1&&(ee.subscribers.push(U),ee.fire=B(ee.fire,U))},unsubscribe:function(U){ee.subscribers=ee.subscribers.filter(function(re){return re!==U}),ee.fire=ee.subscribers.reduce(B,V)}};return x[D]=p[D]=ee}o(W=D).forEach(function(U){var re=W[U];if(a(re))j(U,W[U][0],W[U][1]);else{if(re!=="asap")throw new me.InvalidArgument("Invalid event config");var q=j(U,Tt,function(){for(var Y=arguments.length,J=new Array(Y);Y--;)J[Y]=arguments[Y];q.subscribers.forEach(function(ne){O(function(){ne.apply(null,J)})})})}})}}function Ya(d,p){return v(p).from({prototype:d}),p}function Co(d,p){return!(d.filter||d.algorithm||d.or)&&(p?d.justLimit:!d.replayFilter)}function th(d,p){d.filter=Ci(d.filter,p)}function nh(d,p,x){var E=d.replayFilter;d.replayFilter=E?function(){return Ci(E(),p())}:p,d.justLimit=x&&!E}function nc(d,p){if(d.isPrimKey)return p.primaryKey;var x=p.getIndexByKeyPath(d.index);if(!x)throw new me.Schema("KeyPath "+d.index+" on object store "+p.name+" is not indexed");return x}function Kv(d,p,x){var E=nc(d,p.schema);return p.openCursor({trans:x,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:E,range:d.range}})}function rc(d,p,x,E){var T=d.replayFilter?Ci(d.filter,d.replayFilter()):d.filter;if(d.or){var j={},D=function(B,V,W){var ee,U;T&&!T(V,W,function(re){return V.stop(re)},function(re){return V.fail(re)})||((U=""+(ee=V.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(ee)),f(j,U)||(j[U]=!0,p(B,V,W)))};return Promise.all([d.or._iterate(D,x),Wv(Kv(d,E,x),d.algorithm,D,!d.keysOnly&&d.valueMapper)])}return Wv(Kv(d,E,x),Ci(d.algorithm,T),p,!d.keysOnly&&d.valueMapper)}function Wv(d,p,x,E){var T=vt(E?function(j,D,B){return x(E(j),D,B)}:x);return d.then(function(j){if(j)return j.start(function(){var D=function(){return j.continue()};p&&!p(j,function(B){return D=B},function(B){j.stop(B),D=We},function(B){j.fail(B),D=We})||T(j.value,j,function(B){return D=B}),D()})})}var fT=(ut.prototype._read=function(d,p){var x=this._ctx;return x.error?x.table._trans(null,Rt.bind(null,x.error)):x.table._trans("readonly",d).then(p)},ut.prototype._write=function(d){var p=this._ctx;return p.error?p.table._trans(null,Rt.bind(null,p.error)):p.table._trans("readwrite",d,"locked")},ut.prototype._addAlgorithm=function(d){var p=this._ctx;p.algorithm=Ci(p.algorithm,d)},ut.prototype._iterate=function(d,p){return rc(this._ctx,d,p,this._ctx.table.core)},ut.prototype.clone=function(d){var p=Object.create(this.constructor.prototype),x=Object.create(this._ctx);return d&&l(x,d),p._ctx=x,p},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(d){var p=this._ctx;return this._read(function(x){return rc(p,d,x,p.table.core)})},ut.prototype.count=function(d){var p=this;return this._read(function(x){var E=p._ctx,T=E.table.core;if(Co(E,!0))return T.count({trans:x,query:{index:nc(E,T.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var j=0;return rc(E,function(){return++j,!1},x,T).then(function(){return j})}).then(d)},ut.prototype.sortBy=function(d,p){var x=d.split(".").reverse(),E=x[0],T=x.length-1;function j(V,W){return W?j(V[x[W]],W-1):V[E]}var D=this._ctx.dir==="next"?1:-1;function B(V,W){return it(j(V,T),j(W,T))*D}return this.toArray(function(V){return V.sort(B)}).then(p)},ut.prototype.toArray=function(d){var p=this;return this._read(function(x){var E=p._ctx;if(E.dir==="next"&&Co(E,!0)&&0<E.limit){var T=E.valueMapper,j=nc(E,E.table.core.schema);return E.table.core.query({trans:x,limit:E.limit,values:!0,query:{index:j,range:E.range}}).then(function(B){return B=B.result,T?B.map(T):B})}var D=[];return rc(E,function(B){return D.push(B)},x,E.table.core).then(function(){return D})},d)},ut.prototype.offset=function(d){var p=this._ctx;return d<=0||(p.offset+=d,Co(p)?nh(p,function(){var x=d;return function(E,T){return x===0||(x===1?--x:T(function(){E.advance(x),x=0}),!1)}}):nh(p,function(){var x=d;return function(){return--x<0}})),this},ut.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),nh(this._ctx,function(){var p=d;return function(x,E,T){return--p<=0&&E(T),0<=p}},!0),this},ut.prototype.until=function(d,p){return th(this._ctx,function(x,E,T){return!d(x.value)||(E(T),p)}),this},ut.prototype.first=function(d){return this.limit(1).toArray(function(p){return p[0]}).then(d)},ut.prototype.last=function(d){return this.reverse().first(d)},ut.prototype.filter=function(d){var p;return th(this._ctx,function(x){return d(x.value)}),(p=this._ctx).isMatch=Ci(p.isMatch,d),this},ut.prototype.and=function(d){return this.filter(d)},ut.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(d){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(x,E){d(E.key,E)})},ut.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ut.prototype.eachPrimaryKey=function(d){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(x,E){d(E.primaryKey,E)})},ut.prototype.keys=function(d){var p=this._ctx;p.keysOnly=!p.isMatch;var x=[];return this.each(function(E,T){x.push(T.key)}).then(function(){return x}).then(d)},ut.prototype.primaryKeys=function(d){var p=this._ctx;if(p.dir==="next"&&Co(p,!0)&&0<p.limit)return this._read(function(E){var T=nc(p,p.table.core.schema);return p.table.core.query({trans:E,values:!1,limit:p.limit,query:{index:T,range:p.range}})}).then(function(E){return E.result}).then(d);p.keysOnly=!p.isMatch;var x=[];return this.each(function(E,T){x.push(T.primaryKey)}).then(function(){return x}).then(d)},ut.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ut.prototype.firstKey=function(d){return this.limit(1).keys(function(p){return p[0]}).then(d)},ut.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ut.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var p={};return th(this._ctx,function(T){var E=T.primaryKey.toString(),T=f(p,E);return p[E]=!0,!T}),this},ut.prototype.modify=function(d){var p=this,x=this._ctx;return this._write(function(E){var T=typeof d=="function"?d:function(J){return zv(J,d)},j=x.table.core,W=j.schema.primaryKey,D=W.outbound,B=W.extractKey,V=200,W=p.db._options.modifyChunkSize;W&&(V=typeof W=="object"?W[j.name]||W["*"]||200:W);function ee(J,ue){var ie=ue.failures,ue=ue.numFailures;re+=J-ue;for(var pe=0,xe=o(ie);pe<xe.length;pe++){var Te=xe[pe];U.push(ie[Te])}}var U=[],re=0,q=[],Y=d===Hv;return p.clone().primaryKeys().then(function(J){function ne(ue){var pe=Math.min(V,J.length-ue),xe=J.slice(ue,ue+pe);return(Y?Promise.resolve([]):j.getMany({trans:E,keys:xe,cache:"immutable"})).then(function(Te){var Re=[],Ce=[],Ae=D?[]:null,Ie=Y?xe:[];if(!Y)for(var je=0;je<pe;++je){var Fe=Te[je],Je={value:G(Fe),primKey:J[ue+je]};T.call(Je,Je.value,Je)!==!1&&(Je.value==null?Ie.push(J[ue+je]):D||it(B(Fe),B(Je.value))===0?(Ce.push(Je.value),D&&Ae.push(J[ue+je])):(Ie.push(J[ue+je]),Re.push(Je.value)))}return Promise.resolve(0<Re.length&&j.mutate({trans:E,type:"add",values:Re}).then(function(tt){for(var nt in tt.failures)Ie.splice(parseInt(nt),1);ee(Re.length,tt)})).then(function(){return(0<Ce.length||ie&&typeof d=="object")&&j.mutate({trans:E,type:"put",keys:Ae,values:Ce,criteria:ie,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ue}).then(function(tt){return ee(Ce.length,tt)})}).then(function(){return(0<Ie.length||ie&&Y)&&j.mutate({trans:E,type:"delete",keys:Ie,criteria:ie,isAdditionalChunk:0<ue}).then(function(tt){return tc(x.table,Ie,tt)}).then(function(tt){return ee(Ie.length,tt)})}).then(function(){return J.length>ue+pe&&ne(ue+V)})})}var ie=Co(x)&&x.limit===1/0&&(typeof d!="function"||Y)&&{index:x.index,range:x.range};return ne(0).then(function(){if(0<U.length)throw new oe("Error modifying one or more objects",U,re,q);return J.length})})})},ut.prototype.delete=function(){var d=this._ctx,p=d.range;return!Co(d)||d.table.schema.yProps||!d.isPrimKey&&p.type!==3?this.modify(Hv):this._write(function(x){var E=d.table.core.schema.primaryKey,T=p;return d.table.core.count({trans:x,query:{index:E,range:T}}).then(function(j){return d.table.core.mutate({trans:x,type:"deleteRange",range:T}).then(function(V){var B=V.failures,V=V.numFailures;if(V)throw new oe("Could not delete some values",Object.keys(B).map(function(W){return B[W]}),j-V);return j-V})})})},ut);function ut(){}var Hv=function(d,p){return p.value=null};function hT(d,p){return d<p?-1:d===p?0:1}function pT(d,p){return p<d?-1:d===p?0:1}function Mn(d,p,x){return d=d instanceof Gv?new d.Collection(d):d,d._ctx.error=new(x||TypeError)(p),d}function To(d){return new d.Collection(d,function(){return qv("")}).limit(0)}function sc(d,p,x,E){var T,j,D,B,V,W,ee,U=x.length;if(!x.every(function(Y){return typeof Y=="string"}))return Mn(d,Lv);function re(Y){T=Y==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},j=Y==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},D=Y==="next"?hT:pT;var J=x.map(function(ne){return{lower:j(ne),upper:T(ne)}}).sort(function(ne,ie){return D(ne.lower,ie.lower)});B=J.map(function(ne){return ne.upper}),V=J.map(function(ne){return ne.lower}),ee=(W=Y)==="next"?"":E}re("next"),d=new d.Collection(d,function(){return As(B[0],V[U-1]+E)}),d._ondirectionchange=function(Y){re(Y)};var q=0;return d._addAlgorithm(function(Y,J,ne){var ie=Y.key;if(typeof ie!="string")return!1;var ue=j(ie);if(p(ue,V,q))return!0;for(var pe=null,xe=q;xe<U;++xe){var Te=function(Re,Ce,Ae,Ie,je,Fe){for(var Je=Math.min(Re.length,Ie.length),tt=-1,nt=0;nt<Je;++nt){var Fn=Ce[nt];if(Fn!==Ie[nt])return je(Re[nt],Ae[nt])<0?Re.substr(0,nt)+Ae[nt]+Ae.substr(nt+1):je(Re[nt],Ie[nt])<0?Re.substr(0,nt)+Ie[nt]+Ae.substr(nt+1):0<=tt?Re.substr(0,tt)+Ce[tt]+Ae.substr(tt+1):null;je(Re[nt],Fn)<0&&(tt=nt)}return Je<Ie.length&&Fe==="next"?Re+Ae.substr(Re.length):Je<Re.length&&Fe==="prev"?Re.substr(0,Ae.length):tt<0?null:Re.substr(0,tt)+Ie[tt]+Ae.substr(tt+1)}(ie,ue,B[xe],V[xe],D,W);Te===null&&pe===null?q=xe+1:(pe===null||0<D(pe,Te))&&(pe=Te)}return J(pe!==null?function(){Y.continue(pe+ee)}:ne),!1}),d}function As(d,p,x,E){return{type:2,lower:d,upper:p,lowerOpen:x,upperOpen:E}}function qv(d){return{type:1,lower:d,upper:d}}var Gv=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(d,p,x,E){x=x!==!1,E=E===!0;try{return 0<this._cmp(d,p)||this._cmp(d,p)===0&&(x||E)&&(!x||!E)?To(this):new this.Collection(this,function(){return As(d,p,!x,!E)})}catch{return Mn(this,Xr)}},Gt.prototype.equals=function(d){return d==null?Mn(this,Xr):new this.Collection(this,function(){return qv(d)})},Gt.prototype.above=function(d){return d==null?Mn(this,Xr):new this.Collection(this,function(){return As(d,void 0,!0)})},Gt.prototype.aboveOrEqual=function(d){return d==null?Mn(this,Xr):new this.Collection(this,function(){return As(d,void 0,!1)})},Gt.prototype.below=function(d){return d==null?Mn(this,Xr):new this.Collection(this,function(){return As(void 0,d,!1,!0)})},Gt.prototype.belowOrEqual=function(d){return d==null?Mn(this,Xr):new this.Collection(this,function(){return As(void 0,d)})},Gt.prototype.startsWith=function(d){return typeof d!="string"?Mn(this,Lv):this.between(d,d+Ei,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):sc(this,function(p,x){return p.indexOf(x[0])===0},[d],Ei)},Gt.prototype.equalsIgnoreCase=function(d){return sc(this,function(p,x){return p===x[0]},[d],"")},Gt.prototype.anyOfIgnoreCase=function(){var d=ye.apply(se,arguments);return d.length===0?To(this):sc(this,function(p,x){return x.indexOf(p)!==-1},d,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var d=ye.apply(se,arguments);return d.length===0?To(this):sc(this,function(p,x){return x.some(function(E){return p.indexOf(E)===0})},d,Ei)},Gt.prototype.anyOf=function(){var d=this,p=ye.apply(se,arguments),x=this._cmp;try{p.sort(x)}catch{return Mn(this,Xr)}if(p.length===0)return To(this);var E=new this.Collection(this,function(){return As(p[0],p[p.length-1])});E._ondirectionchange=function(j){x=j==="next"?d._ascending:d._descending,p.sort(x)};var T=0;return E._addAlgorithm(function(j,D,B){for(var V=j.key;0<x(V,p[T]);)if(++T===p.length)return D(B),!1;return x(V,p[T])===0||(D(function(){j.continue(p[T])}),!1)}),E},Gt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var d=ye.apply(se,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Mn(this,Xr)}var p=d.reduce(function(x,E){return x?x.concat([[x[x.length-1][1],E]]):[[-1/0,E]]},null);return p.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(ie,p){var x=this,E=this._cmp,T=this._ascending,j=this._descending,D=this._min,B=this._max;if(ie.length===0)return To(this);if(!ie.every(function(ue){return ue[0]!==void 0&&ue[1]!==void 0&&T(ue[0],ue[1])<=0}))return Mn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var V=!p||p.includeLowers!==!1,W=p&&p.includeUppers===!0,ee,U=T;function re(ue,pe){return U(ue[0],pe[0])}try{(ee=ie.reduce(function(ue,pe){for(var xe=0,Te=ue.length;xe<Te;++xe){var Re=ue[xe];if(E(pe[0],Re[1])<0&&0<E(pe[1],Re[0])){Re[0]=D(Re[0],pe[0]),Re[1]=B(Re[1],pe[1]);break}}return xe===Te&&ue.push(pe),ue},[])).sort(re)}catch{return Mn(this,Xr)}var q=0,Y=W?function(ue){return 0<T(ue,ee[q][1])}:function(ue){return 0<=T(ue,ee[q][1])},J=V?function(ue){return 0<j(ue,ee[q][0])}:function(ue){return 0<=j(ue,ee[q][0])},ne=Y,ie=new this.Collection(this,function(){return As(ee[0][0],ee[ee.length-1][1],!V,!W)});return ie._ondirectionchange=function(ue){U=ue==="next"?(ne=Y,T):(ne=J,j),ee.sort(re)},ie._addAlgorithm(function(ue,pe,xe){for(var Te,Re=ue.key;ne(Re);)if(++q===ee.length)return pe(xe),!1;return!Y(Te=Re)&&!J(Te)||(x._cmp(Re,ee[q][1])===0||x._cmp(Re,ee[q][0])===0||pe(function(){U===T?ue.continue(ee[q][0]):ue.continue(ee[q][1])}),!1)}),ie},Gt.prototype.startsWithAnyOf=function(){var d=ye.apply(se,arguments);return d.every(function(p){return typeof p=="string"})?d.length===0?To(this):this.inAnyRange(d.map(function(p){return[p,p+Ei]})):Mn(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Nr(d){return vt(function(p){return Ja(p),d(p.target.error),!1})}function Ja(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Za="storagemutated",rh="x-storagemutated-1",js=Qa(null,Za),mT=(Lr.prototype._lock=function(){return C(!Le.global),++this._reculock,this._reculock!==1||Le.global||(Le.lockOwnerFor=this),this},Lr.prototype._unlock=function(){if(C(!Le.global),--this._reculock==0)for(Le.global||(Le.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Si(d[1],d[0])}catch{}}return this},Lr.prototype._locked=function(){return this._reculock&&Le.lockOwnerFor!==this},Lr.prototype.create=function(d){var p=this;if(!this.mode)return this;var x=this.db.idbdb,E=this.db._state.dbOpenError;if(C(!this.idbtrans),!d&&!x)switch(E&&E.name){case"DatabaseClosedError":throw new me.DatabaseClosed(E);case"MissingAPIError":throw new me.MissingAPI(E.message,E);default:throw new me.OpenFailed(E)}if(!this.active)throw new me.TransactionInactive;return C(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||x).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(T){Ja(T),p._reject(d.error)}),d.onabort=vt(function(T){Ja(T),p.active&&p._reject(new me.Abort(d.error)),p.active=!1,p.on("abort").fire(T)}),d.oncomplete=vt(function(){p.active=!1,p._resolve(),"mutatedParts"in d&&js.storagemutated.fire(d.mutatedParts)}),this},Lr.prototype._promise=function(d,p,x){var E=this;if(d==="readwrite"&&this.mode!=="readwrite")return Rt(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new me.TransactionInactive);if(this._locked())return new Pe(function(j,D){E._blockedFuncs.push([function(){E._promise(d,p,x).then(j,D)},Le])});if(x)return Cs(function(){var j=new Pe(function(D,B){E._lock();var V=p(D,B,E);V&&V.then&&V.then(D,B)});return j.finally(function(){return E._unlock()}),j._lib=!0,j});var T=new Pe(function(j,D){var B=p(j,D,E);B&&B.then&&B.then(j,D)});return T._lib=!0,T},Lr.prototype._root=function(){return this.parent?this.parent._root():this},Lr.prototype.waitFor=function(d){var p,x=this._root(),E=Pe.resolve(d);x._waitingFor?x._waitingFor=x._waitingFor.then(function(){return E}):(x._waitingFor=E,x._waitingQueue=[],p=x.idbtrans.objectStore(x.storeNames[0]),function j(){for(++x._spinCount;x._waitingQueue.length;)x._waitingQueue.shift()();x._waitingFor&&(p.get(-1/0).onsuccess=j)}());var T=x._waitingFor;return new Pe(function(j,D){E.then(function(B){return x._waitingQueue.push(vt(j.bind(null,B)))},function(B){return x._waitingQueue.push(vt(D.bind(null,B)))}).finally(function(){x._waitingFor===T&&(x._waitingFor=null)})})},Lr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},Lr.prototype.table=function(d){var p=this._memoizedTables||(this._memoizedTables={});if(f(p,d))return p[d];var x=this.schema[d];if(!x)throw new me.NotFound("Table "+d+" not part of transaction");return x=new this.db.Table(d,x,this),x.core=this.db.core.table(d),p[d]=x},Lr);function Lr(){}function sh(d,p,x,E,T,j,D,B){return{name:d,keyPath:p,unique:x,multi:E,auto:T,compound:j,src:(x&&!D?"&":"")+(E?"*":"")+(T?"++":"")+Qv(p),type:B}}function Qv(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function ih(d,p,x){return{name:d,primKey:p,indexes:x,mappedClass:null,idxByName:(E=function(T){return[T.name,T]},x.reduce(function(T,j,D){return D=E(j,D),D&&(T[D[0]]=D[1]),T},{}))};var E}var Xa=function(d){try{return d.only([[]]),Xa=function(){return[[]]},[[]]}catch{return Xa=function(){return Ei},Ei}};function oh(d){return d==null?function(){}:typeof d=="string"?(p=d).split(".").length===1?function(x){return x[p]}:function(x){return I(x,p)}:function(x){return I(x,d)};var p}function Yv(d){return[].slice.call(d)}var gT=0;function el(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function yT(d,p,V){function E(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var q=ne.lower,Y=ne.upper,J=ne.lowerOpen,ne=ne.upperOpen;return q===void 0?Y===void 0?null:p.upperBound(Y,!!ne):Y===void 0?p.lowerBound(q,!!J):p.bound(q,Y,!!J,!!ne)}function T(re){var q,Y=re.name;return{name:Y,schema:re,mutate:function(J){var ne=J.trans,ie=J.type,ue=J.keys,pe=J.values,xe=J.range;return new Promise(function(Te,Re){Te=vt(Te);var Ce=ne.objectStore(Y),Ae=Ce.keyPath==null,Ie=ie==="put"||ie==="add";if(!Ie&&ie!=="delete"&&ie!=="deleteRange")throw new Error("Invalid operation type: "+ie);var je,Fe=(ue||pe||{length:1}).length;if(ue&&pe&&ue.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Te({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(yn){++Fn,Ja(yn)}var tt=[],nt=[],Fn=0;if(ie==="deleteRange"){if(xe.type===4)return Te({numFailures:Fn,failures:nt,results:[],lastResult:void 0});xe.type===3?tt.push(je=Ce.clear()):tt.push(je=Ce.delete(E(xe)))}else{var Ae=Ie?Ae?[pe,ue]:[pe,null]:[ue,null],Qe=Ae[0],un=Ae[1];if(Ie)for(var cn=0;cn<Fe;++cn)tt.push(je=un&&un[cn]!==void 0?Ce[ie](Qe[cn],un[cn]):Ce[ie](Qe[cn])),je.onerror=Je;else for(cn=0;cn<Fe;++cn)tt.push(je=Ce[ie](Qe[cn])),je.onerror=Je}function gc(yn){yn=yn.target.result,tt.forEach(function(Ai,Sh){return Ai.error!=null&&(nt[Sh]=Ai.error)}),Te({numFailures:Fn,failures:nt,results:ie==="delete"?ue:tt.map(function(Ai){return Ai.result}),lastResult:yn})}je.onerror=function(yn){Je(yn),gc(yn)},je.onsuccess=gc})},getMany:function(J){var ne=J.trans,ie=J.keys;return new Promise(function(ue,pe){ue=vt(ue);for(var xe,Te=ne.objectStore(Y),Re=ie.length,Ce=new Array(Re),Ae=0,Ie=0,je=function(tt){tt=tt.target,Ce[tt._pos]=tt.result,++Ie===Ae&&ue(Ce)},Fe=Nr(pe),Je=0;Je<Re;++Je)ie[Je]!=null&&((xe=Te.get(ie[Je]))._pos=Je,xe.onsuccess=je,xe.onerror=Fe,++Ae);Ae===0&&ue(Ce)})},get:function(J){var ne=J.trans,ie=J.key;return new Promise(function(ue,pe){ue=vt(ue);var xe=ne.objectStore(Y).get(ie);xe.onsuccess=function(Te){return ue(Te.target.result)},xe.onerror=Nr(pe)})},query:(q=W,function(J){return new Promise(function(ne,ie){ne=vt(ne);var ue,pe,xe,Ae=J.trans,Te=J.values,Re=J.limit,je=J.query,Ce=Re===1/0?void 0:Re,Ie=je.index,je=je.range,Ae=Ae.objectStore(Y),Ie=Ie.isPrimaryKey?Ae:Ae.index(Ie.name),je=E(je);if(Re===0)return ne({result:[]});q?((Ce=Te?Ie.getAll(je,Ce):Ie.getAllKeys(je,Ce)).onsuccess=function(Fe){return ne({result:Fe.target.result})},Ce.onerror=Nr(ie)):(ue=0,pe=!Te&&"openKeyCursor"in Ie?Ie.openKeyCursor(je):Ie.openCursor(je),xe=[],pe.onsuccess=function(Fe){var Je=pe.result;return Je?(xe.push(Te?Je.value:Je.primaryKey),++ue===Re?ne({result:xe}):void Je.continue()):ne({result:xe})},pe.onerror=Nr(ie))})}),openCursor:function(J){var ne=J.trans,ie=J.values,ue=J.query,pe=J.reverse,xe=J.unique;return new Promise(function(Te,Re){Te=vt(Te);var Ie=ue.index,Ce=ue.range,Ae=ne.objectStore(Y),Ae=Ie.isPrimaryKey?Ae:Ae.index(Ie.name),Ie=pe?xe?"prevunique":"prev":xe?"nextunique":"next",je=!ie&&"openKeyCursor"in Ae?Ae.openKeyCursor(E(Ce),Ie):Ae.openCursor(E(Ce),Ie);je.onerror=Nr(Re),je.onsuccess=vt(function(Fe){var Je,tt,nt,Fn,Qe=je.result;Qe?(Qe.___id=++gT,Qe.done=!1,Je=Qe.continue.bind(Qe),tt=(tt=Qe.continuePrimaryKey)&&tt.bind(Qe),nt=Qe.advance.bind(Qe),Fn=function(){throw new Error("Cursor not stopped")},Qe.trans=ne,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=vt(Re),Qe.next=function(){var un=this,cn=1;return this.start(function(){return cn--?un.continue():un.stop()}).then(function(){return un})},Qe.start=function(un){function cn(){if(je.result)try{un()}catch(yn){Qe.fail(yn)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var gc=new Promise(function(yn,Ai){yn=vt(yn),je.onerror=Nr(Ai),Qe.fail=Ai,Qe.stop=function(Sh){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=Fn,yn(Sh)}});return je.onsuccess=vt(function(yn){je.onsuccess=cn,cn()}),Qe.continue=Je,Qe.continuePrimaryKey=tt,Qe.advance=nt,cn(),gc},Te(Qe)):Te(null)},Re)})},count:function(J){var ne=J.query,ie=J.trans,ue=ne.index,pe=ne.range;return new Promise(function(xe,Te){var Re=ie.objectStore(Y),Ce=ue.isPrimaryKey?Re:Re.index(ue.name),Re=E(pe),Ce=Re?Ce.count(Re):Ce.count();Ce.onsuccess=vt(function(Ae){return xe(Ae.target.result)}),Ce.onerror=Nr(Te)})}}}var j,D,B,ee=(D=V,B=Yv((j=d).objectStoreNames),{schema:{name:j.name,tables:B.map(function(re){return D.objectStore(re)}).map(function(re){var q=re.keyPath,ne=re.autoIncrement,Y=a(q),J={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q==null,compound:Y,keyPath:q,autoIncrement:ne,unique:!0,extractKey:oh(q)},indexes:Yv(re.indexNames).map(function(ie){return re.index(ie)}).map(function(xe){var ue=xe.name,pe=xe.unique,Te=xe.multiEntry,xe=xe.keyPath,Te={name:ue,compound:a(xe),keyPath:xe,unique:pe,multiEntry:Te,extractKey:oh(xe)};return J[el(xe)]=Te}),getIndexByKeyPath:function(ie){return J[el(ie)]}};return J[":id"]=ne.primaryKey,q!=null&&(J[el(q)]=ne.primaryKey),ne})},hasGetAll:0<B.length&&"getAll"in D.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),V=ee.schema,W=ee.hasGetAll,ee=V.tables.map(T),U={};return ee.forEach(function(re){return U[re.name]=re}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(re){if(!U[re])throw new Error("Table '".concat(re,"' not found"));return U[re]},MIN_KEY:-1/0,MAX_KEY:Xa(p),schema:V}}function vT(d,p,x,E){var T=x.IDBKeyRange;return x.indexedDB,{dbcore:(E=yT(p,T,E),d.dbcore.reduce(function(j,D){return D=D.create,r(r({},j),D(j))},E))}}function ic(d,E){var x=E.db,E=vT(d._middlewares,x,d._deps,E);d.core=E.dbcore,d.tables.forEach(function(T){var j=T.name;d.core.schema.tables.some(function(D){return D.name===j})&&(T.core=d.core.table(j),d[j]instanceof d.Table&&(d[j].core=T.core))})}function oc(d,p,x,E){x.forEach(function(T){var j=E[T];p.forEach(function(D){var B=function V(W,ee){return b(W,ee)||(W=u(W))&&V(W,ee)}(D,T);(!B||"value"in B&&B.value===void 0)&&(D===d.Transaction.prototype||D instanceof d.Transaction?_(D,T,{get:function(){return this.table(T)},set:function(V){m(this,T,{value:V,writable:!0,configurable:!0,enumerable:!0})}}):D[T]=new d.Table(T,j))})})}function ah(d,p){p.forEach(function(x){for(var E in x)x[E]instanceof d.Table&&delete x[E]})}function wT(d,p){return d._cfg.version-p._cfg.version}function bT(d,p,x,E){var T=d._dbSchema;x.objectStoreNames.contains("$meta")&&!T.$meta&&(T.$meta=ih("$meta",Zv("")[0],[]),d._storeNames.push("$meta"));var j=d._createTransaction("readwrite",d._storeNames,T);j.create(x),j._completion.catch(E);var D=j._reject.bind(j),B=Le.transless||Le;Cs(function(){return Le.trans=j,Le.transless=B,p!==0?(ic(d,x),W=p,((V=j).storeNames.includes("$meta")?V.table("$meta").get("version").then(function(ee){return ee??W}):Pe.resolve(W)).then(function(ee){return re=ee,q=j,Y=x,J=[],ee=(U=d)._versions,ne=U._dbSchema=lc(0,U.idbdb,Y),(ee=ee.filter(function(ie){return ie._cfg.version>=re})).length!==0?(ee.forEach(function(ie){J.push(function(){var ue=ne,pe=ie._cfg.dbschema;uc(U,ue,Y),uc(U,pe,Y),ne=U._dbSchema=pe;var xe=lh(ue,pe);xe.add.forEach(function(Ie){uh(Y,Ie[0],Ie[1].primKey,Ie[1].indexes)}),xe.change.forEach(function(Ie){if(Ie.recreate)throw new me.Upgrade("Not yet support for changing primary key");var je=Y.objectStore(Ie.name);Ie.add.forEach(function(Fe){return ac(je,Fe)}),Ie.change.forEach(function(Fe){je.deleteIndex(Fe.name),ac(je,Fe)}),Ie.del.forEach(function(Fe){return je.deleteIndex(Fe)})});var Te=ie._cfg.contentUpgrade;if(Te&&ie._cfg.version>re){ic(U,Y),q._memoizedTables={};var Re=$(pe);xe.del.forEach(function(Ie){Re[Ie]=ue[Ie]}),ah(U,[U.Transaction.prototype]),oc(U,[U.Transaction.prototype],o(Re),Re),q.schema=Re;var Ce,Ae=Z(Te);return Ae&&So(),xe=Pe.follow(function(){var Ie;(Ce=Te(q))&&Ae&&(Ie=Ts.bind(null,null),Ce.then(Ie,Ie))}),Ce&&typeof Ce.then=="function"?Pe.resolve(Ce):xe.then(function(){return Ce})}}),J.push(function(ue){var pe,xe,Te=ie._cfg.dbschema;pe=Te,xe=ue,[].slice.call(xe.db.objectStoreNames).forEach(function(Re){return pe[Re]==null&&xe.db.deleteObjectStore(Re)}),ah(U,[U.Transaction.prototype]),oc(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),q.schema=U._dbSchema}),J.push(function(ue){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===ie._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(pe){return pe!=="$meta"})):ue.objectStore("$meta").put(ie._cfg.version,"version"))})}),function ie(){return J.length?Pe.resolve(J.shift()(q.idbtrans)).then(ie):Pe.resolve()}().then(function(){Jv(ne,Y)})):Pe.resolve();var U,re,q,Y,J,ne}).catch(D)):(o(T).forEach(function(ee){uh(x,ee,T[ee].primKey,T[ee].indexes)}),ic(d,x),void Pe.follow(function(){return d.on.populate.fire(j)}).catch(D));var V,W})}function xT(d,p){Jv(d._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var x=lc(0,d.idbdb,p);uc(d,d._dbSchema,p);for(var E=0,T=lh(x,d._dbSchema).change;E<T.length;E++){var j=function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=p.objectStore(D.name);D.add.forEach(function(V){be&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(V.src)),ac(B,V)})}(T[E]);if(typeof j=="object")return j.value}}function lh(d,p){var x,E={del:[],add:[],change:[]};for(x in d)p[x]||E.del.push(x);for(x in p){var T=d[x],j=p[x];if(T){var D={name:x,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(T.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||T.primKey.auto!==j.primKey.auto)D.recreate=!0,E.change.push(D);else{var B=T.idxByName,V=j.idxByName,W=void 0;for(W in B)V[W]||D.del.push(W);for(W in V){var ee=B[W],U=V[W];ee?ee.src!==U.src&&D.change.push(U):D.add.push(U)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([x,j])}return E}function uh(d,p,x,E){var T=d.db.createObjectStore(p,x.keyPath?{keyPath:x.keyPath,autoIncrement:x.auto}:{autoIncrement:x.auto});return E.forEach(function(j){return ac(T,j)}),T}function Jv(d,p){o(d).forEach(function(x){p.db.objectStoreNames.contains(x)||(be&&console.debug("Dexie: Creating missing table",x),uh(p,x,d[x].primKey,d[x].indexes))})}function ac(d,p){d.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function lc(d,p,x){var E={};return y(p.objectStoreNames,0).forEach(function(T){for(var j=x.objectStore(T),D=sh(Qv(W=j.keyPath),W||"",!0,!1,!!j.autoIncrement,W&&typeof W!="string",!0),B=[],V=0;V<j.indexNames.length;++V){var ee=j.index(j.indexNames[V]),W=ee.keyPath,ee=sh(ee.name,W,!!ee.unique,!!ee.multiEntry,!1,W&&typeof W!="string",!1);B.push(ee)}E[T]=ih(T,D,B)}),E}function uc(d,p,x){for(var E=x.db.objectStoreNames,T=0;T<E.length;++T){var j=E[T],D=x.objectStore(j);d._hasGetAll="getAll"in D;for(var B=0;B<D.indexNames.length;++B){var V=D.indexNames[B],W=D.index(V).keyPath,ee=typeof W=="string"?W:"["+y(W).join("+")+"]";!p[j]||(W=p[j].idxByName[ee])&&(W.name=V,delete p[j].idxByName[ee],p[j].idxByName[V]=W)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Zv(d){return d.split(",").map(function(p,x){var j=p.split(":"),E=(T=j[1])===null||T===void 0?void 0:T.trim(),T=(p=j[0].trim()).replace(/([&*]|\+\+)/g,""),j=/^\[/.test(T)?T.match(/^\[(.*)\]$/)[1].split("+"):T;return sh(T,j||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),a(j),x===0,E)})}var _T=(Po.prototype._createTableSchema=ih,Po.prototype._parseIndexSyntax=Zv,Po.prototype._parseStoresSpec=function(d,p){var x=this;o(d).forEach(function(E){if(d[E]!==null){var T=x._parseIndexSyntax(d[E]),j=T.shift();if(!j)throw new me.Schema("Invalid schema for table "+E+": "+d[E]);if(j.unique=!0,j.multi)throw new me.Schema("Primary key cannot be multiEntry*");T.forEach(function(D){if(D.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),T=x._createTableSchema(E,j,T),p[E]=T}})},Po.prototype.stores=function(x){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,x):x;var x=p._versions,E={},T={};return x.forEach(function(j){l(E,j._cfg.storesSource),T=j._cfg.dbschema={},j._parseStoresSpec(E,T)}),p._dbSchema=T,ah(p,[p._allTables,p,p.Transaction.prototype]),oc(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],o(T),T),p._storeNames=o(T),this},Po.prototype.upgrade=function(d){return this._cfg.contentUpgrade=we(this._cfg.contentUpgrade||We,d),this},Po);function Po(){}function ch(d,p){var x=d._dbNamesDB;return x||(x=d._dbNamesDB=new es(Xu,{addons:[],indexedDB:d,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),x.table("dbnames")}function dh(d){return d&&typeof d.databases=="function"}function fh(d){return Cs(function(){return Le.letThrough=!0,d()})}function hh(d){return!("from"in d)}var ln=function(d,p){if(!this){var x=new ln;return d&&"d"in d&&l(x,d),x}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?p:d}:{d:0})};function tl(d,p,x){var E=it(p,x);if(!isNaN(E)){if(0<E)throw RangeError();if(hh(d))return l(d,{from:p,to:x,d:1});var T=d.l,E=d.r;if(it(x,d.from)<0)return T?tl(T,p,x):d.l={from:p,to:x,d:1,l:null,r:null},e0(d);if(0<it(p,d.to))return E?tl(E,p,x):d.r={from:p,to:x,d:1,l:null,r:null},e0(d);it(p,d.from)<0&&(d.from=p,d.l=null,d.d=E?E.d+1:1),0<it(x,d.to)&&(d.to=x,d.r=null,d.d=d.l?d.l.d+1:1),x=!d.r,T&&!d.l&&nl(d,T),E&&x&&nl(d,E)}}function nl(d,p){hh(p)||function x(E,V){var j=V.from,D=V.to,B=V.l,V=V.r;tl(E,j,D),B&&x(E,B),V&&x(E,V)}(d,p)}function Xv(d,p){var x=cc(p),E=x.next();if(E.done)return!1;for(var T=E.value,j=cc(d),D=j.next(T.from),B=D.value;!E.done&&!D.done;){if(it(B.from,T.to)<=0&&0<=it(B.to,T.from))return!0;it(T.from,B.from)<0?T=(E=x.next(B.from)).value:B=(D=j.next(T.from)).value}return!1}function cc(d){var p=hh(d)?null:{s:0,n:d};return{next:function(x){for(var E=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,E)for(;p.n.l&&it(x,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!E||it(x,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function e0(d){var p,x,E=(((p=d.r)===null||p===void 0?void 0:p.d)||0)-(((x=d.l)===null||x===void 0?void 0:x.d)||0),T=1<E?"r":E<-1?"l":"";T&&(p=T=="r"?"l":"r",x=r({},d),E=d[T],d.from=E.from,d.to=E.to,d[T]=E[T],x[T]=E[p],(d[p]=x).d=t0(x)),d.d=t0(d)}function t0(x){var p=x.r,x=x.l;return(p?x?Math.max(p.d,x.d):p.d:x?x.d:0)+1}function dc(d,p){return o(p).forEach(function(x){d[x]?nl(d[x],p[x]):d[x]=function E(T){var j,D,B={};for(j in T)f(T,j)&&(D=T[j],B[j]=!D||typeof D!="object"||de.has(D.constructor)?D:E(D));return B}(p[x])}),d}function ph(d,p){return d.all||p.all||Object.keys(d).some(function(x){return p[x]&&Xv(p[x],d[x])})}h(ln.prototype,((Zn={add:function(d){return nl(this,d),this},addKey:function(d){return tl(this,d,d),this},addKeys:function(d){var p=this;return d.forEach(function(x){return tl(p,x,x)}),this},hasKey:function(d){var p=cc(this).next(d).value;return p&&it(p.from,d)<=0&&0<=it(p.to,d)}})[ve]=function(){return cc(this)},Zn));var Ti={},mh={},gh=!1;function fc(d){dc(mh,d),gh||(gh=!0,setTimeout(function(){gh=!1,yh(mh,!(mh={}))},0))}function yh(d,p){p===void 0&&(p=!1);var x=new Set;if(d.all)for(var E=0,T=Object.values(Ti);E<T.length;E++)n0(D=T[E],d,x,p);else for(var j in d){var D,B=/^idb\:\/\/(.*)\/(.*)\//.exec(j);B&&(j=B[1],B=B[2],(D=Ti["idb://".concat(j,"/").concat(B)])&&n0(D,d,x,p))}x.forEach(function(V){return V()})}function n0(d,p,x,E){for(var T=[],j=0,D=Object.entries(d.queries.query);j<D.length;j++){for(var B=D[j],V=B[0],W=[],ee=0,U=B[1];ee<U.length;ee++){var re=U[ee];ph(p,re.obsSet)?re.subscribers.forEach(function(ne){return x.add(ne)}):E&&W.push(re)}E&&T.push([V,W])}if(E)for(var q=0,Y=T;q<Y.length;q++){var J=Y[q],V=J[0],W=J[1];d.queries.query[V]=W}}function kT(d){var p=d._state,x=d._deps.indexedDB;if(p.isBeingOpened||d.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?Rt(p.dbOpenError):d});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var E=p.openCanceller,T=Math.round(10*d.verno),j=!1;function D(){if(p.openCanceller!==E)throw new me.DatabaseClosed("db.open() was cancelled")}function B(){return new Pe(function(re,q){if(D(),!x)throw new me.MissingAPI;var Y=d.name,J=p.autoSchema||!T?x.open(Y):x.open(Y,T);if(!J)throw new me.MissingAPI;J.onerror=Nr(q),J.onblocked=vt(d._fireOnBlocked),J.onupgradeneeded=vt(function(ne){var ie;ee=J.transaction,p.autoSchema&&!d._options.allowEmptyDB?(J.onerror=Ja,ee.abort(),J.result.close(),(ie=x.deleteDatabase(Y)).onsuccess=ie.onerror=vt(function(){q(new me.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):(ee.onerror=Nr(q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,U=ne<1,d.idbdb=J.result,j&&xT(d,ee),bT(d,ne/10,ee,q))},q),J.onsuccess=vt(function(){ee=null;var ne,ie,ue,pe,xe,Te=d.idbdb=J.result,Re=y(Te.objectStoreNames);if(0<Re.length)try{var Ce=Te.transaction((pe=Re).length===1?pe[0]:pe,"readonly");if(p.autoSchema)ie=Te,ue=Ce,(ne=d).verno=ie.version/10,ue=ne._dbSchema=lc(0,ie,ue),ne._storeNames=y(ie.objectStoreNames,0),oc(ne,[ne._allTables],o(ue),ue);else if(uc(d,d._dbSchema,Ce),((xe=lh(lc(0,(xe=d).idbdb,Ce),xe._dbSchema)).add.length||xe.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),T=Te.version+1,j=!0,re(B());ic(d,Ce)}catch{}Eo.push(d),Te.onversionchange=vt(function(Ae){p.vcFired=!0,d.on("versionchange").fire(Ae)}),Te.onclose=vt(function(){d.close({disableAutoOpen:!1})}),U&&(xe=d._deps,Ce=Y,Te=xe.indexedDB,xe=xe.IDBKeyRange,dh(Te)||Ce===Xu||ch(Te,xe).put({name:Ce}).catch(We)),re()},q)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<T)return T=0,B()}return Pe.reject(re)})}var V,W=p.dbReadyResolve,ee=null,U=!1;return Pe.race([E,(typeof navigator>"u"?Pe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function q(){return indexedDB.databases().finally(re)}V=setInterval(q,100),q()}).finally(function(){return clearInterval(V)}):Promise.resolve()).then(B)]).then(function(){return D(),p.onReadyBeingFired=[],Pe.resolve(fh(function(){return d.on.ready.fire(d.vip)})).then(function re(){if(0<p.onReadyBeingFired.length){var q=p.onReadyBeingFired.reduce(we,We);return p.onReadyBeingFired=[],Pe.resolve(fh(function(){return q(d.vip)})).then(re)}})}).finally(function(){p.openCanceller===E&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(re){p.dbOpenError=re;try{ee&&ee.abort()}catch{}return E===p.openCanceller&&d._close(),Rt(re)}).finally(function(){p.openComplete=!0,W()}).then(function(){var re;return U&&(re={},d.tables.forEach(function(q){q.schema.indexes.forEach(function(Y){Y.name&&(re["idb://".concat(d.name,"/").concat(q.name,"/").concat(Y.name)]=new ln(-1/0,[[[]]]))}),re["idb://".concat(d.name,"/").concat(q.name,"/")]=re["idb://".concat(d.name,"/").concat(q.name,"/:dels")]=new ln(-1/0,[[[]]])}),js(Za).fire(re),yh(re,!0)),d})}function vh(d){function p(j){return d.next(j)}var x=T(p),E=T(function(j){return d.throw(j)});function T(j){return function(V){var B=j(V),V=B.value;return B.done?V:V&&typeof V.then=="function"?V.then(x,E):a(V)?Promise.all(V).then(x,E):x(V)}}return T(p)()}function hc(d,p,x){for(var E=a(d)?d.slice():[d],T=0;T<x;++T)E.push(p);return E}var ST={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(p){var x=d.table(p),E=x.schema,T={},j=[];function D(U,re,q){var Y=el(U),J=T[Y]=T[Y]||[],ne=U==null?0:typeof U=="string"?1:U.length,ie=0<re,ie=r(r({},q),{name:ie?"".concat(Y,"(virtual-from:").concat(q.name,")"):q.name,lowLevelIndex:q,isVirtual:ie,keyTail:re,keyLength:ne,extractKey:oh(U),unique:!ie&&q.unique});return J.push(ie),ie.isPrimaryKey||j.push(ie),1<ne&&D(ne===2?U[0]:U.slice(0,ne-1),re+1,q),J.sort(function(ue,pe){return ue.keyTail-pe.keyTail}),ie}p=D(E.primaryKey.keyPath,0,E.primaryKey),T[":id"]=[p];for(var B=0,V=E.indexes;B<V.length;B++){var W=V[B];D(W.keyPath,0,W)}function ee(U){var re,q=U.query.index;return q.isVirtual?r(r({},U),{query:{index:q.lowLevelIndex,range:(re=U.query.range,q=q.keyTail,{type:re.type===1?2:re.type,lower:hc(re.lower,re.lowerOpen?d.MAX_KEY:d.MIN_KEY,q),lowerOpen:!0,upper:hc(re.upper,re.upperOpen?d.MIN_KEY:d.MAX_KEY,q),upperOpen:!0})}}):U}return r(r({},x),{schema:r(r({},E),{primaryKey:p,indexes:j,getIndexByKeyPath:function(U){return(U=T[el(U)])&&U[0]}}),count:function(U){return x.count(ee(U))},query:function(U){return x.query(ee(U))},openCursor:function(U){var re=U.query.index,q=re.keyTail,Y=re.isVirtual,J=re.keyLength;return Y?x.openCursor(ee(U)).then(function(ie){return ie&&ne(ie)}):x.openCursor(U);function ne(ie){return Object.create(ie,{continue:{value:function(ue){ue!=null?ie.continue(hc(ue,U.reverse?d.MAX_KEY:d.MIN_KEY,q)):U.unique?ie.continue(ie.key.slice(0,J).concat(U.reverse?d.MIN_KEY:d.MAX_KEY,q)):ie.continue()}},continuePrimaryKey:{value:function(ue,pe){ie.continuePrimaryKey(hc(ue,d.MAX_KEY,q),pe)}},primaryKey:{get:function(){return ie.primaryKey}},key:{get:function(){var ue=ie.key;return J===1?ue[0]:ue.slice(0,J)}},value:{get:function(){return ie.value}}})}}})}})}};function wh(d,p,x,E){return x=x||{},E=E||"",o(d).forEach(function(T){var j,D,B;f(p,T)?(j=d[T],D=p[T],typeof j=="object"&&typeof D=="object"&&j&&D?(B=Q(j))!==Q(D)?x[E+T]=p[T]:B==="Object"?wh(j,D,x,E+T+"."):j!==D&&(x[E+T]=p[T]):j!==D&&(x[E+T]=p[T])):x[E+T]=void 0}),o(p).forEach(function(T){f(d,T)||(x[E+T]=p[T])}),x}function bh(d,p){return p.type==="delete"?p.keys:p.keys||p.values.map(d.extractKey)}var ET={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(p){var x=d.table(p),E=x.schema.primaryKey;return r(r({},x),{mutate:function(T){var j=Le.trans,D=j.table(p).hook,B=D.deleting,V=D.creating,W=D.updating;switch(T.type){case"add":if(V.fire===We)break;return j._promise("readwrite",function(){return ee(T)},!0);case"put":if(V.fire===We&&W.fire===We)break;return j._promise("readwrite",function(){return ee(T)},!0);case"delete":if(B.fire===We)break;return j._promise("readwrite",function(){return ee(T)},!0);case"deleteRange":if(B.fire===We)break;return j._promise("readwrite",function(){return function U(re,q,Y){return x.query({trans:re,values:!1,query:{index:E,range:q},limit:Y}).then(function(J){var ne=J.result;return ee({type:"delete",keys:ne,trans:re}).then(function(ie){return 0<ie.numFailures?Promise.reject(ie.failures[0]):ne.length<Y?{failures:[],numFailures:0,lastResult:void 0}:U(re,r(r({},q),{lower:ne[ne.length-1],lowerOpen:!0}),Y)})})}(T.trans,T.range,1e4)},!0)}return x.mutate(T);function ee(U){var re,q,Y,J=Le.trans,ne=U.keys||bh(E,U);if(!ne)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?r(r({},U),{keys:ne}):r({},U)).type!=="delete"&&(U.values=s([],U.values)),U.keys&&(U.keys=s([],U.keys)),re=x,Y=ne,((q=U).type==="add"?Promise.resolve([]):re.getMany({trans:q.trans,keys:Y,cache:"immutable"})).then(function(ie){var ue=ne.map(function(pe,xe){var Te,Re,Ce,Ae=ie[xe],Ie={onerror:null,onsuccess:null};return U.type==="delete"?B.fire.call(Ie,pe,Ae,J):U.type==="add"||Ae===void 0?(Te=V.fire.call(Ie,pe,U.values[xe],J),pe==null&&Te!=null&&(U.keys[xe]=pe=Te,E.outbound||R(U.values[xe],E.keyPath,pe))):(Te=wh(Ae,U.values[xe]),(Re=W.fire.call(Ie,Te,pe,Ae,J))&&(Ce=U.values[xe],Object.keys(Re).forEach(function(je){f(Ce,je)?Ce[je]=Re[je]:R(Ce,je,Re[je])}))),Ie});return x.mutate(U).then(function(pe){for(var xe=pe.failures,Te=pe.results,Re=pe.numFailures,pe=pe.lastResult,Ce=0;Ce<ne.length;++Ce){var Ae=(Te||ne)[Ce],Ie=ue[Ce];Ae==null?Ie.onerror&&Ie.onerror(xe[Ce]):Ie.onsuccess&&Ie.onsuccess(U.type==="put"&&ie[Ce]?U.values[Ce]:Ae)}return{failures:xe,results:Te,numFailures:Re,lastResult:pe}}).catch(function(pe){return ue.forEach(function(xe){return xe.onerror&&xe.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function r0(d,p,x){try{if(!p||p.keys.length<d.length)return null;for(var E=[],T=0,j=0;T<p.keys.length&&j<d.length;++T)it(p.keys[T],d[j])===0&&(E.push(x?G(p.values[T]):p.values[T]),++j);return E.length===d.length?E:null}catch{return null}}var CT={stack:"dbcore",level:-1,create:function(d){return{table:function(p){var x=d.table(p);return r(r({},x),{getMany:function(E){if(!E.cache)return x.getMany(E);var T=r0(E.keys,E.trans._cache,E.cache==="clone");return T?Pe.resolve(T):x.getMany(E).then(function(j){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?G(j):j},j})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),x.mutate(E)}})}}}};function s0(d,p){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function i0(d,p){switch(d){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var TT={stack:"dbcore",level:0,name:"Observability",create:function(d){var p=d.schema.name,x=new ln(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(E,T,j){if(Le.subscr&&T!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Le.querier));return d.transaction(E,T,j)},table:function(E){var T=d.table(E),j=T.schema,D=j.primaryKey,U=j.indexes,B=D.extractKey,V=D.outbound,W=D.autoIncrement&&U.filter(function(q){return q.compound&&q.keyPath.includes(D.keyPath)}),ee=r(r({},T),{mutate:function(q){function Y(je){return je="idb://".concat(p,"/").concat(E,"/").concat(je),pe[je]||(pe[je]=new ln)}var J,ne,ie,ue=q.trans,pe=q.mutatedParts||(q.mutatedParts={}),xe=Y(""),Te=Y(":dels"),Re=q.type,Ie=q.type==="deleteRange"?[q.range]:q.type==="delete"?[q.keys]:q.values.length<50?[bh(D,q).filter(function(je){return je}),q.values]:[],Ce=Ie[0],Ae=Ie[1],Ie=q.trans._cache;return a(Ce)?(xe.addKeys(Ce),(Ie=Re==="delete"||Ce.length===Ae.length?r0(Ce,Ie):null)||Te.addKeys(Ce),(Ie||Ae)&&(J=Y,ne=Ie,ie=Ae,j.indexes.forEach(function(je){var Fe=J(je.name||"");function Je(nt){return nt!=null?je.extractKey(nt):null}function tt(nt){return je.multiEntry&&a(nt)?nt.forEach(function(Fn){return Fe.addKey(Fn)}):Fe.addKey(nt)}(ne||ie).forEach(function(nt,un){var Qe=ne&&Je(ne[un]),un=ie&&Je(ie[un]);it(Qe,un)!==0&&(Qe!=null&&tt(Qe),un!=null&&tt(un))})}))):Ce?(Ae={from:(Ae=Ce.lower)!==null&&Ae!==void 0?Ae:d.MIN_KEY,to:(Ae=Ce.upper)!==null&&Ae!==void 0?Ae:d.MAX_KEY},Te.add(Ae),xe.add(Ae)):(xe.add(x),Te.add(x),j.indexes.forEach(function(je){return Y(je.name).add(x)})),T.mutate(q).then(function(je){return!Ce||q.type!=="add"&&q.type!=="put"||(xe.addKeys(je.results),W&&W.forEach(function(Fe){for(var Je=q.values.map(function(Qe){return Fe.extractKey(Qe)}),tt=Fe.keyPath.findIndex(function(Qe){return Qe===D.keyPath}),nt=0,Fn=je.results.length;nt<Fn;++nt)Je[nt][tt]=je.results[nt];Y(Fe.name).addKeys(Je)})),ue.mutatedParts=dc(ue.mutatedParts||{},pe),je})}}),U=function(Y){var J=Y.query,Y=J.index,J=J.range;return[Y,new ln((Y=J.lower)!==null&&Y!==void 0?Y:d.MIN_KEY,(J=J.upper)!==null&&J!==void 0?J:d.MAX_KEY)]},re={get:function(q){return[D,new ln(q.key)]},getMany:function(q){return[D,new ln().addKeys(q.keys)]},count:U,query:U,openCursor:U};return o(re).forEach(function(q){ee[q]=function(Y){var J=Le.subscr,ne=!!J,ie=s0(Le,T)&&i0(q,Y)?Y.obsSet={}:J;if(ne){var ue=function(Ae){return Ae="idb://".concat(p,"/").concat(E,"/").concat(Ae),ie[Ae]||(ie[Ae]=new ln)},pe=ue(""),xe=ue(":dels"),J=re[q](Y),ne=J[0],J=J[1];if((q==="query"&&ne.isPrimaryKey&&!Y.values?xe:ue(ne.name||"")).add(J),!ne.isPrimaryKey){if(q!=="count"){var Te=q==="query"&&V&&Y.values&&T.query(r(r({},Y),{values:!1}));return T[q].apply(this,arguments).then(function(Ae){if(q==="query"){if(V&&Y.values)return Te.then(function(Je){return Je=Je.result,pe.addKeys(Je),Ae});var Ie=Y.values?Ae.result.map(B):Ae.result;(Y.values?pe:xe).addKeys(Ie)}else if(q==="openCursor"){var je=Ae,Fe=Y.values;return je&&Object.create(je,{key:{get:function(){return xe.addKey(je.primaryKey),je.key}},primaryKey:{get:function(){var Je=je.primaryKey;return xe.addKey(Je),Je}},value:{get:function(){return Fe&&pe.addKey(je.primaryKey),je.value}}})}return Ae})}xe.add(x)}}return T[q].apply(this,arguments)}}),ee}})}};function o0(d,p,x){if(x.numFailures===0)return p;if(p.type==="deleteRange")return null;var E=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return x.numFailures===E?null:(p=r({},p),a(p.keys)&&(p.keys=p.keys.filter(function(T,j){return!(j in x.failures)})),"values"in p&&a(p.values)&&(p.values=p.values.filter(function(T,j){return!(j in x.failures)})),p)}function xh(d,p){return x=d,((E=p).lower===void 0||(E.lowerOpen?0<it(x,E.lower):0<=it(x,E.lower)))&&(d=d,(p=p).upper===void 0||(p.upperOpen?it(d,p.upper)<0:it(d,p.upper)<=0));var x,E}function a0(d,p,re,E,T,j){if(!re||re.length===0)return d;var D=p.query.index,B=D.multiEntry,V=p.query.range,W=E.schema.primaryKey.extractKey,ee=D.extractKey,U=(D.lowLevelIndex||D).extractKey,re=re.reduce(function(q,Y){var J=q,ne=[];if(Y.type==="add"||Y.type==="put")for(var ie=new ln,ue=Y.values.length-1;0<=ue;--ue){var pe,xe=Y.values[ue],Te=W(xe);ie.hasKey(Te)||(pe=ee(xe),(B&&a(pe)?pe.some(function(je){return xh(je,V)}):xh(pe,V))&&(ie.addKey(Te),ne.push(xe)))}switch(Y.type){case"add":var Re=new ln().addKeys(p.values?q.map(function(Fe){return W(Fe)}):q),J=q.concat(p.values?ne.filter(function(Fe){return Fe=W(Fe),!Re.hasKey(Fe)&&(Re.addKey(Fe),!0)}):ne.map(function(Fe){return W(Fe)}).filter(function(Fe){return!Re.hasKey(Fe)&&(Re.addKey(Fe),!0)}));break;case"put":var Ce=new ln().addKeys(Y.values.map(function(Fe){return W(Fe)}));J=q.filter(function(Fe){return!Ce.hasKey(p.values?W(Fe):Fe)}).concat(p.values?ne:ne.map(function(Fe){return W(Fe)}));break;case"delete":var Ae=new ln().addKeys(Y.keys);J=q.filter(function(Fe){return!Ae.hasKey(p.values?W(Fe):Fe)});break;case"deleteRange":var Ie=Y.range;J=q.filter(function(Fe){return!xh(W(Fe),Ie)})}return J},d);return re===d?d:(re.sort(function(q,Y){return it(U(q),U(Y))||it(W(q),W(Y))}),p.limit&&p.limit<1/0&&(re.length>p.limit?re.length=p.limit:d.length===p.limit&&re.length<p.limit&&(T.dirty=!0)),j?Object.freeze(re):re)}function l0(d,p){return it(d.lower,p.lower)===0&&it(d.upper,p.upper)===0&&!!d.lowerOpen==!!p.lowerOpen&&!!d.upperOpen==!!p.upperOpen}function PT(d,p){return function(x,E,T,j){if(x===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=it(x,E))===0){if(T&&j)return 0;if(T)return 1;if(j)return-1}return E}(d.lower,p.lower,d.lowerOpen,p.lowerOpen)<=0&&0<=function(x,E,T,j){if(x===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=it(x,E))===0){if(T&&j)return 0;if(T)return-1;if(j)return 1}return E}(d.upper,p.upper,d.upperOpen,p.upperOpen)}function AT(d,p,x,E){d.subscribers.add(x),E.addEventListener("abort",function(){var T,j;d.subscribers.delete(x),d.subscribers.size===0&&(T=d,j=p,setTimeout(function(){T.subscribers.size===0&&ce(j,T)},3e3))})}var jT={stack:"dbcore",level:0,name:"Cache",create:function(d){var p=d.schema.name;return r(r({},d),{transaction:function(x,E,T){var j,D,B=d.transaction(x,E,T);return E==="readwrite"&&(D=(j=new AbortController).signal,T=function(V){return function(){if(j.abort(),E==="readwrite"){for(var W=new Set,ee=0,U=x;ee<U.length;ee++){var re=U[ee],q=Ti["idb://".concat(p,"/").concat(re)];if(q){var Y=d.table(re),J=q.optimisticOps.filter(function(Fe){return Fe.trans===B});if(B._explicit&&V&&B.mutatedParts)for(var ne=0,ie=Object.values(q.queries.query);ne<ie.length;ne++)for(var ue=0,pe=(Re=ie[ne]).slice();ue<pe.length;ue++)ph((Ce=pe[ue]).obsSet,B.mutatedParts)&&(ce(Re,Ce),Ce.subscribers.forEach(function(Fe){return W.add(Fe)}));else if(0<J.length){q.optimisticOps=q.optimisticOps.filter(function(Fe){return Fe.trans!==B});for(var xe=0,Te=Object.values(q.queries.query);xe<Te.length;xe++)for(var Re,Ce,Ae,Ie=0,je=(Re=Te[xe]).slice();Ie<je.length;Ie++)(Ce=je[Ie]).res!=null&&B.mutatedParts&&(V&&!Ce.dirty?(Ae=Object.isFrozen(Ce.res),Ae=a0(Ce.res,Ce.req,J,Y,Ce,Ae),Ce.dirty?(ce(Re,Ce),Ce.subscribers.forEach(function(Fe){return W.add(Fe)})):Ae!==Ce.res&&(Ce.res=Ae,Ce.promise=Pe.resolve({result:Ae}))):(Ce.dirty&&ce(Re,Ce),Ce.subscribers.forEach(function(Fe){return W.add(Fe)})))}}}W.forEach(function(Fe){return Fe()})}}},B.addEventListener("abort",T(!1),{signal:D}),B.addEventListener("error",T(!1),{signal:D}),B.addEventListener("complete",T(!0),{signal:D})),B},table:function(x){var E=d.table(x),T=E.schema.primaryKey;return r(r({},E),{mutate:function(j){var D=Le.trans;if(T.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(j);var B=Ti["idb://".concat(p,"/").concat(x)];return B?(D=E.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||bh(T,j).some(function(V){return V==null}))?(B.optimisticOps.push(j),j.mutatedParts&&fc(j.mutatedParts),D.then(function(V){0<V.numFailures&&(ce(B.optimisticOps,j),(V=o0(0,j,V))&&B.optimisticOps.push(V),j.mutatedParts&&fc(j.mutatedParts))}),D.catch(function(){ce(B.optimisticOps,j),j.mutatedParts&&fc(j.mutatedParts)})):D.then(function(V){var W=o0(0,r(r({},j),{values:j.values.map(function(ee,U){var re;return V.failures[U]?ee:(ee=(re=T.keyPath)!==null&&re!==void 0&&re.includes(".")?G(ee):r({},ee),R(ee,T.keyPath,V.results[U]),ee)})}),V);B.optimisticOps.push(W),queueMicrotask(function(){return j.mutatedParts&&fc(j.mutatedParts)})}),D):E.mutate(j)},query:function(j){if(!s0(Le,E)||!i0("query",j))return E.query(j);var D=((W=Le.trans)===null||W===void 0?void 0:W.db._options.cache)==="immutable",U=Le,B=U.requery,V=U.signal,W=function(Y,J,ne,ie){var ue=Ti["idb://".concat(Y,"/").concat(J)];if(!ue)return[];if(!(J=ue.queries[ne]))return[null,!1,ue,null];var pe=J[(ie.query?ie.query.index.name:null)||""];if(!pe)return[null,!1,ue,null];switch(ne){case"query":var xe=pe.find(function(Te){return Te.req.limit===ie.limit&&Te.req.values===ie.values&&l0(Te.req.query.range,ie.query.range)});return xe?[xe,!0,ue,pe]:[pe.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=ie.limit&&(!ie.values||Te.req.values)&&PT(Te.req.query.range,ie.query.range)}),!1,ue,pe];case"count":return xe=pe.find(function(Te){return l0(Te.req.query.range,ie.query.range)}),[xe,!!xe,ue,pe]}}(p,x,"query",j),ee=W[0],U=W[1],re=W[2],q=W[3];return ee&&U?ee.obsSet=j.obsSet:(U=E.query(j).then(function(Y){var J=Y.result;if(ee&&(ee.res=J),D){for(var ne=0,ie=J.length;ne<ie;++ne)Object.freeze(J[ne]);Object.freeze(J)}else Y.result=G(J);return Y}).catch(function(Y){return q&&ee&&ce(q,ee),Promise.reject(Y)}),ee={obsSet:j.obsSet,promise:U,subscribers:new Set,type:"query",req:j,dirty:!1},q?q.push(ee):(q=[ee],(re=re||(Ti["idb://".concat(p,"/").concat(x)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=q)),AT(ee,q,B,V),ee.promise.then(function(Y){return{result:a0(Y.result,j,re==null?void 0:re.optimisticOps,E,ee,D)}})}})}})}};function pc(d,p){return new Proxy(d,{get:function(x,E,T){return E==="db"?p:Reflect.get(x,E,T)}})}var es=(It.prototype.version=function(d){if(isNaN(d)||d<.1)throw new me.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var p=this._versions,x=p.filter(function(E){return E._cfg.version===d})[0];return x||(x=new this.Version(d),p.push(x),p.sort(wT),x.stores({}),this._state.autoSchema=!1,x)},It.prototype._whenReady=function(d){var p=this;return this.idbdb&&(this._state.openComplete||Le.letThrough||this._vip)?d():new Pe(function(x,E){if(p._state.openComplete)return E(new me.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void E(new me.DatabaseClosed);p.open().catch(We)}p._state.dbReadyPromise.then(x,E)}).then(d)},It.prototype.use=function(d){var p=d.stack,x=d.create,E=d.level,T=d.name;return T&&this.unuse({stack:p,name:T}),d=this._middlewares[p]||(this._middlewares[p]=[]),d.push({stack:p,create:x,level:E??10,name:T}),d.sort(function(j,D){return j.level-D.level}),this},It.prototype.unuse=function(d){var p=d.stack,x=d.name,E=d.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(T){return E?T.create!==E:!!x&&T.name!==x})),this},It.prototype.open=function(){var d=this;return Si(Ht,function(){return kT(d)})},It.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,p=Eo.indexOf(this);if(0<=p&&Eo.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Pe(function(x){d.dbReadyResolve=x}),d.openCanceller=new Pe(function(x,E){d.cancelOpen=E}))},It.prototype.close=function(x){var p=(x===void 0?{disableAutoOpen:!0}:x).disableAutoOpen,x=this._state;p?(x.isBeingOpened&&x.cancelOpen(new me.DatabaseClosed),this._close(),x.autoOpen=!1,x.dbOpenError=new me.DatabaseClosed):(this._close(),x.autoOpen=this._options.autoOpen||x.isBeingOpened,x.openComplete=!1,x.dbOpenError=null)},It.prototype.delete=function(d){var p=this;d===void 0&&(d={disableAutoOpen:!0});var x=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Pe(function(T,j){function D(){p.close(d);var B=p._deps.indexedDB.deleteDatabase(p.name);B.onsuccess=vt(function(){var V,W,ee;V=p._deps,W=p.name,ee=V.indexedDB,V=V.IDBKeyRange,dh(ee)||W===Xu||ch(ee,V).delete(W).catch(We),T()}),B.onerror=Nr(j),B.onblocked=p._fireOnBlocked}if(x)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},It.prototype.backendDB=function(){return this.idbdb},It.prototype.isOpen=function(){return this.idbdb!==null},It.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},It.prototype.hasFailed=function(){return this._state.dbOpenError!==null},It.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(It.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(p){return d._allTables[p]})},enumerable:!1,configurable:!0}),It.prototype.transaction=function(){var d=(function(p,x,E){var T=arguments.length;if(T<2)throw new me.InvalidArgument("Too few arguments");for(var j=new Array(T-1);--T;)j[T-1]=arguments[T];return E=j.pop(),[p,z(j),E]}).apply(this,arguments);return this._transaction.apply(this,d)},It.prototype._transaction=function(d,p,x){var E=this,T=Le.trans;T&&T.db===this&&d.indexOf("!")===-1||(T=null);var j,D,B=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(D=p.map(function(W){if(W=W instanceof E.Table?W.name:W,typeof W!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return W}),d=="r"||d===Xf)j=Xf;else{if(d!="rw"&&d!=eh)throw new me.InvalidArgument("Invalid transaction mode: "+d);j=eh}if(T){if(T.mode===Xf&&j===eh){if(!B)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");T=null}T&&D.forEach(function(W){if(T&&T.storeNames.indexOf(W)===-1){if(!B)throw new me.SubTransaction("Table "+W+" not included in parent transaction.");T=null}}),B&&T&&!T.active&&(T=null)}}catch(W){return T?T._promise(null,function(ee,U){U(W)}):Rt(W)}var V=(function W(ee,U,re,q,Y){return Pe.resolve().then(function(){var J=Le.transless||Le,ne=ee._createTransaction(U,re,ee._dbSchema,q);if(ne.explicit=!0,J={trans:ne,transless:J},q)ne.idbtrans=q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,ee._state.PR1398_maxLoop=3}catch(pe){return pe.name===$e.InvalidState&&ee.isOpen()&&0<--ee._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ee.close({disableAutoOpen:!1}),ee.open().then(function(){return W(ee,U,re,null,Y)})):Rt(pe)}var ie,ue=Z(Y);return ue&&So(),J=Pe.follow(function(){var pe;(ie=Y.call(ne,ne))&&(ue?(pe=Ts.bind(null,null),ie.then(pe,pe)):typeof ie.next=="function"&&typeof ie.throw=="function"&&(ie=vh(ie)))},J),(ie&&typeof ie.then=="function"?Pe.resolve(ie).then(function(pe){return ne.active?pe:Rt(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):J.then(function(){return ie})).then(function(pe){return q&&ne._resolve(),ne._completion.then(function(){return pe})}).catch(function(pe){return ne._reject(pe),Rt(pe)})})}).bind(null,this,j,D,T,x);return T?T._promise(j,V,"lock"):Le.trans?Si(Le.transless,function(){return E._whenReady(V)}):this._whenReady(V)},It.prototype.table=function(d){if(!f(this._allTables,d))throw new me.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},It);function It(d,p){var x=this;this._middlewares={},this.verno=0;var E=It.dependencies;this._options=p=r({addons:It.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},E=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var T,j,D,B,V,W={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:We,dbReadyPromise:null,cancelOpen:We,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};W.dbReadyPromise=new Pe(function(U){W.dbReadyResolve=U}),W.openCanceller=new Pe(function(U,re){W.cancelOpen=re}),this._state=W,this.name=d,this.on=Qa(this,"populate","blocked","versionchange","close",{ready:[we,We]}),this.once=function(U,re){var q=function(){for(var Y=[],J=0;J<arguments.length;J++)Y[J]=arguments[J];x.on(U).unsubscribe(q),re.apply(x,Y)};return x.on(U,q)},this.on.ready.subscribe=w(this.on.ready.subscribe,function(U){return function(re,q){It.vip(function(){var Y,J=x._state;J.openComplete?(J.dbOpenError||Pe.resolve().then(re),q&&U(re)):J.onReadyBeingFired?(J.onReadyBeingFired.push(re),q&&U(re)):(U(re),Y=x,q||U(function ne(){Y.on.ready.unsubscribe(re),Y.on.ready.unsubscribe(ne)}))})}}),this.Collection=(T=this,Ya(fT.prototype,function(ie,ne){this.db=T;var q=$v,Y=null;if(ne)try{q=ne()}catch(ue){Y=ue}var J=ie._ctx,ne=J.table,ie=ne.hook.reading.fire;this._ctx={table:ne,index:J.index,isPrimKey:!J.index||ne.schema.primKey.keyPath&&J.index===ne.schema.primKey.name,range:q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:J.or,valueMapper:ie!==Tt?ie:null}})),this.Table=(j=this,Ya(Vv.prototype,function(U,re,q){this.db=j,this._tx=q,this.name=U,this.schema=re,this.hook=j._allTables[U]?j._allTables[U].hook:Qa(null,{creating:[he,We],reading:[P,Tt],updating:[N,We],deleting:[M,We]})})),this.Transaction=(D=this,Ya(mT.prototype,function(U,re,q,Y,J){var ne=this;U!=="readonly"&&re.forEach(function(ie){ie=(ie=q[ie])===null||ie===void 0?void 0:ie.yProps,ie&&(re=re.concat(ie.map(function(ue){return ue.updatesTable})))}),this.db=D,this.mode=U,this.storeNames=re,this.schema=q,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=Qa(this,"complete","error","abort"),this.parent=J||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(ie,ue){ne._resolve=ie,ne._reject=ue}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(ie){var ue=ne.active;return ne.active=!1,ne.on.error.fire(ie),ne.parent?ne.parent._reject(ie):ue&&ne.idbtrans&&ne.idbtrans.abort(),Rt(ie)})})),this.Version=(B=this,Ya(_T.prototype,function(U){this.db=B,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(V=this,Ya(Gv.prototype,function(U,re,q){if(this.db=V,this._ctx={table:U,index:re===":id"?null:re,or:q},this._cmp=this._ascending=it,this._descending=function(Y,J){return it(J,Y)},this._max=function(Y,J){return 0<it(Y,J)?Y:J},this._min=function(Y,J){return it(Y,J)<0?Y:J},this._IDBKeyRange=V._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(x.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(x.name,"'. Closing db now to resume the delete request.")),x.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(x.name,"') was blocked")):console.warn("Upgrade '".concat(x.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=Xa(p.IDBKeyRange),this._createTransaction=function(U,re,q,Y){return new x.Transaction(U,re,q,x._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(U){x.on("blocked").fire(U),Eo.filter(function(re){return re.name===x.name&&re!==x&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(U)})},this.use(CT),this.use(jT),this.use(TT),this.use(ST),this.use(ET);var ee=new Proxy(this,{get:function(U,re,q){if(re==="_vip")return!0;if(re==="table")return function(J){return pc(x.table(J),ee)};var Y=Reflect.get(U,re,q);return Y instanceof Vv?pc(Y,ee):re==="tables"?Y.map(function(J){return pc(J,ee)}):re==="_createTransaction"?function(){return pc(Y.apply(this,arguments),ee)}:Y}});this.vip=ee,E.forEach(function(U){return U(x)})}var mc,Zn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",OT=(_h.prototype.subscribe=function(d,p,x){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:p,complete:x})},_h.prototype[Zn]=function(){return this},_h);function _h(d){this._subscribe=d}try{mc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{mc={indexedDB:null,IDBKeyRange:null}}function u0(d){var p,x=!1,E=new OT(function(T){var j=Z(d),D,B=!1,V={},W={},ee={get closed(){return B},unsubscribe:function(){B||(B=!0,D&&D.abort(),U&&js.storagemutated.unsubscribe(q))}};T.start&&T.start(ee);var U=!1,re=function(){return Zf(Y)},q=function(J){dc(V,J),ph(W,V)&&re()},Y=function(){var J,ne,ie;!B&&mc.indexedDB&&(V={},J={},D&&D.abort(),D=new AbortController,ie=function(ue){var pe=_o();try{j&&So();var xe=Cs(d,ue);return xe=j?xe.finally(Ts):xe}finally{pe&&ko()}}(ne={subscr:J,signal:D.signal,requery:re,querier:d,trans:null}),Promise.resolve(ie).then(function(ue){x=!0,p=ue,B||ne.signal.aborted||(V={},function(pe){for(var xe in pe)if(f(pe,xe))return;return 1}(W=J)||U||(js(Za,q),U=!0),Zf(function(){return!B&&T.next&&T.next(ue)}))},function(ue){x=!1,["DatabaseClosedError","AbortError"].includes(ue==null?void 0:ue.name)||B||Zf(function(){B||T.error&&T.error(ue)})}))};return setTimeout(re,0),ee});return E.hasValue=function(){return x},E.getValue=function(){return p},E}var Pi=es;function kh(d){var p=Os;try{Os=!0,js.storagemutated.fire(d),yh(d,!0)}finally{Os=p}}h(Pi,r(r({},Ye),{delete:function(d){return new Pi(d,{addons:[]}).delete()},exists:function(d){return new Pi(d,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return p=Pi.dependencies,x=p.indexedDB,p=p.IDBKeyRange,(dh(x)?Promise.resolve(x.databases()).then(function(E){return E.map(function(T){return T.name}).filter(function(T){return T!==Xu})}):ch(x,p).toCollection().primaryKeys()).then(d)}catch{return Rt(new me.MissingAPI)}var p,x},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Le.trans?Si(Le.transless,d):d()},vip:fh,async:function(d){return function(){try{var p=vh(d.apply(this,arguments));return p&&typeof p.then=="function"?p:Pe.resolve(p)}catch(x){return Rt(x)}}},spawn:function(d,p,x){try{var E=vh(d.apply(x,p||[]));return E&&typeof E.then=="function"?E:Pe.resolve(E)}catch(T){return Rt(T)}},currentTransaction:{get:function(){return Le.trans||null}},waitFor:function(d,p){return p=Pe.resolve(typeof d=="function"?Pi.ignoreTransaction(d):d).timeout(p||6e4),Le.trans?Le.trans.waitFor(p):p},Promise:Pe,debug:{get:function(){return be},set:function(d){ae(d)}},derive:v,extend:l,props:h,override:w,Events:Qa,on:js,liveQuery:u0,extendObservabilitySet:dc,getByKeyPath:I,setByKeyPath:R,delByKeyPath:function(d,p){typeof p=="string"?R(d,p,void 0):"length"in p&&[].map.call(p,function(x){R(d,x,void 0)})},shallowClone:$,deepClone:G,getObjectDiff:wh,cmp:it,asap:O,minKey:-1/0,addons:[],connections:Eo,errnames:$e,dependencies:mc,cache:Ti,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,p,x){return d+p/Math.pow(10,2*x)})})),Pi.maxKey=Xa(Pi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(js(Za,function(d){Os||(d=new CustomEvent(rh,{detail:d}),Os=!0,dispatchEvent(d),Os=!1)}),addEventListener(rh,function(d){d=d.detail,Os||kh(d)}));var Ao,Os=!1,c0=function(){};return typeof BroadcastChannel<"u"&&((c0=function(){(Ao=new BroadcastChannel(rh)).onmessage=function(d){return d.data&&kh(d.data)}})(),typeof Ao.unref=="function"&&Ao.unref(),js(Za,function(d){Os||Ao.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!es.disableBfCache&&d.persisted){be&&console.debug("Dexie: handling persisted pagehide"),Ao!=null&&Ao.close();for(var p=0,x=Eo;p<x.length;p++)x[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!es.disableBfCache&&d.persisted&&(be&&console.debug("Dexie: handling persisted pageshow"),c0(),kh({all:new ln(-1/0,[[]])}))})),Pe.rejectionMapper=function(d,p){return!d||d instanceof K||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Ze[d.name]?d:(p=new Ze[d.name](p||d.message,d),"stack"in d&&_(p,"stack",{get:function(){return this.inner.stack}}),p)},ae(be),r(es,Object.freeze({__proto__:null,Dexie:es,liveQuery:u0,Entity:Mv,cmp:it,PropModification:Ga,replacePrefix:function(d,p){return new Ga({replacePrefix:[d,p]})},add:function(d){return new Ga({add:d})},remove:function(d){return new Ga({remove:d})},default:es,RangeSet:ln,mergeRanges:nl,rangesOverlap:Xv}),{default:es}),es})})(yS);var iD=yS.exports;const Jm=sf(iD),rb=Symbol.for("Dexie"),Oa=globalThis[rb]||(globalThis[rb]=Jm);if(Jm.semVer!==Oa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Jm.semVer} and ${Oa.semVer}`);const{liveQuery:wU,mergeRanges:bU,rangesOverlap:xU,RangeSet:_U,cmp:kU,Entity:SU,PropModification:EU,replacePrefix:CU,add:TU,remove:PU,DexieYProvider:AU}=Oa;function oD(e,t,n){var r,s;typeof e=="function"?(r=t||[],s=n):(r=[],s=t);var i=ze.useRef({hasResult:!1,result:s,error:null}),o=ze.useReducer(function(u){return u+1},0);o[0];var a=o[1],l=ze.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")i.current.result=u.getValue(),i.current.hasResult=!0;else{var c=u.subscribe(function(f){i.current.result=f,i.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(ze.useDebugValue(i.current.result),ze.useEffect(function(){var u=l.subscribe(function(c){var f=i.current;(f.error!==null||f.result!==c)&&(f.error=null,f.result=c,f.hasResult=!0,a())},function(c){var f=i.current;f.error!==c&&(f.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),i.current.error)throw i.current.error;return i.current.result}function aD(e,t,n){return oD(function(){return Oa.liveQuery(e)},[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=Oa.DexieYProvider;t&&t.release(e)});class vS extends Oa{constructor(){super("SankeertanDB");rl(this,"categories");rl(this,"songIndices");rl(this,"songDetails");rl(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId, categoryId"})}}let ud=null;function Lt(){return ud===null&&(ud=new vS,console.log("Database initialized or re-initialized.")),ud}ud=new vS;async function Of(e){try{const n=await Lt().songIndices.where("bookId").equals(e).sortBy("insertionId");return n.length>0?n:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function Uy(e,t){try{const n=Lt();await n.songIndices.where("bookId").equals(e).delete();const r=t.map(s=>({...s,bookId:e,tags:s.tags||[]}));await n.songIndices.bulkAdd(r)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}const Ka=async e=>{try{return await Lt().songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function lD(e){try{const n=await Lt().songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${n} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function uD(e){try{return await Lt().songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function Rf(e,t){try{const n=[e,t];return await Lt().songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function wS(e,t){try{const n=Lt(),r=[e,t];return await n.songDetails.where("[bookId+songTitle]").equals(r).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const bS=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function xS(e){const t=bS(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await Lt().songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function cD(e,t){try{const n=Lt(),r=[e,t];await n.songDetails.delete(r)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function _S(e){try{return await Lt().songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function kS(e){try{const t=Lt(),n=await t.songDetails.where("bookId").equals(e).delete(),r=await t.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${n}, Indices removed: ${r}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function dD(e){try{await Lt().songDetails.bulkPut(e)}catch(t){throw console.error("Error bulk saving song details:",t),t}}async function fD(e){try{await Lt().songIndices.bulkPut(e)}catch(t){throw console.error("Error bulk saving song indices:",t),t}}function hD(e){const t=[];return e.forEach(n=>{const r=n.id;n.books&&Array.isArray(n.books)&&n.books.forEach(s=>{const i={...s,categoryId:r};t.push(i)})}),t}async function pD(e){const t=Lt(),n=hD(e);if(n.length===0){console.warn("No books found after transformation. Skipping 'books' table refresh.");return}try{await t.transaction("rw",t.books,async()=>{await t.books.clear(),await t.books.bulkPut(n)}),console.log(`Successfully saved ${n.length} books to the 'books' table.`)}catch(r){console.error("Error saving books to DB:",r)}}async function qd(e){try{return await Lt().books.get(e)}catch(t){console.error(`Error retrieving metadata for book ${e}:`,t);return}}async function SS(e){try{const t=await qd(e);if(!t)return!1;const n=Number(t.songCount)||0;if(n===0)return!1;const[r,s]=await Promise.all([Ka(e),_S(e)]);return r&&s>=n}catch(t){return console.error(`Error checking download status for book ${e}:`,t),!1}}async function mD(){try{const n=(await Lt().books.toArray()).map(async s=>({bookId:s.bookId,isDownloaded:await SS(s.bookId)}));return(await Promise.all(n)).filter(s=>s.isDownloaded).map(s=>s.bookId)}catch(e){return console.error("Error getting all fully downloaded book IDs:",e),[]}}async function gD(e){try{const t=Lt(),n=await t.songIndices.where("bookId").equals(e).toArray(),r=await t.songDetails.where("bookId").equals(e).toArray();return!n.length&&!r.length?null:{bookId:e,songIndices:n,songDetails:r}}catch(t){return console.error(`Error exporting full book structure for ${e}:`,t),null}}async function yD(e){try{const t=Lt();await t.categories.clear(),await t.categories.bulkAdd(e),await pD(e),console.log("Categories saved successfully.")}catch(t){console.error("Error saving categories to DB:",t)}}const lp=new Map;async function vD(e,t,n,r){const{sourceRow:s,songTitle:i}=t,o=bS(e,i);if(await Rf(e,i))return;const l=lp.get(o);if(l)return l;const u=String(s),c=Number(s),f=(async()=>{if(!e||!i||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${i}, Row: ${s}, User: ${n}`);try{const h=await r({bookId:e,sourceRow:u,songTitle:i,sessionuser:n});if(h.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[m,_,v,b]=h;await xS({bookId:e,songTitle:i,sourceRow:u,indexPosition:b,songData:m,metadata:_,sourceLanguage:v})}catch(h){throw console.error(`Failed to download and cache song ${i} in book ${e}:`,h),h}})();lp.set(o,f);try{await f}finally{lp.delete(o)}}async function sb(e){const t=e.map(async s=>{const i=s.bookId,o=s.songCount||0,[a,l,u]=await Promise.all([Ka(i),_S(i),uD(i)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const f=c>0?l:0;return{bookId:i,status:{totalSongs:c,downloadedSongs:f,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(s=>{r[s.bookId]=s.status}),r}const wD=async e=>{const t=new URL(`${wi}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const i=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(i)}`)}const r=await n.json();return Object.keys(r).filter(i=>i!=="books").map(i=>({name:i,bookCount:Array.isArray(r[i])?r[i].length:0,books:Array.isArray(r[i])?r[i].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],Type:o.Type,songCount:o["Song Count"],verseCount:o["Verse Count"],author:o.author,language:o.language,isFullBookDownloadable:o.isFullBookDownloadable==="true"||o.isFullBookDownloadable===!0,isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:i.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(i)}&font=lora`}))},ES=S.createContext({categories:[],isLoading:!1,isFetching:!1,error:null,refresh:()=>{}}),bD=Lt(),xD=({children:e})=>{var u;const{session:t}=xi(),n=(u=t==null?void 0:t.user)==null?void 0:u.email,r=aD(()=>bD.categories.toArray());S.useEffect(()=>{console.log("CategoryContext: Dexie categories loaded:",r==null?void 0:r.length)},[r]);const{isLoading:s,isFetching:i,error:o,data:a,refetch:l}=jf({queryKey:["categories",n],queryFn:()=>wD(n??null),enabled:!!n&&r!==void 0&&r.length===0,networkMode:"always",staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1});return S.useEffect(()=>{a&&(console.log("CategoryContext: Fetched new categories from API, saving to Dexie..."),yD(a).catch(c=>console.error("Failed to sync categories to Dexie:",c)))},[a]),k.jsx(ES.Provider,{value:{categories:r??[],isLoading:r===void 0||((r==null?void 0:r.length)??0)===0&&s,isFetching:i,error:o,refresh:l},children:e})},If=()=>S.useContext(ES),ib=e=>{const[t,n]=S.useState(!1);return S.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),s=i=>n(i.matches);return n(r.matches),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e]),t},CS=()=>{const e=Qn();return{handleSignOut:async()=>{const{error:n}=await Ut.auth.signOut();n?console.error("Error signing out:",n):(console.log("User signed out successfully. Navigating to /login."),e("/login"))}}},_D=Lt();function kD(){const[e,t]=S.useState(!1),{categories:n,isLoading:r,isFetching:s,error:i,refresh:o}=If(),a=Qn(),[l,u]=S.useState([]),c=ib("(max-width: 600px) and (orientation: portrait)"),f=ib("(max-width: 900px) and (orientation: landscape)"),{session:h}=xi(),{handleSignOut:m}=CS();S.useEffect(()=>{n&&u(($=>{const F=[],z=360/$;for(let de=0;de<$;de++){const L=de*z;F.push(`hsl(${L}, 70%, 60%)`)}return F})(n.length))},[n==null?void 0:n.length]);const _=async()=>{console.log("Categories & Books -> Triggering manual refresh from server..."),o()},v=S.useCallback(async()=>{t(!1);try{console.warn("[DB ACTION] Attempting to delete entire database..."),await _D.delete(),await m()}catch(R){console.error("[DB ERROR] Could not delete the database:",R)}},[m]),b=S.useCallback(R=>{R.stopPropagation(),t(!0)},[]);if(r||s)return k.jsx("div",{children:"Loading categories..."});if(i instanceof Error)return k.jsxs("div",{children:["Error loading categories: ",i.message]});const g=(R,$)=>{R.stopPropagation(),a(`/books/${$}`)},y={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea",display:"flex",justifyContent:"space-between",alignItems:"center"},categoryGrid:{display:"grid",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"},actionButton:{border:"none",background:"none",cursor:"pointer",fontSize:"1.5rem",padding:"5px",borderRadius:"5px",transition:"background-color 0.2s",color:"#666",lineHeight:"1.5rem"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"30px",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",maxWidth:"400px",textAlign:"center"},buttonGroup:{display:"flex",justifyContent:"space-around",marginTop:"20px"}};let w;c?w="repeat(2, 1fr)":f?w="repeat(3, 1fr)":w="repeat(auto-fill, minmax(280px, 1fr))";const C={...y.categoryGrid,gridTemplateColumns:w},O=n==null?void 0:n.filter(R=>{var $;return($=R.books)==null?void 0:$.some(F=>F.Type==="book")}),I=()=>e?k.jsx("div",{style:y.modalOverlay,children:k.jsxs("div",{style:y.modalContent,children:[k.jsx("h3",{className:"text-xl font-bold mb-3 text-red-600",children:" Confirm Permanent Deletion"}),k.jsx("p",{className:"text-gray-700",children:"Are you absolutely sure you want to delete **ALL** stored data (Categories, Books, Songs)? This action cannot be undone."}),k.jsxs("div",{style:y.buttonGroup,children:[k.jsx("button",{onClick:v,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Yes, Delete Everything"}),k.jsx("button",{onClick:()=>t(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Cancel"})]})]})}):null;return k.jsxs("div",{style:y.container,children:[k.jsxs("h2",{style:y.heading,children:[k.jsx("span",{style:{marginRight:"auto"},children:"Book Categories"}),k.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[k.jsx("button",{onClick:_,style:{...y.actionButton,color:"#3498db",marginRight:"10px"},title:"Reload",children:""}),k.jsx("button",{onClick:b,style:{...y.actionButton,color:"#e74c3c"},title:"Delete ALL Data",children:""})]})]}),k.jsx("div",{style:C,children:O==null?void 0:O.map((R,$)=>k.jsxs("div",{onClick:F=>g(F,R.id),style:{...y.categoryItem,backgroundColor:$%2===0?"#f8f9fa":"#ffffff",borderLeft:`5px solid ${l[$]||"#3498db"}`},className:"category-item",children:[k.jsx("div",{style:{...y.categoryIcon,backgroundColor:l[$]||"#3498db"},children:""}),k.jsx("span",{style:y.categoryName,children:R.name})]},R.id))}),k.jsx("style",{children:`
                    .category-item:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                        border-color: #3498db;
                    }
                `}),k.jsx(I,{})]})}const SD=S.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),zy=()=>S.useContext(SD);console.log("DownloadStatusProvider Function Running!");const ob={},TS=S.createContext(void 0),ED=({children:e,books:t})=>{const n=S.useMemo(()=>t.reduce((b,g)=>(b[g.bookId]={totalSongs:g.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},b),{}),[t]),[r,s]=S.useState(n),[i,o]=S.useState(!1);S.useEffect(()=>{if(!t||t.length===0){s({}),o(!0);return}(async()=>{try{const g=await sb(t),y={};for(const w of t){const C=w.bookId,O=g[C]||{},I=await Ka(C);y[C]={totalSongs:w.songCount||O.totalSongs||0,downloadedSongs:O.downloadedSongs||0,isIndexDownloaded:I,downloadingSongs:{}}}s(y),o(!0)}catch(g){console.error("Failed to load or initialize download status:",g),s({}),o(!0)}})()},[t]);const a=S.useMemo(()=>t.map(b=>b.bookId).join(","),[t]);S.useEffect(()=>{if(!t||t.length===0){s(ob);return}(async()=>{try{const g=await sb(t);s(g)}catch(g){console.error("Failed to load initial download status from DB:",g),s(ob)}})()},[a,t]);const l=S.useCallback((b,g)=>{s(y=>({...y,[b]:{...y[b],totalSongs:g}}))},[]),u=S.useCallback((b,g)=>{s(y=>({...y,[b]:{...y[b],downloadedSongs:g}}))},[]),c=S.useCallback((b,g)=>{s(y=>({...y,[b]:{...y[b],isIndexDownloaded:g}}))},[]),f=S.useCallback((b,g)=>{s(y=>{var w;return{...y,[b]:{...y[b],downloadingSongs:{...(w=y[b])==null?void 0:w.downloadingSongs,[g]:!0}}}})},[]),h=S.useCallback((b,g)=>{s(y=>{const w=y[b];if(!w)return y;const C={...w.downloadingSongs};return delete C[g],{...y,[b]:{...w,downloadedSongs:(w.downloadedSongs||0)+1,downloadingSongs:C}}})},[]),m=S.useCallback((b,g,y)=>{s(w=>{const C=w[b]||{},O=C.downloadedSongs||0;return{...w,[b]:{...C,totalSongs:g,downloadedSongs:O,downloadingSongs:y}}})},[]),_=S.useCallback(b=>{s(g=>{const y=g[b];return y?{...g,[b]:{...y,downloadedSongs:y.totalSongs,downloadingSongs:{}}}:g})},[]),v={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:f,markSongAsDownloaded:h,updateIndexStatus:c,markBookDownloadStart:m,markBookDownloadComplete:_,isLoaded:i};return k.jsx(TS.Provider,{value:v,children:e})},Vy=()=>{const e=S.useContext(TS);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},CD=3e3,TD=1,PD=5,Ky=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const s=new URL(wi);s.searchParams.append("mode","api"),s.searchParams.append("apiname","getsongtextforsong"),s.searchParams.append("book",e),s.searchParams.append("sourcerow",t),s.searchParams.append("songtitle",n),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString());if(!i.ok){const o=await i.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},AD=async({bookId:e,songTitle:t,text:n,sessionuser:r})=>{const s=new URL(wi);s.searchParams.append("mode","api"),s.searchParams.append("apiname","savesongtextfromui"),s.searchParams.append("book",e),s.searchParams.append("songtitle",t),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString(),{method:"POST",body:JSON.stringify({text:n})});if(!i.ok){const o=await i.json().catch(()=>({}));throw new Error(`Failed to save song text: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},jD=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:s,markBookDownloadStart:i,markBookDownloadComplete:o}=Vy(),a=S.useCallback(c=>{const f=r[c];if(!f)return!1;const h=f.downloadingSongs??{};return Object.keys(h).length>0},[r]),l=S.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=S.useCallback(async(c,f)=>{if(a(c))return 0;let h=[],m=0;if(await Ka(c)){const y=await Of(c);y&&Array.isArray(y)&&(h=y.map(w=>({sourceRow:w.sourceRow,songTitle:w.songTitle,tags:w.tags})),m=h.length)}else try{const y=new URL(wi);y.searchParams.append("mode","api"),y.searchParams.append("apiname","getsongsforbook"),y.searchParams.append("book",c),f&&y.searchParams.append("sessionuser",f);const w=await fetch(y.toString());if(!w.ok){const I=await w.json();throw new Error(`Failed to fetch song indices: ${w.status} - ${JSON.stringify(I)}`)}const O=(await w.json()).map(I=>({...I,sourceRow:typeof I.sourceRow=="string"?parseInt(I.sourceRow,10):I.sourceRow,tags:I.tags??void 0}));h=O,m=h.length,await Uy(c,O)}catch{return 0}if(h.length===0)return 0;const _=[];for(const y of h)await Rf(c,y.songTitle)?s(c,y.songTitle):_.push(y);const v=_.slice(0,PD),b={};for(const y of v)b[y.songTitle]="pending";i(c,m,b);let g=0;for(const y of v)try{g>=TD&&(await new Promise(w=>setTimeout(w,CD)),g=0),await vD(c,y,f??null,Ky),s(c,y.songTitle),g++}catch{}return m},[e,t,n,a,s,i]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},wr={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},Wy=()=>{const e=Gn(),{categoryId:t,bookId:n,songTitle:r}=Ba(),s=r?decodeURIComponent(r):"",[i,o]=ze.useState(!1),a={...wr.link,color:i?"#0056b3":"#007bff",textDecoration:i?"underline":"none"},l=k.jsx(ar,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"}),u=(c,f)=>c?c.length>f?c.substring(0,f)+"...":c:"";return e.pathname.startsWith("/books/")?k.jsxs("div",{style:wr.container,children:[l,k.jsx("span",{style:wr.separator,children:">"}),k.jsx("span",{title:t,children:u(t,20)})]}):e.pathname.startsWith("/book/")?k.jsxs("div",{style:wr.container,children:[l,k.jsx("span",{style:wr.separator,children:">"}),k.jsx(ar,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:t,children:u(t,20)}),k.jsx("span",{style:wr.separator,children:">"}),k.jsx("span",{title:n,children:u(n,25)})]}):e.pathname.startsWith("/details/book/")?k.jsxs("div",{style:wr.container,children:[l,k.jsx("span",{style:wr.separator,children:">"}),k.jsx(ar,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:t,children:u(t,20)}),k.jsx("span",{style:wr.separator,children:">"}),k.jsx(ar,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:n,children:u(n,25)}),k.jsx("span",{style:wr.separator,children:">"}),k.jsx("span",{style:wr.currentPage,title:s,children:u(s,40)})]}):null},PS=S.createContext({preferredLanguage:"devanagari",setPreferredLanguage:()=>{}}),AS=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=S.useState(t||"devanagari");return S.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),k.jsx(PS.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r},children:e})},bo=()=>S.useContext(PS);async function jS(e,t){const n=[];let r=0;for(;r<e.length;){const s=e.slice(r,r+t),i=await Promise.all(s.map(o=>o()));n.push(...i),r+=t}return n}const ab=3,OD=10;async function RD(e,t,n,r,s){const i=n||new Set,o=ID(r,e);if(o.length>0){const a=o.slice(0,OD);console.log(`[RECURSION START] Found ${o.length} linked books in ${e}. Queuing ${a.length} for batched download...`);const l=a.filter(u=>!i.has(u)).map(u=>()=>s(u,t,n));l.length>0?(console.log(`[BATCH EXECUTION] Queued ${l.length} unique downloads with batch size ${ab}.`),await jS(l,ab),console.log(`[RECURSION COMPLETE] All batched linked books for ${e} have been processed.`)):console.log(`[RECURSION SKIP] All queued linked books in ${e} are already being processed or downloaded.`)}}function ID(e,t){return e.filter(s=>s.type==="link"&&s.link).map(s=>{try{return JSON.parse(s.link).bookId}catch(i){return console.error("Failed to parse link JSON:",s.link,i),null}}).filter(s=>s!==null).filter((s,i,o)=>s!==t&&o.indexOf(s)===i)}async function OS(e,t,n=new Set,r){if(!e)return 0;if(n.has(e))return console.warn(`[SKIP] Book ${e} is already in the download chain. Skipping.`),0;const s=await qd(e);if(!s||!s.isFullBookDownloadable)return console.warn(`[SKIP] Book ${e} is not configured as full-book downloadable. Skipping.`),0;if(await SS(e))return console.log(`[SKIP] Book ${e} is already fully downloaded (from Dexie check). Skipping.`),0;n.add(e),console.log(`[DOWNLOAD START] Initiating bulk download for book ID: ${e}`);const i=new URL(wi);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getentirebookasjson"),i.searchParams.append("book",e),i.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`[FETCH] URL for ${e}: ${i.toString()}`);try{const o=await fetch(i.toString());if(!o.ok){let c={};try{c=await o.json()}catch{c={message:"No detailed error message, raw response status error."}}throw new Error(`Failed to fetch content for book ${e}: ${o.status} - ${JSON.stringify(c)}`)}const a=await o.json(),{songIndices:l,songDetails:u}=a;return!u||u.length===0?(console.log(`[DOWNLOAD] No song details found for book: ${e}. Returning 0.`),0):(await dD(u),await fD(l),console.log(`[DOWNLOAD SUCCESS] Data for ${e} saved to IndexedDB. Songs downloaded: ${u.length}`),console.log(`[RECURSION CHECK] Checking for linked books in ${e}...`),await RD(e,t,n,l,OS),u.length)}catch(o){throw console.error(`[DOWNLOAD ERROR] Failed during processing for ${e}:`,o),o}finally{console.log(`[DOWNLOAD END] Finished processing book ID: ${e}.`)}}const RS=(e,t)=>{const n=Af(),[r,s]=S.useState({status:"idle",downloadedCount:null,error:null}),i=S.useCallback(async()=>{if(r.status!=="loading"){s({status:"loading",downloadedCount:null,error:null});try{const o=await OS(e,t);return console.log("Bulk download successful. Invalidating React Query cache..."),await n.invalidateQueries({queryKey:Ij(e)}),await n.invalidateQueries({queryKey:Rj}),console.log("Cache invalidated and refetched successfully."),s({status:"success",downloadedCount:o,error:null}),o}catch(o){const a=o.message||"Bulk download failed.";return s({status:"error",downloadedCount:null,error:a}),0}}},[e,t,r.status,n]);return{...r,startBulkDownload:i,isDownloading:r.status==="loading"}},IS=ze.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:s,isEffectivelyOffline:i,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:f,handleDeleteIndexClick:h,handleDeleteBookClick:m,DownloadNotAvailableIcon:_,DownloadIndexIcon:v,DownloadedIcon:b,DownloadBookIcon:g,DeleteIndexIcon:y,DeleteBookIcon:w}=e,{status:C,isDownloading:O,startBulkDownload:I}=RS(t.bookId,s),R=a(t.bookId),$=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,F=n.downloadedSongs||0,z=n.totalSongs||t.songCount||0,de=Math.max(Number(z),F),L=de>0?Math.floor(F/de*100):0,G=r[t.bookId]??!1,A=F===de&&de>0,Q=t.isFullBookDownloadable;return k.jsx("li",{onClick:ve=>u(ve,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:k.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[k.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),k.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${L}%`}}),k.jsx("span",{className:`relative z-20 px-2 ${L>25,"text-black-900"}`,children:R?k.jsxs("span",{className:"font-bold",children:[k.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),k.jsxs("span",{className:"text-green-700",children:["Downloading... (",$," remaining)"]})]}):k.jsx("span",{className:"text-black-900",children:t.bookName})})]}),k.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[k.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:k.jsxs("span",{children:["(",F,"/",de," downloaded)"]})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:G?k.jsxs("span",{className:"flex items-center text-green-500",children:[b," ",k.jsx("span",{className:"ml-1",children:"Index"})]}):k.jsx("button",{onClick:ve=>{ve.stopPropagation(),c(ve,t.bookId)},disabled:i||o||a(t.bookId)||G,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":k.jsxs(k.Fragment,{children:[v," ",k.jsx("span",{className:"ml-1",children:"Index"})]})})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:A?k.jsxs("span",{className:"flex items-center text-green-500",children:[b," ",k.jsx("span",{className:"ml-1",children:"Book"})]}):k.jsx(k.Fragment,{children:Q?k.jsx("button",{onClick:ve=>{ve.stopPropagation(),I()},disabled:i||o||a(t.bookId),className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:k.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[g," ",O?"Downloading (Fast)...":C==="success"?"Downloaded ":"Book"]})}):k.jsxs("span",{className:"flex items-center text-red-500 cursor-help",title:"Bulk download is restricted for this book.",children:[_,k.jsx("span",{className:"ml-1 text-sm font-medium",children:"Not Available"})]})})}),k.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[k.jsxs("button",{onClick:ve=>{ve.stopPropagation(),h(ve,t.bookId)},disabled:!G,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[y," ",k.jsx("span",{className:"ml-1",children:"Index"})]}),k.jsxs("button",{onClick:ve=>{ve.stopPropagation(),m(ve,t.bookId)},disabled:a(t.bookId)||L===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[w," ",k.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});IS.displayName="BookListItem";const DD=3;function ND(e,t){return t?t.filter(n=>n.type==="link"&&n.link).map(n=>{try{return JSON.parse(n.link).bookId}catch(r){return console.error("Error parsing link in song index:",r),null}}).filter(n=>n!==null&&n!==e).filter((n,r,s)=>s.indexOf(n)===r):[]}async function DS(e,t){if(t.has(e)){console.log(`[DELETION SKIP] Already processed ${e}.`);return}t.add(e),console.log(`[DELETION START] Analyzing dependencies for book: ${e}`);const n=await Of(e),r=ND(e,n);if(r.length>0){console.log(`[RECURSION CHECK] Book ${e} links to ${r.length} unique books.`);const o=r,l=(await Promise.all(o.map(async u=>{const c=await qd(u);return{id:u,type:c&&c.Type?c.Type:"mini-book"}}))).filter(u=>u.type==="mini-book").map(u=>u.id);if(l.length>0){const u=l.filter(c=>!t.has(c)).map(c=>()=>DS(c,t));u.length>0&&(console.log(`[BATCH EXECUTION] Queuing ${u.length} *mini-book* dependency deletions.`),await jS(u,DD),console.log(`[RECURSION COMPLETE] All mini-book dependencies for ${e} have been processed.`))}}const s=await qd(e);(s&&s.Type?s.Type:"book")==="mini-book"?(await kS(e),console.log(`[DELETION SUCCESS] Successfully deleted mini-book ${e} and its dependencies.`)):console.log(`[CLEANUP COMPLETE] Book ${e} is type 'Book'. Only dependencies were deleted.`)}function LD(e,t){const n=S.useMemo(()=>((e==null?void 0:e.books)??[]).filter(a=>a.Type==="book"),[e==null?void 0:e.books]),[r,s]=S.useState(n);return S.useEffect(()=>{if(!t){s(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await Ka(u.bookId)})))).filter(u=>u.isCached);s(l)})()},[n,t]),S.useMemo(()=>t?r:n,[t,n,r])}function $D(){var K,fe;const{categoryId:e}=Ba(),t=Qn(),{categories:n,isLoading:r,isFetching:s,error:i}=If(),{isEffectivelyOffline:o}=zy(),a=S.useMemo(()=>{if(n&&e)return n.find(oe=>oe.id===e)},[n,e]),l=LD(a,o),{downloadAllSongsForBook:u,isDownloadingBook:c,isAnyBookDownloading:f}=jD(),[h,m]=S.useState(null),[_,v]=S.useState(!1),[b,g]=S.useState({});Af();const{preferredLanguage:y}=bo(),{downloadStatus:w,isLoaded:C,updateDownloadProgress:O,updateDownloadedCount:I}=Vy(),{session:R}=xi(),$=(K=R==null?void 0:R.user)==null?void 0:K.email;S.useEffect(()=>{if(!l||l.length===0){g({});return}(async()=>{const _e=l.map(me=>Ka(me.bookId)),$e=await Promise.all(_e),Oe={};l.forEach((me,Ze)=>{Oe[me.bookId]=$e[Ze]}),g(Oe)})()},[l]);const F=S.useCallback(async(oe,_e)=>{let Oe;for(let me=0;me<1;me++)try{const Ze=new URL(wi);Ze.searchParams.append("mode","api"),Ze.searchParams.append("apiname","getsongsforbook"),Ze.searchParams.append("book",oe),Ze.searchParams.append("sessionuser",_e??"dummyfornow");const Ye=await fetch(Ze.toString());if(!Ye.ok){const P=await Ye.text();throw new Error(`Fetch failed (Status: ${Ye.status}). Body: ${P}`)}const Tt=(await Ye.json()).map(P=>({...P,sourceRow:typeof P.sourceRow=="string"?parseInt(P.sourceRow,10):P.sourceRow,tags:P.tags||null}));return await Uy(oe,Tt),Tt}catch(Ze){if(Oe=Ze,me<0){const Ye=Math.pow(2,me)*1e3;console.log(`Retrying fetch in ${Ye}ms...`),await new Promise(We=>setTimeout(We,Ye))}}throw Oe},[]),z=S.useCallback(async(oe,_e)=>{oe.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] Confirm deletion of book index [${_e}]. Proceeding with deletion assuming user confirmed.`),await lD(_e),g($e=>({...$e,[_e]:!1})),O(_e,0),I(_e,0)},[O,I]),de=S.useCallback(async(oe,_e)=>{oe.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] WARNING: This will permanently delete the ENTIRE book "${_e}". Proceeding with deletion assuming user confirmed.`);const $e=new Set;try{await DS(_e,$e),await kS(_e),O(_e,0),I(_e,0)}catch(Oe){console.error(`Failed to delete book ${_e} recursively:`,Oe)}},[O,I]),L=S.useCallback((oe,_e)=>{console.log(`categoryId:${e}, bookId:${_e}`),oe.stopPropagation(),t(`/book/${e}/${_e}`)},[e,t]),G=async()=>{var _e;v(!0);const oe=(_e=R==null?void 0:R.user)==null?void 0:_e.email;try{for(const Oe of l)console.log(`Downloading index for book: ${Oe.bookId}`),await F(Oe.bookId,oe);console.log("All song indices downloaded successfully.");const $e=l.reduce((Oe,me)=>(Oe[me.bookId]=!0,Oe),{});g($e)}catch($e){console.error("Failed to download all indices:",$e),g({})}finally{v(!1)}},A=S.useCallback(async(oe,_e)=>{var Oe;oe.stopPropagation(),m(_e);const $e=(Oe=R==null?void 0:R.user)==null?void 0:Oe.email;try{await F(_e,$e),console.log(`Index for Book ${_e} downloaded successfully and cached.`),g(me=>({...me,[_e]:!0}))}catch(me){console.error(`Failed to download index for Book ${_e}:`,me),g(Ze=>({...Ze,[_e]:!1}))}finally{m(null)}},[(fe=R==null?void 0:R.user)==null?void 0:fe.email,F]),Q=S.useCallback((oe,_e,$e)=>{oe.stopPropagation(),u(_e,$)},[u,$]),ve=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),[]),le=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),[]),ce=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),[]),se=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]}),[]),ye=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),[]),Z=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),[]),X=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]}),[]);return r||s?k.jsx("div",{children:"Loading books..."}):i instanceof Error?k.jsxs("div",{children:["Error loading books: ",i.message]}):C?k.jsxs(k.Fragment,{children:[k.jsx(Wy,{}),k.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner",children:[k.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Books in ",(a==null?void 0:a.name)||"Category"]}),l.length>0?k.jsx("ul",{className:"list-none p-0 space-y-3",children:l.map(oe=>k.jsx(IS,{book:oe,status:w[oe.bookId]||{},indexDownloadStatus:b,userEmail:$??null,isEffectivelyOffline:o,isAnyBookDownloading:f,isDownloadingBook:c,isDownloadingBookIndex:h,handleBookClick:L,handleDownloadBookIndexClick:A,handleDownloadBookClick:Q,handleDeleteIndexClick:z,handleDeleteBookClick:de,DownloadNotAvailableIcon:se,DownloadIndexIcon:ve,DownloadedIcon:ye,DownloadBookIcon:ce,DeleteIndexIcon:X,DeleteBookIcon:Z},oe.bookId))}):k.jsx("div",{className:"text-center py-10 text-gray-500 bg-white rounded-lg shadow-md",children:o?"No cached books found. Connect to the internet to download content.":"No books found in this category."})]}),k.jsx("div",{className:"mt-6 flex justify-end",children:k.jsxs("button",{onClick:G,disabled:_,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 flex items-center justify-center space-x-2 shadow-md ${_?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[_?k.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):le,k.jsx("span",{children:_?"Downloading All Indices...":"Download All Indices"})]})})]}):k.jsx("div",{className:"flex justify-center items-center h-40",children:k.jsx("p",{children:"Loading download status..."})})}function MD(e){return[{pattern:/([])/g,replacement:"$1",name:"Palatal"},{pattern:/([])/g,replacement:"$1",name:"Retroflex"},{pattern:/([])/g,replacement:"$1",name:"Velar"},{pattern:/([])/g,replacement:"$1",name:"Dental"},{pattern:/([])/g,replacement:"$1",name:"Labial"},{pattern:/$/g,replacement:"",name:"Word-final"},{pattern://g,replacement:"",name:"Chandrabindu  "}].reduce((n,r)=>{const s=n.replace(r.pattern,(i,o)=>r.replacement.replace("$1",o));return s!==n?s:n},e)}function FD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};return e.replace(/\u0D30\u0D4D/g,"").replace(/[-]/g,n=>t[n]||n)}function BD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};let n=e;for(const r in t){const s=t[r];n=n.replace(new RegExp(r,"g"),s)}return n}function UD(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const Ra=(e,t,n)=>{if(n==="original"||t==="tamil"&&n==="tamil_superscripted")return e;let r=e,s=e;try{return t==="devanagari"?r=MD(r):(t==="tamil"||t==="tamil_superscripted")&&(r=r.normalize("NFC")),window.Sanscript&&(s=window.Sanscript.t(r,t==="devanagari"?"devanagari":"itrans",n),n==="malayalam"?s=FD(s):n==="itrans"?t==="tamil"&&(s=UD(s)):(n==="tamil"||n==="tamil_superscripted")&&(s=BD(s))),s}catch(i){return console.error(`Sanscript Transliteration Error for target: ${n}. Returning original text.`,i),e}},zD={color:"#059669",background:"#E6FFEE"},VD={color:"#EF4444",background:"#FEEEEE"},KD={color:"green"},WD={color:"black"},lb={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},HD={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},NS={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},qD={backgroundColor:"#f0f4f8"},GD={backgroundColor:"#f5f5f5",fontWeight:"bold",fontSize:"1.2em",padding:"15px 15px 5px 15px",cursor:"default",marginBottom:"10px",marginTop:"15px",borderBottom:"2px solid #ddd",boxShadow:"none"},ub={...NS,backgroundColor:"#eaf2ff",color:"#1e40af",fontWeight:"500",border:"1px solid #c3dafe"},QD=async(e,t)=>{if(!e)return[];const n=new URL(wi);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const i=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(i)}`)}const s=await r.json();return s.data||s},YD=(e,t)=>{const[n,r]=S.useState({});return S.useEffect(()=>{if(r({}),!e||!t||t.length===0)return;(async()=>{const i=t.map(async l=>{const u=await Rf(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(i)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n},JD=(e,t)=>{const n=t==="itrans"?e.songTitle:(()=>{if(window.Sanscript)try{return Ra(e.songTitle,"itrans",t)}catch(i){return console.error("Error during transliteration",i),e.songTitle}return e.songTitle})(),r=n.length>50?n.substring(0,50)+"...":n,s=e.raagam?t==="itrans"?e.raagam:(()=>{if(window.Sanscript)try{return Ra(e.raagam,"itrans",t)}catch(i){return console.error("Error during raagam transliteration",i),e.raagam}return e.raagam})():null;return e.type==="link"?k.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"10px",minWidth:"20px"},children:[k.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"}),k.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"})]}),k.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[k.jsx("span",{style:{fontSize:"1.2em"},title:n,children:r}),s&&k.jsxs(k.Fragment,{children:[k.jsx("span",{style:{margin:"0 8px",color:"#ccc"},children:"|"}),k.jsx("span",{style:{fontSize:"0.95em",color:"#666",fontStyle:"italic"},children:s})]})]})]}):k.jsxs("div",{style:{flexGrow:1,display:"flex",alignItems:"center",flexWrap:"wrap"},children:[k.jsx("span",{style:{fontSize:"1.2em"},title:n,children:r}),s&&k.jsxs(k.Fragment,{children:[k.jsx("span",{style:{margin:"0 8px",color:"#ccc"},children:"|"}),k.jsx("span",{style:{fontSize:"0.95em",color:"#666",fontStyle:"italic"},children:s})]})]})},cb=e=>{if(e.type!=="link"||!e.link)return null;try{return JSON.parse(e.link).bookId||null}catch{return null}};function ZD(){var G;const{categoryId:e,bookId:t}=Ba(),n=Qn(),{isEffectivelyOffline:r}=zy(),{session:s}=xi(),i=(G=s==null?void 0:s.user)==null?void 0:G.email,[o,a]=S.useState(null),{preferredLanguage:l}=bo(),[,u]=S.useState({}),[c,f]=S.useState(!0),[h,m]=S.useState([]);S.useEffect(()=>{(async()=>{f(!0);try{const Q=await mD();m(Q)}catch(Q){console.error("Failed to fetch downloaded book IDs:",Q)}finally{f(!1)}})()},[]),S.useEffect(()=>{u({})},[l]);const{isLoading:_,error:v,data:b,isFetching:g}=jf({queryKey:["songIndices",t,i],queryFn:async()=>{if(!t||!i)return[];const A=await Of(t);return A&&A.length>0?A:QD(t,i)},staleTime:1/0,gcTime:0,networkMode:"always",refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!!t&&!!i}),y=b,{downloadStatus:w}=Vy(),C=YD(t,y);if(S.useEffect(()=>{t&&b&&!g&&Uy(t,b).catch(A=>{console.error("Error saving song indices data to IndexedDB:",A)})},[t,b,g]),S.useEffect(()=>{const A=sessionStorage.getItem("lastClickedSongIndex");A!==null&&(a(parseInt(A,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),_)return k.jsx("div",{style:HD,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(v instanceof Error)return k.jsxs("div",{children:["Error loading song indices: ",v.message]});const I=(A,Q,ve,le)=>{switch(A.stopPropagation(),Q[ve].type){case"title":break;case"link":const se=Q[ve].link,ye=JSON.parse(se),Z=ye.categoryId.trim(),X=ye.bookId.trim(),K=`/book/${Z}/${X}`;console.log(K),Z&&X&&(sessionStorage.setItem("lastClickedSongIndex",ve.toString()),n(K));break;default:const fe=Q[ve].sourceRow,oe=Q[ve].songTitle;le&&(sessionStorage.setItem("lastClickedSongIndex",ve.toString()),n(`/details/book/${e}/${le}/${fe}/${encodeURIComponent(oe)}`,{state:{filteredSongIndices:Q,index:ve}}))}},R=A=>C[A]===!0,$=A=>h.includes(A),F=(y==null?void 0:y.filter(A=>r?R(A.songTitle):!0))??[],z=(A,Q)=>{if(A.type==="title")return GD;if(A.type==="link"){const le=cb(A),ce=le?$(le):!1;return{...ub,...ce?zD:VD,...Q===o&&lb}}const ve=R(A.songTitle);return{...NS,...ve?KD:WD,...Q===o&&lb}},de=(A,Q)=>{Q!=="title"&&(A.currentTarget.style.backgroundColor=qD.backgroundColor)},L=(A,Q)=>{Q!=="title"&&(Q==="link"?A.currentTarget.style.backgroundColor=ub.backgroundColor:A.currentTarget.style.backgroundColor="")};return k.jsxs(k.Fragment,{children:[k.jsx(Wy,{}),k.jsxs("div",{children:[k.jsxs("h2",{children:["Song Indices for Book:"," ",`bookId: ${t} (${F.length} items)`]}),k.jsx("ul",{className:"list-none p-0 m-0",children:F==null?void 0:F.map((A,Q)=>{var ve;return cb(A),k.jsxs("li",{onClick:le=>{A.type!=="title"&&I(le,F,Q,t)},style:z(A,Q),onMouseEnter:le=>de(le,A.type),onMouseLeave:le=>L(le,A.type),className:`transition-all duration-150 ease-in-out ${A.type!=="title"?"hover:shadow-md":""}`,children:[JD(A,l),A.type==="song"&&k.jsx("span",{style:{marginLeft:"10px",color:"#EF4444"},children:t&&((ve=w[t])==null?void 0:ve.downloadingSongs[A.songTitle||""])&&"..downloading song.."}),A.type==="link"&&$(t)&&k.jsx("span",{style:{marginLeft:"10px",color:"orange",fontSize:"0.85em",fontWeight:"600"},children:"..downloading linked book.."})]},A.sourceRow)})})]})]})}const XD=e=>{const t=/([-])(?![])(?=[-])/g;return e.replace(t,"$1&shy;")},eN=e=>{const t=/<link\s+categoryId="([^"]+)"\s+bookId="([^"]+)"\s+sourceRow=(?:\"([^\"]+)\"|(\S+))\s+songTitle="([^"]+)">([\s\S]*?)<\/link>/gi;return e.replace(t,(n,r,s,i,o,a,l)=>{const u=i||o,c=r.replace(/"/g,"&quot;"),f=s.replace(/"/g,"&quot;"),h=u.replace(/"/g,"&quot;"),m=a.replace(/"/g,"&quot;");return`
      <a 
        href="#"
        class="text-indigo-600 hover:text-indigo-800 font-medium underline cursor-pointer transition-colors duration-150"
        onclick="event.preventDefault(); window.handleInternalNavigation(
          '${c}', 
          '${f}', 
          '${h}', 
          '${m}'
        );"
      >
        ${l}
      </a>
    `})},tN=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:s=[],striped:i=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c})=>{if(!Array.isArray(e)||e.length<1)return k.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[f,...h]=e,m=v=>{let b=String(v).replace(/ \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof v=="string"&&u!==c)try{const g=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let y=Ra(g,c,u);(u.toLowerCase()==="devanagari"||u.toLowerCase()==="devanagari")&&(y=XD(y)),b=y}catch(g){return console.error("Error during transliteration:",g),{__html:b}}return b=b.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),b=eN(b),{__html:b}},_=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return k.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${_} ${t}`,children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsx("tr",{children:f.map((v,b)=>k.jsx("th",{className:`
         px-4 py-4 text-left text-${l} font-medium text-gray-700
         ${r.includes(b)?n:""}
         sticky top-0 bg-gray-100
        `,dangerouslySetInnerHTML:m(v)},`th-${b}`))})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((v,b)=>k.jsx("tr",{id:`trRowAsAnchor-${b}`,className:`
    ${i&&b%2===0?"bg-white":"bg-gray-100"}
    ${o?"hover:bg-indigo-50":""}
   `,children:v.map((g,y)=>k.jsx("td",{className:`
      px-4 py-3.5 text-${l} align-top
      ${s.includes(y)?"whitespace-normal break-all max-w-full":"whitespace-nowrap"}
      ${r.includes(y)?n:""}
     `,dangerouslySetInnerHTML:m(g)},`td-${b}-${y}`))},`row-${b}`))})]})})};function nN(e,t,n){return Math.max(t,Math.min(e,n))}const pn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function db(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function fb(e,t,n,r=.15){return r===0?nN(e,t,n):e<t?-db(t-e,n-t,r)+t:e>n?+db(e-n,n-t,r)+n:e}function rN(e,[t,n],[r,s]){const[[i,o],[a,l]]=e;return[fb(t,i,o,r),fb(n,a,l,s)]}function sN(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iN(e){var t=sN(e,"string");return typeof t=="symbol"?t:String(t)}function Tn(e,t,n){return t=iN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hb(Object(n),!0).forEach(function(r){Tn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const LS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function pb(e){return e?e[0].toUpperCase()+e.slice(1):""}const oN=["enter","leave"];function aN(e=!1,t){return e&&!oN.includes(t)}function lN(e,t="",n=!1){const r=LS[e],s=r&&r[t]||t;return"on"+pb(e)+pb(s)+(aN(n,s)?"Capture":"")}const uN=["gotpointercapture","lostpointercapture"];function cN(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=uN.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function dN(e,t=""){const n=LS[e],r=n&&n[t]||t;return e+r}function Df(e){return"touches"in e}function $S(e){return Df(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function fN(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function hN(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function MS(e){return Df(e)?hN(e)[0]:e}function pN(e){return fN(e).map(t=>t.identifier)}function up(e){const t=MS(e);return Df(e)?t.identifier:t.pointerId}function mb(e){const t=MS(e);return[t.clientX,t.clientY]}function mN(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i})}return t}function Gd(e,...t){return typeof e=="function"?e(...t):e}function gN(){}function yN(...e){return e.length===0?gN:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function gb(e,t){return Object.assign({},t,e||{})}const vN=32;class wN{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Gd(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let i=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,mN(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const I=n._delta.map(Math.abs);pn.addTo(n._distance,I)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[I,R]=f;h[0]=c[0]!==!1?I-c[0]:0,h[1]=c[1]!==!1?R-c[1]:0}else h[0]=c[0]!==!1?o-c[0]:0,h[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const m=n.offset,_=n._active&&!n._blocked||n.active;_&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Gd(r.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[v,b]=n.offset,[[g,y],[w,C]]=n._bounds;n.overflow=[v<g?-1:v>y?1:0,b<w?-1:b>C?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const O=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=rN(n._bounds,n.offset,O),n.delta=pn.sub(n.offset,m),this.computeMovement(),_&&(!n.last||i>vN)){n.delta=pn.sub(n.offset,m);const I=n.delta.map(Math.abs);pn.addTo(n.distance,I),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[I[0]/i,I[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(St(St(St({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function bN([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class xN extends wN{constructor(...t){super(...t),Tn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=pn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=pn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[$S(t)]:r.axisThreshold;n.axis=bN(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const _N=e=>e,yb=.15,FS={enabled(e=!0){return e},eventOptions(e,t,n){return St(St({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[yb,yb];case!1:return[0,0];default:return pn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return pn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||_N},threshold(e){return pn.toVector(e,0)}},kN=0,$u=St(St({},FS),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=kN){return e},bounds(e={}){if(typeof e=="function")return i=>$u.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),vb={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class SN extends xN{constructor(...t){super(...t),Tn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=$u.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=up(t),r._pointerActive=!0,this.computeValues(mb(t)),this.computeInitial(),n.preventScrollAxis&&$S(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=up(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const i=mb(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=pn.sub(i,n._values),this.computeValues(i)),pn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=up(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,o]=n._distance;if(n.tap=i<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,h]=r.swipe.velocity,[m,_]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const b=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);b>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),g>h&&Math.abs(c)>_&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,EN(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=vb[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,pn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in vb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function EN(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Mu=typeof window<"u"&&window.document&&window.document.createElement;function BS(){return Mu&&"ontouchstart"in window}function CN(){return BS()||Mu&&window.navigator.maxTouchPoints>1}function TN(){return Mu&&"onpointerdown"in window}function PN(){return Mu&&"exitPointerLock"in window.document}function AN(){try{return"constructor"in GestureEvent}catch{return!1}}const lr={isBrowser:Mu,gesture:AN(),touch:BS(),touchscreen:CN(),pointer:TN(),pointerLock:PN()},jN=250,ON=180,RN=.5,IN=50,DN=250,NN=10,wb={mouse:0,touch:0,pen:8},LN=St(St({},$u),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&lr.pointerLock,lr.touch&&n?"touch":this.pointerLock?"mouse":lr.pointer&&!s?"pointer":lr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?jN:void 0,!(!lr.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const i=pn.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:e=RN,distance:t=IN,duration:n=DN}={}){return{velocity:this.transform(pn.toVector(e)),distance:this.transform(pn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return ON;case!1:return 0;default:return e}},axisThreshold(e){return e?St(St({},wb),e):wb},keyboardDisplacement(e=NN){return e}});St(St({},FS),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!lr.touch&&lr.gesture)return"gesture";if(lr.touch&&r)return"touch";if(lr.touchscreen){if(lr.pointer)return"pointer";if(lr.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const a=gb(Gd(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=gb(Gd(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[s(),i()]:o=>[s(o),i(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",pn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});St(St({},$u),{},{mouseOnly:(e=!0)=>e});St(St({},$u),{},{mouseOnly:(e=!0)=>e});const US=new Map,Zm=new Map;function $N(e){US.set(e.key,e.engine),Zm.set(e.key,e.resolver)}const MN={key:"drag",engine:SN,resolver:LN};function FN(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BN(e,t){if(e==null)return{};var n=FN(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const UN={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=lr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},zN=["target","eventOptions","window","enabled","transform"];function cd(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=cd(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function VN(e,t,n={}){const r=e,{target:s,eventOptions:i,window:o,enabled:a,transform:l}=r,u=BN(r,zN);if(n.shared=cd({target:s,eventOptions:i,window:o,enabled:a,transform:l},UN),t){const c=Zm.get(t);n[t]=cd(St({shared:n.shared},u),c)}else for(const c in u){const f=Zm.get(c);f&&(n[c]=cd(St({shared:n.shared},u[c]),f))}return n}class zS{constructor(t,n){Tn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,i){const o=this._listeners,a=dN(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=St(St({},l),i);t.addEventListener(a,s,u);const c=()=>{t.removeEventListener(a,s,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class KN{constructor(){Tn(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class WN{constructor(t){Tn(this,"gestures",new Set),Tn(this,"_targetEventStore",new zS(this)),Tn(this,"gestureEventStores",{}),Tn(this,"gestureTimeoutStores",{}),Tn(this,"handlers",{}),Tn(this,"config",{}),Tn(this,"pointerIds",new Set),Tn(this,"touchIds",new Set),Tn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),HN(this,t)}setEventIds(t){if(Df(t))return this.touchIds=new Set(pN(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=VN(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=bb(r,a.eventOptions,!!s);if(a.enabled){const u=US.get(o);new u(this,t,o).bind(l)}}const i=bb(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)i(o,"",a=>this.nativeHandlers[o](St(St({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const i in r)r[i]=yN(...r[i]);if(!s)return r;for(const i in r){const{device:o,capture:a,passive:l}=cN(i);this._targetEventStore.add(s,o,"",r[i],{capture:a,passive:l})}}}}function $o(e,t){e.gestures.add(t),e.gestureEventStores[t]=new zS(e,t),e.gestureTimeoutStores[t]=new KN}function HN(e,t){t.drag&&$o(e,"drag"),t.wheel&&$o(e,"wheel"),t.scroll&&$o(e,"scroll"),t.move&&$o(e,"move"),t.pinch&&$o(e,"pinch"),t.hover&&$o(e,"hover")}const bb=(e,t,n)=>(r,s,i,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let h=a?r:lN(r,s,c);n&&f&&(h+="Passive"),e[h]=e[h]||[],e[h].push(i)};function qN(e,t={},n,r){const s=ze.useMemo(()=>new WN(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),ze.useEffect(s.effect.bind(s)),ze.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function GN(e,t){return $N(MN),qN({drag:e},t||{},"drag")}const Hy=S.createContext({});function qy(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const Gy=typeof window<"u",VS=Gy?S.useLayoutEffect:S.useEffect,Nf=S.createContext(null);function Qy(e,t){e.indexOf(t)===-1&&e.push(t)}function Yy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ws=(e,t,n)=>n>t?t:n<e?e:n;let Jy=()=>{};const bs={},KS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function WS(e){return typeof e=="object"&&e!==null}const HS=e=>/^0[^.\s]+$/u.test(e);function Zy(e){let t;return()=>(t===void 0&&(t=e()),t)}const fr=e=>e,QN=(e,t)=>n=>t(e(n)),Fu=(...e)=>e.reduce(QN),gu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Xy{constructor(){this.subscriptions=[]}add(t){return Qy(this.subscriptions,t),()=>Yy(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gr=e=>e*1e3,cr=e=>e/1e3;function qS(e,t){return t?e*(1e3/t):0}const GS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,YN=1e-7,JN=12;function ZN(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=GS(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>YN&&++a<JN);return o}function Bu(e,t,n,r){if(e===t&&n===r)return fr;const s=i=>ZN(i,0,1,e,n);return i=>i===0||i===1?i:GS(s(i),t,r)}const QS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,YS=e=>t=>1-e(1-t),JS=Bu(.33,1.53,.69,.99),ev=YS(JS),ZS=QS(ev),XS=e=>(e*=2)<1?.5*ev(e):.5*(2-Math.pow(2,-10*(e-1))),tv=e=>1-Math.sin(Math.acos(e)),eE=YS(tv),tE=QS(tv),XN=Bu(.42,0,1,1),eL=Bu(0,0,.58,1),nE=Bu(.42,0,.58,1),tL=e=>Array.isArray(e)&&typeof e[0]!="number",rE=e=>Array.isArray(e)&&typeof e[0]=="number",nL={linear:fr,easeIn:XN,easeInOut:nE,easeOut:eL,circIn:tv,circInOut:tE,circOut:eE,backIn:ev,backInOut:ZS,backOut:JS,anticipate:XS},rL=e=>typeof e=="string",xb=e=>{if(rE(e)){Jy(e.length===4);const[t,n,r,s]=e;return Bu(t,n,r,s)}else if(rL(e))return nL[e];return e},Bc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sL(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,f=!1,h=!1)=>{const _=h&&s?n:r;return f&&o.add(c),_.has(c)||_.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const iL=40;function sE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Bc.reduce((w,C)=>(w[C]=sL(i),w),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:h,render:m,postRender:_}=o,v=()=>{const w=bs.useManualTiming?s.timestamp:performance.now();n=!1,bs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,iL),1)),s.timestamp=w,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),f.process(s),h.process(s),m.process(s),_.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},b=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Bc.reduce((w,C)=>{const O=o[C];return w[C]=(I,R=!1,$=!1)=>(n||b(),O.schedule(I,R,$)),w},{}),cancel:w=>{for(let C=0;C<Bc.length;C++)o[Bc[C]].cancel(w)},state:s,steps:o}}const{schedule:bt,cancel:pi,state:nn,steps:cp}=sE(typeof requestAnimationFrame<"u"?requestAnimationFrame:fr,!0);let dd;function oL(){dd=void 0}const Rn={now:()=>(dd===void 0&&Rn.set(nn.isProcessing||bs.useManualTiming?nn.timestamp:performance.now()),dd),set:e=>{dd=e,queueMicrotask(oL)}},iE=e=>t=>typeof t=="string"&&t.startsWith(e),nv=iE("--"),aL=iE("var(--"),rv=e=>aL(e)?lL.test(e.split("/*")[0].trim()):!1,lL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},yu={...Wa,transform:e=>ws(0,1,e)},Uc={...Wa,default:1},Bl=e=>Math.round(e*1e5)/1e5,sv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uL(e){return e==null}const cL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,iv=(e,t)=>n=>!!(typeof n=="string"&&cL.test(n)&&n.startsWith(e)||t&&!uL(n)&&Object.prototype.hasOwnProperty.call(n,t)),oE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(sv);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dL=e=>ws(0,255,e),dp={...Wa,transform:e=>Math.round(dL(e))},Hi={test:iv("rgb","red"),parse:oE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+dp.transform(e)+", "+dp.transform(t)+", "+dp.transform(n)+", "+Bl(yu.transform(r))+")"};function fL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Xm={test:iv("#"),parse:fL,transform:Hi.transform},Uu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=Uu("deg"),Qr=Uu("%"),qe=Uu("px"),hL=Uu("vh"),pL=Uu("vw"),_b={...Qr,parse:e=>Qr.parse(e)/100,transform:e=>Qr.transform(e*100)},Zo={test:iv("hsl","hue"),parse:oE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Qr.transform(Bl(t))+", "+Qr.transform(Bl(n))+", "+Bl(yu.transform(r))+")"},Ft={test:e=>Hi.test(e)||Xm.test(e)||Zo.test(e),parse:e=>Hi.test(e)?Hi.parse(e):Zo.test(e)?Zo.parse(e):Xm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hi.transform(e):Zo.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},mL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gL(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(sv))==null?void 0:t.length)||0)+(((n=e.match(mL))==null?void 0:n.length)||0)>0}const aE="number",lE="color",yL="var",vL="var(",kb="${}",wL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(wL,l=>(Ft.test(l)?(r.color.push(i),s.push(lE),n.push(Ft.parse(l))):l.startsWith(vL)?(r.var.push(i),s.push(yL),n.push(l)):(r.number.push(i),s.push(aE),n.push(parseFloat(l))),++i,kb)).split(kb);return{values:n,split:a,indexes:r,types:s}}function uE(e){return vu(e).values}function cE(e){const{split:t,types:n}=vu(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===aE?i+=Bl(s[o]):a===lE?i+=Ft.transform(s[o]):i+=s[o]}return i}}const bL=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function xL(e){const t=uE(e);return cE(e)(t.map(bL))}const mi={test:gL,parse:uE,createTransformer:cE,getAnimatableNone:xL};function fp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _L({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=fp(l,a,e+1/3),i=fp(l,a,e),o=fp(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Qd(e,t){return n=>n>0?t:e}const kt=(e,t,n)=>e+(t-e)*n,hp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},kL=[Xm,Hi,Zo],SL=e=>kL.find(t=>t.test(e));function Sb(e){const t=SL(e);if(!t)return!1;let n=t.parse(e);return t===Zo&&(n=_L(n)),n}const Eb=(e,t)=>{const n=Sb(e),r=Sb(t);if(!n||!r)return Qd(e,t);const s={...n};return i=>(s.red=hp(n.red,r.red,i),s.green=hp(n.green,r.green,i),s.blue=hp(n.blue,r.blue,i),s.alpha=kt(n.alpha,r.alpha,i),Hi.transform(s))},eg=new Set(["none","hidden"]);function EL(e,t){return eg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function CL(e,t){return n=>kt(e,t,n)}function ov(e){return typeof e=="number"?CL:typeof e=="string"?rv(e)?Qd:Ft.test(e)?Eb:AL:Array.isArray(e)?dE:typeof e=="object"?Ft.test(e)?Eb:TL:Qd}function dE(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>ov(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function TL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=ov(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function PL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const AL=(e,t)=>{const n=mi.createTransformer(t),r=vu(e),s=vu(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?eg.has(e)&&!s.values.length||eg.has(t)&&!r.values.length?EL(e,t):Fu(dE(PL(r,s),s.values),n):Qd(e,t)};function fE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?kt(e,t,n):ov(e)(e,t)}const jL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bt.update(t,n),stop:()=>pi(t),now:()=>nn.isProcessing?nn.timestamp:Rn.now()}},hE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Yd=2e4;function av(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Yd;)t+=n,r=e.next(t);return t>=Yd?1/0:t}function OL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(av(r),Yd);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:cr(s)}}const RL=5;function pE(e,t,n){const r=Math.max(t-RL,0);return qS(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pp=.001;function IL({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let s,i,o=1-t;o=ws(At.minDamping,At.maxDamping,o),e=ws(At.minDuration,At.maxDuration,cr(e)),o<1?(s=u=>{const c=u*o,f=c*e,h=c-n,m=tg(u,o),_=Math.exp(-f);return pp-h/m*_},i=u=>{const f=u*o*e,h=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,_=Math.exp(-f),v=tg(Math.pow(u,2),o);return(-s(u)+pp>0?-1:1)*((h-m)*_)/v}):(s=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-pp+c*f},i=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=NL(s,i,a);if(e=Gr(e),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const DL=12;function NL(e,t,n){let r=n;for(let s=1;s<DL;s++)r=r-e(r)/t(r);return r}function tg(e,t){return e*Math.sqrt(1-t*t)}const LL=["duration","bounce"],$L=["stiffness","damping","mass"];function Cb(e,t){return t.some(n=>e[n]!==void 0)}function ML(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!Cb(e,$L)&&Cb(e,LL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ws(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:At.mass,stiffness:s,damping:i}}else{const n=IL(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function Jd(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:m}=ML({...n,velocity:-cr(n.velocity||0)}),_=h||0,v=u/(2*Math.sqrt(l*c)),b=o-i,g=cr(Math.sqrt(l/c)),y=Math.abs(b)<5;r||(r=y?At.restSpeed.granular:At.restSpeed.default),s||(s=y?At.restDelta.granular:At.restDelta.default);let w;if(v<1){const O=tg(g,v);w=I=>{const R=Math.exp(-v*g*I);return o-R*((_+v*g*b)/O*Math.sin(O*I)+b*Math.cos(O*I))}}else if(v===1)w=O=>o-Math.exp(-g*O)*(b+(_+g*b)*O);else{const O=g*Math.sqrt(v*v-1);w=I=>{const R=Math.exp(-v*g*I),$=Math.min(O*I,300);return o-R*((_+v*g*b)*Math.sinh($)+O*b*Math.cosh($))/O}}const C={calculatedDuration:m&&f||null,next:O=>{const I=w(O);if(m)a.done=O>=f;else{let R=O===0?_:0;v<1&&(R=O===0?Gr(_):pE(w,O,I));const $=Math.abs(R)<=r,F=Math.abs(o-I)<=s;a.done=$&&F}return a.value=a.done?o:I,a},toString:()=>{const O=Math.min(av(C),Yd),I=hE(R=>C.next(O*R).value,O,30);return O+"ms "+I},toTransition:()=>{}};return C}Jd.applyToOptions=e=>{const t=OL(e,100,Jd);return e.ease=t.ease,e.duration=Gr(t.duration),e.type="keyframes",e};function ng({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],h={done:!1,value:f},m=$=>a!==void 0&&$<a||l!==void 0&&$>l,_=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let v=n*t;const b=f+v,g=o===void 0?b:o(b);g!==b&&(v=g-f);const y=$=>-v*Math.exp(-$/r),w=$=>g+y($),C=$=>{const F=y($),z=w($);h.done=Math.abs(F)<=u,h.value=h.done?g:z};let O,I;const R=$=>{m(h.value)&&(O=$,I=Jd({keyframes:[h.value,_(h.value)],velocity:pE(w,$,h.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return R(0),{calculatedDuration:null,next:$=>{let F=!1;return!I&&O===void 0&&(F=!0,C($),R($)),O!==void 0&&$>=O?I.next($-O):(!F&&C($),h)}}}function FL(e,t,n){const r=[],s=n||bs.mix||fE,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||fr:t;a=Fu(l,a)}r.push(a)}return r}function BL(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Jy(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=FL(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const h=gu(e[f],e[f+1],c);return a[f](h)};return n?c=>u(ws(e[0],e[i-1],c)):u}function UL(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=gu(0,t,r);e.push(kt(n,1,s))}}function zL(e){const t=[0];return UL(t,e.length-1),t}function VL(e,t){return e.map(n=>n*t)}function KL(e,t){return e.map(()=>t||nE).splice(0,e.length-1)}function Ul({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=tL(r)?r.map(xb):xb(r),i={done:!1,value:t[0]},o=VL(n&&n.length===t.length?n:zL(t),e),a=BL(o,t,{ease:Array.isArray(s)?s:KL(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const WL=e=>e!==null;function lv(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(WL),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const HL={decay:ng,inertia:ng,tween:Ul,keyframes:Ul,spring:Jd};function mE(e){typeof e.type=="string"&&(e.type=HL[e.type])}class uv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const qL=e=>e/100;class cv extends uv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Rn.now()&&this.tick(Rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;mE(t);const{type:n=Ul,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||Ul;l!==Ul&&typeof a[0]!="number"&&(this.mixKeyframes=Fu(qL,fE(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=av(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:h,repeatDelay:m,type:_,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,C=r;if(f){const $=Math.min(this.currentTime,s)/a;let F=Math.floor($),z=$%1;!z&&$>=1&&(z=1),z===1&&F--,F=Math.min(F,f+1),!!(F%2)&&(h==="reverse"?(z=1-z,m&&(z-=m/a)):h==="mirror"&&(C=o)),w=ws(0,1,z)*a}const O=y?{done:!1,value:c[0]}:C.next(w);i&&(O.value=i(O.value));let{done:I}=O;!y&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return R&&_!==ng&&(O.value=lv(c,this.options,b,this.speed)),v&&v(O.value),R&&this.finish(),O}then(t,n){return this.finished.then(t,n)}get duration(){return cr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+cr(t)}get time(){return cr(this.currentTime)}set time(t){var n;t=Gr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Rn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=cr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=jL,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function GL(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const qi=e=>e*180/Math.PI,rg=e=>{const t=qi(Math.atan2(e[1],e[0]));return sg(t)},QL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:rg,rotateZ:rg,skewX:e=>qi(Math.atan(e[1])),skewY:e=>qi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},sg=e=>(e=e%360,e<0&&(e+=360),e),Tb=rg,Pb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ab=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),YL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Pb,scaleY:Ab,scale:e=>(Pb(e)+Ab(e))/2,rotateX:e=>sg(qi(Math.atan2(e[6],e[5]))),rotateY:e=>sg(qi(Math.atan2(-e[2],e[0]))),rotateZ:Tb,rotate:Tb,skewX:e=>qi(Math.atan(e[4])),skewY:e=>qi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ig(e){return e.includes("scale")?1:0}function og(e,t){if(!e||e==="none")return ig(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=YL,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=QL,s=a}if(!s)return ig(t);const i=r[t],o=s[1].split(",").map(ZL);return typeof i=="function"?i(o):o[i]}const JL=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return og(n,t)};function ZL(e){return parseFloat(e.trim())}const Ha=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qa=new Set(Ha),jb=e=>e===Wa||e===qe,XL=new Set(["x","y","z"]),e$=Ha.filter(e=>!XL.has(e));function t$(e){const t=[];return e$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const oo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>og(t,"x"),y:(e,{transform:t})=>og(t,"y")};oo.translateX=oo.x;oo.translateY=oo.y;const ao=new Set;let ag=!1,lg=!1,ug=!1;function gE(){if(lg){const e=Array.from(ao).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=t$(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lg=!1,ag=!1,ao.forEach(e=>e.complete(ug)),ao.clear()}function yE(){ao.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lg=!0)})}function n$(){ug=!0,yE(),gE(),ug=!1}class dv{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ao.add(this),ag||(ag=!0,bt.read(yE),bt.resolveKeyframes(gE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}GL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ao.delete(this)}cancel(){this.state==="scheduled"&&(ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const r$=e=>e.startsWith("--");function s$(e,t,n){r$(t)?e.style.setProperty(t,n):e.style[t]=n}const i$=Zy(()=>window.ScrollTimeline!==void 0),o$={};function a$(e,t){const n=Zy(e);return()=>o$[t]??n()}const vE=a$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ob={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sl([0,.65,.55,1]),circOut:Sl([.55,0,1,.45]),backIn:Sl([.31,.01,.66,-.59]),backOut:Sl([.33,1.53,.69,.99])};function wE(e,t){if(e)return typeof e=="function"?vE()?hE(e,t):"ease-out":rE(e)?Sl(e):Array.isArray(e)?e.map(n=>wE(n,t)||Ob.easeOut):Ob[e]}function l$(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const f=wE(a,s);Array.isArray(f)&&(c.easing=f);const h={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(c,h)}function bE(e){return typeof e=="function"&&"applyToOptions"in e}function u$({type:e,...t}){return bE(e)&&vE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class c$ extends uv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Jy(typeof t.type!="string");const u=u$(t);this.animation=l$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=lv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):s$(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return cr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+cr(t)}get time(){return cr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Gr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&i$()?(this.animation.timeline=t,fr):n(this)}}const xE={anticipate:XS,backInOut:ZS,circInOut:tE};function d$(e){return e in xE}function f$(e){typeof e.ease=="string"&&d$(e.ease)&&(e.ease=xE[e.ease])}const Rb=10;class h$ extends c${constructor(t){f$(t),mE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new cv({...o,autoplay:!1}),l=Gr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Rb).value,a.sample(l).value,Rb),a.stop()}}const Ib=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url("));function p$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function m$(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Ib(s,t),a=Ib(i,t);return!o||!a?!1:p$(e)||(n==="spring"||bE(n))&&r}function cg(e){e.duration=0,e.type="keyframes"}const g$=new Set(["opacity","clipPath","filter","transform"]),y$=Zy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v$(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return y$()&&n&&g$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const w$=40;class b$ extends uv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...f}){var _;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Rn.now();const h={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...f},m=(c==null?void 0:c.KeyframeResolver)||dv;this.keyframeResolver=new m(a,(v,b,g)=>this.onKeyframesResolved(v,b,h,!g),l,u,c),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Rn.now(),m$(t,i,o,a)||((bs.instantAnimations||!l)&&(c==null||c(lv(t,r,n))),t[0]=t[t.length-1],cg(r),r.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>w$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&v$(h)?new h$({...h,element:h.motionValue.owner.current}):new cv(h);m.finished.then(()=>this.notifyFinished()).catch(fr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),n$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const x$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _$(e){const t=x$.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function _E(e,t,n=1){const[r,s]=_$(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return KS(o)?parseFloat(o):o}return rv(s)?_E(s,t,n+1):s}function fv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const kE=new Set(["width","height","top","left","right","bottom",...Ha]),k$={test:e=>e==="auto",parse:e=>e},SE=e=>t=>t.test(e),EE=[Wa,qe,Qr,Ls,pL,hL,k$],Db=e=>EE.find(SE(e));function S$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||HS(e):!0}const E$=new Set(["brightness","contrast","saturate","opacity"]);function C$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(sv)||[];if(!r)return e;const s=n.replace(r,"");let i=E$.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const T$=/\b([a-z-]*)\(.*?\)/gu,dg={...mi,getAnimatableNone:e=>{const t=e.match(T$);return t?t.map(C$).join(" "):e}},Nb={...Wa,transform:Math.round},P$={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:Uc,scaleX:Uc,scaleY:Uc,scaleZ:Uc,skew:Ls,skewX:Ls,skewY:Ls,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:yu,originX:_b,originY:_b,originZ:qe},hv={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...P$,zIndex:Nb,fillOpacity:yu,strokeOpacity:yu,numOctaves:Nb},A$={...hv,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:dg,WebkitFilter:dg},CE=e=>A$[e];function TE(e,t){let n=CE(e);return n!==dg&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const j$=new Set(["auto","none","0"]);function O$(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!j$.has(i)&&vu(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=TE(n,s)}class R$ extends dv{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),rv(u))){const c=_E(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!kE.has(r)||t.length!==2)return;const[s,i]=t,o=Db(s),a=Db(i);if(o!==a)if(jb(o)&&jb(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else oo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||S$(t[s]))&&r.push(s);r.length&&O$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=oo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function I$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const PE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function AE(e){return WS(e)&&"offsetHeight"in e}const Lb=30,D$=e=>!isNaN(parseFloat(e));class N${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Rn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=D$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Xy);const r=this.events[t].add(n);return t==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Lb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lb);return qS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ia(e,t){return new N$(e,t)}const{schedule:pv}=sE(queueMicrotask,!1),xr={x:!1,y:!1};function jE(){return xr.x||xr.y}function L$(e){return e==="x"||e==="y"?xr[e]?null:(xr[e]=!0,()=>{xr[e]=!1}):xr.x||xr.y?null:(xr.x=xr.y=!0,()=>{xr.x=xr.y=!1})}function OE(e,t){const n=I$(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function $b(e){return!(e.pointerType==="touch"||jE())}function $$(e,t,n={}){const[r,s,i]=OE(e,n),o=a=>{if(!$b(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=f=>{$b(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const RE=(e,t)=>t?e===t?!0:RE(e,t.parentElement):!1,mv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,M$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function F$(e){return M$.has(e.tagName)||e.tabIndex!==-1}const fd=new WeakSet;function Mb(e){return t=>{t.key==="Enter"&&e(t)}}function mp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const B$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Mb(()=>{if(fd.has(n))return;mp(n,"down");const s=Mb(()=>{mp(n,"up")}),i=()=>mp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Fb(e){return mv(e)&&!jE()}function U$(e,t,n={}){const[r,s,i]=OE(e,n),o=a=>{const l=a.currentTarget;if(!Fb(a))return;fd.add(l);const u=t(l,a),c=(m,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),fd.has(l)&&fd.delete(l),Fb(m)&&typeof u=="function"&&u(m,{success:_})},f=m=>{c(m,l===window||l===document||n.useGlobalTarget||RE(l,m.target))},h=m=>{c(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),AE(a)&&(a.addEventListener("focus",u=>B$(u,s)),!F$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function IE(e){return WS(e)&&"ownerSVGElement"in e}function z$(e){return IE(e)&&e.tagName==="svg"}const mn=e=>!!(e&&e.getVelocity),V$=[...EE,Ft,mi],K$=e=>V$.find(SE(e)),gv=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Bb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function W$(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Bb(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Bb(e[s],null)}}}}function H$(...e){return S.useCallback(W$(...e),e)}class q$ extends S.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=AE(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G$({children:e,isPresent:t,anchorX:n,root:r}){const s=S.useId(),i=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=S.useContext(gv),l=H$(i,e==null?void 0:e.ref);return S.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:h,right:m}=o.current;if(t||!i.current||!u||!c)return;const _=n==="left"?`left: ${h}`:`right: ${m}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const b=r??document.head;return b.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{b.contains(v)&&b.removeChild(v)}},[t]),k.jsx(q$,{isPresent:t,childRef:i,sizeRef:o,children:S.cloneElement(e,{ref:l})})}const Q$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=qy(Y$),c=S.useId();let f=!0,h=S.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const _ of u.values())if(!_)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return i&&f&&(h={...h}),S.useMemo(()=>{u.forEach((m,_)=>u.set(_,!1))},[n]),S.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=k.jsx(G$,{isPresent:n,anchorX:a,root:l,children:e})),k.jsx(Nf.Provider,{value:h,children:e})};function Y$(){return new Map}function DE(e=!0){const t=S.useContext(Nf);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=S.useId();S.useEffect(()=>{if(e)return s(i)},[e]);const o=S.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const zc=e=>e.key||"";function Ub(e){const t=[];return S.Children.forEach(e,n=>{S.isValidElement(n)&&t.push(n)}),t}const J$=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=DE(o),f=S.useMemo(()=>Ub(e),[e]),h=o&&!u?[]:f.map(zc),m=S.useRef(!0),_=S.useRef(f),v=qy(()=>new Map),[b,g]=S.useState(f),[y,w]=S.useState(f);VS(()=>{m.current=!1,_.current=f;for(let I=0;I<y.length;I++){const R=zc(y[I]);h.includes(R)?v.delete(R):v.get(R)!==!0&&v.set(R,!1)}},[y,h.length,h.join("-")]);const C=[];if(f!==b){let I=[...f];for(let R=0;R<y.length;R++){const $=y[R],F=zc($);h.includes(F)||(I.splice(R,0,$),C.push($))}return i==="wait"&&C.length&&(I=C),w(Ub(I)),g(f),null}const{forceRender:O}=S.useContext(Hy);return k.jsx(k.Fragment,{children:y.map(I=>{const R=zc(I),$=o&&!u?!1:f===y||h.includes(R),F=()=>{if(v.has(R))v.set(R,!0);else return;let z=!0;v.forEach(de=>{de||(z=!1)}),z&&(O==null||O(),w(_.current),o&&(c==null||c()),r&&r())};return k.jsx(Q$,{isPresent:$,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:$?void 0:F,anchorX:a,children:I},R)})})},NE=S.createContext({strict:!1}),zb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const e in zb)Da[e]={isEnabled:t=>zb[e].some(n=>!!t[n])};function Z$(e){for(const t in e)Da[t]={...Da[t],...e[t]}}const X$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||X$.has(e)}let LE=e=>!Zd(e);function e3(e){typeof e=="function"&&(LE=t=>t.startsWith("on")?!Zd(t):e(t))}try{e3(require("@emotion/is-prop-valid").default)}catch{}function t3(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(LE(s)||n===!0&&Zd(s)||!t&&!Zd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Lf=S.createContext({});function $f(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function wu(e){return typeof e=="string"||Array.isArray(e)}const yv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vv=["initial",...yv];function Mf(e){return $f(e.animate)||vv.some(t=>wu(e[t]))}function $E(e){return!!(Mf(e)||e.variants)}function n3(e,t){if(Mf(e)){const{initial:n,animate:r}=e;return{initial:n===!1||wu(n)?n:void 0,animate:wu(r)?r:void 0}}return e.inherit!==!1?t:{}}function r3(e){const{initial:t,animate:n}=n3(e,S.useContext(Lf));return S.useMemo(()=>({initial:t,animate:n}),[Vb(t),Vb(n)])}function Vb(e){return Array.isArray(e)?e.join(" "):e}const bu={};function s3(e){for(const t in e)bu[t]=e[t],nv(t)&&(bu[t].isCSSVariable=!0)}function ME(e,{layout:t,layoutId:n}){return qa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!bu[e]||e==="opacity")}const i3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o3=Ha.length;function a3(e,t,n){let r="",s=!0;for(let i=0;i<o3;i++){const o=Ha[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=PE(a,hv[o]);if(!l){s=!1;const c=i3[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function wv(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(qa.has(l)){o=!0;continue}else if(nv(l)){s[l]=u;continue}else{const c=PE(u,hv[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=a3(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const bv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FE(e,t,n){for(const r in t)!mn(t[r])&&!ME(r,n)&&(e[r]=t[r])}function l3({transformTemplate:e},t){return S.useMemo(()=>{const n=bv();return wv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function u3(e,t){const n=e.style||{},r={};return FE(r,n,e),Object.assign(r,l3(e,t)),r}function c3(e,t){const n={},r=u3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const d3={offset:"stroke-dashoffset",array:"stroke-dasharray"},f3={offset:"strokeDashoffset",array:"strokeDasharray"};function h3(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?d3:f3;e[i.offset]=qe.transform(-r);const o=qe.transform(t),a=qe.transform(n);e[i.array]=`${o} ${a}`}function BE(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(wv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&h3(f,s,i,o,!1)}const UE=()=>({...bv(),attrs:{}}),zE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function p3(e,t,n,r){const s=S.useMemo(()=>{const i=UE();return BE(i,t,zE(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};FE(i,e.style,e),s.style={...i,...s.style}}return s}const m3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xv(e){return typeof e!="string"||e.includes("-")?!1:!!(m3.indexOf(e)>-1||/[A-Z]/u.test(e))}function g3(e,t,n,{latestValues:r},s,i=!1){const a=(xv(e)?p3:c3)(t,r,s,e),l=t3(t,typeof e=="string",i),u=e!==S.Fragment?{...l,...a,ref:n}:{},{children:c}=t,f=S.useMemo(()=>mn(c)?c.get():c,[c]);return S.createElement(e,{...u,children:f})}function Kb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function _v(e,t,n,r){if(typeof t=="function"){const[s,i]=Kb(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Kb(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function hd(e){return mn(e)?e.get():e}function y3({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:v3(n,r,s,e),renderState:t()}}function v3(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=hd(i[h]);let{initial:o,animate:a}=e;const l=Mf(e),u=$E(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!$f(f)){const h=Array.isArray(f)?f:[f];for(let m=0;m<h.length;m++){const _=_v(e,h[m]);if(_){const{transitionEnd:v,transition:b,...g}=_;for(const y in g){let w=g[y];if(Array.isArray(w)){const C=c?w.length-1:0;w=w[C]}w!==null&&(s[y]=w)}for(const y in v)s[y]=v[y]}}}return s}const VE=e=>(t,n)=>{const r=S.useContext(Lf),s=S.useContext(Nf),i=()=>y3(e,t,r,s);return n?i():qy(i)};function kv(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(mn(r[o])||t.style&&mn(t.style[o])||ME(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const w3=VE({scrapeMotionValuesFromProps:kv,createRenderState:bv});function KE(e,t,n){const r=kv(e,t,n);for(const s in e)if(mn(e[s])||mn(t[s])){const i=Ha.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const b3=VE({scrapeMotionValuesFromProps:KE,createRenderState:UE}),x3=Symbol.for("motionComponentSymbol");function Xo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function _3(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xo(n)&&(n.current=r))},[t])}const Sv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),k3="framerAppearId",WE="data-"+Sv(k3),HE=S.createContext({});function S3(e,t,n,r,s){var v,b;const{visualElement:i}=S.useContext(Lf),o=S.useContext(NE),a=S.useContext(Nf),l=S.useContext(gv).reducedMotion,u=S.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=S.useContext(HE);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&E3(u.current,n,s,f);const h=S.useRef(!1);S.useInsertionEffect(()=>{c&&h.current&&c.update(n,a)});const m=n[WE],_=S.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,m)));return VS(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),_.current&&c.animationState&&c.animationState.animateChanges())}),S.useEffect(()=>{c&&(!_.current&&c.animationState&&c.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),_.current=!1),c.enteringChildren=void 0)}),c}function E3(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:qE(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Xo(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function qE(e){if(e)return e.options.allowProjection!==!1?e.projection:qE(e.parent)}function gp(e,{forwardMotionProps:t=!1}={},n,r){n&&Z$(n);const s=xv(e)?b3:w3;function i(a,l){let u;const c={...S.useContext(gv),...a,layoutId:C3(a)},{isStatic:f}=c,h=r3(a),m=s(a,f);if(!f&&Gy){T3();const _=P3(c);u=_.MeasureLayout,h.visualElement=S3(e,m,c,r,_.ProjectionNode)}return k.jsxs(Lf.Provider,{value:h,children:[u&&h.visualElement?k.jsx(u,{visualElement:h.visualElement,...c}):null,g3(e,a,_3(m,h.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=S.forwardRef(i);return o[x3]=e,o}function C3({layoutId:e}){const t=S.useContext(Hy).id;return t&&e!==void 0?t+"-"+e:e}function T3(e,t){S.useContext(NE).strict}function P3(e){const{drag:t,layout:n}=Da;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function A3(e,t){if(typeof Proxy>"u")return gp;const n=new Map,r=(i,o)=>gp(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,gp(o,void 0,e,t)),n.get(o))})}function GE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function j3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function O3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yp(e){return e===void 0||e===1}function fg({scale:e,scaleX:t,scaleY:n}){return!yp(e)||!yp(t)||!yp(n)}function Li(e){return fg(e)||QE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function QE(e){return Wb(e.x)||Wb(e.y)}function Wb(e){return e&&e!=="0%"}function Xd(e,t,n){const r=e-n,s=t*r;return n+s}function Hb(e,t,n,r,s){return s!==void 0&&(e=Xd(e,s,r)),Xd(e,n,r)+t}function hg(e,t=0,n=1,r,s){e.min=Hb(e.min,t,n,r,s),e.max=Hb(e.max,t,n,r,s)}function YE(e,{x:t,y:n}){hg(e.x,t.translate,t.scale,t.originPoint),hg(e.y,n.translate,n.scale,n.originPoint)}const qb=.999999999999,Gb=1.0000000000001;function R3(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ta(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,YE(e,o)),r&&Li(i.latestValues)&&ta(e,i.latestValues))}t.x<Gb&&t.x>qb&&(t.x=1),t.y<Gb&&t.y>qb&&(t.y=1)}function ea(e,t){e.min=e.min+t,e.max=e.max+t}function Qb(e,t,n,r,s=.5){const i=kt(e.min,e.max,s);hg(e,t,n,i,r)}function ta(e,t){Qb(e.x,t.x,t.scaleX,t.scale,t.originX),Qb(e.y,t.y,t.scaleY,t.scale,t.originY)}function JE(e,t){return GE(O3(e.getBoundingClientRect(),t))}function I3(e,t,n){const r=JE(e,n),{scroll:s}=t;return s&&(ea(r.x,s.offset.x),ea(r.y,s.offset.y)),r}const Yb=()=>({translate:0,scale:1,origin:0,originPoint:0}),na=()=>({x:Yb(),y:Yb()}),Jb=()=>({min:0,max:0}),Dt=()=>({x:Jb(),y:Jb()}),pg={current:null},ZE={current:!1};function D3(){if(ZE.current=!0,!!Gy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>pg.current=e.matches;e.addEventListener("change",t),t()}else pg.current=!1}const N3=new WeakMap;function L3(e,t,n){for(const r in t){const s=t[r],i=n[r];if(mn(s))e.addValue(r,s);else if(mn(i))e.addValue(r,Ia(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,Ia(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Zb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Rn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,bt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Mf(n),this.isVariantNode=$E(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const m=f[h];l[h]!==void 0&&mn(m)&&m.set(l[h])}}mount(t){var n;this.current=t,N3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),ZE.current||D3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=qa.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Da){const n=Da[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Zb.length;r++){const s=Zb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=L3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ia(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(KS(r)||HS(r))?r=parseFloat(r):!K$(r)&&mi.test(n)&&(r=TE(t,n)),this.setBaseTarget(t,mn(r)?r.get():r)),mn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=_v(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!mn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Xy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){pv.render(this.render)}}class XE extends $3{constructor(){super(...arguments),this.KeyframeResolver=R$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eC(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function M3(e){return window.getComputedStyle(e)}class F3 extends XE{constructor(){super(...arguments),this.type="html",this.renderInstance=eC}readValueFromInstance(t,n){var r;if(qa.has(n))return(r=this.projection)!=null&&r.isProjecting?ig(n):JL(t,n);{const s=M3(t),i=(nv(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return JE(t,n)}build(t,n,r){wv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return kv(t,n,r)}}const tC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B3(e,t,n,r){eC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(tC.has(s)?s:Sv(s),t.attrs[s])}class U3 extends XE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(qa.has(n)){const r=CE(n);return r&&r.default||0}return n=tC.has(n)?n:Sv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return KE(t,n,r)}build(t,n,r){BE(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){B3(t,n,r,s)}mount(t){this.isSVGTag=zE(t.tagName),super.mount(t)}}const z3=(e,t)=>xv(e)?new U3(t):new F3(t,{allowProjection:e!==S.Fragment});function ca(e,t,n){const r=e.getProps();return _v(r,t,n!==void 0?n:r.custom,e)}const mg=e=>Array.isArray(e);function V3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ia(n))}function K3(e){return mg(e)?e[e.length-1]||0:e}function W3(e,t){const n=ca(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=K3(i[o]);V3(e,o,a)}}function H3(e){return!!(mn(e)&&e.add)}function gg(e,t){const n=e.getValue("willChange");if(H3(n))return n.add(t);if(!n&&bs.WillChange){const r=new bs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function nC(e){return e.props[WE]}const q3=e=>e!==null;function G3(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(q3),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const Q3={type:"spring",stiffness:500,damping:25,restSpeed:10},Y3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),J3={type:"keyframes",duration:.8},Z3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X3=(e,{keyframes:t})=>t.length>2?J3:qa.has(e)?e.startsWith("scale")?Y3(t[1]):Q3:Z3;function eM({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Ev=(e,t,n,r={},s,i)=>o=>{const a=fv(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Gr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:h=>{t.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};eM(a)||Object.assign(c,X3(e,c)),c.duration&&(c.duration=Gr(c.duration)),c.repeatDelay&&(c.repeatDelay=Gr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(cg(c),c.delay===0&&(f=!0)),(bs.instantAnimations||bs.skipAnimations)&&(f=!0,cg(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const h=G3(c.keyframes,a);if(h!==void 0){bt.update(()=>{c.onUpdate(h),c.onComplete()});return}}return a.isSync?new cv(c):new b$(c)};function tM({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function rC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const f=e.getValue(c,e.latestValues[c]??null),h=a[c];if(h===void 0||u&&tM(u,c))continue;const m={delay:n,...fv(i||{},c)},_=f.get();if(_!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===_&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=nC(e);if(g){const y=window.MotionHandoffAnimation(g,c,bt);y!==null&&(m.startTime=y,v=!0)}}gg(e,c),f.start(Ev(c,f,h,e.shouldReduceMotion&&kE.has(c)?{type:!1}:m,e,v));const b=f.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{bt.update(()=>{o&&W3(e,o)})}),l}function sC(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function yg(e,t,n={}){var l;const r=ca(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(rC(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=s;return nM(e,t,u,c,f,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function nM(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(yg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+sC(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function rM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>yg(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=yg(e,t,n);else{const s=typeof t=="function"?ca(e,t,n.custom):t;r=Promise.all(rC(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function iC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const sM=vv.length;function oC(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?oC(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<sM;n++){const r=vv[n],s=e.props[r];(wu(s)||s===!1)&&(t[r]=s)}return t}const iM=[...yv].reverse(),oM=yv.length;function aM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>rM(e,n,r)))}function lM(e){let t=aM(e),n=Xb(),r=!0;const s=l=>(u,c)=>{var h;const f=ca(e,c,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:_,...v}=f;u={...u,...v,..._}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=oC(e.parent)||{},f=[],h=new Set;let m={},_=1/0;for(let b=0;b<oM;b++){const g=iM[b],y=n[g],w=u[g]!==void 0?u[g]:c[g],C=wu(w),O=g===l?y.isActive:null;O===!1&&(_=b);let I=w===c[g]&&w!==u[g]&&C;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),y.protectedKeys={...m},!y.isActive&&O===null||!w&&!y.prevProp||$f(w)||typeof w=="boolean")continue;const R=uM(y.prevProp,w);let $=R||g===l&&y.isActive&&!I&&C||b>_&&C,F=!1;const z=Array.isArray(w)?w:[w];let de=z.reduce(s(g),{});O===!1&&(de={});const{prevResolvedValues:L={}}=y,G={...L,...de},A=le=>{$=!0,h.has(le)&&(F=!0,h.delete(le)),y.needsAnimating[le]=!0;const ce=e.getValue(le);ce&&(ce.liveStyle=!1)};for(const le in G){const ce=de[le],se=L[le];if(m.hasOwnProperty(le))continue;let ye=!1;mg(ce)&&mg(se)?ye=!iC(ce,se):ye=ce!==se,ye?ce!=null?A(le):h.add(le):ce!==void 0&&h.has(le)?A(le):y.protectedKeys[le]=!0}y.prevProp=w,y.prevResolvedValues=de,y.isActive&&(m={...m,...de}),r&&e.blockInitialAnimation&&($=!1);const Q=I&&R;$&&(!Q||F)&&f.push(...z.map(le=>{const ce={type:g};if(typeof le=="string"&&r&&!Q&&e.manuallyAnimateOnMount&&e.parent){const{parent:se}=e,ye=ca(se,le);if(se.enteringChildren&&ye){const{delayChildren:Z}=ye.transition||{};ce.delay=sC(se.enteringChildren,e,Z)}}return{animation:le,options:ce}}))}if(h.size){const b={};if(typeof u.initial!="boolean"){const g=ca(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(b.transition=g.transition)}h.forEach(g=>{const y=e.getBaseTarget(g),w=e.getValue(g);w&&(w.liveStyle=!0),b[g]=y??null}),f.push({animation:b})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function a(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const h in n)n[h].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Xb(),r=!0}}}function uM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!iC(t,e):!1}function Ri(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xb(){return{animate:Ri(!0),whileInView:Ri(),whileHover:Ri(),whileTap:Ri(),whileDrag:Ri(),whileFocus:Ri(),exit:Ri()}}class _i{constructor(t){this.isMounted=!1,this.node=t}update(){}}class cM extends _i{constructor(t){super(t),t.animationState||(t.animationState=lM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$f(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let dM=0;class fM extends _i{constructor(){super(...arguments),this.id=dM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const hM={animation:{Feature:cM},exit:{Feature:fM}};function xu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function zu(e){return{point:{x:e.pageX,y:e.pageY}}}const pM=e=>t=>mv(t)&&e(t,zu(t));function zl(e,t,n,r){return xu(e,t,pM(n),r)}const aC=1e-4,mM=1-aC,gM=1+aC,lC=.01,yM=0-lC,vM=0+lC;function xn(e){return e.max-e.min}function wM(e,t,n){return Math.abs(e-t)<=n}function ex(e,t,n,r=.5){e.origin=r,e.originPoint=kt(t.min,t.max,e.origin),e.scale=xn(n)/xn(t),e.translate=kt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=mM&&e.scale<=gM||isNaN(e.scale))&&(e.scale=1),(e.translate>=yM&&e.translate<=vM||isNaN(e.translate))&&(e.translate=0)}function Vl(e,t,n,r){ex(e.x,t.x,n.x,r?r.originX:void 0),ex(e.y,t.y,n.y,r?r.originY:void 0)}function tx(e,t,n){e.min=n.min+t.min,e.max=e.min+xn(t)}function bM(e,t,n){tx(e.x,t.x,n.x),tx(e.y,t.y,n.y)}function nx(e,t,n){e.min=t.min-n.min,e.max=e.min+xn(t)}function Kl(e,t,n){nx(e.x,t.x,n.x),nx(e.y,t.y,n.y)}function nr(e){return[e("x"),e("y")]}const uC=({current:e})=>e?e.ownerDocument.defaultView:null,rx=(e,t)=>Math.abs(e-t);function xM(e,t){const n=rx(e.x,t.x),r=rx(e.y,t.y);return Math.sqrt(n**2+r**2)}class cC{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=wp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,_=xM(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!_)return;const{point:v}=h,{timestamp:b}=nn;this.history.push({...v,timestamp:b});const{onStart:g,onMove:y}=this.handlers;m||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=vp(m,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:_,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=wp(h.type==="pointercancel"?this.lastMoveEventInfo:vp(m,this.transformPagePoint),this.history);this.startEvent&&_&&_(h,g),v&&v(h,g)},!mv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=zu(t),l=vp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=nn;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(t,wp(l,this.history)),this.removeListeners=Fu(zl(this.contextWindow,"pointermove",this.handlePointerMove),zl(this.contextWindow,"pointerup",this.handlePointerUp),zl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function vp(e,t){return t?{point:t(e.point)}:e}function sx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wp({point:e},t){return{point:e,delta:sx(e,dC(t)),offset:sx(e,_M(t)),velocity:kM(t,.1)}}function _M(e){return e[0]}function dC(e){return e[e.length-1]}function kM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=dC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Gr(t)));)n--;if(!r)return{x:0,y:0};const i=cr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function SM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?kt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?kt(n,e,r.max):Math.min(e,n)),e}function ix(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function EM(e,{top:t,left:n,bottom:r,right:s}){return{x:ix(e.x,n,s),y:ix(e.y,t,r)}}function ox(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function CM(e,t){return{x:ox(e.x,t.x),y:ox(e.y,t.y)}}function TM(e,t){let n=.5;const r=xn(e),s=xn(t);return s>r?n=gu(t.min,t.max-r,e.min):r>s&&(n=gu(e.min,e.max-s,t.min)),ws(0,1,n)}function PM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const vg=.35;function AM(e=vg){return e===!1?e=0:e===!0&&(e=vg),{x:ax(e,"left","right"),y:ax(e,"top","bottom")}}function ax(e,t,n){return{min:lx(e,t),max:lx(e,n)}}function lx(e,t){return typeof e=="number"?e:e[t]||0}const jM=new WeakMap;class OM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zu(f).point)},o=(f,h)=>{const{drag:m,dragPropagation:_,onDragStart:v}=this.getProps();if(m&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L$(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nr(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Qr.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[g];C&&(y=xn(C)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&bt.postRender(()=>v(f,h)),gg(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:v,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=h;if(_&&this.currentDirection===null){this.currentDirection=RM(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),b&&b(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>nr(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new cC(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:uC(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&bt.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Vc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=SM(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Xo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=EM(r.layoutBox,t):this.constraints=!1,this.elastic=AM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&nr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=PM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xo(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=I3(r,s.root,this.visualElement.getTransformPagePoint());let o=CM(s.layout.layoutBox,i);if(n){const a=n(j3(o));this.hasMutatedConstraints=!!a,a&&(o=GE(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=nr(c=>{if(!Vc(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const h=s?200:1e6,m=s?40:1e7,_={type:"inertia",velocity:r?t[c]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(c,_)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return gg(this.visualElement,t),r.start(Ev(t,r,0,n,this.visualElement,!1))}stopAnimation(){nr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){nr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){nr(n=>{const{drag:r}=this.getProps();if(!Vc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};nr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=TM({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nr(o=>{if(!Vc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(kt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;jM.set(this.visualElement,this);const t=this.visualElement.current,n=zl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bt.read(r);const o=xu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(nr(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=vg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Vc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function RM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class IM extends _i{constructor(t){super(t),this.removeGroupControls=fr,this.removeListeners=fr,this.controls=new OM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ux=e=>(t,n)=>{e&&bt.postRender(()=>e(t,n))};class DM extends _i{constructor(){super(...arguments),this.removePointerDownListener=fr}onPointerDown(t){this.session=new cC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ux(t),onStart:ux(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&bt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=zl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const pl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(qe.test(e))e=parseFloat(e);else return e;const n=cx(e,t.target.x),r=cx(e,t.target.y);return`${n}% ${r}%`}},NM={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mi.parse(e);if(s.length>5)return r;const i=mi.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=kt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let bp=!1;class LM extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;s3($M),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),bp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),pd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,bp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||bt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;bp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function fC(e){const[t,n]=DE(),r=S.useContext(Hy);return k.jsx(LM,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(HE),isPresent:t,safeToRemove:n})}const $M={borderRadius:{...pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pl,borderTopRightRadius:pl,borderBottomLeftRadius:pl,borderBottomRightRadius:pl,boxShadow:NM};function MM(e,t,n){const r=mn(e)?e:Ia(e);return r.start(Ev("",r,t,n)),r.animation}const FM=(e,t)=>e.depth-t.depth;class BM{constructor(){this.children=[],this.isDirty=!1}add(t){Qy(this.children,t),this.isDirty=!0}remove(t){Yy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FM),this.isDirty=!1,this.children.forEach(t)}}function UM(e,t){const n=Rn.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(pi(r),e(i-t))};return bt.setup(r,!0),()=>pi(r)}const hC=["TopLeft","TopRight","BottomLeft","BottomRight"],zM=hC.length,dx=e=>typeof e=="string"?parseFloat(e):e,fx=e=>typeof e=="number"||qe.test(e);function VM(e,t,n,r,s,i){s?(e.opacity=kt(0,n.opacity??1,KM(r)),e.opacityExit=kt(t.opacity??1,0,WM(r))):i&&(e.opacity=kt(t.opacity??1,n.opacity??1,r));for(let o=0;o<zM;o++){const a=`border${hC[o]}Radius`;let l=hx(t,a),u=hx(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||fx(l)===fx(u)?(e[a]=Math.max(kt(dx(l),dx(u),r),0),(Qr.test(u)||Qr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=kt(t.rotate||0,n.rotate||0,r))}function hx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const KM=pC(0,.5,eE),WM=pC(.5,.95,fr);function pC(e,t,n){return r=>r<e?0:r>t?1:n(gu(e,t,r))}function px(e,t){e.min=t.min,e.max=t.max}function Xn(e,t){px(e.x,t.x),px(e.y,t.y)}function mx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function gx(e,t,n,r,s){return e-=t,e=Xd(e,1/n,r),s!==void 0&&(e=Xd(e,1/s,r)),e}function HM(e,t=0,n=1,r=.5,s,i=e,o=e){if(Qr.test(t)&&(t=parseFloat(t),t=kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=kt(i.min,i.max,r);e===i&&(a-=t),e.min=gx(e.min,t,n,a,s),e.max=gx(e.max,t,n,a,s)}function yx(e,t,[n,r,s],i,o){HM(e,t[n],t[r],t[s],t.scale,i,o)}const qM=["x","scaleX","originX"],GM=["y","scaleY","originY"];function vx(e,t,n,r){yx(e.x,t,qM,n?n.x:void 0,r?r.x:void 0),yx(e.y,t,GM,n?n.y:void 0,r?r.y:void 0)}function wx(e){return e.translate===0&&e.scale===1}function mC(e){return wx(e.x)&&wx(e.y)}function bx(e,t){return e.min===t.min&&e.max===t.max}function QM(e,t){return bx(e.x,t.x)&&bx(e.y,t.y)}function xx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function gC(e,t){return xx(e.x,t.x)&&xx(e.y,t.y)}function _x(e){return xn(e.x)/xn(e.y)}function kx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class YM{constructor(){this.members=[]}add(t){Qy(this.members,t),t.scheduleRender()}remove(t){if(Yy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JM(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:m,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const xp=["","X","Y","Z"],ZM=1e3;let XM=0;function _p(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function yC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=nC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&yC(r)}function vC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=XM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nF),this.nodes.forEach(oF),this.nodes.forEach(aF),this.nodes.forEach(rF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new BM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=IE(o)&&!z$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,f=0;const h=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,c&&c(),c=UM(h,250),pd.hasAnimatedSinceResize&&(pd.hasAnimatedSinceResize=!1,this.nodes.forEach(Cx)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||fF,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),g=!this.targetLayout||!gC(this.targetLayout,m),y=!f&&h;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...fv(_,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,y)}else f||Cx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ex);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iF),this.nodes.forEach(eF),this.nodes.forEach(tF)):this.nodes.forEach(Ex),this.clearAllSnapshots();const a=Rn.now();nn.delta=ws(0,1e3/60,a-nn.timestamp),nn.timestamp=a,nn.isProcessing=!0,cp.update.process(nn),cp.preRender.process(nn),cp.render.process(nn),nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sF),this.sharedNodes.forEach(uF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xn(this.snapshot.measuredBox.x)&&!xn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!mC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Li(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),hF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Dt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(pF))){const{scroll:c}=this.root;c&&(ea(a.x,c.offset.x),ea(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Dt();if(Xn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Xn(a,o),ea(a.x,f.offset.x),ea(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Dt();Xn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ta(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Li(c.latestValues)&&ta(l,c.latestValues)}return Li(this.latestValues)&&ta(l,this.latestValues),l}removeTransform(o){const a=Dt();Xn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Li(u.latestValues))continue;fg(u.latestValues)&&u.updateSnapshot();const c=Dt(),f=u.measurePageBox();Xn(c,f),vx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Li(this.latestValues)&&vx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=nn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Kl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xn(this.target,this.layout.layoutBox),YE(this.target,this.targetDelta)):Xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Kl(this.relativeTargetOrigin,this.target,m.target),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fg(this.parent.latestValues)||QE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===nn.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Xn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;R3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mx(this.prevProjectionDelta.x,this.projectionDelta.x),mx(this.prevProjectionDelta.y,this.projectionDelta.y)),Vl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!kx(this.projectionDelta.x,this.prevProjectionDelta.x)||!kx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=na(),this.projectionDelta=na(),this.projectionDeltaWithTransform=na()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Dt(),m=l?l.source:void 0,_=this.layout?this.layout.source:void 0,v=m!==_,b=this.getStack(),g=!b||b.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(dF));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const O=C/1e3;Tx(f.x,o.x,O),Tx(f.y,o.y,O),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kl(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cF(this.relativeTarget,this.relativeTargetOrigin,h,O),w&&QM(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Dt()),Xn(w,this.relativeTarget)),v&&(this.animationValues=c,VM(c,u,this.latestValues,O,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{pd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ia(0)),this.currentAnimation=MM(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&wC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dt();const f=xn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=xn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}Xn(a,l),ta(a,c),Vl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new YM),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&_p("z",o,u,this.animationValues);for(let c=0;c<xp.length;c++)_p(`rotate${xp[c]}`,o,u,this.animationValues),_p(`skew${xp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=hd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=hd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Li(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=JM(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),o.transform=f;const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const _ in bu){if(c[_]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:g}=bu[_],y=f==="none"?c[_]:v(c[_],u);if(b){const w=b.length;for(let C=0;C<w;C++)o[b[C]]=y}else g?this.options.visualElement.renderState.vars[_]=y:o[_]=y}this.options.layoutId&&(o.pointerEvents=u===this?hd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Sx),this.root.sharedNodes.clear()}}}function eF(e){e.updateLayout()}function tF(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?nr(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],m=xn(h);h.min=r[f].min,h.max=h.min+m}):wC(i,t.layoutBox,r)&&nr(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],m=xn(r[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=na();Vl(a,r,t.layoutBox);const l=na();o?Vl(l,e.applyTransform(s,!0),t.measuredBox):Vl(l,r,t.layoutBox);const u=!mC(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const _=Dt();Kl(_,t.layoutBox,h.layoutBox);const v=Dt();Kl(v,r,m.layoutBox),gC(_,v)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=_,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function nF(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function rF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function sF(e){e.clearSnapshot()}function Sx(e){e.clearMeasurements()}function Ex(e){e.isLayoutDirty=!1}function iF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Cx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oF(e){e.resolveTargetDelta()}function aF(e){e.calcProjection()}function lF(e){e.resetSkewAndRotation()}function uF(e){e.removeLeadSnapshot()}function Tx(e,t,n){e.translate=kt(t.translate,0,n),e.scale=kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Px(e,t,n,r){e.min=kt(t.min,n.min,r),e.max=kt(t.max,n.max,r)}function cF(e,t,n,r){Px(e.x,t.x,n.x,r),Px(e.y,t.y,n.y,r)}function dF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const fF={duration:.45,ease:[.4,0,.1,1]},Ax=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),jx=Ax("applewebkit/")&&!Ax("chrome/")?Math.round:fr;function Ox(e){e.min=jx(e.min),e.max=jx(e.max)}function hF(e){Ox(e.x),Ox(e.y)}function wC(e,t,n){return e==="position"||e==="preserve-aspect"&&!wM(_x(t),_x(n),.2)}function pF(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const mF=vC({attachResizeListener:(e,t)=>xu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kp={current:void 0},bC=vC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!kp.current){const e=new mF({});e.mount(window),e.setOptions({layoutScroll:!0}),kp.current=e}return kp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),gF={pan:{Feature:DM},drag:{Feature:IM,ProjectionNode:bC,MeasureLayout:fC}};function Rx(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&bt.postRender(()=>i(t,zu(t)))}class yF extends _i{mount(){const{current:t}=this.node;t&&(this.unmount=$$(t,(n,r)=>(Rx(this.node,r,"Start"),s=>Rx(this.node,s,"End"))))}unmount(){}}class vF extends _i{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fu(xu(this.node.current,"focus",()=>this.onFocus()),xu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ix(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&bt.postRender(()=>i(t,zu(t)))}class wF extends _i{mount(){const{current:t}=this.node;t&&(this.unmount=U$(t,(n,r)=>(Ix(this.node,r,"Start"),(s,{success:i})=>Ix(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wg=new WeakMap,Sp=new WeakMap,bF=e=>{const t=wg.get(e.target);t&&t(e)},xF=e=>{e.forEach(bF)};function _F({root:e,...t}){const n=e||document;Sp.has(n)||Sp.set(n,{});const r=Sp.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(xF,{root:e,...t})),r[s]}function kF(e,t,n){const r=_F(t);return wg.set(e,n),r.observe(e),()=>{wg.delete(e),r.unobserve(e)}}const SF={some:0,all:1};class EF extends _i{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:SF[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return kF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(CF(t,n))&&this.startObserver()}unmount(){}}function CF({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const TF={inView:{Feature:EF},tap:{Feature:wF},focus:{Feature:vF},hover:{Feature:yF}},PF={layout:{ProjectionNode:bC,MeasureLayout:fC}},AF={...hM,...TF,...gF,...PF},jF=A3(AF,z3);let OF={data:""},RF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||OF},IF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,DF=/\/\*[^]*?\*\/|  +/g,Dx=/\n+/g,zs=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?zs(o,i):i+"{"+zs(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=zs(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zs.p?zs.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},ts={},xC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+xC(e[n]);return t}return e},NF=(e,t,n,r,s)=>{let i=xC(e),o=ts[i]||(ts[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!ts[o]){let l=i!==e?e:(u=>{let c,f,h=[{}];for(;c=IF.exec(u.replace(DF,""));)c[4]?h.shift():c[3]?(f=c[3].replace(Dx," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][c[1]]=c[2].replace(Dx," ").trim();return h[0]})(e);ts[o]=zs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&ts.g?ts.g:null;return n&&(ts.g=ts[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(ts[o],t,r,a),o},LF=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zs(a,""):a===!1?"":a}return r+s+(o??"")},"");function Ff(e){let t=this||{},n=e.call?e(t.p):e;return NF(n.unshift?n.raw?LF(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,RF(t.target),t.g,t.o,t.k)}let _C,bg,xg;Ff.bind({g:1});let xs=Ff.bind({k:1});function $F(e,t,n,r){zs.p=t,_C=e,bg=n,xg=r}function ki(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:bg&&bg()},a),n.o=/ *go\d+/.test(l),a.className=Ff.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),xg&&u[0]&&xg(a),_C(u,a)}return s}}var MF=e=>typeof e=="function",ef=(e,t)=>MF(e)?e(t):e,FF=(()=>{let e=0;return()=>(++e).toString()})(),kC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),BF=20,Cv="default",SC=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return SC(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},md=[],EC={toasts:[],pausedAt:void 0,settings:{toastLimit:BF}},Wr={},CC=(e,t=Cv)=>{Wr[t]=SC(Wr[t]||EC,e),md.forEach(([n,r])=>{n===t&&r(Wr[t])})},TC=e=>Object.keys(Wr).forEach(t=>CC(e,t)),UF=e=>Object.keys(Wr).find(t=>Wr[t].toasts.some(n=>n.id===e)),Bf=(e=Cv)=>t=>{CC(t,e)},zF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},VF=(e={},t=Cv)=>{let[n,r]=S.useState(Wr[t]||EC),s=S.useRef(Wr[t]);S.useEffect(()=>(s.current!==Wr[t]&&r(Wr[t]),md.push([t,r]),()=>{let o=md.findIndex(([a])=>a===t);o>-1&&md.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||zF[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},KF=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||FF()}),Vu=e=>(t,n)=>{let r=KF(t,e,n);return Bf(r.toasterId||UF(r.id))({type:2,toast:r}),r.id},Kt=(e,t)=>Vu("blank")(e,t);Kt.error=Vu("error");Kt.success=Vu("success");Kt.loading=Vu("loading");Kt.custom=Vu("custom");Kt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Bf(t)(n):TC(n)};Kt.dismissAll=e=>Kt.dismiss(void 0,e);Kt.remove=(e,t)=>{let n={type:4,toastId:e};t?Bf(t)(n):TC(n)};Kt.removeAll=e=>Kt.remove(void 0,e);Kt.promise=(e,t,n)=>{let r=Kt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?ef(t.success,s):void 0;return i?Kt.success(i,{id:r,...n,...n==null?void 0:n.success}):Kt.dismiss(r),s}).catch(s=>{let i=t.error?ef(t.error,s):void 0;i?Kt.error(i,{id:r,...n,...n==null?void 0:n.error}):Kt.dismiss(r)}),e};var WF=1e3,HF=(e,t="default")=>{let{toasts:n,pausedAt:r}=VF(e,t),s=S.useRef(new Map).current,i=S.useCallback((f,h=WF)=>{if(s.has(f))return;let m=setTimeout(()=>{s.delete(f),o({type:4,toastId:f})},h);s.set(f,m)},[]);S.useEffect(()=>{if(r)return;let f=Date.now(),h=n.map(m=>{if(m.duration===1/0)return;let _=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(_<0){m.visible&&Kt.dismiss(m.id);return}return setTimeout(()=>Kt.dismiss(m.id,t),_)});return()=>{h.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let o=S.useCallback(Bf(t),[t]),a=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=S.useCallback((f,h)=>{o({type:1,toast:{id:f,height:h}})},[o]),u=S.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=S.useCallback((f,h)=>{let{reverseOrder:m=!1,gutter:_=8,defaultPosition:v}=h||{},b=n.filter(w=>(w.position||v)===(f.position||v)&&w.height),g=b.findIndex(w=>w.id===f.id),y=b.filter((w,C)=>C<g&&w.visible).length;return b.filter(w=>w.visible).slice(...m?[y+1]:[0,y]).reduce((w,C)=>w+(C.height||0)+_,0)},[n]);return S.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let h=s.get(f.id);h&&(clearTimeout(h),s.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},qF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GF=xs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QF=xs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,YF=ki("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${QF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,JF=xs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ZF=ki("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${JF} 1s linear infinite;
`,XF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,e5=xs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,t5=ki("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${e5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,n5=ki("div")`
  position: absolute;
`,r5=ki("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,s5=xs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,i5=ki("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${s5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,o5=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?S.createElement(i5,null,t):t:n==="blank"?null:S.createElement(r5,null,S.createElement(ZF,{...r}),n!=="loading"&&S.createElement(n5,null,n==="error"?S.createElement(YF,{...r}):S.createElement(t5,{...r})))},a5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,l5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,u5="0%{opacity:0;} 100%{opacity:1;}",c5="0%{opacity:1;} 100%{opacity:0;}",d5=ki("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,f5=ki("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,h5=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=kC()?[u5,c5]:[a5(n),l5(n)];return{animation:t?`${xs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xs(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},p5=S.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?h5(e.position||t||"top-center",e.visible):{opacity:0},i=S.createElement(o5,{toast:e}),o=S.createElement(f5,{...e.ariaProps},ef(e.message,e));return S.createElement(d5,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):S.createElement(S.Fragment,null,i,o))});$F(S.createElement);var m5=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=S.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return S.createElement("div",{ref:i,className:t,style:n},s)},g5=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:kC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},y5=Ff`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Kc=16,v5=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=HF(n,i);return S.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Kc,left:Kc,right:Kc,bottom:Kc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let f=c.position||t,h=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),m=g5(f,h);return S.createElement(m5,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?y5:"",style:m},c.type==="custom"?ef(c.message,c):s?s(c):S.createElement(p5,{toast:c,position:f}))}))},Jt=Kt;const PC=[{code:"original",name:"Original Script"},{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"itrans",name:"ITRANS"},{code:"iast",name:"IAST"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"}];function w5(){const{preferredLanguage:e,setPreferredLanguage:t}=bo(),[n,r]=S.useState(e);S.useEffect(()=>{localStorage.setItem("preferredLanguage",n),t(n)},[n,t]);const s=i=>{r(i.target.value)};return k.jsxs("div",{children:[k.jsx("h2",{children:"Language Preferences"}),k.jsx("p",{children:"Choose the language for transliteration:"}),k.jsx("select",{value:n,onChange:s,children:PC.map(i=>k.jsx("option",{value:i.code,children:i.name},i.code))})]})}const b5=0,x5={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},ml={marginRight:"10px"},gl={opacity:.5,cursor:"not-allowed",color:"#888"},_5=async function(e){try{return await Ut.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},k5=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters for fetching song details.");const o=await wS(n,i);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await Ky({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,f]=a;await xS({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:f,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${i}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function S5(){var Xe,Ot,Yn;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=Ba(),s=Gn(),i=Qn(),{session:o}=xi(),a=(Xe=o==null?void 0:o.user)==null?void 0:Xe.email,l=(Ot=s.state)==null?void 0:Ot.filteredSongIndices,u=(Yn=s.state)==null?void 0:Yn.index,c=Af(),f=S.useMemo(()=>decodeURIComponent(r||""),[r]),h=["songDetails",t,n,a,f],{preferredLanguage:m,setPreferredLanguage:_}=bo(),v=S.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),b=S.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),g=S.useCallback(async(De,Ve)=>{if(!De||!De.bookId||!De.songTitle){Ve(!1);return}const et=await Rf(De.bookId,De.songTitle);Ve(et)},[]),[y,w]=S.useState(!1),[C,O]=S.useState(!1);S.useEffect(()=>(window.handleInternalNavigation=(De,Ve,et,an)=>{const Ht=`/details/book/${De}/${Ve}/${et}/${encodeURIComponent(an)}`;i(Ht,{state:{filteredSongIndices:l||[],index:b5},replace:!1}),console.log(`Internal navigation triggered: ${Ht}`)},()=>{delete window.handleInternalNavigation}),[i,l,u]),S.useEffect(()=>{g(v,w),g(b,O)},[v,b,g]);const{isLoading:I,isFetching:R,error:$,data:F}=jf({queryKey:h,queryFn:k5,staleTime:1/0,gcTime:0,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1});GN(({swipe:[De]})=>{De===1?(console.log("going to prev"),me()):De===-1&&(console.log("going to next"),Oe())},{axis:"x",filterTaps:!0});const[z,de]=S.useState(!1),[L,G]=S.useState({x:0,y:0}),[A,Q]=S.useState(!1),ve=S.useRef(null),[le,ce]=S.useState(""),[se,ye]=S.useState(null),Z=S.useRef(null),X=De=>{De.preventDefault();const Ve=window.getSelection(),et=(Ve==null?void 0:Ve.toString().trim())??"";Ve&&Ve.rangeCount>0&&!Ve.getRangeAt(0).collapsed?(ce(et),ye(Ve.getRangeAt(0)),Q(!0)):(ce(""),ye(null),Q(!1)),G({x:De.clientX,y:De.clientY}),Q(!!le),de(!0)};S.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),S.useEffect(()=>{const De=Ve=>{ve.current&&!ve.current.contains(Ve.target)&&de(!1)};return z?window.addEventListener("mousedown",De):window.removeEventListener("mousedown",De),()=>{window.removeEventListener("mousedown",De)}},[z]),S.useEffect(()=>{s.state||window.location.pathname.startsWith("/sankeertan")},[s,t]),S.useEffect(()=>{const De=Ve=>{ve.current&&!ve.current.contains(Ve.target)&&de(!1)};return z&&document.addEventListener("mousedown",De),()=>{document.removeEventListener("mousedown",De)}},[z]);const K=()=>{const De=window.location.href;navigator.clipboard.writeText(De).then(()=>{console.log("URL copied to clipboard:",De),Jt.success("URL copied to clipboard!")}).catch(Ve=>{console.error("Failed to copy URL: ",Ve)})},fe=S.useRef(null);function oe(De){const an=new DOMParser().parseFromString(De,"text/html").querySelectorAll("tr");let Ht="";return an.forEach(Le=>{const gr=Le.querySelectorAll("td, th"),Jn=[];gr.forEach(Es=>{var yr;let Pe=Es.innerHTML;Pe=Pe.replace(/<\/p>\s*<p>/gi,`
`),Pe=Pe.replace(/<p>|<\/p>/gi,""),Pe=Pe.replace(/<br\s*\/?>/gi,`
`);const Zr=document.createElement("div");Zr.innerHTML=Pe;const Dr=((yr=Zr.textContent)==null?void 0:yr.trim())||"";Jn.push(Dr)}),Ht+=Jn.join(" | ")+`

`}),Ht.trim()}const _e=()=>{if(!se||se.collapsed){console.warn("No valid selection range to highlight.");return}const De=document.createElement("span");De.className="highlighted-text";try{se.surroundContents(De),console.log("Text highlighted successfully!")}catch(Ve){console.error("Failed to highlight text:",Ve)}ye(null)},$e=(De=!1)=>{if(fe.current){const Ve=fe.current.innerHTML;let et="radhekrishna!!";De?et=Ve:Ve.includes("<table")?et=oe(Ve):et=fe.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(et).then(()=>{console.log("Song content copied to clipboard:"),Jt.success("Song content copied to clipboard!")}).catch(an=>{console.error("Failed to copy song: ",an)})}},Oe=()=>{if(l&&u!==void 0&&u<l.length-1){const De=u+1,Ve=l[De];sessionStorage.setItem("lastClickedSongIndex",De.toString()),i(`/details/book/${e}/${t}/${Ve.sourceRow}/${encodeURIComponent(Ve.songTitle)}`,{state:{filteredSongIndices:l,index:De},replace:!0})}},me=()=>{if(l&&u!==void 0&&u>0){const De=u-1,Ve=l[De];sessionStorage.setItem("lastClickedSongIndex",De.toString()),i(`/details/book/${e}/${t}/${Ve.sourceRow}/${encodeURIComponent(Ve.songTitle)}`,{state:{filteredSongIndices:l,index:De},replace:!0})}},Ze=u===0,Ye=u===(l==null?void 0:l.length)-1,We=l&&l.length>0,Tt=async De=>{if(le){const Ve=await fetch(`${wi}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${le}&sessionuser=${De}`);if(!Ve.ok){const an=await Ve.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${Ve.status} - ${JSON.stringify(an)}`)}const et=await Ve.json();Jt.success(`Issue/Mistake is reported as ${et[1]}!!`)}else console.log("No text was selected.")},P=async()=>{t&&r?(await cD(t,f),Jt.success("Local cache cleared. Reloading from server..."),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:h})):console.warn("Cannot reload song: bookId or songTitle is missing.")},ge=async De=>{switch(de(!1),De){case"broadcast":r&&ke();break;case"copyPageUrl":K();break;case"CopySongAsHtml":$e(!0);break;case"CopySongAsText":$e(!1);break;case"ReportMistake":Tt(a);break;case"Copy":if(le)try{await navigator.clipboard.writeText(le),Jt.success("Text copied!")}catch(Ve){console.error("Failed to copy text: ",Ve),Jt.error("Failed to copy text.")}break;case"Highlight":_e();break}},he=S.useMemo(()=>k.jsx(jF.div,{ref:ve,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:L.y,left:L.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:De=>De.stopPropagation(),children:k.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:A?k.jsxs(k.Fragment,{children:[k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>ge("Copy"),children:"Copy Selected"}),k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>ge("ReportMistake"),children:"Report Mistake"})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[k.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),PC.map(De=>k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:De.code===m?"bold":"normal",backgroundColor:De.code===m?"#f0f0f0":"transparent"},onClick:()=>Ne(De),children:De.name},De.code))]})})})},"context-menu"),[A,L,m]),[M,N]=S.useState(!1),[te,we]=S.useState(null),[be,ae]=S.useState(!0),ke=S.useCallback(async()=>{if(M){console.warn("isBroadcasting already");return}if(!be){Jt.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(fe.current){N(!0),we("broadcasting");try{const De=fe.current.innerHTML,Ve=await _5(De);N(!1),we("success"),Jt.success("Broadcast was successful!"),ae(!1),setTimeout(()=>we(null),2e3)}catch(De){console.error("Broadcast failed:",De),Jt.error("Broadcast had errors!"),N(!1),we("error"),setTimeout(()=>we(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),we("failed"),N(!1)},[fe,M,be]);S.useEffect(()=>{ae(!0)},[F]),S.useEffect(()=>{F&&F.length>=3&&t&&f&&n&&(g(v,w),g(b,O))},[F,t,f,n,v,b,g]);const Ne=De=>{_(De.code),de(!1)},Se={backgroundColor:"green",color:"white"},Ue={backgroundColor:"brown",color:"white"};if(I&&!F)return k.jsx("div",{style:x5,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if($)return k.jsxs("div",{children:["Error loading song details: ",$.message]});if(!F)return k.jsx("div",{children:"No song details available. Please try reloading."});const rt=document.getElementById("context-menu-root");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:Z,children:[k.jsx(Wy,{}),k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[k.jsx("button",{onClick:me,disabled:Ze||!We,style:{...ml,...Ze||!We?gl:{},...y?Se:Ue},children:" Prev"}),k.jsx("button",{onClick:Oe,disabled:Ye||!We,style:{...ml,...Ye||!We?gl:{},...C?Se:Ue,marginRight:0},children:"Next "})]})]}),k.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:X,children:[k.jsx("div",{ref:fe,children:F&&k.jsx(tN,{data:F[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[0,1,2,3,4],maxWidth:"max-w-6xl",preferredLanguage:m,sourceLanguage:F[2]})}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[k.jsxs("div",{children:[k.jsx("button",{onClick:me,disabled:Ze||!We,style:{...ml,...Ze||!We?gl:{},...y?Se:Ue},children:" Prev"}),k.jsx("button",{onClick:Oe,disabled:Ye||!We,style:{...ml,...Ye||!We?gl:{},...C?Se:Ue,marginRight:0},children:"Next "})]}),k.jsxs("div",{children:[k.jsx("button",{onClick:P,disabled:R,style:{marginRight:"10px",backgroundColor:R?"#ccc":"#f0f0f0",color:R?"#666":"inherit",cursor:R?"not-allowed":"pointer"},title:"Reload from Server (Clears local cache)",children:R?k.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[k.jsxs("svg",{className:"animate-spin",style:{width:"16px",height:"16px",marginRight:"5px"},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),k.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Reloading..."]}):""}),k.jsx("button",{onClick:K,style:{marginRight:"10px"},title:"Copy URL",children:""}),k.jsx("button",{onClick:()=>$e(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),k.jsx("button",{onClick:ke,disabled:!be,style:{...ml,...be?{}:gl},title:"Broadcast",children:""})]})]}),k.jsx("style",{children:`
     .highlighted-text {
      background-color: #ffeb3b; /* Yellow background */
      padding: 2px 4px;
      border-radius: 4px;
     }
     .animate-spin {
      animation: spin 1s linear infinite;
     }
     @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
     }
    `}),z&&rt&&aA.createPortal(k.jsx(J$,{children:he}),rt)]})]})}const E5=" || ",Nx=e=>!e||!Array.isArray(e)?"":e.map(t=>Array.isArray(t)?t.map(n=>n==null?"":String(n)).join(E5):"").join(`
`),Lx=()=>{Gn();const e=Qn(),{categoryId:t,bookId:n,sourceRow:r,songTitle:s}=Ba(),{categories:i}=If(),{session:o}=xi(),a=!n,[l,u]=S.useState(t||""),[c,f]=S.useState(n||""),[h,m]=S.useState(s?decodeURIComponent(s):""),[_,v]=S.useState(!1),[b,g]=S.useState(""),[y,w]=S.useState(null),[C,O]=S.useState(!1);S.useEffect(()=>{!a&&n&&s&&r&&I(n,decodeURIComponent(s),r)},[n,s,r,a]);const I=async(de,L,G)=>{var A;O(!0);try{const Q=await wS(de,L);if(Q&&Q.songData)w(Q.songData),g(Nx(Q.songData)),v(!0),Jt.success("Loaded from local cache");else if(G)try{const ve=await Ky({bookId:de,sourceRow:G,songTitle:L,sessionuser:(A=o==null?void 0:o.user)==null?void 0:A.email});ve&&ve[0]&&(w(ve[0]),g(Nx(ve[0])),v(!0),Jt.success("Loaded from server"))}catch(ve){console.error("Network fetch failed",ve),Jt.error("Failed to fetch song from server.")}else g(""),w(null),v(!0),Jt("Creating a new song",{icon:""})}catch(Q){console.error("Error loading song:",Q),Jt.error("Error loading song data.")}finally{O(!1)}},R=async()=>{if(!c||!h){Jt.error("Please select a book and enter a song title.");return}O(!0);try{let de;const L=await Of(c);if(L){const G=L.find(A=>A.songTitle.toLowerCase()===h.toLowerCase());G&&(de=G.sourceRow.toString())}await I(c,h,de)}catch(de){console.error(de),Jt.error("Failed to initialize editor."),O(!1)}},$=async()=>{var de;try{const L=b;console.log("--------------------------------------------------"),console.log("SUBMITTING EDITED CONTENT (RAW TEXT):"),console.log("Book:",c),console.log("Song:",h),console.log(L),console.log("--------------------------------------------------"),await AD({bookId:c,songTitle:h,text:L,sessionuser:(de=o==null?void 0:o.user)==null?void 0:de.email}),Jt.success("Content saved successfully!"),a||e(-1)}catch(L){console.error("Error saving content:",L),Jt.error("Failed to save content.")}},F=()=>{a?(v(!1),w(null),g("")):e(-1)},z=()=>{const de=i==null?void 0:i.find(G=>G.id===l||G.name===l),L=(de==null?void 0:de.books)||[];return k.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[k.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Song Editor"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Category"}),k.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",value:l,onChange:G=>{u(G.target.value),f("")},children:[k.jsx("option",{value:"",children:"-- Select Category --"}),i==null?void 0:i.map(G=>k.jsx("option",{value:G.id||G.name,children:G.name},G.id||G.name))]})]}),k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Book"}),k.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",value:c,onChange:G=>f(G.target.value),disabled:!l,children:[k.jsx("option",{value:"",children:"-- Select Book --"}),L.map(G=>k.jsx("option",{value:G.bookId,children:G.bookName},G.bookId))]})]}),k.jsxs("div",{className:"mb-6",children:[k.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Song Title"}),k.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter exact song title",value:h,onChange:G=>m(G.target.value)}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter an existing title to edit, or a new one to create."})]}),k.jsx("button",{onClick:R,disabled:!c||!h||C,className:`w-full py-2 px-4 rounded text-white font-bold transition-colors ${!c||!h||C?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:C?"Loading...":"Start Editing"})]})};return _?k.jsxs("div",{className:"p-4 h-screen flex flex-col bg-gray-50",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("div",{children:[k.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[y?"Edit Song":"Create Song",": ",h]}),k.jsxs("p",{className:"text-sm text-gray-600",children:["Book: ",c]})]}),k.jsxs("div",{className:"space-x-2",children:[k.jsx("button",{onClick:F,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:a?"Back":"Cancel"}),k.jsx("button",{onClick:$,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Submit Changes"})]})]}),k.jsxs("div",{className:"flex-grow flex flex-col",children:[k.jsxs("div",{className:"bg-blue-50 p-3 mb-2 rounded text-sm text-blue-800 border border-blue-200",children:[k.jsx("strong",{children:"Instructions:"})," Edit the text below. Use ",k.jsx("code",{children:" || "})," (space-pipe-pipe-space) to separate columns. Each line represents a new row."]}),k.jsx("textarea",{value:b,onChange:de=>g(de.target.value),className:"flex-grow w-full p-4 font-mono text-base border border-gray-300 rounded shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",spellCheck:!1,placeholder:"Start typing song content here..."})]})]}):k.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:z()})},C5=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:s,onConnectionStatusChange:i})=>{const o=S.useRef(n);S.useEffect(()=>{o.current=n},[n]);const a=S.useRef(null);return S.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, Listener skipping subscription setup."),i("DISCONNECTED");return}return a.current&&(Ut.removeChannel(a.current),a.current=null),i("CONNECTING"),a.current=Ut.channel(`broadcast:${e}`),a.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},l=>{l.new&&"content"in l.new&&r(l.new.content),l.new&&"scroll_position"in l.new&&l.new.scroll_position!==null&&o.current&&s(l.new.scroll_position)}).subscribe((l,u)=>{switch(l){case"SUBSCRIBED":i("CONNECTED");break;case"CHANNEL_ERROR":case"TIMED_OUT":case"CLOSED":i(l==="CLOSED"?"DISCONNECTED":"ERROR"),console.error(`Subscription issue for broadcast ${e}:`,u||l);break;case"CONNECTING":i("CONNECTING");break}}),()=>{a.current&&(Ut.removeChannel(a.current),a.current=null)}},[e,t==null?void 0:t.access_token,r,s,i]),null},T5=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}},P5=({broadcastId:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(null),i=S.useRef(null),[o,a]=S.useState(null),[l,u]=S.useState(!1),[c,f]=S.useState(!0),[h,m]=S.useState(!1),[_,v]=S.useState(null),[b,g]=S.useState("none"),[y,w]=S.useState(!1),[C,O]=S.useState("CONNECTING"),{preferredLanguage:I}=bo(),R=S.useCallback(Q=>{O(Q),console.log(`Realtime Connection Status Updated: ${Q}`)},[]),$=S.useCallback(Q=>{const le=Ra(Q??"","devanagari",I);n(le)},[I]),F=S.useCallback(Q=>{l&&Q!==null&&s(`trRowAsAnchor-${Q}`)},[l]);S.useEffect(()=>{Ut.auth.getSession().then(({data:{session:ve}})=>{a(ve)});const{data:Q}=Ut.auth.onAuthStateChange((ve,le)=>{a(le)});return()=>{Q.subscription.unsubscribe()}},[]);const z=S.useCallback(async()=>{h||f(!0),v(null);try{const{data:Q,error:ve}=await Ut.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(ve)console.error("Error fetching broadcast data:",ve),v(ve.message);else if(Q){const le=Q.content??"";let ce=Ra(le,"devanagari",I);n(ce),w(Q.is_broadcasting_scroll??!1),m(!0)}}finally{f(!1)}},[e,I,h]);S.useEffect(()=>{o&&e&&!h&&z()},[o,e,z,h]),S.useEffect(()=>{if(r&&i.current){const Q=r,ve=i.current.querySelector(`#${Q}`);ve&&ve.scrollIntoView({block:"start",behavior:"smooth"}),s(null)}},[r,i]);const de=S.useCallback(async Q=>{if(b==="leader"&&y){const{error:ve}=await Ut.from("sankeertan").update({scroll_position:Q}).eq("id",e);ve&&console.error("Error broadcasting scroll position:",ve)}},[b,y,e]);S.useEffect(()=>{if(b!=="leader"||!y||!i.current)return;const Q=i.current,ve=T5(de,200),le=Q.querySelectorAll("tr[id^='trRowAsAnchor-']"),ce=new Set;let se=null;const ye=K=>{K.forEach($e=>{$e.isIntersecting?ce.add($e.target):ce.delete($e.target)});let fe=null,oe=1/0;const _e=Q.getBoundingClientRect().top;if(ce.forEach($e=>{if(typeof $e.id!="string"||$e.id==="")return;const me=$e.getBoundingClientRect().top-_e;me>=0&&me<oe&&(oe=me,fe=$e.id)}),fe){const Oe=fe.split("-").pop();if(Oe){const me=parseInt(Oe);fe!==se&&(se=fe,ve(me))}}},Z={root:Q,rootMargin:"0px",threshold:.1},X=new IntersectionObserver(ye,Z);return le.forEach(K=>{X.observe(K)}),()=>{X.disconnect()}},[b,y,de]);const L=async()=>{const Q=!y,{error:ve}=await Ut.from("sankeertan").update({is_broadcasting_scroll:Q}).eq("id",e);ve?console.error("Failed to update broadcast scroll status:",ve):w(Q)},G=Q=>{Q==="none"&&(w(!1),u(!1)),g(Q),Q==="follower"&&u(!0)},A=Q=>{switch(Q){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[k.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:i,children:[k.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",k.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:A(C),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${C}`}),k.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",C,")"]})]}),c&&!h?k.jsx("p",{children:"Loading content..."}):_?k.jsxs("p",{style:{color:"red"},children:["Error loading data: ",_]}):t&&k.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&b==="follower"&&k.jsx(C5,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:$,onScrollPositionUpdated:F,onConnectionStatusChange:R}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[k.jsx("button",{onClick:()=>G(b==="leader"?"none":"leader"),style:{backgroundColor:b==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:b==="leader"?"Disengage (Leader)":"Become a Leader"}),b==="none"&&k.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),b==="leader"&&k.jsx("button",{onClick:L,style:{backgroundColor:y?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:y?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),k.jsx("button",{onClick:()=>G(b==="follower"?"none":"follower"),style:{backgroundColor:b==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:b==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})},Wc=Lt(),$x=(e,t)=>`${e.trim()}|${t.trim()}`;async function A5(){var u,c;console.log("[Dexie Load] Preparing availability check set...");const e=await Wc.songDetails.toCollection().primaryKeys(),t=new Set;for(const[f,h]of e)t.add($x(f,h));console.log(`[Dexie Load] Found ${t.size} available SongDetails.`);const n=await Wc.songIndices.toArray();let r=await Wc.categories.toArray();r.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(f=>setTimeout(f,500)),r=await Wc.categories.toArray(),r.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const s=new Map,i=new Map;for(const f of r){const h=(u=f.id)==null?void 0:u.trim();if(h&&i.set(h,f),Array.isArray(f.books))for(const m of f.books){const _=(c=m.bookId)==null?void 0:c.trim();if(_){let v=s.get(_);if(v){const b=Array.isArray(v.categoryId)?v.categoryId:v.categoryId?[v.categoryId]:[];h&&!b.includes(h)&&(v.categoryId=[...b,h])}else v={...m,bookId:_,bookName:m.bookName||"Unknown Book",categoryId:h?[h]:[],author:m.author||f.author,language:m.language||f.language,type:m.type||f.type,raagam:m.raagam||f.raagam,taaLam:m.taaLam||f.taaLam},s.set(_,v)}}}console.log("Book Map Keys (Flattened):",Array.from(s.keys()).length),console.log("Category Map Keys:",Array.from(i.keys()).length);const o=n.map((f,h)=>{var de,L;const m=(de=f.bookId)==null?void 0:de.trim(),_=(L=f.songTitle)==null?void 0:L.trim(),v=s.get(m);let b=[],g=[];if(v&&v.categoryId){const G=Array.isArray(v.categoryId)?v.categoryId:[v.categoryId];g=G,b=G.map(A=>{var Q;return((Q=i.get(A))==null?void 0:Q.name)||"Unknown Category"})}else b=["Unknown Category"],g=["unknown-category"];v||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${f.songTitle} | Index Book ID: '${m}'`);let y=!1;if(m&&_){const G=$x(m,_);y=t.has(G)}const w=(v==null?void 0:v.bookName)||"Unknown Book",C=g.length>0?i.get(g[0]):void 0,O=f.author||(v==null?void 0:v.author)||(C==null?void 0:C.author)||"Unknown Author",I=f.sourceLanguage||(v==null?void 0:v.language)||(C==null?void 0:C.language)||"Unknown Language",R=f.type||(v==null?void 0:v.type)||(C==null?void 0:C.type)||"Unknown Type",$=f.raagam||(v==null?void 0:v.raagam)||(C==null?void 0:C.raagam)||"Unknown Type",F=f.taaLam||(v==null?void 0:v.taaLam)||(C==null?void 0:C.taaLam)||"Unknown Type";return{uniqueSongId:`${f.bookId}-${f.songTitle}`,indexPositionForNavigation:h,isAvailable:y,bookId:f.bookId,categoryId:g,title:f.songTitle,sourceRow:f.sourceRow,tags:f.tags||null,verseCount:f.verseCount||null,category:b,book:w,author:O,language:I,type:R,raagam:$,taaLam:F,link:f.link}}),a=new Map;for(const f of o){const h=`${f.title.toLowerCase().trim()}|${f.author.toLowerCase().trim()}`;if(a.has(h)){const m=a.get(h),_=(v,b)=>{const g=Array.isArray(v)?v:[v],y=Array.isArray(b)?b:[b];return Array.from(new Set([...g,...y]))};m.book=_(m.book,f.book),m.bookId=_(m.bookId,f.bookId),m.category=_(m.category,f.category),m.categoryId=_(m.categoryId,f.categoryId)}else a.set(h,f)}const l=Array.from(a.values());return console.log(`[Dexie Load] Deduplicated ${o.length} raw songs into ${l.length} unique songs.`),l}const j5=["searchIndex","allSongs"],O5=()=>jf({queryKey:j5,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await A5();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,networkMode:"always",refetchOnWindowFocus:!1}),R5=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const s=t[r];if(s&&s.length>0){const i=s.map(o=>o.value.toLowerCase());n=n.filter(o=>{const a=o[r];return(Array.isArray(a)?a.map(u=>String(u).toLowerCase()):[String(a).toLowerCase()]).some(u=>i.includes(u))})}}),n},I5=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>{const s=i=>Array.isArray(i)?i.some(o=>String(o).toLowerCase().includes(n)):String(i).toLowerCase().includes(n);return s(r.title)||s(r.author)||s(r.book)||s(r.category)}):e},yl=(e,t)=>{const n=new Set;return e.forEach(r=>{const s=r[t];Array.isArray(s)?s.forEach(i=>{typeof i=="string"&&n.add(i)}):typeof s=="string"&&n.add(s)}),Array.from(n).sort()},D5=()=>{const[e,t]=S.useState(""),[n,r]=S.useState({}),[s,i]=S.useState([]),[o,a]=S.useState([]),[l,u]=S.useState("cards"),[c,f]=S.useState(!1),h=Qn(),m=30,[_,v]=S.useState({category:!0,book:!0,title:!0,author:!0,language:!0,raagam:!0}),{preferredLanguage:b}=bo(),g=(K,fe="itrans")=>{const oe=Array.isArray(K)?K.join(", "):K;return Ra(oe,fe,b)},{data:y,isLoading:w,isError:C,error:O}=O5(),I=S.useMemo(()=>y||[],[y]);S.useEffect(()=>{if(I.length===0){i([]),a([]);return}let K=R5(I,n),fe=I5(K,e);i(fe),f(!1);const oe=fe.map(_e=>({indexPositionForNavigation:_e.indexPositionForNavigation,sourceRow:String(_e.sourceRow),bookId:Array.isArray(_e.bookId)?_e.bookId[0]:_e.bookId,songTitle:Array.isArray(_e.title)?_e.title.join(", "):_e.title}));a(oe)},[I,n,e]);const R=(K,fe)=>{r(oe=>{const _e=oe[K]||[],$e=_e.find(Oe=>Oe.value===fe);if($e)if($e.isNot){const Oe=_e.filter(me=>me.value!==fe);if(Oe.length===0){const me={...oe};return delete me[K],me}return{...oe,[K]:Oe}}else return{...oe,[K]:_e.map(Oe=>Oe.value===fe?{...Oe,isNot:!0}:Oe)};else return{...oe,[K]:[..._e,{value:fe,isNot:!1}]}})},$=()=>{r({})},F=(K,fe)=>{if(K.type==="link"&&K.link)try{const me=JSON.parse(K.link),Ze=me.bookId,Ye=me.categoryId;if(Ze&&Ye){h(`/book/${Ye}/${Ze}`);return}}catch(me){console.error("Failed to parse link data for song:",K.title,me)}const oe=Array.isArray(K.title)?K.title.join(", "):K.title,_e=Array.isArray(K.categoryId)?K.categoryId[0]:K.categoryId,$e=Array.isArray(K.bookId)?K.bookId[0]:K.bookId,Oe=K.sourceRow;h(`/details/book/${_e}/${$e}/${Oe}/${encodeURIComponent(oe)}`,{state:{filteredSongIndices:o,index:fe}})},z=K=>{v(fe=>({...fe,[K]:!fe[K]}))},de=yl(s,"author"),L=yl(s,"language"),G=yl(s,"raagam"),A=yl(s,"book"),Q=yl(s,"category"),ve={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set,raagam:new Set};e.length>0&&I.forEach(K=>{Object.entries(K).forEach(([fe,oe])=>{var _e;Array.isArray(oe)?oe.forEach($e=>{var Oe;typeof $e=="string"&&$e.toLowerCase().includes(e.toLowerCase())&&((Oe=ve[fe])==null||Oe.add($e))}):typeof oe=="string"&&oe.toLowerCase().includes(e.toLowerCase())&&((_e=ve[fe])==null||_e.add(oe))})});const le=(K,fe)=>s.filter(oe=>{const _e=oe[K];return Array.isArray(_e)?_e.includes(fe):_e===fe}).length,ce=(K,fe)=>{var _e;const oe=(_e=n[K])==null?void 0:_e.find($e=>$e.value===fe);return oe?oe.isNot?"bg-red-500 text-white":"bg-[#3498db] text-white":"hover:bg-gray-100 text-gray-700"};if(w)return k.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500 bg-[#f5f7fa]",children:"Loading search index..."});if(C)return k.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50 m-4 rounded-lg",children:["Error loading search index: ",(O==null?void 0:O.message)||"Unknown error."]});const se=K=>`${Array.isArray(K.bookId)?K.bookId.join("-"):K.bookId}-${K.title}`,ye=K=>Array.isArray(K)?K.join(", "):K,Z="bg-white rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.08)] border border-[#eaeaea] transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_8px_25px_rgba(0,0,0,0.15)]";return k.jsx("div",{className:"min-h-screen bg-[#f5f7fa] p-4 font-sans flex flex-col items-center",children:k.jsxs("div",{className:"w-full max-w-[1400px] bg-[#f5f7fa] p-2 md:p-4",children:[k.jsx("div",{className:"text-2xl font-bold text-[#2c3e50] border-b-2 border-[#eaeaea] pb-4 mb-6 flex justify-between items-center",children:k.jsx("span",{children:"Search Songs"})}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-4 rounded-xl bg-white text-lg text-[#2c3e50] placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#3498db] shadow-sm border border-gray-200 transition-all",value:e,onChange:K=>t(K.target.value)}),e&&Object.values(ve).some(K=>K.size>0)&&k.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-xl shadow-xl border border-gray-200 max-h-64 overflow-y-auto",children:Object.entries(ve).map(([K,fe])=>fe&&fe.size>0&&k.jsxs("div",{className:"p-3 border-b border-gray-100 last:border-0",children:[k.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-2 tracking-wider ml-2",children:K}),Array.from(fe).map((oe,_e)=>k.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-[#f0f9ff] hover:text-[#3498db] text-gray-700 transition-colors",onClick:()=>{t(""),R(K,oe)},children:oe},_e))]},K))})]}),Object.keys(n).some(K=>{const fe=n[K];return fe&&fe.length>0})&&k.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[k.jsx("span",{className:"text-sm font-semibold text-gray-500 mr-2",children:"Active Filters:"}),Object.entries(n).map(([K,fe])=>fe==null?void 0:fe.map((oe,_e)=>k.jsxs("span",{className:`${oe.isNot?"bg-red-500":"bg-[#3498db]"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-2 shadow-sm`,children:[k.jsxs("span",{className:"font-medium opacity-90 capitalize",children:[K,":"]}),k.jsx("span",{className:"font-bold",children:oe.value}),k.jsx("button",{onClick:()=>R(K,oe.value),className:"ml-1 hover:text-gray-200 transition-colors font-bold",children:""})]},`${K}-${_e}`))),k.jsx("button",{onClick:$,className:"text-sm text-[#3498db] hover:text-[#2980b9] font-semibold transition-colors ml-auto px-3 py-1",children:"Clear All"})]}),k.jsx("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[{key:"category",label:"Category",data:Q},{key:"book",label:"Book",data:A},{key:"author",label:"Author",data:de},{key:"language",label:"Language",data:L},{key:"raagam",label:"Raagam",data:G}].map(({key:K,label:fe,data:oe})=>k.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[k.jsxs("button",{onClick:()=>z(K),className:"w-full text-left px-4 py-3 text-sm font-bold text-[#2c3e50] flex justify-between items-center hover:bg-gray-50 transition-colors bg-gray-50/50",children:[fe,k.jsx("span",{className:`transform transition-transform duration-300 text-gray-400 ${_[K]?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${_[K]?"max-h-0":"max-h-64 overflow-y-auto custom-scrollbar"}`,children:k.jsx("div",{className:"p-2",children:oe.map(_e=>k.jsxs("button",{onClick:()=>R(K,_e),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors text-sm mb-1 ${ce(K,_e)}`,children:[k.jsx("span",{className:"truncate mr-2",children:_e}),k.jsx("span",{className:"text-xs font-medium bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:le(K,_e)})]},_e))})})]},K))}),k.jsx("div",{className:"mt-4",children:!e.trim()&&!Object.values(n).some(K=>K&&K.length>0)?k.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[k.jsx("div",{className:"text-6xl mb-4 opacity-20",children:""}),k.jsx("p",{className:"text-xl text-gray-400 font-semibold",children:"Ready to Search"}),k.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter a keyword or select a filter to find songs."})]}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsxs("h2",{className:"text-xl font-bold text-[#2c3e50]",children:["Results ",k.jsxs("span",{className:"text-gray-400 text-lg font-normal ml-2",children:["(",s.length,")"]})]}),k.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:[k.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="cards"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Cards"}),k.jsx("button",{onClick:()=>u("grid"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="grid"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"List"})]})]}),s.length===0?k.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[k.jsx("p",{className:"text-gray-400 text-lg",children:"No songs match your search."}),k.jsx("button",{onClick:$,className:"mt-4 text-[#3498db] font-semibold hover:underline",children:"Clear filters"})]}):k.jsx(k.Fragment,{children:!c&&s.length>m?k.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200 shadow-sm",children:[k.jsxs("p",{className:"text-lg text-gray-600 mb-2",children:["Found ",k.jsx("span",{className:"font-bold text-[#2c3e50]",children:s.length})," matches."]}),k.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"Refine your search or view all results."}),k.jsx("button",{onClick:()=>f(!0),className:"px-8 py-3 bg-[#3498db] hover:bg-[#2980b9] text-white rounded-full font-bold shadow-lg shadow-blue-200 transition-transform transform hover:scale-105",children:"Show All Results"})]}):k.jsx(k.Fragment,{children:l==="cards"?k.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map((K,fe)=>{const oe=se(K);return k.jsxs("div",{onClick:()=>F(K,fe),className:`${Z} p-5 cursor-pointer relative overflow-hidden group`,children:[k.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${K.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),k.jsxs("div",{className:"pl-3",children:[k.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-3 leading-tight group-hover:text-[#3498db] transition-colors",children:g(K.title,K.language)}),k.jsxs("div",{className:"space-y-1.5",children:[k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Author"}),k.jsx("span",{className:"text-gray-700 font-medium",children:K.author})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Raagam"}),k.jsx("span",{className:"text-gray-700",children:K.raagam||"-"})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Taalam"}),k.jsx("span",{className:"text-gray-700",children:K.taaLam||"-"})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Book"}),k.jsx("span",{className:"text-gray-600 truncate",title:Array.isArray(K.book)?K.book.join(", "):K.book,children:ye(K.book)})]})]})]})]},oe)})}):k.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-left border-collapse",children:[k.jsx("thead",{children:k.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold",children:[k.jsx("th",{className:"p-4",children:"Title"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Author"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Raagam"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Taalam"}),k.jsx("th",{className:"p-4 hidden lg:table-cell",children:"Book"}),k.jsx("th",{className:"p-4 hidden xl:table-cell",children:"Category"})]})}),k.jsx("tbody",{className:"text-sm text-[#2c3e50]",children:s.map((K,fe)=>{const oe=se(K);return k.jsxs("tr",{onClick:()=>F(K,fe),className:"border-b border-gray-100 hover:bg-blue-50/50 cursor-pointer transition-colors last:border-0",children:[k.jsxs("td",{className:"p-4 font-bold group",children:[k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:`w-1.5 h-8 rounded-full mr-3 ${K.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),k.jsx("span",{className:"group-hover:text-[#3498db] transition-colors",children:g(K.title,K.language)})]}),k.jsxs("div",{className:"md:hidden mt-1 ml-4 text-xs text-gray-500 space-y-0.5",children:[k.jsx("div",{children:K.author}),k.jsx("div",{children:K.raagam})]})]}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.author}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.raagam||"-"}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.taaLam||"-"}),k.jsx("td",{className:"p-4 hidden lg:table-cell text-gray-600",children:k.jsx("div",{className:"truncate max-w-xs",title:Array.isArray(K.book)?K.book.join(", "):K.book,children:ye(K.book)})}),k.jsx("td",{className:"p-4 hidden xl:table-cell text-gray-600",children:k.jsx("div",{className:"truncate max-w-xs",children:ye(K.category)})})]},oe)})})]})})})})})]})})]})})},N5="thodaya-mangalam",L5=()=>{const[e,t]=S.useState(""),n=async()=>{t("Exporting...");try{const r=await gD(N5);if(!r){t("No data found for this book or download failed.");return}const s=r.songDetails.map(u=>u),i=r.songIndices.map(u=>{const{indexId:c,timestamp:f,...h}=u;return h}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:f,...h}=u;return h}),a={bookId:r.bookId,songIndices:i,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return k.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[k.jsx("div",{style:{marginTop:"20px"},children:k.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&k.jsxs("div",{style:{marginTop:"15px"},children:[k.jsx("h4",{children:"Exported JSON Structure:"}),k.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},$5=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],M5=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:s,isDownloading:i,startBulkDownload:o}=RS(e.bookId,t),a=()=>i?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${s} `:"Ready to Download";return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[k.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:i?"orange":n==="success"?"green":"gray"},children:a()}),k.jsx("button",{onClick:o,disabled:i,style:{padding:"5px 10px",backgroundColor:i?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:i?"Processing":"Bulk Download"})]})]})},F5=()=>{const e="test@example.com";return k.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[k.jsx("h2",{children:"Offline Content Manager"}),k.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),k.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:$5.map(t=>k.jsx(M5,{book:t,userEmail:e},t.bookId))})]})};function Hc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var AC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function o(u,c){if(!s[u]){if(!r[u]){var f=typeof Hc=="function"&&Hc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var m=s[u]={exports:{}};r[u][0].call(m.exports,function(_){var v=r[u][1][_];return o(v||_)},m,m.exports,n,r,s,i)}return s[u].exports}for(var a=typeof Hc=="function"&&Hc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,c,f,h,m,_,v,b=[],g=0,y=l.length,w=y,C=i.getTypeOf(l)!=="string";g<l.length;)w=y-g,f=C?(u=l[g++],c=g<y?l[g++]:0,g<y?l[g++]:0):(u=l.charCodeAt(g++),c=g<y?l.charCodeAt(g++):0,g<y?l.charCodeAt(g++):0),h=u>>2,m=(3&u)<<4|c>>4,_=1<w?(15&c)<<2|f>>6:64,v=2<w?63&f:64,b.push(a.charAt(h)+a.charAt(m)+a.charAt(_)+a.charAt(v));return b.join("")},s.decode=function(l){var u,c,f,h,m,_,v=0,b=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|w):new Array(0|w);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(h=a.indexOf(l.charAt(v++)))>>4,c=(15&h)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(_=a.indexOf(l.charAt(v++))),y[b++]=u,m!==64&&(y[b++]=c),_!==64&&(y[b++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,f,h,m,_){this.compressedSize=c,this.uncompressedSize=f,this.crc32=h,this.compression=m,this.compressedContent=_}u.prototype={getContentWorker:function(){var c=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,h){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,c,f,h){var m=o,_=h+f;u^=-1;for(var v=h;v<_;v++)u=u>>>8^m[255&(u^c[v])];return-1^u}(0|l,a,a.length,0):function(u,c,f,h){var m=o,_=h+f;u^=-1;for(var v=h;v<_;v++)u=u>>>8^m[255&(u^c.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function c(f,h){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}s.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},s.compressWorker=function(f){return new c("Deflate",f)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(m,_){var v,b="";for(v=0;v<_;v++)b+=String.fromCharCode(255&m),m>>>=8;return b}function o(m,_,v,b,g,y){var w,C,O=m.file,I=m.compression,R=y!==u.utf8encode,$=a.transformTo("string",y(O.name)),F=a.transformTo("string",u.utf8encode(O.name)),z=O.comment,de=a.transformTo("string",y(z)),L=a.transformTo("string",u.utf8encode(z)),G=F.length!==O.name.length,A=L.length!==z.length,Q="",ve="",le="",ce=O.dir,se=O.date,ye={crc32:0,compressedSize:0,uncompressedSize:0};_&&!v||(ye.crc32=m.crc32,ye.compressedSize=m.compressedSize,ye.uncompressedSize=m.uncompressedSize);var Z=0;_&&(Z|=8),R||!G&&!A||(Z|=2048);var X=0,K=0;ce&&(X|=16),g==="UNIX"?(K=798,X|=function(oe,_e){var $e=oe;return oe||($e=_e?16893:33204),(65535&$e)<<16}(O.unixPermissions,ce)):(K=20,X|=function(oe){return 63&(oe||0)}(O.dosPermissions)),w=se.getUTCHours(),w<<=6,w|=se.getUTCMinutes(),w<<=5,w|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),G&&(ve=i(1,1)+i(c($),4)+F,Q+="up"+i(ve.length,2)+ve),A&&(le=i(1,1)+i(c(de),4)+L,Q+="uc"+i(le.length,2)+le);var fe="";return fe+=`
\0`,fe+=i(Z,2),fe+=I.magic,fe+=i(w,2),fe+=i(C,2),fe+=i(ye.crc32,4),fe+=i(ye.compressedSize,4),fe+=i(ye.uncompressedSize,4),fe+=i($.length,2),fe+=i(Q.length,2),{fileRecord:f.LOCAL_FILE_HEADER+fe+$+Q,dirRecord:f.CENTRAL_FILE_HEADER+i(K,2)+fe+i(de.length,2)+"\0\0\0\0"+i(X,4)+i(b,4)+$+Q+de}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),f=n("../signature");function h(m,_,v,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=v,this.encodeFileName=b,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(m){var _=m.meta.percent||0,v=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(_+100*(v-b-1))/v:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var v=o(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,v=o(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),_)this.push({data:function(b){return f.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var v=this.bytesWritten-m,b=function(g,y,w,C,O){var I=a.transformTo("string",O(C));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(y,4)+i(w,4)+i(I.length,2)+I}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(v){_.processChunk(v)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(v){_.error(v)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var _=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<_.length;v++)try{_[v].error(m)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(h,m){f++;var _=function(y,w){var C=y||w,O=i[C];if(!O)throw new Error(C+" is not a valid compression method !");return O}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},b=m.dir,g=m.date;m._compressWorker(_,v).withStreamInfo("file",{name:h,dir:b,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(h){return new o.Promise(function(m,_){var v=h.decompressed.getContentWorker().pipe(new u);v.on("error",function(b){_(b)}).on("end",function(){v.streamInfo.crc32!==h.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(h,m){var _=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(v){var b=new l(m);return b.load(v),b}).then(function(v){var b=[o.Promise.resolve(v)],g=v.files;if(m.checkCRC32)for(var y=0;y<g.length;y++)b.push(f(g[y]));return o.Promise.all(b)}).then(function(v){for(var b=v.shift(),g=b.files,y=0;y<g.length;y++){var w=g[y],C=w.fileNameStr,O=i.resolve(w.fileNameStr);_.file(O,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:m.createFolders}),w.dir||(_.file(O).unsafeOriginalName=C)}return b.zipComment.length&&(_.comment=b.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,u){i.call(this,l),this._helper=a;var c=this;a.on("data",function(f,h){c.push(f)||c._helper.pause(),u&&u(h)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(O,I,R){var $,F=a.getTypeOf(I),z=a.extend(R||{},c);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(O=g(O)),z.createFolders&&($=b(O))&&y.call(this,$,!0);var de=F==="string"&&z.binary===!1&&z.base64===!1;R&&R.binary!==void 0||(z.binary=!de),(I instanceof f&&I.uncompressedSize===0||z.dir||!I||I.length===0)&&(z.base64=!1,z.binary=!0,I="",z.compression="STORE",F="string");var L=null;L=I instanceof f||I instanceof l?I:_.isNode&&_.isStream(I)?new v(O,I):a.prepareContent(O,I,z.binary,z.optimizedBinaryString,z.base64);var G=new h(O,L,z);this.files[O]=G}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),f=n("./compressedObject"),h=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),b=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var I=O.lastIndexOf("/");return 0<I?O.substring(0,I):""},g=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},y=function(O,I){return I=I!==void 0?I:c.createFolders,O=g(O),this.files[O]||i.call(this,O,null,{dir:!0,createFolders:I}),this.files[O]};function w(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var I,R,$;for(I in this.files)$=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&O(R,$)},filter:function(O){var I=[];return this.forEach(function(R,$){O(R,$)&&I.push($)}),I},file:function(O,I,R){if(arguments.length!==1)return O=this.root+O,i.call(this,O,I,R),this;if(w(O)){var $=O;return this.filter(function(z,de){return!de.dir&&$.test(z)})}var F=this.files[this.root+O];return F&&!F.dir?F:null},folder:function(O){if(!O)return this;if(w(O))return this.filter(function(F,z){return z.dir&&O.test(F)});var I=this.root+O,R=y.call(this,I),$=this.clone();return $.root=R.name,$},remove:function(O){O=this.root+O;var I=this.files[O];if(I||(O.slice(-1)!=="/"&&(O+="/"),I=this.files[O]),I&&!I.dir)delete this.files[O];else for(var R=this.filter(function(F,z){return z.name.slice(0,O.length)===O}),$=0;$<R.length;$++)delete this.files[R[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var I,R={};try{if((R=a.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var $=R.comment||this.comment||"";I=m.generateWorker(this,R,$)}catch(F){(I=new l("error")).error(F)}return new u(I,R.type||"string",R.mimeType)},generateAsync:function(O,I){return this.generateInternalStream(O).accumulate(I)},generateNodeStream:function(O,I){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===u&&this.data[h+2]===c&&this.data[h+3]===f)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&u===h[1]&&c===h[2]&&f===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var h=i.getTypeOf(f);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new u(f):o.uint8array?new c(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=i.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(_,v){return new c.Promise(function(b,g){var y=[],w=_._internalType,C=_._outputType,O=_._mimeType;_.on("data",function(I,R){y.push(I),v&&v(R)}).on("error",function(I){y=[],g(I)}).on("end",function(){try{var I=function(R,$,F){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",$),F);case"base64":return l.encode($);default:return i.transformTo(R,$)}}(C,function(R,$){var F,z=0,de=null,L=0;for(F=0;F<$.length;F++)L+=$[F].length;switch(R){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(de=new Uint8Array(L),F=0;F<$.length;F++)de.set($[F],z),z+=$[F].length;return de;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+R+"'")}}(w,y),O);b(I)}catch(R){g(R)}y=[]}).resume()})}function m(_,v,b){var g=v;switch(v){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=v,this._mimeType=b,i.checkSupport(g),this._worker=_.pipe(new o(g)),_.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(_){return h(this,_)},on:function(_,v){var b=this;return _==="data"?this._worker.on(_,function(g){v.call(b,g.data,g.meta)}):this._worker.on(_,function(){i.delay(v,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}s.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(_){var v,b,g,y,w,C=_.length,O=0;for(y=0;y<C;y++)(64512&(b=_.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=_.charCodeAt(y+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),y++),O+=b<128?1:b<2048?2:b<65536?3:4;for(v=o.uint8array?new Uint8Array(O):new Array(O),y=w=0;w<O;y++)(64512&(b=_.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=_.charCodeAt(y+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),y++),b<128?v[w++]=b:(b<2048?v[w++]=192|b>>>6:(b<65536?v[w++]=224|b>>>12:(v[w++]=240|b>>>18,v[w++]=128|b>>>12&63),v[w++]=128|b>>>6&63),v[w++]=128|63&b);return v}(m)},s.utf8decode=function(m){return o.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(_){var v,b,g,y,w=_.length,C=new Array(2*w);for(v=b=0;v<w;)if((g=_[v++])<128)C[b++]=g;else if(4<(y=u[g]))C[b++]=65533,v+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&v<w;)g=g<<6|63&_[v++],y--;1<y?C[b++]=65533:g<65536?C[b++]=g:(g-=65536,C[b++]=55296|g>>10&1023,C[b++]=56320|1023&g)}return C.length!==b&&(C.subarray?C=C.subarray(0,b):C.length=b),i.applyFromCharCode(C)}(m=i.transformTo(o.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var _=i.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=_;(_=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),_.set(v,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var b=function(y,w){var C;for((w=w||y.length)>y.length&&(w=y.length),C=w-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?w:C+u[y[C]]>w?C:w}(_),g=_;b!==_.length&&(o.uint8array?(g=_.subarray(0,b),this.leftOver=_.subarray(b,_.length)):(g=_.slice(0,b),this.leftOver=_.slice(b,_.length))),this.push({data:s.utf8decode(g),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(h,l),h.prototype.processChunk=function(m){this.push({data:s.utf8encode(m.data),meta:m.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function c(v,b){for(var g=0;g<v.length;++g)b[g]=255&v.charCodeAt(g);return b}n("setimmediate"),s.newBlob=function(v,b){s.checkSupport("blob");try{return new Blob([v],{type:b})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(v),g.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,b,g){var y=[],w=0,C=v.length;if(C<=g)return String.fromCharCode.apply(null,v);for(;w<C;)b==="array"||b==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(w,Math.min(w+g,C)))):y.push(String.fromCharCode.apply(null,v.subarray(w,Math.min(w+g,C)))),w+=g;return y.join("")},stringifyByChar:function(v){for(var b="",g=0;g<v.length;g++)b+=String.fromCharCode(v[g]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(v){var b=65536,g=s.getTypeOf(v),y=!0;if(g==="uint8array"?y=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<b;)try{return f.stringifyByChunk(v,g,b)}catch{b=Math.floor(b/2)}return f.stringifyByChar(v)}function m(v,b){for(var g=0;g<v.length;g++)b[g]=v[g];return b}s.applyFromCharCode=h;var _={};_.string={string:u,array:function(v){return c(v,new Array(v.length))},arraybuffer:function(v){return _.string.uint8array(v).buffer},uint8array:function(v){return c(v,new Uint8Array(v.length))},nodebuffer:function(v){return c(v,a.allocBuffer(v.length))}},_.array={string:h,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},_.arraybuffer={string:function(v){return h(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},_.uint8array={string:h,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},_.nodebuffer={string:h,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return _.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},s.transformTo=function(v,b){if(b=b||"",!v)return b;s.checkSupport(v);var g=s.getTypeOf(b);return _[g][v](b)},s.resolve=function(v){for(var b=v.split("/"),g=[],y=0;y<b.length;y++){var w=b[y];w==="."||w===""&&y!==0&&y!==b.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var b,g,y="";for(g=0;g<(v||"").length;g++)y+="\\x"+((b=v.charCodeAt(g))<16?"0":"")+b.toString(16).toUpperCase();return y},s.delay=function(v,b,g){setImmediate(function(){v.apply(g||null,b||[])})},s.inherits=function(v,b){function g(){}g.prototype=b.prototype,v.prototype=new g},s.extend=function(){var v,b,g={};for(v=0;v<arguments.length;v++)for(b in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],b)&&g[b]===void 0&&(g[b]=arguments[v][b]);return g},s.prepareContent=function(v,b,g,y,w){return l.Promise.resolve(b).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(O,I){var R=new FileReader;R.onload=function($){O($.target.result)},R.onerror=function($){I($.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var O=s.getTypeOf(C);return O?(O==="arraybuffer"?C=s.transformTo("uint8array",C):O==="string"&&(w?C=o.decode(C):g&&y!==!0&&(C=function(I){return c(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(f)+")")}},isSignature:function(f,h){var m=this.reader.index;this.reader.setIndex(f);var _=this.reader.readString(4)===h;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",m=o.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,m,_=this.zip64EndOfCentralSize-44;0<_;)f=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=h-m;if(0<_)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),f=n("./support");function h(m,_){this.options=m,this.loadOptions=_}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(b){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===b)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,v,b,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)_=m.readInt(2),v=m.readInt(2),b=m.readData(v),this.extraFields[_]={id:_,length:v,value:b};m.setIndex(g)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=i(m.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:u.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=i(m.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:u.utf8decode(_.readData(m.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(_,v,b){this.name=_,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=v,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");i.prototype={internalStream:function(_){var v=null,b="string";try{if(!_)throw new Error("No output type specified.");var g=(b=_.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),v=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(v=v.pipe(new l.Utf8EncodeWorker)),!y&&g&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(w){(v=new c("error")).error(w)}return new o(v,b,"")},async:function(_,v){return this.internalStream(_).accumulate(v)},nodeStream:function(_,v){return this.internalStream(_||"nodebuffer").toNodejsStream(v)},_compressWorker:function(_,v){if(this._data instanceof u&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(b,_,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=h;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,c=new l(_),f=i.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){_(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(_,0)};else{var h=new i.MessageChannel;h.port1.onmessage=_,o=function(){h.port2.postMessage(0)}}var m=[];function _(){var v,b;a=!0;for(var g=m.length;g;){for(b=m,m=[],v=-1;++v<g;)b[v]();g=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&v(this,g)}function h(g,y,w){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function m(g,y,w){i(function(){var C;try{C=y(w)}catch(O){return a.reject(g,O)}C===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,C)})}function _(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function v(g,y){var w=!1;function C(R){w||(w=!0,a.reject(g,R))}function O(R){w||(w=!0,a.resolve(g,R))}var I=b(function(){y(O,C)});I.status==="error"&&C(I.value)}function b(g,y){var w={};try{w.value=g(y),w.status="success"}catch(C){w.status="error",w.value=C}return w}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(g()).then(function(){return w})},function(w){return y.resolve(g()).then(function(){throw w})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,y){if(typeof g!="function"&&this.state===u||typeof y!="function"&&this.state===l)return this;var w=new this.constructor(o);return this.state!==c?m(w,this.state===u?g:y,this.outcome):this.queue.push(new h(w,g,y)),w},h.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){a.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,y){var w=b(_,y);if(w.status==="error")return a.reject(g,w.value);var C=w.value;if(C)v(g,C);else{g.state=u,g.outcome=y;for(var O=-1,I=g.queue.length;++O<I;)g.queue[O].callFulfilled(y)}return g},a.reject=function(g,y){g.state=l,g.outcome=y;for(var w=-1,C=g.queue.length;++w<C;)g.queue[w].callRejected(y);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var y=new this(o);return a.reject(y,g)},f.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,C=!1;if(!w)return this.resolve([]);for(var O=new Array(w),I=0,R=-1,$=new this(o);++R<w;)F(g[R],R);return $;function F(z,de){y.resolve(z).then(function(L){O[de]=L,++I!==w||C||(C=!0,a.resolve($,O))},function(L){C||(C=!0,a.reject($,L))})}},f.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,C=!1;if(!w)return this.resolve([]);for(var O=-1,I=new this(o);++O<w;)R=g[O],y.resolve(R).then(function($){C||(C=!0,a.resolve(I,$))},function($){C||(C=!0,a.reject(I,$))});var R;return I}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,f=0,h=-1,m=0,_=8;function v(g){if(!(this instanceof v))return new v(g);this.options=o.assign({level:h,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==f)throw new Error(l[w]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=i.deflateSetDictionary(this.strm,C))!==f)throw new Error(l[w]);this._dict_set=!0}}function b(g,y){var w=new v(y);if(w.push(g,!0),w.err)throw w.msg||l[w.err];return w.result}v.prototype.push=function(g,y){var w,C,O=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof g=="string"?O.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?O.input=new Uint8Array(g):O.input=g,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(I),O.next_out=0,O.avail_out=I),(w=i.deflate(O,C))!==1&&w!==f)return this.onEnd(w),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&w!==1);return C===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===f):C!==2||(this.onEnd(f),!(O.avail_out=0))},v.prototype.onData=function(g){this.chunks.push(g)},v.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=v,s.deflate=b,s.deflateRaw=function(g,y){return(y=y||{}).raw=!0,b(g,y)},s.gzip=function(g,y){return(y=y||{}).gzip=!0,b(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),h=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||v&&v.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,b.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function _(v,b){var g=new m(b);if(g.push(v,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(v,b){var g,y,w,C,O,I,R=this.strm,$=this.options.chunkSize,F=this.options.dictionary,z=!1;if(this.ended)return!1;y=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?R.input=a.binstring2buf(v):h.call(v)==="[object ArrayBuffer]"?R.input=new Uint8Array(v):R.input=v,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8($),R.next_out=0,R.avail_out=$),(g=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(I=typeof F=="string"?a.string2buf(F):h.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,g=i.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&z===!0&&(g=l.Z_OK,z=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&g!==l.Z_STREAM_END&&(R.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(R.output,R.next_out),C=R.next_out-w,O=a.buf2string(R.output,w),R.next_out=C,R.avail_out=$-C,C&&o.arraySet(R.output,R.output,w,C,0),this.onData(O)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(z=!0)}while((0<R.avail_in||R.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=m,s.inflate=_,s.inflateRaw=function(v,b){return(b=b||{}).raw=!0,_(v,b)},s.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,f,h){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),h);else for(var m=0;m<f;m++)l[h+m]=u[c+m]},flattenChunks:function(l){var u,c,f,h,m,_;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(_=new Uint8Array(f),u=h=0,c=l.length;u<c;u++)m=l[u],_.set(m,h),h+=m.length;return _}},a={arraySet:function(l,u,c,f,h){for(var m=0;m<f;m++)l[h+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,h){if(h<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,h));for(var m="",_=0;_<h;_++)m+=String.fromCharCode(f[_]);return m}l[254]=l[254]=1,s.string2buf=function(f){var h,m,_,v,b,g=f.length,y=0;for(v=0;v<g;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(_=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),v++),y+=m<128?1:m<2048?2:m<65536?3:4;for(h=new i.Buf8(y),v=b=0;b<y;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(_=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),v++),m<128?h[b++]=m:(m<2048?h[b++]=192|m>>>6:(m<65536?h[b++]=224|m>>>12:(h[b++]=240|m>>>18,h[b++]=128|m>>>12&63),h[b++]=128|m>>>6&63),h[b++]=128|63&m);return h},s.buf2binstring=function(f){return c(f,f.length)},s.binstring2buf=function(f){for(var h=new i.Buf8(f.length),m=0,_=h.length;m<_;m++)h[m]=f.charCodeAt(m);return h},s.buf2string=function(f,h){var m,_,v,b,g=h||f.length,y=new Array(2*g);for(m=_=0;m<g;)if((v=f[m++])<128)y[_++]=v;else if(4<(b=l[v]))y[_++]=65533,m+=b-1;else{for(v&=b===2?31:b===3?15:7;1<b&&m<g;)v=v<<6|63&f[m++],b--;1<b?y[_++]=65533:v<65536?y[_++]=v:(v-=65536,y[_++]=55296|v>>10&1023,y[_++]=56320|1023&v)}return c(y,_)},s.utf8border=function(f,h){var m;for((h=h||f.length)>f.length&&(h=f.length),m=h-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?h:m+l[f[m]]>h?m:h}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var u=65535&i|0,c=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=i,f=u+l;o^=-1;for(var h=u;h<f;h++)o=o>>>8^c[255&(o^a[h])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),f=0,h=4,m=0,_=-2,v=-1,b=4,g=2,y=8,w=9,C=286,O=30,I=19,R=2*C+1,$=15,F=3,z=258,de=z+F+1,L=42,G=113,A=1,Q=2,ve=3,le=4;function ce(P,ge){return P.msg=c[ge],ge}function se(P){return(P<<1)-(4<P?9:0)}function ye(P){for(var ge=P.length;0<=--ge;)P[ge]=0}function Z(P){var ge=P.state,he=ge.pending;he>P.avail_out&&(he=P.avail_out),he!==0&&(o.arraySet(P.output,ge.pending_buf,ge.pending_out,he,P.next_out),P.next_out+=he,ge.pending_out+=he,P.total_out+=he,P.avail_out-=he,ge.pending-=he,ge.pending===0&&(ge.pending_out=0))}function X(P,ge){a._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,ge),P.block_start=P.strstart,Z(P.strm)}function K(P,ge){P.pending_buf[P.pending++]=ge}function fe(P,ge){P.pending_buf[P.pending++]=ge>>>8&255,P.pending_buf[P.pending++]=255&ge}function oe(P,ge){var he,M,N=P.max_chain_length,te=P.strstart,we=P.prev_length,be=P.nice_match,ae=P.strstart>P.w_size-de?P.strstart-(P.w_size-de):0,ke=P.window,Ne=P.w_mask,Se=P.prev,Ue=P.strstart+z,rt=ke[te+we-1],Xe=ke[te+we];P.prev_length>=P.good_match&&(N>>=2),be>P.lookahead&&(be=P.lookahead);do if(ke[(he=ge)+we]===Xe&&ke[he+we-1]===rt&&ke[he]===ke[te]&&ke[++he]===ke[te+1]){te+=2,he++;do;while(ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&ke[++te]===ke[++he]&&te<Ue);if(M=z-(Ue-te),te=Ue-z,we<M){if(P.match_start=ge,be<=(we=M))break;rt=ke[te+we-1],Xe=ke[te+we]}}while((ge=Se[ge&Ne])>ae&&--N!=0);return we<=P.lookahead?we:P.lookahead}function _e(P){var ge,he,M,N,te,we,be,ae,ke,Ne,Se=P.w_size;do{if(N=P.window_size-P.lookahead-P.strstart,P.strstart>=Se+(Se-de)){for(o.arraySet(P.window,P.window,Se,Se,0),P.match_start-=Se,P.strstart-=Se,P.block_start-=Se,ge=he=P.hash_size;M=P.head[--ge],P.head[ge]=Se<=M?M-Se:0,--he;);for(ge=he=Se;M=P.prev[--ge],P.prev[ge]=Se<=M?M-Se:0,--he;);N+=Se}if(P.strm.avail_in===0)break;if(we=P.strm,be=P.window,ae=P.strstart+P.lookahead,ke=N,Ne=void 0,Ne=we.avail_in,ke<Ne&&(Ne=ke),he=Ne===0?0:(we.avail_in-=Ne,o.arraySet(be,we.input,we.next_in,Ne,ae),we.state.wrap===1?we.adler=l(we.adler,be,Ne,ae):we.state.wrap===2&&(we.adler=u(we.adler,be,Ne,ae)),we.next_in+=Ne,we.total_in+=Ne,Ne),P.lookahead+=he,P.lookahead+P.insert>=F)for(te=P.strstart-P.insert,P.ins_h=P.window[te],P.ins_h=(P.ins_h<<P.hash_shift^P.window[te+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[te+F-1])&P.hash_mask,P.prev[te&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=te,te++,P.insert--,!(P.lookahead+P.insert<F)););}while(P.lookahead<de&&P.strm.avail_in!==0)}function $e(P,ge){for(var he,M;;){if(P.lookahead<de){if(_e(P),P.lookahead<de&&ge===f)return A;if(P.lookahead===0)break}if(he=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,he=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),he!==0&&P.strstart-he<=P.w_size-de&&(P.match_length=oe(P,he)),P.match_length>=F)if(M=a._tr_tally(P,P.strstart-P.match_start,P.match_length-F),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=F){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,he=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else M=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(M&&(X(P,!1),P.strm.avail_out===0))return A}return P.insert=P.strstart<F-1?P.strstart:F-1,ge===h?(X(P,!0),P.strm.avail_out===0?ve:le):P.last_lit&&(X(P,!1),P.strm.avail_out===0)?A:Q}function Oe(P,ge){for(var he,M,N;;){if(P.lookahead<de){if(_e(P),P.lookahead<de&&ge===f)return A;if(P.lookahead===0)break}if(he=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,he=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=F-1,he!==0&&P.prev_length<P.max_lazy_match&&P.strstart-he<=P.w_size-de&&(P.match_length=oe(P,he),P.match_length<=5&&(P.strategy===1||P.match_length===F&&4096<P.strstart-P.match_start)&&(P.match_length=F-1)),P.prev_length>=F&&P.match_length<=P.prev_length){for(N=P.strstart+P.lookahead-F,M=a._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-F),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,he=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=F-1,P.strstart++,M&&(X(P,!1),P.strm.avail_out===0))return A}else if(P.match_available){if((M=a._tr_tally(P,0,P.window[P.strstart-1]))&&X(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return A}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(M=a._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<F-1?P.strstart:F-1,ge===h?(X(P,!0),P.strm.avail_out===0?ve:le):P.last_lit&&(X(P,!1),P.strm.avail_out===0)?A:Q}function me(P,ge,he,M,N){this.good_length=P,this.max_lazy=ge,this.nice_length=he,this.max_chain=M,this.func=N}function Ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*O+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16($+1),this.heap=new o.Buf16(2*C+1),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),ye(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ye(P){var ge;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=g,(ge=P.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?L:G,P.adler=ge.wrap===2?0:1,ge.last_flush=f,a._tr_init(ge),m):ce(P,_)}function We(P){var ge=Ye(P);return ge===m&&function(he){he.window_size=2*he.w_size,ye(he.head),he.max_lazy_match=i[he.level].max_lazy,he.good_match=i[he.level].good_length,he.nice_match=i[he.level].nice_length,he.max_chain_length=i[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=F-1,he.match_available=0,he.ins_h=0}(P.state),ge}function Tt(P,ge,he,M,N,te){if(!P)return _;var we=1;if(ge===v&&(ge=6),M<0?(we=0,M=-M):15<M&&(we=2,M-=16),N<1||w<N||he!==y||M<8||15<M||ge<0||9<ge||te<0||b<te)return ce(P,_);M===8&&(M=9);var be=new Ze;return(P.state=be).strm=P,be.wrap=we,be.gzhead=null,be.w_bits=M,be.w_size=1<<be.w_bits,be.w_mask=be.w_size-1,be.hash_bits=N+7,be.hash_size=1<<be.hash_bits,be.hash_mask=be.hash_size-1,be.hash_shift=~~((be.hash_bits+F-1)/F),be.window=new o.Buf8(2*be.w_size),be.head=new o.Buf16(be.hash_size),be.prev=new o.Buf16(be.w_size),be.lit_bufsize=1<<N+6,be.pending_buf_size=4*be.lit_bufsize,be.pending_buf=new o.Buf8(be.pending_buf_size),be.d_buf=1*be.lit_bufsize,be.l_buf=3*be.lit_bufsize,be.level=ge,be.strategy=te,be.method=he,We(P)}i=[new me(0,0,0,0,function(P,ge){var he=65535;for(he>P.pending_buf_size-5&&(he=P.pending_buf_size-5);;){if(P.lookahead<=1){if(_e(P),P.lookahead===0&&ge===f)return A;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var M=P.block_start+he;if((P.strstart===0||P.strstart>=M)&&(P.lookahead=P.strstart-M,P.strstart=M,X(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-de&&(X(P,!1),P.strm.avail_out===0))return A}return P.insert=0,ge===h?(X(P,!0),P.strm.avail_out===0?ve:le):(P.strstart>P.block_start&&(X(P,!1),P.strm.avail_out),A)}),new me(4,4,8,4,$e),new me(4,5,16,8,$e),new me(4,6,32,32,$e),new me(4,4,16,16,Oe),new me(8,16,32,32,Oe),new me(8,16,128,128,Oe),new me(8,32,128,256,Oe),new me(32,128,258,1024,Oe),new me(32,258,258,4096,Oe)],s.deflateInit=function(P,ge){return Tt(P,ge,y,15,8,0)},s.deflateInit2=Tt,s.deflateReset=We,s.deflateResetKeep=Ye,s.deflateSetHeader=function(P,ge){return P&&P.state?P.state.wrap!==2?_:(P.state.gzhead=ge,m):_},s.deflate=function(P,ge){var he,M,N,te;if(!P||!P.state||5<ge||ge<0)return P?ce(P,_):_;if(M=P.state,!P.output||!P.input&&P.avail_in!==0||M.status===666&&ge!==h)return ce(P,P.avail_out===0?-5:_);if(M.strm=P,he=M.last_flush,M.last_flush=ge,M.status===L)if(M.wrap===2)P.adler=0,K(M,31),K(M,139),K(M,8),M.gzhead?(K(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),K(M,255&M.gzhead.time),K(M,M.gzhead.time>>8&255),K(M,M.gzhead.time>>16&255),K(M,M.gzhead.time>>24&255),K(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),K(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(K(M,255&M.gzhead.extra.length),K(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(P.adler=u(P.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(K(M,0),K(M,0),K(M,0),K(M,0),K(M,0),K(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),K(M,3),M.status=G);else{var we=y+(M.w_bits-8<<4)<<8;we|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(we|=32),we+=31-we%31,M.status=G,fe(M,we),M.strstart!==0&&(fe(M,P.adler>>>16),fe(M,65535&P.adler)),P.adler=1}if(M.status===69)if(M.gzhead.extra){for(N=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),Z(P),N=M.pending,M.pending!==M.pending_buf_size));)K(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){N=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),Z(P),N=M.pending,M.pending===M.pending_buf_size)){te=1;break}te=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,K(M,te)}while(te!==0);M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),te===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){N=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),Z(P),N=M.pending,M.pending===M.pending_buf_size)){te=1;break}te=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,K(M,te)}while(te!==0);M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),te===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&Z(P),M.pending+2<=M.pending_buf_size&&(K(M,255&P.adler),K(M,P.adler>>8&255),P.adler=0,M.status=G)):M.status=G),M.pending!==0){if(Z(P),P.avail_out===0)return M.last_flush=-1,m}else if(P.avail_in===0&&se(ge)<=se(he)&&ge!==h)return ce(P,-5);if(M.status===666&&P.avail_in!==0)return ce(P,-5);if(P.avail_in!==0||M.lookahead!==0||ge!==f&&M.status!==666){var be=M.strategy===2?function(ae,ke){for(var Ne;;){if(ae.lookahead===0&&(_e(ae),ae.lookahead===0)){if(ke===f)return A;break}if(ae.match_length=0,Ne=a._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++,Ne&&(X(ae,!1),ae.strm.avail_out===0))return A}return ae.insert=0,ke===h?(X(ae,!0),ae.strm.avail_out===0?ve:le):ae.last_lit&&(X(ae,!1),ae.strm.avail_out===0)?A:Q}(M,ge):M.strategy===3?function(ae,ke){for(var Ne,Se,Ue,rt,Xe=ae.window;;){if(ae.lookahead<=z){if(_e(ae),ae.lookahead<=z&&ke===f)return A;if(ae.lookahead===0)break}if(ae.match_length=0,ae.lookahead>=F&&0<ae.strstart&&(Se=Xe[Ue=ae.strstart-1])===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]){rt=ae.strstart+z;do;while(Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Ue<rt);ae.match_length=z-(rt-Ue),ae.match_length>ae.lookahead&&(ae.match_length=ae.lookahead)}if(ae.match_length>=F?(Ne=a._tr_tally(ae,1,ae.match_length-F),ae.lookahead-=ae.match_length,ae.strstart+=ae.match_length,ae.match_length=0):(Ne=a._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++),Ne&&(X(ae,!1),ae.strm.avail_out===0))return A}return ae.insert=0,ke===h?(X(ae,!0),ae.strm.avail_out===0?ve:le):ae.last_lit&&(X(ae,!1),ae.strm.avail_out===0)?A:Q}(M,ge):i[M.level].func(M,ge);if(be!==ve&&be!==le||(M.status=666),be===A||be===ve)return P.avail_out===0&&(M.last_flush=-1),m;if(be===Q&&(ge===1?a._tr_align(M):ge!==5&&(a._tr_stored_block(M,0,0,!1),ge===3&&(ye(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),Z(P),P.avail_out===0))return M.last_flush=-1,m}return ge!==h?m:M.wrap<=0?1:(M.wrap===2?(K(M,255&P.adler),K(M,P.adler>>8&255),K(M,P.adler>>16&255),K(M,P.adler>>24&255),K(M,255&P.total_in),K(M,P.total_in>>8&255),K(M,P.total_in>>16&255),K(M,P.total_in>>24&255)):(fe(M,P.adler>>>16),fe(M,65535&P.adler)),Z(P),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?m:1)},s.deflateEnd=function(P){var ge;return P&&P.state?(ge=P.state.status)!==L&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==G&&ge!==666?ce(P,_):(P.state=null,ge===G?ce(P,-3):m):_},s.deflateSetDictionary=function(P,ge){var he,M,N,te,we,be,ae,ke,Ne=ge.length;if(!P||!P.state||(te=(he=P.state).wrap)===2||te===1&&he.status!==L||he.lookahead)return _;for(te===1&&(P.adler=l(P.adler,ge,Ne,0)),he.wrap=0,Ne>=he.w_size&&(te===0&&(ye(he.head),he.strstart=0,he.block_start=0,he.insert=0),ke=new o.Buf8(he.w_size),o.arraySet(ke,ge,Ne-he.w_size,he.w_size,0),ge=ke,Ne=he.w_size),we=P.avail_in,be=P.next_in,ae=P.input,P.avail_in=Ne,P.next_in=0,P.input=ge,_e(he);he.lookahead>=F;){for(M=he.strstart,N=he.lookahead-(F-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[M+F-1])&he.hash_mask,he.prev[M&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=M,M++,--N;);he.strstart=M,he.lookahead=F-1,_e(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=F-1,he.match_available=0,P.next_in=be,P.input=ae,P.avail_in=we,he.wrap=te,m},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,u,c,f,h,m,_,v,b,g,y,w,C,O,I,R,$,F,z,de,L,G,A,Q;a=i.state,l=i.next_in,A=i.input,u=l+(i.avail_in-5),c=i.next_out,Q=i.output,f=c-(o-i.avail_out),h=c+(i.avail_out-257),m=a.dmax,_=a.wsize,v=a.whave,b=a.wnext,g=a.window,y=a.hold,w=a.bits,C=a.lencode,O=a.distcode,I=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{w<15&&(y+=A[l++]<<w,w+=8,y+=A[l++]<<w,w+=8),$=C[y&I];t:for(;;){if(y>>>=F=$>>>24,w-=F,(F=$>>>16&255)===0)Q[c++]=65535&$;else{if(!(16&F)){if(!(64&F)){$=C[(65535&$)+(y&(1<<F)-1)];continue t}if(32&F){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}z=65535&$,(F&=15)&&(w<F&&(y+=A[l++]<<w,w+=8),z+=y&(1<<F)-1,y>>>=F,w-=F),w<15&&(y+=A[l++]<<w,w+=8,y+=A[l++]<<w,w+=8),$=O[y&R];n:for(;;){if(y>>>=F=$>>>24,w-=F,!(16&(F=$>>>16&255))){if(!(64&F)){$=O[(65535&$)+(y&(1<<F)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(de=65535&$,w<(F&=15)&&(y+=A[l++]<<w,(w+=8)<F&&(y+=A[l++]<<w,w+=8)),m<(de+=y&(1<<F)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=F,w-=F,(F=c-f)<de){if(v<(F=de-F)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(G=g,(L=0)===b){if(L+=_-F,F<z){for(z-=F;Q[c++]=g[L++],--F;);L=c-de,G=Q}}else if(b<F){if(L+=_+b-F,(F-=b)<z){for(z-=F;Q[c++]=g[L++],--F;);if(L=0,b<z){for(z-=F=b;Q[c++]=g[L++],--F;);L=c-de,G=Q}}}else if(L+=b-F,F<z){for(z-=F;Q[c++]=g[L++],--F;);L=c-de,G=Q}for(;2<z;)Q[c++]=G[L++],Q[c++]=G[L++],Q[c++]=G[L++],z-=3;z&&(Q[c++]=G[L++],1<z&&(Q[c++]=G[L++]))}else{for(L=c-de;Q[c++]=Q[L++],Q[c++]=Q[L++],Q[c++]=Q[L++],2<(z-=3););z&&(Q[c++]=Q[L++],1<z&&(Q[c++]=Q[L++]))}break}}break}}while(l<u&&c<h);l-=z=w>>3,y&=(1<<(w-=z<<3))-1,i.next_in=l,i.next_out=c,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=c<h?h-c+257:257-(c-h),a.hold=y,a.bits=w}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,f=2,h=0,m=-2,_=1,v=852,b=592;function g(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(L){var G;return L&&L.state?(G=L.state,L.total_in=L.total_out=G.total=0,L.msg="",G.wrap&&(L.adler=1&G.wrap),G.mode=_,G.last=0,G.havedict=0,G.dmax=32768,G.head=null,G.hold=0,G.bits=0,G.lencode=G.lendyn=new i.Buf32(v),G.distcode=G.distdyn=new i.Buf32(b),G.sane=1,G.back=-1,h):m}function C(L){var G;return L&&L.state?((G=L.state).wsize=0,G.whave=0,G.wnext=0,w(L)):m}function O(L,G){var A,Q;return L&&L.state?(Q=L.state,G<0?(A=0,G=-G):(A=1+(G>>4),G<48&&(G&=15)),G&&(G<8||15<G)?m:(Q.window!==null&&Q.wbits!==G&&(Q.window=null),Q.wrap=A,Q.wbits=G,C(L))):m}function I(L,G){var A,Q;return L?(Q=new y,(L.state=Q).window=null,(A=O(L,G))!==h&&(L.state=null),A):m}var R,$,F=!0;function z(L){if(F){var G;for(R=new i.Buf32(512),$=new i.Buf32(32),G=0;G<144;)L.lens[G++]=8;for(;G<256;)L.lens[G++]=9;for(;G<280;)L.lens[G++]=7;for(;G<288;)L.lens[G++]=8;for(u(c,L.lens,0,288,R,0,L.work,{bits:9}),G=0;G<32;)L.lens[G++]=5;u(f,L.lens,0,32,$,0,L.work,{bits:5}),F=!1}L.lencode=R,L.lenbits=9,L.distcode=$,L.distbits=5}function de(L,G,A,Q){var ve,le=L.state;return le.window===null&&(le.wsize=1<<le.wbits,le.wnext=0,le.whave=0,le.window=new i.Buf8(le.wsize)),Q>=le.wsize?(i.arraySet(le.window,G,A-le.wsize,le.wsize,0),le.wnext=0,le.whave=le.wsize):(Q<(ve=le.wsize-le.wnext)&&(ve=Q),i.arraySet(le.window,G,A-Q,ve,le.wnext),(Q-=ve)?(i.arraySet(le.window,G,A-Q,Q,0),le.wnext=Q,le.whave=le.wsize):(le.wnext+=ve,le.wnext===le.wsize&&(le.wnext=0),le.whave<le.wsize&&(le.whave+=ve))),0}s.inflateReset=C,s.inflateReset2=O,s.inflateResetKeep=w,s.inflateInit=function(L){return I(L,15)},s.inflateInit2=I,s.inflate=function(L,G){var A,Q,ve,le,ce,se,ye,Z,X,K,fe,oe,_e,$e,Oe,me,Ze,Ye,We,Tt,P,ge,he,M,N=0,te=new i.Buf8(4),we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return m;(A=L.state).mode===12&&(A.mode=13),ce=L.next_out,ve=L.output,ye=L.avail_out,le=L.next_in,Q=L.input,se=L.avail_in,Z=A.hold,X=A.bits,K=se,fe=ye,ge=h;e:for(;;)switch(A.mode){case _:if(A.wrap===0){A.mode=13;break}for(;X<16;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(2&A.wrap&&Z===35615){te[A.check=0]=255&Z,te[1]=Z>>>8&255,A.check=a(A.check,te,2,0),X=Z=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&Z)<<8)+(Z>>8))%31){L.msg="incorrect header check",A.mode=30;break}if((15&Z)!=8){L.msg="unknown compression method",A.mode=30;break}if(X-=4,P=8+(15&(Z>>>=4)),A.wbits===0)A.wbits=P;else if(P>A.wbits){L.msg="invalid window size",A.mode=30;break}A.dmax=1<<P,L.adler=A.check=1,A.mode=512&Z?10:12,X=Z=0;break;case 2:for(;X<16;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(A.flags=Z,(255&A.flags)!=8){L.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){L.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=Z>>8&1),512&A.flags&&(te[0]=255&Z,te[1]=Z>>>8&255,A.check=a(A.check,te,2,0)),X=Z=0,A.mode=3;case 3:for(;X<32;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}A.head&&(A.head.time=Z),512&A.flags&&(te[0]=255&Z,te[1]=Z>>>8&255,te[2]=Z>>>16&255,te[3]=Z>>>24&255,A.check=a(A.check,te,4,0)),X=Z=0,A.mode=4;case 4:for(;X<16;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}A.head&&(A.head.xflags=255&Z,A.head.os=Z>>8),512&A.flags&&(te[0]=255&Z,te[1]=Z>>>8&255,A.check=a(A.check,te,2,0)),X=Z=0,A.mode=5;case 5:if(1024&A.flags){for(;X<16;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}A.length=Z,A.head&&(A.head.extra_len=Z),512&A.flags&&(te[0]=255&Z,te[1]=Z>>>8&255,A.check=a(A.check,te,2,0)),X=Z=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(se<(oe=A.length)&&(oe=se),oe&&(A.head&&(P=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),i.arraySet(A.head.extra,Q,le,oe,P)),512&A.flags&&(A.check=a(A.check,Q,oe,le)),se-=oe,le+=oe,A.length-=oe),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(se===0)break e;for(oe=0;P=Q[le+oe++],A.head&&P&&A.length<65536&&(A.head.name+=String.fromCharCode(P)),P&&oe<se;);if(512&A.flags&&(A.check=a(A.check,Q,oe,le)),se-=oe,le+=oe,P)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(se===0)break e;for(oe=0;P=Q[le+oe++],A.head&&P&&A.length<65536&&(A.head.comment+=String.fromCharCode(P)),P&&oe<se;);if(512&A.flags&&(A.check=a(A.check,Q,oe,le)),se-=oe,le+=oe,P)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;X<16;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(Z!==(65535&A.check)){L.msg="header crc mismatch",A.mode=30;break}X=Z=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),L.adler=A.check=0,A.mode=12;break;case 10:for(;X<32;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}L.adler=A.check=g(Z),X=Z=0,A.mode=11;case 11:if(A.havedict===0)return L.next_out=ce,L.avail_out=ye,L.next_in=le,L.avail_in=se,A.hold=Z,A.bits=X,2;L.adler=A.check=1,A.mode=12;case 12:if(G===5||G===6)break e;case 13:if(A.last){Z>>>=7&X,X-=7&X,A.mode=27;break}for(;X<3;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}switch(A.last=1&Z,X-=1,3&(Z>>>=1)){case 0:A.mode=14;break;case 1:if(z(A),A.mode=20,G!==6)break;Z>>>=2,X-=2;break e;case 2:A.mode=17;break;case 3:L.msg="invalid block type",A.mode=30}Z>>>=2,X-=2;break;case 14:for(Z>>>=7&X,X-=7&X;X<32;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if((65535&Z)!=(Z>>>16^65535)){L.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&Z,X=Z=0,A.mode=15,G===6)break e;case 15:A.mode=16;case 16:if(oe=A.length){if(se<oe&&(oe=se),ye<oe&&(oe=ye),oe===0)break e;i.arraySet(ve,Q,le,oe,ce),se-=oe,le+=oe,ye-=oe,ce+=oe,A.length-=oe;break}A.mode=12;break;case 17:for(;X<14;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(A.nlen=257+(31&Z),Z>>>=5,X-=5,A.ndist=1+(31&Z),Z>>>=5,X-=5,A.ncode=4+(15&Z),Z>>>=4,X-=4,286<A.nlen||30<A.ndist){L.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;X<3;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}A.lens[we[A.have++]]=7&Z,Z>>>=3,X-=3}for(;A.have<19;)A.lens[we[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,he={bits:A.lenbits},ge=u(0,A.lens,0,19,A.lencode,0,A.work,he),A.lenbits=he.bits,ge){L.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;me=(N=A.lencode[Z&(1<<A.lenbits)-1])>>>16&255,Ze=65535&N,!((Oe=N>>>24)<=X);){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(Ze<16)Z>>>=Oe,X-=Oe,A.lens[A.have++]=Ze;else{if(Ze===16){for(M=Oe+2;X<M;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(Z>>>=Oe,X-=Oe,A.have===0){L.msg="invalid bit length repeat",A.mode=30;break}P=A.lens[A.have-1],oe=3+(3&Z),Z>>>=2,X-=2}else if(Ze===17){for(M=Oe+3;X<M;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}X-=Oe,P=0,oe=3+(7&(Z>>>=Oe)),Z>>>=3,X-=3}else{for(M=Oe+7;X<M;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}X-=Oe,P=0,oe=11+(127&(Z>>>=Oe)),Z>>>=7,X-=7}if(A.have+oe>A.nlen+A.ndist){L.msg="invalid bit length repeat",A.mode=30;break}for(;oe--;)A.lens[A.have++]=P}}if(A.mode===30)break;if(A.lens[256]===0){L.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,he={bits:A.lenbits},ge=u(c,A.lens,0,A.nlen,A.lencode,0,A.work,he),A.lenbits=he.bits,ge){L.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,he={bits:A.distbits},ge=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,he),A.distbits=he.bits,ge){L.msg="invalid distances set",A.mode=30;break}if(A.mode=20,G===6)break e;case 20:A.mode=21;case 21:if(6<=se&&258<=ye){L.next_out=ce,L.avail_out=ye,L.next_in=le,L.avail_in=se,A.hold=Z,A.bits=X,l(L,fe),ce=L.next_out,ve=L.output,ye=L.avail_out,le=L.next_in,Q=L.input,se=L.avail_in,Z=A.hold,X=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;me=(N=A.lencode[Z&(1<<A.lenbits)-1])>>>16&255,Ze=65535&N,!((Oe=N>>>24)<=X);){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(me&&!(240&me)){for(Ye=Oe,We=me,Tt=Ze;me=(N=A.lencode[Tt+((Z&(1<<Ye+We)-1)>>Ye)])>>>16&255,Ze=65535&N,!(Ye+(Oe=N>>>24)<=X);){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}Z>>>=Ye,X-=Ye,A.back+=Ye}if(Z>>>=Oe,X-=Oe,A.back+=Oe,A.length=Ze,me===0){A.mode=26;break}if(32&me){A.back=-1,A.mode=12;break}if(64&me){L.msg="invalid literal/length code",A.mode=30;break}A.extra=15&me,A.mode=22;case 22:if(A.extra){for(M=A.extra;X<M;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}A.length+=Z&(1<<A.extra)-1,Z>>>=A.extra,X-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;me=(N=A.distcode[Z&(1<<A.distbits)-1])>>>16&255,Ze=65535&N,!((Oe=N>>>24)<=X);){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(!(240&me)){for(Ye=Oe,We=me,Tt=Ze;me=(N=A.distcode[Tt+((Z&(1<<Ye+We)-1)>>Ye)])>>>16&255,Ze=65535&N,!(Ye+(Oe=N>>>24)<=X);){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}Z>>>=Ye,X-=Ye,A.back+=Ye}if(Z>>>=Oe,X-=Oe,A.back+=Oe,64&me){L.msg="invalid distance code",A.mode=30;break}A.offset=Ze,A.extra=15&me,A.mode=24;case 24:if(A.extra){for(M=A.extra;X<M;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}A.offset+=Z&(1<<A.extra)-1,Z>>>=A.extra,X-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){L.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(ye===0)break e;if(oe=fe-ye,A.offset>oe){if((oe=A.offset-oe)>A.whave&&A.sane){L.msg="invalid distance too far back",A.mode=30;break}_e=oe>A.wnext?(oe-=A.wnext,A.wsize-oe):A.wnext-oe,oe>A.length&&(oe=A.length),$e=A.window}else $e=ve,_e=ce-A.offset,oe=A.length;for(ye<oe&&(oe=ye),ye-=oe,A.length-=oe;ve[ce++]=$e[_e++],--oe;);A.length===0&&(A.mode=21);break;case 26:if(ye===0)break e;ve[ce++]=A.length,ye--,A.mode=21;break;case 27:if(A.wrap){for(;X<32;){if(se===0)break e;se--,Z|=Q[le++]<<X,X+=8}if(fe-=ye,L.total_out+=fe,A.total+=fe,fe&&(L.adler=A.check=A.flags?a(A.check,ve,fe,ce-fe):o(A.check,ve,fe,ce-fe)),fe=ye,(A.flags?Z:g(Z))!==A.check){L.msg="incorrect data check",A.mode=30;break}X=Z=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;X<32;){if(se===0)break e;se--,Z+=Q[le++]<<X,X+=8}if(Z!==(4294967295&A.total)){L.msg="incorrect length check",A.mode=30;break}X=Z=0}A.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return L.next_out=ce,L.avail_out=ye,L.next_in=le,L.avail_in=se,A.hold=Z,A.bits=X,(A.wsize||fe!==L.avail_out&&A.mode<30&&(A.mode<27||G!==4))&&de(L,L.output,L.next_out,fe-L.avail_out)?(A.mode=31,-4):(K-=L.avail_in,fe-=L.avail_out,L.total_in+=K,L.total_out+=fe,A.total+=fe,A.wrap&&fe&&(L.adler=A.check=A.flags?a(A.check,ve,fe,L.next_out-fe):o(A.check,ve,fe,L.next_out-fe)),L.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(K==0&&fe===0||G===4)&&ge===h&&(ge=-5),ge)},s.inflateEnd=function(L){if(!L||!L.state)return m;var G=L.state;return G.window&&(G.window=null),L.state=null,h},s.inflateGetHeader=function(L,G){var A;return L&&L.state&&2&(A=L.state).wrap?((A.head=G).done=!1,h):m},s.inflateSetDictionary=function(L,G){var A,Q=G.length;return L&&L.state?(A=L.state).wrap!==0&&A.mode!==11?m:A.mode===11&&o(1,G,Q,0)!==A.check?-3:de(L,G,Q,Q)?(A.mode=31,-4):(A.havedict=1,h):m},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,h,m,_,v,b,g){var y,w,C,O,I,R,$,F,z,de=g.bits,L=0,G=0,A=0,Q=0,ve=0,le=0,ce=0,se=0,ye=0,Z=0,X=null,K=0,fe=new i.Buf16(16),oe=new i.Buf16(16),_e=null,$e=0;for(L=0;L<=15;L++)fe[L]=0;for(G=0;G<m;G++)fe[f[h+G]]++;for(ve=de,Q=15;1<=Q&&fe[Q]===0;Q--);if(Q<ve&&(ve=Q),Q===0)return _[v++]=20971520,_[v++]=20971520,g.bits=1,0;for(A=1;A<Q&&fe[A]===0;A++);for(ve<A&&(ve=A),L=se=1;L<=15;L++)if(se<<=1,(se-=fe[L])<0)return-1;if(0<se&&(c===0||Q!==1))return-1;for(oe[1]=0,L=1;L<15;L++)oe[L+1]=oe[L]+fe[L];for(G=0;G<m;G++)f[h+G]!==0&&(b[oe[f[h+G]]++]=G);if(R=c===0?(X=_e=b,19):c===1?(X=o,K-=257,_e=a,$e-=257,256):(X=l,_e=u,-1),L=A,I=v,ce=G=Z=0,C=-1,O=(ye=1<<(le=ve))-1,c===1&&852<ye||c===2&&592<ye)return 1;for(;;){for($=L-ce,z=b[G]<R?(F=0,b[G]):b[G]>R?(F=_e[$e+b[G]],X[K+b[G]]):(F=96,0),y=1<<L-ce,A=w=1<<le;_[I+(Z>>ce)+(w-=y)]=$<<24|F<<16|z|0,w!==0;);for(y=1<<L-1;Z&y;)y>>=1;if(y!==0?(Z&=y-1,Z+=y):Z=0,G++,--fe[L]==0){if(L===Q)break;L=f[h+b[G]]}if(ve<L&&(Z&O)!==C){for(ce===0&&(ce=ve),I+=A,se=1<<(le=L-ce);le+ce<Q&&!((se-=fe[le+ce])<=0);)le++,se<<=1;if(ye+=1<<le,c===1&&852<ye||c===2&&592<ye)return 1;_[C=Z&O]=ve<<24|le<<16|I-v|0}}return Z!==0&&(_[I+Z]=L-ce<<24|64<<16|0),g.bits=ve,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(N){for(var te=N.length;0<=--te;)N[te]=0}var u=0,c=29,f=256,h=f+1+c,m=30,_=19,v=2*h+1,b=15,g=16,y=7,w=256,C=16,O=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=new Array(2*(h+2));l(de);var L=new Array(2*m);l(L);var G=new Array(512);l(G);var A=new Array(256);l(A);var Q=new Array(c);l(Q);var ve,le,ce,se=new Array(m);function ye(N,te,we,be,ae){this.static_tree=N,this.extra_bits=te,this.extra_base=we,this.elems=be,this.max_length=ae,this.has_stree=N&&N.length}function Z(N,te){this.dyn_tree=N,this.max_code=0,this.stat_desc=te}function X(N){return N<256?G[N]:G[256+(N>>>7)]}function K(N,te){N.pending_buf[N.pending++]=255&te,N.pending_buf[N.pending++]=te>>>8&255}function fe(N,te,we){N.bi_valid>g-we?(N.bi_buf|=te<<N.bi_valid&65535,K(N,N.bi_buf),N.bi_buf=te>>g-N.bi_valid,N.bi_valid+=we-g):(N.bi_buf|=te<<N.bi_valid&65535,N.bi_valid+=we)}function oe(N,te,we){fe(N,we[2*te],we[2*te+1])}function _e(N,te){for(var we=0;we|=1&N,N>>>=1,we<<=1,0<--te;);return we>>>1}function $e(N,te,we){var be,ae,ke=new Array(b+1),Ne=0;for(be=1;be<=b;be++)ke[be]=Ne=Ne+we[be-1]<<1;for(ae=0;ae<=te;ae++){var Se=N[2*ae+1];Se!==0&&(N[2*ae]=_e(ke[Se]++,Se))}}function Oe(N){var te;for(te=0;te<h;te++)N.dyn_ltree[2*te]=0;for(te=0;te<m;te++)N.dyn_dtree[2*te]=0;for(te=0;te<_;te++)N.bl_tree[2*te]=0;N.dyn_ltree[2*w]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function me(N){8<N.bi_valid?K(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function Ze(N,te,we,be){var ae=2*te,ke=2*we;return N[ae]<N[ke]||N[ae]===N[ke]&&be[te]<=be[we]}function Ye(N,te,we){for(var be=N.heap[we],ae=we<<1;ae<=N.heap_len&&(ae<N.heap_len&&Ze(te,N.heap[ae+1],N.heap[ae],N.depth)&&ae++,!Ze(te,be,N.heap[ae],N.depth));)N.heap[we]=N.heap[ae],we=ae,ae<<=1;N.heap[we]=be}function We(N,te,we){var be,ae,ke,Ne,Se=0;if(N.last_lit!==0)for(;be=N.pending_buf[N.d_buf+2*Se]<<8|N.pending_buf[N.d_buf+2*Se+1],ae=N.pending_buf[N.l_buf+Se],Se++,be===0?oe(N,ae,te):(oe(N,(ke=A[ae])+f+1,te),(Ne=R[ke])!==0&&fe(N,ae-=Q[ke],Ne),oe(N,ke=X(--be),we),(Ne=$[ke])!==0&&fe(N,be-=se[ke],Ne)),Se<N.last_lit;);oe(N,w,te)}function Tt(N,te){var we,be,ae,ke=te.dyn_tree,Ne=te.stat_desc.static_tree,Se=te.stat_desc.has_stree,Ue=te.stat_desc.elems,rt=-1;for(N.heap_len=0,N.heap_max=v,we=0;we<Ue;we++)ke[2*we]!==0?(N.heap[++N.heap_len]=rt=we,N.depth[we]=0):ke[2*we+1]=0;for(;N.heap_len<2;)ke[2*(ae=N.heap[++N.heap_len]=rt<2?++rt:0)]=1,N.depth[ae]=0,N.opt_len--,Se&&(N.static_len-=Ne[2*ae+1]);for(te.max_code=rt,we=N.heap_len>>1;1<=we;we--)Ye(N,ke,we);for(ae=Ue;we=N.heap[1],N.heap[1]=N.heap[N.heap_len--],Ye(N,ke,1),be=N.heap[1],N.heap[--N.heap_max]=we,N.heap[--N.heap_max]=be,ke[2*ae]=ke[2*we]+ke[2*be],N.depth[ae]=(N.depth[we]>=N.depth[be]?N.depth[we]:N.depth[be])+1,ke[2*we+1]=ke[2*be+1]=ae,N.heap[1]=ae++,Ye(N,ke,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(Xe,Ot){var Yn,De,Ve,et,an,Ht,Le=Ot.dyn_tree,gr=Ot.max_code,Jn=Ot.stat_desc.static_tree,Es=Ot.stat_desc.has_stree,Pe=Ot.stat_desc.extra_bits,Zr=Ot.stat_desc.extra_base,Dr=Ot.stat_desc.max_length,yr=0;for(et=0;et<=b;et++)Xe.bl_count[et]=0;for(Le[2*Xe.heap[Xe.heap_max]+1]=0,Yn=Xe.heap_max+1;Yn<v;Yn++)Dr<(et=Le[2*Le[2*(De=Xe.heap[Yn])+1]+1]+1)&&(et=Dr,yr++),Le[2*De+1]=et,gr<De||(Xe.bl_count[et]++,an=0,Zr<=De&&(an=Pe[De-Zr]),Ht=Le[2*De],Xe.opt_len+=Ht*(et+an),Es&&(Xe.static_len+=Ht*(Jn[2*De+1]+an)));if(yr!==0){do{for(et=Dr-1;Xe.bl_count[et]===0;)et--;Xe.bl_count[et]--,Xe.bl_count[et+1]+=2,Xe.bl_count[Dr]--,yr-=2}while(0<yr);for(et=Dr;et!==0;et--)for(De=Xe.bl_count[et];De!==0;)gr<(Ve=Xe.heap[--Yn])||(Le[2*Ve+1]!==et&&(Xe.opt_len+=(et-Le[2*Ve+1])*Le[2*Ve],Le[2*Ve+1]=et),De--)}}(N,te),$e(ke,rt,N.bl_count)}function P(N,te,we){var be,ae,ke=-1,Ne=te[1],Se=0,Ue=7,rt=4;for(Ne===0&&(Ue=138,rt=3),te[2*(we+1)+1]=65535,be=0;be<=we;be++)ae=Ne,Ne=te[2*(be+1)+1],++Se<Ue&&ae===Ne||(Se<rt?N.bl_tree[2*ae]+=Se:ae!==0?(ae!==ke&&N.bl_tree[2*ae]++,N.bl_tree[2*C]++):Se<=10?N.bl_tree[2*O]++:N.bl_tree[2*I]++,ke=ae,rt=(Se=0)===Ne?(Ue=138,3):ae===Ne?(Ue=6,3):(Ue=7,4))}function ge(N,te,we){var be,ae,ke=-1,Ne=te[1],Se=0,Ue=7,rt=4;for(Ne===0&&(Ue=138,rt=3),be=0;be<=we;be++)if(ae=Ne,Ne=te[2*(be+1)+1],!(++Se<Ue&&ae===Ne)){if(Se<rt)for(;oe(N,ae,N.bl_tree),--Se!=0;);else ae!==0?(ae!==ke&&(oe(N,ae,N.bl_tree),Se--),oe(N,C,N.bl_tree),fe(N,Se-3,2)):Se<=10?(oe(N,O,N.bl_tree),fe(N,Se-3,3)):(oe(N,I,N.bl_tree),fe(N,Se-11,7));ke=ae,rt=(Se=0)===Ne?(Ue=138,3):ae===Ne?(Ue=6,3):(Ue=7,4)}}l(se);var he=!1;function M(N,te,we,be){fe(N,(u<<1)+(be?1:0),3),function(ae,ke,Ne,Se){me(ae),K(ae,Ne),K(ae,~Ne),i.arraySet(ae.pending_buf,ae.window,ke,Ne,ae.pending),ae.pending+=Ne}(N,te,we)}s._tr_init=function(N){he||(function(){var te,we,be,ae,ke,Ne=new Array(b+1);for(ae=be=0;ae<c-1;ae++)for(Q[ae]=be,te=0;te<1<<R[ae];te++)A[be++]=ae;for(A[be-1]=ae,ae=ke=0;ae<16;ae++)for(se[ae]=ke,te=0;te<1<<$[ae];te++)G[ke++]=ae;for(ke>>=7;ae<m;ae++)for(se[ae]=ke<<7,te=0;te<1<<$[ae]-7;te++)G[256+ke++]=ae;for(we=0;we<=b;we++)Ne[we]=0;for(te=0;te<=143;)de[2*te+1]=8,te++,Ne[8]++;for(;te<=255;)de[2*te+1]=9,te++,Ne[9]++;for(;te<=279;)de[2*te+1]=7,te++,Ne[7]++;for(;te<=287;)de[2*te+1]=8,te++,Ne[8]++;for($e(de,h+1,Ne),te=0;te<m;te++)L[2*te+1]=5,L[2*te]=_e(te,5);ve=new ye(de,R,f+1,h,b),le=new ye(L,$,0,m,b),ce=new ye(new Array(0),F,0,_,y)}(),he=!0),N.l_desc=new Z(N.dyn_ltree,ve),N.d_desc=new Z(N.dyn_dtree,le),N.bl_desc=new Z(N.bl_tree,ce),N.bi_buf=0,N.bi_valid=0,Oe(N)},s._tr_stored_block=M,s._tr_flush_block=function(N,te,we,be){var ae,ke,Ne=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(Se){var Ue,rt=4093624447;for(Ue=0;Ue<=31;Ue++,rt>>>=1)if(1&rt&&Se.dyn_ltree[2*Ue]!==0)return o;if(Se.dyn_ltree[18]!==0||Se.dyn_ltree[20]!==0||Se.dyn_ltree[26]!==0)return a;for(Ue=32;Ue<f;Ue++)if(Se.dyn_ltree[2*Ue]!==0)return a;return o}(N)),Tt(N,N.l_desc),Tt(N,N.d_desc),Ne=function(Se){var Ue;for(P(Se,Se.dyn_ltree,Se.l_desc.max_code),P(Se,Se.dyn_dtree,Se.d_desc.max_code),Tt(Se,Se.bl_desc),Ue=_-1;3<=Ue&&Se.bl_tree[2*z[Ue]+1]===0;Ue--);return Se.opt_len+=3*(Ue+1)+5+5+4,Ue}(N),ae=N.opt_len+3+7>>>3,(ke=N.static_len+3+7>>>3)<=ae&&(ae=ke)):ae=ke=we+5,we+4<=ae&&te!==-1?M(N,te,we,be):N.strategy===4||ke===ae?(fe(N,2+(be?1:0),3),We(N,de,L)):(fe(N,4+(be?1:0),3),function(Se,Ue,rt,Xe){var Ot;for(fe(Se,Ue-257,5),fe(Se,rt-1,5),fe(Se,Xe-4,4),Ot=0;Ot<Xe;Ot++)fe(Se,Se.bl_tree[2*z[Ot]+1],3);ge(Se,Se.dyn_ltree,Ue-1),ge(Se,Se.dyn_dtree,rt-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,Ne+1),We(N,N.dyn_ltree,N.dyn_dtree)),Oe(N),be&&me(N)},s._tr_tally=function(N,te,we){return N.pending_buf[N.d_buf+2*N.last_lit]=te>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&te,N.pending_buf[N.l_buf+N.last_lit]=255&we,N.last_lit++,te===0?N.dyn_ltree[2*we]++:(N.matches++,te--,N.dyn_ltree[2*(A[we]+f+1)]++,N.dyn_dtree[2*X(te)]++),N.last_lit===N.lit_bufsize-1},s._tr_align=function(N){fe(N,2,3),oe(N,w,de),function(te){te.bi_valid===16?(K(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,u,c,f,h=1,m={},_=!1,v=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){y(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,O=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=O,C}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(C){o.postMessage(f+C,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){c.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(C){var O=v.createElement("script");O.onreadystatechange=function(){y(C),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):function(C){setTimeout(y,0,C)},b.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var O=new Array(arguments.length-1),I=0;I<O.length;I++)O[I]=arguments[I+1];var R={callback:C,args:O};return m[h]=R,l(h),h++},b.clearImmediate=g}function g(C){delete m[C]}function y(C){if(_)setTimeout(y,0,C);else{var O=m[C];if(O){_=!0;try{(function(I){var R=I.callback,$=I.args;switch($.length){case 0:R();break;case 1:R($[0]);break;case 2:R($[0],$[1]);break;case 3:R($[0],$[1],$[2]);break;default:R.apply(a,$)}})(O)}finally{g(C),_=!1}}}}function w(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(f)===0&&y(+C.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(AC);var B5=AC.exports;const Mx=sf(B5),U5=()=>{const[e,t]=S.useState(!1),[n,r]=S.useState([]),s=S.useRef(null),i=S.useCallback(async u=>{if(!u||u.length===0){r(f=>[...f,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let f=0;f<u.length;f++){const h=u[f];if(h.type==="application/zip"||h.name.endsWith(".zip"))try{const m=await Mx.loadAsync(h),_=Object.values(m.files);for(const v of _)if(!v.dir&&v.name.endsWith(".json"))try{const b=await v.async("string"),g=JSON.parse(b),y=v.name.split("/").pop()||"unknown.json",w=y.replace(/\.json$/,"");localStorage.setItem(w,JSON.stringify(g)),c.push({success:!0,message:`Successfully extracted and stored "${y}" with key "${w}" from ZIP.`})}catch(b){const g=b instanceof Error?b.message:"Unknown error";c.push({success:!1,message:`Error processing file "${v.name}" from ZIP: ${g}`})}else v.dir||c.push({success:!1,message:`Skipped non-JSON file "${v.name}" from ZIP.`})}catch(m){const _=m instanceof Error?m.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${h.name}": ${_}`})}else if(h.type==="application/json"||h.name.endsWith(".json"))try{const m=new FileReader,_=await new Promise((y,w)=>{m.onload=()=>y(m.result),m.onerror=w,m.readAsText(h)}),v=JSON.parse(_),g=h.name.replace(/\.json$/,"");localStorage.setItem(g,JSON.stringify(v)),c.push({success:!0,message:`Successfully stored "${h.name}" with key "${g}".`})}catch(m){const _=m instanceof Error?m.message:"Unknown error";c.push({success:!1,message:`Error processing file "${h.name}": ${_}`})}else c.push({success:!1,message:`File "${h.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(f=>[...f,...c]),t(!1)}},[]),o=u=>{i(u.target.files),s.current&&(s.current.value="")},a=()=>{r([])},l=S.useCallback(async()=>{t(!0);try{debugger;const u=new Mx;let c=!1,f=null;const h=localStorage.getItem("sankeertan_categories_data");if(h)try{f=JSON.parse(h),u.file("sankeertan_categories_data.json",h),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),f=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const m={};for(let g=0;g<localStorage.length;g++){debugger;const y=localStorage.key(g);if(console.log(y),y!=="sb-"+N1+"-auth-token"&&y&&y!=="sankeertan_categories_data"){const w=localStorage.getItem(y);if(w)try{JSON.parse(w);let C=u;if(f&&Array.isArray(f.data))for(const O of f.data)for(const I of O.books){const R=I.bookId,$=`sankeertan_song_details-${R.toLowerCase().replace(/ /g,"-")}`,F=`sankeertan_song_indices-${R.toLowerCase().replace(/ /g,"-")}`;if(y.startsWith($)||y.startsWith(F)){if(!m[R]){const z=u.folder(R);z?m[R]=z:m[R]=u}C=m[R]||u;break}}C.file(`${y}.json`,w),c=!0}catch{console.warn(`Skipping key "${y}" as value is not valid JSON`)}}}if(!c){r(g=>[...g,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const _=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),v=URL.createObjectURL(_),b=document.createElement("a");b.href=v,b.download="sankeertan_localStorage_backup.zip",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(v),r(g=>[...g,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(f=>[...f,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return k.jsxs("div",{className:"p-4",children:[k.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:s}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),k.jsx("div",{className:"mb-4",children:k.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&k.jsx("div",{className:"mb-4 flex items-center gap-2",children:k.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&k.jsxs("div",{className:"mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>k.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?k.jsx("span",{style:{color:"green"},children:""}):k.jsx("span",{style:{color:"red"},children:""}),k.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),k.jsx("span",{children:u.message})]},c)),k.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),k.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),k.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},er=({children:e,session:t})=>{const n=Gn();return t?k.jsx(k.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),k.jsx(A1,{to:"/login",replace:!0}))};function z5(){const{session:e}=xi(),{categories:t,isLoading:n}=If(),r=(t==null?void 0:t.flatMap(s=>s.books))||[];return n?k.jsx("div",{children:"Checking authentication..."}):k.jsx(AS,{children:k.jsx(ED,{books:r,children:k.jsxs(JA,{children:[k.jsx(Qt,{path:"/login",element:k.jsx(vI,{})}),k.jsx(Qt,{path:"/signup",element:k.jsx(wI,{})}),k.jsx(Qt,{path:"/change-password",element:k.jsx(bI,{})}),k.jsx(Qt,{path:"/auth/callback",element:k.jsx(_I,{})}),k.jsx(Qt,{path:"/settings",element:k.jsx(er,{session:e,children:k.jsx(w5,{})})}),k.jsx(Qt,{path:"/categories",element:k.jsx(er,{session:e,children:k.jsx(kD,{})})}),k.jsx(Qt,{path:"/books/:categoryId",element:k.jsx(er,{session:e,children:k.jsx($D,{})})}),k.jsx(Qt,{path:"/book/:categoryId/:bookId",element:k.jsx(er,{session:e,children:k.jsx(ZD,{})})}),k.jsx(Qt,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(er,{session:e,children:k.jsx(S5,{})})}),k.jsx(Qt,{path:"/editor/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(er,{session:e,children:k.jsx(Lx,{})})}),k.jsx(Qt,{path:"/song-editor",element:k.jsx(er,{session:e,children:k.jsx(Lx,{})})}),k.jsx(Qt,{path:"/sankeertan/:broadcastId",element:k.jsx(er,{session:e,children:k.jsx(P5,{broadcastId:1})})}),k.jsx(Qt,{path:"/localstoragesync",element:k.jsx(er,{session:e,children:k.jsx(U5,{})})}),k.jsx(Qt,{path:"/bulkDownloadTester",element:k.jsx(er,{session:e,children:k.jsx(L5,{})})}),k.jsx(Qt,{path:"/offlineContentManager",element:k.jsx(er,{session:e,children:k.jsx(F5,{})})}),k.jsx(Qt,{path:"/search",element:k.jsx(er,{session:e,children:k.jsx(D5,{})})}),k.jsx(Qt,{path:"/",element:e?k.jsx(A1,{to:"/categories",replace:!0}):k.jsx("div",{children:"Welcome!"})})]})})})}const V5=S.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),K5=({children:e})=>{const[t,n]=S.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,s]=S.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[i,o]=S.useState(null),[a,l]=S.useState(!1),[u,c]=S.useState(null),{bookId:f}=Ba(),h=S.useCallback(async _=>{l(!0),c(null),o(null),await new Promise(b=>setTimeout(b,500));const v=t.find(b=>b.id===_);o(v||null),l(!1)},[t,l,c,o]);S.useEffect(()=>{f&&h(f)},[f,h]);const m={books:t,categories:r,currentBook:i,loadBook:h,loading:a,error:u};return k.jsx(V5.Provider,{value:m,children:e})},W5=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var l;const[r,s]=S.useState(null);Qn(),S.useEffect(()=>{Ut.auth.getSession().then(({data:{session:u}})=>{s(u)}),Ut.auth.onAuthStateChange((u,c)=>{s(c)})},[]);const{handleSignOut:i}=CS(),{isOfflineMode:o,setIsOfflineMode:a}=zy();return k.jsx("div",{className:"relative inline-block text-left",children:r?k.jsxs("div",{children:[k.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((l=r.user)==null?void 0:l.email)||"User",k.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&k.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:k.jsxs("div",{className:"py-1",children:[k.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:o,onChange:u=>a(u.target.checked)}),k.jsx("span",{children:"Offline Mode"})]})}),k.jsx(ar,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),k.jsx(ar,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),k.jsx(ar,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),k.jsx(ar,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),k.jsx(ar,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),k.jsx("button",{onClick:i,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):k.jsx(ar,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var H5=Object.defineProperty,q5=(e,t,n)=>t in e?H5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ep=(e,t,n)=>(q5(e,typeof t!="symbol"?t+"":t,n),n);let G5=class{constructor(){Ep(this,"current",this.detect()),Ep(this,"handoffState","pending"),Ep(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Yr=new G5;function Ku(e){var t;return Yr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function _g(e){var t,n;return Yr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function jC(e){var t,n;return(n=(t=_g(e))==null?void 0:t.activeElement)!=null?n:null}function Q5(e){return jC(e)===e}function Uf(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ss(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Uf(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Ss();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function zf(){let[e]=S.useState(Ss);return S.useEffect(()=>()=>e.dispose(),[e]),e}let Ln=(e,t)=>{Yr.isServer?S.useEffect(e,t):S.useLayoutEffect(e,t)};function xo(e){let t=S.useRef(e);return Ln(()=>{t.current=e},[e]),t}let ft=function(e){let t=xo(e);return ze.useCallback((...n)=>t.current(...n),[t])};function Wu(e){return S.useMemo(()=>e,Object.values(e))}let Y5=S.createContext(void 0);function J5(){return S.useContext(Y5)}function kg(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function _s(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_s),r}var tf=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(tf||{}),ei=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ei||{});function mr(){let e=X5();return S.useCallback(t=>Z5({mergeRefs:e,...t}),[e])}function Z5({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??e4;let l=OC(t,e);if(i)return qc(l,n,r,o,a);let u=s??0;if(u&2){let{static:c=!1,...f}=l;if(c)return qc(f,n,r,o,a)}if(u&1){let{unmount:c=!0,...f}=l;return _s(c?0:1,{0(){return null},1(){return qc({...f,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return qc(l,n,r,o,a)}function qc(e,t={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=Cp(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let h=!1,m=[];for(let[_,v]of Object.entries(t))typeof v=="boolean"&&(h=!0),v===!0&&m.push(_.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(h){f["data-headlessui-state"]=m.join(" ");for(let _ of m)f[`data-${_}`]=""}}if(Wl(i)&&(Object.keys($i(l)).length>0||Object.keys($i(f)).length>0))if(!S.isValidElement(c)||Array.isArray(c)&&c.length>1||n4(c)){if(Object.keys($i(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys($i(l)).concat(Object.keys($i(f))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=c.props,m=h==null?void 0:h.className,_=typeof m=="function"?(...g)=>kg(m(...g),l.className):kg(m,l.className),v=_?{className:_}:{},b=OC(c.props,$i(Cp(l,["ref"])));for(let g in f)g in b&&delete f[g];return S.cloneElement(c,Object.assign({},b,f,u,{ref:s(t4(c),u.ref)},v))}return S.createElement(i,Object.assign({},Cp(l,["ref"]),!Wl(i)&&u,!Wl(i)&&f),c)}function X5(){let e=S.useRef([]),t=S.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function e4(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function OC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return t}function $n(e){var t;return Object.assign(S.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function $i(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Cp(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function t4(e){return ze.version.split(".")[0]>="19"?e.props.ref:e.ref}function Wl(e){return e===S.Fragment||e===Symbol.for("react.fragment")}function n4(e){return Wl(e.type)}let r4="span";var nf=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(nf||{});function s4(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return mr()({ourProps:i,theirProps:s,slot:{},defaultTag:r4,name:"Hidden"})}let Sg=$n(s4);function i4(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function di(e){return i4(e)&&"tagName"in e}function mo(e){return di(e)&&"accessKey"in e}function ti(e){return di(e)&&"tabIndex"in e}function o4(e){return di(e)&&"style"in e}function a4(e){return mo(e)&&e.nodeName==="IFRAME"}function l4(e){return mo(e)&&e.nodeName==="INPUT"}let RC=Symbol();function u4(e,t=!0){return Object.assign(e,{[RC]:t})}function Jr(...e){let t=S.useRef(e);S.useEffect(()=>{t.current=e},[e]);let n=ft(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[RC]))?void 0:n}let Tv=S.createContext(null);Tv.displayName="DescriptionContext";function IC(){let e=S.useContext(Tv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,IC),t}return e}function c4(){let[e,t]=S.useState([]);return[e.length>0?e.join(" "):void 0,S.useMemo(()=>function(n){let r=ft(i=>(t(o=>[...o,i]),()=>t(o=>{let a=o.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),s=S.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ze.createElement(Tv.Provider,{value:s},n.children)},[t])]}let d4="p";function f4(e,t){let n=S.useId(),r=J5(),{id:s=`headlessui-description-${n}`,...i}=e,o=IC(),a=Jr(t);Ln(()=>o.register(s),[s,o.register]);let l=Wu({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:s};return mr()({ourProps:u,theirProps:i,slot:l,defaultTag:d4,name:o.name||"Description"})}let h4=$n(f4),p4=Object.assign(h4,{});var DC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(DC||{});let m4=S.createContext(()=>{});function g4({value:e,children:t}){return ze.createElement(m4.Provider,{value:e},t)}let NC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var y4=Object.defineProperty,v4=(e,t,n)=>t in e?y4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w4=(e,t,n)=>(v4(e,t+"",n),n),LC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},tr=(e,t,n)=>(LC(e,t,"read from private field"),n?n.call(e):t.get(e)),Tp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Fx=(e,t,n,r)=>(LC(e,t,"write to private field"),t.set(e,n),n),Mr,El,Cl;let b4=class{constructor(t){Tp(this,Mr,{}),Tp(this,El,new NC(()=>new Set)),Tp(this,Cl,new Set),w4(this,"disposables",Ss()),Fx(this,Mr,t),Yr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return tr(this,Mr)}subscribe(t,n){if(Yr.isServer)return()=>{};let r={selector:t,callback:n,current:t(tr(this,Mr))};return tr(this,Cl).add(r),this.disposables.add(()=>{tr(this,Cl).delete(r)})}on(t,n){return Yr.isServer?()=>{}:(tr(this,El).get(t).add(n),this.disposables.add(()=>{tr(this,El).get(t).delete(n)}))}send(t){let n=this.reduce(tr(this,Mr),t);if(n!==tr(this,Mr)){Fx(this,Mr,n);for(let r of tr(this,Cl)){let s=r.selector(tr(this,Mr));$C(r.current,s)||(r.current=s,r.callback(s))}for(let r of tr(this,El).get(t.type))r(tr(this,Mr),t)}}};Mr=new WeakMap,El=new WeakMap,Cl=new WeakMap;function $C(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Pp(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Pp(e.entries(),t.entries()):Bx(e)&&Bx(t)?Pp(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Pp(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Bx(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var x4=Object.defineProperty,_4=(e,t,n)=>t in e?x4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ux=(e,t,n)=>(_4(e,typeof t!="symbol"?t+"":t,n),n),k4=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(k4||{});let S4={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},E4=class MC extends b4{constructor(){super(...arguments),Ux(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Ux(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new MC({stack:[]})}reduce(t,n){return _s(n.type,S4,t,n)}};const FC=new NC(()=>E4.new());var BC={exports:{}},UC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=S;function C4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var T4=typeof Object.is=="function"?Object.is:C4,P4=Hu.useSyncExternalStore,A4=Hu.useRef,j4=Hu.useEffect,O4=Hu.useMemo,R4=Hu.useDebugValue;UC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=A4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=O4(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),s!==void 0&&o.hasValue){var _=o.value;if(s(_,m))return f=_}return f=m}if(_=f,T4(c,m))return _;var v=r(m);return s!==void 0&&s(_,v)?(c=m,_):(c=m,f=v)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,s]);var a=P4(e,i[0],i[1]);return j4(function(){o.hasValue=!0,o.value=a},[a]),R4(a),a};BC.exports=UC;var I4=BC.exports;function zC(e,t,n=$C){return I4.useSyncExternalStoreWithSelector(ft(r=>e.subscribe(D4,r)),ft(()=>e.state),ft(()=>e.state),ft(t),n)}function D4(e){return e}function qu(e,t){let n=S.useId(),r=FC.get(t),[s,i]=zC(r,S.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Ln(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let Eg=new Map,Hl=new Map;function zx(e){var t;let n=(t=Hl.get(e))!=null?t:0;return Hl.set(e,n+1),n!==0?()=>Vx(e):(Eg.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Vx(e))}function Vx(e){var t;let n=(t=Hl.get(e))!=null?t:1;if(n===1?Hl.delete(e):Hl.set(e,n-1),n!==1)return;let r=Eg.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Eg.delete(e))}function N4(e,{allowed:t,disallowed:n}={}){let r=qu(e,"inert-others");Ln(()=>{var s,i;if(!r)return;let o=Ss();for(let l of(s=n==null?void 0:n())!=null?s:[])l&&o.add(zx(l));let a=(i=t==null?void 0:t())!=null?i:[];for(let l of a){if(!l)continue;let u=Ku(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let f of c.children)a.some(h=>f.contains(h))||o.add(zx(f));c=c.parentElement}}return o.dispose},[r,t,n])}function L4(e,t,n){let r=xo(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});S.useEffect(()=>{if(!e)return;let s=t===null?null:mo(t)?t:t.current;if(!s)return;let i=Ss();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let rf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),$4=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ls=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ls||{}),Cg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Cg||{}),M4=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(M4||{});function F4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(rf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function B4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll($4)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var VC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(VC||{});function U4(e,t=0){var n;return e===((n=Ku(e))==null?void 0:n.body)?!1:_s(t,{0(){return e.matches(rf)},1(){let r=e;for(;r!==null;){if(r.matches(rf))return!0;r=r.parentElement}return!1}})}var z4=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(z4||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function hs(e){e==null||e.focus({preventScroll:!0})}let V4=["textarea","input"].join(",");function K4(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,V4))!=null?n:!1}function W4(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ql(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?_g(e[0]):document:_g(e),o=Array.isArray(e)?n?W4(e):e:t&64?B4(e):F4(e);s.length>0&&o.length>1&&(o=o.filter(m=>!s.some(_=>_!=null&&"current"in _?(_==null?void 0:_.current)===m:_===m))),r=r??(i==null?void 0:i.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,h;do{if(c>=f||c+f<=0)return 0;let m=l+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}h=o[m],h==null||h.focus(u),c+=a}while(h!==jC(h));return t&6&&K4(h)&&h.select(),2}function KC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function H4(){return/Android/gi.test(window.navigator.userAgent)}function Kx(){return KC()||H4()}function Gc(e,t,n,r){let s=xo(n);S.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function WC(e,t,n,r){let s=xo(n);S.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Wx=30;function q4(e,t,n){let r=xo(n),s=S.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function f(h){return typeof h=="function"?f(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let f of c)if(f!==null&&(f.contains(u)||a.composed&&a.composedPath().includes(f)))return;return!U4(u,VC.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),i=S.useRef(null);Gc(e,"pointerdown",a=>{var l,u;Kx()||(i.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),Gc(e,"pointerup",a=>{if(Kx()||!i.current)return;let l=i.current;return i.current=null,s(a,()=>l)},!0);let o=S.useRef({x:0,y:0});Gc(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),Gc(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=Wx||Math.abs(l.y-o.current.y)>=Wx))return s(a,()=>ti(a.target)?a.target:null)},!0),WC(e,"blur",a=>s(a,()=>a4(window.document.activeElement)?window.document.activeElement:null),!0)}function Pv(...e){return S.useMemo(()=>Ku(...e),[...e])}function HC(e,t,n,r){let s=xo(n);S.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function G4(e){return S.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Q4(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function Y4(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function J4(){return KC()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Ss();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(ti(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);ti(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),ti(l.target)&&o4(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(ti(a.target)){if(l4(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Z4(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Hx(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Gi=Q4(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ss(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Hx(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Hx(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[J4(),Y4(),Z4()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Gi.subscribe(()=>{let e=Gi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Gi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Gi.dispatch("TEARDOWN",n)}});function X4(e,t,n=()=>({containers:[]})){let r=G4(Gi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return Ln(()=>{if(!(!t||!e))return Gi.dispatch("PUSH",t,n),()=>Gi.dispatch("POP",t,n)},[e,t]),i}function eB(e,t,n=()=>[document.body]){let r=qu(e,"scroll-lock");X4(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function tB(e=0){let[t,n]=S.useState(e),r=S.useCallback(l=>n(l),[]),s=S.useCallback(l=>n(u=>u|l),[]),i=S.useCallback(l=>(t&l)===l,[t]),o=S.useCallback(l=>n(u=>u&~l),[]),a=S.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var nB={},qx,Gx;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((qx=process==null?void 0:nB)==null?void 0:qx.NODE_ENV)==="test"&&typeof((Gx=Element==null?void 0:Element.prototype)==null?void 0:Gx.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var rB=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(rB||{});function sB(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function iB(e,t,n,r){let[s,i]=S.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=tB(e&&s?3:0),u=S.useRef(!1),c=S.useRef(!1),f=zf();return Ln(()=>{var h;if(e){if(n&&i(!0),!t){n&&a(3);return}return(h=r==null?void 0:r.start)==null||h.call(r,n),oB(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;c.current&&uB(t)||(u.current=!1,l(7),n||i(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function oB(e,{prepare:t,run:n,done:r,inFlight:s}){let i=Ss();return lB(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(aB(e,r))})}),i.dispose}function aB(e,t){var n,r;let s=Ss();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||t()}),s.dispose)}function lB(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function uB(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Av(e,t){let n=S.useRef([]),r=ft(e);S.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let a=r(t,s);return n.current=t,a}},[r,...t])}let Vf=S.createContext(null);Vf.displayName="OpenClosedContext";var Pr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Pr||{});function Kf(){return S.useContext(Vf)}function cB({value:e,children:t}){return ze.createElement(Vf.Provider,{value:e},t)}function dB({children:e}){return ze.createElement(Vf.Provider,{value:null},e)}function fB(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vs=[];fB(()=>{function e(t){if(!ti(t.target)||t.target===document.body||Vs[0]===t.target)return;let n=t.target;n=n.closest(rf),Vs.unshift(n??t.target),Vs=Vs.filter(r=>r!=null&&r.isConnected),Vs.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function qC(e){let t=ft(e),n=S.useRef(!1);S.useEffect(()=>(n.current=!1,()=>{n.current=!0,Uf(()=>{n.current&&t()})}),[t])}let GC=S.createContext(!1);function hB(){return S.useContext(GC)}function Qx(e){return ze.createElement(GC.Provider,{value:e.force},e.children)}function pB(e){let t=hB(),n=S.useContext(YC),[r,s]=S.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Yr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return S.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),S.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let QC=S.Fragment,mB=$n(function(e,t){let{ownerDocument:n=null,...r}=e,s=S.useRef(null),i=Jr(u4(h=>{s.current=h}),t),o=Pv(s.current),a=n??o,l=pB(a),u=S.useContext(Tg),c=zf(),f=mr();return qC(()=>{var h;l&&l.childNodes.length<=0&&((h=l.parentElement)==null||h.removeChild(l))}),l?Sy.createPortal(ze.createElement("div",{"data-headlessui-portal":"",ref:h=>{c.dispose(),u&&h&&c.add(u.register(h))}},f({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:QC,name:"Portal"})),l):null});function gB(e,t){let n=Jr(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=mr();return r?ze.createElement(mB,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:QC,name:"Portal"})}let yB=S.Fragment,YC=S.createContext(null);function vB(e,t){let{target:n,...r}=e,s={ref:Jr(t)},i=mr();return ze.createElement(YC.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:yB,name:"Popover.Group"}))}let Tg=S.createContext(null);function wB(){let e=S.useContext(Tg),t=S.useRef([]),n=ft(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ft(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=S.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,S.useMemo(()=>function({children:i}){return ze.createElement(Tg.Provider,{value:s},i)},[s])]}let bB=$n(gB),JC=$n(vB),xB=Object.assign(bB,{Group:JC});function _B(e,t=typeof document<"u"?document.defaultView:null,n){let r=qu(e,"escape");HC(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===DC.Escape&&n(s))})}function kB(){var e;let[t]=S.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=S.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ln(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function SB({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ft(()=>{var s,i;let o=Ku(n),a=[];for(let l of e)l!==null&&(di(l)?a.push(l):"current"in l&&di(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(s=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&di(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:ft(s=>r().some(i=>i.contains(s)))}}let ZC=S.createContext(null);function Yx({children:e,node:t}){let[n,r]=S.useState(null),s=XC(t??n);return ze.createElement(ZC.Provider,{value:s},e,s===null&&ze.createElement(Sg,{features:nf.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=Ku(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&di(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function XC(e=null){var t;return(t=S.useContext(ZC))!=null?t:e}function EB(){let e=typeof document>"u";return"useSyncExternalStore"in m0?(t=>t.useSyncExternalStore)(m0)(()=>()=>{},()=>!1,()=>!e):!1}function Wf(){let e=EB(),[t,n]=S.useState(Yr.isHandoffComplete);return t&&Yr.isHandoffComplete===!1&&n(!1),S.useEffect(()=>{t!==!0&&n(!0)},[t]),S.useEffect(()=>Yr.handoff(),[]),e?!1:t}function jv(){let e=S.useRef(!1);return Ln(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Tl=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Tl||{});function CB(){let e=S.useRef(0);return WC(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function eT(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)di(n.current)&&t.add(n.current);return t}let TB="div";var Bi=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Bi||{});function PB(e,t){let n=S.useRef(null),r=Jr(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...l}=e;Wf()||(a=0);let u=Pv(n.current);RB(a,{ownerDocument:u});let c=IB(a,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:i});DB(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let f=CB(),h=ft(y=>{if(!mo(n.current))return;let w=n.current;(C=>C())(()=>{_s(f.current,{[Tl.Forwards]:()=>{ql(w,ls.First,{skipElements:[y.relatedTarget,i]})},[Tl.Backwards]:()=>{ql(w,ls.Last,{skipElements:[y.relatedTarget,i]})}})})}),m=qu(!!(a&2),"focus-trap#tab-lock"),_=zf(),v=S.useRef(!1),b={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,_.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){if(!(a&4))return;let w=eT(o);mo(n.current)&&w.add(n.current);let C=y.relatedTarget;ti(C)&&C.dataset.headlessuiFocusGuard!=="true"&&(tT(w,C)||(v.current?ql(n.current,_s(f.current,{[Tl.Forwards]:()=>ls.Next,[Tl.Backwards]:()=>ls.Previous})|ls.WrapAround,{relativeTo:y.target}):ti(y.target)&&hs(y.target)))}},g=mr();return ze.createElement(ze.Fragment,null,m&&ze.createElement(Sg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:nf.Focusable}),g({ourProps:b,theirProps:l,defaultTag:TB,name:"FocusTrap"}),m&&ze.createElement(Sg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:nf.Focusable}))}let AB=$n(PB),jB=Object.assign(AB,{features:Bi});function OB(e=!0){let t=S.useRef(Vs.slice());return Av(([n],[r])=>{r===!0&&n===!1&&Uf(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Vs.slice())},[e,Vs,t]),ft(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function RB(e,{ownerDocument:t}){let n=!!(e&8),r=OB(n);Av(()=>{n||Q5(t==null?void 0:t.body)&&hs(r())},[n]),qC(()=>{n&&hs(r())})}function IB(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=S.useRef(null),o=qu(!!(e&1),"focus-trap#initial-focus"),a=jv();return Av(()=>{if(e===0)return;if(!o){s!=null&&s.current&&hs(s.current);return}let l=n.current;l&&Uf(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){i.current=u;return}}else if(l.contains(u)){i.current=u;return}if(r!=null&&r.current)hs(r.current);else{if(e&16){if(ql(l,ls.First|ls.AutoFocus)!==Cg.Error)return}else if(ql(l,ls.First)!==Cg.Error)return;if(s!=null&&s.current&&(hs(s.current),(t==null?void 0:t.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[s,o,e]),i}function DB(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=jv(),o=!!(e&4);HC(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!i.current)return;let l=eT(r);mo(n.current)&&l.add(n.current);let u=s.current;if(!u)return;let c=a.target;mo(c)?tT(l,c)?(s.current=c,hs(c)):(a.preventDefault(),a.stopPropagation(),hs(u)):hs(s.current)},!0)}function tT(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function nT(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Wl((t=e.as)!=null?t:sT)||ze.Children.count(e.children)===1}let Hf=S.createContext(null);Hf.displayName="TransitionContext";var NB=(e=>(e.Visible="visible",e.Hidden="hidden",e))(NB||{});function LB(){let e=S.useContext(Hf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $B(){let e=S.useContext(qf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let qf=S.createContext(null);qf.displayName="NestingContext";function Gf(e){return"children"in e?Gf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function rT(e,t){let n=xo(e),r=S.useRef([]),s=jv(),i=zf(),o=ft((m,_=ei.Hidden)=>{let v=r.current.findIndex(({el:b})=>b===m);v!==-1&&(_s(_,{[ei.Unmount](){r.current.splice(v,1)},[ei.Hidden](){r.current[v].state="hidden"}}),i.microTask(()=>{var b;!Gf(r)&&s.current&&((b=n.current)==null||b.call(n))}))}),a=ft(m=>{let _=r.current.find(({el:v})=>v===m);return _?_.state!=="visible"&&(_.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,ei.Unmount)}),l=S.useRef([]),u=S.useRef(Promise.resolve()),c=S.useRef({enter:[],leave:[]}),f=ft((m,_,v)=>{l.current.splice(0),t&&(t.chains.current[_]=t.chains.current[_].filter(([b])=>b!==m)),t==null||t.chains.current[_].push([m,new Promise(b=>{l.current.push(b)})]),t==null||t.chains.current[_].push([m,new Promise(b=>{Promise.all(c.current[_].map(([g,y])=>y)).then(()=>b())})]),_==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(_)):v(_)}),h=ft((m,_,v)=>{Promise.all(c.current[_].splice(0).map(([b,g])=>g)).then(()=>{var b;(b=l.current.shift())==null||b()}).then(()=>v(_))});return S.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:h,wait:u,chains:c}),[a,o,r,f,h,c,u])}let sT=S.Fragment,iT=tf.RenderStrategy;function MB(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:f,entered:h,leave:m,leaveFrom:_,leaveTo:v,...b}=e,[g,y]=S.useState(null),w=S.useRef(null),C=nT(e),O=Jr(...C?[w,t,y]:t===null?[]:[t]),I=(n=b.unmount)==null||n?ei.Unmount:ei.Hidden,{show:R,appear:$,initial:F}=LB(),[z,de]=S.useState(R?"visible":"hidden"),L=$B(),{register:G,unregister:A}=L;Ln(()=>G(w),[G,w]),Ln(()=>{if(I===ei.Hidden&&w.current){if(R&&z!=="visible"){de("visible");return}return _s(z,{hidden:()=>A(w),visible:()=>G(w)})}},[z,w,G,A,R,I]);let Q=Wf();Ln(()=>{if(C&&Q&&z==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,z,Q,C]);let ve=F&&!$,le=$&&R&&F,ce=S.useRef(!1),se=rT(()=>{ce.current||(de("hidden"),A(w))},L),ye=ft($e=>{ce.current=!0;let Oe=$e?"enter":"leave";se.onStart(w,Oe,me=>{me==="enter"?i==null||i():me==="leave"&&(a==null||a())})}),Z=ft($e=>{let Oe=$e?"enter":"leave";ce.current=!1,se.onStop(w,Oe,me=>{me==="enter"?o==null||o():me==="leave"&&(l==null||l())}),Oe==="leave"&&!Gf(se)&&(de("hidden"),A(w))});S.useEffect(()=>{C&&s||(ye(R),Z(R))},[R,C,s]);let X=!(!s||!C||!Q||ve),[,K]=iB(X,g,R,{start:ye,end:Z}),fe=$i({ref:O,className:((r=kg(b.className,le&&u,le&&c,K.enter&&u,K.enter&&K.closed&&c,K.enter&&!K.closed&&f,K.leave&&m,K.leave&&!K.closed&&_,K.leave&&K.closed&&v,!K.transition&&R&&h))==null?void 0:r.trim())||void 0,...sB(K)}),oe=0;z==="visible"&&(oe|=Pr.Open),z==="hidden"&&(oe|=Pr.Closed),R&&z==="hidden"&&(oe|=Pr.Opening),!R&&z==="visible"&&(oe|=Pr.Closing);let _e=mr();return ze.createElement(qf.Provider,{value:se},ze.createElement(cB,{value:oe},_e({ourProps:fe,theirProps:b,defaultTag:sT,features:iT,visible:z==="visible",name:"Transition.Child"})))}function FB(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=S.useRef(null),a=nT(e),l=Jr(...a?[o,t]:t===null?[]:[t]);Wf();let u=Kf();if(n===void 0&&u!==null&&(n=(u&Pr.Open)===Pr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,f]=S.useState(n?"visible":"hidden"),h=rT(()=>{n||f("hidden")}),[m,_]=S.useState(!0),v=S.useRef([n]);Ln(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),_(!1))},[v,n]);let b=S.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Ln(()=>{n?f("visible"):!Gf(h)&&o.current!==null&&f("hidden")},[n,h]);let g={unmount:s},y=ft(()=>{var O;m&&_(!1),(O=e.beforeEnter)==null||O.call(e)}),w=ft(()=>{var O;m&&_(!1),(O=e.beforeLeave)==null||O.call(e)}),C=mr();return ze.createElement(qf.Provider,{value:h},ze.createElement(Hf.Provider,{value:b},C({ourProps:{...g,as:S.Fragment,children:ze.createElement(oT,{ref:l,...g,...i,beforeEnter:y,beforeLeave:w})},theirProps:{},defaultTag:S.Fragment,features:iT,visible:c==="visible",name:"Transition"})))}function BB(e,t){let n=S.useContext(Hf)!==null,r=Kf()!==null;return ze.createElement(ze.Fragment,null,!n&&r?ze.createElement(Pg,{ref:t,...e}):ze.createElement(oT,{ref:t,...e}))}let Pg=$n(FB),oT=$n(MB),Ov=$n(BB),gd=Object.assign(Pg,{Child:Ov,Root:Pg});var UB=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(UB||{}),zB=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(zB||{});let VB={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Rv=S.createContext(null);Rv.displayName="DialogContext";function Qf(e){let t=S.useContext(Rv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Qf),n}return t}function KB(e,t){return _s(t.type,VB,e,t)}let Jx=$n(function(e,t){let n=S.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...f}=e,h=S.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(h.current||(h.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Kf();s===void 0&&m!==null&&(s=(m&Pr.Open)===Pr.Open);let _=S.useRef(null),v=Jr(_,t),b=Pv(_.current),g=s?0:1,[y,w]=S.useReducer(KB,{titleId:null,descriptionId:null,panelRef:S.createRef()}),C=ft(()=>i(!1)),O=ft(K=>w({type:0,id:K})),I=Wf()?g===0:!1,[R,$]=wB(),F={get current(){var K;return(K=y.panelRef.current)!=null?K:_.current}},z=XC(),{resolveContainers:de}=SB({mainTreeNode:z,portals:R,defaultContainers:[F]}),L=m!==null?(m&Pr.Closing)===Pr.Closing:!1;N4(u||L?!1:I,{allowed:ft(()=>{var K,fe;return[(fe=(K=_.current)==null?void 0:K.closest("[data-headlessui-portal]"))!=null?fe:null]}),disallowed:ft(()=>{var K;return[(K=z==null?void 0:z.closest("body > *:not(#headlessui-portal-root)"))!=null?K:null]})});let G=FC.get(null);Ln(()=>{if(I)return G.actions.push(r),()=>G.actions.pop(r)},[G,r,I]);let A=zC(G,S.useCallback(K=>G.selectors.isTop(K,r),[G,r]));q4(A,de,K=>{K.preventDefault(),C()}),_B(A,b==null?void 0:b.defaultView,K=>{K.preventDefault(),K.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),eB(u||L?!1:I,b,de),L4(I,_,C);let[Q,ve]=c4(),le=S.useMemo(()=>[{dialogState:g,close:C,setTitleId:O,unmount:c},y],[g,C,O,c,y]),ce=Wu({open:g===0}),se={ref:v,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:g===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":Q,unmount:c},ye=!kB(),Z=Bi.None;I&&!u&&(Z|=Bi.RestoreFocus,Z|=Bi.TabLock,l&&(Z|=Bi.AutoFocus),ye&&(Z|=Bi.InitialFocus));let X=mr();return ze.createElement(dB,null,ze.createElement(Qx,{force:!0},ze.createElement(xB,null,ze.createElement(Rv.Provider,{value:le},ze.createElement(JC,{target:_},ze.createElement(Qx,{force:!1},ze.createElement(ve,{slot:ce},ze.createElement($,null,ze.createElement(jB,{initialFocus:o,initialFocusFallback:_,containers:de,features:Z},ze.createElement(g4,{value:C},X({ourProps:se,theirProps:f,slot:ce,defaultTag:WB,features:HB,visible:g===0,name:"Dialog"})))))))))))}),WB="div",HB=tf.RenderStrategy|tf.Static;function qB(e,t){let{transition:n=!1,open:r,...s}=e,i=Kf(),o=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?ze.createElement(Yx,null,ze.createElement(gd,{show:r,transition:n,unmount:s.unmount},ze.createElement(Jx,{ref:t,...s}))):ze.createElement(Yx,null,ze.createElement(Jx,{ref:t,open:r,...s}))}let GB="div";function QB(e,t){let n=S.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:a},l]=Qf("Dialog.Panel"),u=Jr(t,l.panelRef),c=Wu({open:o===0}),f=ft(b=>{b.stopPropagation()}),h={ref:u,id:r,onClick:f},m=s?Ov:S.Fragment,_=s?{unmount:a}:{},v=mr();return ze.createElement(m,{..._},v({ourProps:h,theirProps:i,slot:c,defaultTag:GB,name:"Dialog.Panel"}))}let YB="div";function JB(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=Qf("Dialog.Backdrop"),o=Wu({open:s===0}),a={ref:t,"aria-hidden":!0},l=n?Ov:S.Fragment,u=n?{unmount:i}:{},c=mr();return ze.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:YB,name:"Dialog.Backdrop"}))}let ZB="h2";function XB(e,t){let n=S.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=Qf("Dialog.Title"),a=Jr(t);S.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Wu({open:i===0}),u={ref:a,id:r};return mr()({ourProps:u,theirProps:s,slot:l,defaultTag:ZB,name:"Dialog.Title"})}let eU=$n(qB),tU=$n(QB);$n(JB);let nU=$n(XB),Ap=Object.assign(eU,{Panel:tU,Title:nU,Description:p4});const rU=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r})=>{const[s,i]=S.useState(r),o=l=>{i(l.target.value)},a=()=>{n(s),t()};return k.jsx(gd,{appear:!0,show:e,as:S.Fragment,children:k.jsxs(Ap,{as:"div",className:"relative z-10",onClose:t,children:[k.jsxs(gd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})," "]}),k.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:k.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:k.jsx(gd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:k.jsxs(Ap.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[k.jsx(Ap.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),k.jsxs("div",{className:"mt-2",children:[k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"iast",checked:s==="iast",onChange:o,className:"mr-2"}),"IAST"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:s==="tamil_superscripted",onChange:o,className:"mr-2"}),"Tamil"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:s==="malayalam",onChange:o,className:"mr-2"}),"Malayalam"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:s==="devanagari",onChange:o,className:"mr-2"}),"Devanagari"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"itrans",checked:s==="itrans",onChange:o,className:"mr-2"}),"ITrans"]}),k.jsx("br",{})]}),k.jsxs("div",{className:"mt-4",children:[k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Save"})]})]})})})})]})})},sU=()=>{const[e,t]=S.useState(navigator.onLine);S.useEffect(()=>{const f=()=>t(!0),h=()=>t(!1);return window.addEventListener("online",f),window.addEventListener("offline",h),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{console.log("Service Worker is active:",m.active)}),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",h)}},[]);const{preferredLanguage:n,setPreferredLanguage:r}=bo(),[s,i]=S.useState(!1),o=()=>i(!s),[a,l]=S.useState(!1),u=()=>l(!0),c=()=>l(!1);return k.jsx(yI,{children:k.jsxs("div",{className:"app-layout",children:[" ",k.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:k.jsx(W5,{toggleDropdown:o,isDropdownOpen:s,openLanguageSettings:u})}),k.jsx(rU,{isOpen:a,onClose:c,onLanguageSave:r,currentLanguage:n}),k.jsx(xD,{children:k.jsxs(K5,{children:[k.jsx(z5,{}),k.jsx(v5,{})]})})]})})};function iU(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(f=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await Ua(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{i?i("/new-sankeertan/sw.js",f):s==null||s(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}iU();const oU=new HI({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),aU=jp.createRoot(document.getElementById("root"));aU.render(k.jsx(ze.StrictMode,{children:k.jsx(qI,{client:oU,children:k.jsx(xj,{children:k.jsx(AS,{children:k.jsx(sU,{})})})})}));
