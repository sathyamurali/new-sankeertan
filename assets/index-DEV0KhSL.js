var AT=Object.defineProperty;var c0=e=>{throw TypeError(e)};var OT=(e,t,n)=>t in e?AT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tl=(e,t,n)=>OT(e,typeof t!="symbol"?t+"":t,n),kh=(e,t,n)=>t.has(e)||c0("Cannot "+n);var H=(e,t,n)=>(kh(e,t,"read from private field"),n?n.call(e):t.get(e)),He=(e,t,n)=>t.has(e)?c0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Me=(e,t,n,r)=>(kh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ot=(e,t,n)=>(kh(e,t,"access private method"),n);var yc=(e,t,n,r)=>({set _(s){Me(e,t,s,n)},get _(){return H(e,t,r)}});function RT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var i_={exports:{}},of={},o_={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=Symbol.for("react.element"),IT=Symbol.for("react.portal"),DT=Symbol.for("react.fragment"),NT=Symbol.for("react.strict_mode"),LT=Symbol.for("react.profiler"),$T=Symbol.for("react.provider"),MT=Symbol.for("react.context"),FT=Symbol.for("react.forward_ref"),BT=Symbol.for("react.suspense"),UT=Symbol.for("react.memo"),zT=Symbol.for("react.lazy"),d0=Symbol.iterator;function VT(e){return e===null||typeof e!="object"?null:(e=d0&&e[d0]||e["@@iterator"],typeof e=="function"?e:null)}var a_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l_=Object.assign,u_={};function Da(e,t,n){this.props=e,this.context=t,this.refs=u_,this.updater=n||a_}Da.prototype.isReactComponent={};Da.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Da.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c_(){}c_.prototype=Da.prototype;function Pg(e,t,n){this.props=e,this.context=t,this.refs=u_,this.updater=n||a_}var Ag=Pg.prototype=new c_;Ag.constructor=Pg;l_(Ag,Da.prototype);Ag.isPureReactComponent=!0;var f0=Array.isArray,d_=Object.prototype.hasOwnProperty,Og={current:null},f_={key:!0,ref:!0,__self:!0,__source:!0};function h_(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)d_.call(t,r)&&!f_.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Cu,type:e,key:i,ref:o,props:s,_owner:Og.current}}function KT(e,t){return{$$typeof:Cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cu}function WT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var h0=/\/+/g;function Sh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WT(""+e.key):t.toString(36)}function Qc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Cu:case IT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Sh(o,0):r,f0(s)?(n="",e!=null&&(n=e.replace(h0,"$&/")+"/"),Qc(s,t,n,"",function(u){return u})):s!=null&&(Rg(s)&&(s=KT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(h0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",f0(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Sh(i,a);o+=Qc(i,t,n,l,s)}else if(l=VT(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Sh(i,a++),o+=Qc(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function vc(e,t,n){if(e==null)return e;var r=[],s=0;return Qc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function HT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},Yc={transition:null},qT={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Yc,ReactCurrentOwner:Og};function p_(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:vc,forEach:function(e,t,n){vc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vc(e,function(){t++}),t},toArray:function(e){return vc(e,function(t){return t})||[]},only:function(e){if(!Rg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Da;st.Fragment=DT;st.Profiler=LT;st.PureComponent=Pg;st.StrictMode=NT;st.Suspense=BT;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT;st.act=p_;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=l_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Og.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)d_.call(t,l)&&!f_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Cu,type:e.type,key:s,ref:i,props:r,_owner:o}};st.createContext=function(e){return e={$$typeof:MT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$T,_context:e},e.Consumer=e};st.createElement=h_;st.createFactory=function(e){var t=h_.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:FT,render:e}};st.isValidElement=Rg;st.lazy=function(e){return{$$typeof:zT,_payload:{_status:-1,_result:e},_init:HT}};st.memo=function(e,t){return{$$typeof:UT,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=Yc.transition;Yc.transition={};try{e()}finally{Yc.transition=t}};st.unstable_act=p_;st.useCallback=function(e,t){return _n.current.useCallback(e,t)};st.useContext=function(e){return _n.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};st.useEffect=function(e,t){return _n.current.useEffect(e,t)};st.useId=function(){return _n.current.useId()};st.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return _n.current.useMemo(e,t)};st.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};st.useRef=function(e){return _n.current.useRef(e)};st.useState=function(e){return _n.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return _n.current.useTransition()};st.version="18.3.1";o_.exports=st;var E=o_.exports;const ze=sf(E),p0=RT({__proto__:null,default:ze},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=E,QT=Symbol.for("react.element"),YT=Symbol.for("react.fragment"),JT=Object.prototype.hasOwnProperty,ZT=GT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XT={key:!0,ref:!0,__self:!0,__source:!0};function m_(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)JT.call(t,r)&&!XT.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:QT,type:e,key:i,ref:o,props:s,_owner:ZT.current}}of.Fragment=YT;of.jsx=m_;of.jsxs=m_;i_.exports=of;var k=i_.exports,Pp={},g_={exports:{}},Wn={},y_={exports:{}},v_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ce,se){var ye=ce.length;ce.push(se);e:for(;0<ye;){var J=ye-1>>>1,Z=ce[J];if(0<s(Z,se))ce[J]=se,ce[ye]=Z,ye=J;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var se=ce[0],ye=ce.pop();if(ye!==se){ce[0]=ye;e:for(var J=0,Z=ce.length,K=Z>>>1;J<K;){var de=2*(J+1)-1,oe=ce[de],_e=de+1,$e=ce[_e];if(0>s(oe,ye))_e<Z&&0>s($e,oe)?(ce[J]=$e,ce[_e]=ye,J=_e):(ce[J]=oe,ce[de]=ye,J=de);else if(_e<Z&&0>s($e,ye))ce[J]=$e,ce[_e]=ye,J=_e;else break e}}return se}function s(ce,se){var ye=ce.sortIndex-se.sortIndex;return ye!==0?ye:ce.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,_=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ce){for(var se=n(u);se!==null;){if(se.callback===null)r(u);else if(se.startTime<=ce)r(u),se.sortIndex=se.expirationTime,t(l,se);else break;se=n(u)}}function C(ce){if(v=!1,b(ce),!_)if(n(l)!==null)_=!0,be(R);else{var se=n(u);se!==null&&le(C,se.startTime-ce)}}function R(ce,se){_=!1,v&&(v=!1,g(L),L=-1),m=!0;var ye=p;try{for(b(se),f=n(l);f!==null&&(!(f.expirationTime>se)||ce&&!me());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var Z=J(f.expirationTime<=se);se=e.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(l)&&r(l),b(se)}else r(l);f=n(l)}if(f!==null)var K=!0;else{var de=n(u);de!==null&&le(C,de.startTime-se),K=!1}return K}finally{f=null,p=ye,m=!1}}var I=!1,j=null,L=-1,F=5,z=-1;function me(){return!(e.unstable_now()-z<F)}function $(){if(j!==null){var ce=e.unstable_now();z=ce;var se=!0;try{se=j(!0,ce)}finally{se?re():(I=!1,j=null)}}else I=!1}var re;if(typeof y=="function")re=function(){y($)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,G=A.port2;A.port1.onmessage=$,re=function(){G.postMessage(null)}}else re=function(){x($,0)};function be(ce){j=ce,I||(I=!0,re())}function le(ce,se){L=x(function(){ce(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){_||m||(_=!0,be(R))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ce){switch(p){case 1:case 2:case 3:var se=3;break;default:se=p}var ye=p;p=se;try{return ce()}finally{p=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,se){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ye=p;p=ce;try{return se()}finally{p=ye}},e.unstable_scheduleCallback=function(ce,se,ye){var J=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?J+ye:J):ye=J,ce){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ye+Z,ce={id:c++,callback:se,priorityLevel:ce,startTime:ye,expirationTime:Z,sortIndex:-1},ye>J?(ce.sortIndex=ye,t(u,ce),n(l)===null&&ce===n(u)&&(v?(g(L),L=-1):v=!0,le(C,ye-J))):(ce.sortIndex=Z,t(l,ce),_||m||(_=!0,be(R))),ce},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(ce){var se=p;return function(){var ye=p;p=se;try{return ce.apply(this,arguments)}finally{p=ye}}}})(v_);y_.exports=v_;var eP=y_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP=E,Vn=eP;function Ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w_=new Set,Hl={};function po(e,t){ka(e,t),ka(e+"Capture",t)}function ka(e,t){for(Hl[e]=t,e=0;e<t.length;e++)w_.add(t[e])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=Object.prototype.hasOwnProperty,nP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m0={},g0={};function rP(e){return Ap.call(g0,e)?!0:Ap.call(m0,e)?!1:nP.test(e)?g0[e]=!0:(m0[e]=!0,!1)}function sP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iP(e,t,n,r){if(t===null||typeof t>"u"||sP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kn(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var jg=/[\-:]([a-z])/g;function Ig(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jg,Ig);rn[t]=new kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jg,Ig);rn[t]=new kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jg,Ig);rn[t]=new kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new kn(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dg(e,t,n,r){var s=rn.hasOwnProperty(t)?rn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iP(t,n,s,r)&&(n=null),r||s===null?rP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ks=tP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wc=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),Ng=Symbol.for("react.strict_mode"),Op=Symbol.for("react.profiler"),b_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),Lg=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),$g=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),y0=Symbol.iterator;function nl(e){return e===null||typeof e!="object"?null:(e=y0&&e[y0]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Eh;function gl(e){if(Eh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Eh=t&&t[1]||""}return`
`+Eh+e}var Ch=!1;function Th(e,t){if(!e||Ch)return"";Ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ch=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gl(e):""}function oP(e){switch(e.tag){case 5:return gl(e.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 2:case 15:return e=Th(e.type,!1),e;case 11:return e=Th(e.type.render,!1),e;case 1:return e=Th(e.type,!0),e;default:return""}}function Ip(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case Bo:return"Portal";case Op:return"Profiler";case Ng:return"StrictMode";case Rp:return"Suspense";case jp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case x_:return(e.displayName||"Context")+".Consumer";case b_:return(e._context.displayName||"Context")+".Provider";case Lg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $g:return t=e.displayName||null,t!==null?t:Ip(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return Ip(e(t))}catch{}}return null}function aP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ip(t);case 8:return t===Ng?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function k_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lP(e){var t=k_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bc(e){e._valueTracker||(e._valueTracker=lP(e))}function S_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=k_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dp(e,t){var n=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function v0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E_(e,t){t=t.checked,t!=null&&Dg(e,"checked",t,!1)}function Np(e,t){E_(e,t);var n=fi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lp(e,t.type,fi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function w0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lp(e,t,n){(t!=="number"||yd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yl=Array.isArray;function ra(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $p(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function b0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ee(92));if(yl(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fi(n)}}function C_(e,t){var n=fi(t.value),r=fi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function x0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function T_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?T_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xc,P_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xc=xc||document.createElement("div"),xc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ql(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uP=["Webkit","ms","Moz","O"];Object.keys(Cl).forEach(function(e){uP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cl[t]=Cl[e]})});function A_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Cl.hasOwnProperty(e)&&Cl[e]?(""+t).trim():t+"px"}function O_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var cP=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(e,t){if(t){if(cP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ee(62))}}function Bp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Up=null;function Mg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zp=null,sa=null,ia=null;function _0(e){if(e=Au(e)){if(typeof zp!="function")throw Error(Ee(280));var t=e.stateNode;t&&(t=df(t),zp(e.stateNode,e.type,t))}}function R_(e){sa?ia?ia.push(e):ia=[e]:sa=e}function j_(){if(sa){var e=sa,t=ia;if(ia=sa=null,_0(e),t)for(e=0;e<t.length;e++)_0(t[e])}}function I_(e,t){return e(t)}function D_(){}var Ph=!1;function N_(e,t,n){if(Ph)return e(t,n);Ph=!0;try{return I_(e,t,n)}finally{Ph=!1,(sa!==null||ia!==null)&&(D_(),j_())}}function Gl(e,t){var n=e.stateNode;if(n===null)return null;var r=df(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ee(231,t,typeof n));return n}var Vp=!1;if(ps)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){Vp=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{Vp=!1}function dP(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Tl=!1,vd=null,wd=!1,Kp=null,fP={onError:function(e){Tl=!0,vd=e}};function hP(e,t,n,r,s,i,o,a,l){Tl=!1,vd=null,dP.apply(fP,arguments)}function pP(e,t,n,r,s,i,o,a,l){if(hP.apply(this,arguments),Tl){if(Tl){var u=vd;Tl=!1,vd=null}else throw Error(Ee(198));wd||(wd=!0,Kp=u)}}function mo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k0(e){if(mo(e)!==e)throw Error(Ee(188))}function mP(e){var t=e.alternate;if(!t){if(t=mo(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return k0(s),e;if(i===r)return k0(s),t;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?e:t}function $_(e){return e=mP(e),e!==null?M_(e):null}function M_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=M_(e);if(t!==null)return t;e=e.sibling}return null}var F_=Vn.unstable_scheduleCallback,S0=Vn.unstable_cancelCallback,gP=Vn.unstable_shouldYield,yP=Vn.unstable_requestPaint,Nt=Vn.unstable_now,vP=Vn.unstable_getCurrentPriorityLevel,Fg=Vn.unstable_ImmediatePriority,B_=Vn.unstable_UserBlockingPriority,bd=Vn.unstable_NormalPriority,wP=Vn.unstable_LowPriority,U_=Vn.unstable_IdlePriority,af=null,Wr=null;function bP(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(af,e,void 0,(e.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:kP,xP=Math.log,_P=Math.LN2;function kP(e){return e>>>=0,e===0?32:31-(xP(e)/_P|0)|0}var _c=64,kc=4194304;function vl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=vl(a):(i&=o,i!==0&&(r=vl(i)))}else o=n&~s,o!==0?r=vl(o):i!==0&&(r=vl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tr(t),s=1<<n,r|=e[n],t&=~s;return r}function SP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=SP(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Wp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function z_(){var e=_c;return _c<<=1,!(_c&4194240)&&(_c=64),e}function Ah(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tr(t),e[t]=n}function CP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Tr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Bg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var dt=0;function V_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K_,Ug,W_,H_,q_,Hp=!1,Sc=[],ni=null,ri=null,si=null,Ql=new Map,Yl=new Map,Fs=[],TP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E0(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(t.pointerId)}}function sl(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Au(t),t!==null&&Ug(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function PP(e,t,n,r,s){switch(t){case"focusin":return ni=sl(ni,e,t,n,r,s),!0;case"dragenter":return ri=sl(ri,e,t,n,r,s),!0;case"mouseover":return si=sl(si,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ql.set(i,sl(Ql.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yl.set(i,sl(Yl.get(i)||null,e,t,n,r,s)),!0}return!1}function G_(e){var t=Fi(e.target);if(t!==null){var n=mo(t);if(n!==null){if(t=n.tag,t===13){if(t=L_(n),t!==null){e.blockedOn=t,q_(e.priority,function(){W_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Up=r,n.target.dispatchEvent(r),Up=null}else return t=Au(n),t!==null&&Ug(t),e.blockedOn=n,!1;t.shift()}return!0}function C0(e,t,n){Jc(e)&&n.delete(t)}function AP(){Hp=!1,ni!==null&&Jc(ni)&&(ni=null),ri!==null&&Jc(ri)&&(ri=null),si!==null&&Jc(si)&&(si=null),Ql.forEach(C0),Yl.forEach(C0)}function il(e,t){e.blockedOn===t&&(e.blockedOn=null,Hp||(Hp=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,AP)))}function Jl(e){function t(s){return il(s,e)}if(0<Sc.length){il(Sc[0],e);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ni!==null&&il(ni,e),ri!==null&&il(ri,e),si!==null&&il(si,e),Ql.forEach(t),Yl.forEach(t),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)G_(n),n.blockedOn===null&&Fs.shift()}var oa=ks.ReactCurrentBatchConfig,_d=!0;function OP(e,t,n,r){var s=dt,i=oa.transition;oa.transition=null;try{dt=1,zg(e,t,n,r)}finally{dt=s,oa.transition=i}}function RP(e,t,n,r){var s=dt,i=oa.transition;oa.transition=null;try{dt=4,zg(e,t,n,r)}finally{dt=s,oa.transition=i}}function zg(e,t,n,r){if(_d){var s=qp(e,t,n,r);if(s===null)Fh(e,t,r,kd,n),E0(e,r);else if(PP(s,e,t,n,r))r.stopPropagation();else if(E0(e,r),t&4&&-1<TP.indexOf(e)){for(;s!==null;){var i=Au(s);if(i!==null&&K_(i),i=qp(e,t,n,r),i===null&&Fh(e,t,r,kd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fh(e,t,r,null,n)}}var kd=null;function qp(e,t,n,r){if(kd=null,e=Mg(r),e=Fi(e),e!==null)if(t=mo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=L_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kd=e,null}function Q_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vP()){case Fg:return 1;case B_:return 4;case bd:case wP:return 16;case U_:return 536870912;default:return 16}default:return 16}}var Zs=null,Vg=null,Zc=null;function Y_(){if(Zc)return Zc;var e,t=Vg,n=t.length,r,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Zc=s.slice(e,1<r?1-r:void 0)}function Xc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ec(){return!0}function T0(){return!1}function Hn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ec:T0,this.isPropagationStopped=T0,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kg=Hn(Na),Pu=Ct({},Na,{view:0,detail:0}),jP=Hn(Pu),Oh,Rh,ol,lf=Ct({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ol&&(ol&&e.type==="mousemove"?(Oh=e.screenX-ol.screenX,Rh=e.screenY-ol.screenY):Rh=Oh=0,ol=e),Oh)},movementY:function(e){return"movementY"in e?e.movementY:Rh}}),P0=Hn(lf),IP=Ct({},lf,{dataTransfer:0}),DP=Hn(IP),NP=Ct({},Pu,{relatedTarget:0}),jh=Hn(NP),LP=Ct({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),$P=Hn(LP),MP=Ct({},Na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),FP=Hn(MP),BP=Ct({},Na,{data:0}),A0=Hn(BP),UP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VP[e])?!!t[e]:!1}function Wg(){return KP}var WP=Ct({},Pu,{key:function(e){if(e.key){var t=UP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wg,charCode:function(e){return e.type==="keypress"?Xc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),HP=Hn(WP),qP=Ct({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=Hn(qP),GP=Ct({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wg}),QP=Hn(GP),YP=Ct({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),JP=Hn(YP),ZP=Ct({},lf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XP=Hn(ZP),e2=[9,13,27,32],Hg=ps&&"CompositionEvent"in window,Pl=null;ps&&"documentMode"in document&&(Pl=document.documentMode);var t2=ps&&"TextEvent"in window&&!Pl,J_=ps&&(!Hg||Pl&&8<Pl&&11>=Pl),R0=" ",j0=!1;function Z_(e,t){switch(e){case"keyup":return e2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zo=!1;function n2(e,t){switch(e){case"compositionend":return X_(t);case"keypress":return t.which!==32?null:(j0=!0,R0);case"textInput":return e=t.data,e===R0&&j0?null:e;default:return null}}function r2(e,t){if(zo)return e==="compositionend"||!Hg&&Z_(e,t)?(e=Y_(),Zc=Vg=Zs=null,zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J_&&t.locale!=="ko"?null:t.data;default:return null}}var s2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!s2[e.type]:t==="textarea"}function ek(e,t,n,r){R_(r),t=Sd(t,"onChange"),0<t.length&&(n=new Kg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Al=null,Zl=null;function i2(e){dk(e,0)}function uf(e){var t=Wo(e);if(S_(t))return e}function o2(e,t){if(e==="change")return t}var tk=!1;if(ps){var Ih;if(ps){var Dh="oninput"in document;if(!Dh){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),Dh=typeof D0.oninput=="function"}Ih=Dh}else Ih=!1;tk=Ih&&(!document.documentMode||9<document.documentMode)}function N0(){Al&&(Al.detachEvent("onpropertychange",nk),Zl=Al=null)}function nk(e){if(e.propertyName==="value"&&uf(Zl)){var t=[];ek(t,Zl,e,Mg(e)),N_(i2,t)}}function a2(e,t,n){e==="focusin"?(N0(),Al=t,Zl=n,Al.attachEvent("onpropertychange",nk)):e==="focusout"&&N0()}function l2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uf(Zl)}function u2(e,t){if(e==="click")return uf(t)}function c2(e,t){if(e==="input"||e==="change")return uf(t)}function d2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ar=typeof Object.is=="function"?Object.is:d2;function Xl(e,t){if(Ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ap.call(t,s)||!Ar(e[s],t[s]))return!1}return!0}function L0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $0(e,t){var n=L0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L0(n)}}function rk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sk(){for(var e=window,t=yd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yd(e.document)}return t}function qg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function f2(e){var t=sk(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rk(n.ownerDocument.documentElement,n)){if(r!==null&&qg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=$0(n,i);var o=$0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var h2=ps&&"documentMode"in document&&11>=document.documentMode,Vo=null,Gp=null,Ol=null,Qp=!1;function M0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qp||Vo==null||Vo!==yd(r)||(r=Vo,"selectionStart"in r&&qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ol&&Xl(Ol,r)||(Ol=r,r=Sd(Gp,"onSelect"),0<r.length&&(t=new Kg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vo)))}function Cc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ko={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Nh={},ik={};ps&&(ik=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function cf(e){if(Nh[e])return Nh[e];if(!Ko[e])return e;var t=Ko[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ik)return Nh[e]=t[n];return e}var ok=cf("animationend"),ak=cf("animationiteration"),lk=cf("animationstart"),uk=cf("transitionend"),ck=new Map,F0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){ck.set(e,t),po(t,[e])}for(var Lh=0;Lh<F0.length;Lh++){var $h=F0[Lh],p2=$h.toLowerCase(),m2=$h[0].toUpperCase()+$h.slice(1);gi(p2,"on"+m2)}gi(ok,"onAnimationEnd");gi(ak,"onAnimationIteration");gi(lk,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(uk,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g2=new Set("cancel close invalid load scroll toggle".split(" ").concat(wl));function B0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,pP(r,t,void 0,e),e.currentTarget=null}function dk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;B0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;B0(s,a,u),i=l}}}if(wd)throw e=Kp,wd=!1,Kp=null,e}function gt(e,t){var n=t[em];n===void 0&&(n=t[em]=new Set);var r=e+"__bubble";n.has(r)||(fk(t,e,2,!1),n.add(r))}function Mh(e,t,n){var r=0;t&&(r|=4),fk(n,e,r,t)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[Tc]){e[Tc]=!0,w_.forEach(function(n){n!=="selectionchange"&&(g2.has(n)||Mh(n,!1,e),Mh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tc]||(t[Tc]=!0,Mh("selectionchange",!1,t))}}function fk(e,t,n,r){switch(Q_(t)){case 1:var s=OP;break;case 4:s=RP;break;default:s=zg}n=s.bind(null,t,n,e),s=void 0,!Vp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Fh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}N_(function(){var u=i,c=Mg(n),f=[];e:{var p=ck.get(e);if(p!==void 0){var m=Kg,_=e;switch(e){case"keypress":if(Xc(n)===0)break e;case"keydown":case"keyup":m=HP;break;case"focusin":_="focus",m=jh;break;case"focusout":_="blur",m=jh;break;case"beforeblur":case"afterblur":m=jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=P0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=DP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=QP;break;case ok:case ak:case lk:m=$P;break;case uk:m=JP;break;case"scroll":m=jP;break;case"wheel":m=XP;break;case"copy":case"cut":case"paste":m=FP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O0}var v=(t&4)!==0,x=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,b;y!==null;){b=y;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,g!==null&&(C=Gl(y,g),C!=null&&v.push(tu(y,C,b)))),x)break;y=y.return}0<v.length&&(p=new m(p,_,null,n,c),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Up&&(_=n.relatedTarget||n.fromElement)&&(Fi(_)||_[ms]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Fi(_):null,_!==null&&(x=mo(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(v=P0,C="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=O0,C="onPointerLeave",g="onPointerEnter",y="pointer"),x=m==null?p:Wo(m),b=_==null?p:Wo(_),p=new v(C,y+"leave",m,n,c),p.target=x,p.relatedTarget=b,C=null,Fi(c)===u&&(v=new v(g,y+"enter",_,n,c),v.target=b,v.relatedTarget=x,C=v),x=C,m&&_)t:{for(v=m,g=_,y=0,b=v;b;b=Oo(b))y++;for(b=0,C=g;C;C=Oo(C))b++;for(;0<y-b;)v=Oo(v),y--;for(;0<b-y;)g=Oo(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Oo(v),g=Oo(g)}v=null}else v=null;m!==null&&U0(f,p,m,v,!1),_!==null&&x!==null&&U0(f,x,_,v,!0)}}e:{if(p=u?Wo(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=o2;else if(I0(p))if(tk)R=c2;else{R=l2;var I=a2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=u2);if(R&&(R=R(e,u))){ek(f,R,n,c);break e}I&&I(e,p,u),e==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Lp(p,"number",p.value)}switch(I=u?Wo(u):window,e){case"focusin":(I0(I)||I.contentEditable==="true")&&(Vo=I,Gp=u,Ol=null);break;case"focusout":Ol=Gp=Vo=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,M0(f,n,c);break;case"selectionchange":if(h2)break;case"keydown":case"keyup":M0(f,n,c)}var j;if(Hg)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else zo?Z_(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(J_&&n.locale!=="ko"&&(zo||L!=="onCompositionStart"?L==="onCompositionEnd"&&zo&&(j=Y_()):(Zs=c,Vg="value"in Zs?Zs.value:Zs.textContent,zo=!0)),I=Sd(u,L),0<I.length&&(L=new A0(L,e,null,n,c),f.push({event:L,listeners:I}),j?L.data=j:(j=X_(n),j!==null&&(L.data=j)))),(j=t2?n2(e,n):r2(e,n))&&(u=Sd(u,"onBeforeInput"),0<u.length&&(c=new A0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=j))}dk(f,t)})}function tu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sd(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gl(e,n),i!=null&&r.unshift(tu(e,i,s)),i=Gl(e,t),i!=null&&r.push(tu(e,i,s))),e=e.return}return r}function Oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function U0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Gl(n,i),l!=null&&o.unshift(tu(n,l,a))):s||(l=Gl(n,i),l!=null&&o.push(tu(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var y2=/\r\n?/g,v2=/\u0000|\uFFFD/g;function z0(e){return(typeof e=="string"?e:""+e).replace(y2,`
`).replace(v2,"")}function Pc(e,t,n){if(t=z0(t),z0(e)!==t&&n)throw Error(Ee(425))}function Ed(){}var Yp=null,Jp=null;function Zp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,w2=typeof clearTimeout=="function"?clearTimeout:void 0,V0=typeof Promise=="function"?Promise:void 0,b2=typeof queueMicrotask=="function"?queueMicrotask:typeof V0<"u"?function(e){return V0.resolve(null).then(e).catch(x2)}:Xp;function x2(e){setTimeout(function(){throw e})}function Bh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jl(t)}function ii(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function K0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var La=Math.random().toString(36).slice(2),Vr="__reactFiber$"+La,nu="__reactProps$"+La,ms="__reactContainer$"+La,em="__reactEvents$"+La,_2="__reactListeners$"+La,k2="__reactHandles$"+La;function Fi(e){var t=e[Vr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[Vr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=K0(e);e!==null;){if(n=e[Vr])return n;e=K0(e)}return t}e=n,n=e.parentNode}return null}function Au(e){return e=e[Vr]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ee(33))}function df(e){return e[nu]||null}var tm=[],Ho=-1;function yi(e){return{current:e}}function yt(e){0>Ho||(e.current=tm[Ho],tm[Ho]=null,Ho--)}function mt(e,t){Ho++,tm[Ho]=e.current,e.current=t}var hi={},mn=yi(hi),jn=yi(!1),oo=hi;function Sa(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function In(e){return e=e.childContextTypes,e!=null}function Cd(){yt(jn),yt(mn)}function W0(e,t,n){if(mn.current!==hi)throw Error(Ee(168));mt(mn,t),mt(jn,n)}function hk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Ee(108,aP(e)||"Unknown",s));return Ct({},n,r)}function Td(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,oo=mn.current,mt(mn,e),mt(jn,jn.current),!0}function H0(e,t,n){var r=e.stateNode;if(!r)throw Error(Ee(169));n?(e=hk(e,t,oo),r.__reactInternalMemoizedMergedChildContext=e,yt(jn),yt(mn),mt(mn,e)):yt(jn),mt(jn,n)}var is=null,ff=!1,Uh=!1;function pk(e){is===null?is=[e]:is.push(e)}function S2(e){ff=!0,pk(e)}function vi(){if(!Uh&&is!==null){Uh=!0;var e=0,t=dt;try{var n=is;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}is=null,ff=!1}catch(s){throw is!==null&&(is=is.slice(e+1)),F_(Fg,vi),s}finally{dt=t,Uh=!1}}return null}var qo=[],Go=0,Pd=null,Ad=0,tr=[],nr=0,ao=null,us=1,cs="";function Ri(e,t){qo[Go++]=Ad,qo[Go++]=Pd,Pd=e,Ad=t}function mk(e,t,n){tr[nr++]=us,tr[nr++]=cs,tr[nr++]=ao,ao=e;var r=us;e=cs;var s=32-Tr(r)-1;r&=~(1<<s),n+=1;var i=32-Tr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,us=1<<32-Tr(t)+s|n<<s|r,cs=i+e}else us=1<<i|n<<s|r,cs=e}function Gg(e){e.return!==null&&(Ri(e,1),mk(e,1,0))}function Qg(e){for(;e===Pd;)Pd=qo[--Go],qo[Go]=null,Ad=qo[--Go],qo[Go]=null;for(;e===ao;)ao=tr[--nr],tr[nr]=null,cs=tr[--nr],tr[nr]=null,us=tr[--nr],tr[nr]=null}var zn=null,Un=null,wt=!1,Er=null;function gk(e,t){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function q0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zn=e,Un=ii(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zn=e,Un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ao!==null?{id:us,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zn=e,Un=null,!0):!1;default:return!1}}function nm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rm(e){if(wt){var t=Un;if(t){var n=t;if(!q0(e,t)){if(nm(e))throw Error(Ee(418));t=ii(n.nextSibling);var r=zn;t&&q0(e,t)?gk(r,n):(e.flags=e.flags&-4097|2,wt=!1,zn=e)}}else{if(nm(e))throw Error(Ee(418));e.flags=e.flags&-4097|2,wt=!1,zn=e}}}function G0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zn=e}function Ac(e){if(e!==zn)return!1;if(!wt)return G0(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zp(e.type,e.memoizedProps)),t&&(t=Un)){if(nm(e))throw yk(),Error(Ee(418));for(;t;)gk(e,t),t=ii(t.nextSibling)}if(G0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Un=ii(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Un=null}}else Un=zn?ii(e.stateNode.nextSibling):null;return!0}function yk(){for(var e=Un;e;)e=ii(e.nextSibling)}function Ea(){Un=zn=null,wt=!1}function Yg(e){Er===null?Er=[e]:Er.push(e)}var E2=ks.ReactCurrentBatchConfig;function al(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,e))}return e}function Oc(e,t){throw e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Q0(e){var t=e._init;return t(e._payload)}function vk(e){function t(g,y){if(e){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=ui(g,y),g.index=0,g.sibling=null,g}function i(g,y,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,b,C){return y===null||y.tag!==6?(y=Gh(b,g.mode,C),y.return=g,y):(y=s(y,b),y.return=g,y)}function l(g,y,b,C){var R=b.type;return R===Uo?c(g,y,b.props.children,C,b.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===$s&&Q0(R)===y.type)?(C=s(y,b.props),C.ref=al(g,y,b),C.return=g,C):(C=od(b.type,b.key,b.props,null,g.mode,C),C.ref=al(g,y,b),C.return=g,C)}function u(g,y,b,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Qh(b,g.mode,C),y.return=g,y):(y=s(y,b.children||[]),y.return=g,y)}function c(g,y,b,C,R){return y===null||y.tag!==7?(y=ro(b,g.mode,C,R),y.return=g,y):(y=s(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Gh(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wc:return b=od(y.type,y.key,y.props,null,g.mode,b),b.ref=al(g,null,y),b.return=g,b;case Bo:return y=Qh(y,g.mode,b),y.return=g,y;case $s:var C=y._init;return f(g,C(y._payload),b)}if(yl(y)||nl(y))return y=ro(y,g.mode,b,null),y.return=g,y;Oc(g,y)}return null}function p(g,y,b,C){var R=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:a(g,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wc:return b.key===R?l(g,y,b,C):null;case Bo:return b.key===R?u(g,y,b,C):null;case $s:return R=b._init,p(g,y,R(b._payload),C)}if(yl(b)||nl(b))return R!==null?null:c(g,y,b,C,null);Oc(g,b)}return null}function m(g,y,b,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(b)||null,a(y,g,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case wc:return g=g.get(C.key===null?b:C.key)||null,l(y,g,C,R);case Bo:return g=g.get(C.key===null?b:C.key)||null,u(y,g,C,R);case $s:var I=C._init;return m(g,y,b,I(C._payload),R)}if(yl(C)||nl(C))return g=g.get(b)||null,c(y,g,C,R,null);Oc(y,C)}return null}function _(g,y,b,C){for(var R=null,I=null,j=y,L=y=0,F=null;j!==null&&L<b.length;L++){j.index>L?(F=j,j=null):F=j.sibling;var z=p(g,j,b[L],C);if(z===null){j===null&&(j=F);break}e&&j&&z.alternate===null&&t(g,j),y=i(z,y,L),I===null?R=z:I.sibling=z,I=z,j=F}if(L===b.length)return n(g,j),wt&&Ri(g,L),R;if(j===null){for(;L<b.length;L++)j=f(g,b[L],C),j!==null&&(y=i(j,y,L),I===null?R=j:I.sibling=j,I=j);return wt&&Ri(g,L),R}for(j=r(g,j);L<b.length;L++)F=m(j,g,L,b[L],C),F!==null&&(e&&F.alternate!==null&&j.delete(F.key===null?L:F.key),y=i(F,y,L),I===null?R=F:I.sibling=F,I=F);return e&&j.forEach(function(me){return t(g,me)}),wt&&Ri(g,L),R}function v(g,y,b,C){var R=nl(b);if(typeof R!="function")throw Error(Ee(150));if(b=R.call(b),b==null)throw Error(Ee(151));for(var I=R=null,j=y,L=y=0,F=null,z=b.next();j!==null&&!z.done;L++,z=b.next()){j.index>L?(F=j,j=null):F=j.sibling;var me=p(g,j,z.value,C);if(me===null){j===null&&(j=F);break}e&&j&&me.alternate===null&&t(g,j),y=i(me,y,L),I===null?R=me:I.sibling=me,I=me,j=F}if(z.done)return n(g,j),wt&&Ri(g,L),R;if(j===null){for(;!z.done;L++,z=b.next())z=f(g,z.value,C),z!==null&&(y=i(z,y,L),I===null?R=z:I.sibling=z,I=z);return wt&&Ri(g,L),R}for(j=r(g,j);!z.done;L++,z=b.next())z=m(j,g,L,z.value,C),z!==null&&(e&&z.alternate!==null&&j.delete(z.key===null?L:z.key),y=i(z,y,L),I===null?R=z:I.sibling=z,I=z);return e&&j.forEach(function($){return t(g,$)}),wt&&Ri(g,L),R}function x(g,y,b,C){if(typeof b=="object"&&b!==null&&b.type===Uo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case wc:e:{for(var R=b.key,I=y;I!==null;){if(I.key===R){if(R=b.type,R===Uo){if(I.tag===7){n(g,I.sibling),y=s(I,b.props.children),y.return=g,g=y;break e}}else if(I.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===$s&&Q0(R)===I.type){n(g,I.sibling),y=s(I,b.props),y.ref=al(g,I,b),y.return=g,g=y;break e}n(g,I);break}else t(g,I);I=I.sibling}b.type===Uo?(y=ro(b.props.children,g.mode,C,b.key),y.return=g,g=y):(C=od(b.type,b.key,b.props,null,g.mode,C),C.ref=al(g,y,b),C.return=g,g=C)}return o(g);case Bo:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=s(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Qh(b,g.mode,C),y.return=g,g=y}return o(g);case $s:return I=b._init,x(g,y,I(b._payload),C)}if(yl(b))return _(g,y,b,C);if(nl(b))return v(g,y,b,C);Oc(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,b),y.return=g,g=y):(n(g,y),y=Gh(b,g.mode,C),y.return=g,g=y),o(g)):n(g,y)}return x}var Ca=vk(!0),wk=vk(!1),Od=yi(null),Rd=null,Qo=null,Jg=null;function Zg(){Jg=Qo=Rd=null}function Xg(e){var t=Od.current;yt(Od),e._currentValue=t}function sm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function aa(e,t){Rd=e,Jg=Qo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(On=!0),e.firstContext=null)}function ur(e){var t=e._currentValue;if(Jg!==e)if(e={context:e,memoizedValue:t,next:null},Qo===null){if(Rd===null)throw Error(Ee(308));Qo=e,Rd.dependencies={lanes:0,firstContext:e}}else Qo=Qo.next=e;return t}var Bi=null;function ey(e){Bi===null?Bi=[e]:Bi.push(e)}function bk(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ey(t)):(n.next=s.next,s.next=n),t.interleaved=n,gs(e,r)}function gs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function ty(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,gs(e,n)}return s=r.interleaved,s===null?(t.next=t,ey(r)):(t.next=s.next,s.next=t),r.interleaved=t,gs(e,n)}function ed(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bg(e,n)}}function Y0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jd(e,t,n,r){var s=e.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=e,v=a;switch(p=t,m=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){f=_.call(m,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,p=typeof _=="function"?_.call(m,f,p):_,p==null)break e;f=Ct({},f,p);break e;case 2:Ms=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);uo|=o,e.lanes=o,e.memoizedState=f}}function J0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var Ou={},Hr=yi(Ou),ru=yi(Ou),su=yi(Ou);function Ui(e){if(e===Ou)throw Error(Ee(174));return e}function ny(e,t){switch(mt(su,t),mt(ru,e),mt(Hr,Ou),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mp(t,e)}yt(Hr),mt(Hr,t)}function Ta(){yt(Hr),yt(ru),yt(su)}function _k(e){Ui(su.current);var t=Ui(Hr.current),n=Mp(t,e.type);t!==n&&(mt(ru,e),mt(Hr,n))}function ry(e){ru.current===e&&(yt(Hr),yt(ru))}var _t=yi(0);function Id(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zh=[];function sy(){for(var e=0;e<zh.length;e++)zh[e]._workInProgressVersionPrimary=null;zh.length=0}var td=ks.ReactCurrentDispatcher,Vh=ks.ReactCurrentBatchConfig,lo=0,Et=null,Vt=null,Yt=null,Dd=!1,Rl=!1,iu=0,C2=0;function un(){throw Error(Ee(321))}function iy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}function oy(e,t,n,r,s,i){if(lo=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,td.current=e===null||e.memoizedState===null?O2:R2,e=n(r,s),Rl){i=0;do{if(Rl=!1,iu=0,25<=i)throw Error(Ee(301));i+=1,Yt=Vt=null,t.updateQueue=null,td.current=j2,e=n(r,s)}while(Rl)}if(td.current=Nd,t=Vt!==null&&Vt.next!==null,lo=0,Yt=Vt=Et=null,Dd=!1,t)throw Error(Ee(300));return e}function ay(){var e=iu!==0;return iu=0,e}function Mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Et.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function cr(){if(Vt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Yt===null?Et.memoizedState:Yt.next;if(t!==null)Yt=t,Vt=e;else{if(e===null)throw Error(Ee(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Yt===null?Et.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function ou(e,t){return typeof t=="function"?t(e):t}function Kh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=Vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((lo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Et.lanes|=c,uo|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Ar(r,t.memoizedState)||(On=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Et.lanes|=i,uo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ar(i,t.memoizedState)||(On=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function kk(){}function Sk(e,t){var n=Et,r=cr(),s=t(),i=!Ar(r.memoizedState,s);if(i&&(r.memoizedState=s,On=!0),r=r.queue,ly(Tk.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,au(9,Ck.bind(null,n,r,s,t),void 0,null),Zt===null)throw Error(Ee(349));lo&30||Ek(n,t,s)}return s}function Ek(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ck(e,t,n,r){t.value=n,t.getSnapshot=r,Pk(t)&&Ak(e)}function Tk(e,t,n){return n(function(){Pk(t)&&Ak(e)})}function Pk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ar(e,n)}catch{return!0}}function Ak(e){var t=gs(e,1);t!==null&&Pr(t,e,1,-1)}function Z0(e){var t=Mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:e},t.queue=e,e=e.dispatch=A2.bind(null,Et,e),[t.memoizedState,e]}function au(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ok(){return cr().memoizedState}function nd(e,t,n,r){var s=Mr();Et.flags|=e,s.memoizedState=au(1|t,n,void 0,r===void 0?null:r)}function hf(e,t,n,r){var s=cr();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var o=Vt.memoizedState;if(i=o.destroy,r!==null&&iy(r,o.deps)){s.memoizedState=au(t,n,i,r);return}}Et.flags|=e,s.memoizedState=au(1|t,n,i,r)}function X0(e,t){return nd(8390656,8,e,t)}function ly(e,t){return hf(2048,8,e,t)}function Rk(e,t){return hf(4,2,e,t)}function jk(e,t){return hf(4,4,e,t)}function Ik(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dk(e,t,n){return n=n!=null?n.concat([e]):null,hf(4,4,Ik.bind(null,t,e),n)}function uy(){}function Nk(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lk(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $k(e,t,n){return lo&21?(Ar(n,t)||(n=z_(),Et.lanes|=n,uo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,On=!0),e.memoizedState=n)}function T2(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=Vh.transition;Vh.transition={};try{e(!1),t()}finally{dt=n,Vh.transition=r}}function Mk(){return cr().memoizedState}function P2(e,t,n){var r=li(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fk(e))Bk(t,n);else if(n=bk(e,t,n,r),n!==null){var s=xn();Pr(n,e,r,s),Uk(n,t,r)}}function A2(e,t,n){var r=li(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fk(e))Bk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ar(a,o)){var l=t.interleaved;l===null?(s.next=s,ey(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=bk(e,t,s,r),n!==null&&(s=xn(),Pr(n,e,r,s),Uk(n,t,r))}}function Fk(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function Bk(e,t){Rl=Dd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bg(e,n)}}var Nd={readContext:ur,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},O2={readContext:ur,useCallback:function(e,t){return Mr().memoizedState=[e,t===void 0?null:t],e},useContext:ur,useEffect:X0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nd(4194308,4,Ik.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nd(4194308,4,e,t)},useInsertionEffect:function(e,t){return nd(4,2,e,t)},useMemo:function(e,t){var n=Mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=P2.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=Mr();return e={current:e},t.memoizedState=e},useState:Z0,useDebugValue:uy,useDeferredValue:function(e){return Mr().memoizedState=e},useTransition:function(){var e=Z0(!1),t=e[0];return e=T2.bind(null,e[1]),Mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,s=Mr();if(wt){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=t(),Zt===null)throw Error(Ee(349));lo&30||Ek(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,X0(Tk.bind(null,r,i,e),[e]),r.flags|=2048,au(9,Ck.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Mr(),t=Zt.identifierPrefix;if(wt){var n=cs,r=us;n=(r&~(1<<32-Tr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=iu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=C2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},R2={readContext:ur,useCallback:Nk,useContext:ur,useEffect:ly,useImperativeHandle:Dk,useInsertionEffect:Rk,useLayoutEffect:jk,useMemo:Lk,useReducer:Kh,useRef:Ok,useState:function(){return Kh(ou)},useDebugValue:uy,useDeferredValue:function(e){var t=cr();return $k(t,Vt.memoizedState,e)},useTransition:function(){var e=Kh(ou)[0],t=cr().memoizedState;return[e,t]},useMutableSource:kk,useSyncExternalStore:Sk,useId:Mk,unstable_isNewReconciler:!1},j2={readContext:ur,useCallback:Nk,useContext:ur,useEffect:ly,useImperativeHandle:Dk,useInsertionEffect:Rk,useLayoutEffect:jk,useMemo:Lk,useReducer:Wh,useRef:Ok,useState:function(){return Wh(ou)},useDebugValue:uy,useDeferredValue:function(e){var t=cr();return Vt===null?t.memoizedState=e:$k(t,Vt.memoizedState,e)},useTransition:function(){var e=Wh(ou)[0],t=cr().memoizedState;return[e,t]},useMutableSource:kk,useSyncExternalStore:Sk,useId:Mk,unstable_isNewReconciler:!1};function br(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function im(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pf={isMounted:function(e){return(e=e._reactInternals)?mo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xn(),s=li(e),i=ds(r,s);i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Pr(t,e,s,r),ed(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xn(),s=li(e),i=ds(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Pr(t,e,s,r),ed(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xn(),r=li(e),s=ds(n,r);s.tag=2,t!=null&&(s.callback=t),t=oi(e,s,r),t!==null&&(Pr(t,e,r,n),ed(t,e,r))}};function ew(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xl(n,r)||!Xl(s,i):!0}function zk(e,t,n){var r=!1,s=hi,i=t.contextType;return typeof i=="object"&&i!==null?i=ur(i):(s=In(t)?oo:mn.current,r=t.contextTypes,i=(r=r!=null)?Sa(e,s):hi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function tw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pf.enqueueReplaceState(t,t.state,null)}function om(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ty(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ur(i):(i=In(t)?oo:mn.current,s.context=Sa(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(im(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&pf.enqueueReplaceState(s,s.state,null),jd(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pa(e,t){try{var n="",r=t;do n+=oP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Hh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function am(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var I2=typeof WeakMap=="function"?WeakMap:Map;function Vk(e,t,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$d||($d=!0,ym=r),am(e,t)},n}function Kk(e,t,n){n=ds(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){am(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){am(e,t),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function nw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new I2;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=q2.bind(null,e,t,n),t.then(e,e))}function rw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sw(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ds(-1,1),t.tag=2,oi(n,t,1))),n.lanes|=1),e)}var D2=ks.ReactCurrentOwner,On=!1;function wn(e,t,n,r){t.child=e===null?wk(t,null,n,r):Ca(t,e.child,n,r)}function iw(e,t,n,r,s){n=n.render;var i=t.ref;return aa(t,s),r=oy(e,t,n,r,i,s),n=ay(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(wt&&n&&Gg(t),t.flags|=1,wn(e,t,r,s),t.child)}function ow(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!yy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Wk(e,t,i,r,s)):(e=od(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xl,n(o,r)&&e.ref===t.ref)return ys(e,t,s)}return t.flags|=1,e=ui(i,r),e.ref=t.ref,e.return=t,t.child=e}function Wk(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Xl(i,r)&&e.ref===t.ref)if(On=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(On=!0);else return t.lanes=e.lanes,ys(e,t,s)}return lm(e,t,n,r,s)}function Hk(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Jo,Bn),Bn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(Jo,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,mt(Jo,Bn),Bn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,mt(Jo,Bn),Bn|=r;return wn(e,t,s,n),t.child}function qk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lm(e,t,n,r,s){var i=In(n)?oo:mn.current;return i=Sa(t,i),aa(t,s),n=oy(e,t,n,r,i,s),r=ay(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(wt&&r&&Gg(t),t.flags|=1,wn(e,t,n,s),t.child)}function aw(e,t,n,r,s){if(In(n)){var i=!0;Td(t)}else i=!1;if(aa(t,s),t.stateNode===null)rd(e,t),zk(t,n,r),om(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ur(u):(u=In(n)?oo:mn.current,u=Sa(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&tw(t,o,r,u),Ms=!1;var p=t.memoizedState;o.state=p,jd(t,r,o,s),l=t.memoizedState,a!==r||p!==l||jn.current||Ms?(typeof c=="function"&&(im(t,n,c,r),l=t.memoizedState),(a=Ms||ew(t,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xk(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:br(t.type,a),o.props=u,f=t.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=In(n)?oo:mn.current,l=Sa(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&tw(t,o,r,l),Ms=!1,p=t.memoizedState,o.state=p,jd(t,r,o,s);var _=t.memoizedState;a!==f||p!==_||jn.current||Ms?(typeof m=="function"&&(im(t,n,m,r),_=t.memoizedState),(u=Ms||ew(t,n,u,r,p,_,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return um(e,t,n,r,i,s)}function um(e,t,n,r,s,i){qk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&H0(t,n,!1),ys(e,t,i);r=t.stateNode,D2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ca(t,e.child,null,i),t.child=Ca(t,null,a,i)):wn(e,t,a,i),t.memoizedState=r.state,s&&H0(t,n,!0),t.child}function Gk(e){var t=e.stateNode;t.pendingContext?W0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&W0(e,t.context,!1),ny(e,t.containerInfo)}function lw(e,t,n,r,s){return Ea(),Yg(s),t.flags|=256,wn(e,t,n,r),t.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function dm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qk(e,t,n){var r=t.pendingProps,s=_t.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),mt(_t,s&1),e===null)return rm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yf(o,r,0,null),e=ro(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=dm(n),t.memoizedState=cm,e):cy(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return N2(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ui(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ui(a,i):(i=ro(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?dm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=cm,r}return i=e.child,e=i.sibling,r=ui(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cy(e,t){return t=yf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rc(e,t,n,r){return r!==null&&Yg(r),Ca(t,e.child,null,n),e=cy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function N2(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Hh(Error(Ee(422))),Rc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=yf({mode:"visible",children:r.children},s,0,null),i=ro(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ca(t,e.child,null,o),t.child.memoizedState=dm(o),t.memoizedState=cm,i);if(!(t.mode&1))return Rc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=Hh(i,r,void 0),Rc(e,t,o,r)}if(a=(o&e.childLanes)!==0,On||a){if(r=Zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gs(e,s),Pr(r,e,s,-1))}return gy(),r=Hh(Error(Ee(421))),Rc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=G2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Un=ii(s.nextSibling),zn=t,wt=!0,Er=null,e!==null&&(tr[nr++]=us,tr[nr++]=cs,tr[nr++]=ao,us=e.id,cs=e.overflow,ao=t),t=cy(t,r.children),t.flags|=4096,t)}function uw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sm(e.return,t,n)}function qh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yk(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wn(e,t,r.children,n),r=_t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uw(e,n,t);else if(e.tag===19)uw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mt(_t,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Id(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Id(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qh(t,!0,n,null,i);break;case"together":qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ys(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),uo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,n=ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function L2(e,t,n){switch(t.tag){case 3:Gk(t),Ea();break;case 5:_k(t);break;case 1:In(t.type)&&Td(t);break;case 4:ny(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;mt(Od,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mt(_t,_t.current&1),t.flags|=128,null):n&t.child.childLanes?Qk(e,t,n):(mt(_t,_t.current&1),e=ys(e,t,n),e!==null?e.sibling:null);mt(_t,_t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yk(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(_t,_t.current),r)break;return null;case 22:case 23:return t.lanes=0,Hk(e,t,n)}return ys(e,t,n)}var Jk,fm,Zk,Xk;Jk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fm=function(){};Zk=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ui(Hr.current);var i=null;switch(n){case"input":s=Dp(e,s),r=Dp(e,r),i=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),i=[];break;case"textarea":s=$p(e,s),r=$p(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ed)}Fp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gt("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Xk=function(e,t,n,r){n!==r&&(t.flags|=4)};function ll(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $2(e,t,n){var r=t.pendingProps;switch(Qg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return In(t.type)&&Cd(),cn(t),null;case 3:return r=t.stateNode,Ta(),yt(jn),yt(mn),sy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ac(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(bm(Er),Er=null))),fm(e,t),cn(t),null;case 5:ry(t);var s=Ui(su.current);if(n=t.type,e!==null&&t.stateNode!=null)Zk(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ee(166));return cn(t),null}if(e=Ui(Hr.current),Ac(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vr]=t,r[nu]=i,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<wl.length;s++)gt(wl[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":v0(r,i),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},gt("invalid",r);break;case"textarea":b0(r,i),gt("invalid",r)}Fp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Pc(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Pc(r.textContent,a,e),s=["children",""+a]):Hl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":bc(r),w0(r,i,!0);break;case"textarea":bc(r),x0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ed)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=T_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Vr]=t,e[nu]=r,Jk(e,t,!1,!1),t.stateNode=e;e:{switch(o=Bp(n,r),n){case"dialog":gt("cancel",e),gt("close",e),s=r;break;case"iframe":case"object":case"embed":gt("load",e),s=r;break;case"video":case"audio":for(s=0;s<wl.length;s++)gt(wl[s],e);s=r;break;case"source":gt("error",e),s=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),s=r;break;case"details":gt("toggle",e),s=r;break;case"input":v0(e,r),s=Dp(e,r),gt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),gt("invalid",e);break;case"textarea":b0(e,r),s=$p(e,r),gt("invalid",e);break;default:s=r}Fp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?O_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&P_(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ql(e,l):typeof l=="number"&&ql(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&gt("scroll",e):l!=null&&Dg(e,i,l,o))}switch(n){case"input":bc(e),w0(e,r,!1);break;case"textarea":bc(e),x0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ra(e,!!r.multiple,i,!1):r.defaultValue!=null&&ra(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ed)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)Xk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ee(166));if(n=Ui(su.current),Ui(Hr.current),Ac(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vr]=t,(i=r.nodeValue!==n)&&(e=zn,e!==null))switch(e.tag){case 3:Pc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=t,t.stateNode=r}return cn(t),null;case 13:if(yt(_t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&Un!==null&&t.mode&1&&!(t.flags&128))yk(),Ea(),t.flags|=98560,i=!1;else if(i=Ac(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ee(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[Vr]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),i=!1}else Er!==null&&(bm(Er),Er=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_t.current&1?Wt===0&&(Wt=3):gy())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Ta(),fm(e,t),e===null&&eu(t.stateNode.containerInfo),cn(t),null;case 10:return Xg(t.type._context),cn(t),null;case 17:return In(t.type)&&Cd(),cn(t),null;case 19:if(yt(_t),i=t.memoizedState,i===null)return cn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ll(i,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Id(e),o!==null){for(t.flags|=128,ll(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mt(_t,_t.current&1|2),t.child}e=e.sibling}i.tail!==null&&Nt()>Aa&&(t.flags|=128,r=!0,ll(i,!1),t.lanes=4194304)}else{if(!r)if(e=Id(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!wt)return cn(t),null}else 2*Nt()-i.renderingStartTime>Aa&&n!==1073741824&&(t.flags|=128,r=!0,ll(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Nt(),t.sibling=null,n=_t.current,mt(_t,r?n&1|2:n&1),t):(cn(t),null);case 22:case 23:return my(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(Ee(156,t.tag))}function M2(e,t){switch(Qg(t),t.tag){case 1:return In(t.type)&&Cd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(),yt(jn),yt(mn),sy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ry(t),null;case 13:if(yt(_t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(_t),null;case 4:return Ta(),null;case 10:return Xg(t.type._context),null;case 22:case 23:return my(),null;case 24:return null;default:return null}}var jc=!1,fn=!1,F2=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Yo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(e,t,r)}else n.current=null}function hm(e,t,n){try{n()}catch(r){Ot(e,t,r)}}var cw=!1;function B2(e,t){if(Yp=_d,e=sk(),qg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===s&&(a=o),p===i&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jp={focusedElem:e,selectionRange:n},_d=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,x=_.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:br(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(C){Ot(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return _=cw,cw=!1,_}function jl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&hm(t,n,i)}s=s.next}while(s!==r)}}function mf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function e1(e){var t=e.alternate;t!==null&&(e.alternate=null,e1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vr],delete t[nu],delete t[em],delete t[_2],delete t[k2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function t1(e){return e.tag===5||e.tag===3||e.tag===4}function dw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||t1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ed));else if(r!==4&&(e=e.child,e!==null))for(mm(e,t,n),e=e.sibling;e!==null;)mm(e,t,n),e=e.sibling}function gm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gm(e,t,n),e=e.sibling;e!==null;)gm(e,t,n),e=e.sibling}var Xt=null,kr=!1;function js(e,t,n){for(n=n.child;n!==null;)n1(e,t,n),n=n.sibling}function n1(e,t,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(af,n)}catch{}switch(n.tag){case 5:fn||Yo(n,t);case 6:var r=Xt,s=kr;Xt=null,js(e,t,n),Xt=r,kr=s,Xt!==null&&(kr?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(kr?(e=Xt,n=n.stateNode,e.nodeType===8?Bh(e.parentNode,n):e.nodeType===1&&Bh(e,n),Jl(e)):Bh(Xt,n.stateNode));break;case 4:r=Xt,s=kr,Xt=n.stateNode.containerInfo,kr=!0,js(e,t,n),Xt=r,kr=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hm(n,t,o),s=s.next}while(s!==r)}js(e,t,n);break;case 1:if(!fn&&(Yo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ot(n,t,a)}js(e,t,n);break;case 21:js(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,js(e,t,n),fn=r):js(e,t,n);break;default:js(e,t,n)}}function fw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new F2),t.forEach(function(r){var s=Q2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,kr=!1;break e;case 3:Xt=a.stateNode.containerInfo,kr=!0;break e;case 4:Xt=a.stateNode.containerInfo,kr=!0;break e}a=a.return}if(Xt===null)throw Error(Ee(160));n1(i,o,s),Xt=null,kr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ot(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r1(t,e),t=t.sibling}function r1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gr(t,e),Nr(e),r&4){try{jl(3,e,e.return),mf(3,e)}catch(v){Ot(e,e.return,v)}try{jl(5,e,e.return)}catch(v){Ot(e,e.return,v)}}break;case 1:gr(t,e),Nr(e),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(gr(t,e),Nr(e),r&512&&n!==null&&Yo(n,n.return),e.flags&32){var s=e.stateNode;try{ql(s,"")}catch(v){Ot(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&E_(s,i),Bp(a,o);var u=Bp(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?O_(s,f):c==="dangerouslySetInnerHTML"?P_(s,f):c==="children"?ql(s,f):Dg(s,c,f,u)}switch(a){case"input":Np(s,i);break;case"textarea":C_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ra(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?ra(s,!!i.multiple,i.defaultValue,!0):ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[nu]=i}catch(v){Ot(e,e.return,v)}}break;case 6:if(gr(t,e),Nr(e),r&4){if(e.stateNode===null)throw Error(Ee(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Ot(e,e.return,v)}}break;case 3:if(gr(t,e),Nr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jl(t.containerInfo)}catch(v){Ot(e,e.return,v)}break;case 4:gr(t,e),Nr(e);break;case 13:gr(t,e),Nr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hy=Nt())),r&4&&fw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(u=fn)||c,gr(t,e),fn=u):gr(t,e),Nr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Be=e,c=e.child;c!==null;){for(f=Be=c;Be!==null;){switch(p=Be,m=p.child,p.tag){case 0:case 11:case 14:case 15:jl(4,p,p.return);break;case 1:Yo(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(v){Ot(r,n,v)}}break;case 5:Yo(p,p.return);break;case 22:if(p.memoizedState!==null){pw(f);continue}}m!==null?(m.return=p,Be=m):pw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=A_("display",o))}catch(v){Ot(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Ot(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gr(t,e),Nr(e),r&4&&fw(e);break;case 21:break;default:gr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(t1(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ql(s,""),r.flags&=-33);var i=dw(e);gm(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dw(e);mm(e,a,o);break;default:throw Error(Ee(161))}}catch(l){Ot(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function U2(e,t,n){Be=e,s1(e)}function s1(e,t,n){for(var r=(e.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||fn;a=jc;var u=fn;if(jc=o,(fn=l)&&!u)for(Be=s;Be!==null;)o=Be,l=o.child,o.tag===22&&o.memoizedState!==null?mw(s):l!==null?(l.return=o,Be=l):mw(s);for(;i!==null;)Be=i,s1(i),i=i.sibling;Be=s,jc=a,fn=u}hw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):hw(e)}}function hw(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||mf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:br(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&J0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}J0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Jl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}fn||t.flags&512&&pm(t)}catch(p){Ot(t,t.return,p)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function pw(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function mw(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mf(4,t)}catch(l){Ot(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){Ot(t,s,l)}}var i=t.return;try{pm(t)}catch(l){Ot(t,i,l)}break;case 5:var o=t.return;try{pm(t)}catch(l){Ot(t,o,l)}}}catch(l){Ot(t,t.return,l)}if(t===e){Be=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Be=a;break}Be=t.return}}var z2=Math.ceil,Ld=ks.ReactCurrentDispatcher,dy=ks.ReactCurrentOwner,ar=ks.ReactCurrentBatchConfig,lt=0,Zt=null,Bt=null,nn=0,Bn=0,Jo=yi(0),Wt=0,lu=null,uo=0,gf=0,fy=0,Il=null,Pn=null,hy=0,Aa=1/0,rs=null,$d=!1,ym=null,ai=null,Ic=!1,Xs=null,Md=0,Dl=0,vm=null,sd=-1,id=0;function xn(){return lt&6?Nt():sd!==-1?sd:sd=Nt()}function li(e){return e.mode&1?lt&2&&nn!==0?nn&-nn:E2.transition!==null?(id===0&&(id=z_()),id):(e=dt,e!==0||(e=window.event,e=e===void 0?16:Q_(e.type)),e):1}function Pr(e,t,n,r){if(50<Dl)throw Dl=0,vm=null,Error(Ee(185));Tu(e,n,r),(!(lt&2)||e!==Zt)&&(e===Zt&&(!(lt&2)&&(gf|=n),Wt===4&&Bs(e,nn)),Dn(e,r),n===1&&lt===0&&!(t.mode&1)&&(Aa=Nt()+500,ff&&vi()))}function Dn(e,t){var n=e.callbackNode;EP(e,t);var r=xd(e,e===Zt?nn:0);if(r===0)n!==null&&S0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&S0(n),t===1)e.tag===0?S2(gw.bind(null,e)):pk(gw.bind(null,e)),b2(function(){!(lt&6)&&vi()}),n=null;else{switch(V_(r)){case 1:n=Fg;break;case 4:n=B_;break;case 16:n=bd;break;case 536870912:n=U_;break;default:n=bd}n=f1(n,i1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function i1(e,t){if(sd=-1,id=0,lt&6)throw Error(Ee(327));var n=e.callbackNode;if(la()&&e.callbackNode!==n)return null;var r=xd(e,e===Zt?nn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fd(e,r);else{t=r;var s=lt;lt|=2;var i=a1();(Zt!==e||nn!==t)&&(rs=null,Aa=Nt()+500,no(e,t));do try{W2();break}catch(a){o1(e,a)}while(!0);Zg(),Ld.current=i,lt=s,Bt!==null?t=0:(Zt=null,nn=0,t=Wt)}if(t!==0){if(t===2&&(s=Wp(e),s!==0&&(r=s,t=wm(e,s))),t===1)throw n=lu,no(e,0),Bs(e,r),Dn(e,Nt()),n;if(t===6)Bs(e,r);else{if(s=e.current.alternate,!(r&30)&&!V2(s)&&(t=Fd(e,r),t===2&&(i=Wp(e),i!==0&&(r=i,t=wm(e,i))),t===1))throw n=lu,no(e,0),Bs(e,r),Dn(e,Nt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Ee(345));case 2:ji(e,Pn,rs);break;case 3:if(Bs(e,r),(r&130023424)===r&&(t=hy+500-Nt(),10<t)){if(xd(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){xn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Xp(ji.bind(null,e,Pn,rs),t);break}ji(e,Pn,rs);break;case 4:if(Bs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Tr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z2(r/1960))-r,10<r){e.timeoutHandle=Xp(ji.bind(null,e,Pn,rs),r);break}ji(e,Pn,rs);break;case 5:ji(e,Pn,rs);break;default:throw Error(Ee(329))}}}return Dn(e,Nt()),e.callbackNode===n?i1.bind(null,e):null}function wm(e,t){var n=Il;return e.current.memoizedState.isDehydrated&&(no(e,t).flags|=256),e=Fd(e,t),e!==2&&(t=Pn,Pn=n,t!==null&&bm(t)),e}function bm(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function V2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ar(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~fy,t&=~gf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tr(t),r=1<<n;e[n]=-1,t&=~r}}function gw(e){if(lt&6)throw Error(Ee(327));la();var t=xd(e,0);if(!(t&1))return Dn(e,Nt()),null;var n=Fd(e,t);if(e.tag!==0&&n===2){var r=Wp(e);r!==0&&(t=r,n=wm(e,r))}if(n===1)throw n=lu,no(e,0),Bs(e,t),Dn(e,Nt()),n;if(n===6)throw Error(Ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ji(e,Pn,rs),Dn(e,Nt()),null}function py(e,t){var n=lt;lt|=1;try{return e(t)}finally{lt=n,lt===0&&(Aa=Nt()+500,ff&&vi())}}function co(e){Xs!==null&&Xs.tag===0&&!(lt&6)&&la();var t=lt;lt|=1;var n=ar.transition,r=dt;try{if(ar.transition=null,dt=1,e)return e()}finally{dt=r,ar.transition=n,lt=t,!(lt&6)&&vi()}}function my(){Bn=Jo.current,yt(Jo)}function no(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,w2(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(Qg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cd();break;case 3:Ta(),yt(jn),yt(mn),sy();break;case 5:ry(r);break;case 4:Ta();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:Xg(r.type._context);break;case 22:case 23:my()}n=n.return}if(Zt=e,Bt=e=ui(e.current,null),nn=Bn=t,Wt=0,lu=null,fy=gf=uo=0,Pn=Il=null,Bi!==null){for(t=0;t<Bi.length;t++)if(n=Bi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Bi=null}return e}function o1(e,t){do{var n=Bt;try{if(Zg(),td.current=Nd,Dd){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dd=!1}if(lo=0,Yt=Vt=Et=null,Rl=!1,iu=0,dy.current=null,n===null||n.return===null){Wt=1,lu=t,Bt=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=rw(o);if(m!==null){m.flags&=-257,sw(m,o,a,i,t),m.mode&1&&nw(i,u,t),t=m,l=u;var _=t.updateQueue;if(_===null){var v=new Set;v.add(l),t.updateQueue=v}else _.add(l);break e}else{if(!(t&1)){nw(i,u,t),gy();break e}l=Error(Ee(426))}}else if(wt&&a.mode&1){var x=rw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),sw(x,o,a,i,t),Yg(Pa(l,a));break e}}i=l=Pa(l,a),Wt!==4&&(Wt=2),Il===null?Il=[i]:Il.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Vk(i,l,t);Y0(i,g);break e;case 1:a=l;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ai===null||!ai.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Kk(i,a,t);Y0(i,C);break e}}i=i.return}while(i!==null)}u1(n)}catch(R){t=R,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function a1(){var e=Ld.current;return Ld.current=Nd,e===null?Nd:e}function gy(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Zt===null||!(uo&268435455)&&!(gf&268435455)||Bs(Zt,nn)}function Fd(e,t){var n=lt;lt|=2;var r=a1();(Zt!==e||nn!==t)&&(rs=null,no(e,t));do try{K2();break}catch(s){o1(e,s)}while(!0);if(Zg(),lt=n,Ld.current=r,Bt!==null)throw Error(Ee(261));return Zt=null,nn=0,Wt}function K2(){for(;Bt!==null;)l1(Bt)}function W2(){for(;Bt!==null&&!gP();)l1(Bt)}function l1(e){var t=d1(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?u1(e):Bt=t,dy.current=null}function u1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=M2(n,t),n!==null){n.flags&=32767,Bt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,Bt=null;return}}else if(n=$2(n,t,Bn),n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Wt===0&&(Wt=5)}function ji(e,t,n){var r=dt,s=ar.transition;try{ar.transition=null,dt=1,H2(e,t,n,r)}finally{ar.transition=s,dt=r}return null}function H2(e,t,n,r){do la();while(Xs!==null);if(lt&6)throw Error(Ee(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ee(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(CP(e,i),e===Zt&&(Bt=Zt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ic||(Ic=!0,f1(bd,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var o=dt;dt=1;var a=lt;lt|=4,dy.current=null,B2(e,n),r1(n,e),f2(Jp),_d=!!Yp,Jp=Yp=null,e.current=n,U2(n),yP(),lt=a,dt=o,ar.transition=i}else e.current=n;if(Ic&&(Ic=!1,Xs=e,Md=s),i=e.pendingLanes,i===0&&(ai=null),bP(n.stateNode),Dn(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($d)throw $d=!1,e=ym,ym=null,e;return Md&1&&e.tag!==0&&la(),i=e.pendingLanes,i&1?e===vm?Dl++:(Dl=0,vm=e):Dl=0,vi(),null}function la(){if(Xs!==null){var e=V_(Md),t=ar.transition,n=dt;try{if(ar.transition=null,dt=16>e?16:e,Xs===null)var r=!1;else{if(e=Xs,Xs=null,Md=0,lt&6)throw Error(Ee(331));var s=lt;for(lt|=4,Be=e.current;Be!==null;){var i=Be,o=i.child;if(Be.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Be=u;Be!==null;){var c=Be;switch(c.tag){case 0:case 11:case 15:jl(8,c,i)}var f=c.child;if(f!==null)f.return=c,Be=f;else for(;Be!==null;){c=Be;var p=c.sibling,m=c.return;if(e1(c),c===u){Be=null;break}if(p!==null){p.return=m,Be=p;break}Be=m}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Be=o;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jl(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Be=g;break e}Be=i.return}}var y=e.current;for(Be=y;Be!==null;){o=Be;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Be=b;else e:for(o=y;Be!==null;){if(a=Be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mf(9,a)}}catch(R){Ot(a,a.return,R)}if(a===o){Be=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Be=C;break e}Be=a.return}}if(lt=s,vi(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(af,e)}catch{}r=!0}return r}finally{dt=n,ar.transition=t}}return!1}function yw(e,t,n){t=Pa(n,t),t=Vk(e,t,1),e=oi(e,t,1),t=xn(),e!==null&&(Tu(e,1,t),Dn(e,t))}function Ot(e,t,n){if(e.tag===3)yw(e,e,n);else for(;t!==null;){if(t.tag===3){yw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){e=Pa(n,e),e=Kk(t,e,1),t=oi(t,e,1),e=xn(),t!==null&&(Tu(t,1,e),Dn(t,e));break}}t=t.return}}function q2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xn(),e.pingedLanes|=e.suspendedLanes&n,Zt===e&&(nn&n)===n&&(Wt===4||Wt===3&&(nn&130023424)===nn&&500>Nt()-hy?no(e,0):fy|=n),Dn(e,t)}function c1(e,t){t===0&&(e.mode&1?(t=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):t=1);var n=xn();e=gs(e,t),e!==null&&(Tu(e,t,n),Dn(e,n))}function G2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),c1(e,n)}function Q2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(t),c1(e,n)}var d1;d1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jn.current)On=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return On=!1,L2(e,t,n);On=!!(e.flags&131072)}else On=!1,wt&&t.flags&1048576&&mk(t,Ad,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rd(e,t),e=t.pendingProps;var s=Sa(t,mn.current);aa(t,n),s=oy(null,t,r,e,s,n);var i=ay();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(i=!0,Td(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ty(t),s.updater=pf,t.stateNode=s,s._reactInternals=t,om(t,r,e,n),t=um(null,t,r,!0,i,n)):(t.tag=0,wt&&i&&Gg(t),wn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=J2(r),e=br(r,e),s){case 0:t=lm(null,t,r,e,n);break e;case 1:t=aw(null,t,r,e,n);break e;case 11:t=iw(null,t,r,e,n);break e;case 14:t=ow(null,t,r,br(r.type,e),n);break e}throw Error(Ee(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),lm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),aw(e,t,r,s,n);case 3:e:{if(Gk(t),e===null)throw Error(Ee(387));r=t.pendingProps,i=t.memoizedState,s=i.element,xk(e,t),jd(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Pa(Error(Ee(423)),t),t=lw(e,t,r,n,s);break e}else if(r!==s){s=Pa(Error(Ee(424)),t),t=lw(e,t,r,n,s);break e}else for(Un=ii(t.stateNode.containerInfo.firstChild),zn=t,wt=!0,Er=null,n=wk(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),r===s){t=ys(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return _k(t),e===null&&rm(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Zp(r,s)?o=null:i!==null&&Zp(r,i)&&(t.flags|=32),qk(e,t),wn(e,t,o,n),t.child;case 6:return e===null&&rm(t),null;case 13:return Qk(e,t,n);case 4:return ny(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ca(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),iw(e,t,r,s,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,mt(Od,r._currentValue),r._currentValue=o,i!==null)if(Ar(i.value,o)){if(i.children===s.children&&!jn.current){t=ys(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ds(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),sm(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sm(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,aa(t,n),s=ur(s),r=r(s),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,s=br(r,t.pendingProps),s=br(r.type,s),ow(e,t,r,s,n);case 15:return Wk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),rd(e,t),t.tag=1,In(r)?(e=!0,Td(t)):e=!1,aa(t,n),zk(t,r,s),om(t,r,s,n),um(null,t,r,!0,e,n);case 19:return Yk(e,t,n);case 22:return Hk(e,t,n)}throw Error(Ee(156,t.tag))};function f1(e,t){return F_(e,t)}function Y2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,n,r){return new Y2(e,t,n,r)}function yy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function J2(e){if(typeof e=="function")return yy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Lg)return 11;if(e===$g)return 14}return 2}function ui(e,t){var n=e.alternate;return n===null?(n=ir(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function od(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")yy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Uo:return ro(n.children,s,i,t);case Ng:o=8,s|=8;break;case Op:return e=ir(12,n,t,s|2),e.elementType=Op,e.lanes=i,e;case Rp:return e=ir(13,n,t,s),e.elementType=Rp,e.lanes=i,e;case jp:return e=ir(19,n,t,s),e.elementType=jp,e.lanes=i,e;case __:return yf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b_:o=10;break e;case x_:o=9;break e;case Lg:o=11;break e;case $g:o=14;break e;case $s:o=16,r=null;break e}throw Error(Ee(130,e==null?e:typeof e,""))}return t=ir(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ro(e,t,n,r){return e=ir(7,e,r,t),e.lanes=n,e}function yf(e,t,n,r){return e=ir(22,e,r,t),e.elementType=__,e.lanes=n,e.stateNode={isHidden:!1},e}function Gh(e,t,n){return e=ir(6,e,null,t),e.lanes=n,e}function Qh(e,t,n){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Z2(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vy(e,t,n,r,s,i,o,a,l){return e=new Z2(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ir(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ty(i),e}function X2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function h1(e){if(!e)return hi;e=e._reactInternals;e:{if(mo(e)!==e||e.tag!==1)throw Error(Ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ee(171))}if(e.tag===1){var n=e.type;if(In(n))return hk(e,n,t)}return t}function p1(e,t,n,r,s,i,o,a,l){return e=vy(n,r,!0,e,s,i,o,a,l),e.context=h1(null),n=e.current,r=xn(),s=li(n),i=ds(r,s),i.callback=t??null,oi(n,i,s),e.current.lanes=s,Tu(e,s,r),Dn(e,r),e}function vf(e,t,n,r){var s=t.current,i=xn(),o=li(s);return n=h1(n),t.context===null?t.context=n:t.pendingContext=n,t=ds(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=oi(s,t,o),e!==null&&(Pr(e,s,o,i),ed(e,s,o)),o}function Bd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wy(e,t){vw(e,t),(e=e.alternate)&&vw(e,t)}function eA(){return null}var m1=typeof reportError=="function"?reportError:function(e){console.error(e)};function by(e){this._internalRoot=e}wf.prototype.render=by.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));vf(e,t,null,null)};wf.prototype.unmount=by.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;co(function(){vf(null,e,null,null)}),t[ms]=null}};function wf(e){this._internalRoot=e}wf.prototype.unstable_scheduleHydration=function(e){if(e){var t=H_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fs.length&&t!==0&&t<Fs[n].priority;n++);Fs.splice(n,0,e),n===0&&G_(e)}};function xy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ww(){}function tA(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Bd(o);i.call(u)}}var o=p1(t,r,e,0,null,!1,!1,"",ww);return e._reactRootContainer=o,e[ms]=o.current,eu(e.nodeType===8?e.parentNode:e),co(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Bd(l);a.call(u)}}var l=vy(e,0,!1,null,null,!1,!1,"",ww);return e._reactRootContainer=l,e[ms]=l.current,eu(e.nodeType===8?e.parentNode:e),co(function(){vf(t,l,n,r)}),l}function xf(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Bd(o);a.call(l)}}vf(t,o,e,s)}else o=tA(n,t,e,s,r);return Bd(o)}K_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vl(t.pendingLanes);n!==0&&(Bg(t,n|1),Dn(t,Nt()),!(lt&6)&&(Aa=Nt()+500,vi()))}break;case 13:co(function(){var r=gs(e,1);if(r!==null){var s=xn();Pr(r,e,1,s)}}),wy(e,1)}};Ug=function(e){if(e.tag===13){var t=gs(e,134217728);if(t!==null){var n=xn();Pr(t,e,134217728,n)}wy(e,134217728)}};W_=function(e){if(e.tag===13){var t=li(e),n=gs(e,t);if(n!==null){var r=xn();Pr(n,e,t,r)}wy(e,t)}};H_=function(){return dt};q_=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};zp=function(e,t,n){switch(t){case"input":if(Np(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=df(r);if(!s)throw Error(Ee(90));S_(r),Np(r,s)}}}break;case"textarea":C_(e,n);break;case"select":t=n.value,t!=null&&ra(e,!!n.multiple,t,!1)}};I_=py;D_=co;var nA={usingClientEntryPoint:!1,Events:[Au,Wo,df,R_,j_,py]},ul={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rA={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$_(e),e===null?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||eA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{af=Dc.inject(rA),Wr=Dc}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nA;Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xy(t))throw Error(Ee(200));return X2(e,t,null,n)};Wn.createRoot=function(e,t){if(!xy(e))throw Error(Ee(299));var n=!1,r="",s=m1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vy(e,1,!1,null,null,n,!1,r,s),e[ms]=t.current,eu(e.nodeType===8?e.parentNode:e),new by(t)};Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=$_(t),e=e===null?null:e.stateNode,e};Wn.flushSync=function(e){return co(e)};Wn.hydrate=function(e,t,n){if(!bf(t))throw Error(Ee(200));return xf(null,e,t,!0,n)};Wn.hydrateRoot=function(e,t,n){if(!xy(e))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=m1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=p1(t,null,e,1,n??null,s,!1,i,o),e[ms]=t.current,eu(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new wf(t)};Wn.render=function(e,t,n){if(!bf(t))throw Error(Ee(200));return xf(null,e,t,!1,n)};Wn.unmountComponentAtNode=function(e){if(!bf(e))throw Error(Ee(40));return e._reactRootContainer?(co(function(){xf(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Wn.unstable_batchedUpdates=py;Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bf(n))throw Error(Ee(200));if(e==null||e._reactInternals===void 0)throw Error(Ee(38));return xf(e,t,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function g1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g1)}catch(e){console.error(e)}}g1(),g_.exports=Wn;var _y=g_.exports;const sA=sf(_y);var bw=_y;Pp.createRoot=bw.createRoot,Pp.hydrateRoot=bw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xw="popstate";function iA(e={}){function t(s,i){let{pathname:o="/",search:a="",hash:l=""}=go(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),xm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:uu(i))}function r(s,i){Kn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return aA(t,n,r,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oA(){return Math.random().toString(36).substring(2,10)}function _w(e,t){return{usr:e.state,key:e.key,idx:t}}function xm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?go(t):t,state:n,key:t&&t.key||r||oA()}}function uu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function go(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function aA(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let x=c(),g=x==null?null:x-u;u=x,l&&l({action:a,location:v.location,delta:g})}function p(x,g){a="PUSH";let y=xm(v.location,x,g);n&&n(y,x),u=c()+1;let b=_w(y,u),C=v.createHref(y);try{o.pushState(b,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function m(x,g){a="REPLACE";let y=xm(v.location,x,g);n&&n(y,x),u=c();let b=_w(y,u),C=v.createHref(y);o.replaceState(b,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function _(x){return lA(x)}let v={get action(){return a},get location(){return e(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(xw,f),l=x,()=>{s.removeEventListener(xw,f),l=null}},createHref(x){return t(s,x)},createURL:_,encodeLocation(x){let g=_(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return v}function lA(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:uu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function y1(e,t,n="/"){return uA(e,t,n,!1)}function uA(e,t,n,r){let s=typeof t=="string"?go(t):t,i=vs(s.pathname||"/",n);if(i==null)return null;let o=v1(e);cA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=xA(i);a=wA(o[l],u,r)}return a}function v1(e,t=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;xt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let f=fs([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),v1(o.children,t,p,f,l)),!(o.path==null&&!o.index)&&t.push({path:f,score:yA(f,o.index),routesMeta:p})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of w1(o.path))i(o,a,!0,u)}),t}function w1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=w1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function cA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var dA=/^:[\w-]+$/,fA=3,hA=2,pA=1,mA=10,gA=-2,kw=e=>e==="*";function yA(e,t){let n=e.split("/"),r=n.length;return n.some(kw)&&(r+=gA),t&&(r+=hA),n.filter(s=>!kw(s)).reduce((s,i)=>s+(dA.test(i)?fA:i===""?pA:mA),r)}function vA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function wA(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=Ud({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Ud({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:fs([i,f.pathname]),pathnameBase:EA(fs([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=fs([i,f.pathnameBase]))}return o}function Ud(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=bA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},p)=>{if(c==="*"){let _=a[p]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function bA(e,t=!1,n=!0){Kn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function xA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function _A(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?go(e):e;return{pathname:n?n.startsWith("/")?n:kA(n,t):t,search:CA(r),hash:TA(s)}}function kA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ky(e){let t=SA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Sy(e,t,n,r=!1){let s;typeof e=="string"?s=go(e):(s={...e},xt(!s.pathname||!s.pathname.includes("?"),Yh("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Yh("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Yh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=_A(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var fs=e=>e.join("/").replace(/\/\/+/g,"/"),EA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function PA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var b1=["POST","PUT","PATCH","DELETE"];new Set(b1);var AA=["GET",...b1];new Set(AA);var $a=E.createContext(null);$a.displayName="DataRouter";var _f=E.createContext(null);_f.displayName="DataRouterState";E.createContext(!1);var x1=E.createContext({isTransitioning:!1});x1.displayName="ViewTransition";var OA=E.createContext(new Map);OA.displayName="Fetchers";var RA=E.createContext(null);RA.displayName="Await";var Or=E.createContext(null);Or.displayName="Navigation";var Ru=E.createContext(null);Ru.displayName="Location";var Rr=E.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var Ey=E.createContext(null);Ey.displayName="RouteError";function jA(e,{relative:t}={}){xt(Ma(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=E.useContext(Or),{hash:s,pathname:i,search:o}=Iu(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:fs([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Ma(){return E.useContext(Ru)!=null}function dr(){return xt(Ma(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ru).location}var _1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k1(e){E.useContext(Or).static||E.useLayoutEffect(e)}function fr(){let{isDataRoute:e}=E.useContext(Rr);return e?WA():IA()}function IA(){xt(Ma(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext($a),{basename:t,navigator:n}=E.useContext(Or),{matches:r}=E.useContext(Rr),{pathname:s}=dr(),i=JSON.stringify(ky(r)),o=E.useRef(!1);return k1(()=>{o.current=!0}),E.useCallback((l,u={})=>{if(Kn(o.current,_1),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Sy(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:fs([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}E.createContext(null);function ju(){let{matches:e}=E.useContext(Rr),t=e[e.length-1];return t?t.params:{}}function Iu(e,{relative:t}={}){let{matches:n}=E.useContext(Rr),{pathname:r}=dr(),s=JSON.stringify(ky(n));return E.useMemo(()=>Sy(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function DA(e,t){return S1(e,t)}function S1(e,t,n,r,s){var y;xt(Ma(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=E.useContext(Or),{matches:o}=E.useContext(Rr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let b=f&&f.path||"";E1(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let p=dr(),m;if(t){let b=typeof t=="string"?go(t):t;xt(c==="/"||((y=b.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=p;let _=m.pathname||"/",v=_;if(c!=="/"){let b=c.replace(/^\//,"").split("/");v="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=y1(e,{pathname:v});Kn(f||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Kn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=FA(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:fs([c,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:fs([c,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,n,r,s);return t&&g?E.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function NA(){let e=KA(),t=PA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:i},"ErrorBoundary")," or"," ",E.createElement("code",{style:i},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:s},n):null,o)}var LA=E.createElement(NA,null),$A=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?E.createElement(Rr.Provider,{value:this.props.routeContext},E.createElement(Ey.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MA({routeContext:e,match:t,children:n}){let r=E.useContext($a);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Rr.Provider,{value:e},n)}function FA(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);xt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:f,errors:p}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,f)=>{let p,m=!1,_=null,v=null;n&&(p=o&&c.route.id?o[c.route.id]:void 0,_=c.route.errorElement||LA,a&&(l<0&&f===0?(E1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=c.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,f+1)),g=()=>{let y;return p?y=_:m?y=v:c.route.Component?y=E.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,E.createElement(MA,{match:c,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?E.createElement($A,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:r}):g()},null)}function Cy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BA(e){let t=E.useContext($a);return xt(t,Cy(e)),t}function UA(e){let t=E.useContext(_f);return xt(t,Cy(e)),t}function zA(e){let t=E.useContext(Rr);return xt(t,Cy(e)),t}function Ty(e){let t=zA(e),n=t.matches[t.matches.length-1];return xt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function VA(){return Ty("useRouteId")}function KA(){var r;let e=E.useContext(Ey),t=UA("useRouteError"),n=Ty("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function WA(){let{router:e}=BA("useNavigate"),t=Ty("useNavigate"),n=E.useRef(!1);return k1(()=>{n.current=!0}),E.useCallback(async(s,i={})=>{Kn(n.current,_1),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Sw={};function E1(e,t,n){!t&&!Sw[e]&&(Sw[e]=!0,Kn(!1,n))}E.memo(HA);function HA({routes:e,future:t,state:n,unstable_onError:r}){return S1(e,void 0,n,r,t)}function C1({to:e,replace:t,state:n,relative:r}){xt(Ma(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(Or);Kn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=E.useContext(Rr),{pathname:o}=dr(),a=fr(),l=Sy(e,ky(i),o,r==="path"),u=JSON.stringify(l);return E.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function dn(e){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){xt(!Ma(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=go(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:p="default"}=n,m=E.useMemo(()=>{let _=vs(l,o);return _==null?null:{location:{pathname:_,search:u,hash:c,state:f,key:p},navigationType:r}},[o,l,u,c,f,p,r]);return Kn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:E.createElement(Or.Provider,{value:a},E.createElement(Ru.Provider,{children:t,value:m}))}function GA({children:e,location:t}){return DA(_m(e),t)}function _m(e,t=[]){let n=[];return E.Children.forEach(e,(r,s)=>{if(!E.isValidElement(r))return;let i=[...t,s];if(r.type===E.Fragment){n.push.apply(n,_m(r.props.children,i));return}xt(r.type===dn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_m(r.props.children,i)),n.push(o)}),n}var ad="get",ld="application/x-www-form-urlencoded";function kf(e){return e!=null&&typeof e.tagName=="string"}function QA(e){return kf(e)&&e.tagName.toLowerCase()==="button"}function YA(e){return kf(e)&&e.tagName.toLowerCase()==="form"}function JA(e){return kf(e)&&e.tagName.toLowerCase()==="input"}function ZA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XA(e,t){return e.button===0&&(!t||t==="_self")&&!ZA(e)}function km(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function eO(e,t){let n=km(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Nc=null;function tO(){if(Nc===null)try{new FormData(document.createElement("form"),0),Nc=!1}catch{Nc=!0}return Nc}var nO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jh(e){return e!=null&&!nO.has(e)?(Kn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):e}function rO(e,t){let n,r,s,i,o;if(YA(e)){let a=e.getAttribute("action");r=a?vs(a,t):null,n=e.getAttribute("method")||ad,s=Jh(e.getAttribute("enctype"))||ld,i=new FormData(e)}else if(QA(e)||JA(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?vs(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ad,s=Jh(e.getAttribute("formenctype"))||Jh(a.getAttribute("enctype"))||ld,i=new FormData(a,e),!tO()){let{name:u,type:c,value:f}=e;if(c==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,f)}}else{if(kf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ad,r=null,s=ld,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Py(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sO(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&vs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function iO(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oO(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function aO(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await iO(i,n);return o.links?o.links():[]}return[]}));return dO(r.flat(1).filter(oO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ew(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function lO(e,t,{includeHydrateFallback:n}={}){return uO(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function uO(e){return[...new Set(e)]}function cO(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function dO(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(cO(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function T1(){let e=E.useContext($a);return Py(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function fO(){let e=E.useContext(_f);return Py(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ay=E.createContext(void 0);Ay.displayName="FrameworkContext";function P1(){let e=E.useContext(Ay);return Py(e,"You must render this element inside a <HydratedRouter> element"),e}function hO(e,t){let n=E.useContext(Ay),[r,s]=E.useState(!1),[i,o]=E.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,p=E.useRef(null);E.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[e]),E.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:cl(a,m),onBlur:cl(l,_),onMouseEnter:cl(u,m),onMouseLeave:cl(c,_),onTouchStart:cl(f,m)}]:[!1,p,{}]}function cl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function pO({page:e,...t}){let{router:n}=T1(),r=E.useMemo(()=>y1(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?E.createElement(gO,{page:e,matches:r,...t}):null}function mO(e){let{manifest:t,routeModules:n}=P1(),[r,s]=E.useState([]);return E.useEffect(()=>{let i=!1;return aO(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function gO({page:e,matches:t,...n}){let r=dr(),{manifest:s,routeModules:i}=P1(),{basename:o}=T1(),{loaderData:a,matches:l}=fO(),u=E.useMemo(()=>Ew(e,t,l,s,r,"data"),[e,t,l,s,r]),c=E.useMemo(()=>Ew(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=E.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,v=!1;if(t.forEach(g=>{var b;let y=s.routes[g.route.id];!y||!y.hasLoader||(!u.some(C=>C.route.id===g.route.id)&&g.route.id in a&&((b=i[g.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?v=!0:_.add(g.route.id))}),_.size===0)return[];let x=sO(e,o,"data");return v&&_.size>0&&x.searchParams.set("_routes",t.filter(g=>_.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[o,a,r,s,u,t,e,i]),p=E.useMemo(()=>lO(c,s),[c,s]),m=mO(c);return E.createElement(E.Fragment,null,f.map(_=>E.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),p.map(_=>E.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),m.map(({key:_,link:v})=>E.createElement("link",{key:_,nonce:n.nonce,...v})))}function yO(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var A1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A1&&(window.__reactRouterVersion="7.9.3")}catch{}function vO({basename:e,children:t,window:n}){let r=E.useRef();r.current==null&&(r.current=iA({window:n,v5Compat:!0}));let s=r.current,[i,o]=E.useState({action:s.action,location:s.location}),a=E.useCallback(l=>{E.startTransition(()=>o(l))},[o]);return E.useLayoutEffect(()=>s.listen(a),[s,a]),E.createElement(qA,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var O1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rr=E.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...p},m){let{basename:_}=E.useContext(Or),v=typeof u=="string"&&O1.test(u),x,g=!1;if(typeof u=="string"&&v&&(x=u,A1))try{let F=new URL(window.location.href),z=u.startsWith("//")?new URL(F.protocol+u):new URL(u),me=vs(z.pathname,_);z.origin===F.origin&&me!=null?u=me+z.search+z.hash:g=!0}catch{Kn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=jA(u,{relative:s}),[b,C,R]=hO(r,p),I=_O(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function j(F){t&&t(F),F.defaultPrevented||I(F)}let L=E.createElement("a",{...p,...R,href:x||y,onClick:g||i?t:j,ref:yO(m,C),target:l,"data-discover":!v&&n==="render"?"true":void 0});return b&&!v?E.createElement(E.Fragment,null,L,E.createElement(pO,{page:y})):L});rr.displayName="Link";var wO=E.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let f=Iu(o,{relative:u.relative}),p=dr(),m=E.useContext(_f),{navigator:_,basename:v}=E.useContext(Or),x=m!=null&&PO(f)&&a===!0,g=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,y=p.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&v&&(b=vs(b,v)||b);const C=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let R=y===g||!s&&y.startsWith(g)&&y.charAt(C)==="/",I=b!=null&&(b===g||!s&&b.startsWith(g)&&b.charAt(g.length)==="/"),j={isActive:R,isPending:I,isTransitioning:x},L=R?t:void 0,F;typeof r=="function"?F=r(j):F=[r,R?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(j):i;return E.createElement(rr,{...u,"aria-current":L,className:F,ref:c,style:z,to:o,viewTransition:a},typeof l=="function"?l(j):l)});wO.displayName="NavLink";var bO=E.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=ad,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...p},m)=>{let _=CO(),v=TO(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&O1.test(a),y=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let C=b.nativeEvent.submitter,R=(C==null?void 0:C.getAttribute("formmethod"))||o;_(C||b.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:f})};return E.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:y,...p,"data-discover":!g&&e==="render"?"true":void 0})});bO.displayName="Form";function xO(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R1(e){let t=E.useContext($a);return xt(t,xO(e)),t}function _O(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=fr(),l=dr(),u=Iu(e,{relative:i});return E.useCallback(c=>{if(XA(c,t)){c.preventDefault();let f=n!==void 0?n:uu(l)===uu(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}function kO(e){Kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=E.useRef(km(e)),n=E.useRef(!1),r=dr(),s=E.useMemo(()=>eO(r.search,n.current?null:t.current),[r.search]),i=fr(),o=E.useCallback((a,l)=>{const u=km(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var SO=0,EO=()=>`__${String(++SO)}__`;function CO(){let{router:e}=R1("useSubmit"),{basename:t}=E.useContext(Or),n=VA();return E.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=rO(r,t);if(s.navigate===!1){let c=s.fetcherKey||EO();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function TO(e,{relative:t}={}){let{basename:n}=E.useContext(Or),r=E.useContext(Rr);xt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Iu(e||".",{relative:t})},o=dr();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:fs([n,i.pathname])),uu(i)}function PO(e,{relative:t}={}){let n=E.useContext(x1);xt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=R1("useViewTransitionState"),s=Iu(e,{relative:t});if(!n.isTransitioning)return!1;let i=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ud(s.pathname,o)!=null||Ud(s.pathname,i)!=null}const yo="https://script.google.com/macros/s/AKfycbwK_bVmMH5GGvoAUuVrgCYF6I5S6oTIC7zEgDwuCxhjTwYf1UBFmXzJuD6XACkB8xr_8w/exec",j1="radtpoqypgqetijvopho",AO=["searchIndex","allSongs"],OO=e=>["book-download-status",e],RO="modulepreload",jO=function(e){return"/new-sankeertan/"+e},Cw={},Fa=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=jO(l),l in Cw)return;Cw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":RO,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},IO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ba);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Oy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Tw extends Oy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Pw extends Oy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Aw extends Oy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sm||(Sm={}));var DO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class NO{constructor(t,{headers:n={},customFetch:r,region:s=Sm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=IO(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return DO(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const f=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let p;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(u["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(u["Content-Type"]="application/json",p=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Tw(g)}),_=m.headers.get("x-relay-error");if(_&&_==="true")throw new Pw(m);if(!m.ok)throw new Aw(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield m.json():v==="application/octet-stream"?x=yield m.blob():v==="text/event-stream"?x=m:v==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Tw(i)}:{data:null,error:i,response:i instanceof Aw||i instanceof Pw?i.context:void 0}}})}}var An={},Ry={},Sf={},Du={},Ef={},Cf={},LO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oa=LO();const $O=Oa.fetch,I1=Oa.fetch.bind(Oa),D1=Oa.Headers,MO=Oa.Request,FO=Oa.Response,Ba=Object.freeze(Object.defineProperty({__proto__:null,Headers:D1,Request:MO,Response:FO,default:I1,fetch:$O},Symbol.toStringTag,{value:"Module"})),BO=jT(Ba);var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});let UO=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Tf.default=UO;var N1=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});const zO=N1(BO),VO=N1(Tf);let KO=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,f=null,p=null,m=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const x=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,_="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(f=[],c=null,m=200,_="OK")}catch{i.status===404&&x===""?(m=204,_="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,_="OK"),c&&this.shouldThrowOnError)throw new VO.default(c)}return{error:c,data:f,count:p,status:m,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Cf.default=KO;var WO=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});const HO=WO(Cf);let qO=class extends HO.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ef.default=qO;var GO=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Du,"__esModule",{value:!0});const QO=GO(Ef);let YO=class extends QO.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Du.default=YO;var JO=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const dl=JO(Du);let ZO=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new dl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new dl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new dl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Sf.default=ZO;var L1=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ry,"__esModule",{value:!0});const XO=L1(Sf),eR=L1(Du);let tR=class $1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new XO.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new eR.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Ry.default=tR;var Ua=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const M1=Ua(Ry);An.PostgrestClient=M1.default;const F1=Ua(Sf);An.PostgrestQueryBuilder=F1.default;const B1=Ua(Du);An.PostgrestFilterBuilder=B1.default;const U1=Ua(Ef);An.PostgrestTransformBuilder=U1.default;const z1=Ua(Cf);An.PostgrestBuilder=z1.default;const V1=Ua(Tf);An.PostgrestError=V1.default;var nR=An.default={PostgrestClient:M1.default,PostgrestQueryBuilder:F1.default,PostgrestFilterBuilder:B1.default,PostgrestTransformBuilder:U1.default,PostgrestBuilder:z1.default,PostgrestError:V1.default};const{PostgrestClient:rR,PostgrestQueryBuilder:cU,PostgrestFilterBuilder:dU,PostgrestTransformBuilder:fU,PostgrestBuilder:hU,PostgrestError:pU}=nR;class sR{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const iR="2.74.0",oR=`realtime-js/${iR}`,aR="1.0.0",Em=1e4,lR=1e3,uR=100;var Nl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Nl||(Nl={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var Sr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Sr||(Sr={}));var Cm;(function(e){e.websocket="websocket"})(Cm||(Cm={}));var Li;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Li||(Li={}));class cR{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class K1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pt||(pt={}));const Ow=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=dR(o,e,t,s),i),{}):{}},dR=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?W1(i,o):Tm(o)},W1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return mR(t,n)}switch(e){case pt.bool:return fR(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return hR(t);case pt.json:case pt.jsonb:return pR(t);case pt.timestamp:return gR(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return Tm(t);default:return Tm(t)}},Tm=e=>e,fR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mR=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>W1(t,a))}return e},gR=e=>typeof e=="string"?e.replace(" ","T"):e,H1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zh{constructor(t,n,r={},s=Em){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rw||(Rw={}));class Ll{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ll.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ll.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ll.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const p=c.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),_=c.filter(x=>m.indexOf(x.presence_ref)<0),v=f.filter(x=>p.indexOf(x.presence_ref)<0);_.length>0&&(a[u]=_),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(m=>m.presence_ref),p=c.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jw||(jw={}));var $l;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($l||($l={}));var ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class jy{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zh(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new K1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ll(this),this.broadcastEndpointURL=H1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[$l.PRESENCE]&&this.bindings[$l.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ss.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ss.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var _;if(this.socket.setAuth(),m===void 0){t==null||t(ss.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(_=v==null?void 0:v.length)!==null&&_!==void 0?_:0,g=[];for(let y=0;y<x;y++){const b=v[y],{filter:{event:C,schema:R,table:I,filter:j}}=b,L=m&&m[y];if(L&&L.event===C&&L.schema===R&&L.table===I&&L.filter===j)g.push(Object.assign(Object.assign({},b),{id:L.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ss.SUBSCRIBED);return}}).receive("error",m=>{this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===zt.joined&&t===$l.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Zh(this,Sr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Zh(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>uR){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Sr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var _,v,x;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var _,v,x,g,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,R=(_=m.filter)===null||_===void 0?void 0:_.event;return C&&((v=n.ids)===null||v===void 0?void 0:v.includes(C))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const C=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return C==="*"||C===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:v,table:x,commit_timestamp:g,type:y,errors:b}=_;p=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(_))}m.callback(p,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&jy.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Sr.close,{},t)}_onError(t){this._on(Sr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ow(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ow(t.columns,t.old_record)),n}}const Xh=()=>{},Lc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yR=[1e3,2e3,5e3,1e4],vR=1e4,wR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bR{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Em,this.transport=null,this.heartbeatIntervalMs=Lc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xh,this.ref=0,this.reconnectTimer=null,this.logger=Xh,this.conn=null,this.sendBuffer=[],this.serializer=new cR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Fa(async()=>{const{default:a}=await Promise.resolve().then(()=>Ba);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Cm.websocket}`,this.httpEndpoint=H1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sR.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aR}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nl.connecting:return Li.Connecting;case Nl.open:return Li.Open;case Nl.closing:return Li.Closing;default:return Li.Closed}}isConnected(){return this.connectionState()===Li.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new jy(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(lR,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Lc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Sr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([wR],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:oR};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Sr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new K1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Em,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Lc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Xh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>yR[f-1]||vR,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Iy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xR extends Iy{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pm extends Iy{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var _R=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const q1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ba);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},kR=()=>_R(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fa(()=>Promise.resolve().then(()=>Ba),void 0)).Response:Response}),Am=e=>{if(Array.isArray(e))return e.map(n=>Am(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Am(r)}),t},SR=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var vo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const ep=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ER=(e,t,n)=>vo(void 0,void 0,void 0,function*(){const r=yield kR();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new xR(ep(s),i,o))}).catch(s=>{t(new Pm(ep(s),s))}):t(new Pm(ep(e),e))}),CR=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(SR(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Nu(e,t,n,r,s,i){return vo(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,CR(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ER(l,a,r))})})}function zd(e,t,n,r){return vo(this,void 0,void 0,function*(){return Nu(e,"GET",t,n,r)})}function Fr(e,t,n,r,s){return vo(this,void 0,void 0,function*(){return Nu(e,"POST",t,r,s,n)})}function Om(e,t,n,r,s){return vo(this,void 0,void 0,function*(){return Nu(e,"PUT",t,r,s,n)})}function TR(e,t,n,r){return vo(this,void 0,void 0,function*(){return Nu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function G1(e,t,n,r,s){return vo(this,void 0,void 0,function*(){return Nu(e,"DELETE",t,r,s,n)})}var PR=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class AR{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return PR(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var OR=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class RR{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new AR(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return OR(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var Sn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const jR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Iw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IR{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=q1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Sn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Iw),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?Om:Fr)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Sn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Iw.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield Om(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Sn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Iy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Sn(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Sn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Sn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Sn(this,void 0,void 0,function*(){try{const s=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>zd(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new RR(l,this.shouldThrowOnError)}info(t){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield zd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Am(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}exists(t){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield TR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r)&&r instanceof Pm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Sn(this,void 0,void 0,function*(){try{return{data:yield G1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Sn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jR),n),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Sn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const DR="2.74.0",NR={"X-Client-Info":`storage-js/${DR}`};var Ro=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class LR{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NR),n),this.fetch=q1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ro(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}createBucket(t){return Ro(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Ro(this,void 0,void 0,function*(){try{return{data:yield Om(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield G1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}class $R extends LR{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new IR(this.url,this.headers,t,this.fetch)}}const MR="2.74.0";let bl="";typeof Deno<"u"?bl="deno":typeof document<"u"?bl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bl="react-native":bl="node";const FR={"X-Client-Info":`supabase-js-${bl}/${MR}`},BR={headers:FR},UR={schema:"public"},zR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},VR={};var KR=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const WR=e=>{let t;return e?t=e:typeof fetch>"u"?t=I1:t=fetch,(...n)=>t(...n)},HR=()=>typeof Headers>"u"?D1:Headers,qR=(e,t,n)=>{const r=WR(n),s=HR();return(i,o)=>KR(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var GR=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function QR(e){return e.endsWith("/")?e:e+"/"}function YR(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>GR(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function JR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(QR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Q1="2.74.0",Mo=30*1e3,Rm=3,tp=Rm*Mo,ZR="http://localhost:9999",XR="supabase.auth.token",ej={"X-Client-Info":`gotrue-js/${Q1}`},jm="X-Supabase-Api-Version",Y1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nj=10*60*1e3;class cu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class rj extends cu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function sj(e){return Ke(e)&&e.name==="AuthApiError"}class $i extends cu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class wi extends cu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ds extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ij(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class jo extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $c extends wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mc extends wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oj(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class Dw extends wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Im extends wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function np(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class Nw extends wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Dm extends wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lw=` 	
\r=`.split(""),aj=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lw.length;t+=1)e[Lw[t].charCodeAt(0)]=-2;for(let t=0;t<Vd.length;t+=1)e[Vd[t].charCodeAt(0)]=t;return e})();function $w(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vd[r]),t.queuedBits-=6}}function J1(e,t,n){const r=aj[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Mw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{cj(o,r,n)};for(let o=0;o<e.length;o+=1)J1(e.charCodeAt(o),s,i);return t.join("")}function lj(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function uj(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}lj(r,t)}}function cj(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ua(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)J1(e.charCodeAt(s),n,r);return new Uint8Array(t)}function dj(e){const t=[];return uj(e,n=>t.push(n)),new Uint8Array(t)}function zi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>$w(s,n,r)),$w(null,n,r),t.join("")}function fj(e){return Math.round(Date.now()/1e3)+e}function hj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fn=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},Z1=()=>{if(!Fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function pj(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const X1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ba);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},mj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ai=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Is=async(e,t)=>{await e.removeItem(t)};class Pf{constructor(){this.promise=new Pf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Pf.promiseConstructor=Promise;function rp(e){const t=e.split(".");if(t.length!==3)throw new Dm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!tj.test(t[r]))throw new Dm("JWT not in base64url format");return{header:JSON.parse(Mw(t[0])),payload:JSON.parse(Mw(t[1])),signature:ua(t[2]),raw:{header:t[0],payload:t[1]}}}async function gj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function yj(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function vj(e){return("0"+e.toString(16)).substr(-2)}function wj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,vj).join("")}async function bj(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function xj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await bj(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Io(e,t,n=!1){const r=wj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Fo(e,`${t}-code-verifier`,s);const i=await xj(r);return[i,r===i?"plain":"s256"]}const _j=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kj(e){const t=e.headers.get(jm);if(!t||!t.match(_j))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Sj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Ej(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Cj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(e){if(!Cj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fw(e){return JSON.parse(JSON.stringify(e))}var Tj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ii=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Pj=[502,503,504];async function Bw(e){var t;if(!mj(e))throw new Im(Ii(e),0);if(Pj.includes(e.status))throw new Im(Ii(e),e.status);let n;try{n=await e.json()}catch(i){throw new $i(Ii(i),i)}let r;const s=kj(e);if(s&&s.getTime()>=Y1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Nw(Ii(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ds}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Nw(Ii(n),e.status,n.weak_password.reasons);throw new rj(Ii(n),e.status||500,r)}const Aj=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ge(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[jm]||(i[jm]=Y1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Oj(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Oj(e,t,n,r,s,i){const o=Aj(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Im(Ii(l),0)}if(a.ok||await Bw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Bw(l)}}function vr(e){var t;let n=null;Ij(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=fj(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Uw(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Rj(e){return{data:e,error:null}}function jj(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=Tj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function zw(e){return e}function Ij(e){return e.access_token&&e.refresh_token&&e.expires_in}const ip=["global","local","others"];var Dj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Nj{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=X1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ip[0]){if(ip.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ip.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Dj(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(_.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ke(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Do(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Do(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Do(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Do(t.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Do(t.userId),Do(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(_.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ke(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}function Vw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const No={debug:!!(globalThis&&Z1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Lj extends eS{}async function $j(e,t,n){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),No.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{No.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw No.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Lj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(No.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Mj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tS(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Fj(e){return parseInt(e,16)}function Bj(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Uj(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:f,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=tS(e.address),_=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",x=`${_} wants you to sign in with your Ethereum account:
${m}

${v}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);y+=`
- ${b}`}g+=y}return`${x}
${g}`}class $t extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Kd extends $t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function zj({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(rS(o)){if(i.rp.id!==o)return new $t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Vj({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(rS(r)){if(n.rpId!==r)return new $t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var nS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Kj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Wj=new Kj;function Hj(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=nS(e,["challenge","user","excludeCredentials"]),i=ua(t).buffer,o=Object.assign(Object.assign({},n),{id:ua(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ua(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function qj(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=nS(e,["challenge","allowCredentials"]),s=ua(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ua(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Gj(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:zi(new Uint8Array(e.response.attestationObject)),clientDataJSON:zi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Qj(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:zi(new Uint8Array(s.authenticatorData)),clientDataJSON:zi(new Uint8Array(s.clientDataJSON)),signature:zi(new Uint8Array(s.signature)),userHandle:s.userHandle?zi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Kw(){var e,t;return!!(Fn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Yj(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",t)}:{data:null,error:new Kd("Empty credential response",t)}}catch(t){return{data:null,error:zj({error:t,options:e})}}}async function Jj(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",t)}:{data:null,error:new Kd("Empty credential response",t)}}catch(t){return{data:null,error:Vj({error:t,options:e})}}}const Zj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Xj={userVerification:"preferred",hints:["security-key"]};function Wd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Wd(a,o):r[i]=Wd(o)}else r[i]=o}return r}function eI(e,t){return Wd(Zj,e,t||{})}function tI(e,t){return Wd(Xj,e,t||{})}class nI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??Wj.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=eI(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:f}=await Yj({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=tI(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:f}=await Jj(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new $i("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new cu("rpId is required for WebAuthn authentication")};try{if(!Kw())return{data:null,error:new $i("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new $i("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new cu("rpId is required for WebAuthn registration")};try{if(!Kw())return{data:null,error:new $i("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new $i("Unexpected error in register",o)}}}}Mj();const rI={url:ZR,storageKey:XR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ej,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ww(e,t,n){return await n()}const Lo={};class du{get jwks(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=du.nextInstanceID,du.nextInstanceID+=1,this.instanceID>0&&Fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},rI),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Nj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=X1(s.fetch),this.lock=s.lock||Ww,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Fn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=$j:this.lock=Ww,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new nI(this)},this.persistSession?(s.storage?this.storage=s.storage:Z1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Vw(this.memoryStorage)),Fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Q1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=pj(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),oj(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ke(n)?{error:n}:{error:new $i("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:vr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:f,options:p}=t;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Io(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:_},xform:vr})}else if("phone"in t){const{phone:c,password:f,options:p}=t;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:vr})}else throw new $c("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Uw})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Uw})}else throw new $c("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,c,f,p;let m,_;if("message"in t)m=t.message,_=t.signature;else{const{chain:v,wallet:x,statement:g,options:y}=t;let b;if(Fn())if(typeof x=="object")b=x;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")b=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const C=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),R=await b.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=tS(R[0]);let j=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!j){const F=await b.request({method:"eth_chainId"});j=Fj(F)}const L={domain:C.host,address:I,statement:g,uri:C.href,version:"1",chainId:j,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=Uj(L),_=await b.request({method:"personal_sign",params:[Bj(m),I]})}try{const{data:v,error:x}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:_},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:vr});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new jo}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(Ke(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,f,p,m;let _,v;if("message"in t)_=t.message,v=t.signature;else{const{chain:x,wallet:g,statement:y,options:b}=t;let C;if(Fn())if(typeof g=="object")C=g;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))C=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const R=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const I=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),y?{statement:y}:null));let j;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")j=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)j=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)_=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),v=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${R.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(c=b==null?void 0:b.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const I=await C.signMessage(new TextEncoder().encode(_),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:x,error:g}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:zi(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:vr});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new jo}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(Ke(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:vr});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new jo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Io(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new $c("You must provide either an email or phone number.")}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:vr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Io(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Rj})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ds;const{error:s}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new $c("You must provide either an email or phone number and a type")}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<tp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ai(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=sp()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(n){if(Ke(n))return ij(n)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ds;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Io(this.storage,this.storageKey));const{data:u,error:c}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Us});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=rp(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ds;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fn())throw new Mc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Dw("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Mc("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let p=c+f;l&&(p=parseInt(l));const m=p-c;m*1e3<=Mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const _=p-f;c-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,c):c-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,c);const{data:v,error:x}=await this._getUser(i);if(x)throw x;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(sj(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=hj(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Io(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Fn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:vr}),{data:p,error:m}=f;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new jo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await yj(async s=>(s>0&&await gj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&np(i)&&Date.now()+o-r<Mo})}catch(r){if(this._debug(n,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ai(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fo(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:sp()}else if(s&&!s.user&&!s.user){const o=await Ai(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Is(this.storage,this.storageKey+"-user"),await Fo(this.storage,this.storageKey,s)):s.user=sp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<tp;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${tp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),np(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Pf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ke(i)){const o={data:null,error:i};return np(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Fw(s);await Fo(this.storage,this.storageKey,i)}else{const s=Fw(n);await Fo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mo}ms, refresh threshold is ${Rm} ticks`),s<=Rm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof eS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Io(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Gj(t.webauthn.credential_response):Qj(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Hj(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:qj(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=rp(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+nj>s)return r;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:_}=await this.getSession();if(_||!m.session)return{data:null,error:_};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=rp(r);n!=null&&n.allowExpired||Sj(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=Ej(s.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,dj(`${a}.${l}`)))throw new Dm("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}du.nextInstanceID=0;const sI=du;class iI extends sI{constructor(t){super(t)}}var oI=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class aI{constructor(t,n,r){var s,i,o;this.supabaseUrl=t,this.supabaseKey=n;const a=JR(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:UR,realtime:VR,auth:Object.assign(Object.assign({},zR),{storageKey:l}),global:BR},c=YR(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=qR(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new rR(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new $R(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new NO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return oI(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iI({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new bR(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lI=(e,t,n)=>new aI(e,t,n);function uI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}uI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cI="https://"+j1+".supabase.co",dI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",fI=cI,hI=dI,Ut=lI(fI,hI),Dy=E.createContext({session:null,setSession:()=>{},isLoading:!0}),pI=({children:e})=>{const[t,n]=E.useState(null),[r,s]=E.useState(!0);E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:a}})=>{n(a),s(!1)});const{data:{subscription:o}}=Ut.auth.onAuthStateChange((a,l)=>{n(l)});return()=>{console.log("AUTH_DEBUG: 5. Cleanup function running."),o.unsubscribe()}},[]);const i={session:t,setSession:n,isLoading:r};return k.jsx(Dy.Provider,{value:i,children:e})},wo=()=>E.useContext(Dy),mI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),[o,a]=E.useState(null),l=fr(),{setSession:u}=wo(),c=async f=>{f.preventDefault(),i(!0),a(null);try{const{data:{session:p},error:m}=await Ut.auth.signInWithPassword({email:e,password:n});if(m)a(m.message);else if(p){u(p);const _=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(_||"/categories",{replace:!0})}}catch(p){a(p.message||"An unexpected error occurred during login.")}finally{i(!1)}};return k.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:k.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),k.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:k.jsxs("div",{className:"max-w-md mx-auto",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),k.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),k.jsx("div",{children:o&&k.jsx("p",{className:"text-red-500",children:o})}),k.jsxs("div",{className:"divide-y divide-gray-200",children:[k.jsx("form",{onSubmit:c,children:k.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:f=>t(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),k.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),k.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),k.jsx("div",{className:"relative",children:k.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:s,children:s?"Logging in...":"Login"})})]})}),k.jsxs("p",{children:["Don't have an account? ",k.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),k.jsxs("p",{children:["Forgot your password? ",k.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},gI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),i(!0),a(null);try{const{error:c}=await Ut.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{i(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Sign Up"}),o&&k.jsx("p",{style:{color:"red"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",children:"Password:"}),k.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:s,children:s?"Signing up...":"Sign Up"})]})]})},yI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(!1),[s,i]=E.useState(null),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),r(!0),i(null),a(null);try{const{error:c}=await Ut.auth.updateUser({password:e});c?i(c.message):(a("Password updated successfully!"),t(""))}catch(c){i(c.message||"An unexpected error occurred")}finally{r(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Change Password"}),s&&k.jsx("p",{style:{color:"red"},children:s}),o&&k.jsx("p",{style:{color:"green"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),k.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},vI="auth_redirect_sankeertan",wI=()=>{const e=fr(),[t]=kO(),[n,r]=E.useState(!0),[s,i]=E.useState(null),{setSession:o}=E.useContext(Dy);return E.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(f,p,m)=>{r(!0),i(null);try{let _;if(p==="invite"||p==="signup"||p==="email_change"||p==="magiclink"){const v=m;if(!v){i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}_=await Ut.auth.verifyOtp({token:f,type:p,email:v})}else if(p==="recover"){e(`/reset-password?token=${f}`,{replace:!0});return}else if(p==="sms"){const v=m;if(!v){i("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}_=await Ut.auth.verifyOtp({token:f,type:"sms",phone:v})}else{i(`Unsupported authentication type: ${p}`),r(!1),e("/login",{replace:!0});return}if(_!=null&&_.error)i(_.error.message);else{const{data:{session:v}}=await Ut.auth.getSession();v&&o(v),localStorage.setItem(vI,"true"),e("/",{replace:!0})}}catch(_){i(_.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(i("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?k.jsx("div",{children:"Verifying your account..."}):s?k.jsxs("div",{children:["Error verifying account: ",s]}):null};var Lu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ks,Tg,Qx,xI=(Qx=class{constructor(){He(this,Ks,bI);He(this,Tg,!1)}setTimeoutProvider(e){Me(this,Ks,e)}setTimeout(e,t){return H(this,Ks).setTimeout(e,t)}clearTimeout(e){H(this,Ks).clearTimeout(e)}setInterval(e,t){return H(this,Ks).setInterval(e,t)}clearInterval(e){H(this,Ks).clearInterval(e)}},Ks=new WeakMap,Tg=new WeakMap,Qx),Vi=new xI;function _I(e){setTimeout(e,0)}var fo=typeof window>"u"||"Deno"in globalThis;function Tn(){}function kI(e,t){return typeof e=="function"?e(t):e}function Nm(e){return typeof e=="number"&&e>=0&&e!==1/0}function sS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ci(e,t){return typeof e=="function"?e(t):e}function er(e,t){return typeof e=="function"?e(t):e}function Hw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==Ny(o,t.options))return!1}else if(!hu(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function qw(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(fu(t.options.mutationKey)!==fu(i))return!1}else if(!hu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Ny(e,t){return((t==null?void 0:t.queryKeyHashFn)||fu)(e)}function fu(e){return JSON.stringify(e,(t,n)=>$m(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function hu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>hu(e[n],t[n])):!1}var SI=Object.prototype.hasOwnProperty;function iS(e,t){if(e===t)return e;const n=Gw(e)&&Gw(t);if(!n&&!($m(e)&&$m(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:i[u],f=e[c],p=t[c];if(f===p){a[c]=f,(n?u<s:SI.call(e,c))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){a[c]=p;continue}const m=iS(f,p);a[c]=m,m===f&&l++}return s===o&&l===s?e:a}function Lm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Gw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $m(e){if(!Qw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Qw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Qw(e){return Object.prototype.toString.call(e)==="[object Object]"}function EI(e){return new Promise(t=>{Vi.setTimeout(t,e)})}function Mm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?iS(e,t):t}function CI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function TI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Ly=Symbol();function oS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ly?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function PI(e,t){return typeof e=="function"?e(...t):!!e}var qi,Ws,da,Yx,AI=(Yx=class extends Lu{constructor(){super();He(this,qi);He(this,Ws);He(this,da);Me(this,da,t=>{if(!fo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Ws)||this.setEventListener(H(this,da))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Ws))==null||t.call(this),Me(this,Ws,void 0))}setEventListener(t){var n;Me(this,da,t),(n=H(this,Ws))==null||n.call(this),Me(this,Ws,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){H(this,qi)!==t&&(Me(this,qi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof H(this,qi)=="boolean"?H(this,qi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qi=new WeakMap,Ws=new WeakMap,da=new WeakMap,Yx),$y=new AI;function Fm(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var OI=_I;function RI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=OI;const i=a=>{t?e.push(a):s(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var tn=RI(),fa,Hs,ha,Jx,jI=(Jx=class extends Lu{constructor(){super();He(this,fa,!0);He(this,Hs);He(this,ha);Me(this,ha,t=>{if(!fo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Hs)||this.setEventListener(H(this,ha))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Hs))==null||t.call(this),Me(this,Hs,void 0))}setEventListener(t){var n;Me(this,ha,t),(n=H(this,Hs))==null||n.call(this),Me(this,Hs,t(this.setOnline.bind(this)))}setOnline(t){H(this,fa)!==t&&(Me(this,fa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return H(this,fa)}},fa=new WeakMap,Hs=new WeakMap,ha=new WeakMap,Jx),Hd=new jI;function II(e){return Math.min(1e3*2**e,3e4)}function aS(e){return(e??"online")==="online"?Hd.isOnline():!0}var Bm=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function lS(e){let t=!1,n=0,r;const s=Fm(),i=()=>s.status!=="pending",o=v=>{var x;if(!i()){const g=new Bm(v);p(g),(x=e.onCancel)==null||x.call(e,g)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>$y.isFocused()&&(e.networkMode==="always"||Hd.isOnline())&&e.canRun(),c=()=>aS(e.networkMode)&&e.canRun(),f=v=>{i()||(r==null||r(),s.resolve(v))},p=v=>{i()||(r==null||r(),s.reject(v))},m=()=>new Promise(v=>{var x;r=g=>{(i()||u())&&v(g)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;r=void 0,i()||(v=e.onContinue)==null||v.call(e)}),_=()=>{if(i())return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var I;if(i())return;const y=e.retry??(fo?0:3),b=e.retryDelay??II,C=typeof b=="function"?b(n,g):b,R=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!R){p(g);return}n++,(I=e.onFail)==null||I.call(e,n,g),EI(C).then(()=>u()?void 0:m()).then(()=>{t?p(g):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?_():m().then(_),s)}}var Gi,Zx,uS=(Zx=class{constructor(){He(this,Gi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nm(this.gcTime)&&Me(this,Gi,Vi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(fo?1/0:5*60*1e3))}clearGcTimeout(){H(this,Gi)&&(Vi.clearTimeout(H(this,Gi)),Me(this,Gi,void 0))}},Gi=new WeakMap,Zx),Qi,pa,Xn,Yi,Qt,xu,Ji,xr,ns,Xx,DI=(Xx=class extends uS{constructor(t){super();He(this,xr);He(this,Qi);He(this,pa);He(this,Xn);He(this,Yi);He(this,Qt);He(this,xu);He(this,Ji);Me(this,Ji,!1),Me(this,xu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Me(this,Yi,t.client),Me(this,Xn,H(this,Yi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Me(this,Qi,Yw(this.options)),this.state=t.state??H(this,Qi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Qt))==null?void 0:t.promise}setOptions(t){if(this.options={...H(this,xu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Yw(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Me(this,Qi,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Xn).remove(this)}setData(t,n){const r=Mm(this.state.data,t,this.options);return ot(this,xr,ns).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ot(this,xr,ns).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=H(this,Qt))==null?void 0:r.promise;return(s=H(this,Qt))==null||s.cancel(t),n?n.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Qi))}isActive(){return this.observers.some(t=>er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ly||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ci(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!sS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Qt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Qt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,Xn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(H(this,Qt)&&(H(this,Ji)?H(this,Qt).cancel({revert:!0}):H(this,Qt).cancelRetry()),this.scheduleGc()),H(this,Xn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ot(this,xr,ns).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,f,p,m,_,v,x,g,y,b;if(this.state.fetchStatus!=="idle"&&((l=H(this,Qt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(H(this,Qt))return H(this,Qt).continueRetry(),H(this,Qt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(R=>R.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Me(this,Ji,!0),r.signal)})},i=()=>{const C=oS(this.options,n),I=(()=>{const j={client:H(this,Yi),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return Me(this,Ji,!1),this.options.persister?this.options.persister(C,I,this):C(I)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:H(this,Yi),state:this.state,fetchFn:i};return s(C),C})();(u=this.options.behavior)==null||u.onFetch(a,this),Me(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&ot(this,xr,ns).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),Me(this,Qt,lS({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof Bm&&C.revert&&this.setState({...H(this,pa),fetchStatus:"idle"}),r.abort()},onFail:(C,R)=>{ot(this,xr,ns).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{ot(this,xr,ns).call(this,{type:"pause"})},onContinue:()=>{ot(this,xr,ns).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await H(this,Qt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(m=(p=H(this,Xn).config).onSuccess)==null||m.call(p,C,this),(v=(_=H(this,Xn).config).onSettled)==null||v.call(_,C,this.state.error,this),C}catch(C){if(C instanceof Bm){if(C.silent)return H(this,Qt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw ot(this,xr,ns).call(this,{type:"error",error:C}),(g=(x=H(this,Xn).config).onError)==null||g.call(x,C,this),(b=(y=H(this,Xn).config).onSettled)==null||b.call(y,this.state.data,C,this),C}finally{this.scheduleGc()}}},Qi=new WeakMap,pa=new WeakMap,Xn=new WeakMap,Yi=new WeakMap,Qt=new WeakMap,xu=new WeakMap,Ji=new WeakMap,xr=new WeakSet,ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...cS(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Me(this,pa,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,Xn).notify({query:this,type:"updated",action:t})})},Xx);function cS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Yw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var En,at,_u,yn,Zi,ma,os,qs,ku,ga,ya,Xi,eo,Gs,va,ct,xl,Um,zm,Vm,Km,Wm,Hm,qm,dS,e_,NI=(e_=class extends Lu{constructor(t,n){super();He(this,ct);He(this,En);He(this,at);He(this,_u);He(this,yn);He(this,Zi);He(this,ma);He(this,os);He(this,qs);He(this,ku);He(this,ga);He(this,ya);He(this,Xi);He(this,eo);He(this,Gs);He(this,va,new Set);this.options=n,Me(this,En,t),Me(this,qs,null),Me(this,os,Fm()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,at).addObserver(this),Jw(H(this,at),this.options)?ot(this,ct,xl).call(this):this.updateResult(),ot(this,ct,Km).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gm(H(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gm(H(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ot(this,ct,Wm).call(this),ot(this,ct,Hm).call(this),H(this,at).removeObserver(this)}setOptions(t){const n=this.options,r=H(this,at);if(this.options=H(this,En).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof er(this.options.enabled,H(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ot(this,ct,qm).call(this),H(this,at).setOptions(this.options),n._defaulted&&!Lm(this.options,n)&&H(this,En).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,at),observer:this});const s=this.hasListeners();s&&Zw(H(this,at),r,this.options,n)&&ot(this,ct,xl).call(this),this.updateResult(),s&&(H(this,at)!==r||er(this.options.enabled,H(this,at))!==er(n.enabled,H(this,at))||ci(this.options.staleTime,H(this,at))!==ci(n.staleTime,H(this,at)))&&ot(this,ct,Um).call(this);const i=ot(this,ct,zm).call(this);s&&(H(this,at)!==r||er(this.options.enabled,H(this,at))!==er(n.enabled,H(this,at))||i!==H(this,Gs))&&ot(this,ct,Vm).call(this,i)}getOptimisticResult(t){const n=H(this,En).getQueryCache().build(H(this,En),t),r=this.createResult(n,t);return $I(this,r)&&(Me(this,yn,r),Me(this,ma,this.options),Me(this,Zi,H(this,at).state)),r}getCurrentResult(){return H(this,yn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&H(this,os).status==="pending"&&H(this,os).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){H(this,va).add(t)}getCurrentQuery(){return H(this,at)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=H(this,En).defaultQueryOptions(t),r=H(this,En).getQueryCache().build(H(this,En),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ot(this,ct,xl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,yn)))}createResult(t,n){var F;const r=H(this,at),s=this.options,i=H(this,yn),o=H(this,Zi),a=H(this,ma),u=t!==r?t.state:H(this,_u),{state:c}=t;let f={...c},p=!1,m;if(n._optimisticResults){const z=this.hasListeners(),me=!z&&Jw(t,n),$=z&&Zw(t,r,n,s);(me||$)&&(f={...f,...cS(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:x}=f;m=f.data;let g=!1;if(n.placeholderData!==void 0&&m===void 0&&x==="pending"){let z;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(z=i.data,g=!0):z=typeof n.placeholderData=="function"?n.placeholderData((F=H(this,ya))==null?void 0:F.state.data,H(this,ya)):n.placeholderData,z!==void 0&&(x="success",m=Mm(i==null?void 0:i.data,z,n),p=!0)}if(n.select&&m!==void 0&&!g)if(i&&m===(o==null?void 0:o.data)&&n.select===H(this,ku))m=H(this,ga);else try{Me(this,ku,n.select),m=n.select(m),m=Mm(i==null?void 0:i.data,m,n),Me(this,ga,m),Me(this,qs,null)}catch(z){Me(this,qs,z)}H(this,qs)&&(_=H(this,qs),m=H(this,ga),v=Date.now(),x="error");const y=f.fetchStatus==="fetching",b=x==="pending",C=x==="error",R=b&&y,I=m!==void 0,L={status:x,fetchStatus:f.fetchStatus,isPending:b,isSuccess:x==="success",isError:C,isInitialLoading:R,isLoading:R,data:m,dataUpdatedAt:f.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:C&&!I,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&I,isStale:My(t,n),refetch:this.refetch,promise:H(this,os),isEnabled:er(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const z=re=>{L.status==="error"?re.reject(L.error):L.data!==void 0&&re.resolve(L.data)},me=()=>{const re=Me(this,os,L.promise=Fm());z(re)},$=H(this,os);switch($.status){case"pending":t.queryHash===r.queryHash&&z($);break;case"fulfilled":(L.status==="error"||L.data!==$.value)&&me();break;case"rejected":(L.status!=="error"||L.error!==$.reason)&&me();break}}return L}updateResult(){const t=H(this,yn),n=this.createResult(H(this,at),this.options);if(Me(this,Zi,H(this,at).state),Me(this,ma,this.options),H(this,Zi).data!==void 0&&Me(this,ya,H(this,at)),Lm(n,t))return;Me(this,yn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!H(this,va).size)return!0;const o=new Set(i??H(this,va));return this.options.throwOnError&&o.add("error"),Object.keys(H(this,yn)).some(a=>{const l=a;return H(this,yn)[l]!==t[l]&&o.has(l)})};ot(this,ct,dS).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ot(this,ct,Km).call(this)}},En=new WeakMap,at=new WeakMap,_u=new WeakMap,yn=new WeakMap,Zi=new WeakMap,ma=new WeakMap,os=new WeakMap,qs=new WeakMap,ku=new WeakMap,ga=new WeakMap,ya=new WeakMap,Xi=new WeakMap,eo=new WeakMap,Gs=new WeakMap,va=new WeakMap,ct=new WeakSet,xl=function(t){ot(this,ct,qm).call(this);let n=H(this,at).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tn)),n},Um=function(){ot(this,ct,Wm).call(this);const t=ci(this.options.staleTime,H(this,at));if(fo||H(this,yn).isStale||!Nm(t))return;const r=sS(H(this,yn).dataUpdatedAt,t)+1;Me(this,Xi,Vi.setTimeout(()=>{H(this,yn).isStale||this.updateResult()},r))},zm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,at)):this.options.refetchInterval)??!1},Vm=function(t){ot(this,ct,Hm).call(this),Me(this,Gs,t),!(fo||er(this.options.enabled,H(this,at))===!1||!Nm(H(this,Gs))||H(this,Gs)===0)&&Me(this,eo,Vi.setInterval(()=>{(this.options.refetchIntervalInBackground||$y.isFocused())&&ot(this,ct,xl).call(this)},H(this,Gs)))},Km=function(){ot(this,ct,Um).call(this),ot(this,ct,Vm).call(this,ot(this,ct,zm).call(this))},Wm=function(){H(this,Xi)&&(Vi.clearTimeout(H(this,Xi)),Me(this,Xi,void 0))},Hm=function(){H(this,eo)&&(Vi.clearInterval(H(this,eo)),Me(this,eo,void 0))},qm=function(){const t=H(this,En).getQueryCache().build(H(this,En),this.options);if(t===H(this,at))return;const n=H(this,at);Me(this,at,t),Me(this,_u,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},dS=function(t){tn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(H(this,yn))}),H(this,En).getQueryCache().notify({query:H(this,at),type:"observerResultsUpdated"})})},e_);function LI(e,t){return er(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jw(e,t){return LI(e,t)||e.state.data!==void 0&&Gm(e,t,t.refetchOnMount)}function Gm(e,t,n){if(er(t.enabled,e)!==!1&&ci(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&My(e,t)}return!1}function Zw(e,t,n,r){return(e!==t||er(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&My(e,n)}function My(e,t){return er(t.enabled,e)!==!1&&e.isStaleByTime(ci(t.staleTime,e))}function $I(e,t){return!Lm(e.getCurrentResult(),t)}function Xw(e){return{onFetch:(t,n)=>{var c,f,p,m,_;const r=t.options,s=(p=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((_=t.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=oS(t.options,t.fetchOptions),y=async(b,C,R)=>{if(v)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const j=(()=>{const me={client:t.client,queryKey:t.queryKey,pageParam:C,direction:R?"backward":"forward",meta:t.options.meta};return x(me),me})(),L=await g(j),{maxPages:F}=t.options,z=R?TI:CI;return{pages:z(b.pages,L,F),pageParams:z(b.pageParams,C,F)}};if(s&&i.length){const b=s==="backward",C=b?MI:eb,R={pages:i,pageParams:o},I=C(r,R);a=await y(R,I,b)}else{const b=e??i.length;do{const C=l===0?o[0]??r.initialPageParam:eb(r,a);if(l>0&&C==null)break;a=await y(a,C),l++}while(l<b)}return a};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function eb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function MI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Su,Br,vn,to,Ur,Ns,t_,FI=(t_=class extends uS{constructor(t){super();He(this,Ur);He(this,Su);He(this,Br);He(this,vn);He(this,to);Me(this,Su,t.client),this.mutationId=t.mutationId,Me(this,vn,t.mutationCache),Me(this,Br,[]),this.state=t.state||BI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,Br).includes(t)||(H(this,Br).push(t),this.clearGcTimeout(),H(this,vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Me(this,Br,H(this,Br).filter(n=>n!==t)),this.scheduleGc(),H(this,vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,Br).length||(this.state.status==="pending"?this.scheduleGc():H(this,vn).remove(this))}continue(){var t;return((t=H(this,to))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,f,p,m,_,v,x,g,y,b,C,R,I,j,L,F;const n=()=>{ot(this,Ur,Ns).call(this,{type:"continue"})},r={client:H(this,Su),meta:this.options.meta,mutationKey:this.options.mutationKey};Me(this,to,lS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(z,me)=>{ot(this,Ur,Ns).call(this,{type:"failed",failureCount:z,error:me})},onPause:()=>{ot(this,Ur,Ns).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,vn).canRun(this)}));const s=this.state.status==="pending",i=!H(this,to).canStart();try{if(s)n();else{ot(this,Ur,Ns).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=H(this,vn).config).onMutate)==null?void 0:a.call(o,t,this,r));const me=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));me!==this.state.context&&ot(this,Ur,Ns).call(this,{type:"pending",context:me,variables:t,isPaused:i})}const z=await H(this,to).start();return await((f=(c=H(this,vn).config).onSuccess)==null?void 0:f.call(c,z,t,this.state.context,this,r)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,z,t,this.state.context,r)),await((v=(_=H(this,vn).config).onSettled)==null?void 0:v.call(_,z,null,this.state.variables,this.state.context,this,r)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,z,null,t,this.state.context,r)),ot(this,Ur,Ns).call(this,{type:"success",data:z}),z}catch(z){try{throw await((b=(y=H(this,vn).config).onError)==null?void 0:b.call(y,z,t,this.state.context,this,r)),await((R=(C=this.options).onError)==null?void 0:R.call(C,z,t,this.state.context,r)),await((j=(I=H(this,vn).config).onSettled)==null?void 0:j.call(I,void 0,z,this.state.variables,this.state.context,this,r)),await((F=(L=this.options).onSettled)==null?void 0:F.call(L,void 0,z,t,this.state.context,r)),z}finally{ot(this,Ur,Ns).call(this,{type:"error",error:z})}}finally{H(this,vn).runNext(this)}}},Su=new WeakMap,Br=new WeakMap,vn=new WeakMap,to=new WeakMap,Ur=new WeakSet,Ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tn.batch(()=>{H(this,Br).forEach(r=>{r.onMutationUpdate(t)}),H(this,vn).notify({mutation:this,type:"updated",action:t})})},t_);function BI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var as,_r,Eu,n_,UI=(n_=class extends Lu{constructor(t={}){super();He(this,as);He(this,_r);He(this,Eu);this.config=t,Me(this,as,new Set),Me(this,_r,new Map),Me(this,Eu,0)}build(t,n,r){const s=new FI({client:t,mutationCache:this,mutationId:++yc(this,Eu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){H(this,as).add(t);const n=Fc(t);if(typeof n=="string"){const r=H(this,_r).get(n);r?r.push(t):H(this,_r).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,as).delete(t)){const n=Fc(t);if(typeof n=="string"){const r=H(this,_r).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&H(this,_r).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Fc(t);if(typeof n=="string"){const r=H(this,_r).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Fc(t);if(typeof n=="string"){const s=(r=H(this,_r).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tn.batch(()=>{H(this,as).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,as).clear(),H(this,_r).clear()})}getAll(){return Array.from(H(this,as))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qw(n,r))}findAll(t={}){return this.getAll().filter(n=>qw(t,n))}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tn))))}},as=new WeakMap,_r=new WeakMap,Eu=new WeakMap,n_);function Fc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var zr,r_,zI=(r_=class extends Lu{constructor(t={}){super();He(this,zr);this.config=t,Me(this,zr,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Ny(s,n);let o=this.get(i);return o||(o=new DI({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){H(this,zr).has(t.queryHash)||(H(this,zr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=H(this,zr).get(t.queryHash);n&&(t.destroy(),n===t&&H(this,zr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,zr).get(t)}getAll(){return[...H(this,zr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Hw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Hw(t,r)):n}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zr=new WeakMap,r_),Pt,Qs,Ys,wa,ba,Js,xa,_a,s_,VI=(s_=class{constructor(e={}){He(this,Pt);He(this,Qs);He(this,Ys);He(this,wa);He(this,ba);He(this,Js);He(this,xa);He(this,_a);Me(this,Pt,e.queryCache||new zI),Me(this,Qs,e.mutationCache||new UI),Me(this,Ys,e.defaultOptions||{}),Me(this,wa,new Map),Me(this,ba,new Map),Me(this,Js,0)}mount(){yc(this,Js)._++,H(this,Js)===1&&(Me(this,xa,$y.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pt).onFocus())})),Me(this,_a,Hd.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pt).onOnline())})))}unmount(){var e,t;yc(this,Js)._--,H(this,Js)===0&&((e=H(this,xa))==null||e.call(this),Me(this,xa,void 0),(t=H(this,_a))==null||t.call(this),Me(this,_a,void 0))}isFetching(e){return H(this,Pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,Qs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=H(this,Pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ci(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return H(this,Pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=H(this,Pt).get(r.queryHash),i=s==null?void 0:s.state.data,o=kI(t,i);if(o!==void 0)return H(this,Pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return tn.batch(()=>H(this,Pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=H(this,Pt);tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=H(this,Pt);return tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=tn.batch(()=>H(this,Pt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(e,t={}){return tn.batch(()=>(H(this,Pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=tn.batch(()=>H(this,Pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=H(this,Pt).build(this,t);return n.isStaleByTime(ci(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tn).catch(Tn)}fetchInfiniteQuery(e){return e.behavior=Xw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tn).catch(Tn)}ensureInfiniteQueryData(e){return e.behavior=Xw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hd.isOnline()?H(this,Qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Pt)}getMutationCache(){return H(this,Qs)}getDefaultOptions(){return H(this,Ys)}setDefaultOptions(e){Me(this,Ys,e)}setQueryDefaults(e,t){H(this,wa).set(fu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,wa).values()],n={};return t.forEach(r=>{hu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){H(this,ba).set(fu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,ba).values()],n={};return t.forEach(r=>{hu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,Ys).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ny(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ly&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,Ys).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Pt).clear(),H(this,Qs).clear()}},Pt=new WeakMap,Qs=new WeakMap,Ys=new WeakMap,wa=new WeakMap,ba=new WeakMap,Js=new WeakMap,xa=new WeakMap,_a=new WeakMap,s_),fS=E.createContext(void 0),Af=e=>{const t=E.useContext(fS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},KI=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),k.jsx(fS.Provider,{value:e,children:t})),hS=E.createContext(!1),WI=()=>E.useContext(hS);hS.Provider;function HI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var qI=E.createContext(HI()),GI=()=>E.useContext(qI),QI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},YI=e=>{E.useEffect(()=>{e.clearReset()},[e])},JI=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||PI(n,[e.error,r])),ZI=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},XI=(e,t)=>e.isLoading&&e.isFetching&&!t,eD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,tb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function tD(e,t,n){var f,p,m,_,v;const r=WI(),s=GI(),i=Af(),o=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",ZI(o),QI(o,s),YI(s);const a=!i.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(x=>{const g=c?l.subscribe(tn.batchCalls(x)):Tn;return l.updateResult(),g},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o)},[o,l]),eD(o,u))throw tb(o,l,s);if(JI({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((_=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||_.call(m,o,u),o.experimental_prefetchInRender&&!fo&&XI(u,r)){const x=a?tb(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;x==null||x.catch(Tn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Of(e,t){return tD(e,NI)}var pS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,S){w.__proto__=S}||function(w,S){for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(w[T]=S[T])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,w=1,S=arguments.length;w<S;w++)for(var T in h=arguments[w])Object.prototype.hasOwnProperty.call(h,T)&&(d[T]=h[T]);return d}).apply(this,arguments)};function s(d,h,w){for(var S,T=0,O=h.length;T<O;T++)!S&&T in h||((S=S||Array.prototype.slice.call(h,0,T))[T]=h[T]);return d.concat(S||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jt,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(w){d[w]=h[w]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(d,h){return c.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(w){_(d,w,h[w])})}var m=Object.defineProperty;function _(d,h,w,S){m(d,h,l(w&&f(w,"get")&&typeof w.get=="function"?{get:w.get,set:w.set,configurable:!0}:{value:w,configurable:!0,writable:!0},S))}function v(d){return{from:function(h){return d.prototype=Object.create(h.prototype),_(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var x=Object.getOwnPropertyDescriptor,g=[].slice;function y(d,h,w){return g.call(d,h,w)}function b(d,h){return h(d)}function C(d){if(!d)throw new Error("Assertion Failed")}function R(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function I(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var w=[],S=0,T=h.length;S<T;++S){var O=I(d,h[S]);w.push(O)}return w}var D=h.indexOf(".");if(D!==-1){var B=d[h.substr(0,D)];return B==null?void 0:I(B,h.substr(D+1))}}function j(d,h,w){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){C(typeof w!="string"&&"length"in w);for(var S=0,T=h.length;S<T;++S)j(d,h[S],w[S])}else{var O,D,B=h.indexOf(".");B!==-1?(O=h.substr(0,B),(D=h.substr(B+1))===""?w===void 0?a(d)&&!isNaN(parseInt(O))?d.splice(O,1):delete d[O]:d[O]=w:j(B=!(B=d[O])||!f(d,O)?d[O]={}:B,D,w)):w===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=w}}function L(d){var h,w={};for(h in d)f(d,h)&&(w[h]=d[h]);return w}var F=[].concat;function z(d){return F.apply([],d)}var Ue="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),me=new Set(Ue.map(function(d){return i[d]})),$=null;function re(d){return $=new WeakMap,d=function h(w){if(!w||typeof w!="object")return w;var S=$.get(w);if(S)return S;if(a(w)){S=[],$.set(w,S);for(var T=0,O=w.length;T<O;++T)S.push(h(w[T]))}else if(me.has(w.constructor))S=w;else{var D,B=u(w);for(D in S=B===Object.prototype?{}:Object.create(B),$.set(w,S),w)f(w,D)&&(S[D]=h(w[D]))}return S}(d),$=null,d}var A={}.toString;function G(d){return A.call(d).slice(8,-1)}var be=typeof Symbol<"u"?Symbol.iterator:"@@iterator",le=typeof be=="symbol"?function(d){var h;return d!=null&&(h=d[be])&&h.apply(d)}:function(){return null};function ce(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var se={};function ye(d){var h,w,S,T;if(arguments.length===1){if(a(d))return d.slice();if(this===se&&typeof d=="string")return[d];if(T=le(d)){for(w=[];!(S=T.next()).done;)w.push(S.value);return w}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(w=new Array(h);h--;)w[h]=d[h];return w}for(h=arguments.length,w=new Array(h);h--;)w[h]=arguments[h];return w}var J=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Se=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Se),Z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(d,h){this.name=d,this.message=h}function de(d,h){return d+". Errors: "+Object.keys(h).map(function(w){return h[w].toString()}).filter(function(w,S,T){return T.indexOf(w)===S}).join(`
`)}function oe(d,h,w,S){this.failures=h,this.failedKeys=S,this.successCount=w,this.message=de(d,h)}function _e(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(w){return h[w]}),this.failuresByPos=h,this.message=de(d,this.failures)}v(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(oe).from(K),v(_e).from(K);var $e=Qn.reduce(function(d,h){return d[h]=h+"Error",d},{}),Re=K,pe=Qn.reduce(function(d,h){var w=h+"Error";function S(T,O){this.name=w,T?typeof T=="string"?(this.message="".concat(T).concat(O?`
 `+O:""),this.inner=O||null):typeof T=="object"&&(this.message="".concat(T.name," ").concat(T.message),this.inner=T):(this.message=Z[h]||w,this.inner=null)}return v(S).from(Re),d[h]=S,d},{});pe.Syntax=SyntaxError,pe.Type=TypeError,pe.Range=RangeError;var Ze=Se.reduce(function(d,h){return d[h+"Error"]=pe[h],d},{}),Ye=Qn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=pe[h]),d},{});function We(){}function Tt(d){return d}function P(d,h){return d==null||d===Tt?h:function(w){return h(d(w))}}function ge(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function fe(d,h){return d===We?h:function(){var w=d.apply(this,arguments);w!==void 0&&(arguments[0]=w);var S=this.onsuccess,T=this.onerror;this.onsuccess=null,this.onerror=null;var O=h.apply(this,arguments);return S&&(this.onsuccess=this.onsuccess?ge(S,this.onsuccess):S),T&&(this.onerror=this.onerror?ge(T,this.onerror):T),O!==void 0?O:w}}function M(d,h){return d===We?h:function(){d.apply(this,arguments);var w=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?ge(w,this.onsuccess):w),S&&(this.onerror=this.onerror?ge(S,this.onerror):S)}}function N(d,h){return d===We?h:function(w){var S=d.apply(this,arguments);l(w,S);var T=this.onsuccess,O=this.onerror;return this.onsuccess=null,this.onerror=null,w=h.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?ge(T,this.onsuccess):T),O&&(this.onerror=this.onerror?ge(O,this.onerror):O),S===void 0?w===void 0?void 0:w:l(S,w)}}function ee(d,h){return d===We?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function ve(d,h){return d===We?h:function(){var w=d.apply(this,arguments);if(w&&typeof w.then=="function"){for(var S=this,T=arguments.length,O=new Array(T);T--;)O[T]=arguments[T];return w.then(function(){return h.apply(S,O)})}return h.apply(this,arguments)}}Ye.ModifyError=oe,Ye.DexieError=K,Ye.BulkError=_e;var we=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(d){we=d}var ke={},Ne=100,Ue=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,u(h),d]}(),Se=Ue[0],Qn=Ue[1],Ue=Ue[2],Qn=Qn&&Qn.then,rt=Se&&Se.constructor,Xe=!!Ue,Rt=function(d,h){pr.push([d,h]),De&&(queueMicrotask(iT),De=!1)},qn=!0,De=!0,Ve=[],et=[],sn=Tt,Ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:We,pgp:!1,env:{},finalize:We},Le=Ht,pr=[],Gn=0,Es=[];function Pe(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Le;if(typeof d!="function"){if(d!==ke)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&mr(this,this._value))}this._state=null,this._value=null,++h.ref,function w(S,T){try{T(function(O){if(S._state===null){if(O===S)throw new TypeError("A promise cannot be resolved with itself.");var D=S._lib&&_o();O&&typeof O.then=="function"?w(S,function(B,V){O instanceof Pe?O._then(B,V):O.then(B,V)}):(S._state=!0,S._value=O,jv(S)),D&&ko()}},mr.bind(null,S))}catch(O){mr(S,O)}}(this,d)}var Jr={get:function(){var d=Le,h=Ju;function w(S,T){var O=this,D=!d.global&&(d!==Le||h!==Ju),B=D&&!Ts(),V=new Pe(function(W,X){Gf(O,new jr(Dv(S,d,D,B),Dv(T,d,D,B),W,X,d))});return this._consoleTask&&(V._consoleTask=this._consoleTask),V}return w.prototype=ke,w},set:function(d){_(this,"then",d&&d.prototype===ke?Jr:{get:function(){return d},set:Jr.set})}};function jr(d,h,w,S,T){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=w,this.reject=S,this.psd=T}function mr(d,h){var w,S;et.push(h),d._state===null&&(w=d._lib&&_o(),h=sn(h),d._state=!1,d._value=h,S=d,Ve.some(function(T){return T._value===S._value})||Ve.push(S),jv(d),w&&ko())}function jv(d){var h=d._listeners;d._listeners=[];for(var w=0,S=h.length;w<S;++w)Gf(d,h[w]);var T=d._PSD;--T.ref||T.finalize(),Gn===0&&(++Gn,Rt(function(){--Gn==0&&Qf()},[]))}function Gf(d,h){if(d._state!==null){var w=d._state?h.onFulfilled:h.onRejected;if(w===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,Rt(sT,[w,d,h])}else d._listeners.push(h)}function sT(d,h,w){try{var S,T=h._value;!h._state&&et.length&&(et=[]),S=we&&h._consoleTask?h._consoleTask.run(function(){return d(T)}):d(T),h._state||et.indexOf(T)!==-1||function(O){for(var D=Ve.length;D;)if(Ve[--D]._value===O._value)return Ve.splice(D,1)}(h),w.resolve(S)}catch(O){w.reject(O)}finally{--Gn==0&&Qf(),--w.psd.ref||w.psd.finalize()}}function iT(){_i(Ht,function(){_o()&&ko()})}function _o(){var d=qn;return De=qn=!1,d}function ko(){var d,h,w;do for(;0<pr.length;)for(d=pr,pr=[],w=d.length,h=0;h<w;++h){var S=d[h];S[0].apply(null,S[1])}while(0<pr.length);De=qn=!0}function Qf(){var d=Ve;Ve=[],d.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)});for(var h=Es.slice(0),w=h.length;w;)h[--w]()}function Gu(d){return new Pe(ke,!1,d)}function vt(d,h){var w=Le;return function(){var S=_o(),T=Le;try{return Ps(w,!0),d.apply(this,arguments)}catch(O){h&&h(O)}finally{Ps(T,!1),S&&ko()}}}p(Pe.prototype,{then:Jr,_then:function(d,h){Gf(this,new jr(null,null,d,h,Le))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,w=arguments[1];return typeof h=="function"?this.then(null,function(S){return(S instanceof h?w:Gu)(S)}):this.then(null,function(S){return(S&&S.name===h?w:Gu)(S)})},finally:function(d){return this.then(function(h){return Pe.resolve(d()).then(function(){return h})},function(h){return Pe.resolve(d()).then(function(){return Gu(h)})})},timeout:function(d,h){var w=this;return d<1/0?new Pe(function(S,T){var O=setTimeout(function(){return T(new pe.Timeout(h))},d);w.then(S,T).finally(clearTimeout.bind(null,O))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(Pe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ht.env=Iv(),p(Pe,{all:function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(h,w){d.length===0&&h([]);var S=d.length;d.forEach(function(T,O){return Pe.resolve(T).then(function(D){d[O]=D,--S||h(d)},w)})})},resolve:function(d){return d instanceof Pe?d:d&&typeof d.then=="function"?new Pe(function(h,w){d.then(h,w)}):new Pe(ke,!0,d)},reject:Gu,race:function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(h,w){d.map(function(S){return Pe.resolve(S).then(h,w)})})},PSD:{get:function(){return Le},set:function(d){return Le=d}},totalEchoes:{get:function(){return Ju}},newPSD:Cs,usePSD:_i,scheduler:{get:function(){return Rt},set:function(d){Rt=d}},rejectionMapper:{get:function(){return sn},set:function(d){sn=d}},follow:function(d,h){return new Pe(function(w,S){return Cs(function(T,O){var D=Le;D.unhandleds=[],D.onunhandled=O,D.finalize=ge(function(){var B,V=this;B=function(){V.unhandleds.length===0?T():O(V.unhandleds[0])},Es.push(function W(){B(),Es.splice(Es.indexOf(W),1)}),++Gn,Rt(function(){--Gn==0&&Qf()},[])},D.finalize),d()},h,w,S)})}}),rt&&(rt.allSettled&&_(Pe,"allSettled",function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(h){d.length===0&&h([]);var w=d.length,S=new Array(w);d.forEach(function(T,O){return Pe.resolve(T).then(function(D){return S[O]={status:"fulfilled",value:D}},function(D){return S[O]={status:"rejected",reason:D}}).then(function(){return--w||h(S)})})})}),rt.any&&typeof AggregateError<"u"&&_(Pe,"any",function(){var d=ye.apply(null,arguments).map(Zu);return new Pe(function(h,w){d.length===0&&w(new AggregateError([]));var S=d.length,T=new Array(S);d.forEach(function(O,D){return Pe.resolve(O).then(function(B){return h(B)},function(B){T[D]=B,--S||w(new AggregateError(T))})})})}),rt.withResolvers&&(Pe.withResolvers=rt.withResolvers));var qt={awaits:0,echoes:0,id:0},oT=0,Qu=[],Yu=0,Ju=0,aT=0;function Cs(d,h,w,S){var T=Le,O=Object.create(T);return O.parent=T,O.ref=0,O.global=!1,O.id=++aT,Ht.env,O.env=Xe?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,allSettled:Pe.allSettled,any:Pe.any,resolve:Pe.resolve,reject:Pe.reject}:{},h&&l(O,h),++T.ref,O.finalize=function(){--this.parent.ref||this.parent.finalize()},S=_i(O,d,w,S),O.ref===0&&O.finalize(),S}function So(){return qt.id||(qt.id=++oT),++qt.awaits,qt.echoes+=Ne,qt.id}function Ts(){return!!qt.awaits&&(--qt.awaits==0&&(qt.id=0),qt.echoes=qt.awaits*Ne,!0)}function Zu(d){return qt.echoes&&d&&d.constructor===rt?(So(),d.then(function(h){return Ts(),h},function(h){return Ts(),jt(h)})):d}function lT(){var d=Qu[Qu.length-1];Qu.pop(),Ps(d,!1)}function Ps(d,h){var w,S=Le;(h?!qt.echoes||Yu++&&d===Le:!Yu||--Yu&&d===Le)||queueMicrotask(h?(function(T){++Ju,qt.echoes&&--qt.echoes!=0||(qt.echoes=qt.awaits=qt.id=0),Qu.push(Le),Ps(T,!0)}).bind(null,d):lT),d!==Le&&(Le=d,S===Ht&&(Ht.env=Iv()),Xe&&(w=Ht.env.Promise,h=d.env,(S.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),w.all=h.all,w.race=h.race,w.resolve=h.resolve,w.reject=h.reject,h.allSettled&&(w.allSettled=h.allSettled),h.any&&(w.any=h.any))))}function Iv(){var d=i.Promise;return Xe?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function _i(d,h,w,S,T){var O=Le;try{return Ps(d,!0),h(w,S,T)}finally{Ps(O,!1)}}function Dv(d,h,w,S){return typeof d!="function"?d:function(){var T=Le;w&&So(),Ps(h,!0);try{return d.apply(this,arguments)}finally{Ps(T,!1),S&&queueMicrotask(Ts)}}}function Yf(d){Promise===rt&&qt.echoes===0?Yu===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Qn).indexOf("[native code]")===-1&&(So=Ts=We);var jt=Pe.reject,ki="",Zr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Nv="String expected.",Eo=[],Xu="__dbnames",Jf="readonly",Zf="readwrite";function Si(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var Lv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ec(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=re(h))[d],h}}function $v(){throw pe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function it(d,h){try{var w=Mv(d),S=Mv(h);if(w!==S)return w==="Array"?1:S==="Array"?-1:w==="binary"?1:S==="binary"?-1:w==="string"?1:S==="string"?-1:w==="Date"?1:S!=="Date"?NaN:-1;switch(w){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return function(T,O){for(var D=T.length,B=O.length,V=D<B?D:B,W=0;W<V;++W)if(T[W]!==O[W])return T[W]<O[W]?-1:1;return D===B?0:D<B?-1:1}(Fv(d),Fv(h));case"Array":return function(T,O){for(var D=T.length,B=O.length,V=D<B?D:B,W=0;W<V;++W){var X=it(T[W],O[W]);if(X!==0)return X}return D===B?0:D<B?-1:1}(d,h)}}catch{}return NaN}function Mv(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=G(d),d==="ArrayBuffer"?"binary":d)}function Fv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function tc(d,h,w){var S=d.schema.yProps;return S?(h&&0<w.numFailures&&(h=h.filter(function(T,O){return!w.failures[O]})),Promise.all(S.map(function(T){return T=T.updatesTable,h?d.db.table(T).where("k").anyOf(h).delete():d.db.table(T).clear()})).then(function(){return w})):w}var Ha=(Bv.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var w=h.add;if(a(w))return s(s([],a(d)?d:[],!0),w).sort();if(typeof w=="number")return(Number(d)||0)+w;if(typeof w=="bigint")try{return BigInt(d)+w}catch{return BigInt(0)+w}throw new TypeError("Invalid term ".concat(w))}if(h.remove!==void 0){var S=h.remove;if(a(S))return a(d)?d.filter(function(T){return!S.includes(T)}).sort():[];if(typeof S=="number")return Number(d)-S;if(typeof S=="bigint")try{return BigInt(d)-S}catch{return BigInt(0)-S}throw new TypeError("Invalid subtrahend ".concat(S))}return w=(w=h.replacePrefix)===null||w===void 0?void 0:w[0],w&&typeof d=="string"&&d.startsWith(w)?h.replacePrefix[1]+d.substring(w.length):d},Bv);function Bv(d){this["@@propmod"]=d}function Uv(d,h){for(var w=o(h),S=w.length,T=!1,O=0;O<S;++O){var D=w[O],B=h[D],V=I(d,D);B instanceof Ha?(j(d,D,B.execute(V)),T=!0):V!==B&&(j(d,D,B),T=!0)}return T}var zv=(ht.prototype._trans=function(d,h,w){var S=this._tx||Le.trans,T=this.name,O=we&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function D(W,X,U){if(!U.schema[T])throw new pe.NotFound("Table "+T+" not part of transaction");return h(U.idbtrans,U)}var B=_o();try{var V=S&&S.db._novip===this.db._novip?S===Le.trans?S._promise(d,D,w):Cs(function(){return S._promise(d,D,w)},{trans:S,transless:Le.transless||Le}):function W(X,U,ne,q){if(X.idbdb&&(X._state.openComplete||Le.letThrough||X._vip)){var Q=X._createTransaction(U,ne,X._dbSchema);try{Q.create(),X._state.PR1398_maxLoop=3}catch(Y){return Y.name===$e.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return W(X,U,ne,q)})):jt(Y)}return Q._promise(U,function(Y,te){return Cs(function(){return Le.trans=Q,q(Y,te,Q)})}).then(function(Y){if(U==="readwrite")try{Q.idbtrans.commit()}catch{}return U==="readonly"?Y:Q._completion.then(function(){return Y})})}if(X._state.openComplete)return jt(new pe.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return jt(new pe.DatabaseClosed);X.open().catch(We)}return X._state.dbReadyPromise.then(function(){return W(X,U,ne,q)})}(this.db,d,[this.name],D);return O&&(V._consoleTask=O,V=V.catch(function(W){return console.trace(W),jt(W)})),V}finally{B&&ko()}},ht.prototype.get=function(d,h){var w=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?jt(new pe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return w.core.get({trans:S,key:d}).then(function(T){return w.hook.reading.fire(T)})}).then(h)},ht.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var w=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&h.every(function(W){return 0<=B.keyPath.indexOf(W)})){for(var V=0;V<h.length;++V)if(h.indexOf(B.keyPath[V])===-1)return!1;return!0}return!1}).sort(function(B,V){return B.keyPath.length-V.keyPath.length})[0];if(w&&this.db._maxKey!==ki){var O=w.keyPath.slice(0,h.length);return this.where(O).equals(O.map(function(V){return d[V]}))}!w&&we&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var S=this.schema.idxByName;function T(B,V){return it(B,V)===0}var D=h.reduce(function(U,V){var W=U[0],X=U[1],U=S[V],ne=d[V];return[W||U,W||!U?Si(X,U&&U.multi?function(q){return q=I(q,V),a(q)&&q.some(function(Q){return T(ne,Q)})}:function(q){return T(ne,I(q,V))}):X]},[null,null]),O=D[0],D=D[1];return O?this.where(O.name).equals(d[O.keyPath]).filter(D):w?this.filter(D):this.where(h).equals("")},ht.prototype.filter=function(d){return this.toCollection().and(d)},ht.prototype.count=function(d){return this.toCollection().count(d)},ht.prototype.offset=function(d){return this.toCollection().offset(d)},ht.prototype.limit=function(d){return this.toCollection().limit(d)},ht.prototype.each=function(d){return this.toCollection().each(d)},ht.prototype.toArray=function(d){return this.toCollection().toArray(d)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(d){var h,w=this.db,S=this.name;function T(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof $v&&(function(V,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function X(){this.constructor=V}n(V,W),V.prototype=W===null?Object.create(W):(X.prototype=W.prototype,new X)}(T,h=d),Object.defineProperty(T.prototype,"db",{get:function(){return w},enumerable:!1,configurable:!0}),T.prototype.table=function(){return S},d=T);for(var O=new Set,D=d.prototype;D;D=u(D))Object.getOwnPropertyNames(D).forEach(function(V){return O.add(V)});function B(V){if(!V)return V;var W,X=Object.create(d.prototype);for(W in V)if(!O.has(W))try{X[W]=V[W]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),d},ht.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},ht.prototype.add=function(d,h){var w=this,S=this.schema.primKey,T=S.auto,O=S.keyPath,D=d;return O&&T&&(D=ec(O)(d)),this._trans("readwrite",function(B){return w.core.mutate({trans:B,type:"add",keys:h!=null?[h]:null,values:[D]})}).then(function(B){return B.numFailures?Pe.reject(B.failures[0]):B.lastResult}).then(function(B){if(O)try{j(d,O,B)}catch{}return B})},ht.prototype.upsert=function(d,h){var w=this,S=this.schema.primKey.keyPath;return this._trans("readwrite",function(T){return w.core.get({trans:T,key:d}).then(function(O){var D=O??{};return Uv(D,h),S&&j(D,S,d),w.core.mutate({trans:T,type:"put",values:[D],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[h]}}).then(function(B){return B.numFailures?Pe.reject(B.failures[0]):!!O})})})},ht.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=I(d,this.schema.primKey.keyPath),d===void 0?jt(new pe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},ht.prototype.put=function(d,h){var w=this,S=this.schema.primKey,T=S.auto,O=S.keyPath,D=d;return O&&T&&(D=ec(O)(d)),this._trans("readwrite",function(B){return w.core.mutate({trans:B,type:"put",values:[D],keys:h!=null?[h]:null})}).then(function(B){return B.numFailures?Pe.reject(B.failures[0]):B.lastResult}).then(function(B){if(O)try{j(d,O,B)}catch{}return B})},ht.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(w){return h.core.mutate({trans:w,type:"delete",keys:[d]}).then(function(S){return tc(h,[d],S)}).then(function(S){return S.numFailures?Pe.reject(S.failures[0]):void 0})})},ht.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:Lv}).then(function(w){return tc(d,null,w)})}).then(function(h){return h.numFailures?Pe.reject(h.failures[0]):void 0})},ht.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(w){return h.core.getMany({keys:d,trans:w}).then(function(S){return S.map(function(T){return h.hook.reading.fire(T)})})})},ht.prototype.bulkAdd=function(d,h,w){var S=this,T=Array.isArray(h)?h:void 0,O=(w=w||(T?void 0:h))?w.allKeys:void 0;return this._trans("readwrite",function(D){var W=S.schema.primKey,B=W.auto,W=W.keyPath;if(W&&T)throw new pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var V=d.length,W=W&&B?d.map(ec(W)):d;return S.core.mutate({trans:D,type:"add",keys:T,values:W,wantResults:O}).then(function(Q){var U=Q.numFailures,ne=Q.results,q=Q.lastResult,Q=Q.failures;if(U===0)return O?ne:q;throw new _e("".concat(S.name,".bulkAdd(): ").concat(U," of ").concat(V," operations failed"),Q)})})},ht.prototype.bulkPut=function(d,h,w){var S=this,T=Array.isArray(h)?h:void 0,O=(w=w||(T?void 0:h))?w.allKeys:void 0;return this._trans("readwrite",function(D){var W=S.schema.primKey,B=W.auto,W=W.keyPath;if(W&&T)throw new pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var V=d.length,W=W&&B?d.map(ec(W)):d;return S.core.mutate({trans:D,type:"put",keys:T,values:W,wantResults:O}).then(function(Q){var U=Q.numFailures,ne=Q.results,q=Q.lastResult,Q=Q.failures;if(U===0)return O?ne:q;throw new _e("".concat(S.name,".bulkPut(): ").concat(U," of ").concat(V," operations failed"),Q)})})},ht.prototype.bulkUpdate=function(d){var h=this,w=this.core,S=d.map(function(D){return D.key}),T=d.map(function(D){return D.changes}),O=[];return this._trans("readwrite",function(D){return w.getMany({trans:D,keys:S,cache:"clone"}).then(function(B){var V=[],W=[];d.forEach(function(U,ne){var q=U.key,Q=U.changes,Y=B[ne];if(Y){for(var te=0,ie=Object.keys(Q);te<ie.length;te++){var ue=ie[te],he=Q[ue];if(ue===h.schema.primKey.keyPath){if(it(he,q)!==0)throw new pe.Constraint("Cannot update primary key in bulkUpdate()")}else j(Y,ue,he)}O.push(ne),V.push(q),W.push(Y)}});var X=V.length;return w.mutate({trans:D,type:"put",keys:V,values:W,updates:{keys:S,changeSpecs:T}}).then(function(U){var ne=U.numFailures,q=U.failures;if(ne===0)return X;for(var Q=0,Y=Object.keys(q);Q<Y.length;Q++){var te,ie=Y[Q],ue=O[Number(ie)];ue!=null&&(te=q[ie],delete q[ie],q[ue]=te)}throw new _e("".concat(h.name,".bulkUpdate(): ").concat(ne," of ").concat(X," operations failed"),q)})})})},ht.prototype.bulkDelete=function(d){var h=this,w=d.length;return this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"delete",keys:d}).then(function(T){return tc(h,d,T)})}).then(function(D){var T=D.numFailures,O=D.lastResult,D=D.failures;if(T===0)return O;throw new _e("".concat(h.name,".bulkDelete(): ").concat(T," of ").concat(w," operations failed"),D)})},ht);function ht(){}function qa(d){function h(D,B){if(B){for(var V=arguments.length,W=new Array(V-1);--V;)W[V-1]=arguments[V];return w[D].subscribe.apply(null,W),d}if(typeof D=="string")return w[D]}var w={};h.addEventType=O;for(var S=1,T=arguments.length;S<T;++S)O(arguments[S]);return h;function O(D,B,V){if(typeof D!="object"){var W;B=B||ee;var X={subscribers:[],fire:V=V||We,subscribe:function(U){X.subscribers.indexOf(U)===-1&&(X.subscribers.push(U),X.fire=B(X.fire,U))},unsubscribe:function(U){X.subscribers=X.subscribers.filter(function(ne){return ne!==U}),X.fire=X.subscribers.reduce(B,V)}};return w[D]=h[D]=X}o(W=D).forEach(function(U){var ne=W[U];if(a(ne))O(U,W[U][0],W[U][1]);else{if(ne!=="asap")throw new pe.InvalidArgument("Invalid event config");var q=O(U,Tt,function(){for(var Q=arguments.length,Y=new Array(Q);Q--;)Y[Q]=arguments[Q];q.subscribers.forEach(function(te){R(function(){te.apply(null,Y)})})})}})}}function Ga(d,h){return v(h).from({prototype:d}),h}function Co(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Xf(d,h){d.filter=Si(d.filter,h)}function eh(d,h,w){var S=d.replayFilter;d.replayFilter=S?function(){return Si(S(),h())}:h,d.justLimit=w&&!S}function nc(d,h){if(d.isPrimKey)return h.primaryKey;var w=h.getIndexByKeyPath(d.index);if(!w)throw new pe.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return w}function Vv(d,h,w){var S=nc(d,h.schema);return h.openCursor({trans:w,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:S,range:d.range}})}function rc(d,h,w,S){var T=d.replayFilter?Si(d.filter,d.replayFilter()):d.filter;if(d.or){var O={},D=function(B,V,W){var X,U;T&&!T(V,W,function(ne){return V.stop(ne)},function(ne){return V.fail(ne)})||((U=""+(X=V.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(X)),f(O,U)||(O[U]=!0,h(B,V,W)))};return Promise.all([d.or._iterate(D,w),Kv(Vv(d,S,w),d.algorithm,D,!d.keysOnly&&d.valueMapper)])}return Kv(Vv(d,S,w),Si(d.algorithm,T),h,!d.keysOnly&&d.valueMapper)}function Kv(d,h,w,S){var T=vt(S?function(O,D,B){return w(S(O),D,B)}:w);return d.then(function(O){if(O)return O.start(function(){var D=function(){return O.continue()};h&&!h(O,function(B){return D=B},function(B){O.stop(B),D=We},function(B){O.fail(B),D=We})||T(O.value,O,function(B){return D=B}),D()})})}var uT=(ut.prototype._read=function(d,h){var w=this._ctx;return w.error?w.table._trans(null,jt.bind(null,w.error)):w.table._trans("readonly",d).then(h)},ut.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,jt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ut.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=Si(h.algorithm,d)},ut.prototype._iterate=function(d,h){return rc(this._ctx,d,h,this._ctx.table.core)},ut.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),w=Object.create(this._ctx);return d&&l(w,d),h._ctx=w,h},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(d){var h=this._ctx;return this._read(function(w){return rc(h,d,w,h.table.core)})},ut.prototype.count=function(d){var h=this;return this._read(function(w){var S=h._ctx,T=S.table.core;if(Co(S,!0))return T.count({trans:w,query:{index:nc(S,T.schema),range:S.range}}).then(function(D){return Math.min(D,S.limit)});var O=0;return rc(S,function(){return++O,!1},w,T).then(function(){return O})}).then(d)},ut.prototype.sortBy=function(d,h){var w=d.split(".").reverse(),S=w[0],T=w.length-1;function O(V,W){return W?O(V[w[W]],W-1):V[S]}var D=this._ctx.dir==="next"?1:-1;function B(V,W){return it(O(V,T),O(W,T))*D}return this.toArray(function(V){return V.sort(B)}).then(h)},ut.prototype.toArray=function(d){var h=this;return this._read(function(w){var S=h._ctx;if(S.dir==="next"&&Co(S,!0)&&0<S.limit){var T=S.valueMapper,O=nc(S,S.table.core.schema);return S.table.core.query({trans:w,limit:S.limit,values:!0,query:{index:O,range:S.range}}).then(function(B){return B=B.result,T?B.map(T):B})}var D=[];return rc(S,function(B){return D.push(B)},w,S.table.core).then(function(){return D})},d)},ut.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,Co(h)?eh(h,function(){var w=d;return function(S,T){return w===0||(w===1?--w:T(function(){S.advance(w),w=0}),!1)}}):eh(h,function(){var w=d;return function(){return--w<0}})),this},ut.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),eh(this._ctx,function(){var h=d;return function(w,S,T){return--h<=0&&S(T),0<=h}},!0),this},ut.prototype.until=function(d,h){return Xf(this._ctx,function(w,S,T){return!d(w.value)||(S(T),h)}),this},ut.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ut.prototype.last=function(d){return this.reverse().first(d)},ut.prototype.filter=function(d){var h;return Xf(this._ctx,function(w){return d(w.value)}),(h=this._ctx).isMatch=Si(h.isMatch,d),this},ut.prototype.and=function(d){return this.filter(d)},ut.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(w,S){d(S.key,S)})},ut.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ut.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(w,S){d(S.primaryKey,S)})},ut.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var w=[];return this.each(function(S,T){w.push(T.key)}).then(function(){return w}).then(d)},ut.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&Co(h,!0)&&0<h.limit)return this._read(function(S){var T=nc(h,h.table.core.schema);return h.table.core.query({trans:S,values:!1,limit:h.limit,query:{index:T,range:h.range}})}).then(function(S){return S.result}).then(d);h.keysOnly=!h.isMatch;var w=[];return this.each(function(S,T){w.push(T.primaryKey)}).then(function(){return w}).then(d)},ut.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ut.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ut.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ut.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Xf(this._ctx,function(T){var S=T.primaryKey.toString(),T=f(h,S);return h[S]=!0,!T}),this},ut.prototype.modify=function(d){var h=this,w=this._ctx;return this._write(function(S){var T=typeof d=="function"?d:function(Y){return Uv(Y,d)},O=w.table.core,W=O.schema.primaryKey,D=W.outbound,B=W.extractKey,V=200,W=h.db._options.modifyChunkSize;W&&(V=typeof W=="object"?W[O.name]||W["*"]||200:W);function X(Y,ue){var ie=ue.failures,ue=ue.numFailures;ne+=Y-ue;for(var he=0,xe=o(ie);he<xe.length;he++){var Te=xe[he];U.push(ie[Te])}}var U=[],ne=0,q=[],Q=d===Wv;return h.clone().primaryKeys().then(function(Y){function te(ue){var he=Math.min(V,Y.length-ue),xe=Y.slice(ue,ue+he);return(Q?Promise.resolve([]):O.getMany({trans:S,keys:xe,cache:"immutable"})).then(function(Te){var je=[],Ce=[],Ae=D?[]:null,Ie=Q?xe:[];if(!Q)for(var Oe=0;Oe<he;++Oe){var Fe=Te[Oe],Je={value:re(Fe),primKey:Y[ue+Oe]};T.call(Je,Je.value,Je)!==!1&&(Je.value==null?Ie.push(Y[ue+Oe]):D||it(B(Fe),B(Je.value))===0?(Ce.push(Je.value),D&&Ae.push(Y[ue+Oe])):(Ie.push(Y[ue+Oe]),je.push(Je.value)))}return Promise.resolve(0<je.length&&O.mutate({trans:S,type:"add",values:je}).then(function(tt){for(var nt in tt.failures)Ie.splice(parseInt(nt),1);X(je.length,tt)})).then(function(){return(0<Ce.length||ie&&typeof d=="object")&&O.mutate({trans:S,type:"put",keys:Ae,values:Ce,criteria:ie,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ue}).then(function(tt){return X(Ce.length,tt)})}).then(function(){return(0<Ie.length||ie&&Q)&&O.mutate({trans:S,type:"delete",keys:Ie,criteria:ie,isAdditionalChunk:0<ue}).then(function(tt){return tc(w.table,Ie,tt)}).then(function(tt){return X(Ie.length,tt)})}).then(function(){return Y.length>ue+he&&te(ue+V)})})}var ie=Co(w)&&w.limit===1/0&&(typeof d!="function"||Q)&&{index:w.index,range:w.range};return te(0).then(function(){if(0<U.length)throw new oe("Error modifying one or more objects",U,ne,q);return Y.length})})})},ut.prototype.delete=function(){var d=this._ctx,h=d.range;return!Co(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Wv):this._write(function(w){var S=d.table.core.schema.primaryKey,T=h;return d.table.core.count({trans:w,query:{index:S,range:T}}).then(function(O){return d.table.core.mutate({trans:w,type:"deleteRange",range:T}).then(function(V){var B=V.failures,V=V.numFailures;if(V)throw new oe("Could not delete some values",Object.keys(B).map(function(W){return B[W]}),O-V);return O-V})})})},ut);function ut(){}var Wv=function(d,h){return h.value=null};function cT(d,h){return d<h?-1:d===h?0:1}function dT(d,h){return h<d?-1:d===h?0:1}function $n(d,h,w){return d=d instanceof qv?new d.Collection(d):d,d._ctx.error=new(w||TypeError)(h),d}function To(d){return new d.Collection(d,function(){return Hv("")}).limit(0)}function sc(d,h,w,S){var T,O,D,B,V,W,X,U=w.length;if(!w.every(function(Q){return typeof Q=="string"}))return $n(d,Nv);function ne(Q){T=Q==="next"?function(te){return te.toUpperCase()}:function(te){return te.toLowerCase()},O=Q==="next"?function(te){return te.toLowerCase()}:function(te){return te.toUpperCase()},D=Q==="next"?cT:dT;var Y=w.map(function(te){return{lower:O(te),upper:T(te)}}).sort(function(te,ie){return D(te.lower,ie.lower)});B=Y.map(function(te){return te.upper}),V=Y.map(function(te){return te.lower}),X=(W=Q)==="next"?"":S}ne("next"),d=new d.Collection(d,function(){return As(B[0],V[U-1]+S)}),d._ondirectionchange=function(Q){ne(Q)};var q=0;return d._addAlgorithm(function(Q,Y,te){var ie=Q.key;if(typeof ie!="string")return!1;var ue=O(ie);if(h(ue,V,q))return!0;for(var he=null,xe=q;xe<U;++xe){var Te=function(je,Ce,Ae,Ie,Oe,Fe){for(var Je=Math.min(je.length,Ie.length),tt=-1,nt=0;nt<Je;++nt){var Mn=Ce[nt];if(Mn!==Ie[nt])return Oe(je[nt],Ae[nt])<0?je.substr(0,nt)+Ae[nt]+Ae.substr(nt+1):Oe(je[nt],Ie[nt])<0?je.substr(0,nt)+Ie[nt]+Ae.substr(nt+1):0<=tt?je.substr(0,tt)+Ce[tt]+Ae.substr(tt+1):null;Oe(je[nt],Mn)<0&&(tt=nt)}return Je<Ie.length&&Fe==="next"?je+Ae.substr(je.length):Je<je.length&&Fe==="prev"?je.substr(0,Ae.length):tt<0?null:je.substr(0,tt)+Ie[tt]+Ae.substr(tt+1)}(ie,ue,B[xe],V[xe],D,W);Te===null&&he===null?q=xe+1:(he===null||0<D(he,Te))&&(he=Te)}return Y(he!==null?function(){Q.continue(he+X)}:te),!1}),d}function As(d,h,w,S){return{type:2,lower:d,upper:h,lowerOpen:w,upperOpen:S}}function Hv(d){return{type:1,lower:d,upper:d}}var qv=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(d,h,w,S){w=w!==!1,S=S===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(w||S)&&(!w||!S)?To(this):new this.Collection(this,function(){return As(d,h,!w,!S)})}catch{return $n(this,Zr)}},Gt.prototype.equals=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return Hv(d)})},Gt.prototype.above=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(d,void 0,!0)})},Gt.prototype.aboveOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(d,void 0,!1)})},Gt.prototype.below=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(void 0,d,!1,!0)})},Gt.prototype.belowOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(void 0,d)})},Gt.prototype.startsWith=function(d){return typeof d!="string"?$n(this,Nv):this.between(d,d+ki,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):sc(this,function(h,w){return h.indexOf(w[0])===0},[d],ki)},Gt.prototype.equalsIgnoreCase=function(d){return sc(this,function(h,w){return h===w[0]},[d],"")},Gt.prototype.anyOfIgnoreCase=function(){var d=ye.apply(se,arguments);return d.length===0?To(this):sc(this,function(h,w){return w.indexOf(h)!==-1},d,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var d=ye.apply(se,arguments);return d.length===0?To(this):sc(this,function(h,w){return w.some(function(S){return h.indexOf(S)===0})},d,ki)},Gt.prototype.anyOf=function(){var d=this,h=ye.apply(se,arguments),w=this._cmp;try{h.sort(w)}catch{return $n(this,Zr)}if(h.length===0)return To(this);var S=new this.Collection(this,function(){return As(h[0],h[h.length-1])});S._ondirectionchange=function(O){w=O==="next"?d._ascending:d._descending,h.sort(w)};var T=0;return S._addAlgorithm(function(O,D,B){for(var V=O.key;0<w(V,h[T]);)if(++T===h.length)return D(B),!1;return w(V,h[T])===0||(D(function(){O.continue(h[T])}),!1)}),S},Gt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var d=ye.apply(se,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return $n(this,Zr)}var h=d.reduce(function(w,S){return w?w.concat([[w[w.length-1][1],S]]):[[-1/0,S]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(ie,h){var w=this,S=this._cmp,T=this._ascending,O=this._descending,D=this._min,B=this._max;if(ie.length===0)return To(this);if(!ie.every(function(ue){return ue[0]!==void 0&&ue[1]!==void 0&&T(ue[0],ue[1])<=0}))return $n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pe.InvalidArgument);var V=!h||h.includeLowers!==!1,W=h&&h.includeUppers===!0,X,U=T;function ne(ue,he){return U(ue[0],he[0])}try{(X=ie.reduce(function(ue,he){for(var xe=0,Te=ue.length;xe<Te;++xe){var je=ue[xe];if(S(he[0],je[1])<0&&0<S(he[1],je[0])){je[0]=D(je[0],he[0]),je[1]=B(je[1],he[1]);break}}return xe===Te&&ue.push(he),ue},[])).sort(ne)}catch{return $n(this,Zr)}var q=0,Q=W?function(ue){return 0<T(ue,X[q][1])}:function(ue){return 0<=T(ue,X[q][1])},Y=V?function(ue){return 0<O(ue,X[q][0])}:function(ue){return 0<=O(ue,X[q][0])},te=Q,ie=new this.Collection(this,function(){return As(X[0][0],X[X.length-1][1],!V,!W)});return ie._ondirectionchange=function(ue){U=ue==="next"?(te=Q,T):(te=Y,O),X.sort(ne)},ie._addAlgorithm(function(ue,he,xe){for(var Te,je=ue.key;te(je);)if(++q===X.length)return he(xe),!1;return!Q(Te=je)&&!Y(Te)||(w._cmp(je,X[q][1])===0||w._cmp(je,X[q][0])===0||he(function(){U===T?ue.continue(X[q][0]):ue.continue(X[q][1])}),!1)}),ie},Gt.prototype.startsWithAnyOf=function(){var d=ye.apply(se,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?To(this):this.inAnyRange(d.map(function(h){return[h,h+ki]})):$n(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Ir(d){return vt(function(h){return Qa(h),d(h.target.error),!1})}function Qa(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Ya="storagemutated",th="x-storagemutated-1",Os=qa(null,Ya),fT=(Dr.prototype._lock=function(){return C(!Le.global),++this._reculock,this._reculock!==1||Le.global||(Le.lockOwnerFor=this),this},Dr.prototype._unlock=function(){if(C(!Le.global),--this._reculock==0)for(Le.global||(Le.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{_i(d[1],d[0])}catch{}}return this},Dr.prototype._locked=function(){return this._reculock&&Le.lockOwnerFor!==this},Dr.prototype.create=function(d){var h=this;if(!this.mode)return this;var w=this.db.idbdb,S=this.db._state.dbOpenError;if(C(!this.idbtrans),!d&&!w)switch(S&&S.name){case"DatabaseClosedError":throw new pe.DatabaseClosed(S);case"MissingAPIError":throw new pe.MissingAPI(S.message,S);default:throw new pe.OpenFailed(S)}if(!this.active)throw new pe.TransactionInactive;return C(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||w).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(T){Qa(T),h._reject(d.error)}),d.onabort=vt(function(T){Qa(T),h.active&&h._reject(new pe.Abort(d.error)),h.active=!1,h.on("abort").fire(T)}),d.oncomplete=vt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Os.storagemutated.fire(d.mutatedParts)}),this},Dr.prototype._promise=function(d,h,w){var S=this;if(d==="readwrite"&&this.mode!=="readwrite")return jt(new pe.ReadOnly("Transaction is readonly"));if(!this.active)return jt(new pe.TransactionInactive);if(this._locked())return new Pe(function(O,D){S._blockedFuncs.push([function(){S._promise(d,h,w).then(O,D)},Le])});if(w)return Cs(function(){var O=new Pe(function(D,B){S._lock();var V=h(D,B,S);V&&V.then&&V.then(D,B)});return O.finally(function(){return S._unlock()}),O._lib=!0,O});var T=new Pe(function(O,D){var B=h(O,D,S);B&&B.then&&B.then(O,D)});return T._lib=!0,T},Dr.prototype._root=function(){return this.parent?this.parent._root():this},Dr.prototype.waitFor=function(d){var h,w=this._root(),S=Pe.resolve(d);w._waitingFor?w._waitingFor=w._waitingFor.then(function(){return S}):(w._waitingFor=S,w._waitingQueue=[],h=w.idbtrans.objectStore(w.storeNames[0]),function O(){for(++w._spinCount;w._waitingQueue.length;)w._waitingQueue.shift()();w._waitingFor&&(h.get(-1/0).onsuccess=O)}());var T=w._waitingFor;return new Pe(function(O,D){S.then(function(B){return w._waitingQueue.push(vt(O.bind(null,B)))},function(B){return w._waitingQueue.push(vt(D.bind(null,B)))}).finally(function(){w._waitingFor===T&&(w._waitingFor=null)})})},Dr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pe.Abort))},Dr.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var w=this.schema[d];if(!w)throw new pe.NotFound("Table "+d+" not part of transaction");return w=new this.db.Table(d,w,this),w.core=this.db.core.table(d),h[d]=w},Dr);function Dr(){}function nh(d,h,w,S,T,O,D,B){return{name:d,keyPath:h,unique:w,multi:S,auto:T,compound:O,src:(w&&!D?"&":"")+(S?"*":"")+(T?"++":"")+Gv(h),type:B}}function Gv(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function rh(d,h,w){return{name:d,primKey:h,indexes:w,mappedClass:null,idxByName:(S=function(T){return[T.name,T]},w.reduce(function(T,O,D){return D=S(O,D),D&&(T[D[0]]=D[1]),T},{}))};var S}var Ja=function(d){try{return d.only([[]]),Ja=function(){return[[]]},[[]]}catch{return Ja=function(){return ki},ki}};function sh(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(w){return w[h]}:function(w){return I(w,h)}:function(w){return I(w,d)};var h}function Qv(d){return[].slice.call(d)}var hT=0;function Za(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function pT(d,h,V){function S(te){if(te.type===3)return null;if(te.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var q=te.lower,Q=te.upper,Y=te.lowerOpen,te=te.upperOpen;return q===void 0?Q===void 0?null:h.upperBound(Q,!!te):Q===void 0?h.lowerBound(q,!!Y):h.bound(q,Q,!!Y,!!te)}function T(ne){var q,Q=ne.name;return{name:Q,schema:ne,mutate:function(Y){var te=Y.trans,ie=Y.type,ue=Y.keys,he=Y.values,xe=Y.range;return new Promise(function(Te,je){Te=vt(Te);var Ce=te.objectStore(Q),Ae=Ce.keyPath==null,Ie=ie==="put"||ie==="add";if(!Ie&&ie!=="delete"&&ie!=="deleteRange")throw new Error("Invalid operation type: "+ie);var Oe,Fe=(ue||he||{length:1}).length;if(ue&&he&&ue.length!==he.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Te({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(gn){++Mn,Qa(gn)}var tt=[],nt=[],Mn=0;if(ie==="deleteRange"){if(xe.type===4)return Te({numFailures:Mn,failures:nt,results:[],lastResult:void 0});xe.type===3?tt.push(Oe=Ce.clear()):tt.push(Oe=Ce.delete(S(xe)))}else{var Ae=Ie?Ae?[he,ue]:[he,null]:[ue,null],Qe=Ae[0],an=Ae[1];if(Ie)for(var ln=0;ln<Fe;++ln)tt.push(Oe=an&&an[ln]!==void 0?Ce[ie](Qe[ln],an[ln]):Ce[ie](Qe[ln])),Oe.onerror=Je;else for(ln=0;ln<Fe;++ln)tt.push(Oe=Ce[ie](Qe[ln])),Oe.onerror=Je}function gc(gn){gn=gn.target.result,tt.forEach(function(Ti,_h){return Ti.error!=null&&(nt[_h]=Ti.error)}),Te({numFailures:Mn,failures:nt,results:ie==="delete"?ue:tt.map(function(Ti){return Ti.result}),lastResult:gn})}Oe.onerror=function(gn){Je(gn),gc(gn)},Oe.onsuccess=gc})},getMany:function(Y){var te=Y.trans,ie=Y.keys;return new Promise(function(ue,he){ue=vt(ue);for(var xe,Te=te.objectStore(Q),je=ie.length,Ce=new Array(je),Ae=0,Ie=0,Oe=function(tt){tt=tt.target,Ce[tt._pos]=tt.result,++Ie===Ae&&ue(Ce)},Fe=Ir(he),Je=0;Je<je;++Je)ie[Je]!=null&&((xe=Te.get(ie[Je]))._pos=Je,xe.onsuccess=Oe,xe.onerror=Fe,++Ae);Ae===0&&ue(Ce)})},get:function(Y){var te=Y.trans,ie=Y.key;return new Promise(function(ue,he){ue=vt(ue);var xe=te.objectStore(Q).get(ie);xe.onsuccess=function(Te){return ue(Te.target.result)},xe.onerror=Ir(he)})},query:(q=W,function(Y){return new Promise(function(te,ie){te=vt(te);var ue,he,xe,Ae=Y.trans,Te=Y.values,je=Y.limit,Oe=Y.query,Ce=je===1/0?void 0:je,Ie=Oe.index,Oe=Oe.range,Ae=Ae.objectStore(Q),Ie=Ie.isPrimaryKey?Ae:Ae.index(Ie.name),Oe=S(Oe);if(je===0)return te({result:[]});q?((Ce=Te?Ie.getAll(Oe,Ce):Ie.getAllKeys(Oe,Ce)).onsuccess=function(Fe){return te({result:Fe.target.result})},Ce.onerror=Ir(ie)):(ue=0,he=!Te&&"openKeyCursor"in Ie?Ie.openKeyCursor(Oe):Ie.openCursor(Oe),xe=[],he.onsuccess=function(Fe){var Je=he.result;return Je?(xe.push(Te?Je.value:Je.primaryKey),++ue===je?te({result:xe}):void Je.continue()):te({result:xe})},he.onerror=Ir(ie))})}),openCursor:function(Y){var te=Y.trans,ie=Y.values,ue=Y.query,he=Y.reverse,xe=Y.unique;return new Promise(function(Te,je){Te=vt(Te);var Ie=ue.index,Ce=ue.range,Ae=te.objectStore(Q),Ae=Ie.isPrimaryKey?Ae:Ae.index(Ie.name),Ie=he?xe?"prevunique":"prev":xe?"nextunique":"next",Oe=!ie&&"openKeyCursor"in Ae?Ae.openKeyCursor(S(Ce),Ie):Ae.openCursor(S(Ce),Ie);Oe.onerror=Ir(je),Oe.onsuccess=vt(function(Fe){var Je,tt,nt,Mn,Qe=Oe.result;Qe?(Qe.___id=++hT,Qe.done=!1,Je=Qe.continue.bind(Qe),tt=(tt=Qe.continuePrimaryKey)&&tt.bind(Qe),nt=Qe.advance.bind(Qe),Mn=function(){throw new Error("Cursor not stopped")},Qe.trans=te,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=vt(je),Qe.next=function(){var an=this,ln=1;return this.start(function(){return ln--?an.continue():an.stop()}).then(function(){return an})},Qe.start=function(an){function ln(){if(Oe.result)try{an()}catch(gn){Qe.fail(gn)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var gc=new Promise(function(gn,Ti){gn=vt(gn),Oe.onerror=Ir(Ti),Qe.fail=Ti,Qe.stop=function(_h){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=Mn,gn(_h)}});return Oe.onsuccess=vt(function(gn){Oe.onsuccess=ln,ln()}),Qe.continue=Je,Qe.continuePrimaryKey=tt,Qe.advance=nt,ln(),gc},Te(Qe)):Te(null)},je)})},count:function(Y){var te=Y.query,ie=Y.trans,ue=te.index,he=te.range;return new Promise(function(xe,Te){var je=ie.objectStore(Q),Ce=ue.isPrimaryKey?je:je.index(ue.name),je=S(he),Ce=je?Ce.count(je):Ce.count();Ce.onsuccess=vt(function(Ae){return xe(Ae.target.result)}),Ce.onerror=Ir(Te)})}}}var O,D,B,X=(D=V,B=Qv((O=d).objectStoreNames),{schema:{name:O.name,tables:B.map(function(ne){return D.objectStore(ne)}).map(function(ne){var q=ne.keyPath,te=ne.autoIncrement,Q=a(q),Y={},te={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q==null,compound:Q,keyPath:q,autoIncrement:te,unique:!0,extractKey:sh(q)},indexes:Qv(ne.indexNames).map(function(ie){return ne.index(ie)}).map(function(xe){var ue=xe.name,he=xe.unique,Te=xe.multiEntry,xe=xe.keyPath,Te={name:ue,compound:a(xe),keyPath:xe,unique:he,multiEntry:Te,extractKey:sh(xe)};return Y[Za(xe)]=Te}),getIndexByKeyPath:function(ie){return Y[Za(ie)]}};return Y[":id"]=te.primaryKey,q!=null&&(Y[Za(q)]=te.primaryKey),te})},hasGetAll:0<B.length&&"getAll"in D.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),V=X.schema,W=X.hasGetAll,X=V.tables.map(T),U={};return X.forEach(function(ne){return U[ne.name]=ne}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(ne){if(!U[ne])throw new Error("Table '".concat(ne,"' not found"));return U[ne]},MIN_KEY:-1/0,MAX_KEY:Ja(h),schema:V}}function mT(d,h,w,S){var T=w.IDBKeyRange;return w.indexedDB,{dbcore:(S=pT(h,T,S),d.dbcore.reduce(function(O,D){return D=D.create,r(r({},O),D(O))},S))}}function ic(d,S){var w=S.db,S=mT(d._middlewares,w,d._deps,S);d.core=S.dbcore,d.tables.forEach(function(T){var O=T.name;d.core.schema.tables.some(function(D){return D.name===O})&&(T.core=d.core.table(O),d[O]instanceof d.Table&&(d[O].core=T.core))})}function oc(d,h,w,S){w.forEach(function(T){var O=S[T];h.forEach(function(D){var B=function V(W,X){return x(W,X)||(W=u(W))&&V(W,X)}(D,T);(!B||"value"in B&&B.value===void 0)&&(D===d.Transaction.prototype||D instanceof d.Transaction?_(D,T,{get:function(){return this.table(T)},set:function(V){m(this,T,{value:V,writable:!0,configurable:!0,enumerable:!0})}}):D[T]=new d.Table(T,O))})})}function ih(d,h){h.forEach(function(w){for(var S in w)w[S]instanceof d.Table&&delete w[S]})}function gT(d,h){return d._cfg.version-h._cfg.version}function yT(d,h,w,S){var T=d._dbSchema;w.objectStoreNames.contains("$meta")&&!T.$meta&&(T.$meta=rh("$meta",Jv("")[0],[]),d._storeNames.push("$meta"));var O=d._createTransaction("readwrite",d._storeNames,T);O.create(w),O._completion.catch(S);var D=O._reject.bind(O),B=Le.transless||Le;Cs(function(){return Le.trans=O,Le.transless=B,h!==0?(ic(d,w),W=h,((V=O).storeNames.includes("$meta")?V.table("$meta").get("version").then(function(X){return X??W}):Pe.resolve(W)).then(function(X){return ne=X,q=O,Q=w,Y=[],X=(U=d)._versions,te=U._dbSchema=lc(0,U.idbdb,Q),(X=X.filter(function(ie){return ie._cfg.version>=ne})).length!==0?(X.forEach(function(ie){Y.push(function(){var ue=te,he=ie._cfg.dbschema;uc(U,ue,Q),uc(U,he,Q),te=U._dbSchema=he;var xe=oh(ue,he);xe.add.forEach(function(Ie){ah(Q,Ie[0],Ie[1].primKey,Ie[1].indexes)}),xe.change.forEach(function(Ie){if(Ie.recreate)throw new pe.Upgrade("Not yet support for changing primary key");var Oe=Q.objectStore(Ie.name);Ie.add.forEach(function(Fe){return ac(Oe,Fe)}),Ie.change.forEach(function(Fe){Oe.deleteIndex(Fe.name),ac(Oe,Fe)}),Ie.del.forEach(function(Fe){return Oe.deleteIndex(Fe)})});var Te=ie._cfg.contentUpgrade;if(Te&&ie._cfg.version>ne){ic(U,Q),q._memoizedTables={};var je=L(he);xe.del.forEach(function(Ie){je[Ie]=ue[Ie]}),ih(U,[U.Transaction.prototype]),oc(U,[U.Transaction.prototype],o(je),je),q.schema=je;var Ce,Ae=J(Te);return Ae&&So(),xe=Pe.follow(function(){var Ie;(Ce=Te(q))&&Ae&&(Ie=Ts.bind(null,null),Ce.then(Ie,Ie))}),Ce&&typeof Ce.then=="function"?Pe.resolve(Ce):xe.then(function(){return Ce})}}),Y.push(function(ue){var he,xe,Te=ie._cfg.dbschema;he=Te,xe=ue,[].slice.call(xe.db.objectStoreNames).forEach(function(je){return he[je]==null&&xe.db.deleteObjectStore(je)}),ih(U,[U.Transaction.prototype]),oc(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),q.schema=U._dbSchema}),Y.push(function(ue){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===ie._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(he){return he!=="$meta"})):ue.objectStore("$meta").put(ie._cfg.version,"version"))})}),function ie(){return Y.length?Pe.resolve(Y.shift()(q.idbtrans)).then(ie):Pe.resolve()}().then(function(){Yv(te,Q)})):Pe.resolve();var U,ne,q,Q,Y,te}).catch(D)):(o(T).forEach(function(X){ah(w,X,T[X].primKey,T[X].indexes)}),ic(d,w),void Pe.follow(function(){return d.on.populate.fire(O)}).catch(D));var V,W})}function vT(d,h){Yv(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var w=lc(0,d.idbdb,h);uc(d,d._dbSchema,h);for(var S=0,T=oh(w,d._dbSchema).change;S<T.length;S++){var O=function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=h.objectStore(D.name);D.add.forEach(function(V){we&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(V.src)),ac(B,V)})}(T[S]);if(typeof O=="object")return O.value}}function oh(d,h){var w,S={del:[],add:[],change:[]};for(w in d)h[w]||S.del.push(w);for(w in h){var T=d[w],O=h[w];if(T){var D={name:w,def:O,recreate:!1,del:[],add:[],change:[]};if(""+(T.primKey.keyPath||"")!=""+(O.primKey.keyPath||"")||T.primKey.auto!==O.primKey.auto)D.recreate=!0,S.change.push(D);else{var B=T.idxByName,V=O.idxByName,W=void 0;for(W in B)V[W]||D.del.push(W);for(W in V){var X=B[W],U=V[W];X?X.src!==U.src&&D.change.push(U):D.add.push(U)}(0<D.del.length||0<D.add.length||0<D.change.length)&&S.change.push(D)}}else S.add.push([w,O])}return S}function ah(d,h,w,S){var T=d.db.createObjectStore(h,w.keyPath?{keyPath:w.keyPath,autoIncrement:w.auto}:{autoIncrement:w.auto});return S.forEach(function(O){return ac(T,O)}),T}function Yv(d,h){o(d).forEach(function(w){h.db.objectStoreNames.contains(w)||(we&&console.debug("Dexie: Creating missing table",w),ah(h,w,d[w].primKey,d[w].indexes))})}function ac(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function lc(d,h,w){var S={};return y(h.objectStoreNames,0).forEach(function(T){for(var O=w.objectStore(T),D=nh(Gv(W=O.keyPath),W||"",!0,!1,!!O.autoIncrement,W&&typeof W!="string",!0),B=[],V=0;V<O.indexNames.length;++V){var X=O.index(O.indexNames[V]),W=X.keyPath,X=nh(X.name,W,!!X.unique,!!X.multiEntry,!1,W&&typeof W!="string",!1);B.push(X)}S[T]=rh(T,D,B)}),S}function uc(d,h,w){for(var S=w.db.objectStoreNames,T=0;T<S.length;++T){var O=S[T],D=w.objectStore(O);d._hasGetAll="getAll"in D;for(var B=0;B<D.indexNames.length;++B){var V=D.indexNames[B],W=D.index(V).keyPath,X=typeof W=="string"?W:"["+y(W).join("+")+"]";!h[O]||(W=h[O].idxByName[X])&&(W.name=V,delete h[O].idxByName[X],h[O].idxByName[V]=W)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Jv(d){return d.split(",").map(function(h,w){var O=h.split(":"),S=(T=O[1])===null||T===void 0?void 0:T.trim(),T=(h=O[0].trim()).replace(/([&*]|\+\+)/g,""),O=/^\[/.test(T)?T.match(/^\[(.*)\]$/)[1].split("+"):T;return nh(T,O||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(O),w===0,S)})}var wT=(Po.prototype._createTableSchema=rh,Po.prototype._parseIndexSyntax=Jv,Po.prototype._parseStoresSpec=function(d,h){var w=this;o(d).forEach(function(S){if(d[S]!==null){var T=w._parseIndexSyntax(d[S]),O=T.shift();if(!O)throw new pe.Schema("Invalid schema for table "+S+": "+d[S]);if(O.unique=!0,O.multi)throw new pe.Schema("Primary key cannot be multiEntry*");T.forEach(function(D){if(D.auto)throw new pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new pe.Schema("Index must have a name and cannot be an empty string")}),T=w._createTableSchema(S,O,T),h[S]=T}})},Po.prototype.stores=function(w){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,w):w;var w=h._versions,S={},T={};return w.forEach(function(O){l(S,O._cfg.storesSource),T=O._cfg.dbschema={},O._parseStoresSpec(S,T)}),h._dbSchema=T,ih(h,[h._allTables,h,h.Transaction.prototype]),oc(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(T),T),h._storeNames=o(T),this},Po.prototype.upgrade=function(d){return this._cfg.contentUpgrade=ve(this._cfg.contentUpgrade||We,d),this},Po);function Po(){}function lh(d,h){var w=d._dbNamesDB;return w||(w=d._dbNamesDB=new Xr(Xu,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),w.table("dbnames")}function uh(d){return d&&typeof d.databases=="function"}function ch(d){return Cs(function(){return Le.letThrough=!0,d()})}function dh(d){return!("from"in d)}var on=function(d,h){if(!this){var w=new on;return d&&"d"in d&&l(w,d),w}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Xa(d,h,w){var S=it(h,w);if(!isNaN(S)){if(0<S)throw RangeError();if(dh(d))return l(d,{from:h,to:w,d:1});var T=d.l,S=d.r;if(it(w,d.from)<0)return T?Xa(T,h,w):d.l={from:h,to:w,d:1,l:null,r:null},Xv(d);if(0<it(h,d.to))return S?Xa(S,h,w):d.r={from:h,to:w,d:1,l:null,r:null},Xv(d);it(h,d.from)<0&&(d.from=h,d.l=null,d.d=S?S.d+1:1),0<it(w,d.to)&&(d.to=w,d.r=null,d.d=d.l?d.l.d+1:1),w=!d.r,T&&!d.l&&el(d,T),S&&w&&el(d,S)}}function el(d,h){dh(h)||function w(S,V){var O=V.from,D=V.to,B=V.l,V=V.r;Xa(S,O,D),B&&w(S,B),V&&w(S,V)}(d,h)}function Zv(d,h){var w=cc(h),S=w.next();if(S.done)return!1;for(var T=S.value,O=cc(d),D=O.next(T.from),B=D.value;!S.done&&!D.done;){if(it(B.from,T.to)<=0&&0<=it(B.to,T.from))return!0;it(T.from,B.from)<0?T=(S=w.next(B.from)).value:B=(D=O.next(T.from)).value}return!1}function cc(d){var h=dh(d)?null:{s:0,n:d};return{next:function(w){for(var S=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,S)for(;h.n.l&&it(w,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!S||it(w,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Xv(d){var h,w,S=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((w=d.l)===null||w===void 0?void 0:w.d)||0),T=1<S?"r":S<-1?"l":"";T&&(h=T=="r"?"l":"r",w=r({},d),S=d[T],d.from=S.from,d.to=S.to,d[T]=S[T],w[T]=S[h],(d[h]=w).d=e0(w)),d.d=e0(d)}function e0(w){var h=w.r,w=w.l;return(h?w?Math.max(h.d,w.d):h.d:w?w.d:0)+1}function dc(d,h){return o(h).forEach(function(w){d[w]?el(d[w],h[w]):d[w]=function S(T){var O,D,B={};for(O in T)f(T,O)&&(D=T[O],B[O]=!D||typeof D!="object"||me.has(D.constructor)?D:S(D));return B}(h[w])}),d}function fh(d,h){return d.all||h.all||Object.keys(d).some(function(w){return h[w]&&Zv(h[w],d[w])})}p(on.prototype,((Qn={add:function(d){return el(this,d),this},addKey:function(d){return Xa(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(w){return Xa(h,w,w)}),this},hasKey:function(d){var h=cc(this).next(d).value;return h&&it(h.from,d)<=0&&0<=it(h.to,d)}})[be]=function(){return cc(this)},Qn));var Ei={},hh={},ph=!1;function fc(d){dc(hh,d),ph||(ph=!0,setTimeout(function(){ph=!1,mh(hh,!(hh={}))},0))}function mh(d,h){h===void 0&&(h=!1);var w=new Set;if(d.all)for(var S=0,T=Object.values(Ei);S<T.length;S++)t0(D=T[S],d,w,h);else for(var O in d){var D,B=/^idb\:\/\/(.*)\/(.*)\//.exec(O);B&&(O=B[1],B=B[2],(D=Ei["idb://".concat(O,"/").concat(B)])&&t0(D,d,w,h))}w.forEach(function(V){return V()})}function t0(d,h,w,S){for(var T=[],O=0,D=Object.entries(d.queries.query);O<D.length;O++){for(var B=D[O],V=B[0],W=[],X=0,U=B[1];X<U.length;X++){var ne=U[X];fh(h,ne.obsSet)?ne.subscribers.forEach(function(te){return w.add(te)}):S&&W.push(ne)}S&&T.push([V,W])}if(S)for(var q=0,Q=T;q<Q.length;q++){var Y=Q[q],V=Y[0],W=Y[1];d.queries.query[V]=W}}function bT(d){var h=d._state,w=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?jt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var S=h.openCanceller,T=Math.round(10*d.verno),O=!1;function D(){if(h.openCanceller!==S)throw new pe.DatabaseClosed("db.open() was cancelled")}function B(){return new Pe(function(ne,q){if(D(),!w)throw new pe.MissingAPI;var Q=d.name,Y=h.autoSchema||!T?w.open(Q):w.open(Q,T);if(!Y)throw new pe.MissingAPI;Y.onerror=Ir(q),Y.onblocked=vt(d._fireOnBlocked),Y.onupgradeneeded=vt(function(te){var ie;X=Y.transaction,h.autoSchema&&!d._options.allowEmptyDB?(Y.onerror=Qa,X.abort(),Y.result.close(),(ie=w.deleteDatabase(Q)).onsuccess=ie.onerror=vt(function(){q(new pe.NoSuchDatabase("Database ".concat(Q," doesnt exist")))})):(X.onerror=Ir(q),te=te.oldVersion>Math.pow(2,62)?0:te.oldVersion,U=te<1,d.idbdb=Y.result,O&&vT(d,X),yT(d,te/10,X,q))},q),Y.onsuccess=vt(function(){X=null;var te,ie,ue,he,xe,Te=d.idbdb=Y.result,je=y(Te.objectStoreNames);if(0<je.length)try{var Ce=Te.transaction((he=je).length===1?he[0]:he,"readonly");if(h.autoSchema)ie=Te,ue=Ce,(te=d).verno=ie.version/10,ue=te._dbSchema=lc(0,ie,ue),te._storeNames=y(ie.objectStoreNames,0),oc(te,[te._allTables],o(ue),ue);else if(uc(d,d._dbSchema,Ce),((xe=oh(lc(0,(xe=d).idbdb,Ce),xe._dbSchema)).add.length||xe.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!O)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),T=Te.version+1,O=!0,ne(B());ic(d,Ce)}catch{}Eo.push(d),Te.onversionchange=vt(function(Ae){h.vcFired=!0,d.on("versionchange").fire(Ae)}),Te.onclose=vt(function(){d.close({disableAutoOpen:!1})}),U&&(xe=d._deps,Ce=Q,Te=xe.indexedDB,xe=xe.IDBKeyRange,uh(Te)||Ce===Xu||lh(Te,xe).put({name:Ce}).catch(We)),ne()},q)}).catch(function(ne){switch(ne==null?void 0:ne.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<T)return T=0,B()}return Pe.reject(ne)})}var V,W=h.dbReadyResolve,X=null,U=!1;return Pe.race([S,(typeof navigator>"u"?Pe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ne){function q(){return indexedDB.databases().finally(ne)}V=setInterval(q,100),q()}).finally(function(){return clearInterval(V)}):Promise.resolve()).then(B)]).then(function(){return D(),h.onReadyBeingFired=[],Pe.resolve(ch(function(){return d.on.ready.fire(d.vip)})).then(function ne(){if(0<h.onReadyBeingFired.length){var q=h.onReadyBeingFired.reduce(ve,We);return h.onReadyBeingFired=[],Pe.resolve(ch(function(){return q(d.vip)})).then(ne)}})}).finally(function(){h.openCanceller===S&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(ne){h.dbOpenError=ne;try{X&&X.abort()}catch{}return S===h.openCanceller&&d._close(),jt(ne)}).finally(function(){h.openComplete=!0,W()}).then(function(){var ne;return U&&(ne={},d.tables.forEach(function(q){q.schema.indexes.forEach(function(Q){Q.name&&(ne["idb://".concat(d.name,"/").concat(q.name,"/").concat(Q.name)]=new on(-1/0,[[[]]]))}),ne["idb://".concat(d.name,"/").concat(q.name,"/")]=ne["idb://".concat(d.name,"/").concat(q.name,"/:dels")]=new on(-1/0,[[[]]])}),Os(Ya).fire(ne),mh(ne,!0)),d})}function gh(d){function h(O){return d.next(O)}var w=T(h),S=T(function(O){return d.throw(O)});function T(O){return function(V){var B=O(V),V=B.value;return B.done?V:V&&typeof V.then=="function"?V.then(w,S):a(V)?Promise.all(V).then(w,S):w(V)}}return T(h)()}function hc(d,h,w){for(var S=a(d)?d.slice():[d],T=0;T<w;++T)S.push(h);return S}var xT={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var w=d.table(h),S=w.schema,T={},O=[];function D(U,ne,q){var Q=Za(U),Y=T[Q]=T[Q]||[],te=U==null?0:typeof U=="string"?1:U.length,ie=0<ne,ie=r(r({},q),{name:ie?"".concat(Q,"(virtual-from:").concat(q.name,")"):q.name,lowLevelIndex:q,isVirtual:ie,keyTail:ne,keyLength:te,extractKey:sh(U),unique:!ie&&q.unique});return Y.push(ie),ie.isPrimaryKey||O.push(ie),1<te&&D(te===2?U[0]:U.slice(0,te-1),ne+1,q),Y.sort(function(ue,he){return ue.keyTail-he.keyTail}),ie}h=D(S.primaryKey.keyPath,0,S.primaryKey),T[":id"]=[h];for(var B=0,V=S.indexes;B<V.length;B++){var W=V[B];D(W.keyPath,0,W)}function X(U){var ne,q=U.query.index;return q.isVirtual?r(r({},U),{query:{index:q.lowLevelIndex,range:(ne=U.query.range,q=q.keyTail,{type:ne.type===1?2:ne.type,lower:hc(ne.lower,ne.lowerOpen?d.MAX_KEY:d.MIN_KEY,q),lowerOpen:!0,upper:hc(ne.upper,ne.upperOpen?d.MIN_KEY:d.MAX_KEY,q),upperOpen:!0})}}):U}return r(r({},w),{schema:r(r({},S),{primaryKey:h,indexes:O,getIndexByKeyPath:function(U){return(U=T[Za(U)])&&U[0]}}),count:function(U){return w.count(X(U))},query:function(U){return w.query(X(U))},openCursor:function(U){var ne=U.query.index,q=ne.keyTail,Q=ne.isVirtual,Y=ne.keyLength;return Q?w.openCursor(X(U)).then(function(ie){return ie&&te(ie)}):w.openCursor(U);function te(ie){return Object.create(ie,{continue:{value:function(ue){ue!=null?ie.continue(hc(ue,U.reverse?d.MAX_KEY:d.MIN_KEY,q)):U.unique?ie.continue(ie.key.slice(0,Y).concat(U.reverse?d.MIN_KEY:d.MAX_KEY,q)):ie.continue()}},continuePrimaryKey:{value:function(ue,he){ie.continuePrimaryKey(hc(ue,d.MAX_KEY,q),he)}},primaryKey:{get:function(){return ie.primaryKey}},key:{get:function(){var ue=ie.key;return Y===1?ue[0]:ue.slice(0,Y)}},value:{get:function(){return ie.value}}})}}})}})}};function yh(d,h,w,S){return w=w||{},S=S||"",o(d).forEach(function(T){var O,D,B;f(h,T)?(O=d[T],D=h[T],typeof O=="object"&&typeof D=="object"&&O&&D?(B=G(O))!==G(D)?w[S+T]=h[T]:B==="Object"?yh(O,D,w,S+T+"."):O!==D&&(w[S+T]=h[T]):O!==D&&(w[S+T]=h[T])):w[S+T]=void 0}),o(h).forEach(function(T){f(d,T)||(w[S+T]=h[T])}),w}function vh(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var _T={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var w=d.table(h),S=w.schema.primaryKey;return r(r({},w),{mutate:function(T){var O=Le.trans,D=O.table(h).hook,B=D.deleting,V=D.creating,W=D.updating;switch(T.type){case"add":if(V.fire===We)break;return O._promise("readwrite",function(){return X(T)},!0);case"put":if(V.fire===We&&W.fire===We)break;return O._promise("readwrite",function(){return X(T)},!0);case"delete":if(B.fire===We)break;return O._promise("readwrite",function(){return X(T)},!0);case"deleteRange":if(B.fire===We)break;return O._promise("readwrite",function(){return function U(ne,q,Q){return w.query({trans:ne,values:!1,query:{index:S,range:q},limit:Q}).then(function(Y){var te=Y.result;return X({type:"delete",keys:te,trans:ne}).then(function(ie){return 0<ie.numFailures?Promise.reject(ie.failures[0]):te.length<Q?{failures:[],numFailures:0,lastResult:void 0}:U(ne,r(r({},q),{lower:te[te.length-1],lowerOpen:!0}),Q)})})}(T.trans,T.range,1e4)},!0)}return w.mutate(T);function X(U){var ne,q,Q,Y=Le.trans,te=U.keys||vh(S,U);if(!te)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?r(r({},U),{keys:te}):r({},U)).type!=="delete"&&(U.values=s([],U.values)),U.keys&&(U.keys=s([],U.keys)),ne=w,Q=te,((q=U).type==="add"?Promise.resolve([]):ne.getMany({trans:q.trans,keys:Q,cache:"immutable"})).then(function(ie){var ue=te.map(function(he,xe){var Te,je,Ce,Ae=ie[xe],Ie={onerror:null,onsuccess:null};return U.type==="delete"?B.fire.call(Ie,he,Ae,Y):U.type==="add"||Ae===void 0?(Te=V.fire.call(Ie,he,U.values[xe],Y),he==null&&Te!=null&&(U.keys[xe]=he=Te,S.outbound||j(U.values[xe],S.keyPath,he))):(Te=yh(Ae,U.values[xe]),(je=W.fire.call(Ie,Te,he,Ae,Y))&&(Ce=U.values[xe],Object.keys(je).forEach(function(Oe){f(Ce,Oe)?Ce[Oe]=je[Oe]:j(Ce,Oe,je[Oe])}))),Ie});return w.mutate(U).then(function(he){for(var xe=he.failures,Te=he.results,je=he.numFailures,he=he.lastResult,Ce=0;Ce<te.length;++Ce){var Ae=(Te||te)[Ce],Ie=ue[Ce];Ae==null?Ie.onerror&&Ie.onerror(xe[Ce]):Ie.onsuccess&&Ie.onsuccess(U.type==="put"&&ie[Ce]?U.values[Ce]:Ae)}return{failures:xe,results:Te,numFailures:je,lastResult:he}}).catch(function(he){return ue.forEach(function(xe){return xe.onerror&&xe.onerror(he)}),Promise.reject(he)})})}}})}})}};function n0(d,h,w){try{if(!h||h.keys.length<d.length)return null;for(var S=[],T=0,O=0;T<h.keys.length&&O<d.length;++T)it(h.keys[T],d[O])===0&&(S.push(w?re(h.values[T]):h.values[T]),++O);return S.length===d.length?S:null}catch{return null}}var kT={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var w=d.table(h);return r(r({},w),{getMany:function(S){if(!S.cache)return w.getMany(S);var T=n0(S.keys,S.trans._cache,S.cache==="clone");return T?Pe.resolve(T):w.getMany(S).then(function(O){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?re(O):O},O})},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),w.mutate(S)}})}}}};function r0(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function s0(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ST={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,w=new on(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(S,T,O){if(Le.subscr&&T!=="readonly")throw new pe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Le.querier));return d.transaction(S,T,O)},table:function(S){var T=d.table(S),O=T.schema,D=O.primaryKey,U=O.indexes,B=D.extractKey,V=D.outbound,W=D.autoIncrement&&U.filter(function(q){return q.compound&&q.keyPath.includes(D.keyPath)}),X=r(r({},T),{mutate:function(q){function Q(Oe){return Oe="idb://".concat(h,"/").concat(S,"/").concat(Oe),he[Oe]||(he[Oe]=new on)}var Y,te,ie,ue=q.trans,he=q.mutatedParts||(q.mutatedParts={}),xe=Q(""),Te=Q(":dels"),je=q.type,Ie=q.type==="deleteRange"?[q.range]:q.type==="delete"?[q.keys]:q.values.length<50?[vh(D,q).filter(function(Oe){return Oe}),q.values]:[],Ce=Ie[0],Ae=Ie[1],Ie=q.trans._cache;return a(Ce)?(xe.addKeys(Ce),(Ie=je==="delete"||Ce.length===Ae.length?n0(Ce,Ie):null)||Te.addKeys(Ce),(Ie||Ae)&&(Y=Q,te=Ie,ie=Ae,O.indexes.forEach(function(Oe){var Fe=Y(Oe.name||"");function Je(nt){return nt!=null?Oe.extractKey(nt):null}function tt(nt){return Oe.multiEntry&&a(nt)?nt.forEach(function(Mn){return Fe.addKey(Mn)}):Fe.addKey(nt)}(te||ie).forEach(function(nt,an){var Qe=te&&Je(te[an]),an=ie&&Je(ie[an]);it(Qe,an)!==0&&(Qe!=null&&tt(Qe),an!=null&&tt(an))})}))):Ce?(Ae={from:(Ae=Ce.lower)!==null&&Ae!==void 0?Ae:d.MIN_KEY,to:(Ae=Ce.upper)!==null&&Ae!==void 0?Ae:d.MAX_KEY},Te.add(Ae),xe.add(Ae)):(xe.add(w),Te.add(w),O.indexes.forEach(function(Oe){return Q(Oe.name).add(w)})),T.mutate(q).then(function(Oe){return!Ce||q.type!=="add"&&q.type!=="put"||(xe.addKeys(Oe.results),W&&W.forEach(function(Fe){for(var Je=q.values.map(function(Qe){return Fe.extractKey(Qe)}),tt=Fe.keyPath.findIndex(function(Qe){return Qe===D.keyPath}),nt=0,Mn=Oe.results.length;nt<Mn;++nt)Je[nt][tt]=Oe.results[nt];Q(Fe.name).addKeys(Je)})),ue.mutatedParts=dc(ue.mutatedParts||{},he),Oe})}}),U=function(Q){var Y=Q.query,Q=Y.index,Y=Y.range;return[Q,new on((Q=Y.lower)!==null&&Q!==void 0?Q:d.MIN_KEY,(Y=Y.upper)!==null&&Y!==void 0?Y:d.MAX_KEY)]},ne={get:function(q){return[D,new on(q.key)]},getMany:function(q){return[D,new on().addKeys(q.keys)]},count:U,query:U,openCursor:U};return o(ne).forEach(function(q){X[q]=function(Q){var Y=Le.subscr,te=!!Y,ie=r0(Le,T)&&s0(q,Q)?Q.obsSet={}:Y;if(te){var ue=function(Ae){return Ae="idb://".concat(h,"/").concat(S,"/").concat(Ae),ie[Ae]||(ie[Ae]=new on)},he=ue(""),xe=ue(":dels"),Y=ne[q](Q),te=Y[0],Y=Y[1];if((q==="query"&&te.isPrimaryKey&&!Q.values?xe:ue(te.name||"")).add(Y),!te.isPrimaryKey){if(q!=="count"){var Te=q==="query"&&V&&Q.values&&T.query(r(r({},Q),{values:!1}));return T[q].apply(this,arguments).then(function(Ae){if(q==="query"){if(V&&Q.values)return Te.then(function(Je){return Je=Je.result,he.addKeys(Je),Ae});var Ie=Q.values?Ae.result.map(B):Ae.result;(Q.values?he:xe).addKeys(Ie)}else if(q==="openCursor"){var Oe=Ae,Fe=Q.values;return Oe&&Object.create(Oe,{key:{get:function(){return xe.addKey(Oe.primaryKey),Oe.key}},primaryKey:{get:function(){var Je=Oe.primaryKey;return xe.addKey(Je),Je}},value:{get:function(){return Fe&&he.addKey(Oe.primaryKey),Oe.value}}})}return Ae})}xe.add(w)}}return T[q].apply(this,arguments)}}),X}})}};function i0(d,h,w){if(w.numFailures===0)return h;if(h.type==="deleteRange")return null;var S=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return w.numFailures===S?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(T,O){return!(O in w.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(T,O){return!(O in w.failures)})),h)}function wh(d,h){return w=d,((S=h).lower===void 0||(S.lowerOpen?0<it(w,S.lower):0<=it(w,S.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?it(d,h.upper)<0:it(d,h.upper)<=0));var w,S}function o0(d,h,ne,S,T,O){if(!ne||ne.length===0)return d;var D=h.query.index,B=D.multiEntry,V=h.query.range,W=S.schema.primaryKey.extractKey,X=D.extractKey,U=(D.lowLevelIndex||D).extractKey,ne=ne.reduce(function(q,Q){var Y=q,te=[];if(Q.type==="add"||Q.type==="put")for(var ie=new on,ue=Q.values.length-1;0<=ue;--ue){var he,xe=Q.values[ue],Te=W(xe);ie.hasKey(Te)||(he=X(xe),(B&&a(he)?he.some(function(Oe){return wh(Oe,V)}):wh(he,V))&&(ie.addKey(Te),te.push(xe)))}switch(Q.type){case"add":var je=new on().addKeys(h.values?q.map(function(Fe){return W(Fe)}):q),Y=q.concat(h.values?te.filter(function(Fe){return Fe=W(Fe),!je.hasKey(Fe)&&(je.addKey(Fe),!0)}):te.map(function(Fe){return W(Fe)}).filter(function(Fe){return!je.hasKey(Fe)&&(je.addKey(Fe),!0)}));break;case"put":var Ce=new on().addKeys(Q.values.map(function(Fe){return W(Fe)}));Y=q.filter(function(Fe){return!Ce.hasKey(h.values?W(Fe):Fe)}).concat(h.values?te:te.map(function(Fe){return W(Fe)}));break;case"delete":var Ae=new on().addKeys(Q.keys);Y=q.filter(function(Fe){return!Ae.hasKey(h.values?W(Fe):Fe)});break;case"deleteRange":var Ie=Q.range;Y=q.filter(function(Fe){return!wh(W(Fe),Ie)})}return Y},d);return ne===d?d:(ne.sort(function(q,Q){return it(U(q),U(Q))||it(W(q),W(Q))}),h.limit&&h.limit<1/0&&(ne.length>h.limit?ne.length=h.limit:d.length===h.limit&&ne.length<h.limit&&(T.dirty=!0)),O?Object.freeze(ne):ne)}function a0(d,h){return it(d.lower,h.lower)===0&&it(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function ET(d,h){return function(w,S,T,O){if(w===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((S=it(w,S))===0){if(T&&O)return 0;if(T)return 1;if(O)return-1}return S}(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=function(w,S,T,O){if(w===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((S=it(w,S))===0){if(T&&O)return 0;if(T)return-1;if(O)return 1}return S}(d.upper,h.upper,d.upperOpen,h.upperOpen)}function CT(d,h,w,S){d.subscribers.add(w),S.addEventListener("abort",function(){var T,O;d.subscribers.delete(w),d.subscribers.size===0&&(T=d,O=h,setTimeout(function(){T.subscribers.size===0&&ce(O,T)},3e3))})}var TT={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(w,S,T){var O,D,B=d.transaction(w,S,T);return S==="readwrite"&&(D=(O=new AbortController).signal,T=function(V){return function(){if(O.abort(),S==="readwrite"){for(var W=new Set,X=0,U=w;X<U.length;X++){var ne=U[X],q=Ei["idb://".concat(h,"/").concat(ne)];if(q){var Q=d.table(ne),Y=q.optimisticOps.filter(function(Fe){return Fe.trans===B});if(B._explicit&&V&&B.mutatedParts)for(var te=0,ie=Object.values(q.queries.query);te<ie.length;te++)for(var ue=0,he=(je=ie[te]).slice();ue<he.length;ue++)fh((Ce=he[ue]).obsSet,B.mutatedParts)&&(ce(je,Ce),Ce.subscribers.forEach(function(Fe){return W.add(Fe)}));else if(0<Y.length){q.optimisticOps=q.optimisticOps.filter(function(Fe){return Fe.trans!==B});for(var xe=0,Te=Object.values(q.queries.query);xe<Te.length;xe++)for(var je,Ce,Ae,Ie=0,Oe=(je=Te[xe]).slice();Ie<Oe.length;Ie++)(Ce=Oe[Ie]).res!=null&&B.mutatedParts&&(V&&!Ce.dirty?(Ae=Object.isFrozen(Ce.res),Ae=o0(Ce.res,Ce.req,Y,Q,Ce,Ae),Ce.dirty?(ce(je,Ce),Ce.subscribers.forEach(function(Fe){return W.add(Fe)})):Ae!==Ce.res&&(Ce.res=Ae,Ce.promise=Pe.resolve({result:Ae}))):(Ce.dirty&&ce(je,Ce),Ce.subscribers.forEach(function(Fe){return W.add(Fe)})))}}}W.forEach(function(Fe){return Fe()})}}},B.addEventListener("abort",T(!1),{signal:D}),B.addEventListener("error",T(!1),{signal:D}),B.addEventListener("complete",T(!0),{signal:D})),B},table:function(w){var S=d.table(w),T=S.schema.primaryKey;return r(r({},S),{mutate:function(O){var D=Le.trans;if(T.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return S.mutate(O);var B=Ei["idb://".concat(h,"/").concat(w)];return B?(D=S.mutate(O),O.type!=="add"&&O.type!=="put"||!(50<=O.values.length||vh(T,O).some(function(V){return V==null}))?(B.optimisticOps.push(O),O.mutatedParts&&fc(O.mutatedParts),D.then(function(V){0<V.numFailures&&(ce(B.optimisticOps,O),(V=i0(0,O,V))&&B.optimisticOps.push(V),O.mutatedParts&&fc(O.mutatedParts))}),D.catch(function(){ce(B.optimisticOps,O),O.mutatedParts&&fc(O.mutatedParts)})):D.then(function(V){var W=i0(0,r(r({},O),{values:O.values.map(function(X,U){var ne;return V.failures[U]?X:(X=(ne=T.keyPath)!==null&&ne!==void 0&&ne.includes(".")?re(X):r({},X),j(X,T.keyPath,V.results[U]),X)})}),V);B.optimisticOps.push(W),queueMicrotask(function(){return O.mutatedParts&&fc(O.mutatedParts)})}),D):S.mutate(O)},query:function(O){if(!r0(Le,S)||!s0("query",O))return S.query(O);var D=((W=Le.trans)===null||W===void 0?void 0:W.db._options.cache)==="immutable",U=Le,B=U.requery,V=U.signal,W=function(Q,Y,te,ie){var ue=Ei["idb://".concat(Q,"/").concat(Y)];if(!ue)return[];if(!(Y=ue.queries[te]))return[null,!1,ue,null];var he=Y[(ie.query?ie.query.index.name:null)||""];if(!he)return[null,!1,ue,null];switch(te){case"query":var xe=he.find(function(Te){return Te.req.limit===ie.limit&&Te.req.values===ie.values&&a0(Te.req.query.range,ie.query.range)});return xe?[xe,!0,ue,he]:[he.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=ie.limit&&(!ie.values||Te.req.values)&&ET(Te.req.query.range,ie.query.range)}),!1,ue,he];case"count":return xe=he.find(function(Te){return a0(Te.req.query.range,ie.query.range)}),[xe,!!xe,ue,he]}}(h,w,"query",O),X=W[0],U=W[1],ne=W[2],q=W[3];return X&&U?X.obsSet=O.obsSet:(U=S.query(O).then(function(Q){var Y=Q.result;if(X&&(X.res=Y),D){for(var te=0,ie=Y.length;te<ie;++te)Object.freeze(Y[te]);Object.freeze(Y)}else Q.result=re(Y);return Q}).catch(function(Q){return q&&X&&ce(q,X),Promise.reject(Q)}),X={obsSet:O.obsSet,promise:U,subscribers:new Set,type:"query",req:O,dirty:!1},q?q.push(X):(q=[X],(ne=ne||(Ei["idb://".concat(h,"/").concat(w)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[O.query.index.name||""]=q)),CT(X,q,B,V),X.promise.then(function(Q){return{result:o0(Q.result,O,ne==null?void 0:ne.optimisticOps,S,X,D)}})}})}})}};function pc(d,h){return new Proxy(d,{get:function(w,S,T){return S==="db"?h:Reflect.get(w,S,T)}})}var Xr=(It.prototype.version=function(d){if(isNaN(d)||d<.1)throw new pe.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,w=h.filter(function(S){return S._cfg.version===d})[0];return w||(w=new this.Version(d),h.push(w),h.sort(gT),w.stores({}),this._state.autoSchema=!1,w)},It.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Le.letThrough||this._vip)?d():new Pe(function(w,S){if(h._state.openComplete)return S(new pe.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void S(new pe.DatabaseClosed);h.open().catch(We)}h._state.dbReadyPromise.then(w,S)}).then(d)},It.prototype.use=function(d){var h=d.stack,w=d.create,S=d.level,T=d.name;return T&&this.unuse({stack:h,name:T}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:w,level:S??10,name:T}),d.sort(function(O,D){return O.level-D.level}),this},It.prototype.unuse=function(d){var h=d.stack,w=d.name,S=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(T){return S?T.create!==S:!!w&&T.name!==w})),this},It.prototype.open=function(){var d=this;return _i(Ht,function(){return bT(d)})},It.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Eo.indexOf(this);if(0<=h&&Eo.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Pe(function(w){d.dbReadyResolve=w}),d.openCanceller=new Pe(function(w,S){d.cancelOpen=S}))},It.prototype.close=function(w){var h=(w===void 0?{disableAutoOpen:!0}:w).disableAutoOpen,w=this._state;h?(w.isBeingOpened&&w.cancelOpen(new pe.DatabaseClosed),this._close(),w.autoOpen=!1,w.dbOpenError=new pe.DatabaseClosed):(this._close(),w.autoOpen=this._options.autoOpen||w.isBeingOpened,w.openComplete=!1,w.dbOpenError=null)},It.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var w=0<arguments.length&&typeof arguments[0]!="object",S=this._state;return new Pe(function(T,O){function D(){h.close(d);var B=h._deps.indexedDB.deleteDatabase(h.name);B.onsuccess=vt(function(){var V,W,X;V=h._deps,W=h.name,X=V.indexedDB,V=V.IDBKeyRange,uh(X)||W===Xu||lh(X,V).delete(W).catch(We),T()}),B.onerror=Ir(O),B.onblocked=h._fireOnBlocked}if(w)throw new pe.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(D):D()})},It.prototype.backendDB=function(){return this.idbdb},It.prototype.isOpen=function(){return this.idbdb!==null},It.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},It.prototype.hasFailed=function(){return this._state.dbOpenError!==null},It.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(It.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),It.prototype.transaction=function(){var d=(function(h,w,S){var T=arguments.length;if(T<2)throw new pe.InvalidArgument("Too few arguments");for(var O=new Array(T-1);--T;)O[T-1]=arguments[T];return S=O.pop(),[h,z(O),S]}).apply(this,arguments);return this._transaction.apply(this,d)},It.prototype._transaction=function(d,h,w){var S=this,T=Le.trans;T&&T.db===this&&d.indexOf("!")===-1||(T=null);var O,D,B=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(D=h.map(function(W){if(W=W instanceof S.Table?W.name:W,typeof W!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return W}),d=="r"||d===Jf)O=Jf;else{if(d!="rw"&&d!=Zf)throw new pe.InvalidArgument("Invalid transaction mode: "+d);O=Zf}if(T){if(T.mode===Jf&&O===Zf){if(!B)throw new pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");T=null}T&&D.forEach(function(W){if(T&&T.storeNames.indexOf(W)===-1){if(!B)throw new pe.SubTransaction("Table "+W+" not included in parent transaction.");T=null}}),B&&T&&!T.active&&(T=null)}}catch(W){return T?T._promise(null,function(X,U){U(W)}):jt(W)}var V=(function W(X,U,ne,q,Q){return Pe.resolve().then(function(){var Y=Le.transless||Le,te=X._createTransaction(U,ne,X._dbSchema,q);if(te.explicit=!0,Y={trans:te,transless:Y},q)te.idbtrans=q.idbtrans;else try{te.create(),te.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(he){return he.name===$e.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return W(X,U,ne,null,Q)})):jt(he)}var ie,ue=J(Q);return ue&&So(),Y=Pe.follow(function(){var he;(ie=Q.call(te,te))&&(ue?(he=Ts.bind(null,null),ie.then(he,he)):typeof ie.next=="function"&&typeof ie.throw=="function"&&(ie=gh(ie)))},Y),(ie&&typeof ie.then=="function"?Pe.resolve(ie).then(function(he){return te.active?he:jt(new pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Y.then(function(){return ie})).then(function(he){return q&&te._resolve(),te._completion.then(function(){return he})}).catch(function(he){return te._reject(he),jt(he)})})}).bind(null,this,O,D,T,w);return T?T._promise(O,V,"lock"):Le.trans?_i(Le.transless,function(){return S._whenReady(V)}):this._whenReady(V)},It.prototype.table=function(d){if(!f(this._allTables,d))throw new pe.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},It);function It(d,h){var w=this;this._middlewares={},this.verno=0;var S=It.dependencies;this._options=h=r({addons:It.addons,autoOpen:!0,indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},S=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var T,O,D,B,V,W={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:We,dbReadyPromise:null,cancelOpen:We,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};W.dbReadyPromise=new Pe(function(U){W.dbReadyResolve=U}),W.openCanceller=new Pe(function(U,ne){W.cancelOpen=ne}),this._state=W,this.name=d,this.on=qa(this,"populate","blocked","versionchange","close",{ready:[ve,We]}),this.once=function(U,ne){var q=function(){for(var Q=[],Y=0;Y<arguments.length;Y++)Q[Y]=arguments[Y];w.on(U).unsubscribe(q),ne.apply(w,Q)};return w.on(U,q)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(U){return function(ne,q){It.vip(function(){var Q,Y=w._state;Y.openComplete?(Y.dbOpenError||Pe.resolve().then(ne),q&&U(ne)):Y.onReadyBeingFired?(Y.onReadyBeingFired.push(ne),q&&U(ne)):(U(ne),Q=w,q||U(function te(){Q.on.ready.unsubscribe(ne),Q.on.ready.unsubscribe(te)}))})}}),this.Collection=(T=this,Ga(uT.prototype,function(ie,te){this.db=T;var q=Lv,Q=null;if(te)try{q=te()}catch(ue){Q=ue}var Y=ie._ctx,te=Y.table,ie=te.hook.reading.fire;this._ctx={table:te,index:Y.index,isPrimKey:!Y.index||te.schema.primKey.keyPath&&Y.index===te.schema.primKey.name,range:q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Q,or:Y.or,valueMapper:ie!==Tt?ie:null}})),this.Table=(O=this,Ga(zv.prototype,function(U,ne,q){this.db=O,this._tx=q,this.name=U,this.schema=ne,this.hook=O._allTables[U]?O._allTables[U].hook:qa(null,{creating:[fe,We],reading:[P,Tt],updating:[N,We],deleting:[M,We]})})),this.Transaction=(D=this,Ga(fT.prototype,function(U,ne,q,Q,Y){var te=this;U!=="readonly"&&ne.forEach(function(ie){ie=(ie=q[ie])===null||ie===void 0?void 0:ie.yProps,ie&&(ne=ne.concat(ie.map(function(ue){return ue.updatesTable})))}),this.db=D,this.mode=U,this.storeNames=ne,this.schema=q,this.chromeTransactionDurability=Q,this.idbtrans=null,this.on=qa(this,"complete","error","abort"),this.parent=Y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(ie,ue){te._resolve=ie,te._reject=ue}),this._completion.then(function(){te.active=!1,te.on.complete.fire()},function(ie){var ue=te.active;return te.active=!1,te.on.error.fire(ie),te.parent?te.parent._reject(ie):ue&&te.idbtrans&&te.idbtrans.abort(),jt(ie)})})),this.Version=(B=this,Ga(wT.prototype,function(U){this.db=B,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(V=this,Ga(qv.prototype,function(U,ne,q){if(this.db=V,this._ctx={table:U,index:ne===":id"?null:ne,or:q},this._cmp=this._ascending=it,this._descending=function(Q,Y){return it(Y,Q)},this._max=function(Q,Y){return 0<it(Q,Y)?Q:Y},this._min=function(Q,Y){return it(Q,Y)<0?Q:Y},this._IDBKeyRange=V._deps.IDBKeyRange,!this._IDBKeyRange)throw new pe.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(w.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(w.name,"'. Closing db now to resume the delete request.")),w.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(w.name,"') was blocked")):console.warn("Upgrade '".concat(w.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=Ja(h.IDBKeyRange),this._createTransaction=function(U,ne,q,Q){return new w.Transaction(U,ne,q,w._options.chromeTransactionDurability,Q)},this._fireOnBlocked=function(U){w.on("blocked").fire(U),Eo.filter(function(ne){return ne.name===w.name&&ne!==w&&!ne._state.vcFired}).map(function(ne){return ne.on("versionchange").fire(U)})},this.use(kT),this.use(TT),this.use(ST),this.use(xT),this.use(_T);var X=new Proxy(this,{get:function(U,ne,q){if(ne==="_vip")return!0;if(ne==="table")return function(Y){return pc(w.table(Y),X)};var Q=Reflect.get(U,ne,q);return Q instanceof zv?pc(Q,X):ne==="tables"?Q.map(function(Y){return pc(Y,X)}):ne==="_createTransaction"?function(){return pc(Q.apply(this,arguments),X)}:Q}});this.vip=X,S.forEach(function(U){return U(w)})}var mc,Qn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",PT=(bh.prototype.subscribe=function(d,h,w){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:w})},bh.prototype[Qn]=function(){return this},bh);function bh(d){this._subscribe=d}try{mc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{mc={indexedDB:null,IDBKeyRange:null}}function l0(d){var h,w=!1,S=new PT(function(T){var O=J(d),D,B=!1,V={},W={},X={get closed(){return B},unsubscribe:function(){B||(B=!0,D&&D.abort(),U&&Os.storagemutated.unsubscribe(q))}};T.start&&T.start(X);var U=!1,ne=function(){return Yf(Q)},q=function(Y){dc(V,Y),fh(W,V)&&ne()},Q=function(){var Y,te,ie;!B&&mc.indexedDB&&(V={},Y={},D&&D.abort(),D=new AbortController,ie=function(ue){var he=_o();try{O&&So();var xe=Cs(d,ue);return xe=O?xe.finally(Ts):xe}finally{he&&ko()}}(te={subscr:Y,signal:D.signal,requery:ne,querier:d,trans:null}),Promise.resolve(ie).then(function(ue){w=!0,h=ue,B||te.signal.aborted||(V={},function(he){for(var xe in he)if(f(he,xe))return;return 1}(W=Y)||U||(Os(Ya,q),U=!0),Yf(function(){return!B&&T.next&&T.next(ue)}))},function(ue){w=!1,["DatabaseClosedError","AbortError"].includes(ue==null?void 0:ue.name)||B||Yf(function(){B||T.error&&T.error(ue)})}))};return setTimeout(ne,0),X});return S.hasValue=function(){return w},S.getValue=function(){return h},S}var Ci=Xr;function xh(d){var h=Rs;try{Rs=!0,Os.storagemutated.fire(d),mh(d,!0)}finally{Rs=h}}p(Ci,r(r({},Ye),{delete:function(d){return new Ci(d,{addons:[]}).delete()},exists:function(d){return new Ci(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=Ci.dependencies,w=h.indexedDB,h=h.IDBKeyRange,(uh(w)?Promise.resolve(w.databases()).then(function(S){return S.map(function(T){return T.name}).filter(function(T){return T!==Xu})}):lh(w,h).toCollection().primaryKeys()).then(d)}catch{return jt(new pe.MissingAPI)}var h,w},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Le.trans?_i(Le.transless,d):d()},vip:ch,async:function(d){return function(){try{var h=gh(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Pe.resolve(h)}catch(w){return jt(w)}}},spawn:function(d,h,w){try{var S=gh(d.apply(w,h||[]));return S&&typeof S.then=="function"?S:Pe.resolve(S)}catch(T){return jt(T)}},currentTransaction:{get:function(){return Le.trans||null}},waitFor:function(d,h){return h=Pe.resolve(typeof d=="function"?Ci.ignoreTransaction(d):d).timeout(h||6e4),Le.trans?Le.trans.waitFor(h):h},Promise:Pe,debug:{get:function(){return we},set:function(d){ae(d)}},derive:v,extend:l,props:p,override:b,Events:qa,on:Os,liveQuery:l0,extendObservabilitySet:dc,getByKeyPath:I,setByKeyPath:j,delByKeyPath:function(d,h){typeof h=="string"?j(d,h,void 0):"length"in h&&[].map.call(h,function(w){j(d,w,void 0)})},shallowClone:L,deepClone:re,getObjectDiff:yh,cmp:it,asap:R,minKey:-1/0,addons:[],connections:Eo,errnames:$e,dependencies:mc,cache:Ei,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,w){return d+h/Math.pow(10,2*w)})})),Ci.maxKey=Ja(Ci.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Os(Ya,function(d){Rs||(d=new CustomEvent(th,{detail:d}),Rs=!0,dispatchEvent(d),Rs=!1)}),addEventListener(th,function(d){d=d.detail,Rs||xh(d)}));var Ao,Rs=!1,u0=function(){};return typeof BroadcastChannel<"u"&&((u0=function(){(Ao=new BroadcastChannel(th)).onmessage=function(d){return d.data&&xh(d.data)}})(),typeof Ao.unref=="function"&&Ao.unref(),Os(Ya,function(d){Rs||Ao.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Xr.disableBfCache&&d.persisted){we&&console.debug("Dexie: handling persisted pagehide"),Ao!=null&&Ao.close();for(var h=0,w=Eo;h<w.length;h++)w[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Xr.disableBfCache&&d.persisted&&(we&&console.debug("Dexie: handling persisted pageshow"),u0(),xh({all:new on(-1/0,[[]])}))})),Pe.rejectionMapper=function(d,h){return!d||d instanceof K||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Ze[d.name]?d:(h=new Ze[d.name](h||d.message,d),"stack"in d&&_(h,"stack",{get:function(){return this.inner.stack}}),h)},ae(we),r(Xr,Object.freeze({__proto__:null,Dexie:Xr,liveQuery:l0,Entity:$v,cmp:it,PropModification:Ha,replacePrefix:function(d,h){return new Ha({replacePrefix:[d,h]})},add:function(d){return new Ha({add:d})},remove:function(d){return new Ha({remove:d})},default:Xr,RangeSet:on,mergeRanges:el,rangesOverlap:Zv}),{default:Xr}),Xr})})(pS);var nD=pS.exports;const Qm=sf(nD),nb=Symbol.for("Dexie"),Ra=globalThis[nb]||(globalThis[nb]=Qm);if(Qm.semVer!==Ra.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qm.semVer} and ${Ra.semVer}`);const{liveQuery:mU,mergeRanges:gU,rangesOverlap:yU,RangeSet:vU,cmp:wU,Entity:bU,PropModification:xU,replacePrefix:_U,add:kU,remove:SU,DexieYProvider:EU}=Ra;function rD(e,t,n){var r,s;typeof e=="function"?(r=t||[],s=n):(r=[],s=t);var i=ze.useRef({hasResult:!1,result:s,error:null}),o=ze.useReducer(function(u){return u+1},0);o[0];var a=o[1],l=ze.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")i.current.result=u.getValue(),i.current.hasResult=!0;else{var c=u.subscribe(function(f){i.current.result=f,i.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(ze.useDebugValue(i.current.result),ze.useEffect(function(){var u=l.subscribe(function(c){var f=i.current;(f.error!==null||f.result!==c)&&(f.error=null,f.result=c,f.hasResult=!0,a())},function(c){var f=i.current;f.error!==c&&(f.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),i.current.error)throw i.current.error;return i.current.result}function sD(e,t,n){return rD(function(){return Ra.liveQuery(e)},[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=Ra.DexieYProvider;t&&t.release(e)});class mS extends Ra{constructor(){super("SankeertanDB");tl(this,"categories");tl(this,"songIndices");tl(this,"songDetails");tl(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId, categoryId"})}}let ud=null;function Lt(){return ud===null&&(ud=new mS,console.log("Database initialized or re-initialized.")),ud}ud=new mS;async function Fy(e){try{const n=await Lt().songIndices.where("bookId").equals(e).sortBy("insertionId");return n.length>0?n:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function By(e,t){try{const n=Lt();await n.songIndices.where("bookId").equals(e).delete();const r=t.map(s=>({...s,bookId:e,tags:s.tags||[]}));await n.songIndices.bulkAdd(r)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}const za=async e=>{try{return await Lt().songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function iD(e){try{const n=await Lt().songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${n} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function oD(e){try{return await Lt().songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function Rf(e,t){try{const n=[e,t];return await Lt().songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function aD(e,t){try{const n=Lt(),r=[e,t];return await n.songDetails.where("[bookId+songTitle]").equals(r).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const gS=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function yS(e){const t=gS(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await Lt().songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function lD(e,t){try{const n=Lt(),r=[e,t];await n.songDetails.delete(r)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function vS(e){try{return await Lt().songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function wS(e){try{const t=Lt(),n=await t.songDetails.where("bookId").equals(e).delete(),r=await t.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${n}, Indices removed: ${r}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function uD(e){try{await Lt().songDetails.bulkPut(e)}catch(t){throw console.error("Error bulk saving song details:",t),t}}async function cD(e){try{await Lt().songIndices.bulkPut(e)}catch(t){throw console.error("Error bulk saving song indices:",t),t}}function dD(e){const t=[];return e.forEach(n=>{const r=n.id;n.books&&Array.isArray(n.books)&&n.books.forEach(s=>{const i={...s,categoryId:r};t.push(i)})}),t}async function fD(e){const t=Lt(),n=dD(e);if(n.length===0){console.warn("No books found after transformation. Skipping 'books' table refresh.");return}try{await t.transaction("rw",t.books,async()=>{await t.books.clear(),await t.books.bulkPut(n)}),console.log(`Successfully saved ${n.length} books to the 'books' table.`)}catch(r){console.error("Error saving books to DB:",r)}}async function qd(e){try{return await Lt().books.get(e)}catch(t){console.error(`Error retrieving metadata for book ${e}:`,t);return}}async function bS(e){try{const t=await qd(e);if(!t)return!1;const n=Number(t.songCount)||0;if(n===0)return!1;const[r,s]=await Promise.all([za(e),vS(e)]);return r&&s>=n}catch(t){return console.error(`Error checking download status for book ${e}:`,t),!1}}async function hD(){try{const n=(await Lt().books.toArray()).map(async s=>({bookId:s.bookId,isDownloaded:await bS(s.bookId)}));return(await Promise.all(n)).filter(s=>s.isDownloaded).map(s=>s.bookId)}catch(e){return console.error("Error getting all fully downloaded book IDs:",e),[]}}async function pD(e){try{const t=Lt(),n=await t.songIndices.where("bookId").equals(e).toArray(),r=await t.songDetails.where("bookId").equals(e).toArray();return!n.length&&!r.length?null:{bookId:e,songIndices:n,songDetails:r}}catch(t){return console.error(`Error exporting full book structure for ${e}:`,t),null}}async function mD(e){try{const t=Lt();await t.categories.clear(),await t.categories.bulkAdd(e),await fD(e),console.log("Categories saved successfully.")}catch(t){console.error("Error saving categories to DB:",t)}}const op=new Map;async function gD(e,t,n,r){const{sourceRow:s,songTitle:i}=t,o=gS(e,i);if(await Rf(e,i))return;const l=op.get(o);if(l)return l;const u=String(s),c=Number(s),f=(async()=>{if(!e||!i||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${i}, Row: ${s}, User: ${n}`);try{const p=await r({bookId:e,sourceRow:u,songTitle:i,sessionuser:n});if(p.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[m,_,v,x]=p;await yS({bookId:e,songTitle:i,sourceRow:u,indexPosition:x,songData:m,metadata:_,sourceLanguage:v})}catch(p){throw console.error(`Failed to download and cache song ${i} in book ${e}:`,p),p}})();op.set(o,f);try{await f}finally{op.delete(o)}}async function rb(e){const t=e.map(async s=>{const i=s.bookId,o=s.songCount||0,[a,l,u]=await Promise.all([za(i),vS(i),oD(i)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const f=c>0?l:0;return{bookId:i,status:{totalSongs:c,downloadedSongs:f,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(s=>{r[s.bookId]=s.status}),r}const yD=async e=>{const t=new URL(`${yo}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const i=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(i)}`)}const r=await n.json();return Object.keys(r).filter(i=>i!=="books").map(i=>({name:i,bookCount:Array.isArray(r[i])?r[i].length:0,books:Array.isArray(r[i])?r[i].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],Type:o.Type,songCount:o["Song Count"],verseCount:o["Verse Count"],author:o.author,language:o.language,isFullBookDownloadable:o.isFullBookDownloadable==="true"||o.isFullBookDownloadable===!0,isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:i.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(i)}&font=lora`}))},xS=E.createContext({categories:[],isLoading:!1,isFetching:!1,error:null,refresh:()=>{}}),vD=Lt(),wD=({children:e})=>{var u;const{session:t}=wo(),n=(u=t==null?void 0:t.user)==null?void 0:u.email,r=sD(()=>vD.categories.toArray());E.useEffect(()=>{console.log("CategoryContext: Dexie categories loaded:",r==null?void 0:r.length)},[r]);const{isLoading:s,isFetching:i,error:o,data:a,refetch:l}=Of({queryKey:["categories",n],queryFn:()=>yD(n??null),enabled:!!n&&r!==void 0&&r.length===0,networkMode:"always",staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1});return E.useEffect(()=>{a&&(console.log("CategoryContext: Fetched new categories from API, saving to Dexie..."),mD(a).catch(c=>console.error("Failed to sync categories to Dexie:",c)))},[a]),k.jsx(xS.Provider,{value:{categories:r??[],isLoading:r===void 0||((r==null?void 0:r.length)??0)===0&&s,isFetching:i,error:o,refresh:l},children:e})},Uy=()=>E.useContext(xS),sb=e=>{const[t,n]=E.useState(!1);return E.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),s=i=>n(i.matches);return n(r.matches),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e]),t},_S=()=>{const e=fr();return{handleSignOut:async()=>{const{error:n}=await Ut.auth.signOut();n?console.error("Error signing out:",n):(console.log("User signed out successfully. Navigating to /login."),e("/login"))}}},bD=Lt();function xD(){const[e,t]=E.useState(!1),{categories:n,isLoading:r,isFetching:s,error:i,refresh:o}=Uy(),a=fr(),[l,u]=E.useState([]),c=sb("(max-width: 600px) and (orientation: portrait)"),f=sb("(max-width: 900px) and (orientation: landscape)"),{session:p}=wo(),{handleSignOut:m}=_S();E.useEffect(()=>{n&&u((L=>{const F=[],z=360/L;for(let me=0;me<L;me++){const $=me*z;F.push(`hsl(${$}, 70%, 60%)`)}return F})(n.length))},[n==null?void 0:n.length]);const _=async()=>{console.log("Categories & Books -> Triggering manual refresh from server..."),o()},v=E.useCallback(async()=>{t(!1);try{console.warn("[DB ACTION] Attempting to delete entire database..."),await bD.delete(),await m()}catch(j){console.error("[DB ERROR] Could not delete the database:",j)}},[m]),x=E.useCallback(j=>{j.stopPropagation(),t(!0)},[]);if(r||s)return k.jsx("div",{children:"Loading categories..."});if(i instanceof Error)return k.jsxs("div",{children:["Error loading categories: ",i.message]});const g=(j,L)=>{j.stopPropagation(),a(`/books/${L}`)},y={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea",display:"flex",justifyContent:"space-between",alignItems:"center"},categoryGrid:{display:"grid",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"},actionButton:{border:"none",background:"none",cursor:"pointer",fontSize:"1.5rem",padding:"5px",borderRadius:"5px",transition:"background-color 0.2s",color:"#666",lineHeight:"1.5rem"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"30px",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",maxWidth:"400px",textAlign:"center"},buttonGroup:{display:"flex",justifyContent:"space-around",marginTop:"20px"}};let b;c?b="repeat(2, 1fr)":f?b="repeat(3, 1fr)":b="repeat(auto-fill, minmax(280px, 1fr))";const C={...y.categoryGrid,gridTemplateColumns:b},R=n==null?void 0:n.filter(j=>{var L;return(L=j.books)==null?void 0:L.some(F=>F.Type==="book")}),I=()=>e?k.jsx("div",{style:y.modalOverlay,children:k.jsxs("div",{style:y.modalContent,children:[k.jsx("h3",{className:"text-xl font-bold mb-3 text-red-600",children:" Confirm Permanent Deletion"}),k.jsx("p",{className:"text-gray-700",children:"Are you absolutely sure you want to delete **ALL** stored data (Categories, Books, Songs)? This action cannot be undone."}),k.jsxs("div",{style:y.buttonGroup,children:[k.jsx("button",{onClick:v,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Yes, Delete Everything"}),k.jsx("button",{onClick:()=>t(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Cancel"})]})]})}):null;return k.jsxs("div",{style:y.container,children:[k.jsxs("h2",{style:y.heading,children:[k.jsx("span",{style:{marginRight:"auto"},children:"Book Categories"}),k.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[k.jsx("button",{onClick:_,style:{...y.actionButton,color:"#3498db",marginRight:"10px"},title:"Reload",children:""}),k.jsx("button",{onClick:x,style:{...y.actionButton,color:"#e74c3c"},title:"Delete ALL Data",children:""})]})]}),k.jsx("div",{style:C,children:R==null?void 0:R.map((j,L)=>k.jsxs("div",{onClick:F=>g(F,j.id),style:{...y.categoryItem,backgroundColor:L%2===0?"#f8f9fa":"#ffffff",borderLeft:`5px solid ${l[L]||"#3498db"}`},className:"category-item",children:[k.jsx("div",{style:{...y.categoryIcon,backgroundColor:l[L]||"#3498db"},children:""}),k.jsx("span",{style:y.categoryName,children:j.name})]},j.id))}),k.jsx("style",{children:`
                    .category-item:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                        border-color: #3498db;
                    }
                `}),k.jsx(I,{})]})}const _D=E.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),zy=()=>E.useContext(_D);console.log("DownloadStatusProvider Function Running!");const ib={},kS=E.createContext(void 0),kD=({children:e,books:t})=>{const n=E.useMemo(()=>t.reduce((x,g)=>(x[g.bookId]={totalSongs:g.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},x),{}),[t]),[r,s]=E.useState(n),[i,o]=E.useState(!1);E.useEffect(()=>{if(!t||t.length===0){s({}),o(!0);return}(async()=>{try{const g=await rb(t),y={};for(const b of t){const C=b.bookId,R=g[C]||{},I=await za(C);y[C]={totalSongs:b.songCount||R.totalSongs||0,downloadedSongs:R.downloadedSongs||0,isIndexDownloaded:I,downloadingSongs:{}}}s(y),o(!0)}catch(g){console.error("Failed to load or initialize download status:",g),s({}),o(!0)}})()},[t]);const a=E.useMemo(()=>t.map(x=>x.bookId).join(","),[t]);E.useEffect(()=>{if(!t||t.length===0){s(ib);return}(async()=>{try{const g=await rb(t);s(g)}catch(g){console.error("Failed to load initial download status from DB:",g),s(ib)}})()},[a,t]);const l=E.useCallback((x,g)=>{s(y=>({...y,[x]:{...y[x],totalSongs:g}}))},[]),u=E.useCallback((x,g)=>{s(y=>({...y,[x]:{...y[x],downloadedSongs:g}}))},[]),c=E.useCallback((x,g)=>{s(y=>({...y,[x]:{...y[x],isIndexDownloaded:g}}))},[]),f=E.useCallback((x,g)=>{s(y=>{var b;return{...y,[x]:{...y[x],downloadingSongs:{...(b=y[x])==null?void 0:b.downloadingSongs,[g]:!0}}}})},[]),p=E.useCallback((x,g)=>{s(y=>{const b=y[x];if(!b)return y;const C={...b.downloadingSongs};return delete C[g],{...y,[x]:{...b,downloadedSongs:(b.downloadedSongs||0)+1,downloadingSongs:C}}})},[]),m=E.useCallback((x,g,y)=>{s(b=>{const C=b[x]||{},R=C.downloadedSongs||0;return{...b,[x]:{...C,totalSongs:g,downloadedSongs:R,downloadingSongs:y}}})},[]),_=E.useCallback(x=>{s(g=>{const y=g[x];return y?{...g,[x]:{...y,downloadedSongs:y.totalSongs,downloadingSongs:{}}}:g})},[]),v={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:f,markSongAsDownloaded:p,updateIndexStatus:c,markBookDownloadStart:m,markBookDownloadComplete:_,isLoaded:i};return k.jsx(kS.Provider,{value:v,children:e})},Vy=()=>{const e=E.useContext(kS);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},SD=3e3,ED=1,CD=5,SS=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const s=new URL(yo);s.searchParams.append("mode","api"),s.searchParams.append("apiname","getsongtextforsong"),s.searchParams.append("book",e),s.searchParams.append("sourcerow",t),s.searchParams.append("songtitle",n),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString());if(!i.ok){const o=await i.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},TD=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:s,markBookDownloadStart:i,markBookDownloadComplete:o}=Vy(),a=E.useCallback(c=>{const f=r[c];if(!f)return!1;const p=f.downloadingSongs??{};return Object.keys(p).length>0},[r]),l=E.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=E.useCallback(async(c,f)=>{if(a(c))return 0;let p=[],m=0;if(await za(c)){const y=await Fy(c);y&&Array.isArray(y)&&(p=y.map(b=>({sourceRow:b.sourceRow,songTitle:b.songTitle,tags:b.tags})),m=p.length)}else try{const y=new URL(yo);y.searchParams.append("mode","api"),y.searchParams.append("apiname","getsongsforbook"),y.searchParams.append("book",c),f&&y.searchParams.append("sessionuser",f);const b=await fetch(y.toString());if(!b.ok){const I=await b.json();throw new Error(`Failed to fetch song indices: ${b.status} - ${JSON.stringify(I)}`)}const R=(await b.json()).map(I=>({...I,sourceRow:typeof I.sourceRow=="string"?parseInt(I.sourceRow,10):I.sourceRow,tags:I.tags??void 0}));p=R,m=p.length,await By(c,R)}catch{return 0}if(p.length===0)return 0;const _=[];for(const y of p)await Rf(c,y.songTitle)?s(c,y.songTitle):_.push(y);const v=_.slice(0,CD),x={};for(const y of v)x[y.songTitle]="pending";i(c,m,x);let g=0;for(const y of v)try{g>=ED&&(await new Promise(b=>setTimeout(b,SD)),g=0),await gD(c,y,f??null,SS),s(c,y.songTitle),g++}catch{}return m},[e,t,n,a,s,i]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},yr={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},Ky=()=>{const e=dr(),{categoryId:t,bookId:n,songTitle:r}=ju(),s=r?decodeURIComponent(r):"",[i,o]=ze.useState(!1),a={...yr.link,color:i?"#0056b3":"#007bff",textDecoration:i?"underline":"none"},l=k.jsx(rr,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"});return e.pathname.startsWith("/books/")?k.jsxs("div",{style:yr.container,children:[l,k.jsx("span",{style:yr.separator,children:">"}),t]}):e.pathname.startsWith("/book/")?k.jsxs("div",{style:yr.container,children:[l,k.jsx("span",{style:yr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:yr.separator,children:">"}),n]}):e.pathname.startsWith("/details/book/")?k.jsxs("div",{style:yr.container,children:[l,k.jsx("span",{style:yr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:yr.separator,children:">"}),k.jsx(rr,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:n}),k.jsx("span",{style:yr.separator,children:">"}),k.jsx("span",{style:yr.currentPage,children:s})]}):null},ES=E.createContext({preferredLanguage:"devanagari",setPreferredLanguage:()=>{}}),CS=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=E.useState(t||"devanagari");return E.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),k.jsx(ES.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r},children:e})},bo=()=>E.useContext(ES);async function TS(e,t){const n=[];let r=0;for(;r<e.length;){const s=e.slice(r,r+t),i=await Promise.all(s.map(o=>o()));n.push(...i),r+=t}return n}const ob=3,PD=10;async function AD(e,t,n,r,s){const i=n||new Set,o=OD(r,e);if(o.length>0){const a=o.slice(0,PD);console.log(`[RECURSION START] Found ${o.length} linked books in ${e}. Queuing ${a.length} for batched download...`);const l=a.filter(u=>!i.has(u)).map(u=>()=>s(u,t,n));l.length>0?(console.log(`[BATCH EXECUTION] Queued ${l.length} unique downloads with batch size ${ob}.`),await TS(l,ob),console.log(`[RECURSION COMPLETE] All batched linked books for ${e} have been processed.`)):console.log(`[RECURSION SKIP] All queued linked books in ${e} are already being processed or downloaded.`)}}function OD(e,t){return e.filter(s=>s.type==="link"&&s.link).map(s=>{try{return JSON.parse(s.link).bookId}catch(i){return console.error("Failed to parse link JSON:",s.link,i),null}}).filter(s=>s!==null).filter((s,i,o)=>s!==t&&o.indexOf(s)===i)}async function PS(e,t,n=new Set,r){if(!e)return 0;if(n.has(e))return console.warn(`[SKIP] Book ${e} is already in the download chain. Skipping.`),0;const s=await qd(e);if(!s||!s.isFullBookDownloadable)return console.warn(`[SKIP] Book ${e} is not configured as full-book downloadable. Skipping.`),0;if(await bS(e))return console.log(`[SKIP] Book ${e} is already fully downloaded (from Dexie check). Skipping.`),0;n.add(e),console.log(`[DOWNLOAD START] Initiating bulk download for book ID: ${e}`);const i=new URL(yo);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getentirebookasjson"),i.searchParams.append("book",e),i.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`[FETCH] URL for ${e}: ${i.toString()}`);try{const o=await fetch(i.toString());if(!o.ok){let c={};try{c=await o.json()}catch{c={message:"No detailed error message, raw response status error."}}throw new Error(`Failed to fetch content for book ${e}: ${o.status} - ${JSON.stringify(c)}`)}const a=await o.json(),{songIndices:l,songDetails:u}=a;return!u||u.length===0?(console.log(`[DOWNLOAD] No song details found for book: ${e}. Returning 0.`),0):(await uD(u),await cD(l),console.log(`[DOWNLOAD SUCCESS] Data for ${e} saved to IndexedDB. Songs downloaded: ${u.length}`),console.log(`[RECURSION CHECK] Checking for linked books in ${e}...`),await AD(e,t,n,l,PS),u.length)}catch(o){throw console.error(`[DOWNLOAD ERROR] Failed during processing for ${e}:`,o),o}finally{console.log(`[DOWNLOAD END] Finished processing book ID: ${e}.`)}}const AS=(e,t)=>{const n=Af(),[r,s]=E.useState({status:"idle",downloadedCount:null,error:null}),i=E.useCallback(async()=>{if(r.status!=="loading"){s({status:"loading",downloadedCount:null,error:null});try{const o=await PS(e,t);return console.log("Bulk download successful. Invalidating React Query cache..."),await n.invalidateQueries({queryKey:OO(e)}),await n.invalidateQueries({queryKey:AO}),console.log("Cache invalidated and refetched successfully."),s({status:"success",downloadedCount:o,error:null}),o}catch(o){const a=o.message||"Bulk download failed.";return s({status:"error",downloadedCount:null,error:a}),0}}},[e,t,r.status,n]);return{...r,startBulkDownload:i,isDownloading:r.status==="loading"}},OS=ze.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:s,isEffectivelyOffline:i,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:f,handleDeleteIndexClick:p,handleDeleteBookClick:m,DownloadNotAvailableIcon:_,DownloadIndexIcon:v,DownloadedIcon:x,DownloadBookIcon:g,DeleteIndexIcon:y,DeleteBookIcon:b}=e,{status:C,isDownloading:R,startBulkDownload:I}=AS(t.bookId,s),j=a(t.bookId),L=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,F=n.downloadedSongs||0,z=n.totalSongs||t.songCount||0,me=Math.max(Number(z),F),$=me>0?Math.floor(F/me*100):0,re=r[t.bookId]??!1,A=F===me&&me>0,G=t.isFullBookDownloadable;return k.jsx("li",{onClick:be=>u(be,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:k.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[k.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),k.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${$}%`}}),k.jsx("span",{className:`relative z-20 px-2 ${$>25,"text-black-900"}`,children:j?k.jsxs("span",{className:"font-bold",children:[k.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),k.jsxs("span",{className:"text-green-700",children:["Downloading... (",L," remaining)"]})]}):k.jsx("span",{className:"text-black-900",children:t.bookName})})]}),k.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[k.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:k.jsxs("span",{children:["(",F,"/",me," downloaded)"]})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:re?k.jsxs("span",{className:"flex items-center text-green-500",children:[x," ",k.jsx("span",{className:"ml-1",children:"Index"})]}):k.jsx("button",{onClick:be=>{be.stopPropagation(),c(be,t.bookId)},disabled:i||o||a(t.bookId)||re,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":k.jsxs(k.Fragment,{children:[v," ",k.jsx("span",{className:"ml-1",children:"Index"})]})})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:A?k.jsxs("span",{className:"flex items-center text-green-500",children:[x," ",k.jsx("span",{className:"ml-1",children:"Book"})]}):k.jsx(k.Fragment,{children:G?k.jsx("button",{onClick:be=>{be.stopPropagation(),I()},disabled:i||o||a(t.bookId),className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:k.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[g," ",R?"Downloading (Fast)...":C==="success"?"Downloaded ":"Book"]})}):k.jsxs("span",{className:"flex items-center text-red-500 cursor-help",title:"Bulk download is restricted for this book.",children:[_,k.jsx("span",{className:"ml-1 text-sm font-medium",children:"Not Available"})]})})}),k.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[k.jsxs("button",{onClick:be=>{be.stopPropagation(),p(be,t.bookId)},disabled:!re,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[y," ",k.jsx("span",{className:"ml-1",children:"Index"})]}),k.jsxs("button",{onClick:be=>{be.stopPropagation(),m(be,t.bookId)},disabled:a(t.bookId)||$===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[b," ",k.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});OS.displayName="BookListItem";const RD=3;function jD(e,t){return t?t.filter(n=>n.type==="link"&&n.link).map(n=>{try{return JSON.parse(n.link).bookId}catch(r){return console.error("Error parsing link in song index:",r),null}}).filter(n=>n!==null&&n!==e).filter((n,r,s)=>s.indexOf(n)===r):[]}async function RS(e,t){if(t.has(e)){console.log(`[DELETION SKIP] Already processed ${e}.`);return}t.add(e),console.log(`[DELETION START] Analyzing dependencies for book: ${e}`);const n=await Fy(e),r=jD(e,n);if(r.length>0){console.log(`[RECURSION CHECK] Book ${e} links to ${r.length} unique books.`);const o=r,l=(await Promise.all(o.map(async u=>{const c=await qd(u);return{id:u,type:c&&c.Type?c.Type:"mini-book"}}))).filter(u=>u.type==="mini-book").map(u=>u.id);if(l.length>0){const u=l.filter(c=>!t.has(c)).map(c=>()=>RS(c,t));u.length>0&&(console.log(`[BATCH EXECUTION] Queuing ${u.length} *mini-book* dependency deletions.`),await TS(u,RD),console.log(`[RECURSION COMPLETE] All mini-book dependencies for ${e} have been processed.`))}}const s=await qd(e);(s&&s.Type?s.Type:"book")==="mini-book"?(await wS(e),console.log(`[DELETION SUCCESS] Successfully deleted mini-book ${e} and its dependencies.`)):console.log(`[CLEANUP COMPLETE] Book ${e} is type 'Book'. Only dependencies were deleted.`)}function ID(e,t){const n=E.useMemo(()=>((e==null?void 0:e.books)??[]).filter(a=>a.Type==="book"),[e==null?void 0:e.books]),[r,s]=E.useState(n);return E.useEffect(()=>{if(!t){s(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await za(u.bookId)})))).filter(u=>u.isCached);s(l)})()},[n,t]),E.useMemo(()=>t?r:n,[t,n,r])}function DD(){var K,de;const{categoryId:e}=ju(),t=fr(),{categories:n,isLoading:r,isFetching:s,error:i}=Uy(),{isEffectivelyOffline:o}=zy(),a=E.useMemo(()=>{if(n&&e)return n.find(oe=>oe.id===e)},[n,e]),l=ID(a,o),{downloadAllSongsForBook:u,isDownloadingBook:c,isAnyBookDownloading:f}=TD(),[p,m]=E.useState(null),[_,v]=E.useState(!1),[x,g]=E.useState({});Af();const{preferredLanguage:y}=bo(),{downloadStatus:b,isLoaded:C,updateDownloadProgress:R,updateDownloadedCount:I}=Vy(),{session:j}=wo(),L=(K=j==null?void 0:j.user)==null?void 0:K.email;E.useEffect(()=>{if(!l||l.length===0){g({});return}(async()=>{const _e=l.map(pe=>za(pe.bookId)),$e=await Promise.all(_e),Re={};l.forEach((pe,Ze)=>{Re[pe.bookId]=$e[Ze]}),g(Re)})()},[l]);const F=E.useCallback(async(oe,_e)=>{let Re;for(let pe=0;pe<1;pe++)try{const Ze=new URL(yo);Ze.searchParams.append("mode","api"),Ze.searchParams.append("apiname","getsongsforbook"),Ze.searchParams.append("book",oe),Ze.searchParams.append("sessionuser",_e??"dummyfornow");const Ye=await fetch(Ze.toString());if(!Ye.ok){const P=await Ye.text();throw new Error(`Fetch failed (Status: ${Ye.status}). Body: ${P}`)}const Tt=(await Ye.json()).map(P=>({...P,sourceRow:typeof P.sourceRow=="string"?parseInt(P.sourceRow,10):P.sourceRow,tags:P.tags||null}));return await By(oe,Tt),Tt}catch(Ze){if(Re=Ze,pe<0){const Ye=Math.pow(2,pe)*1e3;console.log(`Retrying fetch in ${Ye}ms...`),await new Promise(We=>setTimeout(We,Ye))}}throw Re},[]),z=E.useCallback(async(oe,_e)=>{oe.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] Confirm deletion of book index [${_e}]. Proceeding with deletion assuming user confirmed.`),await iD(_e),g($e=>({...$e,[_e]:!1})),R(_e,0),I(_e,0)},[R,I]),me=E.useCallback(async(oe,_e)=>{oe.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] WARNING: This will permanently delete the ENTIRE book "${_e}". Proceeding with deletion assuming user confirmed.`);const $e=new Set;try{await RS(_e,$e),await wS(_e),R(_e,0),I(_e,0)}catch(Re){console.error(`Failed to delete book ${_e} recursively:`,Re)}},[R,I]),$=E.useCallback((oe,_e)=>{console.log(`categoryId:${e}, bookId:${_e}`),oe.stopPropagation(),t(`/book/${e}/${_e}`)},[e,t]),re=async()=>{var _e;v(!0);const oe=(_e=j==null?void 0:j.user)==null?void 0:_e.email;try{for(const Re of l)console.log(`Downloading index for book: ${Re.bookId}`),await F(Re.bookId,oe);console.log("All song indices downloaded successfully.");const $e=l.reduce((Re,pe)=>(Re[pe.bookId]=!0,Re),{});g($e)}catch($e){console.error("Failed to download all indices:",$e),g({})}finally{v(!1)}},A=E.useCallback(async(oe,_e)=>{var Re;oe.stopPropagation(),m(_e);const $e=(Re=j==null?void 0:j.user)==null?void 0:Re.email;try{await F(_e,$e),console.log(`Index for Book ${_e} downloaded successfully and cached.`),g(pe=>({...pe,[_e]:!0}))}catch(pe){console.error(`Failed to download index for Book ${_e}:`,pe),g(Ze=>({...Ze,[_e]:!1}))}finally{m(null)}},[(de=j==null?void 0:j.user)==null?void 0:de.email,F]),G=E.useCallback((oe,_e,$e)=>{oe.stopPropagation(),u(_e,L)},[u,L]),be=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),[]),le=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),[]),ce=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),[]),se=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]}),[]),ye=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),[]),J=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),[]),Z=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]}),[]);return r||s?k.jsx("div",{children:"Loading books..."}):i instanceof Error?k.jsxs("div",{children:["Error loading books: ",i.message]}):C?k.jsxs(k.Fragment,{children:[k.jsx(Ky,{}),k.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner",children:[k.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Books in ",(a==null?void 0:a.name)||"Category"]}),l.length>0?k.jsx("ul",{className:"list-none p-0 space-y-3",children:l.map(oe=>k.jsx(OS,{book:oe,status:b[oe.bookId]||{},indexDownloadStatus:x,userEmail:L??null,isEffectivelyOffline:o,isAnyBookDownloading:f,isDownloadingBook:c,isDownloadingBookIndex:p,handleBookClick:$,handleDownloadBookIndexClick:A,handleDownloadBookClick:G,handleDeleteIndexClick:z,handleDeleteBookClick:me,DownloadNotAvailableIcon:se,DownloadIndexIcon:be,DownloadedIcon:ye,DownloadBookIcon:ce,DeleteIndexIcon:Z,DeleteBookIcon:J},oe.bookId))}):k.jsx("div",{className:"text-center py-10 text-gray-500 bg-white rounded-lg shadow-md",children:o?"No cached books found. Connect to the internet to download content.":"No books found in this category."})]}),k.jsx("div",{className:"mt-6 flex justify-end",children:k.jsxs("button",{onClick:re,disabled:_,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 flex items-center justify-center space-x-2 shadow-md ${_?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[_?k.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):le,k.jsx("span",{children:_?"Downloading All Indices...":"Download All Indices"})]})})]}):k.jsx("div",{className:"flex justify-center items-center h-40",children:k.jsx("p",{children:"Loading download status..."})})}function ND(e){return[{pattern:/([])/g,replacement:"$1",name:"Palatal"},{pattern:/([])/g,replacement:"$1",name:"Retroflex"},{pattern:/([])/g,replacement:"$1",name:"Velar"},{pattern:/([])/g,replacement:"$1",name:"Dental"},{pattern:/([])/g,replacement:"$1",name:"Labial"},{pattern:/$/g,replacement:"",name:"Word-final"},{pattern://g,replacement:"",name:"Chandrabindu  "}].reduce((n,r)=>{const s=n.replace(r.pattern,(i,o)=>r.replacement.replace("$1",o));return s!==n?s:n},e)}function LD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};return e.replace(/\u0D30\u0D4D/g,"").replace(/[-]/g,n=>t[n]||n)}function $D(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};let n=e;for(const r in t){const s=t[r];n=n.replace(new RegExp(r,"g"),s)}return n}function MD(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const pu=(e,t,n)=>{if(n==="original"||t==="tamil"&&n==="tamil_superscripted")return e;let r=e,s=e;try{return t==="devanagari"?r=ND(r):(t==="tamil"||t==="tamil_superscripted")&&(r=r.normalize("NFC")),window.Sanscript&&(s=window.Sanscript.t(r,t==="devanagari"?"devanagari":"itrans",n),n==="malayalam"?s=LD(s):n==="itrans"?t==="tamil"&&(s=MD(s)):(n==="tamil"||n==="tamil_superscripted")&&(s=$D(s))),s}catch(i){return console.error(`Sanscript Transliteration Error for target: ${n}. Returning original text.`,i),e}},FD={color:"#059669",background:"#E6FFEE"},BD={color:"#EF4444",background:"#FEEEEE"},UD={color:"green"},zD={color:"black"},ab={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},VD={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},jS={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},KD={backgroundColor:"#f0f4f8"},WD={backgroundColor:"#f5f5f5",fontWeight:"bold",fontSize:"1.2em",padding:"15px 15px 5px 15px",cursor:"default",marginBottom:"10px",marginTop:"15px",borderBottom:"2px solid #ddd",boxShadow:"none"},lb={...jS,backgroundColor:"#eaf2ff",color:"#1e40af",fontWeight:"500",border:"1px solid #c3dafe"},HD=async(e,t)=>{if(!e)return[];const n=new URL(yo);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const i=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(i)}`)}const s=await r.json();return s.data||s},qD=(e,t)=>{const[n,r]=E.useState({});return E.useEffect(()=>{if(r({}),!e||!t||t.length===0)return;(async()=>{const i=t.map(async l=>{const u=await Rf(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(i)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n},GD=(e,t)=>{const n=t==="itrans"?e.songTitle:(()=>{if(window.Sanscript)try{return pu(e.songTitle,"itrans",t)}catch(r){return console.error("Error during transliteration",r),e.songTitle}return e.songTitle})();return e.type==="link"?k.jsxs(k.Fragment,{children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"10px",minWidth:"20px"},children:[k.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"}),k.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"})]}),k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:n})]}):k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:n})},ub=e=>{if(e.type!=="link"||!e.link)return null;try{return JSON.parse(e.link).bookId||null}catch{return null}};function QD(){var re;const{categoryId:e,bookId:t}=ju(),n=fr(),{isEffectivelyOffline:r}=zy(),{session:s}=wo(),i=(re=s==null?void 0:s.user)==null?void 0:re.email,[o,a]=E.useState(null),{preferredLanguage:l}=bo(),[,u]=E.useState({}),[c,f]=E.useState(!0),[p,m]=E.useState([]);E.useEffect(()=>{(async()=>{f(!0);try{const G=await hD();m(G)}catch(G){console.error("Failed to fetch downloaded book IDs:",G)}finally{f(!1)}})()},[]),E.useEffect(()=>{u({})},[l]);const{isLoading:_,error:v,data:x,isFetching:g}=Of({queryKey:["songIndices",t,i],queryFn:async()=>{if(!t||!i)return[];const A=await Fy(t);return A&&A.length>0?A:HD(t,i)},staleTime:1/0,gcTime:0,networkMode:"always",refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!!t&&!!i}),y=x,{downloadStatus:b}=Vy(),C=qD(t,y);if(E.useEffect(()=>{t&&x&&!g&&By(t,x).catch(A=>{console.error("Error saving song indices data to IndexedDB:",A)})},[t,x,g]),E.useEffect(()=>{const A=sessionStorage.getItem("lastClickedSongIndex");A!==null&&(a(parseInt(A,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),_)return k.jsx("div",{style:VD,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(v instanceof Error)return k.jsxs("div",{children:["Error loading song indices: ",v.message]});const I=(A,G,be,le)=>{switch(A.stopPropagation(),G[be].type){case"title":break;case"link":const se=G[be].link,ye=JSON.parse(se),J=ye.categoryId.trim(),Z=ye.bookId.trim(),K=`/book/${J}/${Z}`;console.log(K),J&&Z&&(sessionStorage.setItem("lastClickedSongIndex",be.toString()),n(K));break;default:const de=G[be].sourceRow,oe=G[be].songTitle;le&&(sessionStorage.setItem("lastClickedSongIndex",be.toString()),n(`/details/book/${e}/${le}/${de}/${encodeURIComponent(oe)}`,{state:{filteredSongIndices:G,index:be}}))}},j=A=>C[A]===!0,L=A=>p.includes(A),F=(y==null?void 0:y.filter(A=>r?j(A.songTitle):!0))??[],z=(A,G)=>{if(A.type==="title")return WD;if(A.type==="link"){const le=ub(A),ce=le?L(le):!1;return{...lb,...ce?FD:BD,...G===o&&ab}}const be=j(A.songTitle);return{...jS,...be?UD:zD,...G===o&&ab}},me=(A,G)=>{G!=="title"&&(A.currentTarget.style.backgroundColor=KD.backgroundColor)},$=(A,G)=>{G!=="title"&&(G==="link"?A.currentTarget.style.backgroundColor=lb.backgroundColor:A.currentTarget.style.backgroundColor="")};return k.jsxs(k.Fragment,{children:[k.jsx(Ky,{}),k.jsxs("div",{children:[k.jsxs("h2",{children:["Song Indices for Book:"," ",`bookId: ${t} (${F.length} items)`]}),k.jsx("ul",{className:"list-none p-0 m-0",children:F==null?void 0:F.map((A,G)=>{var be;return ub(A),k.jsxs("li",{onClick:le=>{A.type!=="title"&&I(le,F,G,t)},style:z(A,G),onMouseEnter:le=>me(le,A.type),onMouseLeave:le=>$(le,A.type),className:`transition-all duration-150 ease-in-out ${A.type!=="title"?"hover:shadow-md":""}`,children:[GD(A,l),A.type==="song"&&k.jsx("span",{style:{marginLeft:"10px",color:"#EF4444"},children:t&&((be=b[t])==null?void 0:be.downloadingSongs[A.songTitle||""])&&"..downloading song.."}),A.type==="link"&&L(t)&&k.jsx("span",{style:{marginLeft:"10px",color:"orange",fontSize:"0.85em",fontWeight:"600"},children:"..downloading linked book.."})]},A.sourceRow)})})]})]})}const YD=e=>{const t=/([-])(?![])(?=[-])/g;return e.replace(t,"$1&shy;")},JD=e=>{const t=/<link\s+categoryId="([^"]+)"\s+bookId="([^"]+)"\s+sourceRow=(?:\"([^\"]+)\"|(\S+))\s+songTitle="([^"]+)">([\s\S]*?)<\/link>/gi;return e.replace(t,(n,r,s,i,o,a,l)=>{const u=i||o,c=r.replace(/"/g,"&quot;"),f=s.replace(/"/g,"&quot;"),p=u.replace(/"/g,"&quot;"),m=a.replace(/"/g,"&quot;");return`
      <a 
        href="#"
        class="text-indigo-600 hover:text-indigo-800 font-medium underline cursor-pointer transition-colors duration-150"
        onclick="event.preventDefault(); window.handleInternalNavigation(
          '${c}', 
          '${f}', 
          '${p}', 
          '${m}'
        );"
      >
        ${l}
      </a>
    `})},ZD=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:s=[],striped:i=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c})=>{if(!Array.isArray(e)||e.length<1)return k.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[f,...p]=e,m=v=>{let x=String(v).replace(/ \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof v=="string"&&u!==c)try{const g=x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let y=pu(g,c,u);(u.toLowerCase()==="devanagari"||u.toLowerCase()==="devanagari")&&(y=YD(y)),x=y}catch(g){return console.error("Error during transliteration:",g),{__html:x}}return x=x.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),x=JD(x),{__html:x}},_=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return k.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${_} ${t}`,children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsx("tr",{children:f.map((v,x)=>k.jsx("th",{className:`
         px-4 py-4 text-left text-${l} font-medium text-gray-700
         ${r.includes(x)?n:""}
         sticky top-0 bg-gray-100
        `,dangerouslySetInnerHTML:m(v)},`th-${x}`))})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((v,x)=>k.jsx("tr",{id:`trRowAsAnchor-${x}`,className:`
    ${i&&x%2===0?"bg-white":"bg-gray-100"}
    ${o?"hover:bg-indigo-50":""}
   `,children:v.map((g,y)=>k.jsx("td",{className:`
      px-4 py-3.5 text-${l} align-top
      ${s.includes(y)?"whitespace-normal break-all max-w-full":"whitespace-nowrap"}
      ${r.includes(y)?n:""}
     `,dangerouslySetInnerHTML:m(g)},`td-${x}-${y}`))},`row-${x}`))})]})})};function XD(e,t,n){return Math.max(t,Math.min(e,n))}const hn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function cb(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function db(e,t,n,r=.15){return r===0?XD(e,t,n):e<t?-cb(t-e,n-t,r)+t:e>n?+cb(e-n,n-t,r)+n:e}function eN(e,[t,n],[r,s]){const[[i,o],[a,l]]=e;return[db(t,i,o,r),db(n,a,l,s)]}function tN(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nN(e){var t=tN(e,"string");return typeof t=="symbol"?t:String(t)}function Cn(e,t,n){return t=nN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fb(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const IS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function hb(e){return e?e[0].toUpperCase()+e.slice(1):""}const rN=["enter","leave"];function sN(e=!1,t){return e&&!rN.includes(t)}function iN(e,t="",n=!1){const r=IS[e],s=r&&r[t]||t;return"on"+hb(e)+hb(s)+(sN(n,s)?"Capture":"")}const oN=["gotpointercapture","lostpointercapture"];function aN(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=oN.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function lN(e,t=""){const n=IS[e],r=n&&n[t]||t;return e+r}function jf(e){return"touches"in e}function DS(e){return jf(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function uN(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function cN(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function NS(e){return jf(e)?cN(e)[0]:e}function dN(e){return uN(e).map(t=>t.identifier)}function ap(e){const t=NS(e);return jf(e)?t.identifier:t.pointerId}function pb(e){const t=NS(e);return[t.clientX,t.clientY]}function fN(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i})}return t}function Gd(e,...t){return typeof e=="function"?e(...t):e}function hN(){}function pN(...e){return e.length===0?hN:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function mb(e,t){return Object.assign({},t,e||{})}const mN=32;class gN{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Gd(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let i=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,fN(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const I=n._delta.map(Math.abs);hn.addTo(n._distance,I)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[I,j]=f;p[0]=c[0]!==!1?I-c[0]:0,p[1]=c[1]!==!1?j-c[1]:0}else p[0]=c[0]!==!1?o-c[0]:0,p[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,_=n._active&&!n._blocked||n.active;_&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Gd(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,x]=n.offset,[[g,y],[b,C]]=n._bounds;n.overflow=[v<g?-1:v>y?1:0,x<b?-1:x>C?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const R=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=eN(n._bounds,n.offset,R),n.delta=hn.sub(n.offset,m),this.computeMovement(),_&&(!n.last||i>mN)){n.delta=hn.sub(n.offset,m);const I=n.delta.map(Math.abs);hn.addTo(n.distance,I),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[I[0]/i,I[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(St(St(St({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function yN([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class vN extends gN{constructor(...t){super(...t),Cn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=hn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=hn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[DS(t)]:r.axisThreshold;n.axis=yN(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const wN=e=>e,gb=.15,LS={enabled(e=!0){return e},eventOptions(e,t,n){return St(St({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[gb,gb];case!1:return[0,0];default:return hn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return hn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||wN},threshold(e){return hn.toVector(e,0)}},bN=0,$u=St(St({},LS),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=bN){return e},bounds(e={}){if(typeof e=="function")return i=>$u.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),yb={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class xN extends vN{constructor(...t){super(...t),Cn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=$u.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=ap(t),r._pointerActive=!0,this.computeValues(pb(t)),this.computeInitial(),n.preventScrollAxis&&DS(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=ap(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const i=pb(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=hn.sub(i,n._values),this.computeValues(i)),hn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=ap(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,o]=n._distance;if(n.tap=i<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,p]=r.swipe.velocity,[m,_]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const x=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);x>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(c)>_&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,_N(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=yb[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,hn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in yb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function _N(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Mu=typeof window<"u"&&window.document&&window.document.createElement;function $S(){return Mu&&"ontouchstart"in window}function kN(){return $S()||Mu&&window.navigator.maxTouchPoints>1}function SN(){return Mu&&"onpointerdown"in window}function EN(){return Mu&&"exitPointerLock"in window.document}function CN(){try{return"constructor"in GestureEvent}catch{return!1}}const sr={isBrowser:Mu,gesture:CN(),touch:$S(),touchscreen:kN(),pointer:SN(),pointerLock:EN()},TN=250,PN=180,AN=.5,ON=50,RN=250,jN=10,vb={mouse:0,touch:0,pen:8},IN=St(St({},$u),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&sr.pointerLock,sr.touch&&n?"touch":this.pointerLock?"mouse":sr.pointer&&!s?"pointer":sr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?TN:void 0,!(!sr.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const i=hn.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:e=AN,distance:t=ON,duration:n=RN}={}){return{velocity:this.transform(hn.toVector(e)),distance:this.transform(hn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return PN;case!1:return 0;default:return e}},axisThreshold(e){return e?St(St({},vb),e):vb},keyboardDisplacement(e=jN){return e}});St(St({},LS),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!sr.touch&&sr.gesture)return"gesture";if(sr.touch&&r)return"touch";if(sr.touchscreen){if(sr.pointer)return"pointer";if(sr.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const a=mb(Gd(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=mb(Gd(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[s(),i()]:o=>[s(o),i(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",hn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});St(St({},$u),{},{mouseOnly:(e=!0)=>e});St(St({},$u),{},{mouseOnly:(e=!0)=>e});const MS=new Map,Ym=new Map;function DN(e){MS.set(e.key,e.engine),Ym.set(e.key,e.resolver)}const NN={key:"drag",engine:xN,resolver:IN};function LN(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $N(e,t){if(e==null)return{};var n=LN(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const MN={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=sr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},FN=["target","eventOptions","window","enabled","transform"];function cd(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=cd(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function BN(e,t,n={}){const r=e,{target:s,eventOptions:i,window:o,enabled:a,transform:l}=r,u=$N(r,FN);if(n.shared=cd({target:s,eventOptions:i,window:o,enabled:a,transform:l},MN),t){const c=Ym.get(t);n[t]=cd(St({shared:n.shared},u),c)}else for(const c in u){const f=Ym.get(c);f&&(n[c]=cd(St({shared:n.shared},u[c]),f))}return n}class FS{constructor(t,n){Cn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,i){const o=this._listeners,a=lN(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=St(St({},l),i);t.addEventListener(a,s,u);const c=()=>{t.removeEventListener(a,s,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class UN{constructor(){Cn(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class zN{constructor(t){Cn(this,"gestures",new Set),Cn(this,"_targetEventStore",new FS(this)),Cn(this,"gestureEventStores",{}),Cn(this,"gestureTimeoutStores",{}),Cn(this,"handlers",{}),Cn(this,"config",{}),Cn(this,"pointerIds",new Set),Cn(this,"touchIds",new Set),Cn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),VN(this,t)}setEventIds(t){if(jf(t))return this.touchIds=new Set(dN(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=BN(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=wb(r,a.eventOptions,!!s);if(a.enabled){const u=MS.get(o);new u(this,t,o).bind(l)}}const i=wb(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)i(o,"",a=>this.nativeHandlers[o](St(St({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const i in r)r[i]=pN(...r[i]);if(!s)return r;for(const i in r){const{device:o,capture:a,passive:l}=aN(i);this._targetEventStore.add(s,o,"",r[i],{capture:a,passive:l})}}}}function $o(e,t){e.gestures.add(t),e.gestureEventStores[t]=new FS(e,t),e.gestureTimeoutStores[t]=new UN}function VN(e,t){t.drag&&$o(e,"drag"),t.wheel&&$o(e,"wheel"),t.scroll&&$o(e,"scroll"),t.move&&$o(e,"move"),t.pinch&&$o(e,"pinch"),t.hover&&$o(e,"hover")}const wb=(e,t,n)=>(r,s,i,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let p=a?r:iN(r,s,c);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)};function KN(e,t={},n,r){const s=ze.useMemo(()=>new zN(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),ze.useEffect(s.effect.bind(s)),ze.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function WN(e,t){return DN(NN),KN({drag:e},t||{},"drag")}const Wy=E.createContext({});function Hy(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const qy=typeof window<"u",BS=qy?E.useLayoutEffect:E.useEffect,If=E.createContext(null);function Gy(e,t){e.indexOf(t)===-1&&e.push(t)}function Qy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ws=(e,t,n)=>n>t?t:n<e?e:n;let Yy=()=>{};const bs={},US=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function zS(e){return typeof e=="object"&&e!==null}const VS=e=>/^0[^.\s]+$/u.test(e);function Jy(e){let t;return()=>(t===void 0&&(t=e()),t)}const lr=e=>e,HN=(e,t)=>n=>t(e(n)),Fu=(...e)=>e.reduce(HN),mu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Zy{constructor(){this.subscriptions=[]}add(t){return Gy(this.subscriptions,t),()=>Qy(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qr=e=>e*1e3,or=e=>e/1e3;function KS(e,t){return t?e*(1e3/t):0}const WS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,qN=1e-7,GN=12;function QN(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=WS(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>qN&&++a<GN);return o}function Bu(e,t,n,r){if(e===t&&n===r)return lr;const s=i=>QN(i,0,1,e,n);return i=>i===0||i===1?i:WS(s(i),t,r)}const HS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qS=e=>t=>1-e(1-t),GS=Bu(.33,1.53,.69,.99),Xy=qS(GS),QS=HS(Xy),YS=e=>(e*=2)<1?.5*Xy(e):.5*(2-Math.pow(2,-10*(e-1))),ev=e=>1-Math.sin(Math.acos(e)),JS=qS(ev),ZS=HS(ev),YN=Bu(.42,0,1,1),JN=Bu(0,0,.58,1),XS=Bu(.42,0,.58,1),ZN=e=>Array.isArray(e)&&typeof e[0]!="number",eE=e=>Array.isArray(e)&&typeof e[0]=="number",XN={linear:lr,easeIn:YN,easeInOut:XS,easeOut:JN,circIn:ev,circInOut:ZS,circOut:JS,backIn:Xy,backInOut:QS,backOut:GS,anticipate:YS},eL=e=>typeof e=="string",bb=e=>{if(eE(e)){Yy(e.length===4);const[t,n,r,s]=e;return Bu(t,n,r,s)}else if(eL(e))return XN[e];return e},Bc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tL(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,f=!1,p=!1)=>{const _=p&&s?n:r;return f&&o.add(c),_.has(c)||_.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const nL=40;function tE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Bc.reduce((b,C)=>(b[C]=tL(i),b),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:p,render:m,postRender:_}=o,v=()=>{const b=bs.useManualTiming?s.timestamp:performance.now();n=!1,bs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,nL),1)),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),f.process(s),p.process(s),m.process(s),_.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},x=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Bc.reduce((b,C)=>{const R=o[C];return b[C]=(I,j=!1,L=!1)=>(n||x(),R.schedule(I,j,L)),b},{}),cancel:b=>{for(let C=0;C<Bc.length;C++)o[Bc[C]].cancel(b)},state:s,steps:o}}const{schedule:bt,cancel:pi,state:en,steps:lp}=tE(typeof requestAnimationFrame<"u"?requestAnimationFrame:lr,!0);let dd;function rL(){dd=void 0}const Rn={now:()=>(dd===void 0&&Rn.set(en.isProcessing||bs.useManualTiming?en.timestamp:performance.now()),dd),set:e=>{dd=e,queueMicrotask(rL)}},nE=e=>t=>typeof t=="string"&&t.startsWith(e),tv=nE("--"),sL=nE("var(--"),nv=e=>sL(e)?iL.test(e.split("/*")[0].trim()):!1,iL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Va={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},gu={...Va,transform:e=>ws(0,1,e)},Uc={...Va,default:1},Ml=e=>Math.round(e*1e5)/1e5,rv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oL(e){return e==null}const aL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sv=(e,t)=>n=>!!(typeof n=="string"&&aL.test(n)&&n.startsWith(e)||t&&!oL(n)&&Object.prototype.hasOwnProperty.call(n,t)),rE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(rv);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},lL=e=>ws(0,255,e),up={...Va,transform:e=>Math.round(lL(e))},Ki={test:sv("rgb","red"),parse:rE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+up.transform(e)+", "+up.transform(t)+", "+up.transform(n)+", "+Ml(gu.transform(r))+")"};function uL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Jm={test:sv("#"),parse:uL,transform:Ki.transform},Uu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=Uu("deg"),Gr=Uu("%"),qe=Uu("px"),cL=Uu("vh"),dL=Uu("vw"),xb={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Zo={test:sv("hsl","hue"),parse:rE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gr.transform(Ml(t))+", "+Gr.transform(Ml(n))+", "+Ml(gu.transform(r))+")"},Ft={test:e=>Ki.test(e)||Jm.test(e)||Zo.test(e),parse:e=>Ki.test(e)?Ki.parse(e):Zo.test(e)?Zo.parse(e):Jm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ki.transform(e):Zo.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},fL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hL(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(rv))==null?void 0:t.length)||0)+(((n=e.match(fL))==null?void 0:n.length)||0)>0}const sE="number",iE="color",pL="var",mL="var(",_b="${}",gL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(gL,l=>(Ft.test(l)?(r.color.push(i),s.push(iE),n.push(Ft.parse(l))):l.startsWith(mL)?(r.var.push(i),s.push(pL),n.push(l)):(r.number.push(i),s.push(sE),n.push(parseFloat(l))),++i,_b)).split(_b);return{values:n,split:a,indexes:r,types:s}}function oE(e){return yu(e).values}function aE(e){const{split:t,types:n}=yu(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===sE?i+=Ml(s[o]):a===iE?i+=Ft.transform(s[o]):i+=s[o]}return i}}const yL=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function vL(e){const t=oE(e);return aE(e)(t.map(yL))}const mi={test:hL,parse:oE,createTransformer:aE,getAnimatableNone:vL};function cp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function wL({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=cp(l,a,e+1/3),i=cp(l,a,e),o=cp(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Qd(e,t){return n=>n>0?t:e}const kt=(e,t,n)=>e+(t-e)*n,dp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},bL=[Jm,Ki,Zo],xL=e=>bL.find(t=>t.test(e));function kb(e){const t=xL(e);if(!t)return!1;let n=t.parse(e);return t===Zo&&(n=wL(n)),n}const Sb=(e,t)=>{const n=kb(e),r=kb(t);if(!n||!r)return Qd(e,t);const s={...n};return i=>(s.red=dp(n.red,r.red,i),s.green=dp(n.green,r.green,i),s.blue=dp(n.blue,r.blue,i),s.alpha=kt(n.alpha,r.alpha,i),Ki.transform(s))},Zm=new Set(["none","hidden"]);function _L(e,t){return Zm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function kL(e,t){return n=>kt(e,t,n)}function iv(e){return typeof e=="number"?kL:typeof e=="string"?nv(e)?Qd:Ft.test(e)?Sb:CL:Array.isArray(e)?lE:typeof e=="object"?Ft.test(e)?Sb:SL:Qd}function lE(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>iv(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function SL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=iv(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function EL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const CL=(e,t)=>{const n=mi.createTransformer(t),r=yu(e),s=yu(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Zm.has(e)&&!s.values.length||Zm.has(t)&&!r.values.length?_L(e,t):Fu(lE(EL(r,s),s.values),n):Qd(e,t)};function uE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?kt(e,t,n):iv(e)(e,t)}const TL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bt.update(t,n),stop:()=>pi(t),now:()=>en.isProcessing?en.timestamp:Rn.now()}},cE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Yd=2e4;function ov(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Yd;)t+=n,r=e.next(t);return t>=Yd?1/0:t}function PL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(ov(r),Yd);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:or(s)}}const AL=5;function dE(e,t,n){const r=Math.max(t-AL,0);return KS(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fp=.001;function OL({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let s,i,o=1-t;o=ws(At.minDamping,At.maxDamping,o),e=ws(At.minDuration,At.maxDuration,or(e)),o<1?(s=u=>{const c=u*o,f=c*e,p=c-n,m=Xm(u,o),_=Math.exp(-f);return fp-p/m*_},i=u=>{const f=u*o*e,p=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,_=Math.exp(-f),v=Xm(Math.pow(u,2),o);return(-s(u)+fp>0?-1:1)*((p-m)*_)/v}):(s=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-fp+c*f},i=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=jL(s,i,a);if(e=qr(e),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const RL=12;function jL(e,t,n){let r=n;for(let s=1;s<RL;s++)r=r-e(r)/t(r);return r}function Xm(e,t){return e*Math.sqrt(1-t*t)}const IL=["duration","bounce"],DL=["stiffness","damping","mass"];function Eb(e,t){return t.some(n=>e[n]!==void 0)}function NL(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!Eb(e,DL)&&Eb(e,IL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ws(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:At.mass,stiffness:s,damping:i}}else{const n=OL(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function Jd(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:f,velocity:p,isResolvedFromDuration:m}=NL({...n,velocity:-or(n.velocity||0)}),_=p||0,v=u/(2*Math.sqrt(l*c)),x=o-i,g=or(Math.sqrt(l/c)),y=Math.abs(x)<5;r||(r=y?At.restSpeed.granular:At.restSpeed.default),s||(s=y?At.restDelta.granular:At.restDelta.default);let b;if(v<1){const R=Xm(g,v);b=I=>{const j=Math.exp(-v*g*I);return o-j*((_+v*g*x)/R*Math.sin(R*I)+x*Math.cos(R*I))}}else if(v===1)b=R=>o-Math.exp(-g*R)*(x+(_+g*x)*R);else{const R=g*Math.sqrt(v*v-1);b=I=>{const j=Math.exp(-v*g*I),L=Math.min(R*I,300);return o-j*((_+v*g*x)*Math.sinh(L)+R*x*Math.cosh(L))/R}}const C={calculatedDuration:m&&f||null,next:R=>{const I=b(R);if(m)a.done=R>=f;else{let j=R===0?_:0;v<1&&(j=R===0?qr(_):dE(b,R,I));const L=Math.abs(j)<=r,F=Math.abs(o-I)<=s;a.done=L&&F}return a.value=a.done?o:I,a},toString:()=>{const R=Math.min(ov(C),Yd),I=cE(j=>C.next(R*j).value,R,30);return R+"ms "+I},toTransition:()=>{}};return C}Jd.applyToOptions=e=>{const t=PL(e,100,Jd);return e.ease=t.ease,e.duration=qr(t.duration),e.type="keyframes",e};function eg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],p={done:!1,value:f},m=L=>a!==void 0&&L<a||l!==void 0&&L>l,_=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let v=n*t;const x=f+v,g=o===void 0?x:o(x);g!==x&&(v=g-f);const y=L=>-v*Math.exp(-L/r),b=L=>g+y(L),C=L=>{const F=y(L),z=b(L);p.done=Math.abs(F)<=u,p.value=p.done?g:z};let R,I;const j=L=>{m(p.value)&&(R=L,I=Jd({keyframes:[p.value,_(p.value)],velocity:dE(b,L,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:L=>{let F=!1;return!I&&R===void 0&&(F=!0,C(L),j(L)),R!==void 0&&L>=R?I.next(L-R):(!F&&C(L),p)}}}function LL(e,t,n){const r=[],s=n||bs.mix||uE,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||lr:t;a=Fu(l,a)}r.push(a)}return r}function $L(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Yy(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=LL(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const p=mu(e[f],e[f+1],c);return a[f](p)};return n?c=>u(ws(e[0],e[i-1],c)):u}function ML(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=mu(0,t,r);e.push(kt(n,1,s))}}function FL(e){const t=[0];return ML(t,e.length-1),t}function BL(e,t){return e.map(n=>n*t)}function UL(e,t){return e.map(()=>t||XS).splice(0,e.length-1)}function Fl({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=ZN(r)?r.map(bb):bb(r),i={done:!1,value:t[0]},o=BL(n&&n.length===t.length?n:FL(t),e),a=$L(o,t,{ease:Array.isArray(s)?s:UL(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const zL=e=>e!==null;function av(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(zL),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const VL={decay:eg,inertia:eg,tween:Fl,keyframes:Fl,spring:Jd};function fE(e){typeof e.type=="string"&&(e.type=VL[e.type])}class lv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const KL=e=>e/100;class uv extends lv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Rn.now()&&this.tick(Rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;fE(t);const{type:n=Fl,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||Fl;l!==Fl&&typeof a[0]!="number"&&(this.mixKeyframes=Fu(KL,uE(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=ov(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:p,repeatDelay:m,type:_,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,C=r;if(f){const L=Math.min(this.currentTime,s)/a;let F=Math.floor(L),z=L%1;!z&&L>=1&&(z=1),z===1&&F--,F=Math.min(F,f+1),!!(F%2)&&(p==="reverse"?(z=1-z,m&&(z-=m/a)):p==="mirror"&&(C=o)),b=ws(0,1,z)*a}const R=y?{done:!1,value:c[0]}:C.next(b);i&&(R.value=i(R.value));let{done:I}=R;!y&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return j&&_!==eg&&(R.value=av(c,this.options,x,this.speed)),v&&v(R.value),j&&this.finish(),R}then(t,n){return this.finished.then(t,n)}get duration(){return or(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(this.currentTime)}set time(t){var n;t=qr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Rn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=or(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=TL,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function WL(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Wi=e=>e*180/Math.PI,tg=e=>{const t=Wi(Math.atan2(e[1],e[0]));return ng(t)},HL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tg,rotateZ:tg,skewX:e=>Wi(Math.atan(e[1])),skewY:e=>Wi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ng=e=>(e=e%360,e<0&&(e+=360),e),Cb=tg,Tb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Pb=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),qL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Tb,scaleY:Pb,scale:e=>(Tb(e)+Pb(e))/2,rotateX:e=>ng(Wi(Math.atan2(e[6],e[5]))),rotateY:e=>ng(Wi(Math.atan2(-e[2],e[0]))),rotateZ:Cb,rotate:Cb,skewX:e=>Wi(Math.atan(e[4])),skewY:e=>Wi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function rg(e){return e.includes("scale")?1:0}function sg(e,t){if(!e||e==="none")return rg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=qL,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=HL,s=a}if(!s)return rg(t);const i=r[t],o=s[1].split(",").map(QL);return typeof i=="function"?i(o):o[i]}const GL=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return sg(n,t)};function QL(e){return parseFloat(e.trim())}const Ka=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wa=new Set(Ka),Ab=e=>e===Va||e===qe,YL=new Set(["x","y","z"]),JL=Ka.filter(e=>!YL.has(e));function ZL(e){const t=[];return JL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const so={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sg(t,"x"),y:(e,{transform:t})=>sg(t,"y")};so.translateX=so.x;so.translateY=so.y;const io=new Set;let ig=!1,og=!1,ag=!1;function hE(){if(og){const e=Array.from(io).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=ZL(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}og=!1,ig=!1,io.forEach(e=>e.complete(ag)),io.clear()}function pE(){io.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(og=!0)})}function XL(){ag=!0,pE(),hE(),ag=!1}class cv{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(io.add(this),ig||(ig=!0,bt.read(pE),bt.resolveKeyframes(hE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}WL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),io.delete(this)}cancel(){this.state==="scheduled"&&(io.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const e$=e=>e.startsWith("--");function t$(e,t,n){e$(t)?e.style.setProperty(t,n):e.style[t]=n}const n$=Jy(()=>window.ScrollTimeline!==void 0),r$={};function s$(e,t){const n=Jy(e);return()=>r$[t]??n()}const mE=s$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_l=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ob={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_l([0,.65,.55,1]),circOut:_l([.55,0,1,.45]),backIn:_l([.31,.01,.66,-.59]),backOut:_l([.33,1.53,.69,.99])};function gE(e,t){if(e)return typeof e=="function"?mE()?cE(e,t):"ease-out":eE(e)?_l(e):Array.isArray(e)?e.map(n=>gE(n,t)||Ob.easeOut):Ob[e]}function i$(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const f=gE(a,s);Array.isArray(f)&&(c.easing=f);const p={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(c,p)}function yE(e){return typeof e=="function"&&"applyToOptions"in e}function o$({type:e,...t}){return yE(e)&&mE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class a$ extends lv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Yy(typeof t.type!="string");const u=o$(t);this.animation=i$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=av(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):t$(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return or(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&n$()?(this.animation.timeline=t,lr):n(this)}}const vE={anticipate:YS,backInOut:QS,circInOut:ZS};function l$(e){return e in vE}function u$(e){typeof e.ease=="string"&&l$(e.ease)&&(e.ease=vE[e.ease])}const Rb=10;class c$ extends a${constructor(t){u$(t),fE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new uv({...o,autoplay:!1}),l=qr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Rb).value,a.sample(l).value,Rb),a.stop()}}const jb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url("));function d$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function f$(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=jb(s,t),a=jb(i,t);return!o||!a?!1:d$(e)||(n==="spring"||yE(n))&&r}function lg(e){e.duration=0,e.type="keyframes"}const h$=new Set(["opacity","clipPath","filter","transform"]),p$=Jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function m$(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return p$()&&n&&h$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const g$=40;class y$ extends lv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...f}){var _;super(),this.stop=()=>{var v,x;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Rn.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...f},m=(c==null?void 0:c.KeyframeResolver)||cv;this.keyframeResolver=new m(a,(v,x,g)=>this.onKeyframesResolved(v,x,p,!g),l,u,c),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Rn.now(),f$(t,i,o,a)||((bs.instantAnimations||!l)&&(c==null||c(av(t,r,n))),t[0]=t[t.length-1],lg(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>g$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&m$(p)?new c$({...p,element:p.motionValue.owner.current}):new uv(p);m.finished.then(()=>this.notifyFinished()).catch(lr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),XL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const v$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function w$(e){const t=v$.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function wE(e,t,n=1){const[r,s]=w$(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return US(o)?parseFloat(o):o}return nv(s)?wE(s,t,n+1):s}function dv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const bE=new Set(["width","height","top","left","right","bottom",...Ka]),b$={test:e=>e==="auto",parse:e=>e},xE=e=>t=>t.test(e),_E=[Va,qe,Gr,Ls,dL,cL,b$],Ib=e=>_E.find(xE(e));function x$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||VS(e):!0}const _$=new Set(["brightness","contrast","saturate","opacity"]);function k$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(rv)||[];if(!r)return e;const s=n.replace(r,"");let i=_$.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const S$=/\b([a-z-]*)\(.*?\)/gu,ug={...mi,getAnimatableNone:e=>{const t=e.match(S$);return t?t.map(k$).join(" "):e}},Db={...Va,transform:Math.round},E$={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:Uc,scaleX:Uc,scaleY:Uc,scaleZ:Uc,skew:Ls,skewX:Ls,skewY:Ls,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:gu,originX:xb,originY:xb,originZ:qe},fv={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...E$,zIndex:Db,fillOpacity:gu,strokeOpacity:gu,numOctaves:Db},C$={...fv,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:ug,WebkitFilter:ug},kE=e=>C$[e];function SE(e,t){let n=kE(e);return n!==ug&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const T$=new Set(["auto","none","0"]);function P$(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!T$.has(i)&&yu(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=SE(n,s)}class A$ extends cv{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),nv(u))){const c=wE(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!bE.has(r)||t.length!==2)return;const[s,i]=t,o=Ib(s),a=Ib(i);if(o!==a)if(Ab(o)&&Ab(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else so[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||x$(t[s]))&&r.push(s);r.length&&P$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=so[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=so[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function O$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const EE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function CE(e){return zS(e)&&"offsetHeight"in e}const Nb=30,R$=e=>!isNaN(parseFloat(e));class j${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Rn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=R$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Zy);const r=this.events[t].add(n);return t==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Nb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Nb);return KS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(e,t){return new j$(e,t)}const{schedule:hv}=tE(queueMicrotask,!1),wr={x:!1,y:!1};function TE(){return wr.x||wr.y}function I$(e){return e==="x"||e==="y"?wr[e]?null:(wr[e]=!0,()=>{wr[e]=!1}):wr.x||wr.y?null:(wr.x=wr.y=!0,()=>{wr.x=wr.y=!1})}function PE(e,t){const n=O$(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Lb(e){return!(e.pointerType==="touch"||TE())}function D$(e,t,n={}){const[r,s,i]=PE(e,n),o=a=>{if(!Lb(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=f=>{Lb(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const AE=(e,t)=>t?e===t?!0:AE(e,t.parentElement):!1,pv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,N$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L$(e){return N$.has(e.tagName)||e.tabIndex!==-1}const fd=new WeakSet;function $b(e){return t=>{t.key==="Enter"&&e(t)}}function hp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const $$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=$b(()=>{if(fd.has(n))return;hp(n,"down");const s=$b(()=>{hp(n,"up")}),i=()=>hp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Mb(e){return pv(e)&&!TE()}function M$(e,t,n={}){const[r,s,i]=PE(e,n),o=a=>{const l=a.currentTarget;if(!Mb(a))return;fd.add(l);const u=t(l,a),c=(m,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),fd.has(l)&&fd.delete(l),Mb(m)&&typeof u=="function"&&u(m,{success:_})},f=m=>{c(m,l===window||l===document||n.useGlobalTarget||AE(l,m.target))},p=m=>{c(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),CE(a)&&(a.addEventListener("focus",u=>$$(u,s)),!L$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function OE(e){return zS(e)&&"ownerSVGElement"in e}function F$(e){return OE(e)&&e.tagName==="svg"}const pn=e=>!!(e&&e.getVelocity),B$=[..._E,Ft,mi],U$=e=>B$.find(xE(e)),mv=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Fb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function z$(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Fb(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Fb(e[s],null)}}}}function V$(...e){return E.useCallback(z$(...e),e)}class K$ extends E.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=CE(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W$({children:e,isPresent:t,anchorX:n,root:r}){const s=E.useId(),i=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=E.useContext(mv),l=V$(i,e==null?void 0:e.ref);return E.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:p,right:m}=o.current;if(t||!i.current||!u||!c)return;const _=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const x=r??document.head;return x.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{x.contains(v)&&x.removeChild(v)}},[t]),k.jsx(K$,{isPresent:t,childRef:i,sizeRef:o,children:E.cloneElement(e,{ref:l})})}const H$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=Hy(q$),c=E.useId();let f=!0,p=E.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const _ of u.values())if(!_)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return i&&f&&(p={...p}),E.useMemo(()=>{u.forEach((m,_)=>u.set(_,!1))},[n]),E.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=k.jsx(W$,{isPresent:n,anchorX:a,root:l,children:e})),k.jsx(If.Provider,{value:p,children:e})};function q$(){return new Map}function RE(e=!0){const t=E.useContext(If);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=E.useId();E.useEffect(()=>{if(e)return s(i)},[e]);const o=E.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const zc=e=>e.key||"";function Bb(e){const t=[];return E.Children.forEach(e,n=>{E.isValidElement(n)&&t.push(n)}),t}const G$=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=RE(o),f=E.useMemo(()=>Bb(e),[e]),p=o&&!u?[]:f.map(zc),m=E.useRef(!0),_=E.useRef(f),v=Hy(()=>new Map),[x,g]=E.useState(f),[y,b]=E.useState(f);BS(()=>{m.current=!1,_.current=f;for(let I=0;I<y.length;I++){const j=zc(y[I]);p.includes(j)?v.delete(j):v.get(j)!==!0&&v.set(j,!1)}},[y,p.length,p.join("-")]);const C=[];if(f!==x){let I=[...f];for(let j=0;j<y.length;j++){const L=y[j],F=zc(L);p.includes(F)||(I.splice(j,0,L),C.push(L))}return i==="wait"&&C.length&&(I=C),b(Bb(I)),g(f),null}const{forceRender:R}=E.useContext(Wy);return k.jsx(k.Fragment,{children:y.map(I=>{const j=zc(I),L=o&&!u?!1:f===y||p.includes(j),F=()=>{if(v.has(j))v.set(j,!0);else return;let z=!0;v.forEach(me=>{me||(z=!1)}),z&&(R==null||R(),b(_.current),o&&(c==null||c()),r&&r())};return k.jsx(H$,{isPresent:L,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:L?void 0:F,anchorX:a,children:I},j)})})},jE=E.createContext({strict:!1}),Ub={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ia={};for(const e in Ub)Ia[e]={isEnabled:t=>Ub[e].some(n=>!!t[n])};function Q$(e){for(const t in e)Ia[t]={...Ia[t],...e[t]}}const Y$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y$.has(e)}let IE=e=>!Zd(e);function J$(e){typeof e=="function"&&(IE=t=>t.startsWith("on")?!Zd(t):e(t))}try{J$(require("@emotion/is-prop-valid").default)}catch{}function Z$(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(IE(s)||n===!0&&Zd(s)||!t&&!Zd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Df=E.createContext({});function Nf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function vu(e){return typeof e=="string"||Array.isArray(e)}const gv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yv=["initial",...gv];function Lf(e){return Nf(e.animate)||yv.some(t=>vu(e[t]))}function DE(e){return!!(Lf(e)||e.variants)}function X$(e,t){if(Lf(e)){const{initial:n,animate:r}=e;return{initial:n===!1||vu(n)?n:void 0,animate:vu(r)?r:void 0}}return e.inherit!==!1?t:{}}function e3(e){const{initial:t,animate:n}=X$(e,E.useContext(Df));return E.useMemo(()=>({initial:t,animate:n}),[zb(t),zb(n)])}function zb(e){return Array.isArray(e)?e.join(" "):e}const wu={};function t3(e){for(const t in e)wu[t]=e[t],tv(t)&&(wu[t].isCSSVariable=!0)}function NE(e,{layout:t,layoutId:n}){return Wa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!wu[e]||e==="opacity")}const n3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r3=Ka.length;function s3(e,t,n){let r="",s=!0;for(let i=0;i<r3;i++){const o=Ka[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=EE(a,fv[o]);if(!l){s=!1;const c=n3[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function vv(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Wa.has(l)){o=!0;continue}else if(tv(l)){s[l]=u;continue}else{const c=EE(u,fv[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=s3(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const wv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LE(e,t,n){for(const r in t)!pn(t[r])&&!NE(r,n)&&(e[r]=t[r])}function i3({transformTemplate:e},t){return E.useMemo(()=>{const n=wv();return vv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function o3(e,t){const n=e.style||{},r={};return LE(r,n,e),Object.assign(r,i3(e,t)),r}function a3(e,t){const n={},r=o3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const l3={offset:"stroke-dashoffset",array:"stroke-dasharray"},u3={offset:"strokeDashoffset",array:"strokeDasharray"};function c3(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?l3:u3;e[i.offset]=qe.transform(-r);const o=qe.transform(t),a=qe.transform(n);e[i.array]=`${o} ${a}`}function $E(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(vv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&c3(f,s,i,o,!1)}const ME=()=>({...wv(),attrs:{}}),FE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function d3(e,t,n,r){const s=E.useMemo(()=>{const i=ME();return $E(i,t,FE(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};LE(i,e.style,e),s.style={...i,...s.style}}return s}const f3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bv(e){return typeof e!="string"||e.includes("-")?!1:!!(f3.indexOf(e)>-1||/[A-Z]/u.test(e))}function h3(e,t,n,{latestValues:r},s,i=!1){const a=(bv(e)?d3:a3)(t,r,s,e),l=Z$(t,typeof e=="string",i),u=e!==E.Fragment?{...l,...a,ref:n}:{},{children:c}=t,f=E.useMemo(()=>pn(c)?c.get():c,[c]);return E.createElement(e,{...u,children:f})}function Vb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function xv(e,t,n,r){if(typeof t=="function"){const[s,i]=Vb(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Vb(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function hd(e){return pn(e)?e.get():e}function p3({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:m3(n,r,s,e),renderState:t()}}function m3(e,t,n,r){const s={},i=r(e,{});for(const p in i)s[p]=hd(i[p]);let{initial:o,animate:a}=e;const l=Lf(e),u=DE(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!Nf(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const _=xv(e,p[m]);if(_){const{transitionEnd:v,transition:x,...g}=_;for(const y in g){let b=g[y];if(Array.isArray(b)){const C=c?b.length-1:0;b=b[C]}b!==null&&(s[y]=b)}for(const y in v)s[y]=v[y]}}}return s}const BE=e=>(t,n)=>{const r=E.useContext(Df),s=E.useContext(If),i=()=>p3(e,t,r,s);return n?i():Hy(i)};function _v(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(pn(r[o])||t.style&&pn(t.style[o])||NE(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const g3=BE({scrapeMotionValuesFromProps:_v,createRenderState:wv});function UE(e,t,n){const r=_v(e,t,n);for(const s in e)if(pn(e[s])||pn(t[s])){const i=Ka.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const y3=BE({scrapeMotionValuesFromProps:UE,createRenderState:ME}),v3=Symbol.for("motionComponentSymbol");function Xo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function w3(e,t,n){return E.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xo(n)&&(n.current=r))},[t])}const kv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b3="framerAppearId",zE="data-"+kv(b3),VE=E.createContext({});function x3(e,t,n,r,s){var v,x;const{visualElement:i}=E.useContext(Df),o=E.useContext(jE),a=E.useContext(If),l=E.useContext(mv).reducedMotion,u=E.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=E.useContext(VE);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&_3(u.current,n,s,f);const p=E.useRef(!1);E.useInsertionEffect(()=>{c&&p.current&&c.update(n,a)});const m=n[zE],_=E.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,m)));return BS(()=>{c&&(p.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),_.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(!_.current&&c.animationState&&c.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),_.current=!1),c.enteringChildren=void 0)}),c}function _3(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:KE(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Xo(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function KE(e){if(e)return e.options.allowProjection!==!1?e.projection:KE(e.parent)}function pp(e,{forwardMotionProps:t=!1}={},n,r){n&&Q$(n);const s=bv(e)?y3:g3;function i(a,l){let u;const c={...E.useContext(mv),...a,layoutId:k3(a)},{isStatic:f}=c,p=e3(a),m=s(a,f);if(!f&&qy){S3();const _=E3(c);u=_.MeasureLayout,p.visualElement=x3(e,m,c,r,_.ProjectionNode)}return k.jsxs(Df.Provider,{value:p,children:[u&&p.visualElement?k.jsx(u,{visualElement:p.visualElement,...c}):null,h3(e,a,w3(m,p.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=E.forwardRef(i);return o[v3]=e,o}function k3({layoutId:e}){const t=E.useContext(Wy).id;return t&&e!==void 0?t+"-"+e:e}function S3(e,t){E.useContext(jE).strict}function E3(e){const{drag:t,layout:n}=Ia;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function C3(e,t){if(typeof Proxy>"u")return pp;const n=new Map,r=(i,o)=>pp(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,pp(o,void 0,e,t)),n.get(o))})}function WE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function T3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function P3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mp(e){return e===void 0||e===1}function cg({scale:e,scaleX:t,scaleY:n}){return!mp(e)||!mp(t)||!mp(n)}function Di(e){return cg(e)||HE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function HE(e){return Kb(e.x)||Kb(e.y)}function Kb(e){return e&&e!=="0%"}function Xd(e,t,n){const r=e-n,s=t*r;return n+s}function Wb(e,t,n,r,s){return s!==void 0&&(e=Xd(e,s,r)),Xd(e,n,r)+t}function dg(e,t=0,n=1,r,s){e.min=Wb(e.min,t,n,r,s),e.max=Wb(e.max,t,n,r,s)}function qE(e,{x:t,y:n}){dg(e.x,t.translate,t.scale,t.originPoint),dg(e.y,n.translate,n.scale,n.originPoint)}const Hb=.999999999999,qb=1.0000000000001;function A3(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ta(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,qE(e,o)),r&&Di(i.latestValues)&&ta(e,i.latestValues))}t.x<qb&&t.x>Hb&&(t.x=1),t.y<qb&&t.y>Hb&&(t.y=1)}function ea(e,t){e.min=e.min+t,e.max=e.max+t}function Gb(e,t,n,r,s=.5){const i=kt(e.min,e.max,s);dg(e,t,n,i,r)}function ta(e,t){Gb(e.x,t.x,t.scaleX,t.scale,t.originX),Gb(e.y,t.y,t.scaleY,t.scale,t.originY)}function GE(e,t){return WE(P3(e.getBoundingClientRect(),t))}function O3(e,t,n){const r=GE(e,n),{scroll:s}=t;return s&&(ea(r.x,s.offset.x),ea(r.y,s.offset.y)),r}const Qb=()=>({translate:0,scale:1,origin:0,originPoint:0}),na=()=>({x:Qb(),y:Qb()}),Yb=()=>({min:0,max:0}),Dt=()=>({x:Yb(),y:Yb()}),fg={current:null},QE={current:!1};function R3(){if(QE.current=!0,!!qy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fg.current=e.matches;e.addEventListener("change",t),t()}else fg.current=!1}const j3=new WeakMap;function I3(e,t,n){for(const r in t){const s=t[r],i=n[r];if(pn(s))e.addValue(r,s);else if(pn(i))e.addValue(r,ja(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,ja(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Jb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Rn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,bt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Lf(n),this.isVariantNode=DE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&pn(m)&&m.set(l[p])}}mount(t){var n;this.current=t,j3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),QE.current||R3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Wa.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ia){const n=Ia[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Jb.length;r++){const s=Jb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=I3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ja(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(US(r)||VS(r))?r=parseFloat(r):!U$(r)&&mi.test(n)&&(r=SE(t,n)),this.setBaseTarget(t,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=xv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!pn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Zy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){hv.render(this.render)}}class YE extends D3{constructor(){super(...arguments),this.KeyframeResolver=A$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function JE(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function N3(e){return window.getComputedStyle(e)}class L3 extends YE{constructor(){super(...arguments),this.type="html",this.renderInstance=JE}readValueFromInstance(t,n){var r;if(Wa.has(n))return(r=this.projection)!=null&&r.isProjecting?rg(n):GL(t,n);{const s=N3(t),i=(tv(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return GE(t,n)}build(t,n,r){vv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return _v(t,n,r)}}const ZE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $3(e,t,n,r){JE(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(ZE.has(s)?s:kv(s),t.attrs[s])}class M3 extends YE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Wa.has(n)){const r=kE(n);return r&&r.default||0}return n=ZE.has(n)?n:kv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return UE(t,n,r)}build(t,n,r){$E(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){$3(t,n,r,s)}mount(t){this.isSVGTag=FE(t.tagName),super.mount(t)}}const F3=(e,t)=>bv(e)?new M3(t):new L3(t,{allowProjection:e!==E.Fragment});function ca(e,t,n){const r=e.getProps();return xv(r,t,n!==void 0?n:r.custom,e)}const hg=e=>Array.isArray(e);function B3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ja(n))}function U3(e){return hg(e)?e[e.length-1]||0:e}function z3(e,t){const n=ca(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=U3(i[o]);B3(e,o,a)}}function V3(e){return!!(pn(e)&&e.add)}function pg(e,t){const n=e.getValue("willChange");if(V3(n))return n.add(t);if(!n&&bs.WillChange){const r=new bs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function XE(e){return e.props[zE]}const K3=e=>e!==null;function W3(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(K3),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const H3={type:"spring",stiffness:500,damping:25,restSpeed:10},q3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),G3={type:"keyframes",duration:.8},Q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y3=(e,{keyframes:t})=>t.length>2?G3:Wa.has(e)?e.startsWith("scale")?q3(t[1]):H3:Q3;function J3({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Sv=(e,t,n,r={},s,i)=>o=>{const a=dv(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-qr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};J3(a)||Object.assign(c,Y3(e,c)),c.duration&&(c.duration=qr(c.duration)),c.repeatDelay&&(c.repeatDelay=qr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(lg(c),c.delay===0&&(f=!0)),(bs.instantAnimations||bs.skipAnimations)&&(f=!0,lg(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const p=W3(c.keyframes,a);if(p!==void 0){bt.update(()=>{c.onUpdate(p),c.onComplete()});return}}return a.isSync?new uv(c):new y$(c)};function Z3({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function eC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const f=e.getValue(c,e.latestValues[c]??null),p=a[c];if(p===void 0||u&&Z3(u,c))continue;const m={delay:n,...dv(i||{},c)},_=f.get();if(_!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===_&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=XE(e);if(g){const y=window.MotionHandoffAnimation(g,c,bt);y!==null&&(m.startTime=y,v=!0)}}pg(e,c),f.start(Sv(c,f,p,e.shouldReduceMotion&&bE.has(c)?{type:!1}:m,e,v));const x=f.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{bt.update(()=>{o&&z3(e,o)})}),l}function tC(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function mg(e,t,n={}){var l;const r=ca(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(eC(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:p}=s;return X3(e,t,u,c,f,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function X3(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(mg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+tC(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function eM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>mg(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=mg(e,t,n);else{const s=typeof t=="function"?ca(e,t,n.custom):t;r=Promise.all(eC(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function nC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const tM=yv.length;function rC(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?rC(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<tM;n++){const r=yv[n],s=e.props[r];(vu(s)||s===!1)&&(t[r]=s)}return t}const nM=[...gv].reverse(),rM=gv.length;function sM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eM(e,n,r)))}function iM(e){let t=sM(e),n=Zb(),r=!0;const s=l=>(u,c)=>{var p;const f=ca(e,c,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:_,...v}=f;u={...u,...v,..._}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=rC(e.parent)||{},f=[],p=new Set;let m={},_=1/0;for(let x=0;x<rM;x++){const g=nM[x],y=n[g],b=u[g]!==void 0?u[g]:c[g],C=vu(b),R=g===l?y.isActive:null;R===!1&&(_=x);let I=b===c[g]&&b!==u[g]&&C;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),y.protectedKeys={...m},!y.isActive&&R===null||!b&&!y.prevProp||Nf(b)||typeof b=="boolean")continue;const j=oM(y.prevProp,b);let L=j||g===l&&y.isActive&&!I&&C||x>_&&C,F=!1;const z=Array.isArray(b)?b:[b];let me=z.reduce(s(g),{});R===!1&&(me={});const{prevResolvedValues:$={}}=y,re={...$,...me},A=le=>{L=!0,p.has(le)&&(F=!0,p.delete(le)),y.needsAnimating[le]=!0;const ce=e.getValue(le);ce&&(ce.liveStyle=!1)};for(const le in re){const ce=me[le],se=$[le];if(m.hasOwnProperty(le))continue;let ye=!1;hg(ce)&&hg(se)?ye=!nC(ce,se):ye=ce!==se,ye?ce!=null?A(le):p.add(le):ce!==void 0&&p.has(le)?A(le):y.protectedKeys[le]=!0}y.prevProp=b,y.prevResolvedValues=me,y.isActive&&(m={...m,...me}),r&&e.blockInitialAnimation&&(L=!1);const G=I&&j;L&&(!G||F)&&f.push(...z.map(le=>{const ce={type:g};if(typeof le=="string"&&r&&!G&&e.manuallyAnimateOnMount&&e.parent){const{parent:se}=e,ye=ca(se,le);if(se.enteringChildren&&ye){const{delayChildren:J}=ye.transition||{};ce.delay=tC(se.enteringChildren,e,J)}}return{animation:le,options:ce}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const g=ca(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(x.transition=g.transition)}p.forEach(g=>{const y=e.getBaseTarget(g),b=e.getValue(g);b&&(b.liveStyle=!0),x[g]=y??null}),f.push({animation:x})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function a(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const p in n)n[p].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Zb(),r=!0}}}function oM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!nC(t,e):!1}function Oi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zb(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class bi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aM extends bi{constructor(t){super(t),t.animationState||(t.animationState=iM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Nf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lM=0;class uM extends bi{constructor(){super(...arguments),this.id=lM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const cM={animation:{Feature:aM},exit:{Feature:uM}};function bu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function zu(e){return{point:{x:e.pageX,y:e.pageY}}}const dM=e=>t=>pv(t)&&e(t,zu(t));function Bl(e,t,n,r){return bu(e,t,dM(n),r)}const sC=1e-4,fM=1-sC,hM=1+sC,iC=.01,pM=0-iC,mM=0+iC;function bn(e){return e.max-e.min}function gM(e,t,n){return Math.abs(e-t)<=n}function Xb(e,t,n,r=.5){e.origin=r,e.originPoint=kt(t.min,t.max,e.origin),e.scale=bn(n)/bn(t),e.translate=kt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fM&&e.scale<=hM||isNaN(e.scale))&&(e.scale=1),(e.translate>=pM&&e.translate<=mM||isNaN(e.translate))&&(e.translate=0)}function Ul(e,t,n,r){Xb(e.x,t.x,n.x,r?r.originX:void 0),Xb(e.y,t.y,n.y,r?r.originY:void 0)}function ex(e,t,n){e.min=n.min+t.min,e.max=e.min+bn(t)}function yM(e,t,n){ex(e.x,t.x,n.x),ex(e.y,t.y,n.y)}function tx(e,t,n){e.min=t.min-n.min,e.max=e.min+bn(t)}function zl(e,t,n){tx(e.x,t.x,n.x),tx(e.y,t.y,n.y)}function Zn(e){return[e("x"),e("y")]}const oC=({current:e})=>e?e.ownerDocument.defaultView:null,nx=(e,t)=>Math.abs(e-t);function vM(e,t){const n=nx(e.x,t.x),r=nx(e.y,t.y);return Math.sqrt(n**2+r**2)}class aC{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=yp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,_=vM(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!_)return;const{point:v}=p,{timestamp:x}=en;this.history.push({...v,timestamp:x});const{onStart:g,onMove:y}=this.handlers;m||(g&&g(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=gp(m,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:_,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=yp(p.type==="pointercancel"?this.lastMoveEventInfo:gp(m,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,g),v&&v(p,g)},!pv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=zu(t),l=gp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=en;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(t,yp(l,this.history)),this.removeListeners=Fu(Bl(this.contextWindow,"pointermove",this.handlePointerMove),Bl(this.contextWindow,"pointerup",this.handlePointerUp),Bl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function gp(e,t){return t?{point:t(e.point)}:e}function rx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yp({point:e},t){return{point:e,delta:rx(e,lC(t)),offset:rx(e,wM(t)),velocity:bM(t,.1)}}function wM(e){return e[0]}function lC(e){return e[e.length-1]}function bM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=lC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>qr(t)));)n--;if(!r)return{x:0,y:0};const i=or(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?kt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?kt(n,e,r.max):Math.min(e,n)),e}function sx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _M(e,{top:t,left:n,bottom:r,right:s}){return{x:sx(e.x,n,s),y:sx(e.y,t,r)}}function ix(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function kM(e,t){return{x:ix(e.x,t.x),y:ix(e.y,t.y)}}function SM(e,t){let n=.5;const r=bn(e),s=bn(t);return s>r?n=mu(t.min,t.max-r,e.min):r>s&&(n=mu(e.min,e.max-s,t.min)),ws(0,1,n)}function EM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const gg=.35;function CM(e=gg){return e===!1?e=0:e===!0&&(e=gg),{x:ox(e,"left","right"),y:ox(e,"top","bottom")}}function ox(e,t,n){return{min:ax(e,t),max:ax(e,n)}}function ax(e,t){return typeof e=="number"?e:e[t]||0}const TM=new WeakMap;class PM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zu(f).point)},o=(f,p)=>{const{drag:m,dragPropagation:_,onDragStart:v}=this.getProps();if(m&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=I$(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Gr.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[g];C&&(y=bn(C)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&bt.postRender(()=>v(f,p)),pg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:v,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(_&&this.currentDirection===null){this.currentDirection=AM(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),x&&x(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Zn(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new aC(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:oC(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&bt.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Vc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=xM(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Xo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=_M(r.layoutBox,t):this.constraints=!1,this.elastic=CM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=EM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xo(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=O3(r,s.root,this.visualElement.getTransformPagePoint());let o=kM(s.layout.layoutBox,i);if(n){const a=n(T3(o));this.hasMutatedConstraints=!!a,a&&(o=WE(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Zn(c=>{if(!Vc(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,_={type:"inertia",velocity:r?t[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(c,_)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return pg(this.visualElement,t),r.start(Sv(t,r,0,n,this.visualElement,!1))}stopAnimation(){Zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Zn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Zn(n=>{const{drag:r}=this.getProps();if(!Vc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=SM({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(o=>{if(!Vc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(kt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;TM.set(this.visualElement,this);const t=this.visualElement.current,n=Bl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bt.read(r);const o=bu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zn(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=gg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Vc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function AM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class OM extends bi{constructor(t){super(t),this.removeGroupControls=lr,this.removeListeners=lr,this.controls=new PM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const lx=e=>(t,n)=>{e&&bt.postRender(()=>e(t,n))};class RM extends bi{constructor(){super(...arguments),this.removePointerDownListener=lr}onPointerDown(t){this.session=new aC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lx(t),onStart:lx(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&bt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ux(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const fl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(qe.test(e))e=parseFloat(e);else return e;const n=ux(e,t.target.x),r=ux(e,t.target.y);return`${n}% ${r}%`}},jM={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mi.parse(e);if(s.length>5)return r;const i=mi.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=kt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let vp=!1;class IM extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;t3(DM),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),vp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),pd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,vp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||bt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;vp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function uC(e){const[t,n]=RE(),r=E.useContext(Wy);return k.jsx(IM,{...e,layoutGroup:r,switchLayoutGroup:E.useContext(VE),isPresent:t,safeToRemove:n})}const DM={borderRadius:{...fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fl,borderTopRightRadius:fl,borderBottomLeftRadius:fl,borderBottomRightRadius:fl,boxShadow:jM};function NM(e,t,n){const r=pn(e)?e:ja(e);return r.start(Sv("",r,t,n)),r.animation}const LM=(e,t)=>e.depth-t.depth;class $M{constructor(){this.children=[],this.isDirty=!1}add(t){Gy(this.children,t),this.isDirty=!0}remove(t){Qy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LM),this.isDirty=!1,this.children.forEach(t)}}function MM(e,t){const n=Rn.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(pi(r),e(i-t))};return bt.setup(r,!0),()=>pi(r)}const cC=["TopLeft","TopRight","BottomLeft","BottomRight"],FM=cC.length,cx=e=>typeof e=="string"?parseFloat(e):e,dx=e=>typeof e=="number"||qe.test(e);function BM(e,t,n,r,s,i){s?(e.opacity=kt(0,n.opacity??1,UM(r)),e.opacityExit=kt(t.opacity??1,0,zM(r))):i&&(e.opacity=kt(t.opacity??1,n.opacity??1,r));for(let o=0;o<FM;o++){const a=`border${cC[o]}Radius`;let l=fx(t,a),u=fx(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||dx(l)===dx(u)?(e[a]=Math.max(kt(cx(l),cx(u),r),0),(Gr.test(u)||Gr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=kt(t.rotate||0,n.rotate||0,r))}function fx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const UM=dC(0,.5,JS),zM=dC(.5,.95,lr);function dC(e,t,n){return r=>r<e?0:r>t?1:n(mu(e,t,r))}function hx(e,t){e.min=t.min,e.max=t.max}function Yn(e,t){hx(e.x,t.x),hx(e.y,t.y)}function px(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function mx(e,t,n,r,s){return e-=t,e=Xd(e,1/n,r),s!==void 0&&(e=Xd(e,1/s,r)),e}function VM(e,t=0,n=1,r=.5,s,i=e,o=e){if(Gr.test(t)&&(t=parseFloat(t),t=kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=kt(i.min,i.max,r);e===i&&(a-=t),e.min=mx(e.min,t,n,a,s),e.max=mx(e.max,t,n,a,s)}function gx(e,t,[n,r,s],i,o){VM(e,t[n],t[r],t[s],t.scale,i,o)}const KM=["x","scaleX","originX"],WM=["y","scaleY","originY"];function yx(e,t,n,r){gx(e.x,t,KM,n?n.x:void 0,r?r.x:void 0),gx(e.y,t,WM,n?n.y:void 0,r?r.y:void 0)}function vx(e){return e.translate===0&&e.scale===1}function fC(e){return vx(e.x)&&vx(e.y)}function wx(e,t){return e.min===t.min&&e.max===t.max}function HM(e,t){return wx(e.x,t.x)&&wx(e.y,t.y)}function bx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function hC(e,t){return bx(e.x,t.x)&&bx(e.y,t.y)}function xx(e){return bn(e.x)/bn(e.y)}function _x(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class qM{constructor(){this.members=[]}add(t){Gy(this.members,t),t.scheduleRender()}remove(t){if(Qy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GM(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:p,skewX:m,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const wp=["","X","Y","Z"],QM=1e3;let YM=0;function bp(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function pC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=XE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&pC(r)}function mC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=YM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XM),this.nodes.forEach(rF),this.nodes.forEach(sF),this.nodes.forEach(eF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $M)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Zy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=OE(o)&&!F$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,f=0;const p=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,c&&c(),c=MM(p,250),pd.hasAnimatedSinceResize&&(pd.hasAnimatedSinceResize=!1,this.nodes.forEach(Ex)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||uF,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=u.getProps(),g=!this.targetLayout||!hC(this.targetLayout,m),y=!f&&p;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...dv(_,"layout"),onPlay:v,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,y)}else f||Ex(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Sx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nF),this.nodes.forEach(JM),this.nodes.forEach(ZM)):this.nodes.forEach(Sx),this.clearAllSnapshots();const a=Rn.now();en.delta=ws(0,1e3/60,a-en.timestamp),en.timestamp=a,en.isProcessing=!0,lp.update.process(en),lp.preRender.process(en),lp.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tF),this.sharedNodes.forEach(oF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!fC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Di(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),cF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Dt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(dF))){const{scroll:c}=this.root;c&&(ea(a.x,c.offset.x),ea(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Dt();if(Yn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:p}=c;c!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Yn(a,o),ea(a.x,f.offset.x),ea(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Dt();Yn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ta(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Di(c.latestValues)&&ta(l,c.latestValues)}return Di(this.latestValues)&&ta(l,this.latestValues),l}removeTransform(o){const a=Dt();Yn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Di(u.latestValues))continue;cg(u.latestValues)&&u.updateSnapshot();const c=Dt(),f=u.measurePageBox();Yn(c,f),yx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Di(this.latestValues)&&yx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),zl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),qE(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),zl(this.relativeTargetOrigin,this.target,m.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||cg(this.parent.latestValues)||HE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===en.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Yn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;A3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(px(this.prevProjectionDelta.x,this.projectionDelta.x),px(this.prevProjectionDelta.y,this.projectionDelta.y)),Ul(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!_x(this.projectionDelta.x,this.prevProjectionDelta.x)||!_x(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=na(),this.projectionDelta=na(),this.projectionDeltaWithTransform=na()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Dt(),m=l?l.source:void 0,_=this.layout?this.layout.source:void 0,v=m!==_,x=this.getStack(),g=!x||x.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(lF));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const R=C/1e3;Cx(f.x,o.x,R),Cx(f.y,o.y,R),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aF(this.relativeTarget,this.relativeTargetOrigin,p,R),b&&HM(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Dt()),Yn(b,this.relativeTarget)),v&&(this.animationValues=c,BM(c,u,this.latestValues,R,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{pd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ja(0)),this.currentAnimation=NM(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&gC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dt();const f=bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Yn(a,l),ta(a,c),Ul(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qM),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&bp("z",o,u,this.animationValues);for(let c=0;c<wp.length;c++)bp(`rotate${wp[c]}`,o,u,this.animationValues),bp(`skew${wp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=hd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=hd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Di(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=GM(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const _ in wu){if(c[_]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:g}=wu[_],y=f==="none"?c[_]:v(c[_],u);if(x){const b=x.length;for(let C=0;C<b;C++)o[x[C]]=y}else g?this.options.visualElement.renderState.vars[_]=y:o[_]=y}this.options.layoutId&&(o.pointerEvents=u===this?hd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(kx),this.root.sharedNodes.clear()}}}function JM(e){e.updateLayout()}function ZM(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=bn(p);p.min=r[f].min,p.max=p.min+m}):gC(i,t.layoutBox,r)&&Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=bn(r[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=na();Ul(a,r,t.layoutBox);const l=na();o?Ul(l,e.applyTransform(s,!0),t.measuredBox):Ul(l,r,t.layoutBox);const u=!fC(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const _=Dt();zl(_,t.layoutBox,p.layoutBox);const v=Dt();zl(v,r,m.layoutBox),hC(_,v)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=_,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function XM(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tF(e){e.clearSnapshot()}function kx(e){e.clearMeasurements()}function Sx(e){e.isLayoutDirty=!1}function nF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ex(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rF(e){e.resolveTargetDelta()}function sF(e){e.calcProjection()}function iF(e){e.resetSkewAndRotation()}function oF(e){e.removeLeadSnapshot()}function Cx(e,t,n){e.translate=kt(t.translate,0,n),e.scale=kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Tx(e,t,n,r){e.min=kt(t.min,n.min,r),e.max=kt(t.max,n.max,r)}function aF(e,t,n,r){Tx(e.x,t.x,n.x,r),Tx(e.y,t.y,n.y,r)}function lF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uF={duration:.45,ease:[.4,0,.1,1]},Px=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ax=Px("applewebkit/")&&!Px("chrome/")?Math.round:lr;function Ox(e){e.min=Ax(e.min),e.max=Ax(e.max)}function cF(e){Ox(e.x),Ox(e.y)}function gC(e,t,n){return e==="position"||e==="preserve-aspect"&&!gM(xx(t),xx(n),.2)}function dF(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const fF=mC({attachResizeListener:(e,t)=>bu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xp={current:void 0},yC=mC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xp.current){const e=new fF({});e.mount(window),e.setOptions({layoutScroll:!0}),xp.current=e}return xp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),hF={pan:{Feature:RM},drag:{Feature:OM,ProjectionNode:yC,MeasureLayout:uC}};function Rx(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&bt.postRender(()=>i(t,zu(t)))}class pF extends bi{mount(){const{current:t}=this.node;t&&(this.unmount=D$(t,(n,r)=>(Rx(this.node,r,"Start"),s=>Rx(this.node,s,"End"))))}unmount(){}}class mF extends bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fu(bu(this.node.current,"focus",()=>this.onFocus()),bu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jx(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&bt.postRender(()=>i(t,zu(t)))}class gF extends bi{mount(){const{current:t}=this.node;t&&(this.unmount=M$(t,(n,r)=>(jx(this.node,r,"Start"),(s,{success:i})=>jx(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yg=new WeakMap,_p=new WeakMap,yF=e=>{const t=yg.get(e.target);t&&t(e)},vF=e=>{e.forEach(yF)};function wF({root:e,...t}){const n=e||document;_p.has(n)||_p.set(n,{});const r=_p.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(vF,{root:e,...t})),r[s]}function bF(e,t,n){const r=wF(t);return yg.set(e,n),r.observe(e),()=>{yg.delete(e),r.unobserve(e)}}const xF={some:0,all:1};class _F extends bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:xF[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),p=u?c:f;p&&p(l)};return bF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(kF(t,n))&&this.startObserver()}unmount(){}}function kF({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SF={inView:{Feature:_F},tap:{Feature:gF},focus:{Feature:mF},hover:{Feature:pF}},EF={layout:{ProjectionNode:yC,MeasureLayout:uC}},CF={...cM,...SF,...hF,...EF},TF=C3(CF,F3);let PF={data:""},AF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||PF},OF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,RF=/\/\*[^]*?\*\/|  +/g,Ix=/\n+/g,zs=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?zs(o,i):i+"{"+zs(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=zs(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zs.p?zs.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},es={},vC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+vC(e[n]);return t}return e},jF=(e,t,n,r,s)=>{let i=vC(e),o=es[i]||(es[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!es[o]){let l=i!==e?e:(u=>{let c,f,p=[{}];for(;c=OF.exec(u.replace(RF,""));)c[4]?p.shift():c[3]?(f=c[3].replace(Ix," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][c[1]]=c[2].replace(Ix," ").trim();return p[0]})(e);es[o]=zs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&es.g?es.g:null;return n&&(es.g=es[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(es[o],t,r,a),o},IF=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zs(a,""):a===!1?"":a}return r+s+(o??"")},"");function $f(e){let t=this||{},n=e.call?e(t.p):e;return jF(n.unshift?n.raw?IF(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,AF(t.target),t.g,t.o,t.k)}let wC,vg,wg;$f.bind({g:1});let xs=$f.bind({k:1});function DF(e,t,n,r){zs.p=t,wC=e,vg=n,wg=r}function xi(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:vg&&vg()},a),n.o=/ *go\d+/.test(l),a.className=$f.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),wg&&u[0]&&wg(a),wC(u,a)}return s}}var NF=e=>typeof e=="function",ef=(e,t)=>NF(e)?e(t):e,LF=(()=>{let e=0;return()=>(++e).toString()})(),bC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),$F=20,Ev="default",xC=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return xC(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},md=[],_C={toasts:[],pausedAt:void 0,settings:{toastLimit:$F}},Kr={},kC=(e,t=Ev)=>{Kr[t]=xC(Kr[t]||_C,e),md.forEach(([n,r])=>{n===t&&r(Kr[t])})},SC=e=>Object.keys(Kr).forEach(t=>kC(e,t)),MF=e=>Object.keys(Kr).find(t=>Kr[t].toasts.some(n=>n.id===e)),Mf=(e=Ev)=>t=>{kC(t,e)},FF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},BF=(e={},t=Ev)=>{let[n,r]=E.useState(Kr[t]||_C),s=E.useRef(Kr[t]);E.useEffect(()=>(s.current!==Kr[t]&&r(Kr[t]),md.push([t,r]),()=>{let o=md.findIndex(([a])=>a===t);o>-1&&md.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||FF[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},UF=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||LF()}),Vu=e=>(t,n)=>{let r=UF(t,e,n);return Mf(r.toasterId||MF(r.id))({type:2,toast:r}),r.id},Kt=(e,t)=>Vu("blank")(e,t);Kt.error=Vu("error");Kt.success=Vu("success");Kt.loading=Vu("loading");Kt.custom=Vu("custom");Kt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Mf(t)(n):SC(n)};Kt.dismissAll=e=>Kt.dismiss(void 0,e);Kt.remove=(e,t)=>{let n={type:4,toastId:e};t?Mf(t)(n):SC(n)};Kt.removeAll=e=>Kt.remove(void 0,e);Kt.promise=(e,t,n)=>{let r=Kt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?ef(t.success,s):void 0;return i?Kt.success(i,{id:r,...n,...n==null?void 0:n.success}):Kt.dismiss(r),s}).catch(s=>{let i=t.error?ef(t.error,s):void 0;i?Kt.error(i,{id:r,...n,...n==null?void 0:n.error}):Kt.dismiss(r)}),e};var zF=1e3,VF=(e,t="default")=>{let{toasts:n,pausedAt:r}=BF(e,t),s=E.useRef(new Map).current,i=E.useCallback((f,p=zF)=>{if(s.has(f))return;let m=setTimeout(()=>{s.delete(f),o({type:4,toastId:f})},p);s.set(f,m)},[]);E.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let _=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(_<0){m.visible&&Kt.dismiss(m.id);return}return setTimeout(()=>Kt.dismiss(m.id,t),_)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let o=E.useCallback(Mf(t),[t]),a=E.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=E.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),u=E.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=E.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:_=8,defaultPosition:v}=p||{},x=n.filter(b=>(b.position||v)===(f.position||v)&&b.height),g=x.findIndex(b=>b.id===f.id),y=x.filter((b,C)=>C<g&&b.visible).length;return x.filter(b=>b.visible).slice(...m?[y+1]:[0,y]).reduce((b,C)=>b+(C.height||0)+_,0)},[n]);return E.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=s.get(f.id);p&&(clearTimeout(p),s.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},KF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,WF=xs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HF=xs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qF=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${KF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${WF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${HF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,GF=xs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,QF=xi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${GF} 1s linear infinite;
`,YF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,JF=xs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ZF=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${JF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,XF=xi("div")`
  position: absolute;
`,e5=xi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,t5=xs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,n5=xi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${t5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,r5=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?E.createElement(n5,null,t):t:n==="blank"?null:E.createElement(e5,null,E.createElement(QF,{...r}),n!=="loading"&&E.createElement(XF,null,n==="error"?E.createElement(qF,{...r}):E.createElement(ZF,{...r})))},s5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,i5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,o5="0%{opacity:0;} 100%{opacity:1;}",a5="0%{opacity:1;} 100%{opacity:0;}",l5=xi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,u5=xi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,c5=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=bC()?[o5,a5]:[s5(n),i5(n)];return{animation:t?`${xs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xs(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},d5=E.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?c5(e.position||t||"top-center",e.visible):{opacity:0},i=E.createElement(r5,{toast:e}),o=E.createElement(u5,{...e.ariaProps},ef(e.message,e));return E.createElement(l5,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):E.createElement(E.Fragment,null,i,o))});DF(E.createElement);var f5=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=E.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return E.createElement("div",{ref:i,className:t,style:n},s)},h5=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:bC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},p5=$f`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Kc=16,m5=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=VF(n,i);return E.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Kc,left:Kc,right:Kc,bottom:Kc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let f=c.position||t,p=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),m=h5(f,p);return E.createElement(f5,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?p5:"",style:m},c.type==="custom"?ef(c.message,c):s?s(c):E.createElement(d5,{toast:c,position:f}))}))},ts=Kt;const EC=[{code:"original",name:"Original Script"},{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"itrans",name:"ITRANS"},{code:"iast",name:"IAST"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"}];function g5(){const{preferredLanguage:e,setPreferredLanguage:t}=bo(),[n,r]=E.useState(e);E.useEffect(()=>{localStorage.setItem("preferredLanguage",n),t(n)},[n,t]);const s=i=>{r(i.target.value)};return k.jsxs("div",{children:[k.jsx("h2",{children:"Language Preferences"}),k.jsx("p",{children:"Choose the language for transliteration:"}),k.jsx("select",{value:n,onChange:s,children:EC.map(i=>k.jsx("option",{value:i.code,children:i.name},i.code))})]})}const y5=0,v5={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},hl={marginRight:"10px"},pl={opacity:.5,cursor:"not-allowed",color:"#888"},w5=async function(e){try{return await Ut.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},b5=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters for fetching song details.");const o=await aD(n,i);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await SS({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,f]=a;await yS({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:f,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${i}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function x5(){var Xe,Rt,qn;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=ju(),s=dr(),i=fr(),{session:o}=wo(),a=(Xe=o==null?void 0:o.user)==null?void 0:Xe.email,l=(Rt=s.state)==null?void 0:Rt.filteredSongIndices,u=(qn=s.state)==null?void 0:qn.index,c=Af(),f=E.useMemo(()=>decodeURIComponent(r||""),[r]),p=["songDetails",t,n,a,f],{preferredLanguage:m,setPreferredLanguage:_}=bo(),v=E.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),x=E.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),g=E.useCallback(async(De,Ve)=>{if(!De||!De.bookId||!De.songTitle){Ve(!1);return}const et=await Rf(De.bookId,De.songTitle);Ve(et)},[]),[y,b]=E.useState(!1),[C,R]=E.useState(!1);E.useEffect(()=>(window.handleInternalNavigation=(De,Ve,et,sn)=>{const Ht=`/details/book/${De}/${Ve}/${et}/${encodeURIComponent(sn)}`;i(Ht,{state:{filteredSongIndices:l||[],index:y5},replace:!1}),console.log(`Internal navigation triggered: ${Ht}`)},()=>{delete window.handleInternalNavigation}),[i,l,u]),E.useEffect(()=>{g(v,b),g(x,R)},[v,x,g]);const{isLoading:I,isFetching:j,error:L,data:F}=Of({queryKey:p,queryFn:b5,staleTime:1/0,gcTime:0,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1});WN(({swipe:[De]})=>{De===1?(console.log("going to prev"),pe()):De===-1&&(console.log("going to next"),Re())},{axis:"x",filterTaps:!0});const[z,me]=E.useState(!1),[$,re]=E.useState({x:0,y:0}),[A,G]=E.useState(!1),be=E.useRef(null),[le,ce]=E.useState(""),[se,ye]=E.useState(null),J=E.useRef(null),Z=De=>{De.preventDefault();const Ve=window.getSelection(),et=(Ve==null?void 0:Ve.toString().trim())??"";Ve&&Ve.rangeCount>0&&!Ve.getRangeAt(0).collapsed?(ce(et),ye(Ve.getRangeAt(0)),G(!0)):(ce(""),ye(null),G(!1)),re({x:De.clientX,y:De.clientY}),G(!!le),me(!0)};E.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),E.useEffect(()=>{const De=Ve=>{be.current&&!be.current.contains(Ve.target)&&me(!1)};return z?window.addEventListener("mousedown",De):window.removeEventListener("mousedown",De),()=>{window.removeEventListener("mousedown",De)}},[z]),E.useEffect(()=>{s.state||window.location.pathname.startsWith("/sankeertan")},[s,t]),E.useEffect(()=>{const De=Ve=>{be.current&&!be.current.contains(Ve.target)&&me(!1)};return z&&document.addEventListener("mousedown",De),()=>{document.removeEventListener("mousedown",De)}},[z]);const K=()=>{const De=window.location.href;navigator.clipboard.writeText(De).then(()=>{console.log("URL copied to clipboard:",De),ts.success("URL copied to clipboard!")}).catch(Ve=>{console.error("Failed to copy URL: ",Ve)})},de=E.useRef(null);function oe(De){const sn=new DOMParser().parseFromString(De,"text/html").querySelectorAll("tr");let Ht="";return sn.forEach(Le=>{const pr=Le.querySelectorAll("td, th"),Gn=[];pr.forEach(Es=>{var mr;let Pe=Es.innerHTML;Pe=Pe.replace(/<\/p>\s*<p>/gi,`
`),Pe=Pe.replace(/<p>|<\/p>/gi,""),Pe=Pe.replace(/<br\s*\/?>/gi,`
`);const Jr=document.createElement("div");Jr.innerHTML=Pe;const jr=((mr=Jr.textContent)==null?void 0:mr.trim())||"";Gn.push(jr)}),Ht+=Gn.join(" | ")+`

`}),Ht.trim()}const _e=()=>{if(!se||se.collapsed){console.warn("No valid selection range to highlight.");return}const De=document.createElement("span");De.className="highlighted-text";try{se.surroundContents(De),console.log("Text highlighted successfully!")}catch(Ve){console.error("Failed to highlight text:",Ve)}ye(null)},$e=(De=!1)=>{if(de.current){const Ve=de.current.innerHTML;let et="radhekrishna!!";De?et=Ve:Ve.includes("<table")?et=oe(Ve):et=de.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(et).then(()=>{console.log("Song content copied to clipboard:"),ts.success("Song content copied to clipboard!")}).catch(sn=>{console.error("Failed to copy song: ",sn)})}},Re=()=>{if(l&&u!==void 0&&u<l.length-1){const De=u+1,Ve=l[De];sessionStorage.setItem("lastClickedSongIndex",De.toString()),i(`/details/book/${e}/${t}/${Ve.sourceRow}/${encodeURIComponent(Ve.songTitle)}`,{state:{filteredSongIndices:l,index:De},replace:!0})}},pe=()=>{if(l&&u!==void 0&&u>0){const De=u-1,Ve=l[De];sessionStorage.setItem("lastClickedSongIndex",De.toString()),i(`/details/book/${e}/${t}/${Ve.sourceRow}/${encodeURIComponent(Ve.songTitle)}`,{state:{filteredSongIndices:l,index:De},replace:!0})}},Ze=u===0,Ye=u===(l==null?void 0:l.length)-1,We=l&&l.length>0,Tt=async De=>{if(le){const Ve=await fetch(`${yo}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${le}&sessionuser=${De}`);if(!Ve.ok){const sn=await Ve.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${Ve.status} - ${JSON.stringify(sn)}`)}const et=await Ve.json();ts.success(`Issue/Mistake is reported as ${et[1]}!!`)}else console.log("No text was selected.")},P=async()=>{t&&r?(await lD(t,f),ts.success("Local cache cleared. Reloading from server..."),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:p})):console.warn("Cannot reload song: bookId or songTitle is missing.")},ge=async De=>{switch(me(!1),De){case"broadcast":r&&ke();break;case"copyPageUrl":K();break;case"CopySongAsHtml":$e(!0);break;case"CopySongAsText":$e(!1);break;case"ReportMistake":Tt(a);break;case"Copy":if(le)try{await navigator.clipboard.writeText(le),ts.success("Text copied!")}catch(Ve){console.error("Failed to copy text: ",Ve),ts.error("Failed to copy text.")}break;case"Highlight":_e();break}},fe=E.useMemo(()=>k.jsx(TF.div,{ref:be,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:$.y,left:$.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:De=>De.stopPropagation(),children:k.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:A?k.jsxs(k.Fragment,{children:[k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>ge("Copy"),children:"Copy Selected"}),k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>ge("ReportMistake"),children:"Report Mistake"})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[k.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),EC.map(De=>k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:De.code===m?"bold":"normal",backgroundColor:De.code===m?"#f0f0f0":"transparent"},onClick:()=>Ne(De),children:De.name},De.code))]})})})},"context-menu"),[A,$,m]),[M,N]=E.useState(!1),[ee,ve]=E.useState(null),[we,ae]=E.useState(!0),ke=E.useCallback(async()=>{if(M){console.warn("isBroadcasting already");return}if(!we){ts.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(de.current){N(!0),ve("broadcasting");try{const De=de.current.innerHTML,Ve=await w5(De);N(!1),ve("success"),ts.success("Broadcast was successful!"),ae(!1),setTimeout(()=>ve(null),2e3)}catch(De){console.error("Broadcast failed:",De),ts.error("Broadcast had errors!"),N(!1),ve("error"),setTimeout(()=>ve(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),ve("failed"),N(!1)},[de,M,we]);E.useEffect(()=>{ae(!0)},[F]),E.useEffect(()=>{F&&F.length>=3&&t&&f&&n&&(g(v,b),g(x,R))},[F,t,f,n,v,x,g]);const Ne=De=>{_(De.code),me(!1)},Se={backgroundColor:"green",color:"white"},Ue={backgroundColor:"brown",color:"white"};if(I&&!F)return k.jsx("div",{style:v5,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if(L)return k.jsxs("div",{children:["Error loading song details: ",L.message]});if(!F)return k.jsx("div",{children:"No song details available. Please try reloading."});const rt=document.getElementById("context-menu-root");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:J,children:[k.jsx(Ky,{}),k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[k.jsx("button",{onClick:pe,disabled:Ze||!We,style:{...hl,...Ze||!We?pl:{},...y?Se:Ue},children:" Prev"}),k.jsx("button",{onClick:Re,disabled:Ye||!We,style:{...hl,...Ye||!We?pl:{},...C?Se:Ue,marginRight:0},children:"Next "})]})]}),k.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:Z,children:[k.jsx("div",{ref:de,children:F&&k.jsx(ZD,{data:F[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[0,1,2,3,4],maxWidth:"max-w-6xl",preferredLanguage:m,sourceLanguage:F[2]})}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[k.jsxs("div",{children:[k.jsx("button",{onClick:pe,disabled:Ze||!We,style:{...hl,...Ze||!We?pl:{},...y?Se:Ue},children:" Prev"}),k.jsx("button",{onClick:Re,disabled:Ye||!We,style:{...hl,...Ye||!We?pl:{},...C?Se:Ue,marginRight:0},children:"Next "})]}),k.jsxs("div",{children:[k.jsx("button",{onClick:P,disabled:j,style:{marginRight:"10px",backgroundColor:j?"#ccc":"#f0f0f0",color:j?"#666":"inherit",cursor:j?"not-allowed":"pointer"},title:"Reload from Server (Clears local cache)",children:j?k.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[k.jsxs("svg",{className:"animate-spin",style:{width:"16px",height:"16px",marginRight:"5px"},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),k.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Reloading..."]}):""}),k.jsx("button",{onClick:K,style:{marginRight:"10px"},title:"Copy URL",children:""}),k.jsx("button",{onClick:()=>$e(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),k.jsx("button",{onClick:ke,disabled:!we,style:{...hl,...we?{}:pl},title:"Broadcast",children:""})]})]}),k.jsx("style",{children:`
     .highlighted-text {
      background-color: #ffeb3b; /* Yellow background */
      padding: 2px 4px;
      border-radius: 4px;
     }
     .animate-spin {
      animation: spin 1s linear infinite;
     }
     @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
     }
    `}),z&&rt&&sA.createPortal(k.jsx(G$,{children:fe}),rt)]})]})}const _5=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:s,onConnectionStatusChange:i})=>{const o=E.useRef(n);E.useEffect(()=>{o.current=n},[n]);const a=E.useRef(null);return E.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, Listener skipping subscription setup."),i("DISCONNECTED");return}return a.current&&(Ut.removeChannel(a.current),a.current=null),i("CONNECTING"),a.current=Ut.channel(`broadcast:${e}`),a.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},l=>{l.new&&"content"in l.new&&r(l.new.content),l.new&&"scroll_position"in l.new&&l.new.scroll_position!==null&&o.current&&s(l.new.scroll_position)}).subscribe((l,u)=>{switch(l){case"SUBSCRIBED":i("CONNECTED");break;case"CHANNEL_ERROR":case"TIMED_OUT":case"CLOSED":i(l==="CLOSED"?"DISCONNECTED":"ERROR"),console.error(`Subscription issue for broadcast ${e}:`,u||l);break;case"CONNECTING":i("CONNECTING");break}}),()=>{a.current&&(Ut.removeChannel(a.current),a.current=null)}},[e,t==null?void 0:t.access_token,r,s,i]),null},k5=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}},S5=({broadcastId:e})=>{const[t,n]=E.useState(null),[r,s]=E.useState(null),i=E.useRef(null),[o,a]=E.useState(null),[l,u]=E.useState(!1),[c,f]=E.useState(!0),[p,m]=E.useState(!1),[_,v]=E.useState(null),[x,g]=E.useState("none"),[y,b]=E.useState(!1),[C,R]=E.useState("CONNECTING"),{preferredLanguage:I}=bo(),j=E.useCallback(G=>{R(G),console.log(`Realtime Connection Status Updated: ${G}`)},[]),L=E.useCallback(G=>{const le=pu(G??"","devanagari",I);n(le)},[I]),F=E.useCallback(G=>{l&&G!==null&&s(`trRowAsAnchor-${G}`)},[l]);E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:be}})=>{a(be)});const{data:G}=Ut.auth.onAuthStateChange((be,le)=>{a(le)});return()=>{G.subscription.unsubscribe()}},[]);const z=E.useCallback(async()=>{p||f(!0),v(null);try{const{data:G,error:be}=await Ut.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(be)console.error("Error fetching broadcast data:",be),v(be.message);else if(G){const le=G.content??"";let ce=pu(le,"devanagari",I);n(ce),b(G.is_broadcasting_scroll??!1),m(!0)}}finally{f(!1)}},[e,I,p]);E.useEffect(()=>{o&&e&&!p&&z()},[o,e,z,p]),E.useEffect(()=>{if(r&&i.current){const G=r,be=i.current.querySelector(`#${G}`);be&&be.scrollIntoView({block:"start",behavior:"smooth"}),s(null)}},[r,i]);const me=E.useCallback(async G=>{if(x==="leader"&&y){const{error:be}=await Ut.from("sankeertan").update({scroll_position:G}).eq("id",e);be&&console.error("Error broadcasting scroll position:",be)}},[x,y,e]);E.useEffect(()=>{if(x!=="leader"||!y||!i.current)return;const G=i.current,be=k5(me,200),le=G.querySelectorAll("tr[id^='trRowAsAnchor-']"),ce=new Set;let se=null;const ye=K=>{K.forEach($e=>{$e.isIntersecting?ce.add($e.target):ce.delete($e.target)});let de=null,oe=1/0;const _e=G.getBoundingClientRect().top;if(ce.forEach($e=>{if(typeof $e.id!="string"||$e.id==="")return;const pe=$e.getBoundingClientRect().top-_e;pe>=0&&pe<oe&&(oe=pe,de=$e.id)}),de){const Re=de.split("-").pop();if(Re){const pe=parseInt(Re);de!==se&&(se=de,be(pe))}}},J={root:G,rootMargin:"0px",threshold:.1},Z=new IntersectionObserver(ye,J);return le.forEach(K=>{Z.observe(K)}),()=>{Z.disconnect()}},[x,y,me]);const $=async()=>{const G=!y,{error:be}=await Ut.from("sankeertan").update({is_broadcasting_scroll:G}).eq("id",e);be?console.error("Failed to update broadcast scroll status:",be):b(G)},re=G=>{G==="none"&&(b(!1),u(!1)),g(G),G==="follower"&&u(!0)},A=G=>{switch(G){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[k.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:i,children:[k.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",k.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:A(C),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${C}`}),k.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",C,")"]})]}),c&&!p?k.jsx("p",{children:"Loading content..."}):_?k.jsxs("p",{style:{color:"red"},children:["Error loading data: ",_]}):t&&k.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&x==="follower"&&k.jsx(_5,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:L,onScrollPositionUpdated:F,onConnectionStatusChange:j}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[k.jsx("button",{onClick:()=>re(x==="leader"?"none":"leader"),style:{backgroundColor:x==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x==="leader"?"Disengage (Leader)":"Become a Leader"}),x==="none"&&k.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),x==="leader"&&k.jsx("button",{onClick:$,style:{backgroundColor:y?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:y?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),k.jsx("button",{onClick:()=>re(x==="follower"?"none":"follower"),style:{backgroundColor:x==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})},Wc=Lt(),Dx=(e,t)=>`${e.trim()}|${t.trim()}`;async function E5(){var u,c;console.log("[Dexie Load] Preparing availability check set...");const e=await Wc.songDetails.toCollection().primaryKeys(),t=new Set;for(const[f,p]of e)t.add(Dx(f,p));console.log(`[Dexie Load] Found ${t.size} available SongDetails.`);const n=await Wc.songIndices.toArray();let r=await Wc.categories.toArray();r.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(f=>setTimeout(f,500)),r=await Wc.categories.toArray(),r.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const s=new Map,i=new Map;for(const f of r){const p=(u=f.id)==null?void 0:u.trim();if(p&&i.set(p,f),Array.isArray(f.books))for(const m of f.books){const _=(c=m.bookId)==null?void 0:c.trim();if(_){let v=s.get(_);if(v){const x=Array.isArray(v.categoryId)?v.categoryId:v.categoryId?[v.categoryId]:[];p&&!x.includes(p)&&(v.categoryId=[...x,p])}else v={...m,bookId:_,bookName:m.bookName||"Unknown Book",categoryId:p?[p]:[],author:m.author||f.author,language:m.language||f.language,type:m.type||f.type,raagam:m.raagam||f.raagam,taaLam:m.taaLam||f.taaLam},s.set(_,v)}}}console.log("Book Map Keys (Flattened):",Array.from(s.keys()).length),console.log("Category Map Keys:",Array.from(i.keys()).length);const o=n.map((f,p)=>{var me,$;const m=(me=f.bookId)==null?void 0:me.trim(),_=($=f.songTitle)==null?void 0:$.trim(),v=s.get(m);let x=[],g=[];if(v&&v.categoryId){const re=Array.isArray(v.categoryId)?v.categoryId:[v.categoryId];g=re,x=re.map(A=>{var G;return((G=i.get(A))==null?void 0:G.name)||"Unknown Category"})}else x=["Unknown Category"],g=["unknown-category"];v||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${f.songTitle} | Index Book ID: '${m}'`);let y=!1;if(m&&_){const re=Dx(m,_);y=t.has(re)}const b=(v==null?void 0:v.bookName)||"Unknown Book",C=g.length>0?i.get(g[0]):void 0,R=f.author||(v==null?void 0:v.author)||(C==null?void 0:C.author)||"Unknown Author",I=f.sourceLanguage||(v==null?void 0:v.language)||(C==null?void 0:C.language)||"Unknown Language",j=f.type||(v==null?void 0:v.type)||(C==null?void 0:C.type)||"Unknown Type",L=f.raagam||(v==null?void 0:v.raagam)||(C==null?void 0:C.raagam)||"Unknown Type",F=f.taaLam||(v==null?void 0:v.taaLam)||(C==null?void 0:C.taaLam)||"Unknown Type";return{uniqueSongId:`${f.bookId}-${f.songTitle}`,indexPositionForNavigation:p,isAvailable:y,bookId:f.bookId,categoryId:g,title:f.songTitle,sourceRow:f.sourceRow,tags:f.tags||null,verseCount:f.verseCount||null,category:x,book:b,author:R,language:I,type:j,raagam:L,taaLam:F,link:f.link}}),a=new Map;for(const f of o){const p=`${f.title.toLowerCase().trim()}|${f.author.toLowerCase().trim()}`;if(a.has(p)){const m=a.get(p),_=(v,x)=>{const g=Array.isArray(v)?v:[v],y=Array.isArray(x)?x:[x];return Array.from(new Set([...g,...y]))};m.book=_(m.book,f.book),m.bookId=_(m.bookId,f.bookId),m.category=_(m.category,f.category),m.categoryId=_(m.categoryId,f.categoryId)}else a.set(p,f)}const l=Array.from(a.values());return console.log(`[Dexie Load] Deduplicated ${o.length} raw songs into ${l.length} unique songs.`),l}const C5=["searchIndex","allSongs"],T5=()=>Of({queryKey:C5,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await E5();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,networkMode:"always",refetchOnWindowFocus:!1}),P5=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const s=t[r];if(s&&s.length>0){const i=s.map(o=>o.value.toLowerCase());n=n.filter(o=>{const a=o[r];return(Array.isArray(a)?a.map(u=>String(u).toLowerCase()):[String(a).toLowerCase()]).some(u=>i.includes(u))})}}),n},A5=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>{const s=i=>Array.isArray(i)?i.some(o=>String(o).toLowerCase().includes(n)):String(i).toLowerCase().includes(n);return s(r.title)||s(r.author)||s(r.book)||s(r.category)}):e},ml=(e,t)=>{const n=new Set;return e.forEach(r=>{const s=r[t];Array.isArray(s)?s.forEach(i=>{typeof i=="string"&&n.add(i)}):typeof s=="string"&&n.add(s)}),Array.from(n).sort()},O5=()=>{const[e,t]=E.useState(""),[n,r]=E.useState({}),[s,i]=E.useState([]),[o,a]=E.useState([]),[l,u]=E.useState("cards"),[c,f]=E.useState(!1),p=fr(),m=30,[_,v]=E.useState({category:!0,book:!0,title:!0,author:!0,language:!0,raagam:!0}),{preferredLanguage:x}=bo(),g=(K,de="itrans")=>{const oe=Array.isArray(K)?K.join(", "):K;return pu(oe,de,x)},{data:y,isLoading:b,isError:C,error:R}=T5(),I=E.useMemo(()=>y||[],[y]);E.useEffect(()=>{if(I.length===0){i([]),a([]);return}let K=P5(I,n),de=A5(K,e);i(de),f(!1);const oe=de.map(_e=>({indexPositionForNavigation:_e.indexPositionForNavigation,sourceRow:String(_e.sourceRow),bookId:Array.isArray(_e.bookId)?_e.bookId[0]:_e.bookId,songTitle:Array.isArray(_e.title)?_e.title.join(", "):_e.title}));a(oe)},[I,n,e]);const j=(K,de)=>{r(oe=>{const _e=oe[K]||[],$e=_e.find(Re=>Re.value===de);if($e)if($e.isNot){const Re=_e.filter(pe=>pe.value!==de);if(Re.length===0){const pe={...oe};return delete pe[K],pe}return{...oe,[K]:Re}}else return{...oe,[K]:_e.map(Re=>Re.value===de?{...Re,isNot:!0}:Re)};else return{...oe,[K]:[..._e,{value:de,isNot:!1}]}})},L=()=>{r({})},F=(K,de)=>{if(K.type==="link"&&K.link)try{const pe=JSON.parse(K.link),Ze=pe.bookId,Ye=pe.categoryId;if(Ze&&Ye){p(`/book/${Ye}/${Ze}`);return}}catch(pe){console.error("Failed to parse link data for song:",K.title,pe)}const oe=Array.isArray(K.title)?K.title.join(", "):K.title,_e=Array.isArray(K.categoryId)?K.categoryId[0]:K.categoryId,$e=Array.isArray(K.bookId)?K.bookId[0]:K.bookId,Re=K.sourceRow;p(`/details/book/${_e}/${$e}/${Re}/${encodeURIComponent(oe)}`,{state:{filteredSongIndices:o,index:de}})},z=K=>{v(de=>({...de,[K]:!de[K]}))},me=ml(s,"author"),$=ml(s,"language"),re=ml(s,"raagam"),A=ml(s,"book"),G=ml(s,"category"),be={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set,raagam:new Set};e.length>0&&I.forEach(K=>{Object.entries(K).forEach(([de,oe])=>{var _e;Array.isArray(oe)?oe.forEach($e=>{var Re;typeof $e=="string"&&$e.toLowerCase().includes(e.toLowerCase())&&((Re=be[de])==null||Re.add($e))}):typeof oe=="string"&&oe.toLowerCase().includes(e.toLowerCase())&&((_e=be[de])==null||_e.add(oe))})});const le=(K,de)=>s.filter(oe=>{const _e=oe[K];return Array.isArray(_e)?_e.includes(de):_e===de}).length,ce=(K,de)=>{var _e;const oe=(_e=n[K])==null?void 0:_e.find($e=>$e.value===de);return oe?oe.isNot?"bg-red-500 text-white":"bg-[#3498db] text-white":"hover:bg-gray-100 text-gray-700"};if(b)return k.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500 bg-[#f5f7fa]",children:"Loading search index..."});if(C)return k.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50 m-4 rounded-lg",children:["Error loading search index: ",(R==null?void 0:R.message)||"Unknown error."]});const se=K=>`${Array.isArray(K.bookId)?K.bookId.join("-"):K.bookId}-${K.title}`,ye=K=>Array.isArray(K)?K.join(", "):K,J="bg-white rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.08)] border border-[#eaeaea] transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_8px_25px_rgba(0,0,0,0.15)]";return k.jsx("div",{className:"min-h-screen bg-[#f5f7fa] p-4 font-sans flex flex-col items-center",children:k.jsxs("div",{className:"w-full max-w-[1400px] bg-[#f5f7fa] p-2 md:p-4",children:[k.jsx("div",{className:"text-2xl font-bold text-[#2c3e50] border-b-2 border-[#eaeaea] pb-4 mb-6 flex justify-between items-center",children:k.jsx("span",{children:"Search Songs"})}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-4 rounded-xl bg-white text-lg text-[#2c3e50] placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#3498db] shadow-sm border border-gray-200 transition-all",value:e,onChange:K=>t(K.target.value)}),e&&Object.values(be).some(K=>K.size>0)&&k.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-xl shadow-xl border border-gray-200 max-h-64 overflow-y-auto",children:Object.entries(be).map(([K,de])=>de&&de.size>0&&k.jsxs("div",{className:"p-3 border-b border-gray-100 last:border-0",children:[k.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-2 tracking-wider ml-2",children:K}),Array.from(de).map((oe,_e)=>k.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-[#f0f9ff] hover:text-[#3498db] text-gray-700 transition-colors",onClick:()=>{t(""),j(K,oe)},children:oe},_e))]},K))})]}),Object.keys(n).some(K=>{const de=n[K];return de&&de.length>0})&&k.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[k.jsx("span",{className:"text-sm font-semibold text-gray-500 mr-2",children:"Active Filters:"}),Object.entries(n).map(([K,de])=>de==null?void 0:de.map((oe,_e)=>k.jsxs("span",{className:`${oe.isNot?"bg-red-500":"bg-[#3498db]"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-2 shadow-sm`,children:[k.jsxs("span",{className:"font-medium opacity-90 capitalize",children:[K,":"]}),k.jsx("span",{className:"font-bold",children:oe.value}),k.jsx("button",{onClick:()=>j(K,oe.value),className:"ml-1 hover:text-gray-200 transition-colors font-bold",children:""})]},`${K}-${_e}`))),k.jsx("button",{onClick:L,className:"text-sm text-[#3498db] hover:text-[#2980b9] font-semibold transition-colors ml-auto px-3 py-1",children:"Clear All"})]}),k.jsx("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[{key:"category",label:"Category",data:G},{key:"book",label:"Book",data:A},{key:"author",label:"Author",data:me},{key:"language",label:"Language",data:$},{key:"raagam",label:"Raagam",data:re}].map(({key:K,label:de,data:oe})=>k.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[k.jsxs("button",{onClick:()=>z(K),className:"w-full text-left px-4 py-3 text-sm font-bold text-[#2c3e50] flex justify-between items-center hover:bg-gray-50 transition-colors bg-gray-50/50",children:[de,k.jsx("span",{className:`transform transition-transform duration-300 text-gray-400 ${_[K]?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${_[K]?"max-h-0":"max-h-64 overflow-y-auto custom-scrollbar"}`,children:k.jsx("div",{className:"p-2",children:oe.map(_e=>k.jsxs("button",{onClick:()=>j(K,_e),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors text-sm mb-1 ${ce(K,_e)}`,children:[k.jsx("span",{className:"truncate mr-2",children:_e}),k.jsx("span",{className:"text-xs font-medium bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:le(K,_e)})]},_e))})})]},K))}),k.jsx("div",{className:"mt-4",children:!e.trim()&&!Object.values(n).some(K=>K&&K.length>0)?k.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[k.jsx("div",{className:"text-6xl mb-4 opacity-20",children:""}),k.jsx("p",{className:"text-xl text-gray-400 font-semibold",children:"Ready to Search"}),k.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter a keyword or select a filter to find songs."})]}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsxs("h2",{className:"text-xl font-bold text-[#2c3e50]",children:["Results ",k.jsxs("span",{className:"text-gray-400 text-lg font-normal ml-2",children:["(",s.length,")"]})]}),k.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:[k.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="cards"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Cards"}),k.jsx("button",{onClick:()=>u("grid"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="grid"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"List"})]})]}),s.length===0?k.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[k.jsx("p",{className:"text-gray-400 text-lg",children:"No songs match your search."}),k.jsx("button",{onClick:L,className:"mt-4 text-[#3498db] font-semibold hover:underline",children:"Clear filters"})]}):k.jsx(k.Fragment,{children:!c&&s.length>m?k.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200 shadow-sm",children:[k.jsxs("p",{className:"text-lg text-gray-600 mb-2",children:["Found ",k.jsx("span",{className:"font-bold text-[#2c3e50]",children:s.length})," matches."]}),k.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"Refine your search or view all results."}),k.jsx("button",{onClick:()=>f(!0),className:"px-8 py-3 bg-[#3498db] hover:bg-[#2980b9] text-white rounded-full font-bold shadow-lg shadow-blue-200 transition-transform transform hover:scale-105",children:"Show All Results"})]}):k.jsx(k.Fragment,{children:l==="cards"?k.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map((K,de)=>{const oe=se(K);return k.jsxs("div",{onClick:()=>F(K,de),className:`${J} p-5 cursor-pointer relative overflow-hidden group`,children:[k.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${K.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),k.jsxs("div",{className:"pl-3",children:[k.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-3 leading-tight group-hover:text-[#3498db] transition-colors",children:g(K.title,K.language)}),k.jsxs("div",{className:"space-y-1.5",children:[k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Author"}),k.jsx("span",{className:"text-gray-700 font-medium",children:K.author})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Raagam"}),k.jsx("span",{className:"text-gray-700",children:K.raagam||"-"})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Taalam"}),k.jsx("span",{className:"text-gray-700",children:K.taaLam||"-"})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Book"}),k.jsx("span",{className:"text-gray-600 truncate",title:Array.isArray(K.book)?K.book.join(", "):K.book,children:ye(K.book)})]})]})]})]},oe)})}):k.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-left border-collapse",children:[k.jsx("thead",{children:k.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold",children:[k.jsx("th",{className:"p-4",children:"Title"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Author"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Raagam"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Taalam"}),k.jsx("th",{className:"p-4 hidden lg:table-cell",children:"Book"}),k.jsx("th",{className:"p-4 hidden xl:table-cell",children:"Category"})]})}),k.jsx("tbody",{className:"text-sm text-[#2c3e50]",children:s.map((K,de)=>{const oe=se(K);return k.jsxs("tr",{onClick:()=>F(K,de),className:"border-b border-gray-100 hover:bg-blue-50/50 cursor-pointer transition-colors last:border-0",children:[k.jsxs("td",{className:"p-4 font-bold group",children:[k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:`w-1.5 h-8 rounded-full mr-3 ${K.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),k.jsx("span",{className:"group-hover:text-[#3498db] transition-colors",children:g(K.title,K.language)})]}),k.jsxs("div",{className:"md:hidden mt-1 ml-4 text-xs text-gray-500 space-y-0.5",children:[k.jsx("div",{children:K.author}),k.jsx("div",{children:K.raagam})]})]}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.author}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.raagam||"-"}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.taaLam||"-"}),k.jsx("td",{className:"p-4 hidden lg:table-cell text-gray-600",children:k.jsx("div",{className:"truncate max-w-xs",title:Array.isArray(K.book)?K.book.join(", "):K.book,children:ye(K.book)})}),k.jsx("td",{className:"p-4 hidden xl:table-cell text-gray-600",children:k.jsx("div",{className:"truncate max-w-xs",children:ye(K.category)})})]},oe)})})]})})})})})]})})]})})},R5="thodaya-mangalam",j5=()=>{const[e,t]=E.useState(""),n=async()=>{t("Exporting...");try{const r=await pD(R5);if(!r){t("No data found for this book or download failed.");return}const s=r.songDetails.map(u=>u),i=r.songIndices.map(u=>{const{indexId:c,timestamp:f,...p}=u;return p}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:f,...p}=u;return p}),a={bookId:r.bookId,songIndices:i,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return k.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[k.jsx("div",{style:{marginTop:"20px"},children:k.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&k.jsxs("div",{style:{marginTop:"15px"},children:[k.jsx("h4",{children:"Exported JSON Structure:"}),k.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},I5=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],D5=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:s,isDownloading:i,startBulkDownload:o}=AS(e.bookId,t),a=()=>i?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${s} `:"Ready to Download";return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[k.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:i?"orange":n==="success"?"green":"gray"},children:a()}),k.jsx("button",{onClick:o,disabled:i,style:{padding:"5px 10px",backgroundColor:i?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:i?"Processing":"Bulk Download"})]})]})},N5=()=>{const e="test@example.com";return k.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[k.jsx("h2",{children:"Offline Content Manager"}),k.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),k.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:I5.map(t=>k.jsx(D5,{book:t,userEmail:e},t.bookId))})]})};function Hc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function o(u,c){if(!s[u]){if(!r[u]){var f=typeof Hc=="function"&&Hc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=s[u]={exports:{}};r[u][0].call(m.exports,function(_){var v=r[u][1][_];return o(v||_)},m,m.exports,n,r,s,i)}return s[u].exports}for(var a=typeof Hc=="function"&&Hc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,c,f,p,m,_,v,x=[],g=0,y=l.length,b=y,C=i.getTypeOf(l)!=="string";g<l.length;)b=y-g,f=C?(u=l[g++],c=g<y?l[g++]:0,g<y?l[g++]:0):(u=l.charCodeAt(g++),c=g<y?l.charCodeAt(g++):0,g<y?l.charCodeAt(g++):0),p=u>>2,m=(3&u)<<4|c>>4,_=1<b?(15&c)<<2|f>>6:64,v=2<b?63&f:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(_)+a.charAt(v));return x.join("")},s.decode=function(l){var u,c,f,p,m,_,v=0,x=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&b--,l.charAt(l.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|b):new Array(0|b);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(p=a.indexOf(l.charAt(v++)))>>4,c=(15&p)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(_=a.indexOf(l.charAt(v++))),y[x++]=u,m!==64&&(y[x++]=c),_!==64&&(y[x++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,f,p,m,_){this.compressedSize=c,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=_}u.prototype={getContentWorker:function(){var c=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,p){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,c,f,p){var m=o,_=p+f;u^=-1;for(var v=p;v<_;v++)u=u>>>8^m[255&(u^c[v])];return-1^u}(0|l,a,a.length,0):function(u,c,f,p){var m=o,_=p+f;u^=-1;for(var v=p;v<_;v++)u=u>>>8^m[255&(u^c.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function c(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new c("Deflate",f)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(m,_){var v,x="";for(v=0;v<_;v++)x+=String.fromCharCode(255&m),m>>>=8;return x}function o(m,_,v,x,g,y){var b,C,R=m.file,I=m.compression,j=y!==u.utf8encode,L=a.transformTo("string",y(R.name)),F=a.transformTo("string",u.utf8encode(R.name)),z=R.comment,me=a.transformTo("string",y(z)),$=a.transformTo("string",u.utf8encode(z)),re=F.length!==R.name.length,A=$.length!==z.length,G="",be="",le="",ce=R.dir,se=R.date,ye={crc32:0,compressedSize:0,uncompressedSize:0};_&&!v||(ye.crc32=m.crc32,ye.compressedSize=m.compressedSize,ye.uncompressedSize=m.uncompressedSize);var J=0;_&&(J|=8),j||!re&&!A||(J|=2048);var Z=0,K=0;ce&&(Z|=16),g==="UNIX"?(K=798,Z|=function(oe,_e){var $e=oe;return oe||($e=_e?16893:33204),(65535&$e)<<16}(R.unixPermissions,ce)):(K=20,Z|=function(oe){return 63&(oe||0)}(R.dosPermissions)),b=se.getUTCHours(),b<<=6,b|=se.getUTCMinutes(),b<<=5,b|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),re&&(be=i(1,1)+i(c(L),4)+F,G+="up"+i(be.length,2)+be),A&&(le=i(1,1)+i(c(me),4)+$,G+="uc"+i(le.length,2)+le);var de="";return de+=`
\0`,de+=i(J,2),de+=I.magic,de+=i(b,2),de+=i(C,2),de+=i(ye.crc32,4),de+=i(ye.compressedSize,4),de+=i(ye.uncompressedSize,4),de+=i(L.length,2),de+=i(G.length,2),{fileRecord:f.LOCAL_FILE_HEADER+de+L+G,dirRecord:f.CENTRAL_FILE_HEADER+i(K,2)+de+i(me.length,2)+"\0\0\0\0"+i(Z,4)+i(x,4)+L+G+me}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),f=n("../signature");function p(m,_,v,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=v,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var _=m.meta.percent||0,v=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(_+100*(v-x-1))/v:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var v=o(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,v=o(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),_)this.push({data:function(x){return f.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var v=this.bytesWritten-m,x=function(g,y,b,C,R){var I=a.transformTo("string",R(C));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(y,4)+i(b,4)+i(I.length,2)+I}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(v){_.processChunk(v)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(v){_.error(v)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var _=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<_.length;v++)try{_[v].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var _=function(y,b){var C=y||b,R=i[C];if(!R)throw new Error(C+" is not a valid compression method !");return R}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},x=m.dir,g=m.date;m._compressWorker(_,v).withStreamInfo("file",{name:p,dir:x,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(p){return new o.Promise(function(m,_){var v=p.decompressed.getContentWorker().pipe(new u);v.on("error",function(x){_(x)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var _=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(v){var x=new l(m);return x.load(v),x}).then(function(v){var x=[o.Promise.resolve(v)],g=v.files;if(m.checkCRC32)for(var y=0;y<g.length;y++)x.push(f(g[y]));return o.Promise.all(x)}).then(function(v){for(var x=v.shift(),g=x.files,y=0;y<g.length;y++){var b=g[y],C=b.fileNameStr,R=i.resolve(b.fileNameStr);_.file(R,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:m.createFolders}),b.dir||(_.file(R).unsafeOriginalName=C)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,u){i.call(this,l),this._helper=a;var c=this;a.on("data",function(f,p){c.push(f)||c._helper.pause(),u&&u(p)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(R,I,j){var L,F=a.getTypeOf(I),z=a.extend(j||{},c);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(R=g(R)),z.createFolders&&(L=x(R))&&y.call(this,L,!0);var me=F==="string"&&z.binary===!1&&z.base64===!1;j&&j.binary!==void 0||(z.binary=!me),(I instanceof f&&I.uncompressedSize===0||z.dir||!I||I.length===0)&&(z.base64=!1,z.binary=!0,I="",z.compression="STORE",F="string");var $=null;$=I instanceof f||I instanceof l?I:_.isNode&&_.isStream(I)?new v(R,I):a.prepareContent(R,I,z.binary,z.optimizedBinaryString,z.base64);var re=new p(R,$,z);this.files[R]=re}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),x=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var I=R.lastIndexOf("/");return 0<I?R.substring(0,I):""},g=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},y=function(R,I){return I=I!==void 0?I:c.createFolders,R=g(R),this.files[R]||i.call(this,R,null,{dir:!0,createFolders:I}),this.files[R]};function b(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var I,j,L;for(I in this.files)L=this.files[I],(j=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&R(j,L)},filter:function(R){var I=[];return this.forEach(function(j,L){R(j,L)&&I.push(L)}),I},file:function(R,I,j){if(arguments.length!==1)return R=this.root+R,i.call(this,R,I,j),this;if(b(R)){var L=R;return this.filter(function(z,me){return!me.dir&&L.test(z)})}var F=this.files[this.root+R];return F&&!F.dir?F:null},folder:function(R){if(!R)return this;if(b(R))return this.filter(function(F,z){return z.dir&&R.test(F)});var I=this.root+R,j=y.call(this,I),L=this.clone();return L.root=j.name,L},remove:function(R){R=this.root+R;var I=this.files[R];if(I||(R.slice(-1)!=="/"&&(R+="/"),I=this.files[R]),I&&!I.dir)delete this.files[R];else for(var j=this.filter(function(F,z){return z.name.slice(0,R.length)===R}),L=0;L<j.length;L++)delete this.files[j[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var I,j={};try{if((j=a.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");a.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var L=j.comment||this.comment||"";I=m.generateWorker(this,j,L)}catch(F){(I=new l("error")).error(F)}return new u(I,j.type||"string",j.mimeType)},generateAsync:function(R,I){return this.generateInternalStream(R).accumulate(I)},generateNodeStream:function(R,I){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===c&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&c===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new c(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=i.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(_,v){return new c.Promise(function(x,g){var y=[],b=_._internalType,C=_._outputType,R=_._mimeType;_.on("data",function(I,j){y.push(I),v&&v(j)}).on("error",function(I){y=[],g(I)}).on("end",function(){try{var I=function(j,L,F){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",L),F);case"base64":return l.encode(L);default:return i.transformTo(j,L)}}(C,function(j,L){var F,z=0,me=null,$=0;for(F=0;F<L.length;F++)$+=L[F].length;switch(j){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(me=new Uint8Array($),F=0;F<L.length;F++)me.set(L[F],z),z+=L[F].length;return me;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+j+"'")}}(b,y),R);x(I)}catch(j){g(j)}y=[]}).resume()})}function m(_,v,x){var g=v;switch(v){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=v,this._mimeType=x,i.checkSupport(g),this._worker=_.pipe(new o(g)),_.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(_){return p(this,_)},on:function(_,v){var x=this;return _==="data"?this._worker.on(_,function(g){v.call(x,g.data,g.meta)}):this._worker.on(_,function(){i.delay(v,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}s.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(_){var v,x,g,y,b,C=_.length,R=0;for(y=0;y<C;y++)(64512&(x=_.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=_.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),y++),R+=x<128?1:x<2048?2:x<65536?3:4;for(v=o.uint8array?new Uint8Array(R):new Array(R),y=b=0;b<R;y++)(64512&(x=_.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=_.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),y++),x<128?v[b++]=x:(x<2048?v[b++]=192|x>>>6:(x<65536?v[b++]=224|x>>>12:(v[b++]=240|x>>>18,v[b++]=128|x>>>12&63),v[b++]=128|x>>>6&63),v[b++]=128|63&x);return v}(m)},s.utf8decode=function(m){return o.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(_){var v,x,g,y,b=_.length,C=new Array(2*b);for(v=x=0;v<b;)if((g=_[v++])<128)C[x++]=g;else if(4<(y=u[g]))C[x++]=65533,v+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&v<b;)g=g<<6|63&_[v++],y--;1<y?C[x++]=65533:g<65536?C[x++]=g:(g-=65536,C[x++]=55296|g>>10&1023,C[x++]=56320|1023&g)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)}(m=i.transformTo(o.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var _=i.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=_;(_=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),_.set(v,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(y,b){var C;for((b=b||y.length)>y.length&&(b=y.length),C=b-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?b:C+u[y[C]]>b?C:b}(_),g=_;x!==_.length&&(o.uint8array?(g=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(g=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:s.utf8decode(g),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:s.utf8encode(m.data),meta:m.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function c(v,x){for(var g=0;g<v.length;++g)x[g]=255&v.charCodeAt(g);return x}n("setimmediate"),s.newBlob=function(v,x){s.checkSupport("blob");try{return new Blob([v],{type:x})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(v),g.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,x,g){var y=[],b=0,C=v.length;if(C<=g)return String.fromCharCode.apply(null,v);for(;b<C;)x==="array"||x==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(b,Math.min(b+g,C)))):y.push(String.fromCharCode.apply(null,v.subarray(b,Math.min(b+g,C)))),b+=g;return y.join("")},stringifyByChar:function(v){for(var x="",g=0;g<v.length;g++)x+=String.fromCharCode(v[g]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var x=65536,g=s.getTypeOf(v),y=!0;if(g==="uint8array"?y=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<x;)try{return f.stringifyByChunk(v,g,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(v)}function m(v,x){for(var g=0;g<v.length;g++)x[g]=v[g];return x}s.applyFromCharCode=p;var _={};_.string={string:u,array:function(v){return c(v,new Array(v.length))},arraybuffer:function(v){return _.string.uint8array(v).buffer},uint8array:function(v){return c(v,new Uint8Array(v.length))},nodebuffer:function(v){return c(v,a.allocBuffer(v.length))}},_.array={string:p,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},_.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},_.uint8array={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},_.nodebuffer={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return _.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},s.transformTo=function(v,x){if(x=x||"",!v)return x;s.checkSupport(v);var g=s.getTypeOf(x);return _[g][v](x)},s.resolve=function(v){for(var x=v.split("/"),g=[],y=0;y<x.length;y++){var b=x[y];b==="."||b===""&&y!==0&&y!==x.length-1||(b===".."?g.pop():g.push(b))}return g.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var x,g,y="";for(g=0;g<(v||"").length;g++)y+="\\x"+((x=v.charCodeAt(g))<16?"0":"")+x.toString(16).toUpperCase();return y},s.delay=function(v,x,g){setImmediate(function(){v.apply(g||null,x||[])})},s.inherits=function(v,x){function g(){}g.prototype=x.prototype,v.prototype=new g},s.extend=function(){var v,x,g={};for(v=0;v<arguments.length;v++)for(x in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],x)&&g[x]===void 0&&(g[x]=arguments[v][x]);return g},s.prepareContent=function(v,x,g,y,b){return l.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(R,I){var j=new FileReader;j.onload=function(L){R(L.target.result)},j.onerror=function(L){I(L.target.error)},j.readAsArrayBuffer(C)}):C}).then(function(C){var R=s.getTypeOf(C);return R?(R==="arraybuffer"?C=s.transformTo("uint8array",C):R==="string"&&(b?C=o.decode(C):g&&y!==!0&&(C=function(I){return c(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var _=this.reader.readString(4)===p;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,_=this.zip64EndOfCentralSize-44;0<_;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=p-m;if(0<_)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),f=n("./support");function p(m,_){this.options=m,this.loadOptions=_}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===x)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,v,x,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)_=m.readInt(2),v=m.readInt(2),x=m.readData(v),this.extraFields[_]={id:_,length:v,value:x};m.setIndex(g)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=i(m.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:u.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=i(m.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:u.utf8decode(_.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(_,v,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=v,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");i.prototype={internalStream:function(_){var v=null,x="string";try{if(!_)throw new Error("No output type specified.");var g=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),v=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(v=v.pipe(new l.Utf8EncodeWorker)),!y&&g&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(b){(v=new c("error")).error(b)}return new o(v,x,"")},async:function(_,v){return this.internalStream(_).accumulate(v)},nodeStream:function(_,v){return this.internalStream(_||"nodebuffer").toNodejsStream(v)},_compressWorker:function(_,v){if(this._data instanceof u&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,_,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,c=new l(_),f=i.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){_(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(_,0)};else{var p=new i.MessageChannel;p.port1.onmessage=_,o=function(){p.port2.postMessage(0)}}var m=[];function _(){var v,x;a=!0;for(var g=m.length;g;){for(x=m,m=[],v=-1;++v<g;)x[v]();g=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&v(this,g)}function p(g,y,b){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function m(g,y,b){i(function(){var C;try{C=y(b)}catch(R){return a.reject(g,R)}C===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,C)})}function _(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function v(g,y){var b=!1;function C(j){b||(b=!0,a.reject(g,j))}function R(j){b||(b=!0,a.resolve(g,j))}var I=x(function(){y(R,C)});I.status==="error"&&C(I.value)}function x(g,y){var b={};try{b.value=g(y),b.status="success"}catch(C){b.status="error",b.value=C}return b}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(b){return y.resolve(g()).then(function(){return b})},function(b){return y.resolve(g()).then(function(){throw b})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,y){if(typeof g!="function"&&this.state===u||typeof y!="function"&&this.state===l)return this;var b=new this.constructor(o);return this.state!==c?m(b,this.state===u?g:y,this.outcome):this.queue.push(new p(b,g,y)),b},p.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},p.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},p.prototype.callRejected=function(g){a.reject(this.promise,g)},p.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,y){var b=x(_,y);if(b.status==="error")return a.reject(g,b.value);var C=b.value;if(C)v(g,C);else{g.state=u,g.outcome=y;for(var R=-1,I=g.queue.length;++R<I;)g.queue[R].callFulfilled(y)}return g},a.reject=function(g,y){g.state=l,g.outcome=y;for(var b=-1,C=g.queue.length;++b<C;)g.queue[b].callRejected(y);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var y=new this(o);return a.reject(y,g)},f.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,C=!1;if(!b)return this.resolve([]);for(var R=new Array(b),I=0,j=-1,L=new this(o);++j<b;)F(g[j],j);return L;function F(z,me){y.resolve(z).then(function($){R[me]=$,++I!==b||C||(C=!0,a.resolve(L,R))},function($){C||(C=!0,a.reject(L,$))})}},f.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,C=!1;if(!b)return this.resolve([]);for(var R=-1,I=new this(o);++R<b;)j=g[R],y.resolve(j).then(function(L){C||(C=!0,a.resolve(I,L))},function(L){C||(C=!0,a.reject(I,L))});var j;return I}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,f=0,p=-1,m=0,_=8;function v(g){if(!(this instanceof v))return new v(g);this.options=o.assign({level:p,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(b!==f)throw new Error(l[b]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(b=i.deflateSetDictionary(this.strm,C))!==f)throw new Error(l[b]);this._dict_set=!0}}function x(g,y){var b=new v(y);if(b.push(g,!0),b.err)throw b.msg||l[b.err];return b.result}v.prototype.push=function(g,y){var b,C,R=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof g=="string"?R.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?R.input=new Uint8Array(g):R.input=g,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(I),R.next_out=0,R.avail_out=I),(b=i.deflate(R,C))!==1&&b!==f)return this.onEnd(b),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(R.output,R.next_out))):this.onData(o.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&b!==1);return C===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f):C!==2||(this.onEnd(f),!(R.avail_out=0))},v.prototype.onData=function(g){this.chunks.push(g)},v.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=v,s.deflate=x,s.deflateRaw=function(g,y){return(y=y||{}).raw=!0,x(g,y)},s.gzip=function(g,y){return(y=y||{}).gzip=!0,x(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||v&&v.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,x.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function _(v,x){var g=new m(x);if(g.push(v,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(v,x){var g,y,b,C,R,I,j=this.strm,L=this.options.chunkSize,F=this.options.dictionary,z=!1;if(this.ended)return!1;y=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?j.input=a.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?j.input=new Uint8Array(v):j.input=v,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(L),j.next_out=0,j.avail_out=L),(g=i.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(I=typeof F=="string"?a.string2buf(F):p.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,g=i.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&z===!0&&(g=l.Z_OK,z=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&g!==l.Z_STREAM_END&&(j.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(j.output,j.next_out),C=j.next_out-b,R=a.buf2string(j.output,b),j.next_out=C,j.avail_out=L-C,C&&o.arraySet(j.output,j.output,b,C,0),this.onData(R)):this.onData(o.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(z=!0)}while((0<j.avail_in||j.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=m,s.inflate=_,s.inflateRaw=function(v,x){return(x=x||{}).raw=!0,_(v,x)},s.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,f,p){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),p);else for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){var u,c,f,p,m,_;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(_=new Uint8Array(f),u=p=0,c=l.length;u<c;u++)m=l[u],_.set(m,p),p+=m.length;return _}},a={arraySet:function(l,u,c,f,p){for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var m="",_=0;_<p;_++)m+=String.fromCharCode(f[_]);return m}l[254]=l[254]=1,s.string2buf=function(f){var p,m,_,v,x,g=f.length,y=0;for(v=0;v<g;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(_=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),v++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new i.Buf8(y),v=x=0;x<y;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(_=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),v++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},s.buf2binstring=function(f){return c(f,f.length)},s.binstring2buf=function(f){for(var p=new i.Buf8(f.length),m=0,_=p.length;m<_;m++)p[m]=f.charCodeAt(m);return p},s.buf2string=function(f,p){var m,_,v,x,g=p||f.length,y=new Array(2*g);for(m=_=0;m<g;)if((v=f[m++])<128)y[_++]=v;else if(4<(x=l[v]))y[_++]=65533,m+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&m<g;)v=v<<6|63&f[m++],x--;1<x?y[_++]=65533:v<65536?y[_++]=v:(v-=65536,y[_++]=55296|v>>10&1023,y[_++]=56320|1023&v)}return c(y,_)},s.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var u=65535&i|0,c=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=i,f=u+l;o^=-1;for(var p=u;p<f;p++)o=o>>>8^c[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),f=0,p=4,m=0,_=-2,v=-1,x=4,g=2,y=8,b=9,C=286,R=30,I=19,j=2*C+1,L=15,F=3,z=258,me=z+F+1,$=42,re=113,A=1,G=2,be=3,le=4;function ce(P,ge){return P.msg=c[ge],ge}function se(P){return(P<<1)-(4<P?9:0)}function ye(P){for(var ge=P.length;0<=--ge;)P[ge]=0}function J(P){var ge=P.state,fe=ge.pending;fe>P.avail_out&&(fe=P.avail_out),fe!==0&&(o.arraySet(P.output,ge.pending_buf,ge.pending_out,fe,P.next_out),P.next_out+=fe,ge.pending_out+=fe,P.total_out+=fe,P.avail_out-=fe,ge.pending-=fe,ge.pending===0&&(ge.pending_out=0))}function Z(P,ge){a._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,ge),P.block_start=P.strstart,J(P.strm)}function K(P,ge){P.pending_buf[P.pending++]=ge}function de(P,ge){P.pending_buf[P.pending++]=ge>>>8&255,P.pending_buf[P.pending++]=255&ge}function oe(P,ge){var fe,M,N=P.max_chain_length,ee=P.strstart,ve=P.prev_length,we=P.nice_match,ae=P.strstart>P.w_size-me?P.strstart-(P.w_size-me):0,ke=P.window,Ne=P.w_mask,Se=P.prev,Ue=P.strstart+z,rt=ke[ee+ve-1],Xe=ke[ee+ve];P.prev_length>=P.good_match&&(N>>=2),we>P.lookahead&&(we=P.lookahead);do if(ke[(fe=ge)+ve]===Xe&&ke[fe+ve-1]===rt&&ke[fe]===ke[ee]&&ke[++fe]===ke[ee+1]){ee+=2,fe++;do;while(ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ke[++ee]===ke[++fe]&&ee<Ue);if(M=z-(Ue-ee),ee=Ue-z,ve<M){if(P.match_start=ge,we<=(ve=M))break;rt=ke[ee+ve-1],Xe=ke[ee+ve]}}while((ge=Se[ge&Ne])>ae&&--N!=0);return ve<=P.lookahead?ve:P.lookahead}function _e(P){var ge,fe,M,N,ee,ve,we,ae,ke,Ne,Se=P.w_size;do{if(N=P.window_size-P.lookahead-P.strstart,P.strstart>=Se+(Se-me)){for(o.arraySet(P.window,P.window,Se,Se,0),P.match_start-=Se,P.strstart-=Se,P.block_start-=Se,ge=fe=P.hash_size;M=P.head[--ge],P.head[ge]=Se<=M?M-Se:0,--fe;);for(ge=fe=Se;M=P.prev[--ge],P.prev[ge]=Se<=M?M-Se:0,--fe;);N+=Se}if(P.strm.avail_in===0)break;if(ve=P.strm,we=P.window,ae=P.strstart+P.lookahead,ke=N,Ne=void 0,Ne=ve.avail_in,ke<Ne&&(Ne=ke),fe=Ne===0?0:(ve.avail_in-=Ne,o.arraySet(we,ve.input,ve.next_in,Ne,ae),ve.state.wrap===1?ve.adler=l(ve.adler,we,Ne,ae):ve.state.wrap===2&&(ve.adler=u(ve.adler,we,Ne,ae)),ve.next_in+=Ne,ve.total_in+=Ne,Ne),P.lookahead+=fe,P.lookahead+P.insert>=F)for(ee=P.strstart-P.insert,P.ins_h=P.window[ee],P.ins_h=(P.ins_h<<P.hash_shift^P.window[ee+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[ee+F-1])&P.hash_mask,P.prev[ee&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=ee,ee++,P.insert--,!(P.lookahead+P.insert<F)););}while(P.lookahead<me&&P.strm.avail_in!==0)}function $e(P,ge){for(var fe,M;;){if(P.lookahead<me){if(_e(P),P.lookahead<me&&ge===f)return A;if(P.lookahead===0)break}if(fe=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,fe=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),fe!==0&&P.strstart-fe<=P.w_size-me&&(P.match_length=oe(P,fe)),P.match_length>=F)if(M=a._tr_tally(P,P.strstart-P.match_start,P.match_length-F),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=F){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,fe=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else M=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(M&&(Z(P,!1),P.strm.avail_out===0))return A}return P.insert=P.strstart<F-1?P.strstart:F-1,ge===p?(Z(P,!0),P.strm.avail_out===0?be:le):P.last_lit&&(Z(P,!1),P.strm.avail_out===0)?A:G}function Re(P,ge){for(var fe,M,N;;){if(P.lookahead<me){if(_e(P),P.lookahead<me&&ge===f)return A;if(P.lookahead===0)break}if(fe=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,fe=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=F-1,fe!==0&&P.prev_length<P.max_lazy_match&&P.strstart-fe<=P.w_size-me&&(P.match_length=oe(P,fe),P.match_length<=5&&(P.strategy===1||P.match_length===F&&4096<P.strstart-P.match_start)&&(P.match_length=F-1)),P.prev_length>=F&&P.match_length<=P.prev_length){for(N=P.strstart+P.lookahead-F,M=a._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-F),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,fe=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=F-1,P.strstart++,M&&(Z(P,!1),P.strm.avail_out===0))return A}else if(P.match_available){if((M=a._tr_tally(P,0,P.window[P.strstart-1]))&&Z(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return A}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(M=a._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<F-1?P.strstart:F-1,ge===p?(Z(P,!0),P.strm.avail_out===0?be:le):P.last_lit&&(Z(P,!1),P.strm.avail_out===0)?A:G}function pe(P,ge,fe,M,N){this.good_length=P,this.max_lazy=ge,this.nice_length=fe,this.max_chain=M,this.func=N}function Ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*j),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(L+1),this.heap=new o.Buf16(2*C+1),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),ye(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ye(P){var ge;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=g,(ge=P.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?$:re,P.adler=ge.wrap===2?0:1,ge.last_flush=f,a._tr_init(ge),m):ce(P,_)}function We(P){var ge=Ye(P);return ge===m&&function(fe){fe.window_size=2*fe.w_size,ye(fe.head),fe.max_lazy_match=i[fe.level].max_lazy,fe.good_match=i[fe.level].good_length,fe.nice_match=i[fe.level].nice_length,fe.max_chain_length=i[fe.level].max_chain,fe.strstart=0,fe.block_start=0,fe.lookahead=0,fe.insert=0,fe.match_length=fe.prev_length=F-1,fe.match_available=0,fe.ins_h=0}(P.state),ge}function Tt(P,ge,fe,M,N,ee){if(!P)return _;var ve=1;if(ge===v&&(ge=6),M<0?(ve=0,M=-M):15<M&&(ve=2,M-=16),N<1||b<N||fe!==y||M<8||15<M||ge<0||9<ge||ee<0||x<ee)return ce(P,_);M===8&&(M=9);var we=new Ze;return(P.state=we).strm=P,we.wrap=ve,we.gzhead=null,we.w_bits=M,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=N+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+F-1)/F),we.window=new o.Buf8(2*we.w_size),we.head=new o.Buf16(we.hash_size),we.prev=new o.Buf16(we.w_size),we.lit_bufsize=1<<N+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new o.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=ge,we.strategy=ee,we.method=fe,We(P)}i=[new pe(0,0,0,0,function(P,ge){var fe=65535;for(fe>P.pending_buf_size-5&&(fe=P.pending_buf_size-5);;){if(P.lookahead<=1){if(_e(P),P.lookahead===0&&ge===f)return A;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var M=P.block_start+fe;if((P.strstart===0||P.strstart>=M)&&(P.lookahead=P.strstart-M,P.strstart=M,Z(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-me&&(Z(P,!1),P.strm.avail_out===0))return A}return P.insert=0,ge===p?(Z(P,!0),P.strm.avail_out===0?be:le):(P.strstart>P.block_start&&(Z(P,!1),P.strm.avail_out),A)}),new pe(4,4,8,4,$e),new pe(4,5,16,8,$e),new pe(4,6,32,32,$e),new pe(4,4,16,16,Re),new pe(8,16,32,32,Re),new pe(8,16,128,128,Re),new pe(8,32,128,256,Re),new pe(32,128,258,1024,Re),new pe(32,258,258,4096,Re)],s.deflateInit=function(P,ge){return Tt(P,ge,y,15,8,0)},s.deflateInit2=Tt,s.deflateReset=We,s.deflateResetKeep=Ye,s.deflateSetHeader=function(P,ge){return P&&P.state?P.state.wrap!==2?_:(P.state.gzhead=ge,m):_},s.deflate=function(P,ge){var fe,M,N,ee;if(!P||!P.state||5<ge||ge<0)return P?ce(P,_):_;if(M=P.state,!P.output||!P.input&&P.avail_in!==0||M.status===666&&ge!==p)return ce(P,P.avail_out===0?-5:_);if(M.strm=P,fe=M.last_flush,M.last_flush=ge,M.status===$)if(M.wrap===2)P.adler=0,K(M,31),K(M,139),K(M,8),M.gzhead?(K(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),K(M,255&M.gzhead.time),K(M,M.gzhead.time>>8&255),K(M,M.gzhead.time>>16&255),K(M,M.gzhead.time>>24&255),K(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),K(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(K(M,255&M.gzhead.extra.length),K(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(P.adler=u(P.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(K(M,0),K(M,0),K(M,0),K(M,0),K(M,0),K(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),K(M,3),M.status=re);else{var ve=y+(M.w_bits-8<<4)<<8;ve|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(ve|=32),ve+=31-ve%31,M.status=re,de(M,ve),M.strstart!==0&&(de(M,P.adler>>>16),de(M,65535&P.adler)),P.adler=1}if(M.status===69)if(M.gzhead.extra){for(N=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),J(P),N=M.pending,M.pending!==M.pending_buf_size));)K(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){N=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),J(P),N=M.pending,M.pending===M.pending_buf_size)){ee=1;break}ee=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,K(M,ee)}while(ee!==0);M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),ee===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){N=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),J(P),N=M.pending,M.pending===M.pending_buf_size)){ee=1;break}ee=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,K(M,ee)}while(ee!==0);M.gzhead.hcrc&&M.pending>N&&(P.adler=u(P.adler,M.pending_buf,M.pending-N,N)),ee===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&J(P),M.pending+2<=M.pending_buf_size&&(K(M,255&P.adler),K(M,P.adler>>8&255),P.adler=0,M.status=re)):M.status=re),M.pending!==0){if(J(P),P.avail_out===0)return M.last_flush=-1,m}else if(P.avail_in===0&&se(ge)<=se(fe)&&ge!==p)return ce(P,-5);if(M.status===666&&P.avail_in!==0)return ce(P,-5);if(P.avail_in!==0||M.lookahead!==0||ge!==f&&M.status!==666){var we=M.strategy===2?function(ae,ke){for(var Ne;;){if(ae.lookahead===0&&(_e(ae),ae.lookahead===0)){if(ke===f)return A;break}if(ae.match_length=0,Ne=a._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++,Ne&&(Z(ae,!1),ae.strm.avail_out===0))return A}return ae.insert=0,ke===p?(Z(ae,!0),ae.strm.avail_out===0?be:le):ae.last_lit&&(Z(ae,!1),ae.strm.avail_out===0)?A:G}(M,ge):M.strategy===3?function(ae,ke){for(var Ne,Se,Ue,rt,Xe=ae.window;;){if(ae.lookahead<=z){if(_e(ae),ae.lookahead<=z&&ke===f)return A;if(ae.lookahead===0)break}if(ae.match_length=0,ae.lookahead>=F&&0<ae.strstart&&(Se=Xe[Ue=ae.strstart-1])===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]){rt=ae.strstart+z;do;while(Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Se===Xe[++Ue]&&Ue<rt);ae.match_length=z-(rt-Ue),ae.match_length>ae.lookahead&&(ae.match_length=ae.lookahead)}if(ae.match_length>=F?(Ne=a._tr_tally(ae,1,ae.match_length-F),ae.lookahead-=ae.match_length,ae.strstart+=ae.match_length,ae.match_length=0):(Ne=a._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++),Ne&&(Z(ae,!1),ae.strm.avail_out===0))return A}return ae.insert=0,ke===p?(Z(ae,!0),ae.strm.avail_out===0?be:le):ae.last_lit&&(Z(ae,!1),ae.strm.avail_out===0)?A:G}(M,ge):i[M.level].func(M,ge);if(we!==be&&we!==le||(M.status=666),we===A||we===be)return P.avail_out===0&&(M.last_flush=-1),m;if(we===G&&(ge===1?a._tr_align(M):ge!==5&&(a._tr_stored_block(M,0,0,!1),ge===3&&(ye(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),J(P),P.avail_out===0))return M.last_flush=-1,m}return ge!==p?m:M.wrap<=0?1:(M.wrap===2?(K(M,255&P.adler),K(M,P.adler>>8&255),K(M,P.adler>>16&255),K(M,P.adler>>24&255),K(M,255&P.total_in),K(M,P.total_in>>8&255),K(M,P.total_in>>16&255),K(M,P.total_in>>24&255)):(de(M,P.adler>>>16),de(M,65535&P.adler)),J(P),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?m:1)},s.deflateEnd=function(P){var ge;return P&&P.state?(ge=P.state.status)!==$&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==re&&ge!==666?ce(P,_):(P.state=null,ge===re?ce(P,-3):m):_},s.deflateSetDictionary=function(P,ge){var fe,M,N,ee,ve,we,ae,ke,Ne=ge.length;if(!P||!P.state||(ee=(fe=P.state).wrap)===2||ee===1&&fe.status!==$||fe.lookahead)return _;for(ee===1&&(P.adler=l(P.adler,ge,Ne,0)),fe.wrap=0,Ne>=fe.w_size&&(ee===0&&(ye(fe.head),fe.strstart=0,fe.block_start=0,fe.insert=0),ke=new o.Buf8(fe.w_size),o.arraySet(ke,ge,Ne-fe.w_size,fe.w_size,0),ge=ke,Ne=fe.w_size),ve=P.avail_in,we=P.next_in,ae=P.input,P.avail_in=Ne,P.next_in=0,P.input=ge,_e(fe);fe.lookahead>=F;){for(M=fe.strstart,N=fe.lookahead-(F-1);fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[M+F-1])&fe.hash_mask,fe.prev[M&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=M,M++,--N;);fe.strstart=M,fe.lookahead=F-1,_e(fe)}return fe.strstart+=fe.lookahead,fe.block_start=fe.strstart,fe.insert=fe.lookahead,fe.lookahead=0,fe.match_length=fe.prev_length=F-1,fe.match_available=0,P.next_in=we,P.input=ae,P.avail_in=ve,fe.wrap=ee,m},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,u,c,f,p,m,_,v,x,g,y,b,C,R,I,j,L,F,z,me,$,re,A,G;a=i.state,l=i.next_in,A=i.input,u=l+(i.avail_in-5),c=i.next_out,G=i.output,f=c-(o-i.avail_out),p=c+(i.avail_out-257),m=a.dmax,_=a.wsize,v=a.whave,x=a.wnext,g=a.window,y=a.hold,b=a.bits,C=a.lencode,R=a.distcode,I=(1<<a.lenbits)-1,j=(1<<a.distbits)-1;e:do{b<15&&(y+=A[l++]<<b,b+=8,y+=A[l++]<<b,b+=8),L=C[y&I];t:for(;;){if(y>>>=F=L>>>24,b-=F,(F=L>>>16&255)===0)G[c++]=65535&L;else{if(!(16&F)){if(!(64&F)){L=C[(65535&L)+(y&(1<<F)-1)];continue t}if(32&F){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}z=65535&L,(F&=15)&&(b<F&&(y+=A[l++]<<b,b+=8),z+=y&(1<<F)-1,y>>>=F,b-=F),b<15&&(y+=A[l++]<<b,b+=8,y+=A[l++]<<b,b+=8),L=R[y&j];n:for(;;){if(y>>>=F=L>>>24,b-=F,!(16&(F=L>>>16&255))){if(!(64&F)){L=R[(65535&L)+(y&(1<<F)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(me=65535&L,b<(F&=15)&&(y+=A[l++]<<b,(b+=8)<F&&(y+=A[l++]<<b,b+=8)),m<(me+=y&(1<<F)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=F,b-=F,(F=c-f)<me){if(v<(F=me-F)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(re=g,($=0)===x){if($+=_-F,F<z){for(z-=F;G[c++]=g[$++],--F;);$=c-me,re=G}}else if(x<F){if($+=_+x-F,(F-=x)<z){for(z-=F;G[c++]=g[$++],--F;);if($=0,x<z){for(z-=F=x;G[c++]=g[$++],--F;);$=c-me,re=G}}}else if($+=x-F,F<z){for(z-=F;G[c++]=g[$++],--F;);$=c-me,re=G}for(;2<z;)G[c++]=re[$++],G[c++]=re[$++],G[c++]=re[$++],z-=3;z&&(G[c++]=re[$++],1<z&&(G[c++]=re[$++]))}else{for($=c-me;G[c++]=G[$++],G[c++]=G[$++],G[c++]=G[$++],2<(z-=3););z&&(G[c++]=G[$++],1<z&&(G[c++]=G[$++]))}break}}break}}while(l<u&&c<p);l-=z=b>>3,y&=(1<<(b-=z<<3))-1,i.next_in=l,i.next_out=c,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=c<p?p-c+257:257-(c-p),a.hold=y,a.bits=b}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,f=2,p=0,m=-2,_=1,v=852,x=592;function g($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b($){var re;return $&&$.state?(re=$.state,$.total_in=$.total_out=re.total=0,$.msg="",re.wrap&&($.adler=1&re.wrap),re.mode=_,re.last=0,re.havedict=0,re.dmax=32768,re.head=null,re.hold=0,re.bits=0,re.lencode=re.lendyn=new i.Buf32(v),re.distcode=re.distdyn=new i.Buf32(x),re.sane=1,re.back=-1,p):m}function C($){var re;return $&&$.state?((re=$.state).wsize=0,re.whave=0,re.wnext=0,b($)):m}function R($,re){var A,G;return $&&$.state?(G=$.state,re<0?(A=0,re=-re):(A=1+(re>>4),re<48&&(re&=15)),re&&(re<8||15<re)?m:(G.window!==null&&G.wbits!==re&&(G.window=null),G.wrap=A,G.wbits=re,C($))):m}function I($,re){var A,G;return $?(G=new y,($.state=G).window=null,(A=R($,re))!==p&&($.state=null),A):m}var j,L,F=!0;function z($){if(F){var re;for(j=new i.Buf32(512),L=new i.Buf32(32),re=0;re<144;)$.lens[re++]=8;for(;re<256;)$.lens[re++]=9;for(;re<280;)$.lens[re++]=7;for(;re<288;)$.lens[re++]=8;for(u(c,$.lens,0,288,j,0,$.work,{bits:9}),re=0;re<32;)$.lens[re++]=5;u(f,$.lens,0,32,L,0,$.work,{bits:5}),F=!1}$.lencode=j,$.lenbits=9,$.distcode=L,$.distbits=5}function me($,re,A,G){var be,le=$.state;return le.window===null&&(le.wsize=1<<le.wbits,le.wnext=0,le.whave=0,le.window=new i.Buf8(le.wsize)),G>=le.wsize?(i.arraySet(le.window,re,A-le.wsize,le.wsize,0),le.wnext=0,le.whave=le.wsize):(G<(be=le.wsize-le.wnext)&&(be=G),i.arraySet(le.window,re,A-G,be,le.wnext),(G-=be)?(i.arraySet(le.window,re,A-G,G,0),le.wnext=G,le.whave=le.wsize):(le.wnext+=be,le.wnext===le.wsize&&(le.wnext=0),le.whave<le.wsize&&(le.whave+=be))),0}s.inflateReset=C,s.inflateReset2=R,s.inflateResetKeep=b,s.inflateInit=function($){return I($,15)},s.inflateInit2=I,s.inflate=function($,re){var A,G,be,le,ce,se,ye,J,Z,K,de,oe,_e,$e,Re,pe,Ze,Ye,We,Tt,P,ge,fe,M,N=0,ee=new i.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return m;(A=$.state).mode===12&&(A.mode=13),ce=$.next_out,be=$.output,ye=$.avail_out,le=$.next_in,G=$.input,se=$.avail_in,J=A.hold,Z=A.bits,K=se,de=ye,ge=p;e:for(;;)switch(A.mode){case _:if(A.wrap===0){A.mode=13;break}for(;Z<16;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(2&A.wrap&&J===35615){ee[A.check=0]=255&J,ee[1]=J>>>8&255,A.check=a(A.check,ee,2,0),Z=J=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&J)<<8)+(J>>8))%31){$.msg="incorrect header check",A.mode=30;break}if((15&J)!=8){$.msg="unknown compression method",A.mode=30;break}if(Z-=4,P=8+(15&(J>>>=4)),A.wbits===0)A.wbits=P;else if(P>A.wbits){$.msg="invalid window size",A.mode=30;break}A.dmax=1<<P,$.adler=A.check=1,A.mode=512&J?10:12,Z=J=0;break;case 2:for(;Z<16;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(A.flags=J,(255&A.flags)!=8){$.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){$.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=J>>8&1),512&A.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,A.check=a(A.check,ee,2,0)),Z=J=0,A.mode=3;case 3:for(;Z<32;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}A.head&&(A.head.time=J),512&A.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,ee[2]=J>>>16&255,ee[3]=J>>>24&255,A.check=a(A.check,ee,4,0)),Z=J=0,A.mode=4;case 4:for(;Z<16;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}A.head&&(A.head.xflags=255&J,A.head.os=J>>8),512&A.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,A.check=a(A.check,ee,2,0)),Z=J=0,A.mode=5;case 5:if(1024&A.flags){for(;Z<16;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}A.length=J,A.head&&(A.head.extra_len=J),512&A.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,A.check=a(A.check,ee,2,0)),Z=J=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(se<(oe=A.length)&&(oe=se),oe&&(A.head&&(P=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),i.arraySet(A.head.extra,G,le,oe,P)),512&A.flags&&(A.check=a(A.check,G,oe,le)),se-=oe,le+=oe,A.length-=oe),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(se===0)break e;for(oe=0;P=G[le+oe++],A.head&&P&&A.length<65536&&(A.head.name+=String.fromCharCode(P)),P&&oe<se;);if(512&A.flags&&(A.check=a(A.check,G,oe,le)),se-=oe,le+=oe,P)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(se===0)break e;for(oe=0;P=G[le+oe++],A.head&&P&&A.length<65536&&(A.head.comment+=String.fromCharCode(P)),P&&oe<se;);if(512&A.flags&&(A.check=a(A.check,G,oe,le)),se-=oe,le+=oe,P)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;Z<16;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(J!==(65535&A.check)){$.msg="header crc mismatch",A.mode=30;break}Z=J=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),$.adler=A.check=0,A.mode=12;break;case 10:for(;Z<32;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}$.adler=A.check=g(J),Z=J=0,A.mode=11;case 11:if(A.havedict===0)return $.next_out=ce,$.avail_out=ye,$.next_in=le,$.avail_in=se,A.hold=J,A.bits=Z,2;$.adler=A.check=1,A.mode=12;case 12:if(re===5||re===6)break e;case 13:if(A.last){J>>>=7&Z,Z-=7&Z,A.mode=27;break}for(;Z<3;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}switch(A.last=1&J,Z-=1,3&(J>>>=1)){case 0:A.mode=14;break;case 1:if(z(A),A.mode=20,re!==6)break;J>>>=2,Z-=2;break e;case 2:A.mode=17;break;case 3:$.msg="invalid block type",A.mode=30}J>>>=2,Z-=2;break;case 14:for(J>>>=7&Z,Z-=7&Z;Z<32;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if((65535&J)!=(J>>>16^65535)){$.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&J,Z=J=0,A.mode=15,re===6)break e;case 15:A.mode=16;case 16:if(oe=A.length){if(se<oe&&(oe=se),ye<oe&&(oe=ye),oe===0)break e;i.arraySet(be,G,le,oe,ce),se-=oe,le+=oe,ye-=oe,ce+=oe,A.length-=oe;break}A.mode=12;break;case 17:for(;Z<14;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(A.nlen=257+(31&J),J>>>=5,Z-=5,A.ndist=1+(31&J),J>>>=5,Z-=5,A.ncode=4+(15&J),J>>>=4,Z-=4,286<A.nlen||30<A.ndist){$.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;Z<3;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}A.lens[ve[A.have++]]=7&J,J>>>=3,Z-=3}for(;A.have<19;)A.lens[ve[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,fe={bits:A.lenbits},ge=u(0,A.lens,0,19,A.lencode,0,A.work,fe),A.lenbits=fe.bits,ge){$.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;pe=(N=A.lencode[J&(1<<A.lenbits)-1])>>>16&255,Ze=65535&N,!((Re=N>>>24)<=Z);){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(Ze<16)J>>>=Re,Z-=Re,A.lens[A.have++]=Ze;else{if(Ze===16){for(M=Re+2;Z<M;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(J>>>=Re,Z-=Re,A.have===0){$.msg="invalid bit length repeat",A.mode=30;break}P=A.lens[A.have-1],oe=3+(3&J),J>>>=2,Z-=2}else if(Ze===17){for(M=Re+3;Z<M;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}Z-=Re,P=0,oe=3+(7&(J>>>=Re)),J>>>=3,Z-=3}else{for(M=Re+7;Z<M;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}Z-=Re,P=0,oe=11+(127&(J>>>=Re)),J>>>=7,Z-=7}if(A.have+oe>A.nlen+A.ndist){$.msg="invalid bit length repeat",A.mode=30;break}for(;oe--;)A.lens[A.have++]=P}}if(A.mode===30)break;if(A.lens[256]===0){$.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,fe={bits:A.lenbits},ge=u(c,A.lens,0,A.nlen,A.lencode,0,A.work,fe),A.lenbits=fe.bits,ge){$.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,fe={bits:A.distbits},ge=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,fe),A.distbits=fe.bits,ge){$.msg="invalid distances set",A.mode=30;break}if(A.mode=20,re===6)break e;case 20:A.mode=21;case 21:if(6<=se&&258<=ye){$.next_out=ce,$.avail_out=ye,$.next_in=le,$.avail_in=se,A.hold=J,A.bits=Z,l($,de),ce=$.next_out,be=$.output,ye=$.avail_out,le=$.next_in,G=$.input,se=$.avail_in,J=A.hold,Z=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;pe=(N=A.lencode[J&(1<<A.lenbits)-1])>>>16&255,Ze=65535&N,!((Re=N>>>24)<=Z);){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(pe&&!(240&pe)){for(Ye=Re,We=pe,Tt=Ze;pe=(N=A.lencode[Tt+((J&(1<<Ye+We)-1)>>Ye)])>>>16&255,Ze=65535&N,!(Ye+(Re=N>>>24)<=Z);){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}J>>>=Ye,Z-=Ye,A.back+=Ye}if(J>>>=Re,Z-=Re,A.back+=Re,A.length=Ze,pe===0){A.mode=26;break}if(32&pe){A.back=-1,A.mode=12;break}if(64&pe){$.msg="invalid literal/length code",A.mode=30;break}A.extra=15&pe,A.mode=22;case 22:if(A.extra){for(M=A.extra;Z<M;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}A.length+=J&(1<<A.extra)-1,J>>>=A.extra,Z-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;pe=(N=A.distcode[J&(1<<A.distbits)-1])>>>16&255,Ze=65535&N,!((Re=N>>>24)<=Z);){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(!(240&pe)){for(Ye=Re,We=pe,Tt=Ze;pe=(N=A.distcode[Tt+((J&(1<<Ye+We)-1)>>Ye)])>>>16&255,Ze=65535&N,!(Ye+(Re=N>>>24)<=Z);){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}J>>>=Ye,Z-=Ye,A.back+=Ye}if(J>>>=Re,Z-=Re,A.back+=Re,64&pe){$.msg="invalid distance code",A.mode=30;break}A.offset=Ze,A.extra=15&pe,A.mode=24;case 24:if(A.extra){for(M=A.extra;Z<M;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}A.offset+=J&(1<<A.extra)-1,J>>>=A.extra,Z-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){$.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(ye===0)break e;if(oe=de-ye,A.offset>oe){if((oe=A.offset-oe)>A.whave&&A.sane){$.msg="invalid distance too far back",A.mode=30;break}_e=oe>A.wnext?(oe-=A.wnext,A.wsize-oe):A.wnext-oe,oe>A.length&&(oe=A.length),$e=A.window}else $e=be,_e=ce-A.offset,oe=A.length;for(ye<oe&&(oe=ye),ye-=oe,A.length-=oe;be[ce++]=$e[_e++],--oe;);A.length===0&&(A.mode=21);break;case 26:if(ye===0)break e;be[ce++]=A.length,ye--,A.mode=21;break;case 27:if(A.wrap){for(;Z<32;){if(se===0)break e;se--,J|=G[le++]<<Z,Z+=8}if(de-=ye,$.total_out+=de,A.total+=de,de&&($.adler=A.check=A.flags?a(A.check,be,de,ce-de):o(A.check,be,de,ce-de)),de=ye,(A.flags?J:g(J))!==A.check){$.msg="incorrect data check",A.mode=30;break}Z=J=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;Z<32;){if(se===0)break e;se--,J+=G[le++]<<Z,Z+=8}if(J!==(4294967295&A.total)){$.msg="incorrect length check",A.mode=30;break}Z=J=0}A.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return $.next_out=ce,$.avail_out=ye,$.next_in=le,$.avail_in=se,A.hold=J,A.bits=Z,(A.wsize||de!==$.avail_out&&A.mode<30&&(A.mode<27||re!==4))&&me($,$.output,$.next_out,de-$.avail_out)?(A.mode=31,-4):(K-=$.avail_in,de-=$.avail_out,$.total_in+=K,$.total_out+=de,A.total+=de,A.wrap&&de&&($.adler=A.check=A.flags?a(A.check,be,de,$.next_out-de):o(A.check,be,de,$.next_out-de)),$.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(K==0&&de===0||re===4)&&ge===p&&(ge=-5),ge)},s.inflateEnd=function($){if(!$||!$.state)return m;var re=$.state;return re.window&&(re.window=null),$.state=null,p},s.inflateGetHeader=function($,re){var A;return $&&$.state&&2&(A=$.state).wrap?((A.head=re).done=!1,p):m},s.inflateSetDictionary=function($,re){var A,G=re.length;return $&&$.state?(A=$.state).wrap!==0&&A.mode!==11?m:A.mode===11&&o(1,re,G,0)!==A.check?-3:me($,re,G,G)?(A.mode=31,-4):(A.havedict=1,p):m},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,p,m,_,v,x,g){var y,b,C,R,I,j,L,F,z,me=g.bits,$=0,re=0,A=0,G=0,be=0,le=0,ce=0,se=0,ye=0,J=0,Z=null,K=0,de=new i.Buf16(16),oe=new i.Buf16(16),_e=null,$e=0;for($=0;$<=15;$++)de[$]=0;for(re=0;re<m;re++)de[f[p+re]]++;for(be=me,G=15;1<=G&&de[G]===0;G--);if(G<be&&(be=G),G===0)return _[v++]=20971520,_[v++]=20971520,g.bits=1,0;for(A=1;A<G&&de[A]===0;A++);for(be<A&&(be=A),$=se=1;$<=15;$++)if(se<<=1,(se-=de[$])<0)return-1;if(0<se&&(c===0||G!==1))return-1;for(oe[1]=0,$=1;$<15;$++)oe[$+1]=oe[$]+de[$];for(re=0;re<m;re++)f[p+re]!==0&&(x[oe[f[p+re]]++]=re);if(j=c===0?(Z=_e=x,19):c===1?(Z=o,K-=257,_e=a,$e-=257,256):(Z=l,_e=u,-1),$=A,I=v,ce=re=J=0,C=-1,R=(ye=1<<(le=be))-1,c===1&&852<ye||c===2&&592<ye)return 1;for(;;){for(L=$-ce,z=x[re]<j?(F=0,x[re]):x[re]>j?(F=_e[$e+x[re]],Z[K+x[re]]):(F=96,0),y=1<<$-ce,A=b=1<<le;_[I+(J>>ce)+(b-=y)]=L<<24|F<<16|z|0,b!==0;);for(y=1<<$-1;J&y;)y>>=1;if(y!==0?(J&=y-1,J+=y):J=0,re++,--de[$]==0){if($===G)break;$=f[p+x[re]]}if(be<$&&(J&R)!==C){for(ce===0&&(ce=be),I+=A,se=1<<(le=$-ce);le+ce<G&&!((se-=de[le+ce])<=0);)le++,se<<=1;if(ye+=1<<le,c===1&&852<ye||c===2&&592<ye)return 1;_[C=J&R]=be<<24|le<<16|I-v|0}}return J!==0&&(_[I+J]=$-ce<<24|64<<16|0),g.bits=be,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(N){for(var ee=N.length;0<=--ee;)N[ee]=0}var u=0,c=29,f=256,p=f+1+c,m=30,_=19,v=2*p+1,x=15,g=16,y=7,b=256,C=16,R=17,I=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=new Array(2*(p+2));l(me);var $=new Array(2*m);l($);var re=new Array(512);l(re);var A=new Array(256);l(A);var G=new Array(c);l(G);var be,le,ce,se=new Array(m);function ye(N,ee,ve,we,ae){this.static_tree=N,this.extra_bits=ee,this.extra_base=ve,this.elems=we,this.max_length=ae,this.has_stree=N&&N.length}function J(N,ee){this.dyn_tree=N,this.max_code=0,this.stat_desc=ee}function Z(N){return N<256?re[N]:re[256+(N>>>7)]}function K(N,ee){N.pending_buf[N.pending++]=255&ee,N.pending_buf[N.pending++]=ee>>>8&255}function de(N,ee,ve){N.bi_valid>g-ve?(N.bi_buf|=ee<<N.bi_valid&65535,K(N,N.bi_buf),N.bi_buf=ee>>g-N.bi_valid,N.bi_valid+=ve-g):(N.bi_buf|=ee<<N.bi_valid&65535,N.bi_valid+=ve)}function oe(N,ee,ve){de(N,ve[2*ee],ve[2*ee+1])}function _e(N,ee){for(var ve=0;ve|=1&N,N>>>=1,ve<<=1,0<--ee;);return ve>>>1}function $e(N,ee,ve){var we,ae,ke=new Array(x+1),Ne=0;for(we=1;we<=x;we++)ke[we]=Ne=Ne+ve[we-1]<<1;for(ae=0;ae<=ee;ae++){var Se=N[2*ae+1];Se!==0&&(N[2*ae]=_e(ke[Se]++,Se))}}function Re(N){var ee;for(ee=0;ee<p;ee++)N.dyn_ltree[2*ee]=0;for(ee=0;ee<m;ee++)N.dyn_dtree[2*ee]=0;for(ee=0;ee<_;ee++)N.bl_tree[2*ee]=0;N.dyn_ltree[2*b]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function pe(N){8<N.bi_valid?K(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function Ze(N,ee,ve,we){var ae=2*ee,ke=2*ve;return N[ae]<N[ke]||N[ae]===N[ke]&&we[ee]<=we[ve]}function Ye(N,ee,ve){for(var we=N.heap[ve],ae=ve<<1;ae<=N.heap_len&&(ae<N.heap_len&&Ze(ee,N.heap[ae+1],N.heap[ae],N.depth)&&ae++,!Ze(ee,we,N.heap[ae],N.depth));)N.heap[ve]=N.heap[ae],ve=ae,ae<<=1;N.heap[ve]=we}function We(N,ee,ve){var we,ae,ke,Ne,Se=0;if(N.last_lit!==0)for(;we=N.pending_buf[N.d_buf+2*Se]<<8|N.pending_buf[N.d_buf+2*Se+1],ae=N.pending_buf[N.l_buf+Se],Se++,we===0?oe(N,ae,ee):(oe(N,(ke=A[ae])+f+1,ee),(Ne=j[ke])!==0&&de(N,ae-=G[ke],Ne),oe(N,ke=Z(--we),ve),(Ne=L[ke])!==0&&de(N,we-=se[ke],Ne)),Se<N.last_lit;);oe(N,b,ee)}function Tt(N,ee){var ve,we,ae,ke=ee.dyn_tree,Ne=ee.stat_desc.static_tree,Se=ee.stat_desc.has_stree,Ue=ee.stat_desc.elems,rt=-1;for(N.heap_len=0,N.heap_max=v,ve=0;ve<Ue;ve++)ke[2*ve]!==0?(N.heap[++N.heap_len]=rt=ve,N.depth[ve]=0):ke[2*ve+1]=0;for(;N.heap_len<2;)ke[2*(ae=N.heap[++N.heap_len]=rt<2?++rt:0)]=1,N.depth[ae]=0,N.opt_len--,Se&&(N.static_len-=Ne[2*ae+1]);for(ee.max_code=rt,ve=N.heap_len>>1;1<=ve;ve--)Ye(N,ke,ve);for(ae=Ue;ve=N.heap[1],N.heap[1]=N.heap[N.heap_len--],Ye(N,ke,1),we=N.heap[1],N.heap[--N.heap_max]=ve,N.heap[--N.heap_max]=we,ke[2*ae]=ke[2*ve]+ke[2*we],N.depth[ae]=(N.depth[ve]>=N.depth[we]?N.depth[ve]:N.depth[we])+1,ke[2*ve+1]=ke[2*we+1]=ae,N.heap[1]=ae++,Ye(N,ke,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(Xe,Rt){var qn,De,Ve,et,sn,Ht,Le=Rt.dyn_tree,pr=Rt.max_code,Gn=Rt.stat_desc.static_tree,Es=Rt.stat_desc.has_stree,Pe=Rt.stat_desc.extra_bits,Jr=Rt.stat_desc.extra_base,jr=Rt.stat_desc.max_length,mr=0;for(et=0;et<=x;et++)Xe.bl_count[et]=0;for(Le[2*Xe.heap[Xe.heap_max]+1]=0,qn=Xe.heap_max+1;qn<v;qn++)jr<(et=Le[2*Le[2*(De=Xe.heap[qn])+1]+1]+1)&&(et=jr,mr++),Le[2*De+1]=et,pr<De||(Xe.bl_count[et]++,sn=0,Jr<=De&&(sn=Pe[De-Jr]),Ht=Le[2*De],Xe.opt_len+=Ht*(et+sn),Es&&(Xe.static_len+=Ht*(Gn[2*De+1]+sn)));if(mr!==0){do{for(et=jr-1;Xe.bl_count[et]===0;)et--;Xe.bl_count[et]--,Xe.bl_count[et+1]+=2,Xe.bl_count[jr]--,mr-=2}while(0<mr);for(et=jr;et!==0;et--)for(De=Xe.bl_count[et];De!==0;)pr<(Ve=Xe.heap[--qn])||(Le[2*Ve+1]!==et&&(Xe.opt_len+=(et-Le[2*Ve+1])*Le[2*Ve],Le[2*Ve+1]=et),De--)}}(N,ee),$e(ke,rt,N.bl_count)}function P(N,ee,ve){var we,ae,ke=-1,Ne=ee[1],Se=0,Ue=7,rt=4;for(Ne===0&&(Ue=138,rt=3),ee[2*(ve+1)+1]=65535,we=0;we<=ve;we++)ae=Ne,Ne=ee[2*(we+1)+1],++Se<Ue&&ae===Ne||(Se<rt?N.bl_tree[2*ae]+=Se:ae!==0?(ae!==ke&&N.bl_tree[2*ae]++,N.bl_tree[2*C]++):Se<=10?N.bl_tree[2*R]++:N.bl_tree[2*I]++,ke=ae,rt=(Se=0)===Ne?(Ue=138,3):ae===Ne?(Ue=6,3):(Ue=7,4))}function ge(N,ee,ve){var we,ae,ke=-1,Ne=ee[1],Se=0,Ue=7,rt=4;for(Ne===0&&(Ue=138,rt=3),we=0;we<=ve;we++)if(ae=Ne,Ne=ee[2*(we+1)+1],!(++Se<Ue&&ae===Ne)){if(Se<rt)for(;oe(N,ae,N.bl_tree),--Se!=0;);else ae!==0?(ae!==ke&&(oe(N,ae,N.bl_tree),Se--),oe(N,C,N.bl_tree),de(N,Se-3,2)):Se<=10?(oe(N,R,N.bl_tree),de(N,Se-3,3)):(oe(N,I,N.bl_tree),de(N,Se-11,7));ke=ae,rt=(Se=0)===Ne?(Ue=138,3):ae===Ne?(Ue=6,3):(Ue=7,4)}}l(se);var fe=!1;function M(N,ee,ve,we){de(N,(u<<1)+(we?1:0),3),function(ae,ke,Ne,Se){pe(ae),K(ae,Ne),K(ae,~Ne),i.arraySet(ae.pending_buf,ae.window,ke,Ne,ae.pending),ae.pending+=Ne}(N,ee,ve)}s._tr_init=function(N){fe||(function(){var ee,ve,we,ae,ke,Ne=new Array(x+1);for(ae=we=0;ae<c-1;ae++)for(G[ae]=we,ee=0;ee<1<<j[ae];ee++)A[we++]=ae;for(A[we-1]=ae,ae=ke=0;ae<16;ae++)for(se[ae]=ke,ee=0;ee<1<<L[ae];ee++)re[ke++]=ae;for(ke>>=7;ae<m;ae++)for(se[ae]=ke<<7,ee=0;ee<1<<L[ae]-7;ee++)re[256+ke++]=ae;for(ve=0;ve<=x;ve++)Ne[ve]=0;for(ee=0;ee<=143;)me[2*ee+1]=8,ee++,Ne[8]++;for(;ee<=255;)me[2*ee+1]=9,ee++,Ne[9]++;for(;ee<=279;)me[2*ee+1]=7,ee++,Ne[7]++;for(;ee<=287;)me[2*ee+1]=8,ee++,Ne[8]++;for($e(me,p+1,Ne),ee=0;ee<m;ee++)$[2*ee+1]=5,$[2*ee]=_e(ee,5);be=new ye(me,j,f+1,p,x),le=new ye($,L,0,m,x),ce=new ye(new Array(0),F,0,_,y)}(),fe=!0),N.l_desc=new J(N.dyn_ltree,be),N.d_desc=new J(N.dyn_dtree,le),N.bl_desc=new J(N.bl_tree,ce),N.bi_buf=0,N.bi_valid=0,Re(N)},s._tr_stored_block=M,s._tr_flush_block=function(N,ee,ve,we){var ae,ke,Ne=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(Se){var Ue,rt=4093624447;for(Ue=0;Ue<=31;Ue++,rt>>>=1)if(1&rt&&Se.dyn_ltree[2*Ue]!==0)return o;if(Se.dyn_ltree[18]!==0||Se.dyn_ltree[20]!==0||Se.dyn_ltree[26]!==0)return a;for(Ue=32;Ue<f;Ue++)if(Se.dyn_ltree[2*Ue]!==0)return a;return o}(N)),Tt(N,N.l_desc),Tt(N,N.d_desc),Ne=function(Se){var Ue;for(P(Se,Se.dyn_ltree,Se.l_desc.max_code),P(Se,Se.dyn_dtree,Se.d_desc.max_code),Tt(Se,Se.bl_desc),Ue=_-1;3<=Ue&&Se.bl_tree[2*z[Ue]+1]===0;Ue--);return Se.opt_len+=3*(Ue+1)+5+5+4,Ue}(N),ae=N.opt_len+3+7>>>3,(ke=N.static_len+3+7>>>3)<=ae&&(ae=ke)):ae=ke=ve+5,ve+4<=ae&&ee!==-1?M(N,ee,ve,we):N.strategy===4||ke===ae?(de(N,2+(we?1:0),3),We(N,me,$)):(de(N,4+(we?1:0),3),function(Se,Ue,rt,Xe){var Rt;for(de(Se,Ue-257,5),de(Se,rt-1,5),de(Se,Xe-4,4),Rt=0;Rt<Xe;Rt++)de(Se,Se.bl_tree[2*z[Rt]+1],3);ge(Se,Se.dyn_ltree,Ue-1),ge(Se,Se.dyn_dtree,rt-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,Ne+1),We(N,N.dyn_ltree,N.dyn_dtree)),Re(N),we&&pe(N)},s._tr_tally=function(N,ee,ve){return N.pending_buf[N.d_buf+2*N.last_lit]=ee>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&ee,N.pending_buf[N.l_buf+N.last_lit]=255&ve,N.last_lit++,ee===0?N.dyn_ltree[2*ve]++:(N.matches++,ee--,N.dyn_ltree[2*(A[ve]+f+1)]++,N.dyn_dtree[2*Z(ee)]++),N.last_lit===N.lit_bufsize-1},s._tr_align=function(N){de(N,2,3),oe(N,b,me),function(ee){ee.bi_valid===16?(K(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,u,c,f,p=1,m={},_=!1,v=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){y(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,R=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=R,C}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(C){o.postMessage(f+C,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){c.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(C){var R=v.createElement("script");R.onreadystatechange=function(){y(C),R.onreadystatechange=null,u.removeChild(R),R=null},u.appendChild(R)}):function(C){setTimeout(y,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var R=new Array(arguments.length-1),I=0;I<R.length;I++)R[I]=arguments[I+1];var j={callback:C,args:R};return m[p]=j,l(p),p++},x.clearImmediate=g}function g(C){delete m[C]}function y(C){if(_)setTimeout(y,0,C);else{var R=m[C];if(R){_=!0;try{(function(I){var j=I.callback,L=I.args;switch(L.length){case 0:j();break;case 1:j(L[0]);break;case 2:j(L[0],L[1]);break;case 3:j(L[0],L[1],L[2]);break;default:j.apply(a,L)}})(R)}finally{g(C),_=!1}}}}function b(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(f)===0&&y(+C.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(CC);var L5=CC.exports;const Nx=sf(L5),$5=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState([]),s=E.useRef(null),i=E.useCallback(async u=>{if(!u||u.length===0){r(f=>[...f,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let f=0;f<u.length;f++){const p=u[f];if(p.type==="application/zip"||p.name.endsWith(".zip"))try{const m=await Nx.loadAsync(p),_=Object.values(m.files);for(const v of _)if(!v.dir&&v.name.endsWith(".json"))try{const x=await v.async("string"),g=JSON.parse(x),y=v.name.split("/").pop()||"unknown.json",b=y.replace(/\.json$/,"");localStorage.setItem(b,JSON.stringify(g)),c.push({success:!0,message:`Successfully extracted and stored "${y}" with key "${b}" from ZIP.`})}catch(x){const g=x instanceof Error?x.message:"Unknown error";c.push({success:!1,message:`Error processing file "${v.name}" from ZIP: ${g}`})}else v.dir||c.push({success:!1,message:`Skipped non-JSON file "${v.name}" from ZIP.`})}catch(m){const _=m instanceof Error?m.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${p.name}": ${_}`})}else if(p.type==="application/json"||p.name.endsWith(".json"))try{const m=new FileReader,_=await new Promise((y,b)=>{m.onload=()=>y(m.result),m.onerror=b,m.readAsText(p)}),v=JSON.parse(_),g=p.name.replace(/\.json$/,"");localStorage.setItem(g,JSON.stringify(v)),c.push({success:!0,message:`Successfully stored "${p.name}" with key "${g}".`})}catch(m){const _=m instanceof Error?m.message:"Unknown error";c.push({success:!1,message:`Error processing file "${p.name}": ${_}`})}else c.push({success:!1,message:`File "${p.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(f=>[...f,...c]),t(!1)}},[]),o=u=>{i(u.target.files),s.current&&(s.current.value="")},a=()=>{r([])},l=E.useCallback(async()=>{t(!0);try{debugger;const u=new Nx;let c=!1,f=null;const p=localStorage.getItem("sankeertan_categories_data");if(p)try{f=JSON.parse(p),u.file("sankeertan_categories_data.json",p),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),f=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const m={};for(let g=0;g<localStorage.length;g++){debugger;const y=localStorage.key(g);if(console.log(y),y!=="sb-"+j1+"-auth-token"&&y&&y!=="sankeertan_categories_data"){const b=localStorage.getItem(y);if(b)try{JSON.parse(b);let C=u;if(f&&Array.isArray(f.data))for(const R of f.data)for(const I of R.books){const j=I.bookId,L=`sankeertan_song_details-${j.toLowerCase().replace(/ /g,"-")}`,F=`sankeertan_song_indices-${j.toLowerCase().replace(/ /g,"-")}`;if(y.startsWith(L)||y.startsWith(F)){if(!m[j]){const z=u.folder(j);z?m[j]=z:m[j]=u}C=m[j]||u;break}}C.file(`${y}.json`,b),c=!0}catch{console.warn(`Skipping key "${y}" as value is not valid JSON`)}}}if(!c){r(g=>[...g,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const _=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),v=URL.createObjectURL(_),x=document.createElement("a");x.href=v,x.download="sankeertan_localStorage_backup.zip",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),r(g=>[...g,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(f=>[...f,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return k.jsxs("div",{className:"p-4",children:[k.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:s}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),k.jsx("div",{className:"mb-4",children:k.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&k.jsx("div",{className:"mb-4 flex items-center gap-2",children:k.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&k.jsxs("div",{className:"mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>k.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?k.jsx("span",{style:{color:"green"},children:""}):k.jsx("span",{style:{color:"red"},children:""}),k.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),k.jsx("span",{children:u.message})]},c)),k.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),k.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),k.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},Lr=({children:e,session:t})=>{const n=dr();return t?k.jsx(k.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),k.jsx(C1,{to:"/login",replace:!0}))};function M5(){const{session:e}=wo(),{categories:t,isLoading:n}=Uy(),r=(t==null?void 0:t.flatMap(s=>s.books))||[];return n?k.jsx("div",{children:"Checking authentication..."}):k.jsx(CS,{children:k.jsx(kD,{books:r,children:k.jsxs(GA,{children:[k.jsx(dn,{path:"/login",element:k.jsx(mI,{})}),k.jsx(dn,{path:"/signup",element:k.jsx(gI,{})}),k.jsx(dn,{path:"/change-password",element:k.jsx(yI,{})}),k.jsx(dn,{path:"/auth/callback",element:k.jsx(wI,{})}),k.jsx(dn,{path:"/settings",element:k.jsx(Lr,{session:e,children:k.jsx(g5,{})})}),k.jsx(dn,{path:"/categories",element:k.jsx(Lr,{session:e,children:k.jsx(xD,{})})}),k.jsx(dn,{path:"/books/:categoryId",element:k.jsx(Lr,{session:e,children:k.jsx(DD,{})})}),k.jsx(dn,{path:"/book/:categoryId/:bookId",element:k.jsx(Lr,{session:e,children:k.jsx(QD,{})})}),k.jsx(dn,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(Lr,{session:e,children:k.jsx(x5,{})})}),k.jsx(dn,{path:"/sankeertan/:broadcastId",element:k.jsx(Lr,{session:e,children:k.jsx(S5,{broadcastId:1})})}),k.jsx(dn,{path:"/localstoragesync",element:k.jsx(Lr,{session:e,children:k.jsx($5,{})})}),k.jsx(dn,{path:"/bulkDownloadTester",element:k.jsx(Lr,{session:e,children:k.jsx(j5,{})})}),k.jsx(dn,{path:"/offlineContentManager",element:k.jsx(Lr,{session:e,children:k.jsx(N5,{})})}),k.jsx(dn,{path:"/search",element:k.jsx(Lr,{session:e,children:k.jsx(O5,{})})}),k.jsx(dn,{path:"/",element:e?k.jsx(C1,{to:"/categories",replace:!0}):k.jsx("div",{children:"Welcome!"})})]})})})}const F5=E.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),B5=({children:e})=>{const[t,n]=E.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,s]=E.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[i,o]=E.useState(null),[a,l]=E.useState(!1),[u,c]=E.useState(null),{bookId:f}=ju(),p=E.useCallback(async _=>{l(!0),c(null),o(null),await new Promise(x=>setTimeout(x,500));const v=t.find(x=>x.id===_);o(v||null),l(!1)},[t,l,c,o]);E.useEffect(()=>{f&&p(f)},[f,p]);const m={books:t,categories:r,currentBook:i,loadBook:p,loading:a,error:u};return k.jsx(F5.Provider,{value:m,children:e})},U5=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var l;const[r,s]=E.useState(null);fr(),E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:u}})=>{s(u)}),Ut.auth.onAuthStateChange((u,c)=>{s(c)})},[]);const{handleSignOut:i}=_S(),{isOfflineMode:o,setIsOfflineMode:a}=zy();return k.jsx("div",{className:"relative inline-block text-left",children:r?k.jsxs("div",{children:[k.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((l=r.user)==null?void 0:l.email)||"User",k.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&k.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:k.jsxs("div",{className:"py-1",children:[k.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:o,onChange:u=>a(u.target.checked)}),k.jsx("span",{children:"Offline Mode"})]})}),k.jsx(rr,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),k.jsx(rr,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),k.jsx(rr,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),k.jsx(rr,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),k.jsx(rr,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),k.jsx("button",{onClick:i,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):k.jsx(rr,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var z5=Object.defineProperty,V5=(e,t,n)=>t in e?z5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kp=(e,t,n)=>(V5(e,typeof t!="symbol"?t+"":t,n),n);let K5=class{constructor(){kp(this,"current",this.detect()),kp(this,"handoffState","pending"),kp(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Qr=new K5;function Ku(e){var t;return Qr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function bg(e){var t,n;return Qr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function TC(e){var t,n;return(n=(t=bg(e))==null?void 0:t.activeElement)!=null?n:null}function W5(e){return TC(e)===e}function Ff(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ss(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ff(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Ss();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function Bf(){let[e]=E.useState(Ss);return E.useEffect(()=>()=>e.dispose(),[e]),e}let Nn=(e,t)=>{Qr.isServer?E.useEffect(e,t):E.useLayoutEffect(e,t)};function xo(e){let t=E.useRef(e);return Nn(()=>{t.current=e},[e]),t}let ft=function(e){let t=xo(e);return ze.useCallback((...n)=>t.current(...n),[t])};function Wu(e){return E.useMemo(()=>e,Object.values(e))}let H5=E.createContext(void 0);function q5(){return E.useContext(H5)}function xg(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function _s(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_s),r}var tf=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(tf||{}),ei=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ei||{});function hr(){let e=Q5();return E.useCallback(t=>G5({mergeRefs:e,...t}),[e])}function G5({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??Y5;let l=PC(t,e);if(i)return qc(l,n,r,o,a);let u=s??0;if(u&2){let{static:c=!1,...f}=l;if(c)return qc(f,n,r,o,a)}if(u&1){let{unmount:c=!0,...f}=l;return _s(c?0:1,{0(){return null},1(){return qc({...f,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return qc(l,n,r,o,a)}function qc(e,t={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=Sp(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[_,v]of Object.entries(t))typeof v=="boolean"&&(p=!0),v===!0&&m.push(_.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let _ of m)f[`data-${_}`]=""}}if(Vl(i)&&(Object.keys(Ni(l)).length>0||Object.keys(Ni(f)).length>0))if(!E.isValidElement(c)||Array.isArray(c)&&c.length>1||Z5(c)){if(Object.keys(Ni(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ni(l)).concat(Object.keys(Ni(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=c.props,m=p==null?void 0:p.className,_=typeof m=="function"?(...g)=>xg(m(...g),l.className):xg(m,l.className),v=_?{className:_}:{},x=PC(c.props,Ni(Sp(l,["ref"])));for(let g in f)g in x&&delete f[g];return E.cloneElement(c,Object.assign({},x,f,u,{ref:s(J5(c),u.ref)},v))}return E.createElement(i,Object.assign({},Sp(l,["ref"]),!Vl(i)&&u,!Vl(i)&&f),c)}function Q5(){let e=E.useRef([]),t=E.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function Y5(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function PC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return t}function Ln(e){var t;return Object.assign(E.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Ni(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Sp(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function J5(e){return ze.version.split(".")[0]>="19"?e.props.ref:e.ref}function Vl(e){return e===E.Fragment||e===Symbol.for("react.fragment")}function Z5(e){return Vl(e.type)}let X5="span";var nf=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(nf||{});function e4(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return hr()({ourProps:i,theirProps:s,slot:{},defaultTag:X5,name:"Hidden"})}let _g=Ln(e4);function t4(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function di(e){return t4(e)&&"tagName"in e}function ho(e){return di(e)&&"accessKey"in e}function ti(e){return di(e)&&"tabIndex"in e}function n4(e){return di(e)&&"style"in e}function r4(e){return ho(e)&&e.nodeName==="IFRAME"}function s4(e){return ho(e)&&e.nodeName==="INPUT"}let AC=Symbol();function i4(e,t=!0){return Object.assign(e,{[AC]:t})}function Yr(...e){let t=E.useRef(e);E.useEffect(()=>{t.current=e},[e]);let n=ft(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[AC]))?void 0:n}let Cv=E.createContext(null);Cv.displayName="DescriptionContext";function OC(){let e=E.useContext(Cv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,OC),t}return e}function o4(){let[e,t]=E.useState([]);return[e.length>0?e.join(" "):void 0,E.useMemo(()=>function(n){let r=ft(i=>(t(o=>[...o,i]),()=>t(o=>{let a=o.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),s=E.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ze.createElement(Cv.Provider,{value:s},n.children)},[t])]}let a4="p";function l4(e,t){let n=E.useId(),r=q5(),{id:s=`headlessui-description-${n}`,...i}=e,o=OC(),a=Yr(t);Nn(()=>o.register(s),[s,o.register]);let l=Wu({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:s};return hr()({ourProps:u,theirProps:i,slot:l,defaultTag:a4,name:o.name||"Description"})}let u4=Ln(l4),c4=Object.assign(u4,{});var RC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(RC||{});let d4=E.createContext(()=>{});function f4({value:e,children:t}){return ze.createElement(d4.Provider,{value:e},t)}let jC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var h4=Object.defineProperty,p4=(e,t,n)=>t in e?h4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m4=(e,t,n)=>(p4(e,t+"",n),n),IC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Jn=(e,t,n)=>(IC(e,t,"read from private field"),n?n.call(e):t.get(e)),Ep=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Lx=(e,t,n,r)=>(IC(e,t,"write to private field"),t.set(e,n),n),$r,kl,Sl;let g4=class{constructor(t){Ep(this,$r,{}),Ep(this,kl,new jC(()=>new Set)),Ep(this,Sl,new Set),m4(this,"disposables",Ss()),Lx(this,$r,t),Qr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Jn(this,$r)}subscribe(t,n){if(Qr.isServer)return()=>{};let r={selector:t,callback:n,current:t(Jn(this,$r))};return Jn(this,Sl).add(r),this.disposables.add(()=>{Jn(this,Sl).delete(r)})}on(t,n){return Qr.isServer?()=>{}:(Jn(this,kl).get(t).add(n),this.disposables.add(()=>{Jn(this,kl).get(t).delete(n)}))}send(t){let n=this.reduce(Jn(this,$r),t);if(n!==Jn(this,$r)){Lx(this,$r,n);for(let r of Jn(this,Sl)){let s=r.selector(Jn(this,$r));DC(r.current,s)||(r.current=s,r.callback(s))}for(let r of Jn(this,kl).get(t.type))r(Jn(this,$r),t)}}};$r=new WeakMap,kl=new WeakMap,Sl=new WeakMap;function DC(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Cp(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Cp(e.entries(),t.entries()):$x(e)&&$x(t)?Cp(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Cp(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function $x(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var y4=Object.defineProperty,v4=(e,t,n)=>t in e?y4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mx=(e,t,n)=>(v4(e,typeof t!="symbol"?t+"":t,n),n),w4=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(w4||{});let b4={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},x4=class NC extends g4{constructor(){super(...arguments),Mx(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Mx(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new NC({stack:[]})}reduce(t,n){return _s(n.type,b4,t,n)}};const LC=new jC(()=>x4.new());var $C={exports:{}},MC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=E;function _4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var k4=typeof Object.is=="function"?Object.is:_4,S4=Hu.useSyncExternalStore,E4=Hu.useRef,C4=Hu.useEffect,T4=Hu.useMemo,P4=Hu.useDebugValue;MC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=E4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=T4(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),s!==void 0&&o.hasValue){var _=o.value;if(s(_,m))return f=_}return f=m}if(_=f,k4(c,m))return _;var v=r(m);return s!==void 0&&s(_,v)?(c=m,_):(c=m,f=v)}var u=!1,c,f,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,s]);var a=S4(e,i[0],i[1]);return C4(function(){o.hasValue=!0,o.value=a},[a]),P4(a),a};$C.exports=MC;var A4=$C.exports;function FC(e,t,n=DC){return A4.useSyncExternalStoreWithSelector(ft(r=>e.subscribe(O4,r)),ft(()=>e.state),ft(()=>e.state),ft(t),n)}function O4(e){return e}function qu(e,t){let n=E.useId(),r=LC.get(t),[s,i]=FC(r,E.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Nn(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let kg=new Map,Kl=new Map;function Fx(e){var t;let n=(t=Kl.get(e))!=null?t:0;return Kl.set(e,n+1),n!==0?()=>Bx(e):(kg.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Bx(e))}function Bx(e){var t;let n=(t=Kl.get(e))!=null?t:1;if(n===1?Kl.delete(e):Kl.set(e,n-1),n!==1)return;let r=kg.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,kg.delete(e))}function R4(e,{allowed:t,disallowed:n}={}){let r=qu(e,"inert-others");Nn(()=>{var s,i;if(!r)return;let o=Ss();for(let l of(s=n==null?void 0:n())!=null?s:[])l&&o.add(Fx(l));let a=(i=t==null?void 0:t())!=null?i:[];for(let l of a){if(!l)continue;let u=Ku(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let f of c.children)a.some(p=>f.contains(p))||o.add(Fx(f));c=c.parentElement}}return o.dispose},[r,t,n])}function j4(e,t,n){let r=xo(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});E.useEffect(()=>{if(!e)return;let s=t===null?null:ho(t)?t:t.current;if(!s)return;let i=Ss();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let rf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),I4=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ls=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ls||{}),Sg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Sg||{}),D4=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(D4||{});function N4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(rf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function L4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(I4)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var BC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(BC||{});function $4(e,t=0){var n;return e===((n=Ku(e))==null?void 0:n.body)?!1:_s(t,{0(){return e.matches(rf)},1(){let r=e;for(;r!==null;){if(r.matches(rf))return!0;r=r.parentElement}return!1}})}var M4=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(M4||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function hs(e){e==null||e.focus({preventScroll:!0})}let F4=["textarea","input"].join(",");function B4(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,F4))!=null?n:!1}function U4(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Wl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?bg(e[0]):document:bg(e),o=Array.isArray(e)?n?U4(e):e:t&64?L4(e):N4(e);s.length>0&&o.length>1&&(o=o.filter(m=>!s.some(_=>_!=null&&"current"in _?(_==null?void 0:_.current)===m:_===m))),r=r??(i==null?void 0:i.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,p;do{if(c>=f||c+f<=0)return 0;let m=l+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=o[m],p==null||p.focus(u),c+=a}while(p!==TC(p));return t&6&&B4(p)&&p.select(),2}function UC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function z4(){return/Android/gi.test(window.navigator.userAgent)}function Ux(){return UC()||z4()}function Gc(e,t,n,r){let s=xo(n);E.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function zC(e,t,n,r){let s=xo(n);E.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const zx=30;function V4(e,t,n){let r=xo(n),s=E.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(t);for(let f of c)if(f!==null&&(f.contains(u)||a.composed&&a.composedPath().includes(f)))return;return!$4(u,BC.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),i=E.useRef(null);Gc(e,"pointerdown",a=>{var l,u;Ux()||(i.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),Gc(e,"pointerup",a=>{if(Ux()||!i.current)return;let l=i.current;return i.current=null,s(a,()=>l)},!0);let o=E.useRef({x:0,y:0});Gc(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),Gc(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=zx||Math.abs(l.y-o.current.y)>=zx))return s(a,()=>ti(a.target)?a.target:null)},!0),zC(e,"blur",a=>s(a,()=>r4(window.document.activeElement)?window.document.activeElement:null),!0)}function Tv(...e){return E.useMemo(()=>Ku(...e),[...e])}function VC(e,t,n,r){let s=xo(n);E.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function K4(e){return E.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function W4(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function H4(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function q4(){return UC()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Ss();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(ti(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);ti(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),ti(l.target)&&n4(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(ti(a.target)){if(s4(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function G4(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Vx(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Hi=W4(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ss(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Vx(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Vx(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[q4(),H4(),G4()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Hi.subscribe(()=>{let e=Hi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Hi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Hi.dispatch("TEARDOWN",n)}});function Q4(e,t,n=()=>({containers:[]})){let r=K4(Hi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return Nn(()=>{if(!(!t||!e))return Hi.dispatch("PUSH",t,n),()=>Hi.dispatch("POP",t,n)},[e,t]),i}function Y4(e,t,n=()=>[document.body]){let r=qu(e,"scroll-lock");Q4(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function J4(e=0){let[t,n]=E.useState(e),r=E.useCallback(l=>n(l),[]),s=E.useCallback(l=>n(u=>u|l),[]),i=E.useCallback(l=>(t&l)===l,[t]),o=E.useCallback(l=>n(u=>u&~l),[]),a=E.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var Z4={},Kx,Wx;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Kx=process==null?void 0:Z4)==null?void 0:Kx.NODE_ENV)==="test"&&typeof((Wx=Element==null?void 0:Element.prototype)==null?void 0:Wx.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var X4=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(X4||{});function eB(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function tB(e,t,n,r){let[s,i]=E.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=J4(e&&s?3:0),u=E.useRef(!1),c=E.useRef(!1),f=Bf();return Nn(()=>{var p;if(e){if(n&&i(!0),!t){n&&a(3);return}return(p=r==null?void 0:r.start)==null||p.call(r,n),nB(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;c.current&&iB(t)||(u.current=!1,l(7),n||i(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function nB(e,{prepare:t,run:n,done:r,inFlight:s}){let i=Ss();return sB(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(rB(e,r))})}),i.dispose}function rB(e,t){var n,r;let s=Ss();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||t()}),s.dispose)}function sB(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function iB(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Pv(e,t){let n=E.useRef([]),r=ft(e);E.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let a=r(t,s);return n.current=t,a}},[r,...t])}let Uf=E.createContext(null);Uf.displayName="OpenClosedContext";var Cr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Cr||{});function zf(){return E.useContext(Uf)}function oB({value:e,children:t}){return ze.createElement(Uf.Provider,{value:e},t)}function aB({children:e}){return ze.createElement(Uf.Provider,{value:null},e)}function lB(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vs=[];lB(()=>{function e(t){if(!ti(t.target)||t.target===document.body||Vs[0]===t.target)return;let n=t.target;n=n.closest(rf),Vs.unshift(n??t.target),Vs=Vs.filter(r=>r!=null&&r.isConnected),Vs.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function KC(e){let t=ft(e),n=E.useRef(!1);E.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ff(()=>{n.current&&t()})}),[t])}let WC=E.createContext(!1);function uB(){return E.useContext(WC)}function Hx(e){return ze.createElement(WC.Provider,{value:e.force},e.children)}function cB(e){let t=uB(),n=E.useContext(qC),[r,s]=E.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Qr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return E.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),E.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let HC=E.Fragment,dB=Ln(function(e,t){let{ownerDocument:n=null,...r}=e,s=E.useRef(null),i=Yr(i4(p=>{s.current=p}),t),o=Tv(s.current),a=n??o,l=cB(a),u=E.useContext(Eg),c=Bf(),f=hr();return KC(()=>{var p;l&&l.childNodes.length<=0&&((p=l.parentElement)==null||p.removeChild(l))}),l?_y.createPortal(ze.createElement("div",{"data-headlessui-portal":"",ref:p=>{c.dispose(),u&&p&&c.add(u.register(p))}},f({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:HC,name:"Portal"})),l):null});function fB(e,t){let n=Yr(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=hr();return r?ze.createElement(dB,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:HC,name:"Portal"})}let hB=E.Fragment,qC=E.createContext(null);function pB(e,t){let{target:n,...r}=e,s={ref:Yr(t)},i=hr();return ze.createElement(qC.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:hB,name:"Popover.Group"}))}let Eg=E.createContext(null);function mB(){let e=E.useContext(Eg),t=E.useRef([]),n=ft(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ft(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=E.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,E.useMemo(()=>function({children:i}){return ze.createElement(Eg.Provider,{value:s},i)},[s])]}let gB=Ln(fB),GC=Ln(pB),yB=Object.assign(gB,{Group:GC});function vB(e,t=typeof document<"u"?document.defaultView:null,n){let r=qu(e,"escape");VC(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===RC.Escape&&n(s))})}function wB(){var e;let[t]=E.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=E.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Nn(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function bB({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ft(()=>{var s,i;let o=Ku(n),a=[];for(let l of e)l!==null&&(di(l)?a.push(l):"current"in l&&di(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(s=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&di(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:ft(s=>r().some(i=>i.contains(s)))}}let QC=E.createContext(null);function qx({children:e,node:t}){let[n,r]=E.useState(null),s=YC(t??n);return ze.createElement(QC.Provider,{value:s},e,s===null&&ze.createElement(_g,{features:nf.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=Ku(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&di(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function YC(e=null){var t;return(t=E.useContext(QC))!=null?t:e}function xB(){let e=typeof document>"u";return"useSyncExternalStore"in p0?(t=>t.useSyncExternalStore)(p0)(()=>()=>{},()=>!1,()=>!e):!1}function Vf(){let e=xB(),[t,n]=E.useState(Qr.isHandoffComplete);return t&&Qr.isHandoffComplete===!1&&n(!1),E.useEffect(()=>{t!==!0&&n(!0)},[t]),E.useEffect(()=>Qr.handoff(),[]),e?!1:t}function Av(){let e=E.useRef(!1);return Nn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var El=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(El||{});function _B(){let e=E.useRef(0);return zC(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function JC(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)di(n.current)&&t.add(n.current);return t}let kB="div";var Mi=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Mi||{});function SB(e,t){let n=E.useRef(null),r=Yr(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...l}=e;Vf()||(a=0);let u=Tv(n.current);PB(a,{ownerDocument:u});let c=AB(a,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:i});OB(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let f=_B(),p=ft(y=>{if(!ho(n.current))return;let b=n.current;(C=>C())(()=>{_s(f.current,{[El.Forwards]:()=>{Wl(b,ls.First,{skipElements:[y.relatedTarget,i]})},[El.Backwards]:()=>{Wl(b,ls.Last,{skipElements:[y.relatedTarget,i]})}})})}),m=qu(!!(a&2),"focus-trap#tab-lock"),_=Bf(),v=E.useRef(!1),x={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,_.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){if(!(a&4))return;let b=JC(o);ho(n.current)&&b.add(n.current);let C=y.relatedTarget;ti(C)&&C.dataset.headlessuiFocusGuard!=="true"&&(ZC(b,C)||(v.current?Wl(n.current,_s(f.current,{[El.Forwards]:()=>ls.Next,[El.Backwards]:()=>ls.Previous})|ls.WrapAround,{relativeTo:y.target}):ti(y.target)&&hs(y.target)))}},g=hr();return ze.createElement(ze.Fragment,null,m&&ze.createElement(_g,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:nf.Focusable}),g({ourProps:x,theirProps:l,defaultTag:kB,name:"FocusTrap"}),m&&ze.createElement(_g,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:nf.Focusable}))}let EB=Ln(SB),CB=Object.assign(EB,{features:Mi});function TB(e=!0){let t=E.useRef(Vs.slice());return Pv(([n],[r])=>{r===!0&&n===!1&&Ff(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Vs.slice())},[e,Vs,t]),ft(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function PB(e,{ownerDocument:t}){let n=!!(e&8),r=TB(n);Pv(()=>{n||W5(t==null?void 0:t.body)&&hs(r())},[n]),KC(()=>{n&&hs(r())})}function AB(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=E.useRef(null),o=qu(!!(e&1),"focus-trap#initial-focus"),a=Av();return Pv(()=>{if(e===0)return;if(!o){s!=null&&s.current&&hs(s.current);return}let l=n.current;l&&Ff(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){i.current=u;return}}else if(l.contains(u)){i.current=u;return}if(r!=null&&r.current)hs(r.current);else{if(e&16){if(Wl(l,ls.First|ls.AutoFocus)!==Sg.Error)return}else if(Wl(l,ls.First)!==Sg.Error)return;if(s!=null&&s.current&&(hs(s.current),(t==null?void 0:t.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[s,o,e]),i}function OB(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=Av(),o=!!(e&4);VC(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!i.current)return;let l=JC(r);ho(n.current)&&l.add(n.current);let u=s.current;if(!u)return;let c=a.target;ho(c)?ZC(l,c)?(s.current=c,hs(c)):(a.preventDefault(),a.stopPropagation(),hs(u)):hs(s.current)},!0)}function ZC(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function XC(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Vl((t=e.as)!=null?t:tT)||ze.Children.count(e.children)===1}let Kf=E.createContext(null);Kf.displayName="TransitionContext";var RB=(e=>(e.Visible="visible",e.Hidden="hidden",e))(RB||{});function jB(){let e=E.useContext(Kf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function IB(){let e=E.useContext(Wf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Wf=E.createContext(null);Wf.displayName="NestingContext";function Hf(e){return"children"in e?Hf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function eT(e,t){let n=xo(e),r=E.useRef([]),s=Av(),i=Bf(),o=ft((m,_=ei.Hidden)=>{let v=r.current.findIndex(({el:x})=>x===m);v!==-1&&(_s(_,{[ei.Unmount](){r.current.splice(v,1)},[ei.Hidden](){r.current[v].state="hidden"}}),i.microTask(()=>{var x;!Hf(r)&&s.current&&((x=n.current)==null||x.call(n))}))}),a=ft(m=>{let _=r.current.find(({el:v})=>v===m);return _?_.state!=="visible"&&(_.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,ei.Unmount)}),l=E.useRef([]),u=E.useRef(Promise.resolve()),c=E.useRef({enter:[],leave:[]}),f=ft((m,_,v)=>{l.current.splice(0),t&&(t.chains.current[_]=t.chains.current[_].filter(([x])=>x!==m)),t==null||t.chains.current[_].push([m,new Promise(x=>{l.current.push(x)})]),t==null||t.chains.current[_].push([m,new Promise(x=>{Promise.all(c.current[_].map(([g,y])=>y)).then(()=>x())})]),_==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(_)):v(_)}),p=ft((m,_,v)=>{Promise.all(c.current[_].splice(0).map(([x,g])=>g)).then(()=>{var x;(x=l.current.shift())==null||x()}).then(()=>v(_))});return E.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:p,wait:u,chains:c}),[a,o,r,f,p,c,u])}let tT=E.Fragment,nT=tf.RenderStrategy;function DB(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:f,entered:p,leave:m,leaveFrom:_,leaveTo:v,...x}=e,[g,y]=E.useState(null),b=E.useRef(null),C=XC(e),R=Yr(...C?[b,t,y]:t===null?[]:[t]),I=(n=x.unmount)==null||n?ei.Unmount:ei.Hidden,{show:j,appear:L,initial:F}=jB(),[z,me]=E.useState(j?"visible":"hidden"),$=IB(),{register:re,unregister:A}=$;Nn(()=>re(b),[re,b]),Nn(()=>{if(I===ei.Hidden&&b.current){if(j&&z!=="visible"){me("visible");return}return _s(z,{hidden:()=>A(b),visible:()=>re(b)})}},[z,b,re,A,j,I]);let G=Vf();Nn(()=>{if(C&&G&&z==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,z,G,C]);let be=F&&!L,le=L&&j&&F,ce=E.useRef(!1),se=eT(()=>{ce.current||(me("hidden"),A(b))},$),ye=ft($e=>{ce.current=!0;let Re=$e?"enter":"leave";se.onStart(b,Re,pe=>{pe==="enter"?i==null||i():pe==="leave"&&(a==null||a())})}),J=ft($e=>{let Re=$e?"enter":"leave";ce.current=!1,se.onStop(b,Re,pe=>{pe==="enter"?o==null||o():pe==="leave"&&(l==null||l())}),Re==="leave"&&!Hf(se)&&(me("hidden"),A(b))});E.useEffect(()=>{C&&s||(ye(j),J(j))},[j,C,s]);let Z=!(!s||!C||!G||be),[,K]=tB(Z,g,j,{start:ye,end:J}),de=Ni({ref:R,className:((r=xg(x.className,le&&u,le&&c,K.enter&&u,K.enter&&K.closed&&c,K.enter&&!K.closed&&f,K.leave&&m,K.leave&&!K.closed&&_,K.leave&&K.closed&&v,!K.transition&&j&&p))==null?void 0:r.trim())||void 0,...eB(K)}),oe=0;z==="visible"&&(oe|=Cr.Open),z==="hidden"&&(oe|=Cr.Closed),j&&z==="hidden"&&(oe|=Cr.Opening),!j&&z==="visible"&&(oe|=Cr.Closing);let _e=hr();return ze.createElement(Wf.Provider,{value:se},ze.createElement(oB,{value:oe},_e({ourProps:de,theirProps:x,defaultTag:tT,features:nT,visible:z==="visible",name:"Transition.Child"})))}function NB(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=E.useRef(null),a=XC(e),l=Yr(...a?[o,t]:t===null?[]:[t]);Vf();let u=zf();if(n===void 0&&u!==null&&(n=(u&Cr.Open)===Cr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,f]=E.useState(n?"visible":"hidden"),p=eT(()=>{n||f("hidden")}),[m,_]=E.useState(!0),v=E.useRef([n]);Nn(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),_(!1))},[v,n]);let x=E.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Nn(()=>{n?f("visible"):!Hf(p)&&o.current!==null&&f("hidden")},[n,p]);let g={unmount:s},y=ft(()=>{var R;m&&_(!1),(R=e.beforeEnter)==null||R.call(e)}),b=ft(()=>{var R;m&&_(!1),(R=e.beforeLeave)==null||R.call(e)}),C=hr();return ze.createElement(Wf.Provider,{value:p},ze.createElement(Kf.Provider,{value:x},C({ourProps:{...g,as:E.Fragment,children:ze.createElement(rT,{ref:l,...g,...i,beforeEnter:y,beforeLeave:b})},theirProps:{},defaultTag:E.Fragment,features:nT,visible:c==="visible",name:"Transition"})))}function LB(e,t){let n=E.useContext(Kf)!==null,r=zf()!==null;return ze.createElement(ze.Fragment,null,!n&&r?ze.createElement(Cg,{ref:t,...e}):ze.createElement(rT,{ref:t,...e}))}let Cg=Ln(NB),rT=Ln(DB),Ov=Ln(LB),gd=Object.assign(Cg,{Child:Ov,Root:Cg});var $B=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))($B||{}),MB=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(MB||{});let FB={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Rv=E.createContext(null);Rv.displayName="DialogContext";function qf(e){let t=E.useContext(Rv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qf),n}return t}function BB(e,t){return _s(t.type,FB,e,t)}let Gx=Ln(function(e,t){let n=E.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...f}=e,p=E.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=zf();s===void 0&&m!==null&&(s=(m&Cr.Open)===Cr.Open);let _=E.useRef(null),v=Yr(_,t),x=Tv(_.current),g=s?0:1,[y,b]=E.useReducer(BB,{titleId:null,descriptionId:null,panelRef:E.createRef()}),C=ft(()=>i(!1)),R=ft(K=>b({type:0,id:K})),I=Vf()?g===0:!1,[j,L]=mB(),F={get current(){var K;return(K=y.panelRef.current)!=null?K:_.current}},z=YC(),{resolveContainers:me}=bB({mainTreeNode:z,portals:j,defaultContainers:[F]}),$=m!==null?(m&Cr.Closing)===Cr.Closing:!1;R4(u||$?!1:I,{allowed:ft(()=>{var K,de;return[(de=(K=_.current)==null?void 0:K.closest("[data-headlessui-portal]"))!=null?de:null]}),disallowed:ft(()=>{var K;return[(K=z==null?void 0:z.closest("body > *:not(#headlessui-portal-root)"))!=null?K:null]})});let re=LC.get(null);Nn(()=>{if(I)return re.actions.push(r),()=>re.actions.pop(r)},[re,r,I]);let A=FC(re,E.useCallback(K=>re.selectors.isTop(K,r),[re,r]));V4(A,me,K=>{K.preventDefault(),C()}),vB(A,x==null?void 0:x.defaultView,K=>{K.preventDefault(),K.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),Y4(u||$?!1:I,x,me),j4(I,_,C);let[G,be]=o4(),le=E.useMemo(()=>[{dialogState:g,close:C,setTitleId:R,unmount:c},y],[g,C,R,c,y]),ce=Wu({open:g===0}),se={ref:v,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:g===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":G,unmount:c},ye=!wB(),J=Mi.None;I&&!u&&(J|=Mi.RestoreFocus,J|=Mi.TabLock,l&&(J|=Mi.AutoFocus),ye&&(J|=Mi.InitialFocus));let Z=hr();return ze.createElement(aB,null,ze.createElement(Hx,{force:!0},ze.createElement(yB,null,ze.createElement(Rv.Provider,{value:le},ze.createElement(GC,{target:_},ze.createElement(Hx,{force:!1},ze.createElement(be,{slot:ce},ze.createElement(L,null,ze.createElement(CB,{initialFocus:o,initialFocusFallback:_,containers:me,features:J},ze.createElement(f4,{value:C},Z({ourProps:se,theirProps:f,slot:ce,defaultTag:UB,features:zB,visible:g===0,name:"Dialog"})))))))))))}),UB="div",zB=tf.RenderStrategy|tf.Static;function VB(e,t){let{transition:n=!1,open:r,...s}=e,i=zf(),o=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?ze.createElement(qx,null,ze.createElement(gd,{show:r,transition:n,unmount:s.unmount},ze.createElement(Gx,{ref:t,...s}))):ze.createElement(qx,null,ze.createElement(Gx,{ref:t,open:r,...s}))}let KB="div";function WB(e,t){let n=E.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:a},l]=qf("Dialog.Panel"),u=Yr(t,l.panelRef),c=Wu({open:o===0}),f=ft(x=>{x.stopPropagation()}),p={ref:u,id:r,onClick:f},m=s?Ov:E.Fragment,_=s?{unmount:a}:{},v=hr();return ze.createElement(m,{..._},v({ourProps:p,theirProps:i,slot:c,defaultTag:KB,name:"Dialog.Panel"}))}let HB="div";function qB(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=qf("Dialog.Backdrop"),o=Wu({open:s===0}),a={ref:t,"aria-hidden":!0},l=n?Ov:E.Fragment,u=n?{unmount:i}:{},c=hr();return ze.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:HB,name:"Dialog.Backdrop"}))}let GB="h2";function QB(e,t){let n=E.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=qf("Dialog.Title"),a=Yr(t);E.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Wu({open:i===0}),u={ref:a,id:r};return hr()({ourProps:u,theirProps:s,slot:l,defaultTag:GB,name:"Dialog.Title"})}let YB=Ln(VB),JB=Ln(WB);Ln(qB);let ZB=Ln(QB),Tp=Object.assign(YB,{Panel:JB,Title:ZB,Description:c4});const XB=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r})=>{const[s,i]=E.useState(r),o=l=>{i(l.target.value)},a=()=>{n(s),t()};return k.jsx(gd,{appear:!0,show:e,as:E.Fragment,children:k.jsxs(Tp,{as:"div",className:"relative z-10",onClose:t,children:[k.jsxs(gd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})," "]}),k.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:k.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:k.jsx(gd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:k.jsxs(Tp.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[k.jsx(Tp.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),k.jsxs("div",{className:"mt-2",children:[k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"iast",checked:s==="iast",onChange:o,className:"mr-2"}),"IAST"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:s==="tamil_superscripted",onChange:o,className:"mr-2"}),"Tamil"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:s==="malayalam",onChange:o,className:"mr-2"}),"Malayalam"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:s==="devanagari",onChange:o,className:"mr-2"}),"Devanagari"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"itrans",checked:s==="itrans",onChange:o,className:"mr-2"}),"ITrans"]}),k.jsx("br",{})]}),k.jsxs("div",{className:"mt-4",children:[k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Save"})]})]})})})})]})})},eU=()=>{const[e,t]=E.useState(navigator.onLine);E.useEffect(()=>{const f=()=>t(!0),p=()=>t(!1);return window.addEventListener("online",f),window.addEventListener("offline",p),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{console.log("Service Worker is active:",m.active)}),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[]);const{preferredLanguage:n,setPreferredLanguage:r}=bo(),[s,i]=E.useState(!1),o=()=>i(!s),[a,l]=E.useState(!1),u=()=>l(!0),c=()=>l(!1);return k.jsx(pI,{children:k.jsxs("div",{className:"app-layout",children:[" ",k.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:k.jsx(U5,{toggleDropdown:o,isDropdownOpen:s,openLanguageSettings:u})}),k.jsx(XB,{isOpen:a,onClose:c,onLanguageSave:r,currentLanguage:n}),k.jsx(wD,{children:k.jsxs(B5,{children:[k.jsx(M5,{}),k.jsx(m5,{})]})})]})})};function tU(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(f=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await Fa(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{i?i("/new-sankeertan/sw.js",f):s==null||s(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}tU();const nU=new VI({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),rU=Pp.createRoot(document.getElementById("root"));rU.render(k.jsx(ze.StrictMode,{children:k.jsx(KI,{client:nU,children:k.jsx(vO,{children:k.jsx(CS,{children:k.jsx(eU,{})})})})}));
