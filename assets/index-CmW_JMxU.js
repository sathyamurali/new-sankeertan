var RT=Object.defineProperty;var d0=e=>{throw TypeError(e)};var IT=(e,t,n)=>t in e?RT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var sl=(e,t,n)=>IT(e,typeof t!="symbol"?t+"":t,n),Ch=(e,t,n)=>t.has(e)||d0("Cannot "+n);var H=(e,t,n)=>(Ch(e,t,"read from private field"),n?n.call(e):t.get(e)),We=(e,t,n)=>t.has(e)?d0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),$e=(e,t,n,r)=>(Ch(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),it=(e,t,n)=>(Ch(e,t,"access private method"),n);var vc=(e,t,n,r)=>({set _(s){$e(e,t,s,n)},get _(){return H(e,t,r)}});function DT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var en=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var l_={exports:{}},af={},u_={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=Symbol.for("react.element"),LT=Symbol.for("react.portal"),$T=Symbol.for("react.fragment"),MT=Symbol.for("react.strict_mode"),FT=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),zT=Symbol.for("react.forward_ref"),VT=Symbol.for("react.suspense"),KT=Symbol.for("react.memo"),WT=Symbol.for("react.lazy"),f0=Symbol.iterator;function HT(e){return e===null||typeof e!="object"?null:(e=f0&&e[f0]||e["@@iterator"],typeof e=="function"?e:null)}var c_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d_=Object.assign,f_={};function Na(e,t,n){this.props=e,this.context=t,this.refs=f_,this.updater=n||c_}Na.prototype.isReactComponent={};Na.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Na.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h_(){}h_.prototype=Na.prototype;function Og(e,t,n){this.props=e,this.context=t,this.refs=f_,this.updater=n||c_}var Rg=Og.prototype=new h_;Rg.constructor=Og;d_(Rg,Na.prototype);Rg.isPureReactComponent=!0;var h0=Array.isArray,p_=Object.prototype.hasOwnProperty,Ig={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function g_(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)p_.call(t,r)&&!m_.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Pu,type:e,key:i,ref:o,props:s,_owner:Ig.current}}function qT(e,t){return{$$typeof:Pu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pu}function GT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var p0=/\/+/g;function Th(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GT(""+e.key):t.toString(36)}function Yc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pu:case LT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Th(o,0):r,h0(s)?(n="",e!=null&&(n=e.replace(p0,"$&/")+"/"),Yc(s,t,n,"",function(u){return u})):s!=null&&(Dg(s)&&(s=qT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(p0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",h0(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Th(i,a);o+=Yc(i,t,n,l,s)}else if(l=HT(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Th(i,a++),o+=Yc(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wc(e,t,n){if(e==null)return e;var r=[],s=0;return Yc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function QT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kn={current:null},Jc={transition:null},YT={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Jc,ReactCurrentOwner:Ig};function y_(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:wc,forEach:function(e,t,n){wc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wc(e,function(){t++}),t},toArray:function(e){return wc(e,function(t){return t})||[]},only:function(e){if(!Dg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=Na;rt.Fragment=$T;rt.Profiler=FT;rt.PureComponent=Og;rt.StrictMode=MT;rt.Suspense=VT;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT;rt.act=y_;rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=d_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ig.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)p_.call(t,l)&&!m_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pu,type:e.type,key:s,ref:i,props:r,_owner:o}};rt.createContext=function(e){return e={$$typeof:UT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:BT,_context:e},e.Consumer=e};rt.createElement=g_;rt.createFactory=function(e){var t=g_.bind(null,e);return t.type=e,t};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:zT,render:e}};rt.isValidElement=Dg;rt.lazy=function(e){return{$$typeof:WT,_payload:{_status:-1,_result:e},_init:QT}};rt.memo=function(e,t){return{$$typeof:KT,type:e,compare:t===void 0?null:t}};rt.startTransition=function(e){var t=Jc.transition;Jc.transition={};try{e()}finally{Jc.transition=t}};rt.unstable_act=y_;rt.useCallback=function(e,t){return kn.current.useCallback(e,t)};rt.useContext=function(e){return kn.current.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e){return kn.current.useDeferredValue(e)};rt.useEffect=function(e,t){return kn.current.useEffect(e,t)};rt.useId=function(){return kn.current.useId()};rt.useImperativeHandle=function(e,t,n){return kn.current.useImperativeHandle(e,t,n)};rt.useInsertionEffect=function(e,t){return kn.current.useInsertionEffect(e,t)};rt.useLayoutEffect=function(e,t){return kn.current.useLayoutEffect(e,t)};rt.useMemo=function(e,t){return kn.current.useMemo(e,t)};rt.useReducer=function(e,t,n){return kn.current.useReducer(e,t,n)};rt.useRef=function(e){return kn.current.useRef(e)};rt.useState=function(e){return kn.current.useState(e)};rt.useSyncExternalStore=function(e,t,n){return kn.current.useSyncExternalStore(e,t,n)};rt.useTransition=function(){return kn.current.useTransition()};rt.version="18.3.1";u_.exports=rt;var S=u_.exports;const Ve=of(S),m0=DT({__proto__:null,default:Ve},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=S,ZT=Symbol.for("react.element"),XT=Symbol.for("react.fragment"),eP=Object.prototype.hasOwnProperty,tP=JT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nP={key:!0,ref:!0,__self:!0,__source:!0};function v_(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)eP.call(t,r)&&!nP.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ZT,type:e,key:i,ref:o,props:s,_owner:tP.current}}af.Fragment=XT;af.jsx=v_;af.jsxs=v_;l_.exports=af;var k=l_.exports,Op={},w_={exports:{}},Gn={},b_={exports:{}},x_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ce,se){var ye=ce.length;ce.push(se);e:for(;0<ye;){var Z=ye-1>>>1,ee=ce[Z];if(0<s(ee,se))ce[Z]=se,ce[ye]=ee,ye=Z;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var se=ce[0],ye=ce.pop();if(ye!==se){ce[0]=ye;e:for(var Z=0,ee=ce.length,K=ee>>>1;Z<K;){var de=2*(Z+1)-1,le=ce[de],xe=de+1,Fe=ce[xe];if(0>s(le,ye))xe<ee&&0>s(Fe,le)?(ce[Z]=Fe,ce[xe]=ye,Z=xe):(ce[Z]=le,ce[de]=ye,Z=de);else if(xe<ee&&0>s(Fe,ye))ce[Z]=Fe,ce[xe]=ye,Z=xe;else break e}}return se}function s(ce,se){var ye=ce.sortIndex-se.sortIndex;return ye!==0?ye:ce.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,_=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ce){for(var se=n(u);se!==null;){if(se.callback===null)r(u);else if(se.startTime<=ce)r(u),se.sortIndex=se.expirationTime,t(l,se);else break;se=n(u)}}function C(ce){if(v=!1,b(ce),!_)if(n(l)!==null)_=!0,ve(O);else{var se=n(u);se!==null&&ae(C,se.startTime-ce)}}function O(ce,se){_=!1,v&&(v=!1,g($),$=-1),m=!0;var ye=p;try{for(b(se),f=n(l);f!==null&&(!(f.expirationTime>se)||ce&&!he());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var ee=Z(f.expirationTime<=se);se=e.unstable_now(),typeof ee=="function"?f.callback=ee:f===n(l)&&r(l),b(se)}else r(l);f=n(l)}if(f!==null)var K=!0;else{var de=n(u);de!==null&&ae(C,de.startTime-se),K=!1}return K}finally{f=null,p=ye,m=!1}}var I=!1,R=null,$=-1,F=5,z=-1;function he(){return!(e.unstable_now()-z<F)}function N(){if(R!==null){var ce=e.unstable_now();z=ce;var se=!0;try{se=R(!0,ce)}finally{se?J():(I=!1,R=null)}}else I=!1}var J;if(typeof y=="function")J=function(){y(N)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,G=T.port2;T.port1.onmessage=N,J=function(){G.postMessage(null)}}else J=function(){w(N,0)};function ve(ce){R=ce,I||(I=!0,J())}function ae(ce,se){$=w(function(){ce(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){_||m||(_=!0,ve(O))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ce){switch(p){case 1:case 2:case 3:var se=3;break;default:se=p}var ye=p;p=se;try{return ce()}finally{p=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,se){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ye=p;p=ce;try{return se()}finally{p=ye}},e.unstable_scheduleCallback=function(ce,se,ye){var Z=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Z+ye:Z):ye=Z,ce){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ye+ee,ce={id:c++,callback:se,priorityLevel:ce,startTime:ye,expirationTime:ee,sortIndex:-1},ye>Z?(ce.sortIndex=ye,t(u,ce),n(l)===null&&ce===n(u)&&(v?(g($),$=-1):v=!0,ae(C,ye-Z))):(ce.sortIndex=ee,t(l,ce),_||m||(_=!0,ve(O))),ce},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(ce){var se=p;return function(){var ye=p;p=se;try{return ce.apply(this,arguments)}finally{p=ye}}}})(x_);b_.exports=x_;var rP=b_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sP=S,Hn=rP;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var __=new Set,Ql={};function go(e,t){ka(e,t),ka(e+"Capture",t)}function ka(e,t){for(Ql[e]=t,e=0;e<t.length;e++)__.add(t[e])}var ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=Object.prototype.hasOwnProperty,iP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g0={},y0={};function oP(e){return Rp.call(y0,e)?!0:Rp.call(g0,e)?!1:iP.test(e)?y0[e]=!0:(g0[e]=!0,!1)}function aP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lP(e,t,n,r){if(t===null||typeof t>"u"||aP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sn(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new Sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new Sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new Sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new Sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new Sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new Sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new Sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new Sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new Sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ng=/[\-:]([a-z])/g;function Lg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ng,Lg);an[t]=new Sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ng,Lg);an[t]=new Sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ng,Lg);an[t]=new Sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new Sn(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new Sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function $g(e,t,n,r){var s=an.hasOwnProperty(t)?an[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lP(t,n,s,r)&&(n=null),r||s===null?oP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ss=sP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),k_=Symbol.for("react.provider"),S_=Symbol.for("react.context"),Fg=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Np=Symbol.for("react.suspense_list"),Bg=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),E_=Symbol.for("react.offscreen"),v0=Symbol.iterator;function il(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Ph;function wl(e){if(Ph===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ph=t&&t[1]||""}return`
`+Ph+e}var Ah=!1;function jh(e,t){if(!e||Ah)return"";Ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ah=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wl(e):""}function uP(e){switch(e.tag){case 5:return wl(e.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return e=jh(e.type,!1),e;case 11:return e=jh(e.type.render,!1),e;case 1:return e=jh(e.type,!0),e;default:return""}}function Lp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case Bo:return"Portal";case Ip:return"Profiler";case Mg:return"StrictMode";case Dp:return"Suspense";case Np:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S_:return(e.displayName||"Context")+".Consumer";case k_:return(e._context.displayName||"Context")+".Provider";case Fg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bg:return t=e.displayName||null,t!==null?t:Lp(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return Lp(e(t))}catch{}}return null}function cP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lp(t);case 8:return t===Mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dP(e){var t=C_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xc(e){e._valueTracker||(e._valueTracker=dP(e))}function T_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=C_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $p(e,t){var n=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function w0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P_(e,t){t=t.checked,t!=null&&$g(e,"checked",t,!1)}function Mp(e,t){P_(e,t);var n=fi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fp(e,t.type,fi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function b0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fp(e,t,n){(t!=="number"||vd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bl=Array.isArray;function ra(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function x0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Se(92));if(bl(n)){if(1<n.length)throw Error(Se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fi(n)}}function A_(e,t){var n=fi(t.value),r=fi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function j_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?j_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _c,O_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_c=_c||document.createElement("div"),_c.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_c.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fP=["Webkit","ms","Moz","O"];Object.keys(Al).forEach(function(e){fP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Al[t]=Al[e]})});function R_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Al.hasOwnProperty(e)&&Al[e]?(""+t).trim():t+"px"}function I_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var hP=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(e,t){if(t){if(hP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function Vp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=null;function Ug(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wp=null,sa=null,ia=null;function k0(e){if(e=Ou(e)){if(typeof Wp!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=ff(t),Wp(e.stateNode,e.type,t))}}function D_(e){sa?ia?ia.push(e):ia=[e]:sa=e}function N_(){if(sa){var e=sa,t=ia;if(ia=sa=null,k0(e),t)for(e=0;e<t.length;e++)k0(t[e])}}function L_(e,t){return e(t)}function $_(){}var Oh=!1;function M_(e,t,n){if(Oh)return e(t,n);Oh=!0;try{return L_(e,t,n)}finally{Oh=!1,(sa!==null||ia!==null)&&($_(),N_())}}function Jl(e,t){var n=e.stateNode;if(n===null)return null;var r=ff(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Se(231,t,typeof n));return n}var Hp=!1;if(ms)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{Hp=!1}function pP(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var jl=!1,wd=null,bd=!1,qp=null,mP={onError:function(e){jl=!0,wd=e}};function gP(e,t,n,r,s,i,o,a,l){jl=!1,wd=null,pP.apply(mP,arguments)}function yP(e,t,n,r,s,i,o,a,l){if(gP.apply(this,arguments),jl){if(jl){var u=wd;jl=!1,wd=null}else throw Error(Se(198));bd||(bd=!0,qp=u)}}function yo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function F_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S0(e){if(yo(e)!==e)throw Error(Se(188))}function vP(e){var t=e.alternate;if(!t){if(t=yo(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return S0(s),e;if(i===r)return S0(s),t;i=i.sibling}throw Error(Se(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?e:t}function B_(e){return e=vP(e),e!==null?U_(e):null}function U_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U_(e);if(t!==null)return t;e=e.sibling}return null}var z_=Hn.unstable_scheduleCallback,E0=Hn.unstable_cancelCallback,wP=Hn.unstable_shouldYield,bP=Hn.unstable_requestPaint,Nt=Hn.unstable_now,xP=Hn.unstable_getCurrentPriorityLevel,zg=Hn.unstable_ImmediatePriority,V_=Hn.unstable_UserBlockingPriority,xd=Hn.unstable_NormalPriority,_P=Hn.unstable_LowPriority,K_=Hn.unstable_IdlePriority,lf=null,qr=null;function kP(e){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(lf,e,void 0,(e.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:CP,SP=Math.log,EP=Math.LN2;function CP(e){return e>>>=0,e===0?32:31-(SP(e)/EP|0)|0}var kc=64,Sc=4194304;function xl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xl(a):(i&=o,i!==0&&(r=xl(i)))}else o=n&~s,o!==0?r=xl(o):i!==0&&(r=xl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-jr(t),s=1<<n,r|=e[n],t&=~s;return r}function TP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-jr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=TP(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Gp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W_(){var e=kc;return kc<<=1,!(kc&4194240)&&(kc=64),e}function Rh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Au(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jr(t),e[t]=n}function AP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-jr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Vg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-jr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var dt=0;function H_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var q_,Kg,G_,Q_,Y_,Qp=!1,Ec=[],ni=null,ri=null,si=null,Zl=new Map,Xl=new Map,Fs=[],jP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Zl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(t.pointerId)}}function al(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ou(t),t!==null&&Kg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function OP(e,t,n,r,s){switch(t){case"focusin":return ni=al(ni,e,t,n,r,s),!0;case"dragenter":return ri=al(ri,e,t,n,r,s),!0;case"mouseover":return si=al(si,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zl.set(i,al(Zl.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xl.set(i,al(Xl.get(i)||null,e,t,n,r,s)),!0}return!1}function J_(e){var t=Ui(e.target);if(t!==null){var n=yo(t);if(n!==null){if(t=n.tag,t===13){if(t=F_(n),t!==null){e.blockedOn=t,Y_(e.priority,function(){G_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Kp=r,n.target.dispatchEvent(r),Kp=null}else return t=Ou(n),t!==null&&Kg(t),e.blockedOn=n,!1;t.shift()}return!0}function T0(e,t,n){Zc(e)&&n.delete(t)}function RP(){Qp=!1,ni!==null&&Zc(ni)&&(ni=null),ri!==null&&Zc(ri)&&(ri=null),si!==null&&Zc(si)&&(si=null),Zl.forEach(T0),Xl.forEach(T0)}function ll(e,t){e.blockedOn===t&&(e.blockedOn=null,Qp||(Qp=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,RP)))}function eu(e){function t(s){return ll(s,e)}if(0<Ec.length){ll(Ec[0],e);for(var n=1;n<Ec.length;n++){var r=Ec[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ni!==null&&ll(ni,e),ri!==null&&ll(ri,e),si!==null&&ll(si,e),Zl.forEach(t),Xl.forEach(t),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)J_(n),n.blockedOn===null&&Fs.shift()}var oa=Ss.ReactCurrentBatchConfig,kd=!0;function IP(e,t,n,r){var s=dt,i=oa.transition;oa.transition=null;try{dt=1,Wg(e,t,n,r)}finally{dt=s,oa.transition=i}}function DP(e,t,n,r){var s=dt,i=oa.transition;oa.transition=null;try{dt=4,Wg(e,t,n,r)}finally{dt=s,oa.transition=i}}function Wg(e,t,n,r){if(kd){var s=Yp(e,t,n,r);if(s===null)zh(e,t,r,Sd,n),C0(e,r);else if(OP(s,e,t,n,r))r.stopPropagation();else if(C0(e,r),t&4&&-1<jP.indexOf(e)){for(;s!==null;){var i=Ou(s);if(i!==null&&q_(i),i=Yp(e,t,n,r),i===null&&zh(e,t,r,Sd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else zh(e,t,r,null,n)}}var Sd=null;function Yp(e,t,n,r){if(Sd=null,e=Ug(r),e=Ui(e),e!==null)if(t=yo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=F_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sd=e,null}function Z_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xP()){case zg:return 1;case V_:return 4;case xd:case _P:return 16;case K_:return 536870912;default:return 16}default:return 16}}var Zs=null,Hg=null,Xc=null;function X_(){if(Xc)return Xc;var e,t=Hg,n=t.length,r,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Xc=s.slice(e,1<r?1-r:void 0)}function ed(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cc(){return!0}function P0(){return!1}function Qn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cc:P0,this.isPropagationStopped=P0,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),t}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qg=Qn(La),ju=Ct({},La,{view:0,detail:0}),NP=Qn(ju),Ih,Dh,ul,uf=Ct({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ul&&(ul&&e.type==="mousemove"?(Ih=e.screenX-ul.screenX,Dh=e.screenY-ul.screenY):Dh=Ih=0,ul=e),Ih)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),A0=Qn(uf),LP=Ct({},uf,{dataTransfer:0}),$P=Qn(LP),MP=Ct({},ju,{relatedTarget:0}),Nh=Qn(MP),FP=Ct({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),BP=Qn(FP),UP=Ct({},La,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zP=Qn(UP),VP=Ct({},La,{data:0}),j0=Qn(VP),KP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HP[e])?!!t[e]:!1}function Gg(){return qP}var GP=Ct({},ju,{key:function(e){if(e.key){var t=KP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ed(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gg,charCode:function(e){return e.type==="keypress"?ed(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ed(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QP=Qn(GP),YP=Ct({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=Qn(YP),JP=Ct({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gg}),ZP=Qn(JP),XP=Ct({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),e2=Qn(XP),t2=Ct({},uf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),n2=Qn(t2),r2=[9,13,27,32],Qg=ms&&"CompositionEvent"in window,Ol=null;ms&&"documentMode"in document&&(Ol=document.documentMode);var s2=ms&&"TextEvent"in window&&!Ol,ek=ms&&(!Qg||Ol&&8<Ol&&11>=Ol),R0=" ",I0=!1;function tk(e,t){switch(e){case"keyup":return r2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zo=!1;function i2(e,t){switch(e){case"compositionend":return nk(t);case"keypress":return t.which!==32?null:(I0=!0,R0);case"textInput":return e=t.data,e===R0&&I0?null:e;default:return null}}function o2(e,t){if(zo)return e==="compositionend"||!Qg&&tk(e,t)?(e=X_(),Xc=Hg=Zs=null,zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ek&&t.locale!=="ko"?null:t.data;default:return null}}var a2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a2[e.type]:t==="textarea"}function rk(e,t,n,r){D_(r),t=Ed(t,"onChange"),0<t.length&&(n=new qg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rl=null,tu=null;function l2(e){pk(e,0)}function cf(e){var t=Wo(e);if(T_(t))return e}function u2(e,t){if(e==="change")return t}var sk=!1;if(ms){var Lh;if(ms){var $h="oninput"in document;if(!$h){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),$h=typeof N0.oninput=="function"}Lh=$h}else Lh=!1;sk=Lh&&(!document.documentMode||9<document.documentMode)}function L0(){Rl&&(Rl.detachEvent("onpropertychange",ik),tu=Rl=null)}function ik(e){if(e.propertyName==="value"&&cf(tu)){var t=[];rk(t,tu,e,Ug(e)),M_(l2,t)}}function c2(e,t,n){e==="focusin"?(L0(),Rl=t,tu=n,Rl.attachEvent("onpropertychange",ik)):e==="focusout"&&L0()}function d2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cf(tu)}function f2(e,t){if(e==="click")return cf(t)}function h2(e,t){if(e==="input"||e==="change")return cf(t)}function p2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rr=typeof Object.is=="function"?Object.is:p2;function nu(e,t){if(Rr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rp.call(t,s)||!Rr(e[s],t[s]))return!1}return!0}function $0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M0(e,t){var n=$0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$0(n)}}function ok(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ok(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ak(){for(var e=window,t=vd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vd(e.document)}return t}function Yg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function m2(e){var t=ak(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ok(n.ownerDocument.documentElement,n)){if(r!==null&&Yg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=M0(n,i);var o=M0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var g2=ms&&"documentMode"in document&&11>=document.documentMode,Vo=null,Jp=null,Il=null,Zp=!1;function F0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zp||Vo==null||Vo!==vd(r)||(r=Vo,"selectionStart"in r&&Yg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Il&&nu(Il,r)||(Il=r,r=Ed(Jp,"onSelect"),0<r.length&&(t=new qg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vo)))}function Tc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ko={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},Mh={},lk={};ms&&(lk=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function df(e){if(Mh[e])return Mh[e];if(!Ko[e])return e;var t=Ko[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lk)return Mh[e]=t[n];return e}var uk=df("animationend"),ck=df("animationiteration"),dk=df("animationstart"),fk=df("transitionend"),hk=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){hk.set(e,t),go(t,[e])}for(var Fh=0;Fh<B0.length;Fh++){var Bh=B0[Fh],y2=Bh.toLowerCase(),v2=Bh[0].toUpperCase()+Bh.slice(1);gi(y2,"on"+v2)}gi(uk,"onAnimationEnd");gi(ck,"onAnimationIteration");gi(dk,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(fk,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w2=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function U0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,yP(r,t,void 0,e),e.currentTarget=null}function pk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;U0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;U0(s,a,u),i=l}}}if(bd)throw e=qp,bd=!1,qp=null,e}function gt(e,t){var n=t[rm];n===void 0&&(n=t[rm]=new Set);var r=e+"__bubble";n.has(r)||(mk(t,e,2,!1),n.add(r))}function Uh(e,t,n){var r=0;t&&(r|=4),mk(n,e,r,t)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function ru(e){if(!e[Pc]){e[Pc]=!0,__.forEach(function(n){n!=="selectionchange"&&(w2.has(n)||Uh(n,!1,e),Uh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pc]||(t[Pc]=!0,Uh("selectionchange",!1,t))}}function mk(e,t,n,r){switch(Z_(t)){case 1:var s=IP;break;case 4:s=DP;break;default:s=Wg}n=s.bind(null,t,n,e),s=void 0,!Hp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function zh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ui(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}M_(function(){var u=i,c=Ug(n),f=[];e:{var p=hk.get(e);if(p!==void 0){var m=qg,_=e;switch(e){case"keypress":if(ed(n)===0)break e;case"keydown":case"keyup":m=QP;break;case"focusin":_="focus",m=Nh;break;case"focusout":_="blur",m=Nh;break;case"beforeblur":case"afterblur":m=Nh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$P;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ZP;break;case uk:case ck:case dk:m=BP;break;case fk:m=e2;break;case"scroll":m=NP;break;case"wheel":m=n2;break;case"copy":case"cut":case"paste":m=zP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O0}var v=(t&4)!==0,w=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,b;y!==null;){b=y;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,g!==null&&(C=Jl(y,g),C!=null&&v.push(su(y,C,b)))),w)break;y=y.return}0<v.length&&(p=new m(p,_,null,n,c),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Kp&&(_=n.relatedTarget||n.fromElement)&&(Ui(_)||_[gs]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Ui(_):null,_!==null&&(w=yo(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(v=A0,C="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=O0,C="onPointerLeave",g="onPointerEnter",y="pointer"),w=m==null?p:Wo(m),b=_==null?p:Wo(_),p=new v(C,y+"leave",m,n,c),p.target=w,p.relatedTarget=b,C=null,Ui(c)===u&&(v=new v(g,y+"enter",_,n,c),v.target=b,v.relatedTarget=w,C=v),w=C,m&&_)t:{for(v=m,g=_,y=0,b=v;b;b=jo(b))y++;for(b=0,C=g;C;C=jo(C))b++;for(;0<y-b;)v=jo(v),y--;for(;0<b-y;)g=jo(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=jo(v),g=jo(g)}v=null}else v=null;m!==null&&z0(f,p,m,v,!1),_!==null&&w!==null&&z0(f,w,_,v,!0)}}e:{if(p=u?Wo(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=u2;else if(D0(p))if(sk)O=h2;else{O=d2;var I=c2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=f2);if(O&&(O=O(e,u))){rk(f,O,n,c);break e}I&&I(e,p,u),e==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Fp(p,"number",p.value)}switch(I=u?Wo(u):window,e){case"focusin":(D0(I)||I.contentEditable==="true")&&(Vo=I,Jp=u,Il=null);break;case"focusout":Il=Jp=Vo=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,F0(f,n,c);break;case"selectionchange":if(g2)break;case"keydown":case"keyup":F0(f,n,c)}var R;if(Qg)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else zo?tk(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(ek&&n.locale!=="ko"&&(zo||$!=="onCompositionStart"?$==="onCompositionEnd"&&zo&&(R=X_()):(Zs=c,Hg="value"in Zs?Zs.value:Zs.textContent,zo=!0)),I=Ed(u,$),0<I.length&&($=new j0($,e,null,n,c),f.push({event:$,listeners:I}),R?$.data=R:(R=nk(n),R!==null&&($.data=R)))),(R=s2?i2(e,n):o2(e,n))&&(u=Ed(u,"onBeforeInput"),0<u.length&&(c=new j0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=R))}pk(f,t)})}function su(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ed(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Jl(e,n),i!=null&&r.unshift(su(e,i,s)),i=Jl(e,t),i!=null&&r.push(su(e,i,s))),e=e.return}return r}function jo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function z0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Jl(n,i),l!=null&&o.unshift(su(n,l,a))):s||(l=Jl(n,i),l!=null&&o.push(su(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var b2=/\r\n?/g,x2=/\u0000|\uFFFD/g;function V0(e){return(typeof e=="string"?e:""+e).replace(b2,`
`).replace(x2,"")}function Ac(e,t,n){if(t=V0(t),V0(e)!==t&&n)throw Error(Se(425))}function Cd(){}var Xp=null,em=null;function tm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,_2=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,k2=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(e){return K0.resolve(null).then(e).catch(S2)}:nm;function S2(e){setTimeout(function(){throw e})}function Vh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),eu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);eu(t)}function ii(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function W0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Wr="__reactFiber$"+$a,iu="__reactProps$"+$a,gs="__reactContainer$"+$a,rm="__reactEvents$"+$a,E2="__reactListeners$"+$a,C2="__reactHandles$"+$a;function Ui(e){var t=e[Wr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gs]||n[Wr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=W0(e);e!==null;){if(n=e[Wr])return n;e=W0(e)}return t}e=n,n=e.parentNode}return null}function Ou(e){return e=e[Wr]||e[gs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function ff(e){return e[iu]||null}var sm=[],Ho=-1;function yi(e){return{current:e}}function yt(e){0>Ho||(e.current=sm[Ho],sm[Ho]=null,Ho--)}function mt(e,t){Ho++,sm[Ho]=e.current,e.current=t}var hi={},gn=yi(hi),Dn=yi(!1),lo=hi;function Sa(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(e){return e=e.childContextTypes,e!=null}function Td(){yt(Dn),yt(gn)}function H0(e,t,n){if(gn.current!==hi)throw Error(Se(168));mt(gn,t),mt(Dn,n)}function gk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Se(108,cP(e)||"Unknown",s));return Ct({},n,r)}function Pd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,lo=gn.current,mt(gn,e),mt(Dn,Dn.current),!0}function q0(e,t,n){var r=e.stateNode;if(!r)throw Error(Se(169));n?(e=gk(e,t,lo),r.__reactInternalMemoizedMergedChildContext=e,yt(Dn),yt(gn),mt(gn,e)):yt(Dn),mt(Dn,n)}var os=null,hf=!1,Kh=!1;function yk(e){os===null?os=[e]:os.push(e)}function T2(e){hf=!0,yk(e)}function vi(){if(!Kh&&os!==null){Kh=!0;var e=0,t=dt;try{var n=os;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}os=null,hf=!1}catch(s){throw os!==null&&(os=os.slice(e+1)),z_(zg,vi),s}finally{dt=t,Kh=!1}}return null}var qo=[],Go=0,Ad=null,jd=0,ar=[],lr=0,uo=null,cs=1,ds="";function Ii(e,t){qo[Go++]=jd,qo[Go++]=Ad,Ad=e,jd=t}function vk(e,t,n){ar[lr++]=cs,ar[lr++]=ds,ar[lr++]=uo,uo=e;var r=cs;e=ds;var s=32-jr(r)-1;r&=~(1<<s),n+=1;var i=32-jr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cs=1<<32-jr(t)+s|n<<s|r,ds=i+e}else cs=1<<i|n<<s|r,ds=e}function Jg(e){e.return!==null&&(Ii(e,1),vk(e,1,0))}function Zg(e){for(;e===Ad;)Ad=qo[--Go],qo[Go]=null,jd=qo[--Go],qo[Go]=null;for(;e===uo;)uo=ar[--lr],ar[lr]=null,ds=ar[--lr],ar[lr]=null,cs=ar[--lr],ar[lr]=null}var Wn=null,Kn=null,wt=!1,Pr=null;function wk(e,t){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function G0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wn=e,Kn=ii(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wn=e,Kn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=uo!==null?{id:cs,overflow:ds}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wn=e,Kn=null,!0):!1;default:return!1}}function im(e){return(e.mode&1)!==0&&(e.flags&128)===0}function om(e){if(wt){var t=Kn;if(t){var n=t;if(!G0(e,t)){if(im(e))throw Error(Se(418));t=ii(n.nextSibling);var r=Wn;t&&G0(e,t)?wk(r,n):(e.flags=e.flags&-4097|2,wt=!1,Wn=e)}}else{if(im(e))throw Error(Se(418));e.flags=e.flags&-4097|2,wt=!1,Wn=e}}}function Q0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wn=e}function jc(e){if(e!==Wn)return!1;if(!wt)return Q0(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tm(e.type,e.memoizedProps)),t&&(t=Kn)){if(im(e))throw bk(),Error(Se(418));for(;t;)wk(e,t),t=ii(t.nextSibling)}if(Q0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kn=ii(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kn=null}}else Kn=Wn?ii(e.stateNode.nextSibling):null;return!0}function bk(){for(var e=Kn;e;)e=ii(e.nextSibling)}function Ea(){Kn=Wn=null,wt=!1}function Xg(e){Pr===null?Pr=[e]:Pr.push(e)}var P2=Ss.ReactCurrentBatchConfig;function cl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,e))}return e}function Oc(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y0(e){var t=e._init;return t(e._payload)}function xk(e){function t(g,y){if(e){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=ui(g,y),g.index=0,g.sibling=null,g}function i(g,y,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,b,C){return y===null||y.tag!==6?(y=Jh(b,g.mode,C),y.return=g,y):(y=s(y,b),y.return=g,y)}function l(g,y,b,C){var O=b.type;return O===Uo?c(g,y,b.props.children,C,b.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$s&&Y0(O)===y.type)?(C=s(y,b.props),C.ref=cl(g,y,b),C.return=g,C):(C=ad(b.type,b.key,b.props,null,g.mode,C),C.ref=cl(g,y,b),C.return=g,C)}function u(g,y,b,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Zh(b,g.mode,C),y.return=g,y):(y=s(y,b.children||[]),y.return=g,y)}function c(g,y,b,C,O){return y===null||y.tag!==7?(y=io(b,g.mode,C,O),y.return=g,y):(y=s(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jh(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bc:return b=ad(y.type,y.key,y.props,null,g.mode,b),b.ref=cl(g,null,y),b.return=g,b;case Bo:return y=Zh(y,g.mode,b),y.return=g,y;case $s:var C=y._init;return f(g,C(y._payload),b)}if(bl(y)||il(y))return y=io(y,g.mode,b,null),y.return=g,y;Oc(g,y)}return null}function p(g,y,b,C){var O=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return O!==null?null:a(g,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bc:return b.key===O?l(g,y,b,C):null;case Bo:return b.key===O?u(g,y,b,C):null;case $s:return O=b._init,p(g,y,O(b._payload),C)}if(bl(b)||il(b))return O!==null?null:c(g,y,b,C,null);Oc(g,b)}return null}function m(g,y,b,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(b)||null,a(y,g,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bc:return g=g.get(C.key===null?b:C.key)||null,l(y,g,C,O);case Bo:return g=g.get(C.key===null?b:C.key)||null,u(y,g,C,O);case $s:var I=C._init;return m(g,y,b,I(C._payload),O)}if(bl(C)||il(C))return g=g.get(b)||null,c(y,g,C,O,null);Oc(y,C)}return null}function _(g,y,b,C){for(var O=null,I=null,R=y,$=y=0,F=null;R!==null&&$<b.length;$++){R.index>$?(F=R,R=null):F=R.sibling;var z=p(g,R,b[$],C);if(z===null){R===null&&(R=F);break}e&&R&&z.alternate===null&&t(g,R),y=i(z,y,$),I===null?O=z:I.sibling=z,I=z,R=F}if($===b.length)return n(g,R),wt&&Ii(g,$),O;if(R===null){for(;$<b.length;$++)R=f(g,b[$],C),R!==null&&(y=i(R,y,$),I===null?O=R:I.sibling=R,I=R);return wt&&Ii(g,$),O}for(R=r(g,R);$<b.length;$++)F=m(R,g,$,b[$],C),F!==null&&(e&&F.alternate!==null&&R.delete(F.key===null?$:F.key),y=i(F,y,$),I===null?O=F:I.sibling=F,I=F);return e&&R.forEach(function(he){return t(g,he)}),wt&&Ii(g,$),O}function v(g,y,b,C){var O=il(b);if(typeof O!="function")throw Error(Se(150));if(b=O.call(b),b==null)throw Error(Se(151));for(var I=O=null,R=y,$=y=0,F=null,z=b.next();R!==null&&!z.done;$++,z=b.next()){R.index>$?(F=R,R=null):F=R.sibling;var he=p(g,R,z.value,C);if(he===null){R===null&&(R=F);break}e&&R&&he.alternate===null&&t(g,R),y=i(he,y,$),I===null?O=he:I.sibling=he,I=he,R=F}if(z.done)return n(g,R),wt&&Ii(g,$),O;if(R===null){for(;!z.done;$++,z=b.next())z=f(g,z.value,C),z!==null&&(y=i(z,y,$),I===null?O=z:I.sibling=z,I=z);return wt&&Ii(g,$),O}for(R=r(g,R);!z.done;$++,z=b.next())z=m(R,g,$,z.value,C),z!==null&&(e&&z.alternate!==null&&R.delete(z.key===null?$:z.key),y=i(z,y,$),I===null?O=z:I.sibling=z,I=z);return e&&R.forEach(function(N){return t(g,N)}),wt&&Ii(g,$),O}function w(g,y,b,C){if(typeof b=="object"&&b!==null&&b.type===Uo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bc:e:{for(var O=b.key,I=y;I!==null;){if(I.key===O){if(O=b.type,O===Uo){if(I.tag===7){n(g,I.sibling),y=s(I,b.props.children),y.return=g,g=y;break e}}else if(I.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$s&&Y0(O)===I.type){n(g,I.sibling),y=s(I,b.props),y.ref=cl(g,I,b),y.return=g,g=y;break e}n(g,I);break}else t(g,I);I=I.sibling}b.type===Uo?(y=io(b.props.children,g.mode,C,b.key),y.return=g,g=y):(C=ad(b.type,b.key,b.props,null,g.mode,C),C.ref=cl(g,y,b),C.return=g,g=C)}return o(g);case Bo:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=s(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Zh(b,g.mode,C),y.return=g,g=y}return o(g);case $s:return I=b._init,w(g,y,I(b._payload),C)}if(bl(b))return _(g,y,b,C);if(il(b))return v(g,y,b,C);Oc(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,b),y.return=g,g=y):(n(g,y),y=Jh(b,g.mode,C),y.return=g,g=y),o(g)):n(g,y)}return w}var Ca=xk(!0),_k=xk(!1),Od=yi(null),Rd=null,Qo=null,ey=null;function ty(){ey=Qo=Rd=null}function ny(e){var t=Od.current;yt(Od),e._currentValue=t}function am(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function aa(e,t){Rd=e,ey=Qo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rn=!0),e.firstContext=null)}function pr(e){var t=e._currentValue;if(ey!==e)if(e={context:e,memoizedValue:t,next:null},Qo===null){if(Rd===null)throw Error(Se(308));Qo=e,Rd.dependencies={lanes:0,firstContext:e}}else Qo=Qo.next=e;return t}var zi=null;function ry(e){zi===null?zi=[e]:zi.push(e)}function kk(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ry(t)):(n.next=s.next,s.next=n),t.interleaved=n,ys(e,r)}function ys(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function sy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ys(e,n)}return s=r.interleaved,s===null?(t.next=t,ry(r)):(t.next=s.next,s.next=t),r.interleaved=t,ys(e,n)}function td(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vg(e,n)}}function J0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Id(e,t,n,r){var s=e.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=e,v=a;switch(p=t,m=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){f=_.call(m,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,p=typeof _=="function"?_.call(m,f,p):_,p==null)break e;f=Ct({},f,p);break e;case 2:Ms=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);fo|=o,e.lanes=o,e.memoizedState=f}}function Z0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Se(191,s));s.call(r)}}}var Ru={},Gr=yi(Ru),ou=yi(Ru),au=yi(Ru);function Vi(e){if(e===Ru)throw Error(Se(174));return e}function iy(e,t){switch(mt(au,t),mt(ou,e),mt(Gr,Ru),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Up(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Up(t,e)}yt(Gr),mt(Gr,t)}function Ta(){yt(Gr),yt(ou),yt(au)}function Ek(e){Vi(au.current);var t=Vi(Gr.current),n=Up(t,e.type);t!==n&&(mt(ou,e),mt(Gr,n))}function oy(e){ou.current===e&&(yt(Gr),yt(ou))}var _t=yi(0);function Dd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wh=[];function ay(){for(var e=0;e<Wh.length;e++)Wh[e]._workInProgressVersionPrimary=null;Wh.length=0}var nd=Ss.ReactCurrentDispatcher,Hh=Ss.ReactCurrentBatchConfig,co=0,Et=null,Kt=null,Xt=null,Nd=!1,Dl=!1,lu=0,A2=0;function dn(){throw Error(Se(321))}function ly(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rr(e[n],t[n]))return!1;return!0}function uy(e,t,n,r,s,i){if(co=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nd.current=e===null||e.memoizedState===null?I2:D2,e=n(r,s),Dl){i=0;do{if(Dl=!1,lu=0,25<=i)throw Error(Se(301));i+=1,Xt=Kt=null,t.updateQueue=null,nd.current=N2,e=n(r,s)}while(Dl)}if(nd.current=Ld,t=Kt!==null&&Kt.next!==null,co=0,Xt=Kt=Et=null,Nd=!1,t)throw Error(Se(300));return e}function cy(){var e=lu!==0;return lu=0,e}function Br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Et.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function mr(){if(Kt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var t=Xt===null?Et.memoizedState:Xt.next;if(t!==null)Xt=t,Kt=e;else{if(e===null)throw Error(Se(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Xt===null?Et.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function uu(e,t){return typeof t=="function"?t(e):t}function qh(e){var t=mr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=Kt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((co&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Et.lanes|=c,fo|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Rr(r,t.memoizedState)||(Rn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Et.lanes|=i,fo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gh(e){var t=mr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Rr(i,t.memoizedState)||(Rn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ck(){}function Tk(e,t){var n=Et,r=mr(),s=t(),i=!Rr(r.memoizedState,s);if(i&&(r.memoizedState=s,Rn=!0),r=r.queue,dy(jk.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,cu(9,Ak.bind(null,n,r,s,t),void 0,null),tn===null)throw Error(Se(349));co&30||Pk(n,t,s)}return s}function Pk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ak(e,t,n,r){t.value=n,t.getSnapshot=r,Ok(t)&&Rk(e)}function jk(e,t,n){return n(function(){Ok(t)&&Rk(e)})}function Ok(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rr(e,n)}catch{return!0}}function Rk(e){var t=ys(e,1);t!==null&&Or(t,e,1,-1)}function X0(e){var t=Br();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:e},t.queue=e,e=e.dispatch=R2.bind(null,Et,e),[t.memoizedState,e]}function cu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ik(){return mr().memoizedState}function rd(e,t,n,r){var s=Br();Et.flags|=e,s.memoizedState=cu(1|t,n,void 0,r===void 0?null:r)}function pf(e,t,n,r){var s=mr();r=r===void 0?null:r;var i=void 0;if(Kt!==null){var o=Kt.memoizedState;if(i=o.destroy,r!==null&&ly(r,o.deps)){s.memoizedState=cu(t,n,i,r);return}}Et.flags|=e,s.memoizedState=cu(1|t,n,i,r)}function ew(e,t){return rd(8390656,8,e,t)}function dy(e,t){return pf(2048,8,e,t)}function Dk(e,t){return pf(4,2,e,t)}function Nk(e,t){return pf(4,4,e,t)}function Lk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $k(e,t,n){return n=n!=null?n.concat([e]):null,pf(4,4,Lk.bind(null,t,e),n)}function fy(){}function Mk(e,t){var n=mr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ly(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fk(e,t){var n=mr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ly(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bk(e,t,n){return co&21?(Rr(n,t)||(n=W_(),Et.lanes|=n,fo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=n)}function j2(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=Hh.transition;Hh.transition={};try{e(!1),t()}finally{dt=n,Hh.transition=r}}function Uk(){return mr().memoizedState}function O2(e,t,n){var r=li(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zk(e))Vk(t,n);else if(n=kk(e,t,n,r),n!==null){var s=_n();Or(n,e,r,s),Kk(n,t,r)}}function R2(e,t,n){var r=li(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zk(e))Vk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Rr(a,o)){var l=t.interleaved;l===null?(s.next=s,ry(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=kk(e,t,s,r),n!==null&&(s=_n(),Or(n,e,r,s),Kk(n,t,r))}}function zk(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function Vk(e,t){Dl=Nd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vg(e,n)}}var Ld={readContext:pr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},I2={readContext:pr,useCallback:function(e,t){return Br().memoizedState=[e,t===void 0?null:t],e},useContext:pr,useEffect:ew,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rd(4194308,4,Lk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rd(4194308,4,e,t)},useInsertionEffect:function(e,t){return rd(4,2,e,t)},useMemo:function(e,t){var n=Br();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Br();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=O2.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=Br();return e={current:e},t.memoizedState=e},useState:X0,useDebugValue:fy,useDeferredValue:function(e){return Br().memoizedState=e},useTransition:function(){var e=X0(!1),t=e[0];return e=j2.bind(null,e[1]),Br().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,s=Br();if(wt){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=t(),tn===null)throw Error(Se(349));co&30||Pk(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,ew(jk.bind(null,r,i,e),[e]),r.flags|=2048,cu(9,Ak.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Br(),t=tn.identifierPrefix;if(wt){var n=ds,r=cs;n=(r&~(1<<32-jr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=lu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=A2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},D2={readContext:pr,useCallback:Mk,useContext:pr,useEffect:dy,useImperativeHandle:$k,useInsertionEffect:Dk,useLayoutEffect:Nk,useMemo:Fk,useReducer:qh,useRef:Ik,useState:function(){return qh(uu)},useDebugValue:fy,useDeferredValue:function(e){var t=mr();return Bk(t,Kt.memoizedState,e)},useTransition:function(){var e=qh(uu)[0],t=mr().memoizedState;return[e,t]},useMutableSource:Ck,useSyncExternalStore:Tk,useId:Uk,unstable_isNewReconciler:!1},N2={readContext:pr,useCallback:Mk,useContext:pr,useEffect:dy,useImperativeHandle:$k,useInsertionEffect:Dk,useLayoutEffect:Nk,useMemo:Fk,useReducer:Gh,useRef:Ik,useState:function(){return Gh(uu)},useDebugValue:fy,useDeferredValue:function(e){var t=mr();return Kt===null?t.memoizedState=e:Bk(t,Kt.memoizedState,e)},useTransition:function(){var e=Gh(uu)[0],t=mr().memoizedState;return[e,t]},useMutableSource:Ck,useSyncExternalStore:Tk,useId:Uk,unstable_isNewReconciler:!1};function kr(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mf={isMounted:function(e){return(e=e._reactInternals)?yo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_n(),s=li(e),i=fs(r,s);i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Or(t,e,s,r),td(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_n(),s=li(e),i=fs(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Or(t,e,s,r),td(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_n(),r=li(e),s=fs(n,r);s.tag=2,t!=null&&(s.callback=t),t=oi(e,s,r),t!==null&&(Or(t,e,r,n),td(t,e,r))}};function tw(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!nu(n,r)||!nu(s,i):!0}function Wk(e,t,n){var r=!1,s=hi,i=t.contextType;return typeof i=="object"&&i!==null?i=pr(i):(s=Nn(t)?lo:gn.current,r=t.contextTypes,i=(r=r!=null)?Sa(e,s):hi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function nw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mf.enqueueReplaceState(t,t.state,null)}function um(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},sy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=pr(i):(i=Nn(t)?lo:gn.current,s.context=Sa(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(lm(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mf.enqueueReplaceState(s,s.state,null),Id(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pa(e,t){try{var n="",r=t;do n+=uP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var L2=typeof WeakMap=="function"?WeakMap:Map;function Hk(e,t,n){n=fs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Md||(Md=!0,bm=r),cm(e,t)},n}function qk(e,t,n){n=fs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){cm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cm(e,t),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function rw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new L2;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Y2.bind(null,e,t,n),t.then(e,e))}function sw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iw(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fs(-1,1),t.tag=2,oi(n,t,1))),n.lanes|=1),e)}var $2=Ss.ReactCurrentOwner,Rn=!1;function bn(e,t,n,r){t.child=e===null?_k(t,null,n,r):Ca(t,e.child,n,r)}function ow(e,t,n,r,s){n=n.render;var i=t.ref;return aa(t,s),r=uy(e,t,n,r,i,s),n=cy(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vs(e,t,s)):(wt&&n&&Jg(t),t.flags|=1,bn(e,t,r,s),t.child)}function aw(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!by(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Gk(e,t,i,r,s)):(e=ad(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:nu,n(o,r)&&e.ref===t.ref)return vs(e,t,s)}return t.flags|=1,e=ui(i,r),e.ref=t.ref,e.return=t,t.child=e}function Gk(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(nu(i,r)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Rn=!0);else return t.lanes=e.lanes,vs(e,t,s)}return dm(e,t,n,r,s)}function Qk(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Jo,zn),zn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(Jo,zn),zn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,mt(Jo,zn),zn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,mt(Jo,zn),zn|=r;return bn(e,t,s,n),t.child}function Yk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dm(e,t,n,r,s){var i=Nn(n)?lo:gn.current;return i=Sa(t,i),aa(t,s),n=uy(e,t,n,r,i,s),r=cy(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vs(e,t,s)):(wt&&r&&Jg(t),t.flags|=1,bn(e,t,n,s),t.child)}function lw(e,t,n,r,s){if(Nn(n)){var i=!0;Pd(t)}else i=!1;if(aa(t,s),t.stateNode===null)sd(e,t),Wk(t,n,r),um(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pr(u):(u=Nn(n)?lo:gn.current,u=Sa(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&nw(t,o,r,u),Ms=!1;var p=t.memoizedState;o.state=p,Id(t,r,o,s),l=t.memoizedState,a!==r||p!==l||Dn.current||Ms?(typeof c=="function"&&(lm(t,n,c,r),l=t.memoizedState),(a=Ms||tw(t,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Sk(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:kr(t.type,a),o.props=u,f=t.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=pr(l):(l=Nn(n)?lo:gn.current,l=Sa(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&nw(t,o,r,l),Ms=!1,p=t.memoizedState,o.state=p,Id(t,r,o,s);var _=t.memoizedState;a!==f||p!==_||Dn.current||Ms?(typeof m=="function"&&(lm(t,n,m,r),_=t.memoizedState),(u=Ms||tw(t,n,u,r,p,_,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return fm(e,t,n,r,i,s)}function fm(e,t,n,r,s,i){Yk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&q0(t,n,!1),vs(e,t,i);r=t.stateNode,$2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ca(t,e.child,null,i),t.child=Ca(t,null,a,i)):bn(e,t,a,i),t.memoizedState=r.state,s&&q0(t,n,!0),t.child}function Jk(e){var t=e.stateNode;t.pendingContext?H0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&H0(e,t.context,!1),iy(e,t.containerInfo)}function uw(e,t,n,r,s){return Ea(),Xg(s),t.flags|=256,bn(e,t,n,r),t.child}var hm={dehydrated:null,treeContext:null,retryLane:0};function pm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zk(e,t,n){var r=t.pendingProps,s=_t.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),mt(_t,s&1),e===null)return om(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vf(o,r,0,null),e=io(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pm(n),t.memoizedState=hm,e):hy(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return M2(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ui(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ui(a,i):(i=io(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?pm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=hm,r}return i=e.child,e=i.sibling,r=ui(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function hy(e,t){return t=vf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rc(e,t,n,r){return r!==null&&Xg(r),Ca(t,e.child,null,n),e=hy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M2(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Qh(Error(Se(422))),Rc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=vf({mode:"visible",children:r.children},s,0,null),i=io(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ca(t,e.child,null,o),t.child.memoizedState=pm(o),t.memoizedState=hm,i);if(!(t.mode&1))return Rc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Se(419)),r=Qh(i,r,void 0),Rc(e,t,o,r)}if(a=(o&e.childLanes)!==0,Rn||a){if(r=tn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ys(e,s),Or(r,e,s,-1))}return wy(),r=Qh(Error(Se(421))),Rc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=J2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Kn=ii(s.nextSibling),Wn=t,wt=!0,Pr=null,e!==null&&(ar[lr++]=cs,ar[lr++]=ds,ar[lr++]=uo,cs=e.id,ds=e.overflow,uo=t),t=hy(t,r.children),t.flags|=4096,t)}function cw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),am(e.return,t,n)}function Yh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xk(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bn(e,t,r.children,n),r=_t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cw(e,n,t);else if(e.tag===19)cw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mt(_t,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Dd(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Dd(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yh(t,!0,n,null,i);break;case"together":Yh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,n=ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function F2(e,t,n){switch(t.tag){case 3:Jk(t),Ea();break;case 5:Ek(t);break;case 1:Nn(t.type)&&Pd(t);break;case 4:iy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;mt(Od,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mt(_t,_t.current&1),t.flags|=128,null):n&t.child.childLanes?Zk(e,t,n):(mt(_t,_t.current&1),e=vs(e,t,n),e!==null?e.sibling:null);mt(_t,_t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xk(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(_t,_t.current),r)break;return null;case 22:case 23:return t.lanes=0,Qk(e,t,n)}return vs(e,t,n)}var e1,mm,t1,n1;e1=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mm=function(){};t1=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Vi(Gr.current);var i=null;switch(n){case"input":s=$p(e,s),r=$p(e,r),i=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),i=[];break;case"textarea":s=Bp(e,s),r=Bp(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cd)}zp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ql.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ql.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gt("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};n1=function(e,t,n,r){n!==r&&(t.flags|=4)};function dl(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function B2(e,t,n){var r=t.pendingProps;switch(Zg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return Nn(t.type)&&Td(),fn(t),null;case 3:return r=t.stateNode,Ta(),yt(Dn),yt(gn),ay(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pr!==null&&(km(Pr),Pr=null))),mm(e,t),fn(t),null;case 5:oy(t);var s=Vi(au.current);if(n=t.type,e!==null&&t.stateNode!=null)t1(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Se(166));return fn(t),null}if(e=Vi(Gr.current),jc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Wr]=t,r[iu]=i,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<_l.length;s++)gt(_l[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":w0(r,i),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},gt("invalid",r);break;case"textarea":x0(r,i),gt("invalid",r)}zp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ac(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ac(r.textContent,a,e),s=["children",""+a]):Ql.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":xc(r),b0(r,i,!0);break;case"textarea":xc(r),_0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cd)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=j_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Wr]=t,e[iu]=r,e1(e,t,!1,!1),t.stateNode=e;e:{switch(o=Vp(n,r),n){case"dialog":gt("cancel",e),gt("close",e),s=r;break;case"iframe":case"object":case"embed":gt("load",e),s=r;break;case"video":case"audio":for(s=0;s<_l.length;s++)gt(_l[s],e);s=r;break;case"source":gt("error",e),s=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),s=r;break;case"details":gt("toggle",e),s=r;break;case"input":w0(e,r),s=$p(e,r),gt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),gt("invalid",e);break;case"textarea":x0(e,r),s=Bp(e,r),gt("invalid",e);break;default:s=r}zp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?I_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&O_(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yl(e,l):typeof l=="number"&&Yl(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ql.hasOwnProperty(i)?l!=null&&i==="onScroll"&&gt("scroll",e):l!=null&&$g(e,i,l,o))}switch(n){case"input":xc(e),b0(e,r,!1);break;case"textarea":xc(e),_0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ra(e,!!r.multiple,i,!1):r.defaultValue!=null&&ra(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Cd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fn(t),null;case 6:if(e&&t.stateNode!=null)n1(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Se(166));if(n=Vi(au.current),Vi(Gr.current),jc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wr]=t,(i=r.nodeValue!==n)&&(e=Wn,e!==null))switch(e.tag){case 3:Ac(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ac(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=t,t.stateNode=r}return fn(t),null;case 13:if(yt(_t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&Kn!==null&&t.mode&1&&!(t.flags&128))bk(),Ea(),t.flags|=98560,i=!1;else if(i=jc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Se(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Se(317));i[Wr]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fn(t),i=!1}else Pr!==null&&(km(Pr),Pr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_t.current&1?Ht===0&&(Ht=3):wy())),t.updateQueue!==null&&(t.flags|=4),fn(t),null);case 4:return Ta(),mm(e,t),e===null&&ru(t.stateNode.containerInfo),fn(t),null;case 10:return ny(t.type._context),fn(t),null;case 17:return Nn(t.type)&&Td(),fn(t),null;case 19:if(yt(_t),i=t.memoizedState,i===null)return fn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)dl(i,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Dd(e),o!==null){for(t.flags|=128,dl(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mt(_t,_t.current&1|2),t.child}e=e.sibling}i.tail!==null&&Nt()>Aa&&(t.flags|=128,r=!0,dl(i,!1),t.lanes=4194304)}else{if(!r)if(e=Dd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),dl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!wt)return fn(t),null}else 2*Nt()-i.renderingStartTime>Aa&&n!==1073741824&&(t.flags|=128,r=!0,dl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Nt(),t.sibling=null,n=_t.current,mt(_t,r?n&1|2:n&1),t):(fn(t),null);case 22:case 23:return vy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zn&1073741824&&(fn(t),t.subtreeFlags&6&&(t.flags|=8192)):fn(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function U2(e,t){switch(Zg(t),t.tag){case 1:return Nn(t.type)&&Td(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(),yt(Dn),yt(gn),ay(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return oy(t),null;case 13:if(yt(_t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(_t),null;case 4:return Ta(),null;case 10:return ny(t.type._context),null;case 22:case 23:return vy(),null;case 24:return null;default:return null}}var Ic=!1,hn=!1,z2=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Yo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function gm(e,t,n){try{n()}catch(r){jt(e,t,r)}}var dw=!1;function V2(e,t){if(Xp=kd,e=ak(),Yg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===s&&(a=o),p===i&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(em={focusedElem:e,selectionRange:n},kd=!1,Ue=t;Ue!==null;)if(t=Ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ue=e;else for(;Ue!==null;){t=Ue;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,w=_.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:kr(t.type,v),w);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(C){jt(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ue=e;break}Ue=t.return}return _=dw,dw=!1,_}function Nl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&gm(t,n,i)}s=s.next}while(s!==r)}}function gf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ym(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function r1(e){var t=e.alternate;t!==null&&(e.alternate=null,r1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wr],delete t[iu],delete t[rm],delete t[E2],delete t[C2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function s1(e){return e.tag===5||e.tag===3||e.tag===4}function fw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cd));else if(r!==4&&(e=e.child,e!==null))for(vm(e,t,n),e=e.sibling;e!==null;)vm(e,t,n),e=e.sibling}function wm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wm(e,t,n),e=e.sibling;e!==null;)wm(e,t,n),e=e.sibling}var nn=null,Cr=!1;function Rs(e,t,n){for(n=n.child;n!==null;)i1(e,t,n),n=n.sibling}function i1(e,t,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:hn||Yo(n,t);case 6:var r=nn,s=Cr;nn=null,Rs(e,t,n),nn=r,Cr=s,nn!==null&&(Cr?(e=nn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(Cr?(e=nn,n=n.stateNode,e.nodeType===8?Vh(e.parentNode,n):e.nodeType===1&&Vh(e,n),eu(e)):Vh(nn,n.stateNode));break;case 4:r=nn,s=Cr,nn=n.stateNode.containerInfo,Cr=!0,Rs(e,t,n),nn=r,Cr=s;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gm(n,t,o),s=s.next}while(s!==r)}Rs(e,t,n);break;case 1:if(!hn&&(Yo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,t,a)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,Rs(e,t,n),hn=r):Rs(e,t,n);break;default:Rs(e,t,n)}}function hw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new z2),t.forEach(function(r){var s=Z2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,Cr=!1;break e;case 3:nn=a.stateNode.containerInfo,Cr=!0;break e;case 4:nn=a.stateNode.containerInfo,Cr=!0;break e}a=a.return}if(nn===null)throw Error(Se(160));i1(i,o,s),nn=null,Cr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){jt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o1(t,e),t=t.sibling}function o1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wr(t,e),Mr(e),r&4){try{Nl(3,e,e.return),gf(3,e)}catch(v){jt(e,e.return,v)}try{Nl(5,e,e.return)}catch(v){jt(e,e.return,v)}}break;case 1:wr(t,e),Mr(e),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(wr(t,e),Mr(e),r&512&&n!==null&&Yo(n,n.return),e.flags&32){var s=e.stateNode;try{Yl(s,"")}catch(v){jt(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&P_(s,i),Vp(a,o);var u=Vp(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?I_(s,f):c==="dangerouslySetInnerHTML"?O_(s,f):c==="children"?Yl(s,f):$g(s,c,f,u)}switch(a){case"input":Mp(s,i);break;case"textarea":A_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ra(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?ra(s,!!i.multiple,i.defaultValue,!0):ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[iu]=i}catch(v){jt(e,e.return,v)}}break;case 6:if(wr(t,e),Mr(e),r&4){if(e.stateNode===null)throw Error(Se(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){jt(e,e.return,v)}}break;case 3:if(wr(t,e),Mr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{eu(t.containerInfo)}catch(v){jt(e,e.return,v)}break;case 4:wr(t,e),Mr(e);break;case 13:wr(t,e),Mr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gy=Nt())),r&4&&hw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(hn=(u=hn)||c,wr(t,e),hn=u):wr(t,e),Mr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Ue=e,c=e.child;c!==null;){for(f=Ue=c;Ue!==null;){switch(p=Ue,m=p.child,p.tag){case 0:case 11:case 14:case 15:Nl(4,p,p.return);break;case 1:Yo(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(v){jt(r,n,v)}}break;case 5:Yo(p,p.return);break;case 22:if(p.memoizedState!==null){mw(f);continue}}m!==null?(m.return=p,Ue=m):mw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=R_("display",o))}catch(v){jt(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wr(t,e),Mr(e),r&4&&hw(e);break;case 21:break;default:wr(t,e),Mr(e)}}function Mr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(s1(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yl(s,""),r.flags&=-33);var i=fw(e);wm(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fw(e);vm(e,a,o);break;default:throw Error(Se(161))}}catch(l){jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function K2(e,t,n){Ue=e,a1(e)}function a1(e,t,n){for(var r=(e.mode&1)!==0;Ue!==null;){var s=Ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ic;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||hn;a=Ic;var u=hn;if(Ic=o,(hn=l)&&!u)for(Ue=s;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?gw(s):l!==null?(l.return=o,Ue=l):gw(s);for(;i!==null;)Ue=i,a1(i),i=i.sibling;Ue=s,Ic=a,hn=u}pw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ue=i):pw(e)}}function pw(e){for(;Ue!==null;){var t=Ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||gf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!hn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:kr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Z0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Z0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&eu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}hn||t.flags&512&&ym(t)}catch(p){jt(t,t.return,p)}}if(t===e){Ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function mw(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function gw(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gf(4,t)}catch(l){jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){jt(t,s,l)}}var i=t.return;try{ym(t)}catch(l){jt(t,i,l)}break;case 5:var o=t.return;try{ym(t)}catch(l){jt(t,o,l)}}}catch(l){jt(t,t.return,l)}if(t===e){Ue=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ue=a;break}Ue=t.return}}var W2=Math.ceil,$d=Ss.ReactCurrentDispatcher,py=Ss.ReactCurrentOwner,fr=Ss.ReactCurrentBatchConfig,at=0,tn=null,Ut=null,on=0,zn=0,Jo=yi(0),Ht=0,du=null,fo=0,yf=0,my=0,Ll=null,jn=null,gy=0,Aa=1/0,ss=null,Md=!1,bm=null,ai=null,Dc=!1,Xs=null,Fd=0,$l=0,xm=null,id=-1,od=0;function _n(){return at&6?Nt():id!==-1?id:id=Nt()}function li(e){return e.mode&1?at&2&&on!==0?on&-on:P2.transition!==null?(od===0&&(od=W_()),od):(e=dt,e!==0||(e=window.event,e=e===void 0?16:Z_(e.type)),e):1}function Or(e,t,n,r){if(50<$l)throw $l=0,xm=null,Error(Se(185));Au(e,n,r),(!(at&2)||e!==tn)&&(e===tn&&(!(at&2)&&(yf|=n),Ht===4&&Bs(e,on)),Ln(e,r),n===1&&at===0&&!(t.mode&1)&&(Aa=Nt()+500,hf&&vi()))}function Ln(e,t){var n=e.callbackNode;PP(e,t);var r=_d(e,e===tn?on:0);if(r===0)n!==null&&E0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&E0(n),t===1)e.tag===0?T2(yw.bind(null,e)):yk(yw.bind(null,e)),k2(function(){!(at&6)&&vi()}),n=null;else{switch(H_(r)){case 1:n=zg;break;case 4:n=V_;break;case 16:n=xd;break;case 536870912:n=K_;break;default:n=xd}n=m1(n,l1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function l1(e,t){if(id=-1,od=0,at&6)throw Error(Se(327));var n=e.callbackNode;if(la()&&e.callbackNode!==n)return null;var r=_d(e,e===tn?on:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Bd(e,r);else{t=r;var s=at;at|=2;var i=c1();(tn!==e||on!==t)&&(ss=null,Aa=Nt()+500,so(e,t));do try{G2();break}catch(a){u1(e,a)}while(!0);ty(),$d.current=i,at=s,Ut!==null?t=0:(tn=null,on=0,t=Ht)}if(t!==0){if(t===2&&(s=Gp(e),s!==0&&(r=s,t=_m(e,s))),t===1)throw n=du,so(e,0),Bs(e,r),Ln(e,Nt()),n;if(t===6)Bs(e,r);else{if(s=e.current.alternate,!(r&30)&&!H2(s)&&(t=Bd(e,r),t===2&&(i=Gp(e),i!==0&&(r=i,t=_m(e,i))),t===1))throw n=du,so(e,0),Bs(e,r),Ln(e,Nt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Se(345));case 2:Di(e,jn,ss);break;case 3:if(Bs(e,r),(r&130023424)===r&&(t=gy+500-Nt(),10<t)){if(_d(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){_n(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=nm(Di.bind(null,e,jn,ss),t);break}Di(e,jn,ss);break;case 4:if(Bs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-jr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W2(r/1960))-r,10<r){e.timeoutHandle=nm(Di.bind(null,e,jn,ss),r);break}Di(e,jn,ss);break;case 5:Di(e,jn,ss);break;default:throw Error(Se(329))}}}return Ln(e,Nt()),e.callbackNode===n?l1.bind(null,e):null}function _m(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(so(e,t).flags|=256),e=Bd(e,t),e!==2&&(t=jn,jn=n,t!==null&&km(t)),e}function km(e){jn===null?jn=e:jn.push.apply(jn,e)}function H2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Rr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~my,t&=~yf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jr(t),r=1<<n;e[n]=-1,t&=~r}}function yw(e){if(at&6)throw Error(Se(327));la();var t=_d(e,0);if(!(t&1))return Ln(e,Nt()),null;var n=Bd(e,t);if(e.tag!==0&&n===2){var r=Gp(e);r!==0&&(t=r,n=_m(e,r))}if(n===1)throw n=du,so(e,0),Bs(e,t),Ln(e,Nt()),n;if(n===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Di(e,jn,ss),Ln(e,Nt()),null}function yy(e,t){var n=at;at|=1;try{return e(t)}finally{at=n,at===0&&(Aa=Nt()+500,hf&&vi())}}function ho(e){Xs!==null&&Xs.tag===0&&!(at&6)&&la();var t=at;at|=1;var n=fr.transition,r=dt;try{if(fr.transition=null,dt=1,e)return e()}finally{dt=r,fr.transition=n,at=t,!(at&6)&&vi()}}function vy(){zn=Jo.current,yt(Jo)}function so(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_2(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(Zg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Td();break;case 3:Ta(),yt(Dn),yt(gn),ay();break;case 5:oy(r);break;case 4:Ta();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:ny(r.type._context);break;case 22:case 23:vy()}n=n.return}if(tn=e,Ut=e=ui(e.current,null),on=zn=t,Ht=0,du=null,my=yf=fo=0,jn=Ll=null,zi!==null){for(t=0;t<zi.length;t++)if(n=zi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zi=null}return e}function u1(e,t){do{var n=Ut;try{if(ty(),nd.current=Ld,Nd){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nd=!1}if(co=0,Xt=Kt=Et=null,Dl=!1,lu=0,py.current=null,n===null||n.return===null){Ht=1,du=t,Ut=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=on,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=sw(o);if(m!==null){m.flags&=-257,iw(m,o,a,i,t),m.mode&1&&rw(i,u,t),t=m,l=u;var _=t.updateQueue;if(_===null){var v=new Set;v.add(l),t.updateQueue=v}else _.add(l);break e}else{if(!(t&1)){rw(i,u,t),wy();break e}l=Error(Se(426))}}else if(wt&&a.mode&1){var w=sw(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),iw(w,o,a,i,t),Xg(Pa(l,a));break e}}i=l=Pa(l,a),Ht!==4&&(Ht=2),Ll===null?Ll=[i]:Ll.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Hk(i,l,t);J0(i,g);break e;case 1:a=l;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ai===null||!ai.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=qk(i,a,t);J0(i,C);break e}}i=i.return}while(i!==null)}f1(n)}catch(O){t=O,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function c1(){var e=$d.current;return $d.current=Ld,e===null?Ld:e}function wy(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),tn===null||!(fo&268435455)&&!(yf&268435455)||Bs(tn,on)}function Bd(e,t){var n=at;at|=2;var r=c1();(tn!==e||on!==t)&&(ss=null,so(e,t));do try{q2();break}catch(s){u1(e,s)}while(!0);if(ty(),at=n,$d.current=r,Ut!==null)throw Error(Se(261));return tn=null,on=0,Ht}function q2(){for(;Ut!==null;)d1(Ut)}function G2(){for(;Ut!==null&&!wP();)d1(Ut)}function d1(e){var t=p1(e.alternate,e,zn);e.memoizedProps=e.pendingProps,t===null?f1(e):Ut=t,py.current=null}function f1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=U2(n,t),n!==null){n.flags&=32767,Ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,Ut=null;return}}else if(n=B2(n,t,zn),n!==null){Ut=n;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);Ht===0&&(Ht=5)}function Di(e,t,n){var r=dt,s=fr.transition;try{fr.transition=null,dt=1,Q2(e,t,n,r)}finally{fr.transition=s,dt=r}return null}function Q2(e,t,n,r){do la();while(Xs!==null);if(at&6)throw Error(Se(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(AP(e,i),e===tn&&(Ut=tn=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dc||(Dc=!0,m1(xd,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fr.transition,fr.transition=null;var o=dt;dt=1;var a=at;at|=4,py.current=null,V2(e,n),o1(n,e),m2(em),kd=!!Xp,em=Xp=null,e.current=n,K2(n),bP(),at=a,dt=o,fr.transition=i}else e.current=n;if(Dc&&(Dc=!1,Xs=e,Fd=s),i=e.pendingLanes,i===0&&(ai=null),kP(n.stateNode),Ln(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Md)throw Md=!1,e=bm,bm=null,e;return Fd&1&&e.tag!==0&&la(),i=e.pendingLanes,i&1?e===xm?$l++:($l=0,xm=e):$l=0,vi(),null}function la(){if(Xs!==null){var e=H_(Fd),t=fr.transition,n=dt;try{if(fr.transition=null,dt=16>e?16:e,Xs===null)var r=!1;else{if(e=Xs,Xs=null,Fd=0,at&6)throw Error(Se(331));var s=at;for(at|=4,Ue=e.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ue=u;Ue!==null;){var c=Ue;switch(c.tag){case 0:case 11:case 15:Nl(8,c,i)}var f=c.child;if(f!==null)f.return=c,Ue=f;else for(;Ue!==null;){c=Ue;var p=c.sibling,m=c.return;if(r1(c),c===u){Ue=null;break}if(p!==null){p.return=m,Ue=p;break}Ue=m}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nl(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Ue=g;break e}Ue=i.return}}var y=e.current;for(Ue=y;Ue!==null;){o=Ue;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ue=b;else e:for(o=y;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gf(9,a)}}catch(O){jt(a,a.return,O)}if(a===o){Ue=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ue=C;break e}Ue=a.return}}if(at=s,vi(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(lf,e)}catch{}r=!0}return r}finally{dt=n,fr.transition=t}}return!1}function vw(e,t,n){t=Pa(n,t),t=Hk(e,t,1),e=oi(e,t,1),t=_n(),e!==null&&(Au(e,1,t),Ln(e,t))}function jt(e,t,n){if(e.tag===3)vw(e,e,n);else for(;t!==null;){if(t.tag===3){vw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){e=Pa(n,e),e=qk(t,e,1),t=oi(t,e,1),e=_n(),t!==null&&(Au(t,1,e),Ln(t,e));break}}t=t.return}}function Y2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_n(),e.pingedLanes|=e.suspendedLanes&n,tn===e&&(on&n)===n&&(Ht===4||Ht===3&&(on&130023424)===on&&500>Nt()-gy?so(e,0):my|=n),Ln(e,t)}function h1(e,t){t===0&&(e.mode&1?(t=Sc,Sc<<=1,!(Sc&130023424)&&(Sc=4194304)):t=1);var n=_n();e=ys(e,t),e!==null&&(Au(e,t,n),Ln(e,n))}function J2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),h1(e,n)}function Z2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(t),h1(e,n)}var p1;p1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dn.current)Rn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rn=!1,F2(e,t,n);Rn=!!(e.flags&131072)}else Rn=!1,wt&&t.flags&1048576&&vk(t,jd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sd(e,t),e=t.pendingProps;var s=Sa(t,gn.current);aa(t,n),s=uy(null,t,r,e,s,n);var i=cy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(r)?(i=!0,Pd(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sy(t),s.updater=mf,t.stateNode=s,s._reactInternals=t,um(t,r,e,n),t=fm(null,t,r,!0,i,n)):(t.tag=0,wt&&i&&Jg(t),bn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=eA(r),e=kr(r,e),s){case 0:t=dm(null,t,r,e,n);break e;case 1:t=lw(null,t,r,e,n);break e;case 11:t=ow(null,t,r,e,n);break e;case 14:t=aw(null,t,r,kr(r.type,e),n);break e}throw Error(Se(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),dm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),lw(e,t,r,s,n);case 3:e:{if(Jk(t),e===null)throw Error(Se(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Sk(e,t),Id(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Pa(Error(Se(423)),t),t=uw(e,t,r,n,s);break e}else if(r!==s){s=Pa(Error(Se(424)),t),t=uw(e,t,r,n,s);break e}else for(Kn=ii(t.stateNode.containerInfo.firstChild),Wn=t,wt=!0,Pr=null,n=_k(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),r===s){t=vs(e,t,n);break e}bn(e,t,r,n)}t=t.child}return t;case 5:return Ek(t),e===null&&om(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,tm(r,s)?o=null:i!==null&&tm(r,i)&&(t.flags|=32),Yk(e,t),bn(e,t,o,n),t.child;case 6:return e===null&&om(t),null;case 13:return Zk(e,t,n);case 4:return iy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ca(t,null,r,n):bn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),ow(e,t,r,s,n);case 7:return bn(e,t,t.pendingProps,n),t.child;case 8:return bn(e,t,t.pendingProps.children,n),t.child;case 12:return bn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,mt(Od,r._currentValue),r._currentValue=o,i!==null)if(Rr(i.value,o)){if(i.children===s.children&&!Dn.current){t=vs(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=fs(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),am(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),am(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,aa(t,n),s=pr(s),r=r(s),t.flags|=1,bn(e,t,r,n),t.child;case 14:return r=t.type,s=kr(r,t.pendingProps),s=kr(r.type,s),aw(e,t,r,s,n);case 15:return Gk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),sd(e,t),t.tag=1,Nn(r)?(e=!0,Pd(t)):e=!1,aa(t,n),Wk(t,r,s),um(t,r,s,n),fm(null,t,r,!0,e,n);case 19:return Xk(e,t,n);case 22:return Qk(e,t,n)}throw Error(Se(156,t.tag))};function m1(e,t){return z_(e,t)}function X2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(e,t,n,r){return new X2(e,t,n,r)}function by(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eA(e){if(typeof e=="function")return by(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fg)return 11;if(e===Bg)return 14}return 2}function ui(e,t){var n=e.alternate;return n===null?(n=cr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ad(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")by(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Uo:return io(n.children,s,i,t);case Mg:o=8,s|=8;break;case Ip:return e=cr(12,n,t,s|2),e.elementType=Ip,e.lanes=i,e;case Dp:return e=cr(13,n,t,s),e.elementType=Dp,e.lanes=i,e;case Np:return e=cr(19,n,t,s),e.elementType=Np,e.lanes=i,e;case E_:return vf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k_:o=10;break e;case S_:o=9;break e;case Fg:o=11;break e;case Bg:o=14;break e;case $s:o=16,r=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=cr(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function io(e,t,n,r){return e=cr(7,e,r,t),e.lanes=n,e}function vf(e,t,n,r){return e=cr(22,e,r,t),e.elementType=E_,e.lanes=n,e.stateNode={isHidden:!1},e}function Jh(e,t,n){return e=cr(6,e,null,t),e.lanes=n,e}function Zh(e,t,n){return t=cr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xy(e,t,n,r,s,i,o,a,l){return e=new tA(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=cr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(i),e}function nA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function g1(e){if(!e)return hi;e=e._reactInternals;e:{if(yo(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var n=e.type;if(Nn(n))return gk(e,n,t)}return t}function y1(e,t,n,r,s,i,o,a,l){return e=xy(n,r,!0,e,s,i,o,a,l),e.context=g1(null),n=e.current,r=_n(),s=li(n),i=fs(r,s),i.callback=t??null,oi(n,i,s),e.current.lanes=s,Au(e,s,r),Ln(e,r),e}function wf(e,t,n,r){var s=t.current,i=_n(),o=li(s);return n=g1(n),t.context===null?t.context=n:t.pendingContext=n,t=fs(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=oi(s,t,o),e!==null&&(Or(e,s,o,i),td(e,s,o)),o}function Ud(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ww(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _y(e,t){ww(e,t),(e=e.alternate)&&ww(e,t)}function rA(){return null}var v1=typeof reportError=="function"?reportError:function(e){console.error(e)};function ky(e){this._internalRoot=e}bf.prototype.render=ky.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));wf(e,t,null,null)};bf.prototype.unmount=ky.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ho(function(){wf(null,e,null,null)}),t[gs]=null}};function bf(e){this._internalRoot=e}bf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fs.length&&t!==0&&t<Fs[n].priority;n++);Fs.splice(n,0,e),n===0&&J_(e)}};function Sy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bw(){}function sA(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ud(o);i.call(u)}}var o=y1(t,r,e,0,null,!1,!1,"",bw);return e._reactRootContainer=o,e[gs]=o.current,ru(e.nodeType===8?e.parentNode:e),ho(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Ud(l);a.call(u)}}var l=xy(e,0,!1,null,null,!1,!1,"",bw);return e._reactRootContainer=l,e[gs]=l.current,ru(e.nodeType===8?e.parentNode:e),ho(function(){wf(t,l,n,r)}),l}function _f(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ud(o);a.call(l)}}wf(t,o,e,s)}else o=sA(n,t,e,s,r);return Ud(o)}q_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xl(t.pendingLanes);n!==0&&(Vg(t,n|1),Ln(t,Nt()),!(at&6)&&(Aa=Nt()+500,vi()))}break;case 13:ho(function(){var r=ys(e,1);if(r!==null){var s=_n();Or(r,e,1,s)}}),_y(e,1)}};Kg=function(e){if(e.tag===13){var t=ys(e,134217728);if(t!==null){var n=_n();Or(t,e,134217728,n)}_y(e,134217728)}};G_=function(e){if(e.tag===13){var t=li(e),n=ys(e,t);if(n!==null){var r=_n();Or(n,e,t,r)}_y(e,t)}};Q_=function(){return dt};Y_=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};Wp=function(e,t,n){switch(t){case"input":if(Mp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ff(r);if(!s)throw Error(Se(90));T_(r),Mp(r,s)}}}break;case"textarea":A_(e,n);break;case"select":t=n.value,t!=null&&ra(e,!!n.multiple,t,!1)}};L_=yy;$_=ho;var iA={usingClientEntryPoint:!1,Events:[Ou,Wo,ff,D_,N_,yy]},fl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oA={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=B_(e),e===null?null:e.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||rA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{lf=Nc.inject(oA),qr=Nc}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;Gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sy(t))throw Error(Se(200));return nA(e,t,null,n)};Gn.createRoot=function(e,t){if(!Sy(e))throw Error(Se(299));var n=!1,r="",s=v1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=xy(e,1,!1,null,null,n,!1,r,s),e[gs]=t.current,ru(e.nodeType===8?e.parentNode:e),new ky(t)};Gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=B_(t),e=e===null?null:e.stateNode,e};Gn.flushSync=function(e){return ho(e)};Gn.hydrate=function(e,t,n){if(!xf(t))throw Error(Se(200));return _f(null,e,t,!0,n)};Gn.hydrateRoot=function(e,t,n){if(!Sy(e))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=y1(t,null,e,1,n??null,s,!1,i,o),e[gs]=t.current,ru(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new bf(t)};Gn.render=function(e,t,n){if(!xf(t))throw Error(Se(200));return _f(null,e,t,!1,n)};Gn.unmountComponentAtNode=function(e){if(!xf(e))throw Error(Se(40));return e._reactRootContainer?(ho(function(){_f(null,null,e,!1,function(){e._reactRootContainer=null,e[gs]=null})}),!0):!1};Gn.unstable_batchedUpdates=yy;Gn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xf(n))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return _f(e,t,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function w1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w1)}catch(e){console.error(e)}}w1(),w_.exports=Gn;var Ey=w_.exports;const aA=of(Ey);var xw=Ey;Op.createRoot=xw.createRoot,Op.hydrateRoot=xw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _w="popstate";function lA(e={}){function t(s,i){let{pathname:o="/",search:a="",hash:l=""}=vo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:fu(i))}function r(s,i){qn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return cA(t,n,r,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uA(){return Math.random().toString(36).substring(2,10)}function kw(e,t){return{usr:e.state,key:e.key,idx:t}}function Sm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vo(t):t,state:n,key:t&&t.key||r||uA()}}function fu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function vo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function cA(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let w=c(),g=w==null?null:w-u;u=w,l&&l({action:a,location:v.location,delta:g})}function p(w,g){a="PUSH";let y=Sm(v.location,w,g);n&&n(y,w),u=c()+1;let b=kw(y,u),C=v.createHref(y);try{o.pushState(b,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function m(w,g){a="REPLACE";let y=Sm(v.location,w,g);n&&n(y,w),u=c();let b=kw(y,u),C=v.createHref(y);o.replaceState(b,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function _(w){return dA(w)}let v={get action(){return a},get location(){return e(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_w,f),l=w,()=>{s.removeEventListener(_w,f),l=null}},createHref(w){return t(s,w)},createURL:_,encodeLocation(w){let g=_(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(w){return o.go(w)}};return v}function dA(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:fu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function b1(e,t,n="/"){return fA(e,t,n,!1)}function fA(e,t,n,r){let s=typeof t=="string"?vo(t):t,i=ws(s.pathname||"/",n);if(i==null)return null;let o=x1(e);hA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=SA(i);a=_A(o[l],u,r)}return a}function x1(e,t=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;xt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let f=hs([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),x1(o.children,t,p,f,l)),!(o.path==null&&!o.index)&&t.push({path:f,score:bA(f,o.index),routesMeta:p})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of _1(o.path))i(o,a,!0,u)}),t}function _1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function hA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var pA=/^:[\w-]+$/,mA=3,gA=2,yA=1,vA=10,wA=-2,Sw=e=>e==="*";function bA(e,t){let n=e.split("/"),r=n.length;return n.some(Sw)&&(r+=wA),t&&(r+=gA),n.filter(s=>!Sw(s)).reduce((s,i)=>s+(pA.test(i)?mA:i===""?yA:vA),r)}function xA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function _A(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=zd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=zd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:hs([i,f.pathname]),pathnameBase:PA(hs([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=hs([i,f.pathnameBase]))}return o}function zd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},p)=>{if(c==="*"){let _=a[p]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function kA(e,t=!1,n=!0){qn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function SA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ws(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function EA(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?vo(e):e;return{pathname:n?n.startsWith("/")?n:CA(n,t):t,search:AA(r),hash:jA(s)}}function CA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Cy(e){let t=TA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Ty(e,t,n,r=!1){let s;typeof e=="string"?s=vo(e):(s={...e},xt(!s.pathname||!s.pathname.includes("?"),Xh("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Xh("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Xh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=EA(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var hs=e=>e.join("/").replace(/\/\/+/g,"/"),PA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function OA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var k1=["POST","PUT","PATCH","DELETE"];new Set(k1);var RA=["GET",...k1];new Set(RA);var Ma=S.createContext(null);Ma.displayName="DataRouter";var kf=S.createContext(null);kf.displayName="DataRouterState";S.createContext(!1);var S1=S.createContext({isTransitioning:!1});S1.displayName="ViewTransition";var IA=S.createContext(new Map);IA.displayName="Fetchers";var DA=S.createContext(null);DA.displayName="Await";var Ir=S.createContext(null);Ir.displayName="Navigation";var Iu=S.createContext(null);Iu.displayName="Location";var Dr=S.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var Py=S.createContext(null);Py.displayName="RouteError";function NA(e,{relative:t}={}){xt(Fa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Ir),{hash:s,pathname:i,search:o}=Du(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:hs([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Fa(){return S.useContext(Iu)!=null}function Yn(){return xt(Fa(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Iu).location}var E1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function C1(e){S.useContext(Ir).static||S.useLayoutEffect(e)}function Jn(){let{isDataRoute:e}=S.useContext(Dr);return e?GA():LA()}function LA(){xt(Fa(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Ma),{basename:t,navigator:n}=S.useContext(Ir),{matches:r}=S.useContext(Dr),{pathname:s}=Yn(),i=JSON.stringify(Cy(r)),o=S.useRef(!1);return C1(()=>{o.current=!0}),S.useCallback((l,u={})=>{if(qn(o.current,E1),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Ty(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:hs([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}S.createContext(null);function Ba(){let{matches:e}=S.useContext(Dr),t=e[e.length-1];return t?t.params:{}}function Du(e,{relative:t}={}){let{matches:n}=S.useContext(Dr),{pathname:r}=Yn(),s=JSON.stringify(Cy(n));return S.useMemo(()=>Ty(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function $A(e,t){return T1(e,t)}function T1(e,t,n,r,s){var y;xt(Fa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Ir),{matches:o}=S.useContext(Dr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let b=f&&f.path||"";P1(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let p=Yn(),m;if(t){let b=typeof t=="string"?vo(t):t;xt(c==="/"||((y=b.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=p;let _=m.pathname||"/",v=_;if(c!=="/"){let b=c.replace(/^\//,"").split("/");v="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=b1(e,{pathname:v});qn(f||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),qn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=zA(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:hs([c,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:hs([c,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,n,r,s);return t&&g?S.createElement(Iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function MA(){let e=qA(),t=OA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:s},n):null,o)}var FA=S.createElement(MA,null),BA=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(Dr.Provider,{value:this.props.routeContext},S.createElement(Py.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UA({routeContext:e,match:t,children:n}){let r=S.useContext(Ma);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Dr.Provider,{value:e},n)}function zA(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);xt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:f,errors:p}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,f)=>{let p,m=!1,_=null,v=null;n&&(p=o&&c.route.id?o[c.route.id]:void 0,_=c.route.errorElement||FA,a&&(l<0&&f===0?(P1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=c.route.hydrateFallbackElement||null)));let w=t.concat(i.slice(0,f+1)),g=()=>{let y;return p?y=_:m?y=v:c.route.Component?y=S.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,S.createElement(UA,{match:c,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?S.createElement(BA,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:g(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:r}):g()},null)}function Ay(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VA(e){let t=S.useContext(Ma);return xt(t,Ay(e)),t}function KA(e){let t=S.useContext(kf);return xt(t,Ay(e)),t}function WA(e){let t=S.useContext(Dr);return xt(t,Ay(e)),t}function jy(e){let t=WA(e),n=t.matches[t.matches.length-1];return xt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function HA(){return jy("useRouteId")}function qA(){var r;let e=S.useContext(Py),t=KA("useRouteError"),n=jy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function GA(){let{router:e}=VA("useNavigate"),t=jy("useNavigate"),n=S.useRef(!1);return C1(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{qn(n.current,E1),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Ew={};function P1(e,t,n){!t&&!Ew[e]&&(Ew[e]=!0,qn(!1,n))}S.memo(QA);function QA({routes:e,future:t,state:n,unstable_onError:r}){return T1(e,void 0,n,r,t)}function A1({to:e,replace:t,state:n,relative:r}){xt(Fa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(Ir);qn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(Dr),{pathname:o}=Yn(),a=Jn(),l=Ty(e,Cy(i),o,r==="path"),u=JSON.stringify(l);return S.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function Yt(e){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){xt(!Fa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=vo(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:p="default"}=n,m=S.useMemo(()=>{let _=ws(l,o);return _==null?null:{location:{pathname:_,search:u,hash:c,state:f,key:p},navigationType:r}},[o,l,u,c,f,p,r]);return qn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:S.createElement(Ir.Provider,{value:a},S.createElement(Iu.Provider,{children:t,value:m}))}function JA({children:e,location:t}){return $A(Em(e),t)}function Em(e,t=[]){let n=[];return S.Children.forEach(e,(r,s)=>{if(!S.isValidElement(r))return;let i=[...t,s];if(r.type===S.Fragment){n.push.apply(n,Em(r.props.children,i));return}xt(r.type===Yt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Em(r.props.children,i)),n.push(o)}),n}var ld="get",ud="application/x-www-form-urlencoded";function Sf(e){return e!=null&&typeof e.tagName=="string"}function ZA(e){return Sf(e)&&e.tagName.toLowerCase()==="button"}function XA(e){return Sf(e)&&e.tagName.toLowerCase()==="form"}function ej(e){return Sf(e)&&e.tagName.toLowerCase()==="input"}function tj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nj(e,t){return e.button===0&&(!t||t==="_self")&&!tj(e)}function Cm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function rj(e,t){let n=Cm(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Lc=null;function sj(){if(Lc===null)try{new FormData(document.createElement("form"),0),Lc=!1}catch{Lc=!0}return Lc}var ij=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ep(e){return e!=null&&!ij.has(e)?(qn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ud}"`),null):e}function oj(e,t){let n,r,s,i,o;if(XA(e)){let a=e.getAttribute("action");r=a?ws(a,t):null,n=e.getAttribute("method")||ld,s=ep(e.getAttribute("enctype"))||ud,i=new FormData(e)}else if(ZA(e)||ej(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?ws(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ld,s=ep(e.getAttribute("formenctype"))||ep(a.getAttribute("enctype"))||ud,i=new FormData(a,e),!sj()){let{name:u,type:c,value:f}=e;if(c==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,f)}}else{if(Sf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ld,r=null,s=ud,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function aj(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&ws(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function lj(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uj(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function cj(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await lj(i,n);return o.links?o.links():[]}return[]}));return pj(r.flat(1).filter(uj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Cw(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function dj(e,t,{includeHydrateFallback:n}={}){return fj(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function fj(e){return[...new Set(e)]}function hj(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function pj(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(hj(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function j1(){let e=S.useContext(Ma);return Oy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function mj(){let e=S.useContext(kf);return Oy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ry=S.createContext(void 0);Ry.displayName="FrameworkContext";function O1(){let e=S.useContext(Ry);return Oy(e,"You must render this element inside a <HydratedRouter> element"),e}function gj(e,t){let n=S.useContext(Ry),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,p=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[e]),S.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:hl(a,m),onBlur:hl(l,_),onMouseEnter:hl(u,m),onMouseLeave:hl(c,_),onTouchStart:hl(f,m)}]:[!1,p,{}]}function hl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function yj({page:e,...t}){let{router:n}=j1(),r=S.useMemo(()=>b1(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(wj,{page:e,matches:r,...t}):null}function vj(e){let{manifest:t,routeModules:n}=O1(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return cj(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function wj({page:e,matches:t,...n}){let r=Yn(),{manifest:s,routeModules:i}=O1(),{basename:o}=j1(),{loaderData:a,matches:l}=mj(),u=S.useMemo(()=>Cw(e,t,l,s,r,"data"),[e,t,l,s,r]),c=S.useMemo(()=>Cw(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,v=!1;if(t.forEach(g=>{var b;let y=s.routes[g.route.id];!y||!y.hasLoader||(!u.some(C=>C.route.id===g.route.id)&&g.route.id in a&&((b=i[g.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?v=!0:_.add(g.route.id))}),_.size===0)return[];let w=aj(e,o,"data");return v&&_.size>0&&w.searchParams.set("_routes",t.filter(g=>_.has(g.route.id)).map(g=>g.route.id).join(",")),[w.pathname+w.search]},[o,a,r,s,u,t,e,i]),p=S.useMemo(()=>dj(c,s),[c,s]),m=vj(c);return S.createElement(S.Fragment,null,f.map(_=>S.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),p.map(_=>S.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),m.map(({key:_,link:v})=>S.createElement("link",{key:_,nonce:n.nonce,...v})))}function bj(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var R1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R1&&(window.__reactRouterVersion="7.9.3")}catch{}function xj({basename:e,children:t,window:n}){let r=S.useRef();r.current==null&&(r.current=lA({window:n,v5Compat:!0}));let s=r.current,[i,o]=S.useState({action:s.action,location:s.location}),a=S.useCallback(l=>{S.startTransition(()=>o(l))},[o]);return S.useLayoutEffect(()=>s.listen(a),[s,a]),S.createElement(YA,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var I1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vn=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...p},m){let{basename:_}=S.useContext(Ir),v=typeof u=="string"&&I1.test(u),w,g=!1;if(typeof u=="string"&&v&&(w=u,R1))try{let F=new URL(window.location.href),z=u.startsWith("//")?new URL(F.protocol+u):new URL(u),he=ws(z.pathname,_);z.origin===F.origin&&he!=null?u=he+z.search+z.hash:g=!0}catch{qn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=NA(u,{relative:s}),[b,C,O]=gj(r,p),I=Ej(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function R(F){t&&t(F),F.defaultPrevented||I(F)}let $=S.createElement("a",{...p,...O,href:w||y,onClick:g||i?t:R,ref:bj(m,C),target:l,"data-discover":!v&&n==="render"?"true":void 0});return b&&!v?S.createElement(S.Fragment,null,$,S.createElement(yj,{page:y})):$});Vn.displayName="Link";var _j=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let f=Du(o,{relative:u.relative}),p=Yn(),m=S.useContext(kf),{navigator:_,basename:v}=S.useContext(Ir),w=m!=null&&Oj(f)&&a===!0,g=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,y=p.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&v&&(b=ws(b,v)||b);const C=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let O=y===g||!s&&y.startsWith(g)&&y.charAt(C)==="/",I=b!=null&&(b===g||!s&&b.startsWith(g)&&b.charAt(g.length)==="/"),R={isActive:O,isPending:I,isTransitioning:w},$=O?t:void 0,F;typeof r=="function"?F=r(R):F=[r,O?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(R):i;return S.createElement(Vn,{...u,"aria-current":$,className:F,ref:c,style:z,to:o,viewTransition:a},typeof l=="function"?l(R):l)});_j.displayName="NavLink";var kj=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=ld,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...p},m)=>{let _=Aj(),v=jj(a,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&I1.test(a),y=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let C=b.nativeEvent.submitter,O=(C==null?void 0:C.getAttribute("formmethod"))||o;_(C||b.currentTarget,{fetcherKey:t,method:O,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:f})};return S.createElement("form",{ref:m,method:w,action:v,onSubmit:r?l:y,...p,"data-discover":!g&&e==="render"?"true":void 0})});kj.displayName="Form";function Sj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D1(e){let t=S.useContext(Ma);return xt(t,Sj(e)),t}function Ej(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Jn(),l=Yn(),u=Du(e,{relative:i});return S.useCallback(c=>{if(nj(c,t)){c.preventDefault();let f=n!==void 0?n:fu(l)===fu(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}function Cj(e){qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=S.useRef(Cm(e)),n=S.useRef(!1),r=Yn(),s=S.useMemo(()=>rj(r.search,n.current?null:t.current),[r.search]),i=Jn(),o=S.useCallback((a,l)=>{const u=Cm(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var Tj=0,Pj=()=>`__${String(++Tj)}__`;function Aj(){let{router:e}=D1("useSubmit"),{basename:t}=S.useContext(Ir),n=HA();return S.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=oj(r,t);if(s.navigate===!1){let c=s.fetcherKey||Pj();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function jj(e,{relative:t}={}){let{basename:n}=S.useContext(Ir),r=S.useContext(Dr);xt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Du(e||".",{relative:t})},o=Yn();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:hs([n,i.pathname])),fu(i)}function Oj(e,{relative:t}={}){let n=S.useContext(S1);xt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=D1("useViewTransitionState"),s=Du(e,{relative:t});if(!n.isTransitioning)return!1;let i=ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zd(s.pathname,o)!=null||zd(s.pathname,i)!=null}const wi="https://script.google.com/macros/s/AKfycbzcaAE9OcLaqxKYvLyMdH4HwodXdw1zSY5QtKmztDNd9Bfaj90URCzWB1j1i6A9a2a5Bw/exec",N1="radtpoqypgqetijvopho",Rj=["searchIndex","allSongs"],Ij=e=>["book-download-status",e],Dj="modulepreload",Nj=function(e){return"/new-sankeertan/"+e},Tw={},Ua=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Nj(l),l in Tw)return;Tw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Dj,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Lj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Iy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Pw extends Iy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Aw extends Iy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jw extends Iy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Tm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Tm||(Tm={}));var $j=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Mj{constructor(t,{headers:n={},customFetch:r,region:s=Tm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Lj(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $j(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const f=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let p;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(u["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(u["Content-Type"]="application/json",p=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Pw(g)}),_=m.headers.get("x-relay-error");if(_&&_==="true")throw new Aw(m);if(!m.ok)throw new jw(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield m.json():v==="application/octet-stream"?w=yield m.blob():v==="text/event-stream"?w=m:v==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Pw(i)}:{data:null,error:i,response:i instanceof jw||i instanceof Aw?i.context:void 0}}})}}var On={},Dy={},Ef={},Nu={},Cf={},Tf={},Fj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ja=Fj();const Bj=ja.fetch,L1=ja.fetch.bind(ja),$1=ja.Headers,Uj=ja.Request,zj=ja.Response,za=Object.freeze(Object.defineProperty({__proto__:null,Headers:$1,Request:Uj,Response:zj,default:L1,fetch:Bj},Symbol.toStringTag,{value:"Module"})),Vj=NT(za);var Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});let Kj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Pf.default=Kj;var M1=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tf,"__esModule",{value:!0});const Wj=M1(Vj),Hj=M1(Pf);let qj=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Wj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,f=null,p=null,m=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const w=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,_="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{c=JSON.parse(w),Array.isArray(c)&&i.status===404&&(f=[],c=null,m=200,_="OK")}catch{i.status===404&&w===""?(m=204,_="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,_="OK"),c&&this.shouldThrowOnError)throw new Hj.default(c)}return{error:c,data:f,count:p,status:m,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Tf.default=qj;var Gj=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});const Qj=Gj(Tf);let Yj=class extends Qj.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Cf.default=Yj;var Jj=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nu,"__esModule",{value:!0});const Zj=Jj(Cf);let Xj=class extends Zj.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Nu.default=Xj;var eO=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});const pl=eO(Nu);let tO=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new pl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new pl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new pl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new pl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new pl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ef.default=tO;var F1=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dy,"__esModule",{value:!0});const nO=F1(Ef),rO=F1(Nu);let sO=class B1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new nO.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new B1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new rO.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Dy.default=sO;var Va=en&&en.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(On,"__esModule",{value:!0});On.PostgrestError=On.PostgrestBuilder=On.PostgrestTransformBuilder=On.PostgrestFilterBuilder=On.PostgrestQueryBuilder=On.PostgrestClient=void 0;const U1=Va(Dy);On.PostgrestClient=U1.default;const z1=Va(Ef);On.PostgrestQueryBuilder=z1.default;const V1=Va(Nu);On.PostgrestFilterBuilder=V1.default;const K1=Va(Cf);On.PostgrestTransformBuilder=K1.default;const W1=Va(Tf);On.PostgrestBuilder=W1.default;const H1=Va(Pf);On.PostgrestError=H1.default;var iO=On.default={PostgrestClient:U1.default,PostgrestQueryBuilder:z1.default,PostgrestFilterBuilder:V1.default,PostgrestTransformBuilder:K1.default,PostgrestBuilder:W1.default,PostgrestError:H1.default};const{PostgrestClient:oO,PostgrestQueryBuilder:pU,PostgrestFilterBuilder:mU,PostgrestTransformBuilder:gU,PostgrestBuilder:yU,PostgrestError:vU}=iO;class aO{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const lO="2.74.0",uO=`realtime-js/${lO}`,cO="1.0.0",Pm=1e4,dO=1e3,fO=100;var Ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ml||(Ml={}));var Vt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Vt||(Vt={}));var Tr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Tr||(Tr={}));var Am;(function(e){e.websocket="websocket"})(Am||(Am={}));var Mi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Mi||(Mi={}));class hO{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class q1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pt||(pt={}));const Ow=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=pO(o,e,t,s),i),{}):{}},pO=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?G1(i,o):jm(o)},G1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return vO(t,n)}switch(e){case pt.bool:return mO(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return gO(t);case pt.json:case pt.jsonb:return yO(t);case pt.timestamp:return wO(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return jm(t);default:return jm(t)}},jm=e=>e,mO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},gO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},vO=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>G1(t,a))}return e},wO=e=>typeof e=="string"?e.replace(" ","T"):e,Q1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class tp{constructor(t,n,r={},s=Pm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rw||(Rw={}));class Fl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Fl.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Fl.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const p=c.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),_=c.filter(w=>m.indexOf(w.presence_ref)<0),v=f.filter(w=>p.indexOf(w.presence_ref)<0);_.length>0&&(a[u]=_),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(m=>m.presence_ref),p=c.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Iw||(Iw={}));var Bl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Bl||(Bl={}));var is;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(is||(is={}));class Ny{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new tp(this,Tr.join,this.params,this.timeout),this.rejoinTimer=new q1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Fl(this),this.broadcastEndpointURL=Q1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Bl.PRESENCE]&&this.bindings[Bl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(is.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(is.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var _;if(this.socket.setAuth(),m===void 0){t==null||t(is.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(_=v==null?void 0:v.length)!==null&&_!==void 0?_:0,g=[];for(let y=0;y<w;y++){const b=v[y],{filter:{event:C,schema:O,table:I,filter:R}}=b,$=m&&m[y];if($&&$.event===C&&$.schema===O&&$.table===I&&$.filter===R)g.push(Object.assign(Object.assign({},b),{id:$.id}));else{this.unsubscribe(),this.state=Vt.errored,t==null||t(is.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(is.SUBSCRIBED);return}}).receive("error",m=>{this.state=Vt.errored,t==null||t(is.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(is.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Vt.joined&&t===Bl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new tp(this,Tr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new tp(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>fO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Tr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var _,v,w;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((w=(v=m.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var _,v,w,g,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,O=(_=m.filter)===null||_===void 0?void 0:_.event;return C&&((v=n.ids)===null||v===void 0?void 0:v.includes(C))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const C=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return C==="*"||C===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:v,table:w,commit_timestamp:g,type:y,errors:b}=_;p=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(_))}m.callback(p,r)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ny.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Tr.close,{},t)}_onError(t){this._on(Tr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ow(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ow(t.columns,t.old_record)),n}}const np=()=>{},$c={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bO=[1e3,2e3,5e3,1e4],xO=1e4,_O=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kO{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pm,this.transport=null,this.heartbeatIntervalMs=$c.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=np,this.ref=0,this.reconnectTimer=null,this.logger=np,this.conn=null,this.sendBuffer=[],this.serializer=new hO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ua(async()=>{const{default:a}=await Promise.resolve().then(()=>za);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Am.websocket}`,this.httpEndpoint=Q1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=aO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cO}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ml.connecting:return Mi.Connecting;case Ml.open:return Mi.Open;case Ml.closing:return Mi.Closing;default:return Mi.Closed}}isConnected(){return this.connectionState()===Mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Ny(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(dO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$c.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Tr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([_O],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:uO};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Tr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new q1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$c.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Pm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:$c.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:np,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>bO[f-1]||xO,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ly extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ft(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class SO extends Ly{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Om extends Ly{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var EO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Y1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},CO=()=>EO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ua(()=>Promise.resolve().then(()=>za),void 0)).Response:Response}),Rm=e=>{if(Array.isArray(e))return e.map(n=>Rm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Rm(r)}),t},TO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const rp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),PO=(e,t,n)=>wo(void 0,void 0,void 0,function*(){const r=yield CO();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new SO(rp(s),i,o))}).catch(s=>{t(new Om(rp(s),s))}):t(new Om(rp(e),e))}),AO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(TO(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Lu(e,t,n,r,s,i){return wo(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,AO(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>PO(l,a,r))})})}function Vd(e,t,n,r){return wo(this,void 0,void 0,function*(){return Lu(e,"GET",t,n,r)})}function Ur(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Lu(e,"POST",t,r,s,n)})}function Im(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Lu(e,"PUT",t,r,s,n)})}function jO(e,t,n,r){return wo(this,void 0,void 0,function*(){return Lu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function J1(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Lu(e,"DELETE",t,r,s,n)})}var OO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class RO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return OO(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}}var IO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class DO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new RO(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return IO(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}}var Cn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const NO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class LO{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Y1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Cn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Dw),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?Im:Ur)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Cn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Dw.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield Im(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ft(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Cn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ur(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ly("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}update(t,n,r){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Cn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ur(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Cn(this,void 0,void 0,function*(){try{const s=yield Ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>Vd(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new DO(l,this.shouldThrowOnError)}info(t){return Cn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Vd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Rm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}exists(t){return Cn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield jO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r)&&r instanceof Om){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield J1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}list(t,n,r){return Cn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},NO),n),{prefix:t||""});return{data:yield Ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}listV2(t,n){return Cn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ur(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const $O="2.74.0",MO={"X-Client-Info":`storage-js/${$O}`};var Oo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class FO{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MO),n),this.fetch=Y1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Oo(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}getBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}createBucket(t){return Oo(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Oo(this,void 0,void 0,function*(){try{return{data:yield Im(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield J1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}}class BO extends FO{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new LO(this.url,this.headers,t,this.fetch)}}const UO="2.74.0";let kl="";typeof Deno<"u"?kl="deno":typeof document<"u"?kl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kl="react-native":kl="node";const zO={"X-Client-Info":`supabase-js-${kl}/${UO}`},VO={headers:zO},KO={schema:"public"},WO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HO={};var qO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const GO=e=>{let t;return e?t=e:typeof fetch>"u"?t=L1:t=fetch,(...n)=>t(...n)},QO=()=>typeof Headers>"u"?$1:Headers,YO=(e,t,n)=>{const r=GO(n),s=QO();return(i,o)=>qO(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var JO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function ZO(e){return e.endsWith("/")?e:e+"/"}function XO(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>JO(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function eR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ZO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Z1="2.74.0",Mo=30*1e3,Dm=3,sp=Dm*Mo,tR="http://localhost:9999",nR="supabase.auth.token",rR={"X-Client-Info":`gotrue-js/${Z1}`},Nm="X-Supabase-Api-Version",X1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iR=10*60*1e3;class hu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class oR extends hu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function aR(e){return Ke(e)&&e.name==="AuthApiError"}class Fi extends hu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class bi extends hu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ds extends bi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lR(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class Ro extends bi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mc extends bi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fc extends bi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uR(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class Nw extends bi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lm extends bi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ip(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class Lw extends bi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class $m extends bi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$w=` 	
\r=`.split(""),cR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$w.length;t+=1)e[$w[t].charCodeAt(0)]=-2;for(let t=0;t<Kd.length;t+=1)e[Kd[t].charCodeAt(0)]=t;return e})();function Mw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Kd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Kd[r]),t.queuedBits-=6}}function eS(e,t,n){const r=cR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Fw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{hR(o,r,n)};for(let o=0;o<e.length;o+=1)eS(e.charCodeAt(o),s,i);return t.join("")}function dR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fR(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}dR(r,t)}}function hR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ua(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)eS(e.charCodeAt(s),n,r);return new Uint8Array(t)}function pR(e){const t=[];return fR(e,n=>t.push(n)),new Uint8Array(t)}function Ki(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Mw(s,n,r)),Mw(null,n,r),t.join("")}function mR(e){return Math.round(Date.now()/1e3)+e}function gR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Un=()=>typeof window<"u"&&typeof document<"u",ji={tested:!1,writable:!1},tS=()=>{if(!Un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ji.tested)return ji.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ji.tested=!0,ji.writable=!0}catch{ji.tested=!0,ji.writable=!1}return ji.writable};function yR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const nS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},vR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Is=async(e,t)=>{await e.removeItem(t)};class Af{constructor(){this.promise=new Af.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Af.promiseConstructor=Promise;function op(e){const t=e.split(".");if(t.length!==3)throw new $m("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!sR.test(t[r]))throw new $m("JWT not in base64url format");return{header:JSON.parse(Fw(t[0])),payload:JSON.parse(Fw(t[1])),signature:ua(t[2]),raw:{header:t[0],payload:t[1]}}}async function wR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function bR(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function xR(e){return("0"+e.toString(16)).substr(-2)}function _R(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,xR).join("")}async function kR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function SR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await kR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Io(e,t,n=!1){const r=_R();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Fo(e,`${t}-code-verifier`,s);const i=await SR(r);return[i,r===i?"plain":"s256"]}const ER=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CR(e){const t=e.headers.get(Nm);if(!t||!t.match(ER))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function TR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const AR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(e){if(!AR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ap(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bw(e){return JSON.parse(JSON.stringify(e))}var jR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ni=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OR=[502,503,504];async function Uw(e){var t;if(!vR(e))throw new Lm(Ni(e),0);if(OR.includes(e.status))throw new Lm(Ni(e),e.status);let n;try{n=await e.json()}catch(i){throw new Fi(Ni(i),i)}let r;const s=CR(e);if(s&&s.getTime()>=X1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Lw(Ni(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ds}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Lw(Ni(n),e.status,n.weak_password.reasons);throw new oR(Ni(n),e.status||500,r)}const RR=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ge(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Nm]||(i[Nm]=X1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await IR(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function IR(e,t,n,r,s,i){const o=RR(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Lm(Ni(l),0)}if(a.ok||await Uw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Uw(l)}}function xr(e){var t;let n=null;LR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=mR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function zw(e){const t=xr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function DR(e){return{data:e,error:null}}function NR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=jR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Vw(e){return e}function LR(e){return e.access_token&&e.refresh_token&&e.expires_in}const lp=["global","local","others"];var $R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class MR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=nS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=lp[0]){if(lp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lp.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=$R(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ke(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Do(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Do(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Do(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Do(t.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Do(t.userId),Do(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ke(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}function Kw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const No={debug:!!(globalThis&&tS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FR extends rS{}async function BR(e,t,n){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),No.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{No.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw No.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(No.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function UR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sS(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function zR(e){return parseInt(e,16)}function VR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function KR(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:f,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=sS(e.address),_=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",w=`${_} wants you to sign in with your Ethereum account:
${m}

${v}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);y+=`
- ${b}`}g+=y}return`${w}
${g}`}class Mt extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Wd extends Mt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function WR({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Mt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(oS(o)){if(i.rp.id!==o)return new Mt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function HR({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Mt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(oS(r)){if(n.rpId!==r)return new Mt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var iS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class qR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const GR=new qR;function QR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=iS(e,["challenge","user","excludeCredentials"]),i=ua(t).buffer,o=Object.assign(Object.assign({},n),{id:ua(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ua(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function YR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=iS(e,["challenge","allowCredentials"]),s=ua(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ua(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function JR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ki(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ki(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ZR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ki(new Uint8Array(s.authenticatorData)),clientDataJSON:Ki(new Uint8Array(s.clientDataJSON)),signature:Ki(new Uint8Array(s.signature)),userHandle:s.userHandle?Ki(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function oS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ww(){var e,t;return!!(Un()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function XR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wd("Browser returned unexpected credential type",t)}:{data:null,error:new Wd("Empty credential response",t)}}catch(t){return{data:null,error:WR({error:t,options:e})}}}async function eI(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wd("Browser returned unexpected credential type",t)}:{data:null,error:new Wd("Empty credential response",t)}}catch(t){return{data:null,error:HR({error:t,options:e})}}}const tI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},nI={userVerification:"preferred",hints:["security-key"]};function Hd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Hd(a,o):r[i]=Hd(o)}else r[i]=o}return r}function rI(e,t){return Hd(tI,e,t||{})}function sI(e,t){return Hd(nI,e,t||{})}class iI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??GR.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=rI(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:f}=await XR({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=sI(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:f}=await eI(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new hu("rpId is required for WebAuthn authentication")};try{if(!Ww())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new hu("rpId is required for WebAuthn registration")};try{if(!Ww())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ke(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in register",o)}}}}UR();const oI={url:tR,storageKey:nR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hw(e,t,n){return await n()}const Lo={};class pu{get jwks(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pu.nextInstanceID,pu.nextInstanceID+=1,this.instanceID>0&&Un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},oI),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new MR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nS(s.fetch),this.lock=s.lock||Hw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Un()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=BR:this.lock=Hw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iI(this)},this.persistSession?(s.storage?this.storage=s.storage:tS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),Un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Z1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=yR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Un()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uR(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ke(n)?{error:n}:{error:new Fi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:xr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:f,options:p}=t;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Io(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:_},xform:xr})}else if("phone"in t){const{phone:c,password:f,options:p}=t;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:xr})}else throw new Mc("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zw})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zw})}else throw new Mc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ro}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,c,f,p;let m,_;if("message"in t)m=t.message,_=t.signature;else{const{chain:v,wallet:w,statement:g,options:y}=t;let b;if(Un())if(typeof w=="object")b=w;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")b=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const C=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),O=await b.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=sS(O[0]);let R=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const F=await b.request({method:"eth_chainId"});R=zR(F)}const $={domain:C.host,address:I,statement:g,uri:C.href,version:"1",chainId:R,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=KR($),_=await b.request({method:"personal_sign",params:[VR(m),I]})}try{const{data:v,error:w}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:_},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:xr});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Ro}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(Ke(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,f,p,m;let _,v;if("message"in t)_=t.message,v=t.signature;else{const{chain:w,wallet:g,statement:y,options:b}=t;let C;if(Un())if(typeof g=="object")C=g;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))C=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const O=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const I=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),y?{statement:y}:null));let R;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")R=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)R=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)_=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),v=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${O.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(c=b==null?void 0:b.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const I=await C.signMessage(new TextEncoder().encode(_),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:w,error:g}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Ki(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:xr});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ro}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(Ke(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await Oi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:xr});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ro}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ro}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Io(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Mc("You must provide either an email or phone number.")}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Io(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:DR})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ds;const{error:s}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Mc("You must provide either an email or phone number and a type")}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<sp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Oi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ap()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(n){if(Ke(n))return lR(n)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ds;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Io(this.storage,this.storageKey));const{data:u,error:c}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Us});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=op(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ds;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Un())throw new Fc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Nw("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Fc("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let p=c+f;l&&(p=parseInt(l));const m=p-c;m*1e3<=Mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const _=p-f;c-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,c):c-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,c);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(aR(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=gR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Io(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Un()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xr}),{data:p,error:m}=f;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Ro}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await bR(async s=>(s>0&&await wR(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ip(i)&&Date.now()+o-r<Mo})}catch(r){if(this._debug(n,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Un()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Oi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fo(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ap()}else if(s&&!s.user&&!s.user){const o=await Oi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Is(this.storage,this.storageKey+"-user"),await Fo(this.storage,this.storageKey,s)):s.user=ap()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<sp;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${sp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ip(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Af;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ke(i)){const o={data:null,error:i};return ip(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Bw(s);await Fo(this.storage,this.storageKey,i)}else{const s=Bw(n);await Fo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mo}ms, refresh threshold is ${Dm} ticks`),s<=Dm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Io(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?JR(t.webauthn.credential_response):ZR(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:QR(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:YR(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=op(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+iR>s)return r;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:_}=await this.getSession();if(_||!m.session)return{data:null,error:_};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=op(r);n!=null&&n.allowExpired||TR(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=PR(s.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,pR(`${a}.${l}`)))throw new $m("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}pu.nextInstanceID=0;const aI=pu;class lI extends aI{constructor(t){super(t)}}var uI=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class cI{constructor(t,n,r){var s,i,o;this.supabaseUrl=t,this.supabaseKey=n;const a=eR(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:KO,realtime:HO,auth:Object.assign(Object.assign({},WO),{storageKey:l}),global:VO},c=XO(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=YO(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new oO(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new BO(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Mj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return uI(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lI({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new kO(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dI=(e,t,n)=>new cI(e,t,n);function fI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hI="https://"+N1+".supabase.co",pI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",mI=hI,gI=pI,zt=dI(mI,gI),$y=S.createContext({session:null,setSession:()=>{},isLoading:!0}),yI=({children:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(!0);S.useEffect(()=>{zt.auth.getSession().then(({data:{session:a}})=>{n(a),s(!1)});const{data:{subscription:o}}=zt.auth.onAuthStateChange((a,l)=>{n(l)});return()=>{console.log("AUTH_DEBUG: 5. Cleanup function running."),o.unsubscribe()}},[]);const i={session:t,setSession:n,isLoading:r};return k.jsx($y.Provider,{value:i,children:e})},xi=()=>S.useContext($y),vI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(null),l=Jn(),{setSession:u}=xi(),c=async f=>{f.preventDefault(),i(!0),a(null);try{const{data:{session:p},error:m}=await zt.auth.signInWithPassword({email:e,password:n});if(m)a(m.message);else if(p){u(p);const _=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(_||"/categories",{replace:!0})}}catch(p){a(p.message||"An unexpected error occurred during login.")}finally{i(!1)}};return k.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:k.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),k.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:k.jsxs("div",{className:"max-w-md mx-auto",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),k.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),k.jsx("div",{children:o&&k.jsx("p",{className:"text-red-500",children:o})}),k.jsxs("div",{className:"divide-y divide-gray-200",children:[k.jsx("form",{onSubmit:c,children:k.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:f=>t(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),k.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),k.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),k.jsx("div",{className:"relative",children:k.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:s,children:s?"Logging in...":"Login"})})]})}),k.jsxs("p",{children:["Don't have an account? ",k.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),k.jsxs("p",{children:["Forgot your password? ",k.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},wI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(null),l=async u=>{u.preventDefault(),i(!0),a(null);try{const{error:c}=await zt.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{i(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Sign Up"}),o&&k.jsx("p",{style:{color:"red"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",children:"Password:"}),k.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:s,children:s?"Signing up...":"Sign Up"})]})]})},bI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(!1),[s,i]=S.useState(null),[o,a]=S.useState(null),l=async u=>{u.preventDefault(),r(!0),i(null),a(null);try{const{error:c}=await zt.auth.updateUser({password:e});c?i(c.message):(a("Password updated successfully!"),t(""))}catch(c){i(c.message||"An unexpected error occurred")}finally{r(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Change Password"}),s&&k.jsx("p",{style:{color:"red"},children:s}),o&&k.jsx("p",{style:{color:"green"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),k.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},xI="auth_redirect_sankeertan",_I=()=>{const e=Jn(),[t]=Cj(),[n,r]=S.useState(!0),[s,i]=S.useState(null),{setSession:o}=S.useContext($y);return S.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(f,p,m)=>{r(!0),i(null);try{let _;if(p==="invite"||p==="signup"||p==="email_change"||p==="magiclink"){const v=m;if(!v){i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}_=await zt.auth.verifyOtp({token:f,type:p,email:v})}else if(p==="recover"){e(`/reset-password?token=${f}`,{replace:!0});return}else if(p==="sms"){const v=m;if(!v){i("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}_=await zt.auth.verifyOtp({token:f,type:"sms",phone:v})}else{i(`Unsupported authentication type: ${p}`),r(!1),e("/login",{replace:!0});return}if(_!=null&&_.error)i(_.error.message);else{const{data:{session:v}}=await zt.auth.getSession();v&&o(v),localStorage.setItem(xI,"true"),e("/",{replace:!0})}}catch(_){i(_.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(i("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?k.jsx("div",{children:"Verifying your account..."}):s?k.jsxs("div",{children:["Error verifying account: ",s]}):null};var $u=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ks,jg,Zx,SI=(Zx=class{constructor(){We(this,Ks,kI);We(this,jg,!1)}setTimeoutProvider(e){$e(this,Ks,e)}setTimeout(e,t){return H(this,Ks).setTimeout(e,t)}clearTimeout(e){H(this,Ks).clearTimeout(e)}setInterval(e,t){return H(this,Ks).setInterval(e,t)}clearInterval(e){H(this,Ks).clearInterval(e)}},Ks=new WeakMap,jg=new WeakMap,Zx),Wi=new SI;function EI(e){setTimeout(e,0)}var po=typeof window>"u"||"Deno"in globalThis;function An(){}function CI(e,t){return typeof e=="function"?e(t):e}function Mm(e){return typeof e=="number"&&e>=0&&e!==1/0}function aS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ci(e,t){return typeof e=="function"?e(t):e}function or(e,t){return typeof e=="function"?e(t):e}function qw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==My(o,t.options))return!1}else if(!gu(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function Gw(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(mu(t.options.mutationKey)!==mu(i))return!1}else if(!gu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function My(e,t){return((t==null?void 0:t.queryKeyHashFn)||mu)(e)}function mu(e){return JSON.stringify(e,(t,n)=>Bm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function gu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>gu(e[n],t[n])):!1}var TI=Object.prototype.hasOwnProperty;function lS(e,t){if(e===t)return e;const n=Qw(e)&&Qw(t);if(!n&&!(Bm(e)&&Bm(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:i[u],f=e[c],p=t[c];if(f===p){a[c]=f,(n?u<s:TI.call(e,c))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){a[c]=p;continue}const m=lS(f,p);a[c]=m,m===f&&l++}return s===o&&l===s?e:a}function Fm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Qw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Bm(e){if(!Yw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Yw(e){return Object.prototype.toString.call(e)==="[object Object]"}function PI(e){return new Promise(t=>{Wi.setTimeout(t,e)})}function Um(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?lS(e,t):t}function AI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function jI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Fy=Symbol();function uS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Fy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function OI(e,t){return typeof e=="function"?e(...t):!!e}var Qi,Ws,da,Xx,RI=(Xx=class extends $u{constructor(){super();We(this,Qi);We(this,Ws);We(this,da);$e(this,da,t=>{if(!po&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Ws)||this.setEventListener(H(this,da))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Ws))==null||t.call(this),$e(this,Ws,void 0))}setEventListener(t){var n;$e(this,da,t),(n=H(this,Ws))==null||n.call(this),$e(this,Ws,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){H(this,Qi)!==t&&($e(this,Qi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof H(this,Qi)=="boolean"?H(this,Qi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Qi=new WeakMap,Ws=new WeakMap,da=new WeakMap,Xx),By=new RI;function zm(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var II=EI;function DI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=II;const i=a=>{t?e.push(a):s(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var sn=DI(),fa,Hs,ha,e_,NI=(e_=class extends $u{constructor(){super();We(this,fa,!0);We(this,Hs);We(this,ha);$e(this,ha,t=>{if(!po&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Hs)||this.setEventListener(H(this,ha))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Hs))==null||t.call(this),$e(this,Hs,void 0))}setEventListener(t){var n;$e(this,ha,t),(n=H(this,Hs))==null||n.call(this),$e(this,Hs,t(this.setOnline.bind(this)))}setOnline(t){H(this,fa)!==t&&($e(this,fa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return H(this,fa)}},fa=new WeakMap,Hs=new WeakMap,ha=new WeakMap,e_),qd=new NI;function LI(e){return Math.min(1e3*2**e,3e4)}function cS(e){return(e??"online")==="online"?qd.isOnline():!0}var Vm=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function dS(e){let t=!1,n=0,r;const s=zm(),i=()=>s.status!=="pending",o=v=>{var w;if(!i()){const g=new Vm(v);p(g),(w=e.onCancel)==null||w.call(e,g)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>By.isFocused()&&(e.networkMode==="always"||qd.isOnline())&&e.canRun(),c=()=>cS(e.networkMode)&&e.canRun(),f=v=>{i()||(r==null||r(),s.resolve(v))},p=v=>{i()||(r==null||r(),s.reject(v))},m=()=>new Promise(v=>{var w;r=g=>{(i()||u())&&v(g)},(w=e.onPause)==null||w.call(e)}).then(()=>{var v;r=void 0,i()||(v=e.onContinue)==null||v.call(e)}),_=()=>{if(i())return;let v;const w=n===0?e.initialPromise:void 0;try{v=w??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var I;if(i())return;const y=e.retry??(po?0:3),b=e.retryDelay??LI,C=typeof b=="function"?b(n,g):b,O=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!O){p(g);return}n++,(I=e.onFail)==null||I.call(e,n,g),PI(C).then(()=>u()?void 0:m()).then(()=>{t?p(g):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?_():m().then(_),s)}}var Yi,t_,fS=(t_=class{constructor(){We(this,Yi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mm(this.gcTime)&&$e(this,Yi,Wi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(po?1/0:5*60*1e3))}clearGcTimeout(){H(this,Yi)&&(Wi.clearTimeout(H(this,Yi)),$e(this,Yi,void 0))}},Yi=new WeakMap,t_),Ji,pa,ir,Zi,Jt,ku,Xi,Sr,rs,n_,$I=(n_=class extends fS{constructor(t){super();We(this,Sr);We(this,Ji);We(this,pa);We(this,ir);We(this,Zi);We(this,Jt);We(this,ku);We(this,Xi);$e(this,Xi,!1),$e(this,ku,t.defaultOptions),this.setOptions(t.options),this.observers=[],$e(this,Zi,t.client),$e(this,ir,H(this,Zi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,$e(this,Ji,Jw(this.options)),this.state=t.state??H(this,Ji),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Jt))==null?void 0:t.promise}setOptions(t){if(this.options={...H(this,ku),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Jw(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),$e(this,Ji,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,ir).remove(this)}setData(t,n){const r=Um(this.state.data,t,this.options);return it(this,Sr,rs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){it(this,Sr,rs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=H(this,Jt))==null?void 0:r.promise;return(s=H(this,Jt))==null||s.cancel(t),n?n.then(An).catch(An):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Ji))}isActive(){return this.observers.some(t=>or(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ci(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!aS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Jt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Jt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,ir).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(H(this,Jt)&&(H(this,Xi)?H(this,Jt).cancel({revert:!0}):H(this,Jt).cancelRetry()),this.scheduleGc()),H(this,ir).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||it(this,Sr,rs).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,f,p,m,_,v,w,g,y,b;if(this.state.fetchStatus!=="idle"&&((l=H(this,Jt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(H(this,Jt))return H(this,Jt).continueRetry(),H(this,Jt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(O=>O.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>($e(this,Xi,!0),r.signal)})},i=()=>{const C=uS(this.options,n),I=(()=>{const R={client:H(this,Zi),queryKey:this.queryKey,meta:this.meta};return s(R),R})();return $e(this,Xi,!1),this.options.persister?this.options.persister(C,I,this):C(I)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:H(this,Zi),state:this.state,fetchFn:i};return s(C),C})();(u=this.options.behavior)==null||u.onFetch(a,this),$e(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&it(this,Sr,rs).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),$e(this,Jt,dS({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof Vm&&C.revert&&this.setState({...H(this,pa),fetchStatus:"idle"}),r.abort()},onFail:(C,O)=>{it(this,Sr,rs).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{it(this,Sr,rs).call(this,{type:"pause"})},onContinue:()=>{it(this,Sr,rs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await H(this,Jt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(m=(p=H(this,ir).config).onSuccess)==null||m.call(p,C,this),(v=(_=H(this,ir).config).onSettled)==null||v.call(_,C,this.state.error,this),C}catch(C){if(C instanceof Vm){if(C.silent)return H(this,Jt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw it(this,Sr,rs).call(this,{type:"error",error:C}),(g=(w=H(this,ir).config).onError)==null||g.call(w,C,this),(b=(y=H(this,ir).config).onSettled)==null||b.call(y,this.state.data,C,this),C}finally{this.scheduleGc()}}},Ji=new WeakMap,pa=new WeakMap,ir=new WeakMap,Zi=new WeakMap,Jt=new WeakMap,ku=new WeakMap,Xi=new WeakMap,Sr=new WeakSet,rs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...hS(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return $e(this,pa,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),sn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,ir).notify({query:this,type:"updated",action:t})})},n_);function hS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Jw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Tn,ot,Su,vn,eo,ma,as,qs,Eu,ga,ya,to,no,Gs,va,ut,Sl,Km,Wm,Hm,qm,Gm,Qm,Ym,pS,r_,MI=(r_=class extends $u{constructor(t,n){super();We(this,ut);We(this,Tn);We(this,ot);We(this,Su);We(this,vn);We(this,eo);We(this,ma);We(this,as);We(this,qs);We(this,Eu);We(this,ga);We(this,ya);We(this,to);We(this,no);We(this,Gs);We(this,va,new Set);this.options=n,$e(this,Tn,t),$e(this,qs,null),$e(this,as,zm()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,ot).addObserver(this),Zw(H(this,ot),this.options)?it(this,ut,Sl).call(this):this.updateResult(),it(this,ut,qm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jm(H(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jm(H(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,it(this,ut,Gm).call(this),it(this,ut,Qm).call(this),H(this,ot).removeObserver(this)}setOptions(t){const n=this.options,r=H(this,ot);if(this.options=H(this,Tn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof or(this.options.enabled,H(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");it(this,ut,Ym).call(this),H(this,ot).setOptions(this.options),n._defaulted&&!Fm(this.options,n)&&H(this,Tn).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,ot),observer:this});const s=this.hasListeners();s&&Xw(H(this,ot),r,this.options,n)&&it(this,ut,Sl).call(this),this.updateResult(),s&&(H(this,ot)!==r||or(this.options.enabled,H(this,ot))!==or(n.enabled,H(this,ot))||ci(this.options.staleTime,H(this,ot))!==ci(n.staleTime,H(this,ot)))&&it(this,ut,Km).call(this);const i=it(this,ut,Wm).call(this);s&&(H(this,ot)!==r||or(this.options.enabled,H(this,ot))!==or(n.enabled,H(this,ot))||i!==H(this,Gs))&&it(this,ut,Hm).call(this,i)}getOptimisticResult(t){const n=H(this,Tn).getQueryCache().build(H(this,Tn),t),r=this.createResult(n,t);return BI(this,r)&&($e(this,vn,r),$e(this,ma,this.options),$e(this,eo,H(this,ot).state)),r}getCurrentResult(){return H(this,vn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&H(this,as).status==="pending"&&H(this,as).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){H(this,va).add(t)}getCurrentQuery(){return H(this,ot)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=H(this,Tn).defaultQueryOptions(t),r=H(this,Tn).getQueryCache().build(H(this,Tn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return it(this,ut,Sl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,vn)))}createResult(t,n){var F;const r=H(this,ot),s=this.options,i=H(this,vn),o=H(this,eo),a=H(this,ma),u=t!==r?t.state:H(this,Su),{state:c}=t;let f={...c},p=!1,m;if(n._optimisticResults){const z=this.hasListeners(),he=!z&&Zw(t,n),N=z&&Xw(t,r,n,s);(he||N)&&(f={...f,...hS(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:w}=f;m=f.data;let g=!1;if(n.placeholderData!==void 0&&m===void 0&&w==="pending"){let z;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(z=i.data,g=!0):z=typeof n.placeholderData=="function"?n.placeholderData((F=H(this,ya))==null?void 0:F.state.data,H(this,ya)):n.placeholderData,z!==void 0&&(w="success",m=Um(i==null?void 0:i.data,z,n),p=!0)}if(n.select&&m!==void 0&&!g)if(i&&m===(o==null?void 0:o.data)&&n.select===H(this,Eu))m=H(this,ga);else try{$e(this,Eu,n.select),m=n.select(m),m=Um(i==null?void 0:i.data,m,n),$e(this,ga,m),$e(this,qs,null)}catch(z){$e(this,qs,z)}H(this,qs)&&(_=H(this,qs),m=H(this,ga),v=Date.now(),w="error");const y=f.fetchStatus==="fetching",b=w==="pending",C=w==="error",O=b&&y,I=m!==void 0,$={status:w,fetchStatus:f.fetchStatus,isPending:b,isSuccess:w==="success",isError:C,isInitialLoading:O,isLoading:O,data:m,dataUpdatedAt:f.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:C&&!I,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&I,isStale:Uy(t,n),refetch:this.refetch,promise:H(this,as),isEnabled:or(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const z=J=>{$.status==="error"?J.reject($.error):$.data!==void 0&&J.resolve($.data)},he=()=>{const J=$e(this,as,$.promise=zm());z(J)},N=H(this,as);switch(N.status){case"pending":t.queryHash===r.queryHash&&z(N);break;case"fulfilled":($.status==="error"||$.data!==N.value)&&he();break;case"rejected":($.status!=="error"||$.error!==N.reason)&&he();break}}return $}updateResult(){const t=H(this,vn),n=this.createResult(H(this,ot),this.options);if($e(this,eo,H(this,ot).state),$e(this,ma,this.options),H(this,eo).data!==void 0&&$e(this,ya,H(this,ot)),Fm(n,t))return;$e(this,vn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!H(this,va).size)return!0;const o=new Set(i??H(this,va));return this.options.throwOnError&&o.add("error"),Object.keys(H(this,vn)).some(a=>{const l=a;return H(this,vn)[l]!==t[l]&&o.has(l)})};it(this,ut,pS).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&it(this,ut,qm).call(this)}},Tn=new WeakMap,ot=new WeakMap,Su=new WeakMap,vn=new WeakMap,eo=new WeakMap,ma=new WeakMap,as=new WeakMap,qs=new WeakMap,Eu=new WeakMap,ga=new WeakMap,ya=new WeakMap,to=new WeakMap,no=new WeakMap,Gs=new WeakMap,va=new WeakMap,ut=new WeakSet,Sl=function(t){it(this,ut,Ym).call(this);let n=H(this,ot).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(An)),n},Km=function(){it(this,ut,Gm).call(this);const t=ci(this.options.staleTime,H(this,ot));if(po||H(this,vn).isStale||!Mm(t))return;const r=aS(H(this,vn).dataUpdatedAt,t)+1;$e(this,to,Wi.setTimeout(()=>{H(this,vn).isStale||this.updateResult()},r))},Wm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,ot)):this.options.refetchInterval)??!1},Hm=function(t){it(this,ut,Qm).call(this),$e(this,Gs,t),!(po||or(this.options.enabled,H(this,ot))===!1||!Mm(H(this,Gs))||H(this,Gs)===0)&&$e(this,no,Wi.setInterval(()=>{(this.options.refetchIntervalInBackground||By.isFocused())&&it(this,ut,Sl).call(this)},H(this,Gs)))},qm=function(){it(this,ut,Km).call(this),it(this,ut,Hm).call(this,it(this,ut,Wm).call(this))},Gm=function(){H(this,to)&&(Wi.clearTimeout(H(this,to)),$e(this,to,void 0))},Qm=function(){H(this,no)&&(Wi.clearInterval(H(this,no)),$e(this,no,void 0))},Ym=function(){const t=H(this,Tn).getQueryCache().build(H(this,Tn),this.options);if(t===H(this,ot))return;const n=H(this,ot);$e(this,ot,t),$e(this,Su,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},pS=function(t){sn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(H(this,vn))}),H(this,Tn).getQueryCache().notify({query:H(this,ot),type:"observerResultsUpdated"})})},r_);function FI(e,t){return or(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Zw(e,t){return FI(e,t)||e.state.data!==void 0&&Jm(e,t,t.refetchOnMount)}function Jm(e,t,n){if(or(t.enabled,e)!==!1&&ci(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Uy(e,t)}return!1}function Xw(e,t,n,r){return(e!==t||or(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Uy(e,n)}function Uy(e,t){return or(t.enabled,e)!==!1&&e.isStaleByTime(ci(t.staleTime,e))}function BI(e,t){return!Fm(e.getCurrentResult(),t)}function eb(e){return{onFetch:(t,n)=>{var c,f,p,m,_;const r=t.options,s=(p=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((_=t.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=uS(t.options,t.fetchOptions),y=async(b,C,O)=>{if(v)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const R=(()=>{const he={client:t.client,queryKey:t.queryKey,pageParam:C,direction:O?"backward":"forward",meta:t.options.meta};return w(he),he})(),$=await g(R),{maxPages:F}=t.options,z=O?jI:AI;return{pages:z(b.pages,$,F),pageParams:z(b.pageParams,C,F)}};if(s&&i.length){const b=s==="backward",C=b?UI:tb,O={pages:i,pageParams:o},I=C(r,O);a=await y(O,I,b)}else{const b=e??i.length;do{const C=l===0?o[0]??r.initialPageParam:tb(r,a);if(l>0&&C==null)break;a=await y(a,C),l++}while(l<b)}return a};t.options.persister?t.fetchFn=()=>{var v,w;return(w=(v=t.options).persister)==null?void 0:w.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function tb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function UI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Cu,zr,wn,ro,Vr,Ns,s_,zI=(s_=class extends fS{constructor(t){super();We(this,Vr);We(this,Cu);We(this,zr);We(this,wn);We(this,ro);$e(this,Cu,t.client),this.mutationId=t.mutationId,$e(this,wn,t.mutationCache),$e(this,zr,[]),this.state=t.state||VI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,zr).includes(t)||(H(this,zr).push(t),this.clearGcTimeout(),H(this,wn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){$e(this,zr,H(this,zr).filter(n=>n!==t)),this.scheduleGc(),H(this,wn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,zr).length||(this.state.status==="pending"?this.scheduleGc():H(this,wn).remove(this))}continue(){var t;return((t=H(this,ro))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,f,p,m,_,v,w,g,y,b,C,O,I,R,$,F;const n=()=>{it(this,Vr,Ns).call(this,{type:"continue"})},r={client:H(this,Cu),meta:this.options.meta,mutationKey:this.options.mutationKey};$e(this,ro,dS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(z,he)=>{it(this,Vr,Ns).call(this,{type:"failed",failureCount:z,error:he})},onPause:()=>{it(this,Vr,Ns).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,wn).canRun(this)}));const s=this.state.status==="pending",i=!H(this,ro).canStart();try{if(s)n();else{it(this,Vr,Ns).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=H(this,wn).config).onMutate)==null?void 0:a.call(o,t,this,r));const he=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));he!==this.state.context&&it(this,Vr,Ns).call(this,{type:"pending",context:he,variables:t,isPaused:i})}const z=await H(this,ro).start();return await((f=(c=H(this,wn).config).onSuccess)==null?void 0:f.call(c,z,t,this.state.context,this,r)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,z,t,this.state.context,r)),await((v=(_=H(this,wn).config).onSettled)==null?void 0:v.call(_,z,null,this.state.variables,this.state.context,this,r)),await((g=(w=this.options).onSettled)==null?void 0:g.call(w,z,null,t,this.state.context,r)),it(this,Vr,Ns).call(this,{type:"success",data:z}),z}catch(z){try{throw await((b=(y=H(this,wn).config).onError)==null?void 0:b.call(y,z,t,this.state.context,this,r)),await((O=(C=this.options).onError)==null?void 0:O.call(C,z,t,this.state.context,r)),await((R=(I=H(this,wn).config).onSettled)==null?void 0:R.call(I,void 0,z,this.state.variables,this.state.context,this,r)),await((F=($=this.options).onSettled)==null?void 0:F.call($,void 0,z,t,this.state.context,r)),z}finally{it(this,Vr,Ns).call(this,{type:"error",error:z})}}finally{H(this,wn).runNext(this)}}},Cu=new WeakMap,zr=new WeakMap,wn=new WeakMap,ro=new WeakMap,Vr=new WeakSet,Ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),sn.batch(()=>{H(this,zr).forEach(r=>{r.onMutationUpdate(t)}),H(this,wn).notify({mutation:this,type:"updated",action:t})})},s_);function VI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ls,Er,Tu,i_,KI=(i_=class extends $u{constructor(t={}){super();We(this,ls);We(this,Er);We(this,Tu);this.config=t,$e(this,ls,new Set),$e(this,Er,new Map),$e(this,Tu,0)}build(t,n,r){const s=new zI({client:t,mutationCache:this,mutationId:++vc(this,Tu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){H(this,ls).add(t);const n=Bc(t);if(typeof n=="string"){const r=H(this,Er).get(n);r?r.push(t):H(this,Er).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,ls).delete(t)){const n=Bc(t);if(typeof n=="string"){const r=H(this,Er).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&H(this,Er).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Bc(t);if(typeof n=="string"){const r=H(this,Er).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Bc(t);if(typeof n=="string"){const s=(r=H(this,Er).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sn.batch(()=>{H(this,ls).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,ls).clear(),H(this,Er).clear()})}getAll(){return Array.from(H(this,ls))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Gw(n,r))}findAll(t={}){return this.getAll().filter(n=>Gw(t,n))}notify(t){sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return sn.batch(()=>Promise.all(t.map(n=>n.continue().catch(An))))}},ls=new WeakMap,Er=new WeakMap,Tu=new WeakMap,i_);function Bc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Kr,o_,WI=(o_=class extends $u{constructor(t={}){super();We(this,Kr);this.config=t,$e(this,Kr,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??My(s,n);let o=this.get(i);return o||(o=new $I({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){H(this,Kr).has(t.queryHash)||(H(this,Kr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=H(this,Kr).get(t.queryHash);n&&(t.destroy(),n===t&&H(this,Kr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,Kr).get(t)}getAll(){return[...H(this,Kr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>qw(t,r)):n}notify(t){sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Kr=new WeakMap,o_),Pt,Qs,Ys,wa,ba,Js,xa,_a,a_,HI=(a_=class{constructor(e={}){We(this,Pt);We(this,Qs);We(this,Ys);We(this,wa);We(this,ba);We(this,Js);We(this,xa);We(this,_a);$e(this,Pt,e.queryCache||new WI),$e(this,Qs,e.mutationCache||new KI),$e(this,Ys,e.defaultOptions||{}),$e(this,wa,new Map),$e(this,ba,new Map),$e(this,Js,0)}mount(){vc(this,Js)._++,H(this,Js)===1&&($e(this,xa,By.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pt).onFocus())})),$e(this,_a,qd.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pt).onOnline())})))}unmount(){var e,t;vc(this,Js)._--,H(this,Js)===0&&((e=H(this,xa))==null||e.call(this),$e(this,xa,void 0),(t=H(this,_a))==null||t.call(this),$e(this,_a,void 0))}isFetching(e){return H(this,Pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,Qs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=H(this,Pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ci(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return H(this,Pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=H(this,Pt).get(r.queryHash),i=s==null?void 0:s.state.data,o=CI(t,i);if(o!==void 0)return H(this,Pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return sn.batch(()=>H(this,Pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=H(this,Pt);sn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=H(this,Pt);return sn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=sn.batch(()=>H(this,Pt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(An).catch(An)}invalidateQueries(e,t={}){return sn.batch(()=>(H(this,Pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=sn.batch(()=>H(this,Pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(An)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(An)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=H(this,Pt).build(this,t);return n.isStaleByTime(ci(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(An).catch(An)}fetchInfiniteQuery(e){return e.behavior=eb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(An).catch(An)}ensureInfiniteQueryData(e){return e.behavior=eb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qd.isOnline()?H(this,Qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Pt)}getMutationCache(){return H(this,Qs)}getDefaultOptions(){return H(this,Ys)}setDefaultOptions(e){$e(this,Ys,e)}setQueryDefaults(e,t){H(this,wa).set(mu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,wa).values()],n={};return t.forEach(r=>{gu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){H(this,ba).set(mu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,ba).values()],n={};return t.forEach(r=>{gu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,Ys).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=My(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Fy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,Ys).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Pt).clear(),H(this,Qs).clear()}},Pt=new WeakMap,Qs=new WeakMap,Ys=new WeakMap,wa=new WeakMap,ba=new WeakMap,Js=new WeakMap,xa=new WeakMap,_a=new WeakMap,a_),mS=S.createContext(void 0),jf=e=>{const t=S.useContext(mS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qI=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),k.jsx(mS.Provider,{value:e,children:t})),gS=S.createContext(!1),GI=()=>S.useContext(gS);gS.Provider;function QI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var YI=S.createContext(QI()),JI=()=>S.useContext(YI),ZI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},XI=e=>{S.useEffect(()=>{e.clearReset()},[e])},eD=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||OI(n,[e.error,r])),tD=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},nD=(e,t)=>e.isLoading&&e.isFetching&&!t,rD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,nb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function sD(e,t,n){var f,p,m,_,v;const r=GI(),s=JI(),i=jf(),o=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",tD(o),ZI(o,s),XI(s);const a=!i.getQueryCache().get(o.queryHash),[l]=S.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(w=>{const g=c?l.subscribe(sn.batchCalls(w)):An;return l.updateResult(),g},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o)},[o,l]),rD(o,u))throw nb(o,l,s);if(eD({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((_=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||_.call(m,o,u),o.experimental_prefetchInRender&&!po&&nD(u,r)){const w=a?nb(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;w==null||w.catch(An).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Of(e,t){return sD(e,MI)}var yS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(en,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(x[P]=E[P])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,x=1,E=arguments.length;x<E;x++)for(var P in h=arguments[x])Object.prototype.hasOwnProperty.call(h,P)&&(d[P]=h[P]);return d}).apply(this,arguments)};function s(d,h,x){for(var E,P=0,j=h.length;P<j;P++)!E&&P in h||((E=E||Array.prototype.slice.call(h,0,P))[P]=h[P]);return d.concat(E||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:en,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(x){d[x]=h[x]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(d,h){return c.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(x){_(d,x,h[x])})}var m=Object.defineProperty;function _(d,h,x,E){m(d,h,l(x&&f(x,"get")&&typeof x.get=="function"?{get:x.get,set:x.set,configurable:!0}:{value:x,configurable:!0,writable:!0},E))}function v(d){return{from:function(h){return d.prototype=Object.create(h.prototype),_(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var w=Object.getOwnPropertyDescriptor,g=[].slice;function y(d,h,x){return g.call(d,h,x)}function b(d,h){return h(d)}function C(d){if(!d)throw new Error("Assertion Failed")}function O(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function I(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var x=[],E=0,P=h.length;E<P;++E){var j=I(d,h[E]);x.push(j)}return x}var D=h.indexOf(".");if(D!==-1){var B=d[h.substr(0,D)];return B==null?void 0:I(B,h.substr(D+1))}}function R(d,h,x){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){C(typeof x!="string"&&"length"in x);for(var E=0,P=h.length;E<P;++E)R(d,h[E],x[E])}else{var j,D,B=h.indexOf(".");B!==-1?(j=h.substr(0,B),(D=h.substr(B+1))===""?x===void 0?a(d)&&!isNaN(parseInt(j))?d.splice(j,1):delete d[j]:d[j]=x:R(B=!(B=d[j])||!f(d,j)?d[j]={}:B,D,x)):x===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=x}}function $(d){var h,x={};for(h in d)f(d,h)&&(x[h]=d[h]);return x}var F=[].concat;function z(d){return F.apply([],d)}var ze="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),he=new Set(ze.map(function(d){return i[d]})),N=null;function J(d){return N=new WeakMap,d=function h(x){if(!x||typeof x!="object")return x;var E=N.get(x);if(E)return E;if(a(x)){E=[],N.set(x,E);for(var P=0,j=x.length;P<j;++P)E.push(h(x[P]))}else if(he.has(x.constructor))E=x;else{var D,B=u(x);for(D in E=B===Object.prototype?{}:Object.create(B),N.set(x,E),x)f(x,D)&&(E[D]=h(x[D]))}return E}(d),N=null,d}var T={}.toString;function G(d){return T.call(d).slice(8,-1)}var ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ae=typeof ve=="symbol"?function(d){var h;return d!=null&&(h=d[ve])&&h.apply(d)}:function(){return null};function ce(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var se={};function ye(d){var h,x,E,P;if(arguments.length===1){if(a(d))return d.slice();if(this===se&&typeof d=="string")return[d];if(P=ae(d)){for(x=[];!(E=P.next()).done;)x.push(E.value);return x}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(x=new Array(h);h--;)x[h]=d[h];return x}for(h=arguments.length,x=new Array(h);h--;)x[h]=arguments[h];return x}var Z=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ee=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ee),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(d,h){this.name=d,this.message=h}function de(d,h){return d+". Errors: "+Object.keys(h).map(function(x){return h[x].toString()}).filter(function(x,E,P){return P.indexOf(x)===E}).join(`
`)}function le(d,h,x,E){this.failures=h,this.failedKeys=E,this.successCount=x,this.message=de(d,h)}function xe(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(x){return h[x]}),this.failuresByPos=h,this.message=de(d,this.failures)}v(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(le).from(K),v(xe).from(K);var Fe=er.reduce(function(d,h){return d[h]=h+"Error",d},{}),je=K,me=er.reduce(function(d,h){var x=h+"Error";function E(P,j){this.name=x,P?typeof P=="string"?(this.message="".concat(P).concat(j?`
 `+j:""),this.inner=j||null):typeof P=="object"&&(this.message="".concat(P.name," ").concat(P.message),this.inner=P):(this.message=ee[h]||x,this.inner=null)}return v(E).from(je),d[h]=E,d},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var Xe=Ee.reduce(function(d,h){return d[h+"Error"]=me[h],d},{}),Ye=er.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=me[h]),d},{});function qe(){}function ct(d){return d}function A(d,h){return d==null||d===ct?h:function(x){return h(d(x))}}function ge(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function fe(d,h){return d===qe?h:function(){var x=d.apply(this,arguments);x!==void 0&&(arguments[0]=x);var E=this.onsuccess,P=this.onerror;this.onsuccess=null,this.onerror=null;var j=h.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?ge(E,this.onsuccess):E),P&&(this.onerror=this.onerror?ge(P,this.onerror):P),j!==void 0?j:x}}function M(d,h){return d===qe?h:function(){d.apply(this,arguments);var x=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?ge(x,this.onsuccess):x),E&&(this.onerror=this.onerror?ge(E,this.onerror):E)}}function L(d,h){return d===qe?h:function(x){var E=d.apply(this,arguments);l(x,E);var P=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,x=h.apply(this,arguments),P&&(this.onsuccess=this.onsuccess?ge(P,this.onsuccess):P),j&&(this.onerror=this.onerror?ge(j,this.onerror):j),E===void 0?x===void 0?void 0:x:l(E,x)}}function X(d,h){return d===qe?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function _e(d,h){return d===qe?h:function(){var x=d.apply(this,arguments);if(x&&typeof x.then=="function"){for(var E=this,P=arguments.length,j=new Array(P);P--;)j[P]=arguments[P];return x.then(function(){return h.apply(E,j)})}return h.apply(this,arguments)}}Ye.ModifyError=le,Ye.DexieError=K,Ye.BulkError=xe;var we=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(d){we=d}var ke={},Le=100,ze=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,u(h),d]}(),Ee=ze[0],er=ze[1],ze=ze[2],er=er&&er.then,tt=Ee&&Ee.constructor,Ze=!!ze,Ot=function(d,h){yr.push([d,h]),qt&&(queueMicrotask(lT),qt=!1)},Zn=!0,qt=!0,De=[],Be=[],Tt=ct,$t={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qe,pgp:!1,env:{},finalize:qe},Ne=$t,yr=[],Xn=0,Xr=[];function Re(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Ne;if(typeof d!="function"){if(d!==ke)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Nr(this,this._value))}this._state=null,this._value=null,++h.ref,function x(E,P){try{P(function(j){if(E._state===null){if(j===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&_o();j&&typeof j.then=="function"?x(E,function(B,V){j instanceof Re?j._then(B,V):j.then(B,V)}):(E._state=!0,E._value=j,Ga(E)),D&&ko()}},Nr.bind(null,E))}catch(j){Nr(E,j)}}(this,d)}var En={get:function(){var d=Ne,h=Zu;function x(E,P){var j=this,D=!d.global&&(d!==Ne||h!==Zu),B=D&&!Ts(),V=new Re(function(W,te){Jf(j,new vr(Nv(E,d,D,B),Nv(P,d,D,B),W,te,d))});return this._consoleTask&&(V._consoleTask=this._consoleTask),V}return x.prototype=ke,x},set:function(d){_(this,"then",d&&d.prototype===ke?En:{get:function(){return d},set:En.set})}};function vr(d,h,x,E,P){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=x,this.reject=E,this.psd=P}function Nr(d,h){var x,E;Be.push(h),d._state===null&&(x=d._lib&&_o(),h=Tt(h),d._state=!1,d._value=h,E=d,De.some(function(P){return P._value===E._value})||De.push(E),Ga(d),x&&ko())}function Ga(d){var h=d._listeners;d._listeners=[];for(var x=0,E=h.length;x<E;++x)Jf(d,h[x]);var P=d._PSD;--P.ref||P.finalize(),Xn===0&&(++Xn,Ot(function(){--Xn==0&&Zf()},[]))}function Jf(d,h){if(d._state!==null){var x=d._state?h.onFulfilled:h.onRejected;if(x===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Xn,Ot(aT,[x,d,h])}else d._listeners.push(h)}function aT(d,h,x){try{var E,P=h._value;!h._state&&Be.length&&(Be=[]),E=we&&h._consoleTask?h._consoleTask.run(function(){return d(P)}):d(P),h._state||Be.indexOf(P)!==-1||function(j){for(var D=De.length;D;)if(De[--D]._value===j._value)return De.splice(D,1)}(h),x.resolve(E)}catch(j){x.reject(j)}finally{--Xn==0&&Zf(),--x.psd.ref||x.psd.finalize()}}function lT(){Si($t,function(){_o()&&ko()})}function _o(){var d=Zn;return qt=Zn=!1,d}function ko(){var d,h,x;do for(;0<yr.length;)for(d=yr,yr=[],x=d.length,h=0;h<x;++h){var E=d[h];E[0].apply(null,E[1])}while(0<yr.length);qt=Zn=!0}function Zf(){var d=De;De=[],d.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var h=Xr.slice(0),x=h.length;x;)h[--x]()}function Qu(d){return new Re(ke,!1,d)}function vt(d,h){var x=Ne;return function(){var E=_o(),P=Ne;try{return Ps(x,!0),d.apply(this,arguments)}catch(j){h&&h(j)}finally{Ps(P,!1),E&&ko()}}}p(Re.prototype,{then:En,_then:function(d,h){Jf(this,new vr(null,null,d,h,Ne))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,x=arguments[1];return typeof h=="function"?this.then(null,function(E){return(E instanceof h?x:Qu)(E)}):this.then(null,function(E){return(E&&E.name===h?x:Qu)(E)})},finally:function(d){return this.then(function(h){return Re.resolve(d()).then(function(){return h})},function(h){return Re.resolve(d()).then(function(){return Qu(h)})})},timeout:function(d,h){var x=this;return d<1/0?new Re(function(E,P){var j=setTimeout(function(){return P(new me.Timeout(h))},d);x.then(E,P).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),$t.env=Dv(),p(Re,{all:function(){var d=ye.apply(null,arguments).map(Xu);return new Re(function(h,x){d.length===0&&h([]);var E=d.length;d.forEach(function(P,j){return Re.resolve(P).then(function(D){d[j]=D,--E||h(d)},x)})})},resolve:function(d){return d instanceof Re?d:d&&typeof d.then=="function"?new Re(function(h,x){d.then(h,x)}):new Re(ke,!0,d)},reject:Qu,race:function(){var d=ye.apply(null,arguments).map(Xu);return new Re(function(h,x){d.map(function(E){return Re.resolve(E).then(h,x)})})},PSD:{get:function(){return Ne},set:function(d){return Ne=d}},totalEchoes:{get:function(){return Zu}},newPSD:Cs,usePSD:Si,scheduler:{get:function(){return Ot},set:function(d){Ot=d}},rejectionMapper:{get:function(){return Tt},set:function(d){Tt=d}},follow:function(d,h){return new Re(function(x,E){return Cs(function(P,j){var D=Ne;D.unhandleds=[],D.onunhandled=j,D.finalize=ge(function(){var B,V=this;B=function(){V.unhandleds.length===0?P():j(V.unhandleds[0])},Xr.push(function W(){B(),Xr.splice(Xr.indexOf(W),1)}),++Xn,Ot(function(){--Xn==0&&Zf()},[])},D.finalize),d()},h,x,E)})}}),tt&&(tt.allSettled&&_(Re,"allSettled",function(){var d=ye.apply(null,arguments).map(Xu);return new Re(function(h){d.length===0&&h([]);var x=d.length,E=new Array(x);d.forEach(function(P,j){return Re.resolve(P).then(function(D){return E[j]={status:"fulfilled",value:D}},function(D){return E[j]={status:"rejected",reason:D}}).then(function(){return--x||h(E)})})})}),tt.any&&typeof AggregateError<"u"&&_(Re,"any",function(){var d=ye.apply(null,arguments).map(Xu);return new Re(function(h,x){d.length===0&&x(new AggregateError([]));var E=d.length,P=new Array(E);d.forEach(function(j,D){return Re.resolve(j).then(function(B){return h(B)},function(B){P[D]=B,--E||x(new AggregateError(P))})})})}),tt.withResolvers&&(Re.withResolvers=tt.withResolvers));var Gt={awaits:0,echoes:0,id:0},uT=0,Yu=[],Ju=0,Zu=0,cT=0;function Cs(d,h,x,E){var P=Ne,j=Object.create(P);return j.parent=P,j.ref=0,j.global=!1,j.id=++cT,$t.env,j.env=Ze?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},h&&l(j,h),++P.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Si(j,d,x,E),j.ref===0&&j.finalize(),E}function So(){return Gt.id||(Gt.id=++uT),++Gt.awaits,Gt.echoes+=Le,Gt.id}function Ts(){return!!Gt.awaits&&(--Gt.awaits==0&&(Gt.id=0),Gt.echoes=Gt.awaits*Le,!0)}function Xu(d){return Gt.echoes&&d&&d.constructor===tt?(So(),d.then(function(h){return Ts(),h},function(h){return Ts(),Rt(h)})):d}function dT(){var d=Yu[Yu.length-1];Yu.pop(),Ps(d,!1)}function Ps(d,h){var x,E=Ne;(h?!Gt.echoes||Ju++&&d===Ne:!Ju||--Ju&&d===Ne)||queueMicrotask(h?(function(P){++Zu,Gt.echoes&&--Gt.echoes!=0||(Gt.echoes=Gt.awaits=Gt.id=0),Yu.push(Ne),Ps(P,!0)}).bind(null,d):dT),d!==Ne&&(Ne=d,E===$t&&($t.env=Dv()),Ze&&(x=$t.env.Promise,h=d.env,(E.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),x.all=h.all,x.race=h.race,x.resolve=h.resolve,x.reject=h.reject,h.allSettled&&(x.allSettled=h.allSettled),h.any&&(x.any=h.any))))}function Dv(){var d=i.Promise;return Ze?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Si(d,h,x,E,P){var j=Ne;try{return Ps(d,!0),h(x,E,P)}finally{Ps(j,!1)}}function Nv(d,h,x,E){return typeof d!="function"?d:function(){var P=Ne;x&&So(),Ps(h,!0);try{return d.apply(this,arguments)}finally{Ps(P,!1),E&&queueMicrotask(Ts)}}}function Xf(d){Promise===tt&&Gt.echoes===0?Ju===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+er).indexOf("[native code]")===-1&&(So=Ts=qe);var Rt=Re.reject,Ei="",es="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Lv="String expected.",Eo=[],ec="__dbnames",eh="readonly",th="readwrite";function Ci(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var $v={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tc(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=J(h))[d],h}}function Mv(){throw me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function st(d,h){try{var x=Fv(d),E=Fv(h);if(x!==E)return x==="Array"?1:E==="Array"?-1:x==="binary"?1:E==="binary"?-1:x==="string"?1:E==="string"?-1:x==="Date"?1:E!=="Date"?NaN:-1;switch(x){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return function(P,j){for(var D=P.length,B=j.length,V=D<B?D:B,W=0;W<V;++W)if(P[W]!==j[W])return P[W]<j[W]?-1:1;return D===B?0:D<B?-1:1}(Bv(d),Bv(h));case"Array":return function(P,j){for(var D=P.length,B=j.length,V=D<B?D:B,W=0;W<V;++W){var te=st(P[W],j[W]);if(te!==0)return te}return D===B?0:D<B?-1:1}(d,h)}}catch{}return NaN}function Fv(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=G(d),d==="ArrayBuffer"?"binary":d)}function Bv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function nc(d,h,x){var E=d.schema.yProps;return E?(h&&0<x.numFailures&&(h=h.filter(function(P,j){return!x.failures[j]})),Promise.all(E.map(function(P){return P=P.updatesTable,h?d.db.table(P).where("k").anyOf(h).delete():d.db.table(P).clear()})).then(function(){return x})):x}var Qa=(Uv.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var x=h.add;if(a(x))return s(s([],a(d)?d:[],!0),x).sort();if(typeof x=="number")return(Number(d)||0)+x;if(typeof x=="bigint")try{return BigInt(d)+x}catch{return BigInt(0)+x}throw new TypeError("Invalid term ".concat(x))}if(h.remove!==void 0){var E=h.remove;if(a(E))return a(d)?d.filter(function(P){return!E.includes(P)}).sort():[];if(typeof E=="number")return Number(d)-E;if(typeof E=="bigint")try{return BigInt(d)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return x=(x=h.replacePrefix)===null||x===void 0?void 0:x[0],x&&typeof d=="string"&&d.startsWith(x)?h.replacePrefix[1]+d.substring(x.length):d},Uv);function Uv(d){this["@@propmod"]=d}function zv(d,h){for(var x=o(h),E=x.length,P=!1,j=0;j<E;++j){var D=x[j],B=h[D],V=I(d,D);B instanceof Qa?(R(d,D,B.execute(V)),P=!0):V!==B&&(R(d,D,B),P=!0)}return P}var Vv=(ht.prototype._trans=function(d,h,x){var E=this._tx||Ne.trans,P=this.name,j=we&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function D(W,te,U){if(!U.schema[P])throw new me.NotFound("Table "+P+" not part of transaction");return h(U.idbtrans,U)}var B=_o();try{var V=E&&E.db._novip===this.db._novip?E===Ne.trans?E._promise(d,D,x):Cs(function(){return E._promise(d,D,x)},{trans:E,transless:Ne.transless||Ne}):function W(te,U,re,q){if(te.idbdb&&(te._state.openComplete||Ne.letThrough||te._vip)){var Q=te._createTransaction(U,re,te._dbSchema);try{Q.create(),te._state.PR1398_maxLoop=3}catch(Y){return Y.name===Fe.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return W(te,U,re,q)})):Rt(Y)}return Q._promise(U,function(Y,ne){return Cs(function(){return Ne.trans=Q,q(Y,ne,Q)})}).then(function(Y){if(U==="readwrite")try{Q.idbtrans.commit()}catch{}return U==="readonly"?Y:Q._completion.then(function(){return Y})})}if(te._state.openComplete)return Rt(new me.DatabaseClosed(te._state.dbOpenError));if(!te._state.isBeingOpened){if(!te._state.autoOpen)return Rt(new me.DatabaseClosed);te.open().catch(qe)}return te._state.dbReadyPromise.then(function(){return W(te,U,re,q)})}(this.db,d,[this.name],D);return j&&(V._consoleTask=j,V=V.catch(function(W){return console.trace(W),Rt(W)})),V}finally{B&&ko()}},ht.prototype.get=function(d,h){var x=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Rt(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return x.core.get({trans:E,key:d}).then(function(P){return x.hook.reading.fire(P)})}).then(h)},ht.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var x=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&h.every(function(W){return 0<=B.keyPath.indexOf(W)})){for(var V=0;V<h.length;++V)if(h.indexOf(B.keyPath[V])===-1)return!1;return!0}return!1}).sort(function(B,V){return B.keyPath.length-V.keyPath.length})[0];if(x&&this.db._maxKey!==Ei){var j=x.keyPath.slice(0,h.length);return this.where(j).equals(j.map(function(V){return d[V]}))}!x&&we&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var E=this.schema.idxByName;function P(B,V){return st(B,V)===0}var D=h.reduce(function(U,V){var W=U[0],te=U[1],U=E[V],re=d[V];return[W||U,W||!U?Ci(te,U&&U.multi?function(q){return q=I(q,V),a(q)&&q.some(function(Q){return P(re,Q)})}:function(q){return P(re,I(q,V))}):te]},[null,null]),j=D[0],D=D[1];return j?this.where(j.name).equals(d[j.keyPath]).filter(D):x?this.filter(D):this.where(h).equals("")},ht.prototype.filter=function(d){return this.toCollection().and(d)},ht.prototype.count=function(d){return this.toCollection().count(d)},ht.prototype.offset=function(d){return this.toCollection().offset(d)},ht.prototype.limit=function(d){return this.toCollection().limit(d)},ht.prototype.each=function(d){return this.toCollection().each(d)},ht.prototype.toArray=function(d){return this.toCollection().toArray(d)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(d){var h,x=this.db,E=this.name;function P(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Mv&&(function(V,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function te(){this.constructor=V}n(V,W),V.prototype=W===null?Object.create(W):(te.prototype=W.prototype,new te)}(P,h=d),Object.defineProperty(P.prototype,"db",{get:function(){return x},enumerable:!1,configurable:!0}),P.prototype.table=function(){return E},d=P);for(var j=new Set,D=d.prototype;D;D=u(D))Object.getOwnPropertyNames(D).forEach(function(V){return j.add(V)});function B(V){if(!V)return V;var W,te=Object.create(d.prototype);for(W in V)if(!j.has(W))try{te[W]=V[W]}catch{}return te}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),d},ht.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},ht.prototype.add=function(d,h){var x=this,E=this.schema.primKey,P=E.auto,j=E.keyPath,D=d;return j&&P&&(D=tc(j)(d)),this._trans("readwrite",function(B){return x.core.mutate({trans:B,type:"add",keys:h!=null?[h]:null,values:[D]})}).then(function(B){return B.numFailures?Re.reject(B.failures[0]):B.lastResult}).then(function(B){if(j)try{R(d,j,B)}catch{}return B})},ht.prototype.upsert=function(d,h){var x=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(P){return x.core.get({trans:P,key:d}).then(function(j){var D=j??{};return zv(D,h),E&&R(D,E,d),x.core.mutate({trans:P,type:"put",values:[D],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[h]}}).then(function(B){return B.numFailures?Re.reject(B.failures[0]):!!j})})})},ht.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=I(d,this.schema.primKey.keyPath),d===void 0?Rt(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},ht.prototype.put=function(d,h){var x=this,E=this.schema.primKey,P=E.auto,j=E.keyPath,D=d;return j&&P&&(D=tc(j)(d)),this._trans("readwrite",function(B){return x.core.mutate({trans:B,type:"put",values:[D],keys:h!=null?[h]:null})}).then(function(B){return B.numFailures?Re.reject(B.failures[0]):B.lastResult}).then(function(B){if(j)try{R(d,j,B)}catch{}return B})},ht.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(x){return h.core.mutate({trans:x,type:"delete",keys:[d]}).then(function(E){return nc(h,[d],E)}).then(function(E){return E.numFailures?Re.reject(E.failures[0]):void 0})})},ht.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:$v}).then(function(x){return nc(d,null,x)})}).then(function(h){return h.numFailures?Re.reject(h.failures[0]):void 0})},ht.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(x){return h.core.getMany({keys:d,trans:x}).then(function(E){return E.map(function(P){return h.hook.reading.fire(P)})})})},ht.prototype.bulkAdd=function(d,h,x){var E=this,P=Array.isArray(h)?h:void 0,j=(x=x||(P?void 0:h))?x.allKeys:void 0;return this._trans("readwrite",function(D){var W=E.schema.primKey,B=W.auto,W=W.keyPath;if(W&&P)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(P&&P.length!==d.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var V=d.length,W=W&&B?d.map(tc(W)):d;return E.core.mutate({trans:D,type:"add",keys:P,values:W,wantResults:j}).then(function(Q){var U=Q.numFailures,re=Q.results,q=Q.lastResult,Q=Q.failures;if(U===0)return j?re:q;throw new xe("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(V," operations failed"),Q)})})},ht.prototype.bulkPut=function(d,h,x){var E=this,P=Array.isArray(h)?h:void 0,j=(x=x||(P?void 0:h))?x.allKeys:void 0;return this._trans("readwrite",function(D){var W=E.schema.primKey,B=W.auto,W=W.keyPath;if(W&&P)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(P&&P.length!==d.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var V=d.length,W=W&&B?d.map(tc(W)):d;return E.core.mutate({trans:D,type:"put",keys:P,values:W,wantResults:j}).then(function(Q){var U=Q.numFailures,re=Q.results,q=Q.lastResult,Q=Q.failures;if(U===0)return j?re:q;throw new xe("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(V," operations failed"),Q)})})},ht.prototype.bulkUpdate=function(d){var h=this,x=this.core,E=d.map(function(D){return D.key}),P=d.map(function(D){return D.changes}),j=[];return this._trans("readwrite",function(D){return x.getMany({trans:D,keys:E,cache:"clone"}).then(function(B){var V=[],W=[];d.forEach(function(U,re){var q=U.key,Q=U.changes,Y=B[re];if(Y){for(var ne=0,ie=Object.keys(Q);ne<ie.length;ne++){var ue=ie[ne],pe=Q[ue];if(ue===h.schema.primKey.keyPath){if(st(pe,q)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else R(Y,ue,pe)}j.push(re),V.push(q),W.push(Y)}});var te=V.length;return x.mutate({trans:D,type:"put",keys:V,values:W,updates:{keys:E,changeSpecs:P}}).then(function(U){var re=U.numFailures,q=U.failures;if(re===0)return te;for(var Q=0,Y=Object.keys(q);Q<Y.length;Q++){var ne,ie=Y[Q],ue=j[Number(ie)];ue!=null&&(ne=q[ie],delete q[ie],q[ue]=ne)}throw new xe("".concat(h.name,".bulkUpdate(): ").concat(re," of ").concat(te," operations failed"),q)})})})},ht.prototype.bulkDelete=function(d){var h=this,x=d.length;return this._trans("readwrite",function(E){return h.core.mutate({trans:E,type:"delete",keys:d}).then(function(P){return nc(h,d,P)})}).then(function(D){var P=D.numFailures,j=D.lastResult,D=D.failures;if(P===0)return j;throw new xe("".concat(h.name,".bulkDelete(): ").concat(P," of ").concat(x," operations failed"),D)})},ht);function ht(){}function Ya(d){function h(D,B){if(B){for(var V=arguments.length,W=new Array(V-1);--V;)W[V-1]=arguments[V];return x[D].subscribe.apply(null,W),d}if(typeof D=="string")return x[D]}var x={};h.addEventType=j;for(var E=1,P=arguments.length;E<P;++E)j(arguments[E]);return h;function j(D,B,V){if(typeof D!="object"){var W;B=B||X;var te={subscribers:[],fire:V=V||qe,subscribe:function(U){te.subscribers.indexOf(U)===-1&&(te.subscribers.push(U),te.fire=B(te.fire,U))},unsubscribe:function(U){te.subscribers=te.subscribers.filter(function(re){return re!==U}),te.fire=te.subscribers.reduce(B,V)}};return x[D]=h[D]=te}o(W=D).forEach(function(U){var re=W[U];if(a(re))j(U,W[U][0],W[U][1]);else{if(re!=="asap")throw new me.InvalidArgument("Invalid event config");var q=j(U,ct,function(){for(var Q=arguments.length,Y=new Array(Q);Q--;)Y[Q]=arguments[Q];q.subscribers.forEach(function(ne){O(function(){ne.apply(null,Y)})})})}})}}function Ja(d,h){return v(h).from({prototype:d}),h}function Co(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function nh(d,h){d.filter=Ci(d.filter,h)}function rh(d,h,x){var E=d.replayFilter;d.replayFilter=E?function(){return Ci(E(),h())}:h,d.justLimit=x&&!E}function rc(d,h){if(d.isPrimKey)return h.primaryKey;var x=h.getIndexByKeyPath(d.index);if(!x)throw new me.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return x}function Kv(d,h,x){var E=rc(d,h.schema);return h.openCursor({trans:x,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:E,range:d.range}})}function sc(d,h,x,E){var P=d.replayFilter?Ci(d.filter,d.replayFilter()):d.filter;if(d.or){var j={},D=function(B,V,W){var te,U;P&&!P(V,W,function(re){return V.stop(re)},function(re){return V.fail(re)})||((U=""+(te=V.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(te)),f(j,U)||(j[U]=!0,h(B,V,W)))};return Promise.all([d.or._iterate(D,x),Wv(Kv(d,E,x),d.algorithm,D,!d.keysOnly&&d.valueMapper)])}return Wv(Kv(d,E,x),Ci(d.algorithm,P),h,!d.keysOnly&&d.valueMapper)}function Wv(d,h,x,E){var P=vt(E?function(j,D,B){return x(E(j),D,B)}:x);return d.then(function(j){if(j)return j.start(function(){var D=function(){return j.continue()};h&&!h(j,function(B){return D=B},function(B){j.stop(B),D=qe},function(B){j.fail(B),D=qe})||P(j.value,j,function(B){return D=B}),D()})})}var fT=(lt.prototype._read=function(d,h){var x=this._ctx;return x.error?x.table._trans(null,Rt.bind(null,x.error)):x.table._trans("readonly",d).then(h)},lt.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Rt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},lt.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=Ci(h.algorithm,d)},lt.prototype._iterate=function(d,h){return sc(this._ctx,d,h,this._ctx.table.core)},lt.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),x=Object.create(this._ctx);return d&&l(x,d),h._ctx=x,h},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(d){var h=this._ctx;return this._read(function(x){return sc(h,d,x,h.table.core)})},lt.prototype.count=function(d){var h=this;return this._read(function(x){var E=h._ctx,P=E.table.core;if(Co(E,!0))return P.count({trans:x,query:{index:rc(E,P.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var j=0;return sc(E,function(){return++j,!1},x,P).then(function(){return j})}).then(d)},lt.prototype.sortBy=function(d,h){var x=d.split(".").reverse(),E=x[0],P=x.length-1;function j(V,W){return W?j(V[x[W]],W-1):V[E]}var D=this._ctx.dir==="next"?1:-1;function B(V,W){return st(j(V,P),j(W,P))*D}return this.toArray(function(V){return V.sort(B)}).then(h)},lt.prototype.toArray=function(d){var h=this;return this._read(function(x){var E=h._ctx;if(E.dir==="next"&&Co(E,!0)&&0<E.limit){var P=E.valueMapper,j=rc(E,E.table.core.schema);return E.table.core.query({trans:x,limit:E.limit,values:!0,query:{index:j,range:E.range}}).then(function(B){return B=B.result,P?B.map(P):B})}var D=[];return sc(E,function(B){return D.push(B)},x,E.table.core).then(function(){return D})},d)},lt.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,Co(h)?rh(h,function(){var x=d;return function(E,P){return x===0||(x===1?--x:P(function(){E.advance(x),x=0}),!1)}}):rh(h,function(){var x=d;return function(){return--x<0}})),this},lt.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),rh(this._ctx,function(){var h=d;return function(x,E,P){return--h<=0&&E(P),0<=h}},!0),this},lt.prototype.until=function(d,h){return nh(this._ctx,function(x,E,P){return!d(x.value)||(E(P),h)}),this},lt.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},lt.prototype.last=function(d){return this.reverse().first(d)},lt.prototype.filter=function(d){var h;return nh(this._ctx,function(x){return d(x.value)}),(h=this._ctx).isMatch=Ci(h.isMatch,d),this},lt.prototype.and=function(d){return this.filter(d)},lt.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(x,E){d(E.key,E)})},lt.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},lt.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(x,E){d(E.primaryKey,E)})},lt.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var x=[];return this.each(function(E,P){x.push(P.key)}).then(function(){return x}).then(d)},lt.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&Co(h,!0)&&0<h.limit)return this._read(function(E){var P=rc(h,h.table.core.schema);return h.table.core.query({trans:E,values:!1,limit:h.limit,query:{index:P,range:h.range}})}).then(function(E){return E.result}).then(d);h.keysOnly=!h.isMatch;var x=[];return this.each(function(E,P){x.push(P.primaryKey)}).then(function(){return x}).then(d)},lt.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},lt.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},lt.prototype.lastKey=function(d){return this.reverse().firstKey(d)},lt.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return nh(this._ctx,function(P){var E=P.primaryKey.toString(),P=f(h,E);return h[E]=!0,!P}),this},lt.prototype.modify=function(d){var h=this,x=this._ctx;return this._write(function(E){var P=typeof d=="function"?d:function(Y){return zv(Y,d)},j=x.table.core,W=j.schema.primaryKey,D=W.outbound,B=W.extractKey,V=200,W=h.db._options.modifyChunkSize;W&&(V=typeof W=="object"?W[j.name]||W["*"]||200:W);function te(Y,ue){var ie=ue.failures,ue=ue.numFailures;re+=Y-ue;for(var pe=0,be=o(ie);pe<be.length;pe++){var Te=be[pe];U.push(ie[Te])}}var U=[],re=0,q=[],Q=d===Hv;return h.clone().primaryKeys().then(function(Y){function ne(ue){var pe=Math.min(V,Y.length-ue),be=Y.slice(ue,ue+pe);return(Q?Promise.resolve([]):j.getMany({trans:E,keys:be,cache:"immutable"})).then(function(Te){var Oe=[],Ce=[],Pe=D?[]:null,Ie=Q?be:[];if(!Q)for(var Ae=0;Ae<pe;++Ae){var Me=Te[Ae],Je={value:J(Me),primKey:Y[ue+Ae]};P.call(Je,Je.value,Je)!==!1&&(Je.value==null?Ie.push(Y[ue+Ae]):D||st(B(Me),B(Je.value))===0?(Ce.push(Je.value),D&&Pe.push(Y[ue+Ae])):(Ie.push(Y[ue+Ae]),Oe.push(Je.value)))}return Promise.resolve(0<Oe.length&&j.mutate({trans:E,type:"add",values:Oe}).then(function(et){for(var nt in et.failures)Ie.splice(parseInt(nt),1);te(Oe.length,et)})).then(function(){return(0<Ce.length||ie&&typeof d=="object")&&j.mutate({trans:E,type:"put",keys:Pe,values:Ce,criteria:ie,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ue}).then(function(et){return te(Ce.length,et)})}).then(function(){return(0<Ie.length||ie&&Q)&&j.mutate({trans:E,type:"delete",keys:Ie,criteria:ie,isAdditionalChunk:0<ue}).then(function(et){return nc(x.table,Ie,et)}).then(function(et){return te(Ie.length,et)})}).then(function(){return Y.length>ue+pe&&ne(ue+V)})})}var ie=Co(x)&&x.limit===1/0&&(typeof d!="function"||Q)&&{index:x.index,range:x.range};return ne(0).then(function(){if(0<U.length)throw new le("Error modifying one or more objects",U,re,q);return Y.length})})})},lt.prototype.delete=function(){var d=this._ctx,h=d.range;return!Co(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Hv):this._write(function(x){var E=d.table.core.schema.primaryKey,P=h;return d.table.core.count({trans:x,query:{index:E,range:P}}).then(function(j){return d.table.core.mutate({trans:x,type:"deleteRange",range:P}).then(function(V){var B=V.failures,V=V.numFailures;if(V)throw new le("Could not delete some values",Object.keys(B).map(function(W){return B[W]}),j-V);return j-V})})})},lt);function lt(){}var Hv=function(d,h){return h.value=null};function hT(d,h){return d<h?-1:d===h?0:1}function pT(d,h){return h<d?-1:d===h?0:1}function Fn(d,h,x){return d=d instanceof Gv?new d.Collection(d):d,d._ctx.error=new(x||TypeError)(h),d}function To(d){return new d.Collection(d,function(){return qv("")}).limit(0)}function ic(d,h,x,E){var P,j,D,B,V,W,te,U=x.length;if(!x.every(function(Q){return typeof Q=="string"}))return Fn(d,Lv);function re(Q){P=Q==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},j=Q==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},D=Q==="next"?hT:pT;var Y=x.map(function(ne){return{lower:j(ne),upper:P(ne)}}).sort(function(ne,ie){return D(ne.lower,ie.lower)});B=Y.map(function(ne){return ne.upper}),V=Y.map(function(ne){return ne.lower}),te=(W=Q)==="next"?"":E}re("next"),d=new d.Collection(d,function(){return As(B[0],V[U-1]+E)}),d._ondirectionchange=function(Q){re(Q)};var q=0;return d._addAlgorithm(function(Q,Y,ne){var ie=Q.key;if(typeof ie!="string")return!1;var ue=j(ie);if(h(ue,V,q))return!0;for(var pe=null,be=q;be<U;++be){var Te=function(Oe,Ce,Pe,Ie,Ae,Me){for(var Je=Math.min(Oe.length,Ie.length),et=-1,nt=0;nt<Je;++nt){var Bn=Ce[nt];if(Bn!==Ie[nt])return Ae(Oe[nt],Pe[nt])<0?Oe.substr(0,nt)+Pe[nt]+Pe.substr(nt+1):Ae(Oe[nt],Ie[nt])<0?Oe.substr(0,nt)+Ie[nt]+Pe.substr(nt+1):0<=et?Oe.substr(0,et)+Ce[et]+Pe.substr(et+1):null;Ae(Oe[nt],Bn)<0&&(et=nt)}return Je<Ie.length&&Me==="next"?Oe+Pe.substr(Oe.length):Je<Oe.length&&Me==="prev"?Oe.substr(0,Pe.length):et<0?null:Oe.substr(0,et)+Ie[et]+Pe.substr(et+1)}(ie,ue,B[be],V[be],D,W);Te===null&&pe===null?q=be+1:(pe===null||0<D(pe,Te))&&(pe=Te)}return Y(pe!==null?function(){Q.continue(pe+te)}:ne),!1}),d}function As(d,h,x,E){return{type:2,lower:d,upper:h,lowerOpen:x,upperOpen:E}}function qv(d){return{type:1,lower:d,upper:d}}var Gv=(Object.defineProperty(Qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Qt.prototype.between=function(d,h,x,E){x=x!==!1,E=E===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(x||E)&&(!x||!E)?To(this):new this.Collection(this,function(){return As(d,h,!x,!E)})}catch{return Fn(this,es)}},Qt.prototype.equals=function(d){return d==null?Fn(this,es):new this.Collection(this,function(){return qv(d)})},Qt.prototype.above=function(d){return d==null?Fn(this,es):new this.Collection(this,function(){return As(d,void 0,!0)})},Qt.prototype.aboveOrEqual=function(d){return d==null?Fn(this,es):new this.Collection(this,function(){return As(d,void 0,!1)})},Qt.prototype.below=function(d){return d==null?Fn(this,es):new this.Collection(this,function(){return As(void 0,d,!1,!0)})},Qt.prototype.belowOrEqual=function(d){return d==null?Fn(this,es):new this.Collection(this,function(){return As(void 0,d)})},Qt.prototype.startsWith=function(d){return typeof d!="string"?Fn(this,Lv):this.between(d,d+Ei,!0,!0)},Qt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):ic(this,function(h,x){return h.indexOf(x[0])===0},[d],Ei)},Qt.prototype.equalsIgnoreCase=function(d){return ic(this,function(h,x){return h===x[0]},[d],"")},Qt.prototype.anyOfIgnoreCase=function(){var d=ye.apply(se,arguments);return d.length===0?To(this):ic(this,function(h,x){return x.indexOf(h)!==-1},d,"")},Qt.prototype.startsWithAnyOfIgnoreCase=function(){var d=ye.apply(se,arguments);return d.length===0?To(this):ic(this,function(h,x){return x.some(function(E){return h.indexOf(E)===0})},d,Ei)},Qt.prototype.anyOf=function(){var d=this,h=ye.apply(se,arguments),x=this._cmp;try{h.sort(x)}catch{return Fn(this,es)}if(h.length===0)return To(this);var E=new this.Collection(this,function(){return As(h[0],h[h.length-1])});E._ondirectionchange=function(j){x=j==="next"?d._ascending:d._descending,h.sort(x)};var P=0;return E._addAlgorithm(function(j,D,B){for(var V=j.key;0<x(V,h[P]);)if(++P===h.length)return D(B),!1;return x(V,h[P])===0||(D(function(){j.continue(h[P])}),!1)}),E},Qt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Qt.prototype.noneOf=function(){var d=ye.apply(se,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Fn(this,es)}var h=d.reduce(function(x,E){return x?x.concat([[x[x.length-1][1],E]]):[[-1/0,E]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Qt.prototype.inAnyRange=function(ie,h){var x=this,E=this._cmp,P=this._ascending,j=this._descending,D=this._min,B=this._max;if(ie.length===0)return To(this);if(!ie.every(function(ue){return ue[0]!==void 0&&ue[1]!==void 0&&P(ue[0],ue[1])<=0}))return Fn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var V=!h||h.includeLowers!==!1,W=h&&h.includeUppers===!0,te,U=P;function re(ue,pe){return U(ue[0],pe[0])}try{(te=ie.reduce(function(ue,pe){for(var be=0,Te=ue.length;be<Te;++be){var Oe=ue[be];if(E(pe[0],Oe[1])<0&&0<E(pe[1],Oe[0])){Oe[0]=D(Oe[0],pe[0]),Oe[1]=B(Oe[1],pe[1]);break}}return be===Te&&ue.push(pe),ue},[])).sort(re)}catch{return Fn(this,es)}var q=0,Q=W?function(ue){return 0<P(ue,te[q][1])}:function(ue){return 0<=P(ue,te[q][1])},Y=V?function(ue){return 0<j(ue,te[q][0])}:function(ue){return 0<=j(ue,te[q][0])},ne=Q,ie=new this.Collection(this,function(){return As(te[0][0],te[te.length-1][1],!V,!W)});return ie._ondirectionchange=function(ue){U=ue==="next"?(ne=Q,P):(ne=Y,j),te.sort(re)},ie._addAlgorithm(function(ue,pe,be){for(var Te,Oe=ue.key;ne(Oe);)if(++q===te.length)return pe(be),!1;return!Q(Te=Oe)&&!Y(Te)||(x._cmp(Oe,te[q][1])===0||x._cmp(Oe,te[q][0])===0||pe(function(){U===P?ue.continue(te[q][0]):ue.continue(te[q][1])}),!1)}),ie},Qt.prototype.startsWithAnyOf=function(){var d=ye.apply(se,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?To(this):this.inAnyRange(d.map(function(h){return[h,h+Ei]})):Fn(this,"startsWithAnyOf() only works with strings")},Qt);function Qt(){}function Lr(d){return vt(function(h){return Za(h),d(h.target.error),!1})}function Za(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Xa="storagemutated",sh="x-storagemutated-1",js=Ya(null,Xa),mT=($r.prototype._lock=function(){return C(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},$r.prototype._unlock=function(){if(C(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Si(d[1],d[0])}catch{}}return this},$r.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},$r.prototype.create=function(d){var h=this;if(!this.mode)return this;var x=this.db.idbdb,E=this.db._state.dbOpenError;if(C(!this.idbtrans),!d&&!x)switch(E&&E.name){case"DatabaseClosedError":throw new me.DatabaseClosed(E);case"MissingAPIError":throw new me.MissingAPI(E.message,E);default:throw new me.OpenFailed(E)}if(!this.active)throw new me.TransactionInactive;return C(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||x).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(P){Za(P),h._reject(d.error)}),d.onabort=vt(function(P){Za(P),h.active&&h._reject(new me.Abort(d.error)),h.active=!1,h.on("abort").fire(P)}),d.oncomplete=vt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&js.storagemutated.fire(d.mutatedParts)}),this},$r.prototype._promise=function(d,h,x){var E=this;if(d==="readwrite"&&this.mode!=="readwrite")return Rt(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new me.TransactionInactive);if(this._locked())return new Re(function(j,D){E._blockedFuncs.push([function(){E._promise(d,h,x).then(j,D)},Ne])});if(x)return Cs(function(){var j=new Re(function(D,B){E._lock();var V=h(D,B,E);V&&V.then&&V.then(D,B)});return j.finally(function(){return E._unlock()}),j._lib=!0,j});var P=new Re(function(j,D){var B=h(j,D,E);B&&B.then&&B.then(j,D)});return P._lib=!0,P},$r.prototype._root=function(){return this.parent?this.parent._root():this},$r.prototype.waitFor=function(d){var h,x=this._root(),E=Re.resolve(d);x._waitingFor?x._waitingFor=x._waitingFor.then(function(){return E}):(x._waitingFor=E,x._waitingQueue=[],h=x.idbtrans.objectStore(x.storeNames[0]),function j(){for(++x._spinCount;x._waitingQueue.length;)x._waitingQueue.shift()();x._waitingFor&&(h.get(-1/0).onsuccess=j)}());var P=x._waitingFor;return new Re(function(j,D){E.then(function(B){return x._waitingQueue.push(vt(j.bind(null,B)))},function(B){return x._waitingQueue.push(vt(D.bind(null,B)))}).finally(function(){x._waitingFor===P&&(x._waitingFor=null)})})},$r.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},$r.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var x=this.schema[d];if(!x)throw new me.NotFound("Table "+d+" not part of transaction");return x=new this.db.Table(d,x,this),x.core=this.db.core.table(d),h[d]=x},$r);function $r(){}function ih(d,h,x,E,P,j,D,B){return{name:d,keyPath:h,unique:x,multi:E,auto:P,compound:j,src:(x&&!D?"&":"")+(E?"*":"")+(P?"++":"")+Qv(h),type:B}}function Qv(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function oh(d,h,x){return{name:d,primKey:h,indexes:x,mappedClass:null,idxByName:(E=function(P){return[P.name,P]},x.reduce(function(P,j,D){return D=E(j,D),D&&(P[D[0]]=D[1]),P},{}))};var E}var el=function(d){try{return d.only([[]]),el=function(){return[[]]},[[]]}catch{return el=function(){return Ei},Ei}};function ah(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(x){return x[h]}:function(x){return I(x,h)}:function(x){return I(x,d)};var h}function Yv(d){return[].slice.call(d)}var gT=0;function tl(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function yT(d,h,V){function E(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var q=ne.lower,Q=ne.upper,Y=ne.lowerOpen,ne=ne.upperOpen;return q===void 0?Q===void 0?null:h.upperBound(Q,!!ne):Q===void 0?h.lowerBound(q,!!Y):h.bound(q,Q,!!Y,!!ne)}function P(re){var q,Q=re.name;return{name:Q,schema:re,mutate:function(Y){var ne=Y.trans,ie=Y.type,ue=Y.keys,pe=Y.values,be=Y.range;return new Promise(function(Te,Oe){Te=vt(Te);var Ce=ne.objectStore(Q),Pe=Ce.keyPath==null,Ie=ie==="put"||ie==="add";if(!Ie&&ie!=="delete"&&ie!=="deleteRange")throw new Error("Invalid operation type: "+ie);var Ae,Me=(ue||pe||{length:1}).length;if(ue&&pe&&ue.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if(Me===0)return Te({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(yn){++Bn,Za(yn)}var et=[],nt=[],Bn=0;if(ie==="deleteRange"){if(be.type===4)return Te({numFailures:Bn,failures:nt,results:[],lastResult:void 0});be.type===3?et.push(Ae=Ce.clear()):et.push(Ae=Ce.delete(E(be)))}else{var Pe=Ie?Pe?[pe,ue]:[pe,null]:[ue,null],Qe=Pe[0],un=Pe[1];if(Ie)for(var cn=0;cn<Me;++cn)et.push(Ae=un&&un[cn]!==void 0?Ce[ie](Qe[cn],un[cn]):Ce[ie](Qe[cn])),Ae.onerror=Je;else for(cn=0;cn<Me;++cn)et.push(Ae=Ce[ie](Qe[cn])),Ae.onerror=Je}function yc(yn){yn=yn.target.result,et.forEach(function(Ai,Eh){return Ai.error!=null&&(nt[Eh]=Ai.error)}),Te({numFailures:Bn,failures:nt,results:ie==="delete"?ue:et.map(function(Ai){return Ai.result}),lastResult:yn})}Ae.onerror=function(yn){Je(yn),yc(yn)},Ae.onsuccess=yc})},getMany:function(Y){var ne=Y.trans,ie=Y.keys;return new Promise(function(ue,pe){ue=vt(ue);for(var be,Te=ne.objectStore(Q),Oe=ie.length,Ce=new Array(Oe),Pe=0,Ie=0,Ae=function(et){et=et.target,Ce[et._pos]=et.result,++Ie===Pe&&ue(Ce)},Me=Lr(pe),Je=0;Je<Oe;++Je)ie[Je]!=null&&((be=Te.get(ie[Je]))._pos=Je,be.onsuccess=Ae,be.onerror=Me,++Pe);Pe===0&&ue(Ce)})},get:function(Y){var ne=Y.trans,ie=Y.key;return new Promise(function(ue,pe){ue=vt(ue);var be=ne.objectStore(Q).get(ie);be.onsuccess=function(Te){return ue(Te.target.result)},be.onerror=Lr(pe)})},query:(q=W,function(Y){return new Promise(function(ne,ie){ne=vt(ne);var ue,pe,be,Pe=Y.trans,Te=Y.values,Oe=Y.limit,Ae=Y.query,Ce=Oe===1/0?void 0:Oe,Ie=Ae.index,Ae=Ae.range,Pe=Pe.objectStore(Q),Ie=Ie.isPrimaryKey?Pe:Pe.index(Ie.name),Ae=E(Ae);if(Oe===0)return ne({result:[]});q?((Ce=Te?Ie.getAll(Ae,Ce):Ie.getAllKeys(Ae,Ce)).onsuccess=function(Me){return ne({result:Me.target.result})},Ce.onerror=Lr(ie)):(ue=0,pe=!Te&&"openKeyCursor"in Ie?Ie.openKeyCursor(Ae):Ie.openCursor(Ae),be=[],pe.onsuccess=function(Me){var Je=pe.result;return Je?(be.push(Te?Je.value:Je.primaryKey),++ue===Oe?ne({result:be}):void Je.continue()):ne({result:be})},pe.onerror=Lr(ie))})}),openCursor:function(Y){var ne=Y.trans,ie=Y.values,ue=Y.query,pe=Y.reverse,be=Y.unique;return new Promise(function(Te,Oe){Te=vt(Te);var Ie=ue.index,Ce=ue.range,Pe=ne.objectStore(Q),Pe=Ie.isPrimaryKey?Pe:Pe.index(Ie.name),Ie=pe?be?"prevunique":"prev":be?"nextunique":"next",Ae=!ie&&"openKeyCursor"in Pe?Pe.openKeyCursor(E(Ce),Ie):Pe.openCursor(E(Ce),Ie);Ae.onerror=Lr(Oe),Ae.onsuccess=vt(function(Me){var Je,et,nt,Bn,Qe=Ae.result;Qe?(Qe.___id=++gT,Qe.done=!1,Je=Qe.continue.bind(Qe),et=(et=Qe.continuePrimaryKey)&&et.bind(Qe),nt=Qe.advance.bind(Qe),Bn=function(){throw new Error("Cursor not stopped")},Qe.trans=ne,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=vt(Oe),Qe.next=function(){var un=this,cn=1;return this.start(function(){return cn--?un.continue():un.stop()}).then(function(){return un})},Qe.start=function(un){function cn(){if(Ae.result)try{un()}catch(yn){Qe.fail(yn)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var yc=new Promise(function(yn,Ai){yn=vt(yn),Ae.onerror=Lr(Ai),Qe.fail=Ai,Qe.stop=function(Eh){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=Bn,yn(Eh)}});return Ae.onsuccess=vt(function(yn){Ae.onsuccess=cn,cn()}),Qe.continue=Je,Qe.continuePrimaryKey=et,Qe.advance=nt,cn(),yc},Te(Qe)):Te(null)},Oe)})},count:function(Y){var ne=Y.query,ie=Y.trans,ue=ne.index,pe=ne.range;return new Promise(function(be,Te){var Oe=ie.objectStore(Q),Ce=ue.isPrimaryKey?Oe:Oe.index(ue.name),Oe=E(pe),Ce=Oe?Ce.count(Oe):Ce.count();Ce.onsuccess=vt(function(Pe){return be(Pe.target.result)}),Ce.onerror=Lr(Te)})}}}var j,D,B,te=(D=V,B=Yv((j=d).objectStoreNames),{schema:{name:j.name,tables:B.map(function(re){return D.objectStore(re)}).map(function(re){var q=re.keyPath,ne=re.autoIncrement,Q=a(q),Y={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q==null,compound:Q,keyPath:q,autoIncrement:ne,unique:!0,extractKey:ah(q)},indexes:Yv(re.indexNames).map(function(ie){return re.index(ie)}).map(function(be){var ue=be.name,pe=be.unique,Te=be.multiEntry,be=be.keyPath,Te={name:ue,compound:a(be),keyPath:be,unique:pe,multiEntry:Te,extractKey:ah(be)};return Y[tl(be)]=Te}),getIndexByKeyPath:function(ie){return Y[tl(ie)]}};return Y[":id"]=ne.primaryKey,q!=null&&(Y[tl(q)]=ne.primaryKey),ne})},hasGetAll:0<B.length&&"getAll"in D.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),V=te.schema,W=te.hasGetAll,te=V.tables.map(P),U={};return te.forEach(function(re){return U[re.name]=re}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(re){if(!U[re])throw new Error("Table '".concat(re,"' not found"));return U[re]},MIN_KEY:-1/0,MAX_KEY:el(h),schema:V}}function vT(d,h,x,E){var P=x.IDBKeyRange;return x.indexedDB,{dbcore:(E=yT(h,P,E),d.dbcore.reduce(function(j,D){return D=D.create,r(r({},j),D(j))},E))}}function oc(d,E){var x=E.db,E=vT(d._middlewares,x,d._deps,E);d.core=E.dbcore,d.tables.forEach(function(P){var j=P.name;d.core.schema.tables.some(function(D){return D.name===j})&&(P.core=d.core.table(j),d[j]instanceof d.Table&&(d[j].core=P.core))})}function ac(d,h,x,E){x.forEach(function(P){var j=E[P];h.forEach(function(D){var B=function V(W,te){return w(W,te)||(W=u(W))&&V(W,te)}(D,P);(!B||"value"in B&&B.value===void 0)&&(D===d.Transaction.prototype||D instanceof d.Transaction?_(D,P,{get:function(){return this.table(P)},set:function(V){m(this,P,{value:V,writable:!0,configurable:!0,enumerable:!0})}}):D[P]=new d.Table(P,j))})})}function lh(d,h){h.forEach(function(x){for(var E in x)x[E]instanceof d.Table&&delete x[E]})}function wT(d,h){return d._cfg.version-h._cfg.version}function bT(d,h,x,E){var P=d._dbSchema;x.objectStoreNames.contains("$meta")&&!P.$meta&&(P.$meta=oh("$meta",Zv("")[0],[]),d._storeNames.push("$meta"));var j=d._createTransaction("readwrite",d._storeNames,P);j.create(x),j._completion.catch(E);var D=j._reject.bind(j),B=Ne.transless||Ne;Cs(function(){return Ne.trans=j,Ne.transless=B,h!==0?(oc(d,x),W=h,((V=j).storeNames.includes("$meta")?V.table("$meta").get("version").then(function(te){return te??W}):Re.resolve(W)).then(function(te){return re=te,q=j,Q=x,Y=[],te=(U=d)._versions,ne=U._dbSchema=uc(0,U.idbdb,Q),(te=te.filter(function(ie){return ie._cfg.version>=re})).length!==0?(te.forEach(function(ie){Y.push(function(){var ue=ne,pe=ie._cfg.dbschema;cc(U,ue,Q),cc(U,pe,Q),ne=U._dbSchema=pe;var be=uh(ue,pe);be.add.forEach(function(Ie){ch(Q,Ie[0],Ie[1].primKey,Ie[1].indexes)}),be.change.forEach(function(Ie){if(Ie.recreate)throw new me.Upgrade("Not yet support for changing primary key");var Ae=Q.objectStore(Ie.name);Ie.add.forEach(function(Me){return lc(Ae,Me)}),Ie.change.forEach(function(Me){Ae.deleteIndex(Me.name),lc(Ae,Me)}),Ie.del.forEach(function(Me){return Ae.deleteIndex(Me)})});var Te=ie._cfg.contentUpgrade;if(Te&&ie._cfg.version>re){oc(U,Q),q._memoizedTables={};var Oe=$(pe);be.del.forEach(function(Ie){Oe[Ie]=ue[Ie]}),lh(U,[U.Transaction.prototype]),ac(U,[U.Transaction.prototype],o(Oe),Oe),q.schema=Oe;var Ce,Pe=Z(Te);return Pe&&So(),be=Re.follow(function(){var Ie;(Ce=Te(q))&&Pe&&(Ie=Ts.bind(null,null),Ce.then(Ie,Ie))}),Ce&&typeof Ce.then=="function"?Re.resolve(Ce):be.then(function(){return Ce})}}),Y.push(function(ue){var pe,be,Te=ie._cfg.dbschema;pe=Te,be=ue,[].slice.call(be.db.objectStoreNames).forEach(function(Oe){return pe[Oe]==null&&be.db.deleteObjectStore(Oe)}),lh(U,[U.Transaction.prototype]),ac(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),q.schema=U._dbSchema}),Y.push(function(ue){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===ie._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(pe){return pe!=="$meta"})):ue.objectStore("$meta").put(ie._cfg.version,"version"))})}),function ie(){return Y.length?Re.resolve(Y.shift()(q.idbtrans)).then(ie):Re.resolve()}().then(function(){Jv(ne,Q)})):Re.resolve();var U,re,q,Q,Y,ne}).catch(D)):(o(P).forEach(function(te){ch(x,te,P[te].primKey,P[te].indexes)}),oc(d,x),void Re.follow(function(){return d.on.populate.fire(j)}).catch(D));var V,W})}function xT(d,h){Jv(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var x=uc(0,d.idbdb,h);cc(d,d._dbSchema,h);for(var E=0,P=uh(x,d._dbSchema).change;E<P.length;E++){var j=function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=h.objectStore(D.name);D.add.forEach(function(V){we&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(V.src)),lc(B,V)})}(P[E]);if(typeof j=="object")return j.value}}function uh(d,h){var x,E={del:[],add:[],change:[]};for(x in d)h[x]||E.del.push(x);for(x in h){var P=d[x],j=h[x];if(P){var D={name:x,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(P.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||P.primKey.auto!==j.primKey.auto)D.recreate=!0,E.change.push(D);else{var B=P.idxByName,V=j.idxByName,W=void 0;for(W in B)V[W]||D.del.push(W);for(W in V){var te=B[W],U=V[W];te?te.src!==U.src&&D.change.push(U):D.add.push(U)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([x,j])}return E}function ch(d,h,x,E){var P=d.db.createObjectStore(h,x.keyPath?{keyPath:x.keyPath,autoIncrement:x.auto}:{autoIncrement:x.auto});return E.forEach(function(j){return lc(P,j)}),P}function Jv(d,h){o(d).forEach(function(x){h.db.objectStoreNames.contains(x)||(we&&console.debug("Dexie: Creating missing table",x),ch(h,x,d[x].primKey,d[x].indexes))})}function lc(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function uc(d,h,x){var E={};return y(h.objectStoreNames,0).forEach(function(P){for(var j=x.objectStore(P),D=ih(Qv(W=j.keyPath),W||"",!0,!1,!!j.autoIncrement,W&&typeof W!="string",!0),B=[],V=0;V<j.indexNames.length;++V){var te=j.index(j.indexNames[V]),W=te.keyPath,te=ih(te.name,W,!!te.unique,!!te.multiEntry,!1,W&&typeof W!="string",!1);B.push(te)}E[P]=oh(P,D,B)}),E}function cc(d,h,x){for(var E=x.db.objectStoreNames,P=0;P<E.length;++P){var j=E[P],D=x.objectStore(j);d._hasGetAll="getAll"in D;for(var B=0;B<D.indexNames.length;++B){var V=D.indexNames[B],W=D.index(V).keyPath,te=typeof W=="string"?W:"["+y(W).join("+")+"]";!h[j]||(W=h[j].idxByName[te])&&(W.name=V,delete h[j].idxByName[te],h[j].idxByName[V]=W)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Zv(d){return d.split(",").map(function(h,x){var j=h.split(":"),E=(P=j[1])===null||P===void 0?void 0:P.trim(),P=(h=j[0].trim()).replace(/([&*]|\+\+)/g,""),j=/^\[/.test(P)?P.match(/^\[(.*)\]$/)[1].split("+"):P;return ih(P,j||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(j),x===0,E)})}var _T=(Po.prototype._createTableSchema=oh,Po.prototype._parseIndexSyntax=Zv,Po.prototype._parseStoresSpec=function(d,h){var x=this;o(d).forEach(function(E){if(d[E]!==null){var P=x._parseIndexSyntax(d[E]),j=P.shift();if(!j)throw new me.Schema("Invalid schema for table "+E+": "+d[E]);if(j.unique=!0,j.multi)throw new me.Schema("Primary key cannot be multiEntry*");P.forEach(function(D){if(D.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),P=x._createTableSchema(E,j,P),h[E]=P}})},Po.prototype.stores=function(x){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,x):x;var x=h._versions,E={},P={};return x.forEach(function(j){l(E,j._cfg.storesSource),P=j._cfg.dbschema={},j._parseStoresSpec(E,P)}),h._dbSchema=P,lh(h,[h._allTables,h,h.Transaction.prototype]),ac(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(P),P),h._storeNames=o(P),this},Po.prototype.upgrade=function(d){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||qe,d),this},Po);function Po(){}function dh(d,h){var x=d._dbNamesDB;return x||(x=d._dbNamesDB=new ts(ec,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),x.table("dbnames")}function fh(d){return d&&typeof d.databases=="function"}function hh(d){return Cs(function(){return Ne.letThrough=!0,d()})}function ph(d){return!("from"in d)}var ln=function(d,h){if(!this){var x=new ln;return d&&"d"in d&&l(x,d),x}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function nl(d,h,x){var E=st(h,x);if(!isNaN(E)){if(0<E)throw RangeError();if(ph(d))return l(d,{from:h,to:x,d:1});var P=d.l,E=d.r;if(st(x,d.from)<0)return P?nl(P,h,x):d.l={from:h,to:x,d:1,l:null,r:null},e0(d);if(0<st(h,d.to))return E?nl(E,h,x):d.r={from:h,to:x,d:1,l:null,r:null},e0(d);st(h,d.from)<0&&(d.from=h,d.l=null,d.d=E?E.d+1:1),0<st(x,d.to)&&(d.to=x,d.r=null,d.d=d.l?d.l.d+1:1),x=!d.r,P&&!d.l&&rl(d,P),E&&x&&rl(d,E)}}function rl(d,h){ph(h)||function x(E,V){var j=V.from,D=V.to,B=V.l,V=V.r;nl(E,j,D),B&&x(E,B),V&&x(E,V)}(d,h)}function Xv(d,h){var x=dc(h),E=x.next();if(E.done)return!1;for(var P=E.value,j=dc(d),D=j.next(P.from),B=D.value;!E.done&&!D.done;){if(st(B.from,P.to)<=0&&0<=st(B.to,P.from))return!0;st(P.from,B.from)<0?P=(E=x.next(B.from)).value:B=(D=j.next(P.from)).value}return!1}function dc(d){var h=ph(d)?null:{s:0,n:d};return{next:function(x){for(var E=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,E)for(;h.n.l&&st(x,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!E||st(x,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function e0(d){var h,x,E=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((x=d.l)===null||x===void 0?void 0:x.d)||0),P=1<E?"r":E<-1?"l":"";P&&(h=P=="r"?"l":"r",x=r({},d),E=d[P],d.from=E.from,d.to=E.to,d[P]=E[P],x[P]=E[h],(d[h]=x).d=t0(x)),d.d=t0(d)}function t0(x){var h=x.r,x=x.l;return(h?x?Math.max(h.d,x.d):h.d:x?x.d:0)+1}function fc(d,h){return o(h).forEach(function(x){d[x]?rl(d[x],h[x]):d[x]=function E(P){var j,D,B={};for(j in P)f(P,j)&&(D=P[j],B[j]=!D||typeof D!="object"||he.has(D.constructor)?D:E(D));return B}(h[x])}),d}function mh(d,h){return d.all||h.all||Object.keys(d).some(function(x){return h[x]&&Xv(h[x],d[x])})}p(ln.prototype,((er={add:function(d){return rl(this,d),this},addKey:function(d){return nl(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(x){return nl(h,x,x)}),this},hasKey:function(d){var h=dc(this).next(d).value;return h&&st(h.from,d)<=0&&0<=st(h.to,d)}})[ve]=function(){return dc(this)},er));var Ti={},gh={},yh=!1;function hc(d){fc(gh,d),yh||(yh=!0,setTimeout(function(){yh=!1,vh(gh,!(gh={}))},0))}function vh(d,h){h===void 0&&(h=!1);var x=new Set;if(d.all)for(var E=0,P=Object.values(Ti);E<P.length;E++)n0(D=P[E],d,x,h);else for(var j in d){var D,B=/^idb\:\/\/(.*)\/(.*)\//.exec(j);B&&(j=B[1],B=B[2],(D=Ti["idb://".concat(j,"/").concat(B)])&&n0(D,d,x,h))}x.forEach(function(V){return V()})}function n0(d,h,x,E){for(var P=[],j=0,D=Object.entries(d.queries.query);j<D.length;j++){for(var B=D[j],V=B[0],W=[],te=0,U=B[1];te<U.length;te++){var re=U[te];mh(h,re.obsSet)?re.subscribers.forEach(function(ne){return x.add(ne)}):E&&W.push(re)}E&&P.push([V,W])}if(E)for(var q=0,Q=P;q<Q.length;q++){var Y=Q[q],V=Y[0],W=Y[1];d.queries.query[V]=W}}function kT(d){var h=d._state,x=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Rt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var E=h.openCanceller,P=Math.round(10*d.verno),j=!1;function D(){if(h.openCanceller!==E)throw new me.DatabaseClosed("db.open() was cancelled")}function B(){return new Re(function(re,q){if(D(),!x)throw new me.MissingAPI;var Q=d.name,Y=h.autoSchema||!P?x.open(Q):x.open(Q,P);if(!Y)throw new me.MissingAPI;Y.onerror=Lr(q),Y.onblocked=vt(d._fireOnBlocked),Y.onupgradeneeded=vt(function(ne){var ie;te=Y.transaction,h.autoSchema&&!d._options.allowEmptyDB?(Y.onerror=Za,te.abort(),Y.result.close(),(ie=x.deleteDatabase(Q)).onsuccess=ie.onerror=vt(function(){q(new me.NoSuchDatabase("Database ".concat(Q," doesnt exist")))})):(te.onerror=Lr(q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,U=ne<1,d.idbdb=Y.result,j&&xT(d,te),bT(d,ne/10,te,q))},q),Y.onsuccess=vt(function(){te=null;var ne,ie,ue,pe,be,Te=d.idbdb=Y.result,Oe=y(Te.objectStoreNames);if(0<Oe.length)try{var Ce=Te.transaction((pe=Oe).length===1?pe[0]:pe,"readonly");if(h.autoSchema)ie=Te,ue=Ce,(ne=d).verno=ie.version/10,ue=ne._dbSchema=uc(0,ie,ue),ne._storeNames=y(ie.objectStoreNames,0),ac(ne,[ne._allTables],o(ue),ue);else if(cc(d,d._dbSchema,Ce),((be=uh(uc(0,(be=d).idbdb,Ce),be._dbSchema)).add.length||be.change.some(function(Pe){return Pe.add.length||Pe.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),P=Te.version+1,j=!0,re(B());oc(d,Ce)}catch{}Eo.push(d),Te.onversionchange=vt(function(Pe){h.vcFired=!0,d.on("versionchange").fire(Pe)}),Te.onclose=vt(function(){d.close({disableAutoOpen:!1})}),U&&(be=d._deps,Ce=Q,Te=be.indexedDB,be=be.IDBKeyRange,fh(Te)||Ce===ec||dh(Te,be).put({name:Ce}).catch(qe)),re()},q)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<P)return P=0,B()}return Re.reject(re)})}var V,W=h.dbReadyResolve,te=null,U=!1;return Re.race([E,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function q(){return indexedDB.databases().finally(re)}V=setInterval(q,100),q()}).finally(function(){return clearInterval(V)}):Promise.resolve()).then(B)]).then(function(){return D(),h.onReadyBeingFired=[],Re.resolve(hh(function(){return d.on.ready.fire(d.vip)})).then(function re(){if(0<h.onReadyBeingFired.length){var q=h.onReadyBeingFired.reduce(_e,qe);return h.onReadyBeingFired=[],Re.resolve(hh(function(){return q(d.vip)})).then(re)}})}).finally(function(){h.openCanceller===E&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(re){h.dbOpenError=re;try{te&&te.abort()}catch{}return E===h.openCanceller&&d._close(),Rt(re)}).finally(function(){h.openComplete=!0,W()}).then(function(){var re;return U&&(re={},d.tables.forEach(function(q){q.schema.indexes.forEach(function(Q){Q.name&&(re["idb://".concat(d.name,"/").concat(q.name,"/").concat(Q.name)]=new ln(-1/0,[[[]]]))}),re["idb://".concat(d.name,"/").concat(q.name,"/")]=re["idb://".concat(d.name,"/").concat(q.name,"/:dels")]=new ln(-1/0,[[[]]])}),js(Xa).fire(re),vh(re,!0)),d})}function wh(d){function h(j){return d.next(j)}var x=P(h),E=P(function(j){return d.throw(j)});function P(j){return function(V){var B=j(V),V=B.value;return B.done?V:V&&typeof V.then=="function"?V.then(x,E):a(V)?Promise.all(V).then(x,E):x(V)}}return P(h)()}function pc(d,h,x){for(var E=a(d)?d.slice():[d],P=0;P<x;++P)E.push(h);return E}var ST={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var x=d.table(h),E=x.schema,P={},j=[];function D(U,re,q){var Q=tl(U),Y=P[Q]=P[Q]||[],ne=U==null?0:typeof U=="string"?1:U.length,ie=0<re,ie=r(r({},q),{name:ie?"".concat(Q,"(virtual-from:").concat(q.name,")"):q.name,lowLevelIndex:q,isVirtual:ie,keyTail:re,keyLength:ne,extractKey:ah(U),unique:!ie&&q.unique});return Y.push(ie),ie.isPrimaryKey||j.push(ie),1<ne&&D(ne===2?U[0]:U.slice(0,ne-1),re+1,q),Y.sort(function(ue,pe){return ue.keyTail-pe.keyTail}),ie}h=D(E.primaryKey.keyPath,0,E.primaryKey),P[":id"]=[h];for(var B=0,V=E.indexes;B<V.length;B++){var W=V[B];D(W.keyPath,0,W)}function te(U){var re,q=U.query.index;return q.isVirtual?r(r({},U),{query:{index:q.lowLevelIndex,range:(re=U.query.range,q=q.keyTail,{type:re.type===1?2:re.type,lower:pc(re.lower,re.lowerOpen?d.MAX_KEY:d.MIN_KEY,q),lowerOpen:!0,upper:pc(re.upper,re.upperOpen?d.MIN_KEY:d.MAX_KEY,q),upperOpen:!0})}}):U}return r(r({},x),{schema:r(r({},E),{primaryKey:h,indexes:j,getIndexByKeyPath:function(U){return(U=P[tl(U)])&&U[0]}}),count:function(U){return x.count(te(U))},query:function(U){return x.query(te(U))},openCursor:function(U){var re=U.query.index,q=re.keyTail,Q=re.isVirtual,Y=re.keyLength;return Q?x.openCursor(te(U)).then(function(ie){return ie&&ne(ie)}):x.openCursor(U);function ne(ie){return Object.create(ie,{continue:{value:function(ue){ue!=null?ie.continue(pc(ue,U.reverse?d.MAX_KEY:d.MIN_KEY,q)):U.unique?ie.continue(ie.key.slice(0,Y).concat(U.reverse?d.MIN_KEY:d.MAX_KEY,q)):ie.continue()}},continuePrimaryKey:{value:function(ue,pe){ie.continuePrimaryKey(pc(ue,d.MAX_KEY,q),pe)}},primaryKey:{get:function(){return ie.primaryKey}},key:{get:function(){var ue=ie.key;return Y===1?ue[0]:ue.slice(0,Y)}},value:{get:function(){return ie.value}}})}}})}})}};function bh(d,h,x,E){return x=x||{},E=E||"",o(d).forEach(function(P){var j,D,B;f(h,P)?(j=d[P],D=h[P],typeof j=="object"&&typeof D=="object"&&j&&D?(B=G(j))!==G(D)?x[E+P]=h[P]:B==="Object"?bh(j,D,x,E+P+"."):j!==D&&(x[E+P]=h[P]):j!==D&&(x[E+P]=h[P])):x[E+P]=void 0}),o(h).forEach(function(P){f(d,P)||(x[E+P]=h[P])}),x}function xh(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var ET={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var x=d.table(h),E=x.schema.primaryKey;return r(r({},x),{mutate:function(P){var j=Ne.trans,D=j.table(h).hook,B=D.deleting,V=D.creating,W=D.updating;switch(P.type){case"add":if(V.fire===qe)break;return j._promise("readwrite",function(){return te(P)},!0);case"put":if(V.fire===qe&&W.fire===qe)break;return j._promise("readwrite",function(){return te(P)},!0);case"delete":if(B.fire===qe)break;return j._promise("readwrite",function(){return te(P)},!0);case"deleteRange":if(B.fire===qe)break;return j._promise("readwrite",function(){return function U(re,q,Q){return x.query({trans:re,values:!1,query:{index:E,range:q},limit:Q}).then(function(Y){var ne=Y.result;return te({type:"delete",keys:ne,trans:re}).then(function(ie){return 0<ie.numFailures?Promise.reject(ie.failures[0]):ne.length<Q?{failures:[],numFailures:0,lastResult:void 0}:U(re,r(r({},q),{lower:ne[ne.length-1],lowerOpen:!0}),Q)})})}(P.trans,P.range,1e4)},!0)}return x.mutate(P);function te(U){var re,q,Q,Y=Ne.trans,ne=U.keys||xh(E,U);if(!ne)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?r(r({},U),{keys:ne}):r({},U)).type!=="delete"&&(U.values=s([],U.values)),U.keys&&(U.keys=s([],U.keys)),re=x,Q=ne,((q=U).type==="add"?Promise.resolve([]):re.getMany({trans:q.trans,keys:Q,cache:"immutable"})).then(function(ie){var ue=ne.map(function(pe,be){var Te,Oe,Ce,Pe=ie[be],Ie={onerror:null,onsuccess:null};return U.type==="delete"?B.fire.call(Ie,pe,Pe,Y):U.type==="add"||Pe===void 0?(Te=V.fire.call(Ie,pe,U.values[be],Y),pe==null&&Te!=null&&(U.keys[be]=pe=Te,E.outbound||R(U.values[be],E.keyPath,pe))):(Te=bh(Pe,U.values[be]),(Oe=W.fire.call(Ie,Te,pe,Pe,Y))&&(Ce=U.values[be],Object.keys(Oe).forEach(function(Ae){f(Ce,Ae)?Ce[Ae]=Oe[Ae]:R(Ce,Ae,Oe[Ae])}))),Ie});return x.mutate(U).then(function(pe){for(var be=pe.failures,Te=pe.results,Oe=pe.numFailures,pe=pe.lastResult,Ce=0;Ce<ne.length;++Ce){var Pe=(Te||ne)[Ce],Ie=ue[Ce];Pe==null?Ie.onerror&&Ie.onerror(be[Ce]):Ie.onsuccess&&Ie.onsuccess(U.type==="put"&&ie[Ce]?U.values[Ce]:Pe)}return{failures:be,results:Te,numFailures:Oe,lastResult:pe}}).catch(function(pe){return ue.forEach(function(be){return be.onerror&&be.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function r0(d,h,x){try{if(!h||h.keys.length<d.length)return null;for(var E=[],P=0,j=0;P<h.keys.length&&j<d.length;++P)st(h.keys[P],d[j])===0&&(E.push(x?J(h.values[P]):h.values[P]),++j);return E.length===d.length?E:null}catch{return null}}var CT={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var x=d.table(h);return r(r({},x),{getMany:function(E){if(!E.cache)return x.getMany(E);var P=r0(E.keys,E.trans._cache,E.cache==="clone");return P?Re.resolve(P):x.getMany(E).then(function(j){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?J(j):j},j})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),x.mutate(E)}})}}}};function s0(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function i0(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var TT={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,x=new ln(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(E,P,j){if(Ne.subscr&&P!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return d.transaction(E,P,j)},table:function(E){var P=d.table(E),j=P.schema,D=j.primaryKey,U=j.indexes,B=D.extractKey,V=D.outbound,W=D.autoIncrement&&U.filter(function(q){return q.compound&&q.keyPath.includes(D.keyPath)}),te=r(r({},P),{mutate:function(q){function Q(Ae){return Ae="idb://".concat(h,"/").concat(E,"/").concat(Ae),pe[Ae]||(pe[Ae]=new ln)}var Y,ne,ie,ue=q.trans,pe=q.mutatedParts||(q.mutatedParts={}),be=Q(""),Te=Q(":dels"),Oe=q.type,Ie=q.type==="deleteRange"?[q.range]:q.type==="delete"?[q.keys]:q.values.length<50?[xh(D,q).filter(function(Ae){return Ae}),q.values]:[],Ce=Ie[0],Pe=Ie[1],Ie=q.trans._cache;return a(Ce)?(be.addKeys(Ce),(Ie=Oe==="delete"||Ce.length===Pe.length?r0(Ce,Ie):null)||Te.addKeys(Ce),(Ie||Pe)&&(Y=Q,ne=Ie,ie=Pe,j.indexes.forEach(function(Ae){var Me=Y(Ae.name||"");function Je(nt){return nt!=null?Ae.extractKey(nt):null}function et(nt){return Ae.multiEntry&&a(nt)?nt.forEach(function(Bn){return Me.addKey(Bn)}):Me.addKey(nt)}(ne||ie).forEach(function(nt,un){var Qe=ne&&Je(ne[un]),un=ie&&Je(ie[un]);st(Qe,un)!==0&&(Qe!=null&&et(Qe),un!=null&&et(un))})}))):Ce?(Pe={from:(Pe=Ce.lower)!==null&&Pe!==void 0?Pe:d.MIN_KEY,to:(Pe=Ce.upper)!==null&&Pe!==void 0?Pe:d.MAX_KEY},Te.add(Pe),be.add(Pe)):(be.add(x),Te.add(x),j.indexes.forEach(function(Ae){return Q(Ae.name).add(x)})),P.mutate(q).then(function(Ae){return!Ce||q.type!=="add"&&q.type!=="put"||(be.addKeys(Ae.results),W&&W.forEach(function(Me){for(var Je=q.values.map(function(Qe){return Me.extractKey(Qe)}),et=Me.keyPath.findIndex(function(Qe){return Qe===D.keyPath}),nt=0,Bn=Ae.results.length;nt<Bn;++nt)Je[nt][et]=Ae.results[nt];Q(Me.name).addKeys(Je)})),ue.mutatedParts=fc(ue.mutatedParts||{},pe),Ae})}}),U=function(Q){var Y=Q.query,Q=Y.index,Y=Y.range;return[Q,new ln((Q=Y.lower)!==null&&Q!==void 0?Q:d.MIN_KEY,(Y=Y.upper)!==null&&Y!==void 0?Y:d.MAX_KEY)]},re={get:function(q){return[D,new ln(q.key)]},getMany:function(q){return[D,new ln().addKeys(q.keys)]},count:U,query:U,openCursor:U};return o(re).forEach(function(q){te[q]=function(Q){var Y=Ne.subscr,ne=!!Y,ie=s0(Ne,P)&&i0(q,Q)?Q.obsSet={}:Y;if(ne){var ue=function(Pe){return Pe="idb://".concat(h,"/").concat(E,"/").concat(Pe),ie[Pe]||(ie[Pe]=new ln)},pe=ue(""),be=ue(":dels"),Y=re[q](Q),ne=Y[0],Y=Y[1];if((q==="query"&&ne.isPrimaryKey&&!Q.values?be:ue(ne.name||"")).add(Y),!ne.isPrimaryKey){if(q!=="count"){var Te=q==="query"&&V&&Q.values&&P.query(r(r({},Q),{values:!1}));return P[q].apply(this,arguments).then(function(Pe){if(q==="query"){if(V&&Q.values)return Te.then(function(Je){return Je=Je.result,pe.addKeys(Je),Pe});var Ie=Q.values?Pe.result.map(B):Pe.result;(Q.values?pe:be).addKeys(Ie)}else if(q==="openCursor"){var Ae=Pe,Me=Q.values;return Ae&&Object.create(Ae,{key:{get:function(){return be.addKey(Ae.primaryKey),Ae.key}},primaryKey:{get:function(){var Je=Ae.primaryKey;return be.addKey(Je),Je}},value:{get:function(){return Me&&pe.addKey(Ae.primaryKey),Ae.value}}})}return Pe})}be.add(x)}}return P[q].apply(this,arguments)}}),te}})}};function o0(d,h,x){if(x.numFailures===0)return h;if(h.type==="deleteRange")return null;var E=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return x.numFailures===E?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(P,j){return!(j in x.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(P,j){return!(j in x.failures)})),h)}function _h(d,h){return x=d,((E=h).lower===void 0||(E.lowerOpen?0<st(x,E.lower):0<=st(x,E.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?st(d,h.upper)<0:st(d,h.upper)<=0));var x,E}function a0(d,h,re,E,P,j){if(!re||re.length===0)return d;var D=h.query.index,B=D.multiEntry,V=h.query.range,W=E.schema.primaryKey.extractKey,te=D.extractKey,U=(D.lowLevelIndex||D).extractKey,re=re.reduce(function(q,Q){var Y=q,ne=[];if(Q.type==="add"||Q.type==="put")for(var ie=new ln,ue=Q.values.length-1;0<=ue;--ue){var pe,be=Q.values[ue],Te=W(be);ie.hasKey(Te)||(pe=te(be),(B&&a(pe)?pe.some(function(Ae){return _h(Ae,V)}):_h(pe,V))&&(ie.addKey(Te),ne.push(be)))}switch(Q.type){case"add":var Oe=new ln().addKeys(h.values?q.map(function(Me){return W(Me)}):q),Y=q.concat(h.values?ne.filter(function(Me){return Me=W(Me),!Oe.hasKey(Me)&&(Oe.addKey(Me),!0)}):ne.map(function(Me){return W(Me)}).filter(function(Me){return!Oe.hasKey(Me)&&(Oe.addKey(Me),!0)}));break;case"put":var Ce=new ln().addKeys(Q.values.map(function(Me){return W(Me)}));Y=q.filter(function(Me){return!Ce.hasKey(h.values?W(Me):Me)}).concat(h.values?ne:ne.map(function(Me){return W(Me)}));break;case"delete":var Pe=new ln().addKeys(Q.keys);Y=q.filter(function(Me){return!Pe.hasKey(h.values?W(Me):Me)});break;case"deleteRange":var Ie=Q.range;Y=q.filter(function(Me){return!_h(W(Me),Ie)})}return Y},d);return re===d?d:(re.sort(function(q,Q){return st(U(q),U(Q))||st(W(q),W(Q))}),h.limit&&h.limit<1/0&&(re.length>h.limit?re.length=h.limit:d.length===h.limit&&re.length<h.limit&&(P.dirty=!0)),j?Object.freeze(re):re)}function l0(d,h){return st(d.lower,h.lower)===0&&st(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function PT(d,h){return function(x,E,P,j){if(x===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=st(x,E))===0){if(P&&j)return 0;if(P)return 1;if(j)return-1}return E}(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=function(x,E,P,j){if(x===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=st(x,E))===0){if(P&&j)return 0;if(P)return-1;if(j)return 1}return E}(d.upper,h.upper,d.upperOpen,h.upperOpen)}function AT(d,h,x,E){d.subscribers.add(x),E.addEventListener("abort",function(){var P,j;d.subscribers.delete(x),d.subscribers.size===0&&(P=d,j=h,setTimeout(function(){P.subscribers.size===0&&ce(j,P)},3e3))})}var jT={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(x,E,P){var j,D,B=d.transaction(x,E,P);return E==="readwrite"&&(D=(j=new AbortController).signal,P=function(V){return function(){if(j.abort(),E==="readwrite"){for(var W=new Set,te=0,U=x;te<U.length;te++){var re=U[te],q=Ti["idb://".concat(h,"/").concat(re)];if(q){var Q=d.table(re),Y=q.optimisticOps.filter(function(Me){return Me.trans===B});if(B._explicit&&V&&B.mutatedParts)for(var ne=0,ie=Object.values(q.queries.query);ne<ie.length;ne++)for(var ue=0,pe=(Oe=ie[ne]).slice();ue<pe.length;ue++)mh((Ce=pe[ue]).obsSet,B.mutatedParts)&&(ce(Oe,Ce),Ce.subscribers.forEach(function(Me){return W.add(Me)}));else if(0<Y.length){q.optimisticOps=q.optimisticOps.filter(function(Me){return Me.trans!==B});for(var be=0,Te=Object.values(q.queries.query);be<Te.length;be++)for(var Oe,Ce,Pe,Ie=0,Ae=(Oe=Te[be]).slice();Ie<Ae.length;Ie++)(Ce=Ae[Ie]).res!=null&&B.mutatedParts&&(V&&!Ce.dirty?(Pe=Object.isFrozen(Ce.res),Pe=a0(Ce.res,Ce.req,Y,Q,Ce,Pe),Ce.dirty?(ce(Oe,Ce),Ce.subscribers.forEach(function(Me){return W.add(Me)})):Pe!==Ce.res&&(Ce.res=Pe,Ce.promise=Re.resolve({result:Pe}))):(Ce.dirty&&ce(Oe,Ce),Ce.subscribers.forEach(function(Me){return W.add(Me)})))}}}W.forEach(function(Me){return Me()})}}},B.addEventListener("abort",P(!1),{signal:D}),B.addEventListener("error",P(!1),{signal:D}),B.addEventListener("complete",P(!0),{signal:D})),B},table:function(x){var E=d.table(x),P=E.schema.primaryKey;return r(r({},E),{mutate:function(j){var D=Ne.trans;if(P.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(j);var B=Ti["idb://".concat(h,"/").concat(x)];return B?(D=E.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||xh(P,j).some(function(V){return V==null}))?(B.optimisticOps.push(j),j.mutatedParts&&hc(j.mutatedParts),D.then(function(V){0<V.numFailures&&(ce(B.optimisticOps,j),(V=o0(0,j,V))&&B.optimisticOps.push(V),j.mutatedParts&&hc(j.mutatedParts))}),D.catch(function(){ce(B.optimisticOps,j),j.mutatedParts&&hc(j.mutatedParts)})):D.then(function(V){var W=o0(0,r(r({},j),{values:j.values.map(function(te,U){var re;return V.failures[U]?te:(te=(re=P.keyPath)!==null&&re!==void 0&&re.includes(".")?J(te):r({},te),R(te,P.keyPath,V.results[U]),te)})}),V);B.optimisticOps.push(W),queueMicrotask(function(){return j.mutatedParts&&hc(j.mutatedParts)})}),D):E.mutate(j)},query:function(j){if(!s0(Ne,E)||!i0("query",j))return E.query(j);var D=((W=Ne.trans)===null||W===void 0?void 0:W.db._options.cache)==="immutable",U=Ne,B=U.requery,V=U.signal,W=function(Q,Y,ne,ie){var ue=Ti["idb://".concat(Q,"/").concat(Y)];if(!ue)return[];if(!(Y=ue.queries[ne]))return[null,!1,ue,null];var pe=Y[(ie.query?ie.query.index.name:null)||""];if(!pe)return[null,!1,ue,null];switch(ne){case"query":var be=pe.find(function(Te){return Te.req.limit===ie.limit&&Te.req.values===ie.values&&l0(Te.req.query.range,ie.query.range)});return be?[be,!0,ue,pe]:[pe.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=ie.limit&&(!ie.values||Te.req.values)&&PT(Te.req.query.range,ie.query.range)}),!1,ue,pe];case"count":return be=pe.find(function(Te){return l0(Te.req.query.range,ie.query.range)}),[be,!!be,ue,pe]}}(h,x,"query",j),te=W[0],U=W[1],re=W[2],q=W[3];return te&&U?te.obsSet=j.obsSet:(U=E.query(j).then(function(Q){var Y=Q.result;if(te&&(te.res=Y),D){for(var ne=0,ie=Y.length;ne<ie;++ne)Object.freeze(Y[ne]);Object.freeze(Y)}else Q.result=J(Y);return Q}).catch(function(Q){return q&&te&&ce(q,te),Promise.reject(Q)}),te={obsSet:j.obsSet,promise:U,subscribers:new Set,type:"query",req:j,dirty:!1},q?q.push(te):(q=[te],(re=re||(Ti["idb://".concat(h,"/").concat(x)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=q)),AT(te,q,B,V),te.promise.then(function(Q){return{result:a0(Q.result,j,re==null?void 0:re.optimisticOps,E,te,D)}})}})}})}};function mc(d,h){return new Proxy(d,{get:function(x,E,P){return E==="db"?h:Reflect.get(x,E,P)}})}var ts=(It.prototype.version=function(d){if(isNaN(d)||d<.1)throw new me.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,x=h.filter(function(E){return E._cfg.version===d})[0];return x||(x=new this.Version(d),h.push(x),h.sort(wT),x.stores({}),this._state.autoSchema=!1,x)},It.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?d():new Re(function(x,E){if(h._state.openComplete)return E(new me.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void E(new me.DatabaseClosed);h.open().catch(qe)}h._state.dbReadyPromise.then(x,E)}).then(d)},It.prototype.use=function(d){var h=d.stack,x=d.create,E=d.level,P=d.name;return P&&this.unuse({stack:h,name:P}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:x,level:E??10,name:P}),d.sort(function(j,D){return j.level-D.level}),this},It.prototype.unuse=function(d){var h=d.stack,x=d.name,E=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(P){return E?P.create!==E:!!x&&P.name!==x})),this},It.prototype.open=function(){var d=this;return Si($t,function(){return kT(d)})},It.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Eo.indexOf(this);if(0<=h&&Eo.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Re(function(x){d.dbReadyResolve=x}),d.openCanceller=new Re(function(x,E){d.cancelOpen=E}))},It.prototype.close=function(x){var h=(x===void 0?{disableAutoOpen:!0}:x).disableAutoOpen,x=this._state;h?(x.isBeingOpened&&x.cancelOpen(new me.DatabaseClosed),this._close(),x.autoOpen=!1,x.dbOpenError=new me.DatabaseClosed):(this._close(),x.autoOpen=this._options.autoOpen||x.isBeingOpened,x.openComplete=!1,x.dbOpenError=null)},It.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var x=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Re(function(P,j){function D(){h.close(d);var B=h._deps.indexedDB.deleteDatabase(h.name);B.onsuccess=vt(function(){var V,W,te;V=h._deps,W=h.name,te=V.indexedDB,V=V.IDBKeyRange,fh(te)||W===ec||dh(te,V).delete(W).catch(qe),P()}),B.onerror=Lr(j),B.onblocked=h._fireOnBlocked}if(x)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},It.prototype.backendDB=function(){return this.idbdb},It.prototype.isOpen=function(){return this.idbdb!==null},It.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},It.prototype.hasFailed=function(){return this._state.dbOpenError!==null},It.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(It.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),It.prototype.transaction=function(){var d=(function(h,x,E){var P=arguments.length;if(P<2)throw new me.InvalidArgument("Too few arguments");for(var j=new Array(P-1);--P;)j[P-1]=arguments[P];return E=j.pop(),[h,z(j),E]}).apply(this,arguments);return this._transaction.apply(this,d)},It.prototype._transaction=function(d,h,x){var E=this,P=Ne.trans;P&&P.db===this&&d.indexOf("!")===-1||(P=null);var j,D,B=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(D=h.map(function(W){if(W=W instanceof E.Table?W.name:W,typeof W!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return W}),d=="r"||d===eh)j=eh;else{if(d!="rw"&&d!=th)throw new me.InvalidArgument("Invalid transaction mode: "+d);j=th}if(P){if(P.mode===eh&&j===th){if(!B)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");P=null}P&&D.forEach(function(W){if(P&&P.storeNames.indexOf(W)===-1){if(!B)throw new me.SubTransaction("Table "+W+" not included in parent transaction.");P=null}}),B&&P&&!P.active&&(P=null)}}catch(W){return P?P._promise(null,function(te,U){U(W)}):Rt(W)}var V=(function W(te,U,re,q,Q){return Re.resolve().then(function(){var Y=Ne.transless||Ne,ne=te._createTransaction(U,re,te._dbSchema,q);if(ne.explicit=!0,Y={trans:ne,transless:Y},q)ne.idbtrans=q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,te._state.PR1398_maxLoop=3}catch(pe){return pe.name===Fe.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return W(te,U,re,null,Q)})):Rt(pe)}var ie,ue=Z(Q);return ue&&So(),Y=Re.follow(function(){var pe;(ie=Q.call(ne,ne))&&(ue?(pe=Ts.bind(null,null),ie.then(pe,pe)):typeof ie.next=="function"&&typeof ie.throw=="function"&&(ie=wh(ie)))},Y),(ie&&typeof ie.then=="function"?Re.resolve(ie).then(function(pe){return ne.active?pe:Rt(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Y.then(function(){return ie})).then(function(pe){return q&&ne._resolve(),ne._completion.then(function(){return pe})}).catch(function(pe){return ne._reject(pe),Rt(pe)})})}).bind(null,this,j,D,P,x);return P?P._promise(j,V,"lock"):Ne.trans?Si(Ne.transless,function(){return E._whenReady(V)}):this._whenReady(V)},It.prototype.table=function(d){if(!f(this._allTables,d))throw new me.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},It);function It(d,h){var x=this;this._middlewares={},this.verno=0;var E=It.dependencies;this._options=h=r({addons:It.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},E=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var P,j,D,B,V,W={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:qe,dbReadyPromise:null,cancelOpen:qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};W.dbReadyPromise=new Re(function(U){W.dbReadyResolve=U}),W.openCanceller=new Re(function(U,re){W.cancelOpen=re}),this._state=W,this.name=d,this.on=Ya(this,"populate","blocked","versionchange","close",{ready:[_e,qe]}),this.once=function(U,re){var q=function(){for(var Q=[],Y=0;Y<arguments.length;Y++)Q[Y]=arguments[Y];x.on(U).unsubscribe(q),re.apply(x,Q)};return x.on(U,q)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(U){return function(re,q){It.vip(function(){var Q,Y=x._state;Y.openComplete?(Y.dbOpenError||Re.resolve().then(re),q&&U(re)):Y.onReadyBeingFired?(Y.onReadyBeingFired.push(re),q&&U(re)):(U(re),Q=x,q||U(function ne(){Q.on.ready.unsubscribe(re),Q.on.ready.unsubscribe(ne)}))})}}),this.Collection=(P=this,Ja(fT.prototype,function(ie,ne){this.db=P;var q=$v,Q=null;if(ne)try{q=ne()}catch(ue){Q=ue}var Y=ie._ctx,ne=Y.table,ie=ne.hook.reading.fire;this._ctx={table:ne,index:Y.index,isPrimKey:!Y.index||ne.schema.primKey.keyPath&&Y.index===ne.schema.primKey.name,range:q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Q,or:Y.or,valueMapper:ie!==ct?ie:null}})),this.Table=(j=this,Ja(Vv.prototype,function(U,re,q){this.db=j,this._tx=q,this.name=U,this.schema=re,this.hook=j._allTables[U]?j._allTables[U].hook:Ya(null,{creating:[fe,qe],reading:[A,ct],updating:[L,qe],deleting:[M,qe]})})),this.Transaction=(D=this,Ja(mT.prototype,function(U,re,q,Q,Y){var ne=this;U!=="readonly"&&re.forEach(function(ie){ie=(ie=q[ie])===null||ie===void 0?void 0:ie.yProps,ie&&(re=re.concat(ie.map(function(ue){return ue.updatesTable})))}),this.db=D,this.mode=U,this.storeNames=re,this.schema=q,this.chromeTransactionDurability=Q,this.idbtrans=null,this.on=Ya(this,"complete","error","abort"),this.parent=Y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(ie,ue){ne._resolve=ie,ne._reject=ue}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(ie){var ue=ne.active;return ne.active=!1,ne.on.error.fire(ie),ne.parent?ne.parent._reject(ie):ue&&ne.idbtrans&&ne.idbtrans.abort(),Rt(ie)})})),this.Version=(B=this,Ja(_T.prototype,function(U){this.db=B,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(V=this,Ja(Gv.prototype,function(U,re,q){if(this.db=V,this._ctx={table:U,index:re===":id"?null:re,or:q},this._cmp=this._ascending=st,this._descending=function(Q,Y){return st(Y,Q)},this._max=function(Q,Y){return 0<st(Q,Y)?Q:Y},this._min=function(Q,Y){return st(Q,Y)<0?Q:Y},this._IDBKeyRange=V._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(x.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(x.name,"'. Closing db now to resume the delete request.")),x.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(x.name,"') was blocked")):console.warn("Upgrade '".concat(x.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=el(h.IDBKeyRange),this._createTransaction=function(U,re,q,Q){return new x.Transaction(U,re,q,x._options.chromeTransactionDurability,Q)},this._fireOnBlocked=function(U){x.on("blocked").fire(U),Eo.filter(function(re){return re.name===x.name&&re!==x&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(U)})},this.use(CT),this.use(jT),this.use(TT),this.use(ST),this.use(ET);var te=new Proxy(this,{get:function(U,re,q){if(re==="_vip")return!0;if(re==="table")return function(Y){return mc(x.table(Y),te)};var Q=Reflect.get(U,re,q);return Q instanceof Vv?mc(Q,te):re==="tables"?Q.map(function(Y){return mc(Y,te)}):re==="_createTransaction"?function(){return mc(Q.apply(this,arguments),te)}:Q}});this.vip=te,E.forEach(function(U){return U(x)})}var gc,er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",OT=(kh.prototype.subscribe=function(d,h,x){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:x})},kh.prototype[er]=function(){return this},kh);function kh(d){this._subscribe=d}try{gc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{gc={indexedDB:null,IDBKeyRange:null}}function u0(d){var h,x=!1,E=new OT(function(P){var j=Z(d),D,B=!1,V={},W={},te={get closed(){return B},unsubscribe:function(){B||(B=!0,D&&D.abort(),U&&js.storagemutated.unsubscribe(q))}};P.start&&P.start(te);var U=!1,re=function(){return Xf(Q)},q=function(Y){fc(V,Y),mh(W,V)&&re()},Q=function(){var Y,ne,ie;!B&&gc.indexedDB&&(V={},Y={},D&&D.abort(),D=new AbortController,ie=function(ue){var pe=_o();try{j&&So();var be=Cs(d,ue);return be=j?be.finally(Ts):be}finally{pe&&ko()}}(ne={subscr:Y,signal:D.signal,requery:re,querier:d,trans:null}),Promise.resolve(ie).then(function(ue){x=!0,h=ue,B||ne.signal.aborted||(V={},function(pe){for(var be in pe)if(f(pe,be))return;return 1}(W=Y)||U||(js(Xa,q),U=!0),Xf(function(){return!B&&P.next&&P.next(ue)}))},function(ue){x=!1,["DatabaseClosedError","AbortError"].includes(ue==null?void 0:ue.name)||B||Xf(function(){B||P.error&&P.error(ue)})}))};return setTimeout(re,0),te});return E.hasValue=function(){return x},E.getValue=function(){return h},E}var Pi=ts;function Sh(d){var h=Os;try{Os=!0,js.storagemutated.fire(d),vh(d,!0)}finally{Os=h}}p(Pi,r(r({},Ye),{delete:function(d){return new Pi(d,{addons:[]}).delete()},exists:function(d){return new Pi(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=Pi.dependencies,x=h.indexedDB,h=h.IDBKeyRange,(fh(x)?Promise.resolve(x.databases()).then(function(E){return E.map(function(P){return P.name}).filter(function(P){return P!==ec})}):dh(x,h).toCollection().primaryKeys()).then(d)}catch{return Rt(new me.MissingAPI)}var h,x},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Ne.trans?Si(Ne.transless,d):d()},vip:hh,async:function(d){return function(){try{var h=wh(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Re.resolve(h)}catch(x){return Rt(x)}}},spawn:function(d,h,x){try{var E=wh(d.apply(x,h||[]));return E&&typeof E.then=="function"?E:Re.resolve(E)}catch(P){return Rt(P)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(d,h){return h=Re.resolve(typeof d=="function"?Pi.ignoreTransaction(d):d).timeout(h||6e4),Ne.trans?Ne.trans.waitFor(h):h},Promise:Re,debug:{get:function(){return we},set:function(d){oe(d)}},derive:v,extend:l,props:p,override:b,Events:Ya,on:js,liveQuery:u0,extendObservabilitySet:fc,getByKeyPath:I,setByKeyPath:R,delByKeyPath:function(d,h){typeof h=="string"?R(d,h,void 0):"length"in h&&[].map.call(h,function(x){R(d,x,void 0)})},shallowClone:$,deepClone:J,getObjectDiff:bh,cmp:st,asap:O,minKey:-1/0,addons:[],connections:Eo,errnames:Fe,dependencies:gc,cache:Ti,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,x){return d+h/Math.pow(10,2*x)})})),Pi.maxKey=el(Pi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(js(Xa,function(d){Os||(d=new CustomEvent(sh,{detail:d}),Os=!0,dispatchEvent(d),Os=!1)}),addEventListener(sh,function(d){d=d.detail,Os||Sh(d)}));var Ao,Os=!1,c0=function(){};return typeof BroadcastChannel<"u"&&((c0=function(){(Ao=new BroadcastChannel(sh)).onmessage=function(d){return d.data&&Sh(d.data)}})(),typeof Ao.unref=="function"&&Ao.unref(),js(Xa,function(d){Os||Ao.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!ts.disableBfCache&&d.persisted){we&&console.debug("Dexie: handling persisted pagehide"),Ao!=null&&Ao.close();for(var h=0,x=Eo;h<x.length;h++)x[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!ts.disableBfCache&&d.persisted&&(we&&console.debug("Dexie: handling persisted pageshow"),c0(),Sh({all:new ln(-1/0,[[]])}))})),Re.rejectionMapper=function(d,h){return!d||d instanceof K||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Xe[d.name]?d:(h=new Xe[d.name](h||d.message,d),"stack"in d&&_(h,"stack",{get:function(){return this.inner.stack}}),h)},oe(we),r(ts,Object.freeze({__proto__:null,Dexie:ts,liveQuery:u0,Entity:Mv,cmp:st,PropModification:Qa,replacePrefix:function(d,h){return new Qa({replacePrefix:[d,h]})},add:function(d){return new Qa({add:d})},remove:function(d){return new Qa({remove:d})},default:ts,RangeSet:ln,mergeRanges:rl,rangesOverlap:Xv}),{default:ts}),ts})})(yS);var iD=yS.exports;const Zm=of(iD),rb=Symbol.for("Dexie"),Oa=globalThis[rb]||(globalThis[rb]=Zm);if(Zm.semVer!==Oa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Zm.semVer} and ${Oa.semVer}`);const{liveQuery:wU,mergeRanges:bU,rangesOverlap:xU,RangeSet:_U,cmp:kU,Entity:SU,PropModification:EU,replacePrefix:CU,add:TU,remove:PU,DexieYProvider:AU}=Oa;function oD(e,t,n){var r,s;typeof e=="function"?(r=t||[],s=n):(r=[],s=t);var i=Ve.useRef({hasResult:!1,result:s,error:null}),o=Ve.useReducer(function(u){return u+1},0);o[0];var a=o[1],l=Ve.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")i.current.result=u.getValue(),i.current.hasResult=!0;else{var c=u.subscribe(function(f){i.current.result=f,i.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(Ve.useDebugValue(i.current.result),Ve.useEffect(function(){var u=l.subscribe(function(c){var f=i.current;(f.error!==null||f.result!==c)&&(f.error=null,f.result=c,f.hasResult=!0,a())},function(c){var f=i.current;f.error!==c&&(f.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),i.current.error)throw i.current.error;return i.current.result}function aD(e,t,n){return oD(function(){return Oa.liveQuery(e)},[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=Oa.DexieYProvider;t&&t.release(e)});class vS extends Oa{constructor(){super("SankeertanDB");sl(this,"categories");sl(this,"songIndices");sl(this,"songDetails");sl(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId, categoryId"})}}let cd=null;function Lt(){return cd===null&&(cd=new vS,console.log("Database initialized or re-initialized.")),cd}cd=new vS;async function Rf(e){try{const n=await Lt().songIndices.where("bookId").equals(e).sortBy("insertionId");return n.length>0?n:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function zy(e,t){try{const n=Lt();await n.songIndices.where("bookId").equals(e).delete();const r=t.map(s=>({...s,bookId:e,tags:s.tags||[]}));await n.songIndices.bulkAdd(r)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}const Ka=async e=>{try{return await Lt().songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function lD(e){try{const n=await Lt().songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${n} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function uD(e){try{return await Lt().songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function If(e,t){try{const n=[e,t];return await Lt().songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function wS(e,t){try{const n=Lt(),r=[e,t];return await n.songDetails.where("[bookId+songTitle]").equals(r).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const bS=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function xS(e){const t=bS(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await Lt().songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function cD(e,t){try{const n=Lt(),r=[e,t];await n.songDetails.delete(r)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function _S(e){try{return await Lt().songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function kS(e){try{const t=Lt(),n=await t.songDetails.where("bookId").equals(e).delete(),r=await t.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${n}, Indices removed: ${r}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function dD(e){try{await Lt().songDetails.bulkPut(e)}catch(t){throw console.error("Error bulk saving song details:",t),t}}async function fD(e){try{await Lt().songIndices.bulkPut(e)}catch(t){throw console.error("Error bulk saving song indices:",t),t}}function hD(e){const t=[];return e.forEach(n=>{const r=n.id;n.books&&Array.isArray(n.books)&&n.books.forEach(s=>{const i={...s,categoryId:r};t.push(i)})}),t}async function pD(e){const t=Lt(),n=hD(e);if(n.length===0){console.warn("No books found after transformation. Skipping 'books' table refresh.");return}try{await t.transaction("rw",t.books,async()=>{await t.books.clear(),await t.books.bulkPut(n)}),console.log(`Successfully saved ${n.length} books to the 'books' table.`)}catch(r){console.error("Error saving books to DB:",r)}}async function Gd(e){try{return await Lt().books.get(e)}catch(t){console.error(`Error retrieving metadata for book ${e}:`,t);return}}async function SS(e){try{const t=await Gd(e);if(!t)return!1;const n=Number(t.songCount)||0;if(n===0)return!1;const[r,s]=await Promise.all([Ka(e),_S(e)]);return r&&s>=n}catch(t){return console.error(`Error checking download status for book ${e}:`,t),!1}}async function mD(){try{const n=(await Lt().books.toArray()).map(async s=>({bookId:s.bookId,isDownloaded:await SS(s.bookId)}));return(await Promise.all(n)).filter(s=>s.isDownloaded).map(s=>s.bookId)}catch(e){return console.error("Error getting all fully downloaded book IDs:",e),[]}}async function gD(e){try{const t=Lt(),n=await t.songIndices.where("bookId").equals(e).toArray(),r=await t.songDetails.where("bookId").equals(e).toArray();return!n.length&&!r.length?null:{bookId:e,songIndices:n,songDetails:r}}catch(t){return console.error(`Error exporting full book structure for ${e}:`,t),null}}async function yD(e){try{const t=Lt();await t.categories.clear(),await t.categories.bulkAdd(e),await pD(e),console.log("Categories saved successfully.")}catch(t){console.error("Error saving categories to DB:",t)}}const up=new Map;async function vD(e,t,n,r){const{sourceRow:s,songTitle:i}=t,o=bS(e,i);if(await If(e,i))return;const l=up.get(o);if(l)return l;const u=String(s),c=Number(s),f=(async()=>{if(!e||!i||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${i}, Row: ${s}, User: ${n}`);try{const p=await r({bookId:e,sourceRow:u,songTitle:i,sessionuser:n});if(p.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[m,_,v,w]=p;await xS({bookId:e,songTitle:i,sourceRow:u,indexPosition:w,songData:m,metadata:_,sourceLanguage:v})}catch(p){throw console.error(`Failed to download and cache song ${i} in book ${e}:`,p),p}})();up.set(o,f);try{await f}finally{up.delete(o)}}async function sb(e){const t=e.map(async s=>{const i=s.bookId,o=s.songCount||0,[a,l,u]=await Promise.all([Ka(i),_S(i),uD(i)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const f=c>0?l:0;return{bookId:i,status:{totalSongs:c,downloadedSongs:f,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(s=>{r[s.bookId]=s.status}),r}const wD=async e=>{const t=new URL(`${wi}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const i=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(i)}`)}const r=await n.json();return Object.keys(r).filter(i=>i!=="books").map(i=>({name:i,bookCount:Array.isArray(r[i])?r[i].length:0,books:Array.isArray(r[i])?r[i].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],Type:o.Type,songCount:o["Song Count"],verseCount:o["Verse Count"],author:o.author,language:o.language,isFullBookDownloadable:o.isFullBookDownloadable==="true"||o.isFullBookDownloadable===!0,isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:i.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(i)}&font=lora`}))},ES=S.createContext({categories:[],isLoading:!1,isFetching:!1,error:null,refresh:()=>{}}),bD=Lt(),xD=({children:e})=>{var u;const{session:t}=xi(),n=(u=t==null?void 0:t.user)==null?void 0:u.email,r=aD(()=>bD.categories.toArray());S.useEffect(()=>{console.log("CategoryContext: Dexie categories loaded:",r==null?void 0:r.length)},[r]);const{isLoading:s,isFetching:i,error:o,data:a,refetch:l}=Of({queryKey:["categories",n],queryFn:()=>wD(n??null),enabled:!!n&&r!==void 0&&r.length===0,networkMode:"always",staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1});return S.useEffect(()=>{a&&(console.log("CategoryContext: Fetched new categories from API, saving to Dexie..."),yD(a).catch(c=>console.error("Failed to sync categories to Dexie:",c)))},[a]),k.jsx(ES.Provider,{value:{categories:r??[],isLoading:r===void 0||((r==null?void 0:r.length)??0)===0&&s,isFetching:i,error:o,refresh:l},children:e})},Df=()=>S.useContext(ES),ib=e=>{const[t,n]=S.useState(!1);return S.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),s=i=>n(i.matches);return n(r.matches),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e]),t},CS=()=>{const e=Jn();return{handleSignOut:async()=>{const{error:n}=await zt.auth.signOut();n?console.error("Error signing out:",n):(console.log("User signed out successfully. Navigating to /login."),e("/login"))}}},_D=Lt();function kD(){const[e,t]=S.useState(!1),{categories:n,isLoading:r,isFetching:s,error:i,refresh:o}=Df(),a=Jn(),[l,u]=S.useState([]),c=ib("(max-width: 600px) and (orientation: portrait)"),f=ib("(max-width: 900px) and (orientation: landscape)"),{session:p}=xi(),{handleSignOut:m}=CS();S.useEffect(()=>{n&&u(($=>{const F=[],z=360/$;for(let he=0;he<$;he++){const N=he*z;F.push(`hsl(${N}, 70%, 60%)`)}return F})(n.length))},[n==null?void 0:n.length]);const _=async()=>{console.log("Categories & Books -> Triggering manual refresh from server..."),o()},v=S.useCallback(async()=>{t(!1);try{console.warn("[DB ACTION] Attempting to delete entire database..."),await _D.delete(),await m()}catch(R){console.error("[DB ERROR] Could not delete the database:",R)}},[m]),w=S.useCallback(R=>{R.stopPropagation(),t(!0)},[]);if(r||s)return k.jsx("div",{children:"Loading categories..."});if(i instanceof Error)return k.jsxs("div",{children:["Error loading categories: ",i.message]});const g=(R,$)=>{R.stopPropagation(),a(`/books/${$}`)},y={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea",display:"flex",justifyContent:"space-between",alignItems:"center"},categoryGrid:{display:"grid",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"},actionButton:{border:"none",background:"none",cursor:"pointer",fontSize:"1.5rem",padding:"5px",borderRadius:"5px",transition:"background-color 0.2s",color:"#666",lineHeight:"1.5rem"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"30px",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",maxWidth:"400px",textAlign:"center"},buttonGroup:{display:"flex",justifyContent:"space-around",marginTop:"20px"}};let b;c?b="repeat(2, 1fr)":f?b="repeat(3, 1fr)":b="repeat(auto-fill, minmax(280px, 1fr))";const C={...y.categoryGrid,gridTemplateColumns:b},O=n==null?void 0:n.filter(R=>{var $;return($=R.books)==null?void 0:$.some(F=>F.Type==="book")}),I=()=>e?k.jsx("div",{style:y.modalOverlay,children:k.jsxs("div",{style:y.modalContent,children:[k.jsx("h3",{className:"text-xl font-bold mb-3 text-red-600",children:" Confirm Permanent Deletion"}),k.jsx("p",{className:"text-gray-700",children:"Are you absolutely sure you want to delete **ALL** stored data (Categories, Books, Songs)? This action cannot be undone."}),k.jsxs("div",{style:y.buttonGroup,children:[k.jsx("button",{onClick:v,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Yes, Delete Everything"}),k.jsx("button",{onClick:()=>t(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Cancel"})]})]})}):null;return k.jsxs("div",{style:y.container,children:[k.jsxs("h2",{style:y.heading,children:[k.jsx("span",{style:{marginRight:"auto"},children:"Book Categories"}),k.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[k.jsx("button",{onClick:_,style:{...y.actionButton,color:"#3498db",marginRight:"10px"},title:"Reload",children:""}),k.jsx("button",{onClick:w,style:{...y.actionButton,color:"#e74c3c"},title:"Delete ALL Data",children:""})]})]}),k.jsx("div",{style:C,children:O==null?void 0:O.map((R,$)=>k.jsxs("div",{onClick:F=>g(F,R.id),style:{...y.categoryItem,backgroundColor:$%2===0?"#f8f9fa":"#ffffff",borderLeft:`5px solid ${l[$]||"#3498db"}`},className:"category-item",children:[k.jsx("div",{style:{...y.categoryIcon,backgroundColor:l[$]||"#3498db"},children:""}),k.jsx("span",{style:y.categoryName,children:R.name})]},R.id))}),k.jsx("style",{children:`
                    .category-item:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                        border-color: #3498db;
                    }
                `}),k.jsx(I,{})]})}const SD=S.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),Vy=()=>S.useContext(SD);console.log("DownloadStatusProvider Function Running!");const ob={},TS=S.createContext(void 0),ED=({children:e,books:t})=>{const n=S.useMemo(()=>t.reduce((w,g)=>(w[g.bookId]={totalSongs:g.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},w),{}),[t]),[r,s]=S.useState(n),[i,o]=S.useState(!1);S.useEffect(()=>{if(!t||t.length===0){s({}),o(!0);return}(async()=>{try{const g=await sb(t),y={};for(const b of t){const C=b.bookId,O=g[C]||{},I=await Ka(C);y[C]={totalSongs:b.songCount||O.totalSongs||0,downloadedSongs:O.downloadedSongs||0,isIndexDownloaded:I,downloadingSongs:{}}}s(y),o(!0)}catch(g){console.error("Failed to load or initialize download status:",g),s({}),o(!0)}})()},[t]);const a=S.useMemo(()=>t.map(w=>w.bookId).join(","),[t]);S.useEffect(()=>{if(!t||t.length===0){s(ob);return}(async()=>{try{const g=await sb(t);s(g)}catch(g){console.error("Failed to load initial download status from DB:",g),s(ob)}})()},[a,t]);const l=S.useCallback((w,g)=>{s(y=>({...y,[w]:{...y[w],totalSongs:g}}))},[]),u=S.useCallback((w,g)=>{s(y=>({...y,[w]:{...y[w],downloadedSongs:g}}))},[]),c=S.useCallback((w,g)=>{s(y=>({...y,[w]:{...y[w],isIndexDownloaded:g}}))},[]),f=S.useCallback((w,g)=>{s(y=>{var b;return{...y,[w]:{...y[w],downloadingSongs:{...(b=y[w])==null?void 0:b.downloadingSongs,[g]:!0}}}})},[]),p=S.useCallback((w,g)=>{s(y=>{const b=y[w];if(!b)return y;const C={...b.downloadingSongs};return delete C[g],{...y,[w]:{...b,downloadedSongs:(b.downloadedSongs||0)+1,downloadingSongs:C}}})},[]),m=S.useCallback((w,g,y)=>{s(b=>{const C=b[w]||{},O=C.downloadedSongs||0;return{...b,[w]:{...C,totalSongs:g,downloadedSongs:O,downloadingSongs:y}}})},[]),_=S.useCallback(w=>{s(g=>{const y=g[w];return y?{...g,[w]:{...y,downloadedSongs:y.totalSongs,downloadingSongs:{}}}:g})},[]),v={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:f,markSongAsDownloaded:p,updateIndexStatus:c,markBookDownloadStart:m,markBookDownloadComplete:_,isLoaded:i};return k.jsx(TS.Provider,{value:v,children:e})},Ky=()=>{const e=S.useContext(TS);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},CD=3e3,TD=1,PD=5,Wy=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const s=new URL(wi);s.searchParams.append("mode","api"),s.searchParams.append("apiname","getsongtextforsong"),s.searchParams.append("book",e),s.searchParams.append("sourcerow",t),s.searchParams.append("songtitle",n),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString());if(!i.ok){const o=await i.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},AD=async({bookId:e,songTitle:t,text:n,sessionuser:r})=>{const s=new URL(wi);s.searchParams.append("mode","api"),s.searchParams.append("apiname","savesongtextfromui"),s.searchParams.append("book",e),s.searchParams.append("songtitle",t),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString(),{method:"POST",body:JSON.stringify({text:n})});if(!i.ok){const o=await i.json().catch(()=>({}));throw new Error(`Failed to save song text: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},jD=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:s,markBookDownloadStart:i,markBookDownloadComplete:o}=Ky(),a=S.useCallback(c=>{const f=r[c];if(!f)return!1;const p=f.downloadingSongs??{};return Object.keys(p).length>0},[r]),l=S.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=S.useCallback(async(c,f)=>{if(a(c))return 0;let p=[],m=0;if(await Ka(c)){const y=await Rf(c);y&&Array.isArray(y)&&(p=y.map(b=>({sourceRow:b.sourceRow,songTitle:b.songTitle,tags:b.tags})),m=p.length)}else try{const y=new URL(wi);y.searchParams.append("mode","api"),y.searchParams.append("apiname","getsongsforbook"),y.searchParams.append("book",c),f&&y.searchParams.append("sessionuser",f);const b=await fetch(y.toString());if(!b.ok){const I=await b.json();throw new Error(`Failed to fetch song indices: ${b.status} - ${JSON.stringify(I)}`)}const O=(await b.json()).map(I=>({...I,sourceRow:typeof I.sourceRow=="string"?parseInt(I.sourceRow,10):I.sourceRow,tags:I.tags??void 0}));p=O,m=p.length,await zy(c,O)}catch{return 0}if(p.length===0)return 0;const _=[];for(const y of p)await If(c,y.songTitle)?s(c,y.songTitle):_.push(y);const v=_.slice(0,PD),w={};for(const y of v)w[y.songTitle]="pending";i(c,m,w);let g=0;for(const y of v)try{g>=TD&&(await new Promise(b=>setTimeout(b,CD)),g=0),await vD(c,y,f??null,Wy),s(c,y.songTitle),g++}catch{}return m},[e,t,n,a,s,i]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},br={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},Hy=()=>{const e=Yn(),{categoryId:t,bookId:n,songTitle:r}=Ba(),s=r?decodeURIComponent(r):"",[i,o]=Ve.useState(!1),a={...br.link,color:i?"#0056b3":"#007bff",textDecoration:i?"underline":"none"},l=k.jsx(Vn,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"}),u=(c,f)=>c?c.length>f?c.substring(0,f)+"...":c:"";return e.pathname.startsWith("/books/")?k.jsxs("div",{style:br.container,children:[l,k.jsx("span",{style:br.separator,children:">"}),k.jsx("span",{title:t,children:u(t,20)})]}):e.pathname.startsWith("/book/")?k.jsxs("div",{style:br.container,children:[l,k.jsx("span",{style:br.separator,children:">"}),k.jsx(Vn,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:t,children:u(t,20)}),k.jsx("span",{style:br.separator,children:">"}),k.jsx("span",{title:n,children:u(n,25)})]}):e.pathname.startsWith("/details/book/")?k.jsxs("div",{style:br.container,children:[l,k.jsx("span",{style:br.separator,children:">"}),k.jsx(Vn,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:t,children:u(t,20)}),k.jsx("span",{style:br.separator,children:">"}),k.jsx(Vn,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:n,children:u(n,25)}),k.jsx("span",{style:br.separator,children:">"}),k.jsx("span",{style:br.currentPage,title:s,children:u(s,40)})]}):null},PS=S.createContext({preferredLanguage:"devanagari",setPreferredLanguage:()=>{}}),AS=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=S.useState(t||"devanagari");return S.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),k.jsx(PS.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r},children:e})},bo=()=>S.useContext(PS);async function jS(e,t){const n=[];let r=0;for(;r<e.length;){const s=e.slice(r,r+t),i=await Promise.all(s.map(o=>o()));n.push(...i),r+=t}return n}const ab=3,OD=10;async function RD(e,t,n,r,s){const i=n||new Set,o=ID(r,e);if(o.length>0){const a=o.slice(0,OD);console.log(`[RECURSION START] Found ${o.length} linked books in ${e}. Queuing ${a.length} for batched download...`);const l=a.filter(u=>!i.has(u)).map(u=>()=>s(u,t,n));l.length>0?(console.log(`[BATCH EXECUTION] Queued ${l.length} unique downloads with batch size ${ab}.`),await jS(l,ab),console.log(`[RECURSION COMPLETE] All batched linked books for ${e} have been processed.`)):console.log(`[RECURSION SKIP] All queued linked books in ${e} are already being processed or downloaded.`)}}function ID(e,t){return e.filter(s=>s.type==="link"&&s.link).map(s=>{try{return JSON.parse(s.link).bookId}catch(i){return console.error("Failed to parse link JSON:",s.link,i),null}}).filter(s=>s!==null).filter((s,i,o)=>s!==t&&o.indexOf(s)===i)}async function OS(e,t,n=new Set,r){if(!e)return 0;if(n.has(e))return console.warn(`[SKIP] Book ${e} is already in the download chain. Skipping.`),0;const s=await Gd(e);if(!s||!s.isFullBookDownloadable)return console.warn(`[SKIP] Book ${e} is not configured as full-book downloadable. Skipping.`),0;if(await SS(e))return console.log(`[SKIP] Book ${e} is already fully downloaded (from Dexie check). Skipping.`),0;n.add(e),console.log(`[DOWNLOAD START] Initiating bulk download for book ID: ${e}`);const i=new URL(wi);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getentirebookasjson"),i.searchParams.append("book",e),i.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`[FETCH] URL for ${e}: ${i.toString()}`);try{const o=await fetch(i.toString());if(!o.ok){let c={};try{c=await o.json()}catch{c={message:"No detailed error message, raw response status error."}}throw new Error(`Failed to fetch content for book ${e}: ${o.status} - ${JSON.stringify(c)}`)}const a=await o.json(),{songIndices:l,songDetails:u}=a;return!u||u.length===0?(console.log(`[DOWNLOAD] No song details found for book: ${e}. Returning 0.`),0):(await dD(u),await fD(l),console.log(`[DOWNLOAD SUCCESS] Data for ${e} saved to IndexedDB. Songs downloaded: ${u.length}`),console.log(`[RECURSION CHECK] Checking for linked books in ${e}...`),await RD(e,t,n,l,OS),u.length)}catch(o){throw console.error(`[DOWNLOAD ERROR] Failed during processing for ${e}:`,o),o}finally{console.log(`[DOWNLOAD END] Finished processing book ID: ${e}.`)}}const RS=(e,t)=>{const n=jf(),[r,s]=S.useState({status:"idle",downloadedCount:null,error:null}),i=S.useCallback(async()=>{if(r.status!=="loading"){s({status:"loading",downloadedCount:null,error:null});try{const o=await OS(e,t);return console.log("Bulk download successful. Invalidating React Query cache..."),await n.invalidateQueries({queryKey:Ij(e)}),await n.invalidateQueries({queryKey:Rj}),console.log("Cache invalidated and refetched successfully."),s({status:"success",downloadedCount:o,error:null}),o}catch(o){const a=o.message||"Bulk download failed.";return s({status:"error",downloadedCount:null,error:a}),0}}},[e,t,r.status,n]);return{...r,startBulkDownload:i,isDownloading:r.status==="loading"}},IS=Ve.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:s,isEffectivelyOffline:i,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:f,handleDeleteIndexClick:p,handleDeleteBookClick:m,DownloadNotAvailableIcon:_,DownloadIndexIcon:v,DownloadedIcon:w,DownloadBookIcon:g,DeleteIndexIcon:y,DeleteBookIcon:b}=e,{status:C,isDownloading:O,startBulkDownload:I}=RS(t.bookId,s),R=a(t.bookId),$=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,F=n.downloadedSongs||0,z=n.totalSongs||t.songCount||0,he=Math.max(Number(z),F),N=he>0?Math.floor(F/he*100):0,J=r[t.bookId]??!1,T=F===he&&he>0,G=t.isFullBookDownloadable;return k.jsx("li",{onClick:ve=>u(ve,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:k.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[k.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),k.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${N}%`}}),k.jsx("span",{className:`relative z-20 px-2 ${N>25,"text-black-900"}`,children:R?k.jsxs("span",{className:"font-bold",children:[k.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),k.jsxs("span",{className:"text-green-700",children:["Downloading... (",$," remaining)"]})]}):k.jsx("span",{className:"text-black-900",children:t.bookName})})]}),k.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[k.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:k.jsxs("span",{children:["(",F,"/",he," downloaded)"]})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:J?k.jsxs("span",{className:"flex items-center text-green-500",children:[w," ",k.jsx("span",{className:"ml-1",children:"Index"})]}):k.jsx("button",{onClick:ve=>{ve.stopPropagation(),c(ve,t.bookId)},disabled:i||o||a(t.bookId)||J,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":k.jsxs(k.Fragment,{children:[v," ",k.jsx("span",{className:"ml-1",children:"Index"})]})})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:T?k.jsxs("span",{className:"flex items-center text-green-500",children:[w," ",k.jsx("span",{className:"ml-1",children:"Book"})]}):k.jsx(k.Fragment,{children:G?k.jsx("button",{onClick:ve=>{ve.stopPropagation(),I()},disabled:i||o||a(t.bookId),className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:k.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[g," ",O?"Downloading (Fast)...":C==="success"?"Downloaded ":"Book"]})}):k.jsxs("span",{className:"flex items-center text-red-500 cursor-help",title:"Bulk download is restricted for this book.",children:[_,k.jsx("span",{className:"ml-1 text-sm font-medium",children:"Not Available"})]})})}),k.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[k.jsxs("button",{onClick:ve=>{ve.stopPropagation(),p(ve,t.bookId)},disabled:!J,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[y," ",k.jsx("span",{className:"ml-1",children:"Index"})]}),k.jsxs("button",{onClick:ve=>{ve.stopPropagation(),m(ve,t.bookId)},disabled:a(t.bookId)||N===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[b," ",k.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});IS.displayName="BookListItem";const DD=3;function ND(e,t){return t?t.filter(n=>n.type==="link"&&n.link).map(n=>{try{return JSON.parse(n.link).bookId}catch(r){return console.error("Error parsing link in song index:",r),null}}).filter(n=>n!==null&&n!==e).filter((n,r,s)=>s.indexOf(n)===r):[]}async function DS(e,t){if(t.has(e)){console.log(`[DELETION SKIP] Already processed ${e}.`);return}t.add(e),console.log(`[DELETION START] Analyzing dependencies for book: ${e}`);const n=await Rf(e),r=ND(e,n);if(r.length>0){console.log(`[RECURSION CHECK] Book ${e} links to ${r.length} unique books.`);const o=r,l=(await Promise.all(o.map(async u=>{const c=await Gd(u);return{id:u,type:c&&c.Type?c.Type:"mini-book"}}))).filter(u=>u.type==="mini-book").map(u=>u.id);if(l.length>0){const u=l.filter(c=>!t.has(c)).map(c=>()=>DS(c,t));u.length>0&&(console.log(`[BATCH EXECUTION] Queuing ${u.length} *mini-book* dependency deletions.`),await jS(u,DD),console.log(`[RECURSION COMPLETE] All mini-book dependencies for ${e} have been processed.`))}}const s=await Gd(e);(s&&s.Type?s.Type:"book")==="mini-book"?(await kS(e),console.log(`[DELETION SUCCESS] Successfully deleted mini-book ${e} and its dependencies.`)):console.log(`[CLEANUP COMPLETE] Book ${e} is type 'Book'. Only dependencies were deleted.`)}function LD(e,t){const n=S.useMemo(()=>((e==null?void 0:e.books)??[]).filter(a=>a.Type==="book"),[e==null?void 0:e.books]),[r,s]=S.useState(n);return S.useEffect(()=>{if(!t){s(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await Ka(u.bookId)})))).filter(u=>u.isCached);s(l)})()},[n,t]),S.useMemo(()=>t?r:n,[t,n,r])}function $D(){var K,de;const{categoryId:e}=Ba(),t=Jn(),{categories:n,isLoading:r,isFetching:s,error:i}=Df(),{isEffectivelyOffline:o}=Vy(),a=S.useMemo(()=>{if(n&&e)return n.find(le=>le.id===e)},[n,e]),l=LD(a,o),{downloadAllSongsForBook:u,isDownloadingBook:c,isAnyBookDownloading:f}=jD(),[p,m]=S.useState(null),[_,v]=S.useState(!1),[w,g]=S.useState({});jf();const{preferredLanguage:y}=bo(),{downloadStatus:b,isLoaded:C,updateDownloadProgress:O,updateDownloadedCount:I}=Ky(),{session:R}=xi(),$=(K=R==null?void 0:R.user)==null?void 0:K.email;S.useEffect(()=>{if(!l||l.length===0){g({});return}(async()=>{const xe=l.map(me=>Ka(me.bookId)),Fe=await Promise.all(xe),je={};l.forEach((me,Xe)=>{je[me.bookId]=Fe[Xe]}),g(je)})()},[l]);const F=S.useCallback(async(le,xe)=>{let je;for(let me=0;me<1;me++)try{const Xe=new URL(wi);Xe.searchParams.append("mode","api"),Xe.searchParams.append("apiname","getsongsforbook"),Xe.searchParams.append("book",le),Xe.searchParams.append("sessionuser",xe??"dummyfornow");const Ye=await fetch(Xe.toString());if(!Ye.ok){const A=await Ye.text();throw new Error(`Fetch failed (Status: ${Ye.status}). Body: ${A}`)}const ct=(await Ye.json()).map(A=>({...A,sourceRow:typeof A.sourceRow=="string"?parseInt(A.sourceRow,10):A.sourceRow,tags:A.tags||null}));return await zy(le,ct),ct}catch(Xe){if(je=Xe,me<0){const Ye=Math.pow(2,me)*1e3;console.log(`Retrying fetch in ${Ye}ms...`),await new Promise(qe=>setTimeout(qe,Ye))}}throw je},[]),z=S.useCallback(async(le,xe)=>{le.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] Confirm deletion of book index [${xe}]. Proceeding with deletion assuming user confirmed.`),await lD(xe),g(Fe=>({...Fe,[xe]:!1})),O(xe,0),I(xe,0)},[O,I]),he=S.useCallback(async(le,xe)=>{le.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] WARNING: This will permanently delete the ENTIRE book "${xe}". Proceeding with deletion assuming user confirmed.`);const Fe=new Set;try{await DS(xe,Fe),await kS(xe),O(xe,0),I(xe,0)}catch(je){console.error(`Failed to delete book ${xe} recursively:`,je)}},[O,I]),N=S.useCallback((le,xe)=>{console.log(`categoryId:${e}, bookId:${xe}`),le.stopPropagation(),t(`/book/${e}/${xe}`)},[e,t]),J=async()=>{var xe;v(!0);const le=(xe=R==null?void 0:R.user)==null?void 0:xe.email;try{for(const je of l)console.log(`Downloading index for book: ${je.bookId}`),await F(je.bookId,le);console.log("All song indices downloaded successfully.");const Fe=l.reduce((je,me)=>(je[me.bookId]=!0,je),{});g(Fe)}catch(Fe){console.error("Failed to download all indices:",Fe),g({})}finally{v(!1)}},T=S.useCallback(async(le,xe)=>{var je;le.stopPropagation(),m(xe);const Fe=(je=R==null?void 0:R.user)==null?void 0:je.email;try{await F(xe,Fe),console.log(`Index for Book ${xe} downloaded successfully and cached.`),g(me=>({...me,[xe]:!0}))}catch(me){console.error(`Failed to download index for Book ${xe}:`,me),g(Xe=>({...Xe,[xe]:!1}))}finally{m(null)}},[(de=R==null?void 0:R.user)==null?void 0:de.email,F]),G=S.useCallback((le,xe,Fe)=>{le.stopPropagation(),u(xe,$)},[u,$]),ve=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),[]),ae=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),[]),ce=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),[]),se=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]}),[]),ye=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),[]),Z=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),[]),ee=S.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]}),[]);return r||s?k.jsx("div",{children:"Loading books..."}):i instanceof Error?k.jsxs("div",{children:["Error loading books: ",i.message]}):C?k.jsxs(k.Fragment,{children:[k.jsx(Hy,{}),k.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner",children:[k.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Books in ",(a==null?void 0:a.name)||"Category"]}),l.length>0?k.jsx("ul",{className:"list-none p-0 space-y-3",children:l.map(le=>k.jsx(IS,{book:le,status:b[le.bookId]||{},indexDownloadStatus:w,userEmail:$??null,isEffectivelyOffline:o,isAnyBookDownloading:f,isDownloadingBook:c,isDownloadingBookIndex:p,handleBookClick:N,handleDownloadBookIndexClick:T,handleDownloadBookClick:G,handleDeleteIndexClick:z,handleDeleteBookClick:he,DownloadNotAvailableIcon:se,DownloadIndexIcon:ve,DownloadedIcon:ye,DownloadBookIcon:ce,DeleteIndexIcon:ee,DeleteBookIcon:Z},le.bookId))}):k.jsx("div",{className:"text-center py-10 text-gray-500 bg-white rounded-lg shadow-md",children:o?"No cached books found. Connect to the internet to download content.":"No books found in this category."})]}),k.jsx("div",{className:"mt-6 flex justify-end",children:k.jsxs("button",{onClick:J,disabled:_,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 flex items-center justify-center space-x-2 shadow-md ${_?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[_?k.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):ae,k.jsx("span",{children:_?"Downloading All Indices...":"Download All Indices"})]})})]}):k.jsx("div",{className:"flex justify-center items-center h-40",children:k.jsx("p",{children:"Loading download status..."})})}function MD(e){return[{pattern:/([])/g,replacement:"$1",name:"Palatal"},{pattern:/([])/g,replacement:"$1",name:"Retroflex"},{pattern:/([])/g,replacement:"$1",name:"Velar"},{pattern:/([])/g,replacement:"$1",name:"Dental"},{pattern:/([])/g,replacement:"$1",name:"Labial"},{pattern:/$/g,replacement:"",name:"Word-final"},{pattern://g,replacement:"",name:"Chandrabindu  "}].reduce((n,r)=>{const s=n.replace(r.pattern,(i,o)=>r.replacement.replace("$1",o));return s!==n?s:n},e)}function FD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};return e.replace(/\u0D30\u0D4D/g,"").replace(/[-]/g,n=>t[n]||n)}function BD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};let n=e;for(const r in t){const s=t[r];n=n.replace(new RegExp(r,"g"),s)}return n}function UD(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const Ra=(e,t,n)=>{if(n==="original"||t==="tamil"&&n==="tamil_superscripted")return e;let r=e,s=e;try{return t==="devanagari"?r=MD(r):(t==="tamil"||t==="tamil_superscripted")&&(r=r.normalize("NFC")),window.Sanscript&&(s=window.Sanscript.t(r,t==="devanagari"?"devanagari":"itrans",n),n==="malayalam"?s=FD(s):n==="itrans"?t==="tamil"&&(s=UD(s)):(n==="tamil"||n==="tamil_superscripted")&&(s=BD(s))),s}catch(i){return console.error(`Sanscript Transliteration Error for target: ${n}. Returning original text.`,i),e}},zD={color:"#059669",background:"#E6FFEE"},VD={color:"#EF4444",background:"#FEEEEE"},KD={color:"green"},WD={color:"black"},lb={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},HD={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},NS={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},qD={backgroundColor:"#f0f4f8"},GD={backgroundColor:"#f5f5f5",fontWeight:"bold",fontSize:"1.2em",padding:"15px 15px 5px 15px",cursor:"default",marginBottom:"10px",marginTop:"15px",borderBottom:"2px solid #ddd",boxShadow:"none"},ub={...NS,backgroundColor:"#eaf2ff",color:"#1e40af",fontWeight:"500",border:"1px solid #c3dafe"},QD=async(e,t)=>{if(!e)return[];const n=new URL(wi);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const i=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(i)}`)}const s=await r.json();return s.data||s},YD=(e,t)=>{const[n,r]=S.useState({});return S.useEffect(()=>{if(r({}),!e||!t||t.length===0)return;(async()=>{const i=t.map(async l=>{const u=await If(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(i)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n},JD=(e,t)=>{const n=t==="itrans"?e.songTitle:(()=>{if(window.Sanscript)try{return Ra(e.songTitle,"itrans",t)}catch(i){return console.error("Error during transliteration",i),e.songTitle}return e.songTitle})(),r=n.length>50?n.substring(0,50)+"...":n,s=e.raagam?t==="itrans"?e.raagam:(()=>{if(window.Sanscript)try{return Ra(e.raagam,"itrans",t)}catch(i){return console.error("Error during raagam transliteration",i),e.raagam}return e.raagam})():null;return e.type==="link"?k.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"10px",minWidth:"20px"},children:[k.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"}),k.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"})]}),k.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[k.jsx("span",{style:{fontSize:"1.2em"},title:n,children:r}),s&&k.jsxs(k.Fragment,{children:[k.jsx("span",{style:{margin:"0 8px",color:"#ccc"},children:"|"}),k.jsx("span",{style:{fontSize:"0.95em",color:"#666",fontStyle:"italic"},children:s})]})]})]}):k.jsxs("div",{style:{flexGrow:1,display:"flex",alignItems:"center",flexWrap:"wrap"},children:[k.jsx("span",{style:{fontSize:"1.2em"},title:n,children:r}),s&&k.jsxs(k.Fragment,{children:[k.jsx("span",{style:{margin:"0 8px",color:"#ccc"},children:"|"}),k.jsx("span",{style:{fontSize:"0.95em",color:"#666",fontStyle:"italic"},children:s})]})]})},cb=e=>{if(e.type!=="link"||!e.link)return null;try{return JSON.parse(e.link).bookId||null}catch{return null}};function ZD(){var J;const{categoryId:e,bookId:t}=Ba(),n=Jn(),{isEffectivelyOffline:r}=Vy(),{session:s}=xi(),i=(J=s==null?void 0:s.user)==null?void 0:J.email,[o,a]=S.useState(null),{preferredLanguage:l}=bo(),[,u]=S.useState({}),[c,f]=S.useState(!0),[p,m]=S.useState([]);S.useEffect(()=>{(async()=>{f(!0);try{const G=await mD();m(G)}catch(G){console.error("Failed to fetch downloaded book IDs:",G)}finally{f(!1)}})()},[]),S.useEffect(()=>{u({})},[l]);const{isLoading:_,error:v,data:w,isFetching:g}=Of({queryKey:["songIndices",t,i],queryFn:async()=>{if(!t||!i)return[];const T=await Rf(t);return T&&T.length>0?T:QD(t,i)},staleTime:1/0,gcTime:0,networkMode:"always",refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!!t&&!!i}),y=w,{downloadStatus:b}=Ky(),C=YD(t,y);if(S.useEffect(()=>{t&&w&&!g&&zy(t,w).catch(T=>{console.error("Error saving song indices data to IndexedDB:",T)})},[t,w,g]),S.useEffect(()=>{const T=sessionStorage.getItem("lastClickedSongIndex");T!==null&&(a(parseInt(T,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),_)return k.jsx("div",{style:HD,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(v instanceof Error)return k.jsxs("div",{children:["Error loading song indices: ",v.message]});const I=(T,G,ve,ae)=>{switch(T.stopPropagation(),G[ve].type){case"title":break;case"link":const se=G[ve].link,ye=JSON.parse(se),Z=ye.categoryId.trim(),ee=ye.bookId.trim(),K=`/book/${Z}/${ee}`;console.log(K),Z&&ee&&(sessionStorage.setItem("lastClickedSongIndex",ve.toString()),n(K));break;default:const de=G[ve].sourceRow,le=G[ve].songTitle;ae&&(sessionStorage.setItem("lastClickedSongIndex",ve.toString()),n(`/details/book/${e}/${ae}/${de}/${encodeURIComponent(le)}`,{state:{filteredSongIndices:G,index:ve}}))}},R=T=>C[T]===!0,$=T=>p.includes(T),F=(y==null?void 0:y.filter(T=>r?R(T.songTitle):!0))??[],z=(T,G)=>{if(T.type==="title")return GD;if(T.type==="link"){const ae=cb(T),ce=ae?$(ae):!1;return{...ub,...ce?zD:VD,...G===o&&lb}}const ve=R(T.songTitle);return{...NS,...ve?KD:WD,...G===o&&lb}},he=(T,G)=>{G!=="title"&&(T.currentTarget.style.backgroundColor=qD.backgroundColor)},N=(T,G)=>{G!=="title"&&(G==="link"?T.currentTarget.style.backgroundColor=ub.backgroundColor:T.currentTarget.style.backgroundColor="")};return k.jsxs(k.Fragment,{children:[k.jsx(Hy,{}),k.jsxs("div",{children:[k.jsxs("h2",{children:["Song Indices for Book:"," ",`bookId: ${t} (${F.length} items)`]}),k.jsx("ul",{className:"list-none p-0 m-0",children:F==null?void 0:F.map((T,G)=>{var ve;return cb(T),k.jsxs("li",{onClick:ae=>{T.type!=="title"&&I(ae,F,G,t)},style:z(T,G),onMouseEnter:ae=>he(ae,T.type),onMouseLeave:ae=>N(ae,T.type),className:`transition-all duration-150 ease-in-out ${T.type!=="title"?"hover:shadow-md":""}`,children:[JD(T,l),T.type==="song"&&k.jsx("span",{style:{marginLeft:"10px",color:"#EF4444"},children:t&&((ve=b[t])==null?void 0:ve.downloadingSongs[T.songTitle||""])&&"..downloading song.."}),T.type==="link"&&$(t)&&k.jsx("span",{style:{marginLeft:"10px",color:"orange",fontSize:"0.85em",fontWeight:"600"},children:"..downloading linked book.."})]},T.sourceRow)})})]})]})}const XD=e=>{const t=/([-])(?![])(?=[-])/g;return e.replace(t,"$1&shy;")},eN=e=>{const t=/<link\s+categoryId="([^"]+)"\s+bookId="([^"]+)"\s+sourceRow=(?:\"([^\"]+)\"|(\S+))\s+songTitle="([^"]+)">([\s\S]*?)<\/link>/gi;return e.replace(t,(n,r,s,i,o,a,l)=>{const u=i||o,c=r.replace(/"/g,"&quot;"),f=s.replace(/"/g,"&quot;"),p=u.replace(/"/g,"&quot;"),m=a.replace(/"/g,"&quot;");return`
      <a 
        href="#"
        class="text-indigo-600 hover:text-indigo-800 font-medium underline cursor-pointer transition-colors duration-150"
        onclick="event.preventDefault(); window.handleInternalNavigation(
          '${c}', 
          '${f}', 
          '${p}', 
          '${m}'
        );"
      >
        ${l}
      </a>
    `})},tN=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:s=[],striped:i=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c})=>{if(!Array.isArray(e)||e.length<1)return k.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[f,...p]=e,m=v=>{let w=String(v).replace(/ \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof v=="string"&&u!==c)try{const g=w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let y=Ra(g,c,u);(u.toLowerCase()==="devanagari"||u.toLowerCase()==="devanagari")&&(y=XD(y)),w=y}catch(g){return console.error("Error during transliteration:",g),{__html:w}}return w=w.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),w=eN(w),{__html:w}},_=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return k.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${_} ${t}`,children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsx("tr",{children:f.map((v,w)=>k.jsx("th",{className:`
         px-4 py-4 text-left text-${l} font-medium text-gray-700
         ${r.includes(w)?n:""}
         sticky top-0 bg-gray-100
        `,dangerouslySetInnerHTML:m(v)},`th-${w}`))})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((v,w)=>k.jsx("tr",{id:`trRowAsAnchor-${w}`,className:`
    ${i&&w%2===0?"bg-white":"bg-gray-100"}
    ${o?"hover:bg-indigo-50":""}
   `,children:v.map((g,y)=>k.jsx("td",{className:`
      px-4 py-3.5 text-${l} align-top
      ${s.includes(y)?"whitespace-normal break-all max-w-full":"whitespace-nowrap"}
      ${r.includes(y)?n:""}
     `,dangerouslySetInnerHTML:m(g)},`td-${w}-${y}`))},`row-${w}`))})]})})};function nN(e,t,n){return Math.max(t,Math.min(e,n))}const pn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function db(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function fb(e,t,n,r=.15){return r===0?nN(e,t,n):e<t?-db(t-e,n-t,r)+t:e>n?+db(e-n,n-t,r)+n:e}function rN(e,[t,n],[r,s]){const[[i,o],[a,l]]=e;return[fb(t,i,o,r),fb(n,a,l,s)]}function sN(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iN(e){var t=sN(e,"string");return typeof t=="symbol"?t:String(t)}function Pn(e,t,n){return t=iN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hb(Object(n),!0).forEach(function(r){Pn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const LS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function pb(e){return e?e[0].toUpperCase()+e.slice(1):""}const oN=["enter","leave"];function aN(e=!1,t){return e&&!oN.includes(t)}function lN(e,t="",n=!1){const r=LS[e],s=r&&r[t]||t;return"on"+pb(e)+pb(s)+(aN(n,s)?"Capture":"")}const uN=["gotpointercapture","lostpointercapture"];function cN(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=uN.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function dN(e,t=""){const n=LS[e],r=n&&n[t]||t;return e+r}function Nf(e){return"touches"in e}function $S(e){return Nf(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function fN(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function hN(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function MS(e){return Nf(e)?hN(e)[0]:e}function pN(e){return fN(e).map(t=>t.identifier)}function cp(e){const t=MS(e);return Nf(e)?t.identifier:t.pointerId}function mb(e){const t=MS(e);return[t.clientX,t.clientY]}function mN(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i})}return t}function Qd(e,...t){return typeof e=="function"?e(...t):e}function gN(){}function yN(...e){return e.length===0?gN:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function gb(e,t){return Object.assign({},t,e||{})}const vN=32;class wN{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Qd(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let i=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,mN(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const I=n._delta.map(Math.abs);pn.addTo(n._distance,I)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[I,R]=f;p[0]=c[0]!==!1?I-c[0]:0,p[1]=c[1]!==!1?R-c[1]:0}else p[0]=c[0]!==!1?o-c[0]:0,p[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,_=n._active&&!n._blocked||n.active;_&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Qd(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,w]=n.offset,[[g,y],[b,C]]=n._bounds;n.overflow=[v<g?-1:v>y?1:0,w<b?-1:w>C?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const O=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=rN(n._bounds,n.offset,O),n.delta=pn.sub(n.offset,m),this.computeMovement(),_&&(!n.last||i>vN)){n.delta=pn.sub(n.offset,m);const I=n.delta.map(Math.abs);pn.addTo(n.distance,I),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[I[0]/i,I[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(St(St(St({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function bN([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class xN extends wN{constructor(...t){super(...t),Pn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=pn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=pn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[$S(t)]:r.axisThreshold;n.axis=bN(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const _N=e=>e,yb=.15,FS={enabled(e=!0){return e},eventOptions(e,t,n){return St(St({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[yb,yb];case!1:return[0,0];default:return pn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return pn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||_N},threshold(e){return pn.toVector(e,0)}},kN=0,Mu=St(St({},FS),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=kN){return e},bounds(e={}){if(typeof e=="function")return i=>Mu.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),vb={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class SN extends xN{constructor(...t){super(...t),Pn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Mu.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=cp(t),r._pointerActive=!0,this.computeValues(mb(t)),this.computeInitial(),n.preventScrollAxis&&$S(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=cp(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const i=mb(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=pn.sub(i,n._values),this.computeValues(i)),pn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=cp(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,o]=n._distance;if(n.tap=i<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,p]=r.swipe.velocity,[m,_]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const w=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);w>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(c)>_&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,EN(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=vb[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,pn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in vb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function EN(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Fu=typeof window<"u"&&window.document&&window.document.createElement;function BS(){return Fu&&"ontouchstart"in window}function CN(){return BS()||Fu&&window.navigator.maxTouchPoints>1}function TN(){return Fu&&"onpointerdown"in window}function PN(){return Fu&&"exitPointerLock"in window.document}function AN(){try{return"constructor"in GestureEvent}catch{return!1}}const ur={isBrowser:Fu,gesture:AN(),touch:BS(),touchscreen:CN(),pointer:TN(),pointerLock:PN()},jN=250,ON=180,RN=.5,IN=50,DN=250,NN=10,wb={mouse:0,touch:0,pen:8},LN=St(St({},Mu),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&ur.pointerLock,ur.touch&&n?"touch":this.pointerLock?"mouse":ur.pointer&&!s?"pointer":ur.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?jN:void 0,!(!ur.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const i=pn.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:e=RN,distance:t=IN,duration:n=DN}={}){return{velocity:this.transform(pn.toVector(e)),distance:this.transform(pn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return ON;case!1:return 0;default:return e}},axisThreshold(e){return e?St(St({},wb),e):wb},keyboardDisplacement(e=NN){return e}});St(St({},FS),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!ur.touch&&ur.gesture)return"gesture";if(ur.touch&&r)return"touch";if(ur.touchscreen){if(ur.pointer)return"pointer";if(ur.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const a=gb(Qd(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=gb(Qd(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[s(),i()]:o=>[s(o),i(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",pn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});St(St({},Mu),{},{mouseOnly:(e=!0)=>e});St(St({},Mu),{},{mouseOnly:(e=!0)=>e});const US=new Map,Xm=new Map;function $N(e){US.set(e.key,e.engine),Xm.set(e.key,e.resolver)}const MN={key:"drag",engine:SN,resolver:LN};function FN(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BN(e,t){if(e==null)return{};var n=FN(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const UN={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=ur.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},zN=["target","eventOptions","window","enabled","transform"];function dd(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=dd(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function VN(e,t,n={}){const r=e,{target:s,eventOptions:i,window:o,enabled:a,transform:l}=r,u=BN(r,zN);if(n.shared=dd({target:s,eventOptions:i,window:o,enabled:a,transform:l},UN),t){const c=Xm.get(t);n[t]=dd(St({shared:n.shared},u),c)}else for(const c in u){const f=Xm.get(c);f&&(n[c]=dd(St({shared:n.shared},u[c]),f))}return n}class zS{constructor(t,n){Pn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,i){const o=this._listeners,a=dN(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=St(St({},l),i);t.addEventListener(a,s,u);const c=()=>{t.removeEventListener(a,s,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class KN{constructor(){Pn(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class WN{constructor(t){Pn(this,"gestures",new Set),Pn(this,"_targetEventStore",new zS(this)),Pn(this,"gestureEventStores",{}),Pn(this,"gestureTimeoutStores",{}),Pn(this,"handlers",{}),Pn(this,"config",{}),Pn(this,"pointerIds",new Set),Pn(this,"touchIds",new Set),Pn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),HN(this,t)}setEventIds(t){if(Nf(t))return this.touchIds=new Set(pN(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=VN(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=bb(r,a.eventOptions,!!s);if(a.enabled){const u=US.get(o);new u(this,t,o).bind(l)}}const i=bb(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)i(o,"",a=>this.nativeHandlers[o](St(St({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const i in r)r[i]=yN(...r[i]);if(!s)return r;for(const i in r){const{device:o,capture:a,passive:l}=cN(i);this._targetEventStore.add(s,o,"",r[i],{capture:a,passive:l})}}}}function $o(e,t){e.gestures.add(t),e.gestureEventStores[t]=new zS(e,t),e.gestureTimeoutStores[t]=new KN}function HN(e,t){t.drag&&$o(e,"drag"),t.wheel&&$o(e,"wheel"),t.scroll&&$o(e,"scroll"),t.move&&$o(e,"move"),t.pinch&&$o(e,"pinch"),t.hover&&$o(e,"hover")}const bb=(e,t,n)=>(r,s,i,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let p=a?r:lN(r,s,c);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)};function qN(e,t={},n,r){const s=Ve.useMemo(()=>new WN(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),Ve.useEffect(s.effect.bind(s)),Ve.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function GN(e,t){return $N(MN),qN({drag:e},t||{},"drag")}const qy=S.createContext({});function Gy(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const Qy=typeof window<"u",VS=Qy?S.useLayoutEffect:S.useEffect,Lf=S.createContext(null);function Yy(e,t){e.indexOf(t)===-1&&e.push(t)}function Jy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const bs=(e,t,n)=>n>t?t:n<e?e:n;let Zy=()=>{};const xs={},KS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function WS(e){return typeof e=="object"&&e!==null}const HS=e=>/^0[^.\s]+$/u.test(e);function Xy(e){let t;return()=>(t===void 0&&(t=e()),t)}const hr=e=>e,QN=(e,t)=>n=>t(e(n)),Bu=(...e)=>e.reduce(QN),yu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class ev{constructor(){this.subscriptions=[]}add(t){return Yy(this.subscriptions,t),()=>Jy(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qr=e=>e*1e3,dr=e=>e/1e3;function qS(e,t){return t?e*(1e3/t):0}const GS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,YN=1e-7,JN=12;function ZN(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=GS(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>YN&&++a<JN);return o}function Uu(e,t,n,r){if(e===t&&n===r)return hr;const s=i=>ZN(i,0,1,e,n);return i=>i===0||i===1?i:GS(s(i),t,r)}const QS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,YS=e=>t=>1-e(1-t),JS=Uu(.33,1.53,.69,.99),tv=YS(JS),ZS=QS(tv),XS=e=>(e*=2)<1?.5*tv(e):.5*(2-Math.pow(2,-10*(e-1))),nv=e=>1-Math.sin(Math.acos(e)),eE=YS(nv),tE=QS(nv),XN=Uu(.42,0,1,1),eL=Uu(0,0,.58,1),nE=Uu(.42,0,.58,1),tL=e=>Array.isArray(e)&&typeof e[0]!="number",rE=e=>Array.isArray(e)&&typeof e[0]=="number",nL={linear:hr,easeIn:XN,easeInOut:nE,easeOut:eL,circIn:nv,circInOut:tE,circOut:eE,backIn:tv,backInOut:ZS,backOut:JS,anticipate:XS},rL=e=>typeof e=="string",xb=e=>{if(rE(e)){Zy(e.length===4);const[t,n,r,s]=e;return Uu(t,n,r,s)}else if(rL(e))return nL[e];return e},Uc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sL(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,f=!1,p=!1)=>{const _=p&&s?n:r;return f&&o.add(c),_.has(c)||_.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const iL=40;function sE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Uc.reduce((b,C)=>(b[C]=sL(i),b),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:p,render:m,postRender:_}=o,v=()=>{const b=xs.useManualTiming?s.timestamp:performance.now();n=!1,xs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,iL),1)),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),f.process(s),p.process(s),m.process(s),_.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},w=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Uc.reduce((b,C)=>{const O=o[C];return b[C]=(I,R=!1,$=!1)=>(n||w(),O.schedule(I,R,$)),b},{}),cancel:b=>{for(let C=0;C<Uc.length;C++)o[Uc[C]].cancel(b)},state:s,steps:o}}const{schedule:bt,cancel:pi,state:rn,steps:dp}=sE(typeof requestAnimationFrame<"u"?requestAnimationFrame:hr,!0);let fd;function oL(){fd=void 0}const In={now:()=>(fd===void 0&&In.set(rn.isProcessing||xs.useManualTiming?rn.timestamp:performance.now()),fd),set:e=>{fd=e,queueMicrotask(oL)}},iE=e=>t=>typeof t=="string"&&t.startsWith(e),rv=iE("--"),aL=iE("var(--"),sv=e=>aL(e)?lL.test(e.split("/*")[0].trim()):!1,lL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},vu={...Wa,transform:e=>bs(0,1,e)},zc={...Wa,default:1},Ul=e=>Math.round(e*1e5)/1e5,iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uL(e){return e==null}const cL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ov=(e,t)=>n=>!!(typeof n=="string"&&cL.test(n)&&n.startsWith(e)||t&&!uL(n)&&Object.prototype.hasOwnProperty.call(n,t)),oE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(iv);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dL=e=>bs(0,255,e),fp={...Wa,transform:e=>Math.round(dL(e))},Hi={test:ov("rgb","red"),parse:oE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+fp.transform(e)+", "+fp.transform(t)+", "+fp.transform(n)+", "+Ul(vu.transform(r))+")"};function fL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const eg={test:ov("#"),parse:fL,transform:Hi.transform},zu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=zu("deg"),Yr=zu("%"),He=zu("px"),hL=zu("vh"),pL=zu("vw"),_b={...Yr,parse:e=>Yr.parse(e)/100,transform:e=>Yr.transform(e*100)},Zo={test:ov("hsl","hue"),parse:oE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Yr.transform(Ul(t))+", "+Yr.transform(Ul(n))+", "+Ul(vu.transform(r))+")"},Bt={test:e=>Hi.test(e)||eg.test(e)||Zo.test(e),parse:e=>Hi.test(e)?Hi.parse(e):Zo.test(e)?Zo.parse(e):eg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hi.transform(e):Zo.transform(e),getAnimatableNone:e=>{const t=Bt.parse(e);return t.alpha=0,Bt.transform(t)}},mL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gL(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(iv))==null?void 0:t.length)||0)+(((n=e.match(mL))==null?void 0:n.length)||0)>0}const aE="number",lE="color",yL="var",vL="var(",kb="${}",wL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(wL,l=>(Bt.test(l)?(r.color.push(i),s.push(lE),n.push(Bt.parse(l))):l.startsWith(vL)?(r.var.push(i),s.push(yL),n.push(l)):(r.number.push(i),s.push(aE),n.push(parseFloat(l))),++i,kb)).split(kb);return{values:n,split:a,indexes:r,types:s}}function uE(e){return wu(e).values}function cE(e){const{split:t,types:n}=wu(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===aE?i+=Ul(s[o]):a===lE?i+=Bt.transform(s[o]):i+=s[o]}return i}}const bL=e=>typeof e=="number"?0:Bt.test(e)?Bt.getAnimatableNone(e):e;function xL(e){const t=uE(e);return cE(e)(t.map(bL))}const mi={test:gL,parse:uE,createTransformer:cE,getAnimatableNone:xL};function hp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _L({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=hp(l,a,e+1/3),i=hp(l,a,e),o=hp(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Yd(e,t){return n=>n>0?t:e}const kt=(e,t,n)=>e+(t-e)*n,pp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},kL=[eg,Hi,Zo],SL=e=>kL.find(t=>t.test(e));function Sb(e){const t=SL(e);if(!t)return!1;let n=t.parse(e);return t===Zo&&(n=_L(n)),n}const Eb=(e,t)=>{const n=Sb(e),r=Sb(t);if(!n||!r)return Yd(e,t);const s={...n};return i=>(s.red=pp(n.red,r.red,i),s.green=pp(n.green,r.green,i),s.blue=pp(n.blue,r.blue,i),s.alpha=kt(n.alpha,r.alpha,i),Hi.transform(s))},tg=new Set(["none","hidden"]);function EL(e,t){return tg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function CL(e,t){return n=>kt(e,t,n)}function av(e){return typeof e=="number"?CL:typeof e=="string"?sv(e)?Yd:Bt.test(e)?Eb:AL:Array.isArray(e)?dE:typeof e=="object"?Bt.test(e)?Eb:TL:Yd}function dE(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>av(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function TL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=av(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function PL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const AL=(e,t)=>{const n=mi.createTransformer(t),r=wu(e),s=wu(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?tg.has(e)&&!s.values.length||tg.has(t)&&!r.values.length?EL(e,t):Bu(dE(PL(r,s),s.values),n):Yd(e,t)};function fE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?kt(e,t,n):av(e)(e,t)}const jL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bt.update(t,n),stop:()=>pi(t),now:()=>rn.isProcessing?rn.timestamp:In.now()}},hE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Jd=2e4;function lv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Jd;)t+=n,r=e.next(t);return t>=Jd?1/0:t}function OL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(lv(r),Jd);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:dr(s)}}const RL=5;function pE(e,t,n){const r=Math.max(t-RL,0);return qS(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mp=.001;function IL({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let s,i,o=1-t;o=bs(At.minDamping,At.maxDamping,o),e=bs(At.minDuration,At.maxDuration,dr(e)),o<1?(s=u=>{const c=u*o,f=c*e,p=c-n,m=ng(u,o),_=Math.exp(-f);return mp-p/m*_},i=u=>{const f=u*o*e,p=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,_=Math.exp(-f),v=ng(Math.pow(u,2),o);return(-s(u)+mp>0?-1:1)*((p-m)*_)/v}):(s=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-mp+c*f},i=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=NL(s,i,a);if(e=Qr(e),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const DL=12;function NL(e,t,n){let r=n;for(let s=1;s<DL;s++)r=r-e(r)/t(r);return r}function ng(e,t){return e*Math.sqrt(1-t*t)}const LL=["duration","bounce"],$L=["stiffness","damping","mass"];function Cb(e,t){return t.some(n=>e[n]!==void 0)}function ML(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!Cb(e,$L)&&Cb(e,LL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*bs(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:At.mass,stiffness:s,damping:i}}else{const n=IL(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function Zd(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:f,velocity:p,isResolvedFromDuration:m}=ML({...n,velocity:-dr(n.velocity||0)}),_=p||0,v=u/(2*Math.sqrt(l*c)),w=o-i,g=dr(Math.sqrt(l/c)),y=Math.abs(w)<5;r||(r=y?At.restSpeed.granular:At.restSpeed.default),s||(s=y?At.restDelta.granular:At.restDelta.default);let b;if(v<1){const O=ng(g,v);b=I=>{const R=Math.exp(-v*g*I);return o-R*((_+v*g*w)/O*Math.sin(O*I)+w*Math.cos(O*I))}}else if(v===1)b=O=>o-Math.exp(-g*O)*(w+(_+g*w)*O);else{const O=g*Math.sqrt(v*v-1);b=I=>{const R=Math.exp(-v*g*I),$=Math.min(O*I,300);return o-R*((_+v*g*w)*Math.sinh($)+O*w*Math.cosh($))/O}}const C={calculatedDuration:m&&f||null,next:O=>{const I=b(O);if(m)a.done=O>=f;else{let R=O===0?_:0;v<1&&(R=O===0?Qr(_):pE(b,O,I));const $=Math.abs(R)<=r,F=Math.abs(o-I)<=s;a.done=$&&F}return a.value=a.done?o:I,a},toString:()=>{const O=Math.min(lv(C),Jd),I=hE(R=>C.next(O*R).value,O,30);return O+"ms "+I},toTransition:()=>{}};return C}Zd.applyToOptions=e=>{const t=OL(e,100,Zd);return e.ease=t.ease,e.duration=Qr(t.duration),e.type="keyframes",e};function rg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],p={done:!1,value:f},m=$=>a!==void 0&&$<a||l!==void 0&&$>l,_=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let v=n*t;const w=f+v,g=o===void 0?w:o(w);g!==w&&(v=g-f);const y=$=>-v*Math.exp(-$/r),b=$=>g+y($),C=$=>{const F=y($),z=b($);p.done=Math.abs(F)<=u,p.value=p.done?g:z};let O,I;const R=$=>{m(p.value)&&(O=$,I=Zd({keyframes:[p.value,_(p.value)],velocity:pE(b,$,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return R(0),{calculatedDuration:null,next:$=>{let F=!1;return!I&&O===void 0&&(F=!0,C($),R($)),O!==void 0&&$>=O?I.next($-O):(!F&&C($),p)}}}function FL(e,t,n){const r=[],s=n||xs.mix||fE,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||hr:t;a=Bu(l,a)}r.push(a)}return r}function BL(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Zy(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=FL(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const p=yu(e[f],e[f+1],c);return a[f](p)};return n?c=>u(bs(e[0],e[i-1],c)):u}function UL(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=yu(0,t,r);e.push(kt(n,1,s))}}function zL(e){const t=[0];return UL(t,e.length-1),t}function VL(e,t){return e.map(n=>n*t)}function KL(e,t){return e.map(()=>t||nE).splice(0,e.length-1)}function zl({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=tL(r)?r.map(xb):xb(r),i={done:!1,value:t[0]},o=VL(n&&n.length===t.length?n:zL(t),e),a=BL(o,t,{ease:Array.isArray(s)?s:KL(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const WL=e=>e!==null;function uv(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(WL),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const HL={decay:rg,inertia:rg,tween:zl,keyframes:zl,spring:Zd};function mE(e){typeof e.type=="string"&&(e.type=HL[e.type])}class cv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const qL=e=>e/100;class dv extends cv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==In.now()&&this.tick(In.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;mE(t);const{type:n=zl,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||zl;l!==zl&&typeof a[0]!="number"&&(this.mixKeyframes=Bu(qL,fE(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=lv(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:p,repeatDelay:m,type:_,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,C=r;if(f){const $=Math.min(this.currentTime,s)/a;let F=Math.floor($),z=$%1;!z&&$>=1&&(z=1),z===1&&F--,F=Math.min(F,f+1),!!(F%2)&&(p==="reverse"?(z=1-z,m&&(z-=m/a)):p==="mirror"&&(C=o)),b=bs(0,1,z)*a}const O=y?{done:!1,value:c[0]}:C.next(b);i&&(O.value=i(O.value));let{done:I}=O;!y&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return R&&_!==rg&&(O.value=uv(c,this.options,w,this.speed)),v&&v(O.value),R&&this.finish(),O}then(t,n){return this.finished.then(t,n)}get duration(){return dr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+dr(t)}get time(){return dr(this.currentTime)}set time(t){var n;t=Qr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(In.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=dr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=jL,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(In.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function GL(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const qi=e=>e*180/Math.PI,sg=e=>{const t=qi(Math.atan2(e[1],e[0]));return ig(t)},QL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:sg,rotateZ:sg,skewX:e=>qi(Math.atan(e[1])),skewY:e=>qi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ig=e=>(e=e%360,e<0&&(e+=360),e),Tb=sg,Pb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ab=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),YL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Pb,scaleY:Ab,scale:e=>(Pb(e)+Ab(e))/2,rotateX:e=>ig(qi(Math.atan2(e[6],e[5]))),rotateY:e=>ig(qi(Math.atan2(-e[2],e[0]))),rotateZ:Tb,rotate:Tb,skewX:e=>qi(Math.atan(e[4])),skewY:e=>qi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function og(e){return e.includes("scale")?1:0}function ag(e,t){if(!e||e==="none")return og(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=YL,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=QL,s=a}if(!s)return og(t);const i=r[t],o=s[1].split(",").map(ZL);return typeof i=="function"?i(o):o[i]}const JL=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ag(n,t)};function ZL(e){return parseFloat(e.trim())}const Ha=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qa=new Set(Ha),jb=e=>e===Wa||e===He,XL=new Set(["x","y","z"]),e$=Ha.filter(e=>!XL.has(e));function t$(e){const t=[];return e$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const oo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ag(t,"x"),y:(e,{transform:t})=>ag(t,"y")};oo.translateX=oo.x;oo.translateY=oo.y;const ao=new Set;let lg=!1,ug=!1,cg=!1;function gE(){if(ug){const e=Array.from(ao).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=t$(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ug=!1,lg=!1,ao.forEach(e=>e.complete(cg)),ao.clear()}function yE(){ao.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ug=!0)})}function n$(){cg=!0,yE(),gE(),cg=!1}class fv{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ao.add(this),lg||(lg=!0,bt.read(yE),bt.resolveKeyframes(gE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}GL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ao.delete(this)}cancel(){this.state==="scheduled"&&(ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const r$=e=>e.startsWith("--");function s$(e,t,n){r$(t)?e.style.setProperty(t,n):e.style[t]=n}const i$=Xy(()=>window.ScrollTimeline!==void 0),o$={};function a$(e,t){const n=Xy(e);return()=>o$[t]??n()}const vE=a$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),El=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ob={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:El([0,.65,.55,1]),circOut:El([.55,0,1,.45]),backIn:El([.31,.01,.66,-.59]),backOut:El([.33,1.53,.69,.99])};function wE(e,t){if(e)return typeof e=="function"?vE()?hE(e,t):"ease-out":rE(e)?El(e):Array.isArray(e)?e.map(n=>wE(n,t)||Ob.easeOut):Ob[e]}function l$(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const f=wE(a,s);Array.isArray(f)&&(c.easing=f);const p={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(c,p)}function bE(e){return typeof e=="function"&&"applyToOptions"in e}function u$({type:e,...t}){return bE(e)&&vE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class c$ extends cv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Zy(typeof t.type!="string");const u=u$(t);this.animation=l$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=uv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):s$(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return dr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+dr(t)}get time(){return dr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Qr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&i$()?(this.animation.timeline=t,hr):n(this)}}const xE={anticipate:XS,backInOut:ZS,circInOut:tE};function d$(e){return e in xE}function f$(e){typeof e.ease=="string"&&d$(e.ease)&&(e.ease=xE[e.ease])}const Rb=10;class h$ extends c${constructor(t){f$(t),mE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new dv({...o,autoplay:!1}),l=Qr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Rb).value,a.sample(l).value,Rb),a.stop()}}const Ib=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url("));function p$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function m$(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Ib(s,t),a=Ib(i,t);return!o||!a?!1:p$(e)||(n==="spring"||bE(n))&&r}function dg(e){e.duration=0,e.type="keyframes"}const g$=new Set(["opacity","clipPath","filter","transform"]),y$=Xy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v$(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return y$()&&n&&g$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const w$=40;class b$ extends cv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...f}){var _;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=In.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...f},m=(c==null?void 0:c.KeyframeResolver)||fv;this.keyframeResolver=new m(a,(v,w,g)=>this.onKeyframesResolved(v,w,p,!g),l,u,c),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=In.now(),m$(t,i,o,a)||((xs.instantAnimations||!l)&&(c==null||c(uv(t,r,n))),t[0]=t[t.length-1],dg(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>w$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&v$(p)?new h$({...p,element:p.motionValue.owner.current}):new dv(p);m.finished.then(()=>this.notifyFinished()).catch(hr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),n$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const x$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _$(e){const t=x$.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function _E(e,t,n=1){const[r,s]=_$(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return KS(o)?parseFloat(o):o}return sv(s)?_E(s,t,n+1):s}function hv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const kE=new Set(["width","height","top","left","right","bottom",...Ha]),k$={test:e=>e==="auto",parse:e=>e},SE=e=>t=>t.test(e),EE=[Wa,He,Yr,Ls,pL,hL,k$],Db=e=>EE.find(SE(e));function S$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||HS(e):!0}const E$=new Set(["brightness","contrast","saturate","opacity"]);function C$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(iv)||[];if(!r)return e;const s=n.replace(r,"");let i=E$.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const T$=/\b([a-z-]*)\(.*?\)/gu,fg={...mi,getAnimatableNone:e=>{const t=e.match(T$);return t?t.map(C$).join(" "):e}},Nb={...Wa,transform:Math.round},P$={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:zc,scaleX:zc,scaleY:zc,scaleZ:zc,skew:Ls,skewX:Ls,skewY:Ls,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:vu,originX:_b,originY:_b,originZ:He},pv={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...P$,zIndex:Nb,fillOpacity:vu,strokeOpacity:vu,numOctaves:Nb},A$={...pv,color:Bt,backgroundColor:Bt,outlineColor:Bt,fill:Bt,stroke:Bt,borderColor:Bt,borderTopColor:Bt,borderRightColor:Bt,borderBottomColor:Bt,borderLeftColor:Bt,filter:fg,WebkitFilter:fg},CE=e=>A$[e];function TE(e,t){let n=CE(e);return n!==fg&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const j$=new Set(["auto","none","0"]);function O$(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!j$.has(i)&&wu(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=TE(n,s)}class R$ extends fv{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),sv(u))){const c=_E(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!kE.has(r)||t.length!==2)return;const[s,i]=t,o=Db(s),a=Db(i);if(o!==a)if(jb(o)&&jb(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else oo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||S$(t[s]))&&r.push(s);r.length&&O$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=oo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function I$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const PE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function AE(e){return WS(e)&&"offsetHeight"in e}const Lb=30,D$=e=>!isNaN(parseFloat(e));class N${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=In.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=In.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=D$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ev);const r=this.events[t].add(n);return t==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=In.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Lb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lb);return qS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ia(e,t){return new N$(e,t)}const{schedule:mv}=sE(queueMicrotask,!1),_r={x:!1,y:!1};function jE(){return _r.x||_r.y}function L$(e){return e==="x"||e==="y"?_r[e]?null:(_r[e]=!0,()=>{_r[e]=!1}):_r.x||_r.y?null:(_r.x=_r.y=!0,()=>{_r.x=_r.y=!1})}function OE(e,t){const n=I$(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function $b(e){return!(e.pointerType==="touch"||jE())}function $$(e,t,n={}){const[r,s,i]=OE(e,n),o=a=>{if(!$b(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=f=>{$b(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const RE=(e,t)=>t?e===t?!0:RE(e,t.parentElement):!1,gv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,M$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function F$(e){return M$.has(e.tagName)||e.tabIndex!==-1}const hd=new WeakSet;function Mb(e){return t=>{t.key==="Enter"&&e(t)}}function gp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const B$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Mb(()=>{if(hd.has(n))return;gp(n,"down");const s=Mb(()=>{gp(n,"up")}),i=()=>gp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Fb(e){return gv(e)&&!jE()}function U$(e,t,n={}){const[r,s,i]=OE(e,n),o=a=>{const l=a.currentTarget;if(!Fb(a))return;hd.add(l);const u=t(l,a),c=(m,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),hd.has(l)&&hd.delete(l),Fb(m)&&typeof u=="function"&&u(m,{success:_})},f=m=>{c(m,l===window||l===document||n.useGlobalTarget||RE(l,m.target))},p=m=>{c(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),AE(a)&&(a.addEventListener("focus",u=>B$(u,s)),!F$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function IE(e){return WS(e)&&"ownerSVGElement"in e}function z$(e){return IE(e)&&e.tagName==="svg"}const mn=e=>!!(e&&e.getVelocity),V$=[...EE,Bt,mi],K$=e=>V$.find(SE(e)),yv=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Bb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function W$(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Bb(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Bb(e[s],null)}}}}function H$(...e){return S.useCallback(W$(...e),e)}class q$ extends S.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=AE(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G$({children:e,isPresent:t,anchorX:n,root:r}){const s=S.useId(),i=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=S.useContext(yv),l=H$(i,e==null?void 0:e.ref);return S.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:p,right:m}=o.current;if(t||!i.current||!u||!c)return;const _=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const w=r??document.head;return w.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{w.contains(v)&&w.removeChild(v)}},[t]),k.jsx(q$,{isPresent:t,childRef:i,sizeRef:o,children:S.cloneElement(e,{ref:l})})}const Q$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=Gy(Y$),c=S.useId();let f=!0,p=S.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const _ of u.values())if(!_)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return i&&f&&(p={...p}),S.useMemo(()=>{u.forEach((m,_)=>u.set(_,!1))},[n]),S.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=k.jsx(G$,{isPresent:n,anchorX:a,root:l,children:e})),k.jsx(Lf.Provider,{value:p,children:e})};function Y$(){return new Map}function DE(e=!0){const t=S.useContext(Lf);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=S.useId();S.useEffect(()=>{if(e)return s(i)},[e]);const o=S.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Vc=e=>e.key||"";function Ub(e){const t=[];return S.Children.forEach(e,n=>{S.isValidElement(n)&&t.push(n)}),t}const J$=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=DE(o),f=S.useMemo(()=>Ub(e),[e]),p=o&&!u?[]:f.map(Vc),m=S.useRef(!0),_=S.useRef(f),v=Gy(()=>new Map),[w,g]=S.useState(f),[y,b]=S.useState(f);VS(()=>{m.current=!1,_.current=f;for(let I=0;I<y.length;I++){const R=Vc(y[I]);p.includes(R)?v.delete(R):v.get(R)!==!0&&v.set(R,!1)}},[y,p.length,p.join("-")]);const C=[];if(f!==w){let I=[...f];for(let R=0;R<y.length;R++){const $=y[R],F=Vc($);p.includes(F)||(I.splice(R,0,$),C.push($))}return i==="wait"&&C.length&&(I=C),b(Ub(I)),g(f),null}const{forceRender:O}=S.useContext(qy);return k.jsx(k.Fragment,{children:y.map(I=>{const R=Vc(I),$=o&&!u?!1:f===y||p.includes(R),F=()=>{if(v.has(R))v.set(R,!0);else return;let z=!0;v.forEach(he=>{he||(z=!1)}),z&&(O==null||O(),b(_.current),o&&(c==null||c()),r&&r())};return k.jsx(Q$,{isPresent:$,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:$?void 0:F,anchorX:a,children:I},R)})})},NE=S.createContext({strict:!1}),zb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const e in zb)Da[e]={isEnabled:t=>zb[e].some(n=>!!t[n])};function Z$(e){for(const t in e)Da[t]={...Da[t],...e[t]}}const X$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||X$.has(e)}let LE=e=>!Xd(e);function e3(e){typeof e=="function"&&(LE=t=>t.startsWith("on")?!Xd(t):e(t))}try{e3(require("@emotion/is-prop-valid").default)}catch{}function t3(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(LE(s)||n===!0&&Xd(s)||!t&&!Xd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const $f=S.createContext({});function Mf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function bu(e){return typeof e=="string"||Array.isArray(e)}const vv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wv=["initial",...vv];function Ff(e){return Mf(e.animate)||wv.some(t=>bu(e[t]))}function $E(e){return!!(Ff(e)||e.variants)}function n3(e,t){if(Ff(e)){const{initial:n,animate:r}=e;return{initial:n===!1||bu(n)?n:void 0,animate:bu(r)?r:void 0}}return e.inherit!==!1?t:{}}function r3(e){const{initial:t,animate:n}=n3(e,S.useContext($f));return S.useMemo(()=>({initial:t,animate:n}),[Vb(t),Vb(n)])}function Vb(e){return Array.isArray(e)?e.join(" "):e}const xu={};function s3(e){for(const t in e)xu[t]=e[t],rv(t)&&(xu[t].isCSSVariable=!0)}function ME(e,{layout:t,layoutId:n}){return qa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!xu[e]||e==="opacity")}const i3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o3=Ha.length;function a3(e,t,n){let r="",s=!0;for(let i=0;i<o3;i++){const o=Ha[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=PE(a,pv[o]);if(!l){s=!1;const c=i3[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function bv(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(qa.has(l)){o=!0;continue}else if(rv(l)){s[l]=u;continue}else{const c=PE(u,pv[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=a3(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const xv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FE(e,t,n){for(const r in t)!mn(t[r])&&!ME(r,n)&&(e[r]=t[r])}function l3({transformTemplate:e},t){return S.useMemo(()=>{const n=xv();return bv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function u3(e,t){const n=e.style||{},r={};return FE(r,n,e),Object.assign(r,l3(e,t)),r}function c3(e,t){const n={},r=u3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const d3={offset:"stroke-dashoffset",array:"stroke-dasharray"},f3={offset:"strokeDashoffset",array:"strokeDasharray"};function h3(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?d3:f3;e[i.offset]=He.transform(-r);const o=He.transform(t),a=He.transform(n);e[i.array]=`${o} ${a}`}function BE(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(bv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&h3(f,s,i,o,!1)}const UE=()=>({...xv(),attrs:{}}),zE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function p3(e,t,n,r){const s=S.useMemo(()=>{const i=UE();return BE(i,t,zE(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};FE(i,e.style,e),s.style={...i,...s.style}}return s}const m3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _v(e){return typeof e!="string"||e.includes("-")?!1:!!(m3.indexOf(e)>-1||/[A-Z]/u.test(e))}function g3(e,t,n,{latestValues:r},s,i=!1){const a=(_v(e)?p3:c3)(t,r,s,e),l=t3(t,typeof e=="string",i),u=e!==S.Fragment?{...l,...a,ref:n}:{},{children:c}=t,f=S.useMemo(()=>mn(c)?c.get():c,[c]);return S.createElement(e,{...u,children:f})}function Kb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function kv(e,t,n,r){if(typeof t=="function"){const[s,i]=Kb(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Kb(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function pd(e){return mn(e)?e.get():e}function y3({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:v3(n,r,s,e),renderState:t()}}function v3(e,t,n,r){const s={},i=r(e,{});for(const p in i)s[p]=pd(i[p]);let{initial:o,animate:a}=e;const l=Ff(e),u=$E(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!Mf(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const _=kv(e,p[m]);if(_){const{transitionEnd:v,transition:w,...g}=_;for(const y in g){let b=g[y];if(Array.isArray(b)){const C=c?b.length-1:0;b=b[C]}b!==null&&(s[y]=b)}for(const y in v)s[y]=v[y]}}}return s}const VE=e=>(t,n)=>{const r=S.useContext($f),s=S.useContext(Lf),i=()=>y3(e,t,r,s);return n?i():Gy(i)};function Sv(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(mn(r[o])||t.style&&mn(t.style[o])||ME(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const w3=VE({scrapeMotionValuesFromProps:Sv,createRenderState:xv});function KE(e,t,n){const r=Sv(e,t,n);for(const s in e)if(mn(e[s])||mn(t[s])){const i=Ha.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const b3=VE({scrapeMotionValuesFromProps:KE,createRenderState:UE}),x3=Symbol.for("motionComponentSymbol");function Xo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function _3(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xo(n)&&(n.current=r))},[t])}const Ev=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),k3="framerAppearId",WE="data-"+Ev(k3),HE=S.createContext({});function S3(e,t,n,r,s){var v,w;const{visualElement:i}=S.useContext($f),o=S.useContext(NE),a=S.useContext(Lf),l=S.useContext(yv).reducedMotion,u=S.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=S.useContext(HE);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&E3(u.current,n,s,f);const p=S.useRef(!1);S.useInsertionEffect(()=>{c&&p.current&&c.update(n,a)});const m=n[WE],_=S.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,m)));return VS(()=>{c&&(p.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),_.current&&c.animationState&&c.animationState.animateChanges())}),S.useEffect(()=>{c&&(!_.current&&c.animationState&&c.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),_.current=!1),c.enteringChildren=void 0)}),c}function E3(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:qE(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Xo(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function qE(e){if(e)return e.options.allowProjection!==!1?e.projection:qE(e.parent)}function yp(e,{forwardMotionProps:t=!1}={},n,r){n&&Z$(n);const s=_v(e)?b3:w3;function i(a,l){let u;const c={...S.useContext(yv),...a,layoutId:C3(a)},{isStatic:f}=c,p=r3(a),m=s(a,f);if(!f&&Qy){T3();const _=P3(c);u=_.MeasureLayout,p.visualElement=S3(e,m,c,r,_.ProjectionNode)}return k.jsxs($f.Provider,{value:p,children:[u&&p.visualElement?k.jsx(u,{visualElement:p.visualElement,...c}):null,g3(e,a,_3(m,p.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=S.forwardRef(i);return o[x3]=e,o}function C3({layoutId:e}){const t=S.useContext(qy).id;return t&&e!==void 0?t+"-"+e:e}function T3(e,t){S.useContext(NE).strict}function P3(e){const{drag:t,layout:n}=Da;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function A3(e,t){if(typeof Proxy>"u")return yp;const n=new Map,r=(i,o)=>yp(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,yp(o,void 0,e,t)),n.get(o))})}function GE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function j3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function O3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vp(e){return e===void 0||e===1}function hg({scale:e,scaleX:t,scaleY:n}){return!vp(e)||!vp(t)||!vp(n)}function Li(e){return hg(e)||QE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function QE(e){return Wb(e.x)||Wb(e.y)}function Wb(e){return e&&e!=="0%"}function ef(e,t,n){const r=e-n,s=t*r;return n+s}function Hb(e,t,n,r,s){return s!==void 0&&(e=ef(e,s,r)),ef(e,n,r)+t}function pg(e,t=0,n=1,r,s){e.min=Hb(e.min,t,n,r,s),e.max=Hb(e.max,t,n,r,s)}function YE(e,{x:t,y:n}){pg(e.x,t.translate,t.scale,t.originPoint),pg(e.y,n.translate,n.scale,n.originPoint)}const qb=.999999999999,Gb=1.0000000000001;function R3(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ta(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,YE(e,o)),r&&Li(i.latestValues)&&ta(e,i.latestValues))}t.x<Gb&&t.x>qb&&(t.x=1),t.y<Gb&&t.y>qb&&(t.y=1)}function ea(e,t){e.min=e.min+t,e.max=e.max+t}function Qb(e,t,n,r,s=.5){const i=kt(e.min,e.max,s);pg(e,t,n,i,r)}function ta(e,t){Qb(e.x,t.x,t.scaleX,t.scale,t.originX),Qb(e.y,t.y,t.scaleY,t.scale,t.originY)}function JE(e,t){return GE(O3(e.getBoundingClientRect(),t))}function I3(e,t,n){const r=JE(e,n),{scroll:s}=t;return s&&(ea(r.x,s.offset.x),ea(r.y,s.offset.y)),r}const Yb=()=>({translate:0,scale:1,origin:0,originPoint:0}),na=()=>({x:Yb(),y:Yb()}),Jb=()=>({min:0,max:0}),Dt=()=>({x:Jb(),y:Jb()}),mg={current:null},ZE={current:!1};function D3(){if(ZE.current=!0,!!Qy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>mg.current=e.matches;e.addEventListener("change",t),t()}else mg.current=!1}const N3=new WeakMap;function L3(e,t,n){for(const r in t){const s=t[r],i=n[r];if(mn(s))e.addValue(r,s);else if(mn(i))e.addValue(r,Ia(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,Ia(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Zb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=In.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,bt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Ff(n),this.isVariantNode=$E(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&mn(m)&&m.set(l[p])}}mount(t){var n;this.current=t,N3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),ZE.current||D3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=qa.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Da){const n=Da[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Zb.length;r++){const s=Zb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=L3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ia(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(KS(r)||HS(r))?r=parseFloat(r):!K$(r)&&mi.test(n)&&(r=TE(t,n)),this.setBaseTarget(t,mn(r)?r.get():r)),mn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=kv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!mn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ev),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){mv.render(this.render)}}class XE extends $3{constructor(){super(...arguments),this.KeyframeResolver=R$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eC(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function M3(e){return window.getComputedStyle(e)}class F3 extends XE{constructor(){super(...arguments),this.type="html",this.renderInstance=eC}readValueFromInstance(t,n){var r;if(qa.has(n))return(r=this.projection)!=null&&r.isProjecting?og(n):JL(t,n);{const s=M3(t),i=(rv(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return JE(t,n)}build(t,n,r){bv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Sv(t,n,r)}}const tC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B3(e,t,n,r){eC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(tC.has(s)?s:Ev(s),t.attrs[s])}class U3 extends XE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(qa.has(n)){const r=CE(n);return r&&r.default||0}return n=tC.has(n)?n:Ev(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return KE(t,n,r)}build(t,n,r){BE(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){B3(t,n,r,s)}mount(t){this.isSVGTag=zE(t.tagName),super.mount(t)}}const z3=(e,t)=>_v(e)?new U3(t):new F3(t,{allowProjection:e!==S.Fragment});function ca(e,t,n){const r=e.getProps();return kv(r,t,n!==void 0?n:r.custom,e)}const gg=e=>Array.isArray(e);function V3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ia(n))}function K3(e){return gg(e)?e[e.length-1]||0:e}function W3(e,t){const n=ca(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=K3(i[o]);V3(e,o,a)}}function H3(e){return!!(mn(e)&&e.add)}function yg(e,t){const n=e.getValue("willChange");if(H3(n))return n.add(t);if(!n&&xs.WillChange){const r=new xs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function nC(e){return e.props[WE]}const q3=e=>e!==null;function G3(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(q3),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const Q3={type:"spring",stiffness:500,damping:25,restSpeed:10},Y3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),J3={type:"keyframes",duration:.8},Z3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X3=(e,{keyframes:t})=>t.length>2?J3:qa.has(e)?e.startsWith("scale")?Y3(t[1]):Q3:Z3;function eM({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Cv=(e,t,n,r={},s,i)=>o=>{const a=hv(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};eM(a)||Object.assign(c,X3(e,c)),c.duration&&(c.duration=Qr(c.duration)),c.repeatDelay&&(c.repeatDelay=Qr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(dg(c),c.delay===0&&(f=!0)),(xs.instantAnimations||xs.skipAnimations)&&(f=!0,dg(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const p=G3(c.keyframes,a);if(p!==void 0){bt.update(()=>{c.onUpdate(p),c.onComplete()});return}}return a.isSync?new dv(c):new b$(c)};function tM({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function rC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const f=e.getValue(c,e.latestValues[c]??null),p=a[c];if(p===void 0||u&&tM(u,c))continue;const m={delay:n,...hv(i||{},c)},_=f.get();if(_!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===_&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=nC(e);if(g){const y=window.MotionHandoffAnimation(g,c,bt);y!==null&&(m.startTime=y,v=!0)}}yg(e,c),f.start(Cv(c,f,p,e.shouldReduceMotion&&kE.has(c)?{type:!1}:m,e,v));const w=f.animation;w&&l.push(w)}return o&&Promise.all(l).then(()=>{bt.update(()=>{o&&W3(e,o)})}),l}function sC(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function vg(e,t,n={}){var l;const r=ca(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(rC(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:p}=s;return nM(e,t,u,c,f,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function nM(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(vg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+sC(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function rM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>vg(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=vg(e,t,n);else{const s=typeof t=="function"?ca(e,t,n.custom):t;r=Promise.all(rC(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function iC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const sM=wv.length;function oC(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?oC(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<sM;n++){const r=wv[n],s=e.props[r];(bu(s)||s===!1)&&(t[r]=s)}return t}const iM=[...vv].reverse(),oM=vv.length;function aM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>rM(e,n,r)))}function lM(e){let t=aM(e),n=Xb(),r=!0;const s=l=>(u,c)=>{var p;const f=ca(e,c,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:_,...v}=f;u={...u,...v,..._}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=oC(e.parent)||{},f=[],p=new Set;let m={},_=1/0;for(let w=0;w<oM;w++){const g=iM[w],y=n[g],b=u[g]!==void 0?u[g]:c[g],C=bu(b),O=g===l?y.isActive:null;O===!1&&(_=w);let I=b===c[g]&&b!==u[g]&&C;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),y.protectedKeys={...m},!y.isActive&&O===null||!b&&!y.prevProp||Mf(b)||typeof b=="boolean")continue;const R=uM(y.prevProp,b);let $=R||g===l&&y.isActive&&!I&&C||w>_&&C,F=!1;const z=Array.isArray(b)?b:[b];let he=z.reduce(s(g),{});O===!1&&(he={});const{prevResolvedValues:N={}}=y,J={...N,...he},T=ae=>{$=!0,p.has(ae)&&(F=!0,p.delete(ae)),y.needsAnimating[ae]=!0;const ce=e.getValue(ae);ce&&(ce.liveStyle=!1)};for(const ae in J){const ce=he[ae],se=N[ae];if(m.hasOwnProperty(ae))continue;let ye=!1;gg(ce)&&gg(se)?ye=!iC(ce,se):ye=ce!==se,ye?ce!=null?T(ae):p.add(ae):ce!==void 0&&p.has(ae)?T(ae):y.protectedKeys[ae]=!0}y.prevProp=b,y.prevResolvedValues=he,y.isActive&&(m={...m,...he}),r&&e.blockInitialAnimation&&($=!1);const G=I&&R;$&&(!G||F)&&f.push(...z.map(ae=>{const ce={type:g};if(typeof ae=="string"&&r&&!G&&e.manuallyAnimateOnMount&&e.parent){const{parent:se}=e,ye=ca(se,ae);if(se.enteringChildren&&ye){const{delayChildren:Z}=ye.transition||{};ce.delay=sC(se.enteringChildren,e,Z)}}return{animation:ae,options:ce}}))}if(p.size){const w={};if(typeof u.initial!="boolean"){const g=ca(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(w.transition=g.transition)}p.forEach(g=>{const y=e.getBaseTarget(g),b=e.getValue(g);b&&(b.liveStyle=!0),w[g]=y??null}),f.push({animation:w})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function a(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const p in n)n[p].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Xb(),r=!0}}}function uM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!iC(t,e):!1}function Ri(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xb(){return{animate:Ri(!0),whileInView:Ri(),whileHover:Ri(),whileTap:Ri(),whileDrag:Ri(),whileFocus:Ri(),exit:Ri()}}class _i{constructor(t){this.isMounted=!1,this.node=t}update(){}}class cM extends _i{constructor(t){super(t),t.animationState||(t.animationState=lM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Mf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let dM=0;class fM extends _i{constructor(){super(...arguments),this.id=dM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const hM={animation:{Feature:cM},exit:{Feature:fM}};function _u(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Vu(e){return{point:{x:e.pageX,y:e.pageY}}}const pM=e=>t=>gv(t)&&e(t,Vu(t));function Vl(e,t,n,r){return _u(e,t,pM(n),r)}const aC=1e-4,mM=1-aC,gM=1+aC,lC=.01,yM=0-lC,vM=0+lC;function xn(e){return e.max-e.min}function wM(e,t,n){return Math.abs(e-t)<=n}function ex(e,t,n,r=.5){e.origin=r,e.originPoint=kt(t.min,t.max,e.origin),e.scale=xn(n)/xn(t),e.translate=kt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=mM&&e.scale<=gM||isNaN(e.scale))&&(e.scale=1),(e.translate>=yM&&e.translate<=vM||isNaN(e.translate))&&(e.translate=0)}function Kl(e,t,n,r){ex(e.x,t.x,n.x,r?r.originX:void 0),ex(e.y,t.y,n.y,r?r.originY:void 0)}function tx(e,t,n){e.min=n.min+t.min,e.max=e.min+xn(t)}function bM(e,t,n){tx(e.x,t.x,n.x),tx(e.y,t.y,n.y)}function nx(e,t,n){e.min=t.min-n.min,e.max=e.min+xn(t)}function Wl(e,t,n){nx(e.x,t.x,n.x),nx(e.y,t.y,n.y)}function sr(e){return[e("x"),e("y")]}const uC=({current:e})=>e?e.ownerDocument.defaultView:null,rx=(e,t)=>Math.abs(e-t);function xM(e,t){const n=rx(e.x,t.x),r=rx(e.y,t.y);return Math.sqrt(n**2+r**2)}class cC{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=bp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,_=xM(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!_)return;const{point:v}=p,{timestamp:w}=rn;this.history.push({...v,timestamp:w});const{onStart:g,onMove:y}=this.handlers;m||(g&&g(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=wp(m,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:_,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=bp(p.type==="pointercancel"?this.lastMoveEventInfo:wp(m,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,g),v&&v(p,g)},!gv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=Vu(t),l=wp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=rn;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(t,bp(l,this.history)),this.removeListeners=Bu(Vl(this.contextWindow,"pointermove",this.handlePointerMove),Vl(this.contextWindow,"pointerup",this.handlePointerUp),Vl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function wp(e,t){return t?{point:t(e.point)}:e}function sx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bp({point:e},t){return{point:e,delta:sx(e,dC(t)),offset:sx(e,_M(t)),velocity:kM(t,.1)}}function _M(e){return e[0]}function dC(e){return e[e.length-1]}function kM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=dC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Qr(t)));)n--;if(!r)return{x:0,y:0};const i=dr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function SM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?kt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?kt(n,e,r.max):Math.min(e,n)),e}function ix(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function EM(e,{top:t,left:n,bottom:r,right:s}){return{x:ix(e.x,n,s),y:ix(e.y,t,r)}}function ox(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function CM(e,t){return{x:ox(e.x,t.x),y:ox(e.y,t.y)}}function TM(e,t){let n=.5;const r=xn(e),s=xn(t);return s>r?n=yu(t.min,t.max-r,e.min):r>s&&(n=yu(e.min,e.max-s,t.min)),bs(0,1,n)}function PM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const wg=.35;function AM(e=wg){return e===!1?e=0:e===!0&&(e=wg),{x:ax(e,"left","right"),y:ax(e,"top","bottom")}}function ax(e,t,n){return{min:lx(e,t),max:lx(e,n)}}function lx(e,t){return typeof e=="number"?e:e[t]||0}const jM=new WeakMap;class OM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vu(f).point)},o=(f,p)=>{const{drag:m,dragPropagation:_,onDragStart:v}=this.getProps();if(m&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L$(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Yr.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[g];C&&(y=xn(C)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&bt.postRender(()=>v(f,p)),yg(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:v,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(_&&this.currentDirection===null){this.currentDirection=RM(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),w&&w(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>sr(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new cC(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:uC(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&bt.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Kc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=SM(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Xo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=EM(r.layoutBox,t):this.constraints=!1,this.elastic=AM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=PM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xo(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=I3(r,s.root,this.visualElement.getTransformPagePoint());let o=CM(s.layout.layoutBox,i);if(n){const a=n(j3(o));this.hasMutatedConstraints=!!a,a&&(o=GE(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=sr(c=>{if(!Kc(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,_={type:"inertia",velocity:r?t[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(c,_)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return yg(this.visualElement,t),r.start(Cv(t,r,0,n,this.visualElement,!1))}stopAnimation(){sr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){sr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){sr(n=>{const{drag:r}=this.getProps();if(!Kc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=TM({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(o=>{if(!Kc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(kt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;jM.set(this.visualElement,this);const t=this.visualElement.current,n=Vl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bt.read(r);const o=_u(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(sr(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=wg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Kc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function RM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class IM extends _i{constructor(t){super(t),this.removeGroupControls=hr,this.removeListeners=hr,this.controls=new OM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ux=e=>(t,n)=>{e&&bt.postRender(()=>e(t,n))};class DM extends _i{constructor(){super(...arguments),this.removePointerDownListener=hr}onPointerDown(t){this.session=new cC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ux(t),onStart:ux(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&bt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Vl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const md={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ml={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(He.test(e))e=parseFloat(e);else return e;const n=cx(e,t.target.x),r=cx(e,t.target.y);return`${n}% ${r}%`}},NM={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mi.parse(e);if(s.length>5)return r;const i=mi.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=kt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let xp=!1;class LM extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;s3($M),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),xp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),md.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,xp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||bt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;xp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function fC(e){const[t,n]=DE(),r=S.useContext(qy);return k.jsx(LM,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(HE),isPresent:t,safeToRemove:n})}const $M={borderRadius:{...ml,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ml,borderTopRightRadius:ml,borderBottomLeftRadius:ml,borderBottomRightRadius:ml,boxShadow:NM};function MM(e,t,n){const r=mn(e)?e:Ia(e);return r.start(Cv("",r,t,n)),r.animation}const FM=(e,t)=>e.depth-t.depth;class BM{constructor(){this.children=[],this.isDirty=!1}add(t){Yy(this.children,t),this.isDirty=!0}remove(t){Jy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FM),this.isDirty=!1,this.children.forEach(t)}}function UM(e,t){const n=In.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(pi(r),e(i-t))};return bt.setup(r,!0),()=>pi(r)}const hC=["TopLeft","TopRight","BottomLeft","BottomRight"],zM=hC.length,dx=e=>typeof e=="string"?parseFloat(e):e,fx=e=>typeof e=="number"||He.test(e);function VM(e,t,n,r,s,i){s?(e.opacity=kt(0,n.opacity??1,KM(r)),e.opacityExit=kt(t.opacity??1,0,WM(r))):i&&(e.opacity=kt(t.opacity??1,n.opacity??1,r));for(let o=0;o<zM;o++){const a=`border${hC[o]}Radius`;let l=hx(t,a),u=hx(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||fx(l)===fx(u)?(e[a]=Math.max(kt(dx(l),dx(u),r),0),(Yr.test(u)||Yr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=kt(t.rotate||0,n.rotate||0,r))}function hx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const KM=pC(0,.5,eE),WM=pC(.5,.95,hr);function pC(e,t,n){return r=>r<e?0:r>t?1:n(yu(e,t,r))}function px(e,t){e.min=t.min,e.max=t.max}function tr(e,t){px(e.x,t.x),px(e.y,t.y)}function mx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function gx(e,t,n,r,s){return e-=t,e=ef(e,1/n,r),s!==void 0&&(e=ef(e,1/s,r)),e}function HM(e,t=0,n=1,r=.5,s,i=e,o=e){if(Yr.test(t)&&(t=parseFloat(t),t=kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=kt(i.min,i.max,r);e===i&&(a-=t),e.min=gx(e.min,t,n,a,s),e.max=gx(e.max,t,n,a,s)}function yx(e,t,[n,r,s],i,o){HM(e,t[n],t[r],t[s],t.scale,i,o)}const qM=["x","scaleX","originX"],GM=["y","scaleY","originY"];function vx(e,t,n,r){yx(e.x,t,qM,n?n.x:void 0,r?r.x:void 0),yx(e.y,t,GM,n?n.y:void 0,r?r.y:void 0)}function wx(e){return e.translate===0&&e.scale===1}function mC(e){return wx(e.x)&&wx(e.y)}function bx(e,t){return e.min===t.min&&e.max===t.max}function QM(e,t){return bx(e.x,t.x)&&bx(e.y,t.y)}function xx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function gC(e,t){return xx(e.x,t.x)&&xx(e.y,t.y)}function _x(e){return xn(e.x)/xn(e.y)}function kx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class YM{constructor(){this.members=[]}add(t){Yy(this.members,t),t.scheduleRender()}remove(t){if(Jy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JM(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:p,skewX:m,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const _p=["","X","Y","Z"],ZM=1e3;let XM=0;function kp(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function yC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=nC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&yC(r)}function vC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=XM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nF),this.nodes.forEach(oF),this.nodes.forEach(aF),this.nodes.forEach(rF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new BM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ev),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=IE(o)&&!z$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,f=0;const p=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,c&&c(),c=UM(p,250),md.hasAnimatedSinceResize&&(md.hasAnimatedSinceResize=!1,this.nodes.forEach(Cx)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||fF,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=u.getProps(),g=!this.targetLayout||!gC(this.targetLayout,m),y=!f&&p;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...hv(_,"layout"),onPlay:v,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,y)}else f||Cx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ex);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iF),this.nodes.forEach(eF),this.nodes.forEach(tF)):this.nodes.forEach(Ex),this.clearAllSnapshots();const a=In.now();rn.delta=bs(0,1e3/60,a-rn.timestamp),rn.timestamp=a,rn.isProcessing=!0,dp.update.process(rn),dp.preRender.process(rn),dp.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sF),this.sharedNodes.forEach(uF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xn(this.snapshot.measuredBox.x)&&!xn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!mC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Li(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),hF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Dt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(pF))){const{scroll:c}=this.root;c&&(ea(a.x,c.offset.x),ea(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Dt();if(tr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:p}=c;c!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&tr(a,o),ea(a.x,f.offset.x),ea(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Dt();tr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ta(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Li(c.latestValues)&&ta(l,c.latestValues)}return Li(this.latestValues)&&ta(l,this.latestValues),l}removeTransform(o){const a=Dt();tr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Li(u.latestValues))continue;hg(u.latestValues)&&u.updateSnapshot();const c=Dt(),f=u.measurePageBox();tr(c,f),vx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Li(this.latestValues)&&vx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=rn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Wl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),YE(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Wl(this.relativeTargetOrigin,this.target,m.target),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hg(this.parent.latestValues)||QE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;tr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;R3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mx(this.prevProjectionDelta.x,this.projectionDelta.x),mx(this.prevProjectionDelta.y,this.projectionDelta.y)),Kl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!kx(this.projectionDelta.x,this.prevProjectionDelta.x)||!kx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=na(),this.projectionDelta=na(),this.projectionDeltaWithTransform=na()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Dt(),m=l?l.source:void 0,_=this.layout?this.layout.source:void 0,v=m!==_,w=this.getStack(),g=!w||w.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(dF));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const O=C/1e3;Tx(f.x,o.x,O),Tx(f.y,o.y,O),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cF(this.relativeTarget,this.relativeTargetOrigin,p,O),b&&QM(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Dt()),tr(b,this.relativeTarget)),v&&(this.animationValues=c,VM(c,u,this.latestValues,O,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{md.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ia(0)),this.currentAnimation=MM(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&wC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dt();const f=xn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=xn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}tr(a,l),ta(a,c),Kl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new YM),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&kp("z",o,u,this.animationValues);for(let c=0;c<_p.length;c++)kp(`rotate${_p[c]}`,o,u,this.animationValues),kp(`skew${_p[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=pd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=pd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Li(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=JM(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const _ in xu){if(c[_]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:g}=xu[_],y=f==="none"?c[_]:v(c[_],u);if(w){const b=w.length;for(let C=0;C<b;C++)o[w[C]]=y}else g?this.options.visualElement.renderState.vars[_]=y:o[_]=y}this.options.layoutId&&(o.pointerEvents=u===this?pd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Sx),this.root.sharedNodes.clear()}}}function eF(e){e.updateLayout()}function tF(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?sr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=xn(p);p.min=r[f].min,p.max=p.min+m}):wC(i,t.layoutBox,r)&&sr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=xn(r[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=na();Kl(a,r,t.layoutBox);const l=na();o?Kl(l,e.applyTransform(s,!0),t.measuredBox):Kl(l,r,t.layoutBox);const u=!mC(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const _=Dt();Wl(_,t.layoutBox,p.layoutBox);const v=Dt();Wl(v,r,m.layoutBox),gC(_,v)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=_,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function nF(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function rF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function sF(e){e.clearSnapshot()}function Sx(e){e.clearMeasurements()}function Ex(e){e.isLayoutDirty=!1}function iF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Cx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oF(e){e.resolveTargetDelta()}function aF(e){e.calcProjection()}function lF(e){e.resetSkewAndRotation()}function uF(e){e.removeLeadSnapshot()}function Tx(e,t,n){e.translate=kt(t.translate,0,n),e.scale=kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Px(e,t,n,r){e.min=kt(t.min,n.min,r),e.max=kt(t.max,n.max,r)}function cF(e,t,n,r){Px(e.x,t.x,n.x,r),Px(e.y,t.y,n.y,r)}function dF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const fF={duration:.45,ease:[.4,0,.1,1]},Ax=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),jx=Ax("applewebkit/")&&!Ax("chrome/")?Math.round:hr;function Ox(e){e.min=jx(e.min),e.max=jx(e.max)}function hF(e){Ox(e.x),Ox(e.y)}function wC(e,t,n){return e==="position"||e==="preserve-aspect"&&!wM(_x(t),_x(n),.2)}function pF(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const mF=vC({attachResizeListener:(e,t)=>_u(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sp={current:void 0},bC=vC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Sp.current){const e=new mF({});e.mount(window),e.setOptions({layoutScroll:!0}),Sp.current=e}return Sp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),gF={pan:{Feature:DM},drag:{Feature:IM,ProjectionNode:bC,MeasureLayout:fC}};function Rx(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&bt.postRender(()=>i(t,Vu(t)))}class yF extends _i{mount(){const{current:t}=this.node;t&&(this.unmount=$$(t,(n,r)=>(Rx(this.node,r,"Start"),s=>Rx(this.node,s,"End"))))}unmount(){}}class vF extends _i{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bu(_u(this.node.current,"focus",()=>this.onFocus()),_u(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ix(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&bt.postRender(()=>i(t,Vu(t)))}class wF extends _i{mount(){const{current:t}=this.node;t&&(this.unmount=U$(t,(n,r)=>(Ix(this.node,r,"Start"),(s,{success:i})=>Ix(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bg=new WeakMap,Ep=new WeakMap,bF=e=>{const t=bg.get(e.target);t&&t(e)},xF=e=>{e.forEach(bF)};function _F({root:e,...t}){const n=e||document;Ep.has(n)||Ep.set(n,{});const r=Ep.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(xF,{root:e,...t})),r[s]}function kF(e,t,n){const r=_F(t);return bg.set(e,n),r.observe(e),()=>{bg.delete(e),r.unobserve(e)}}const SF={some:0,all:1};class EF extends _i{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:SF[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),p=u?c:f;p&&p(l)};return kF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(CF(t,n))&&this.startObserver()}unmount(){}}function CF({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const TF={inView:{Feature:EF},tap:{Feature:wF},focus:{Feature:vF},hover:{Feature:yF}},PF={layout:{ProjectionNode:bC,MeasureLayout:fC}},AF={...hM,...TF,...gF,...PF},jF=A3(AF,z3);let OF={data:""},RF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||OF},IF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,DF=/\/\*[^]*?\*\/|  +/g,Dx=/\n+/g,zs=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?zs(o,i):i+"{"+zs(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=zs(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zs.p?zs.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},ns={},xC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+xC(e[n]);return t}return e},NF=(e,t,n,r,s)=>{let i=xC(e),o=ns[i]||(ns[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!ns[o]){let l=i!==e?e:(u=>{let c,f,p=[{}];for(;c=IF.exec(u.replace(DF,""));)c[4]?p.shift():c[3]?(f=c[3].replace(Dx," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][c[1]]=c[2].replace(Dx," ").trim();return p[0]})(e);ns[o]=zs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&ns.g?ns.g:null;return n&&(ns.g=ns[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(ns[o],t,r,a),o},LF=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zs(a,""):a===!1?"":a}return r+s+(o??"")},"");function Bf(e){let t=this||{},n=e.call?e(t.p):e;return NF(n.unshift?n.raw?LF(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,RF(t.target),t.g,t.o,t.k)}let _C,xg,_g;Bf.bind({g:1});let _s=Bf.bind({k:1});function $F(e,t,n,r){zs.p=t,_C=e,xg=n,_g=r}function ki(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:xg&&xg()},a),n.o=/ *go\d+/.test(l),a.className=Bf.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),_g&&u[0]&&_g(a),_C(u,a)}return s}}var MF=e=>typeof e=="function",tf=(e,t)=>MF(e)?e(t):e,FF=(()=>{let e=0;return()=>(++e).toString()})(),kC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),BF=20,Tv="default",SC=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return SC(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},gd=[],EC={toasts:[],pausedAt:void 0,settings:{toastLimit:BF}},Hr={},CC=(e,t=Tv)=>{Hr[t]=SC(Hr[t]||EC,e),gd.forEach(([n,r])=>{n===t&&r(Hr[t])})},TC=e=>Object.keys(Hr).forEach(t=>CC(e,t)),UF=e=>Object.keys(Hr).find(t=>Hr[t].toasts.some(n=>n.id===e)),Uf=(e=Tv)=>t=>{CC(t,e)},zF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},VF=(e={},t=Tv)=>{let[n,r]=S.useState(Hr[t]||EC),s=S.useRef(Hr[t]);S.useEffect(()=>(s.current!==Hr[t]&&r(Hr[t]),gd.push([t,r]),()=>{let o=gd.findIndex(([a])=>a===t);o>-1&&gd.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||zF[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},KF=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||FF()}),Ku=e=>(t,n)=>{let r=KF(t,e,n);return Uf(r.toasterId||UF(r.id))({type:2,toast:r}),r.id},Wt=(e,t)=>Ku("blank")(e,t);Wt.error=Ku("error");Wt.success=Ku("success");Wt.loading=Ku("loading");Wt.custom=Ku("custom");Wt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Uf(t)(n):TC(n)};Wt.dismissAll=e=>Wt.dismiss(void 0,e);Wt.remove=(e,t)=>{let n={type:4,toastId:e};t?Uf(t)(n):TC(n)};Wt.removeAll=e=>Wt.remove(void 0,e);Wt.promise=(e,t,n)=>{let r=Wt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?tf(t.success,s):void 0;return i?Wt.success(i,{id:r,...n,...n==null?void 0:n.success}):Wt.dismiss(r),s}).catch(s=>{let i=t.error?tf(t.error,s):void 0;i?Wt.error(i,{id:r,...n,...n==null?void 0:n.error}):Wt.dismiss(r)}),e};var WF=1e3,HF=(e,t="default")=>{let{toasts:n,pausedAt:r}=VF(e,t),s=S.useRef(new Map).current,i=S.useCallback((f,p=WF)=>{if(s.has(f))return;let m=setTimeout(()=>{s.delete(f),o({type:4,toastId:f})},p);s.set(f,m)},[]);S.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let _=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(_<0){m.visible&&Wt.dismiss(m.id);return}return setTimeout(()=>Wt.dismiss(m.id,t),_)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let o=S.useCallback(Uf(t),[t]),a=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=S.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),u=S.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=S.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:_=8,defaultPosition:v}=p||{},w=n.filter(b=>(b.position||v)===(f.position||v)&&b.height),g=w.findIndex(b=>b.id===f.id),y=w.filter((b,C)=>C<g&&b.visible).length;return w.filter(b=>b.visible).slice(...m?[y+1]:[0,y]).reduce((b,C)=>b+(C.height||0)+_,0)},[n]);return S.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=s.get(f.id);p&&(clearTimeout(p),s.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},qF=_s`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GF=_s`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QF=_s`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,YF=ki("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${QF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,JF=_s`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ZF=ki("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${JF} 1s linear infinite;
`,XF=_s`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,e5=_s`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,t5=ki("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${e5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,n5=ki("div")`
  position: absolute;
`,r5=ki("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,s5=_s`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,i5=ki("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${s5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,o5=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?S.createElement(i5,null,t):t:n==="blank"?null:S.createElement(r5,null,S.createElement(ZF,{...r}),n!=="loading"&&S.createElement(n5,null,n==="error"?S.createElement(YF,{...r}):S.createElement(t5,{...r})))},a5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,l5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,u5="0%{opacity:0;} 100%{opacity:1;}",c5="0%{opacity:1;} 100%{opacity:0;}",d5=ki("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,f5=ki("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,h5=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=kC()?[u5,c5]:[a5(n),l5(n)];return{animation:t?`${_s(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${_s(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},p5=S.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?h5(e.position||t||"top-center",e.visible):{opacity:0},i=S.createElement(o5,{toast:e}),o=S.createElement(f5,{...e.ariaProps},tf(e.message,e));return S.createElement(d5,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):S.createElement(S.Fragment,null,i,o))});$F(S.createElement);var m5=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=S.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return S.createElement("div",{ref:i,className:t,style:n},s)},g5=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:kC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},y5=Bf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wc=16,v5=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=HF(n,i);return S.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Wc,left:Wc,right:Wc,bottom:Wc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let f=c.position||t,p=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),m=g5(f,p);return S.createElement(m5,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?y5:"",style:m},c.type==="custom"?tf(c.message,c):s?s(c):S.createElement(p5,{toast:c,position:f}))}))},Zt=Wt;const PC=[{code:"original",name:"Original Script"},{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"itrans",name:"ITRANS"},{code:"iast",name:"IAST"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"}];function w5(){const{preferredLanguage:e,setPreferredLanguage:t}=bo(),[n,r]=S.useState(e);S.useEffect(()=>{localStorage.setItem("preferredLanguage",n),t(n)},[n,t]);const s=i=>{r(i.target.value)};return k.jsxs("div",{children:[k.jsx("h2",{children:"Language Preferences"}),k.jsx("p",{children:"Choose the language for transliteration:"}),k.jsx("select",{value:n,onChange:s,children:PC.map(i=>k.jsx("option",{value:i.code,children:i.name},i.code))})]})}const b5=0,x5={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},gl={marginRight:"10px"},yl={opacity:.5,cursor:"not-allowed",color:"#888"},_5=async function(e){try{return await zt.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},k5=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters for fetching song details.");const o=await wS(n,i);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await Wy({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,f]=a;await xS({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:f,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${i}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function S5(){var Ot,Zn,qt;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=Ba(),s=Yn(),i=Jn(),{session:o}=xi(),a=(Ot=o==null?void 0:o.user)==null?void 0:Ot.email,l=(Zn=s.state)==null?void 0:Zn.filteredSongIndices,u=(qt=s.state)==null?void 0:qt.index,c=jf(),f=S.useMemo(()=>decodeURIComponent(r||""),[r]),p=["songDetails",t,n,a,f],{preferredLanguage:m,setPreferredLanguage:_}=bo(),v=S.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),w=S.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),g=S.useCallback(async(De,Be)=>{if(!De||!De.bookId||!De.songTitle){Be(!1);return}const Tt=await If(De.bookId,De.songTitle);Be(Tt)},[]),[y,b]=S.useState(!1),[C,O]=S.useState(!1);S.useEffect(()=>(window.handleInternalNavigation=(De,Be,Tt,$t)=>{const Ne=`/details/book/${De}/${Be}/${Tt}/${encodeURIComponent($t)}`;i(Ne,{state:{filteredSongIndices:l||[],index:b5},replace:!1}),console.log(`Internal navigation triggered: ${Ne}`)},()=>{delete window.handleInternalNavigation}),[i,l,u]),S.useEffect(()=>{g(v,b),g(w,O)},[v,w,g]);const{isLoading:I,isFetching:R,error:$,data:F}=Of({queryKey:p,queryFn:k5,staleTime:1/0,gcTime:0,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1});GN(({swipe:[De]})=>{De===1?(console.log("going to prev"),Xe()):De===-1&&(console.log("going to next"),me())},{axis:"x",filterTaps:!0});const[z,he]=S.useState(!1),[N,J]=S.useState({x:0,y:0}),[T,G]=S.useState(!1),ve=S.useRef(null),[ae,ce]=S.useState(""),[se,ye]=S.useState(null),Z=S.useRef(null),ee=De=>{De.preventDefault();const Be=window.getSelection(),Tt=(Be==null?void 0:Be.toString().trim())??"";Be&&Be.rangeCount>0&&!Be.getRangeAt(0).collapsed?(ce(Tt),ye(Be.getRangeAt(0)),G(!0)):(ce(""),ye(null),G(!1)),J({x:De.clientX,y:De.clientY}),G(!!ae),he(!0)};S.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),S.useEffect(()=>{const De=Be=>{ve.current&&!ve.current.contains(Be.target)&&he(!1)};return z?window.addEventListener("mousedown",De):window.removeEventListener("mousedown",De),()=>{window.removeEventListener("mousedown",De)}},[z]),S.useEffect(()=>{s.state||window.location.pathname.startsWith("/sankeertan")},[s,t]),S.useEffect(()=>{const De=Be=>{ve.current&&!ve.current.contains(Be.target)&&he(!1)};return z&&document.addEventListener("mousedown",De),()=>{document.removeEventListener("mousedown",De)}},[z]);const K=()=>{const De=window.location.href;navigator.clipboard.writeText(De).then(()=>{console.log("URL copied to clipboard:",De),Zt.success("URL copied to clipboard!")}).catch(Be=>{console.error("Failed to copy URL: ",Be)})},de=S.useRef(null);function le(De){const $t=new DOMParser().parseFromString(De,"text/html").querySelectorAll("tr");let Ne="";return $t.forEach(yr=>{const Xn=yr.querySelectorAll("td, th"),Xr=[];Xn.forEach(Re=>{var Ga;let En=Re.innerHTML;En=En.replace(/<\/p>\s*<p>/gi,`
`),En=En.replace(/<p>|<\/p>/gi,""),En=En.replace(/<br\s*\/?>/gi,`
`);const vr=document.createElement("div");vr.innerHTML=En;const Nr=((Ga=vr.textContent)==null?void 0:Ga.trim())||"";Xr.push(Nr)}),Ne+=Xr.join(" | ")+`

`}),Ne.trim()}const xe=()=>{if(!se||se.collapsed){console.warn("No valid selection range to highlight.");return}const De=document.createElement("span");De.className="highlighted-text";try{se.surroundContents(De),console.log("Text highlighted successfully!")}catch(Be){console.error("Failed to highlight text:",Be)}ye(null)},Fe=()=>{if(!de.current)return"";const De=de.current.innerHTML;return De.includes("<table")?le(De):de.current.textContent||""},je=(De=!1)=>{if(de.current){const Be=de.current.innerHTML;let Tt="radhekrishna!!";De?Tt=Be:Be.includes("<table")?Tt=le(Be):Tt=de.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(Tt).then(()=>{console.log("Song content copied to clipboard:"),Zt.success("Song content copied to clipboard!")}).catch($t=>{console.error("Failed to copy song: ",$t)})}},me=()=>{if(l&&u!==void 0&&u<l.length-1){const De=u+1,Be=l[De];sessionStorage.setItem("lastClickedSongIndex",De.toString()),i(`/details/book/${e}/${t}/${Be.sourceRow}/${encodeURIComponent(Be.songTitle)}`,{state:{filteredSongIndices:l,index:De},replace:!0})}},Xe=()=>{if(l&&u!==void 0&&u>0){const De=u-1,Be=l[De];sessionStorage.setItem("lastClickedSongIndex",De.toString()),i(`/details/book/${e}/${t}/${Be.sourceRow}/${encodeURIComponent(Be.songTitle)}`,{state:{filteredSongIndices:l,index:De},replace:!0})}},Ye=u===0,qe=u===(l==null?void 0:l.length)-1,ct=l&&l.length>0,A=async De=>{if(ae){const Be=await fetch(`${wi}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${ae}&sessionuser=${De}`);if(!Be.ok){const $t=await Be.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${Be.status} - ${JSON.stringify($t)}`)}const Tt=await Be.json();Zt.success(`Issue/Mistake is reported as ${Tt[1]}!!`)}else console.log("No text was selected.")},ge=async()=>{t&&r?(await cD(t,f),Zt.success("Local cache cleared. Reloading from server..."),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:p})):console.warn("Cannot reload song: bookId or songTitle is missing.")},fe=async De=>{switch(he(!1),De){case"broadcast":r&&Le();break;case"copyPageUrl":K();break;case"CopySongAsHtml":je(!0);break;case"CopySongAsText":je(!1);break;case"ReportMistake":A(a);break;case"Copy":if(ae)try{await navigator.clipboard.writeText(ae),Zt.success("Text copied!")}catch(Be){console.error("Failed to copy text: ",Be),Zt.error("Failed to copy text.")}break;case"Highlight":xe();break}},M=S.useMemo(()=>k.jsx(jF.div,{ref:ve,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:N.y,left:N.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:De=>De.stopPropagation(),children:k.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:T?k.jsxs(k.Fragment,{children:[k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>fe("Copy"),children:"Copy Selected"}),k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>fe("ReportMistake"),children:"Report Mistake"})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[k.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),PC.map(De=>k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:De.code===m?"bold":"normal",backgroundColor:De.code===m?"#f0f0f0":"transparent"},onClick:()=>Ee(De),children:De.name},De.code))]})})})},"context-menu"),[T,N,m]),[L,X]=S.useState(!1),[_e,we]=S.useState(null),[oe,ke]=S.useState(!0),Le=S.useCallback(async()=>{if(L){console.warn("isBroadcasting already");return}if(!oe){Zt.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(de.current){X(!0),we("broadcasting");try{const De=de.current.innerHTML,Be=await _5(De);X(!1),we("success"),Zt.success("Broadcast was successful!"),ke(!1),setTimeout(()=>we(null),2e3)}catch(De){console.error("Broadcast failed:",De),Zt.error("Broadcast had errors!"),X(!1),we("error"),setTimeout(()=>we(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),we("failed"),X(!1)},[de,L,oe]);S.useEffect(()=>{ke(!0)},[F]),S.useEffect(()=>{F&&F.length>=3&&t&&f&&n&&(g(v,b),g(w,O))},[F,t,f,n,v,w,g]);const Ee=De=>{_(De.code),he(!1)},ze={backgroundColor:"green",color:"white"},tt={backgroundColor:"brown",color:"white"};if(I&&!F)return k.jsx("div",{style:x5,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if($)return k.jsxs("div",{children:["Error loading song details: ",$.message]});if(!F)return k.jsx("div",{children:"No song details available. Please try reloading."});const Ze=document.getElementById("context-menu-root");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:Z,children:[k.jsx(Hy,{}),k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[k.jsx("button",{onClick:Xe,disabled:Ye||!ct,style:{...gl,...Ye||!ct?yl:{},...y?ze:tt},children:" Prev"}),k.jsx("button",{onClick:me,disabled:qe||!ct,style:{...gl,...qe||!ct?yl:{},...C?ze:tt,marginRight:0},children:"Next "})]})]}),k.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:ee,children:[k.jsx("div",{ref:de,children:F&&k.jsx(tN,{data:F[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[0,1,2,3,4],maxWidth:"max-w-6xl",preferredLanguage:m,sourceLanguage:F[2]})}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[k.jsxs("div",{children:[k.jsx("button",{onClick:Xe,disabled:Ye||!ct,style:{...gl,...Ye||!ct?yl:{},...y?ze:tt},children:" Prev"}),k.jsx("button",{onClick:me,disabled:qe||!ct,style:{...gl,...qe||!ct?yl:{},...C?ze:tt,marginRight:0},children:"Next "})]}),k.jsxs("div",{children:[k.jsx("button",{onClick:()=>{const De=Fe();i(`/editor/book/${e}/${t}/${n}/${encodeURIComponent(r||"")}`,{state:{initialContent:De}})},style:{marginRight:"10px"},title:"Edit Song",children:""}),k.jsx("button",{onClick:ge,disabled:R,style:{marginRight:"10px",backgroundColor:R?"#ccc":"#f0f0f0",color:R?"#666":"inherit",cursor:R?"not-allowed":"pointer"},title:"Reload from Server (Clears local cache)",children:R?k.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[k.jsxs("svg",{className:"animate-spin",style:{width:"16px",height:"16px",marginRight:"5px"},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),k.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Reloading..."]}):""}),k.jsx("button",{onClick:K,style:{marginRight:"10px"},title:"Copy URL",children:""}),k.jsx("button",{onClick:()=>je(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),k.jsx("button",{onClick:Le,disabled:!oe,style:{...gl,...oe?{}:yl},title:"Broadcast",children:""})]})]}),k.jsx("style",{children:`
          .highlighted-text {
            background-color: #ffeb3b; /* Yellow background */
            padding: 2px 4px;
            border-radius: 4px;
          }
          .animate-spin {
            animation: spin 1s linear infinite;
          }
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `}),z&&Ze&&aA.createPortal(k.jsx(J$,{children:M}),Ze)]})]})}const E5=" || ",Nx=e=>!e||!Array.isArray(e)?"":e.map(t=>Array.isArray(t)?t.map(n=>n==null?"":String(n)).join(E5):"").join(`
`),Lx=()=>{const e=Yn(),t=Jn(),{categoryId:n,bookId:r,sourceRow:s,songTitle:i}=Ba(),{categories:o}=Df(),{session:a}=xi(),l=!r,[u,c]=S.useState(n||""),[f,p]=S.useState(r||""),[m,_]=S.useState(i?decodeURIComponent(i):""),[v,w]=S.useState(!1),[g,y]=S.useState(""),[b,C]=S.useState(null),[O,I]=S.useState(!1);S.useEffect(()=>{const N=e.state;if(N!=null&&N.initialContent){console.log("Using passed text content"),y(N.initialContent),w(!0);return}!l&&r&&i&&s&&R(r,decodeURIComponent(i),s)},[r,i,s,l,e.state]);const R=async(N,J,T)=>{var G;I(!0);try{const ve=await wS(N,J);if(ve&&ve.songData)C(ve.songData),y(Nx(ve.songData)),w(!0),Zt.success("Loaded from local cache");else if(T)try{const ae=await Wy({bookId:N,sourceRow:T,songTitle:J,sessionuser:(G=a==null?void 0:a.user)==null?void 0:G.email});ae&&ae[0]&&(C(ae[0]),y(Nx(ae[0])),w(!0),Zt.success("Loaded from server"))}catch(ae){console.error("Network fetch failed",ae),Zt.error("Failed to fetch song from server.")}else y(""),C(null),w(!0),Zt("Creating a new song",{icon:""})}catch(ve){console.error("Error loading song:",ve),Zt.error("Error loading song data.")}finally{I(!1)}},$=async()=>{if(!f||!m){Zt.error("Please select a book and enter a song title.");return}I(!0);try{let N;const J=await Rf(f);if(J){const T=J.find(G=>G.songTitle.toLowerCase()===m.toLowerCase());T&&(N=T.sourceRow.toString())}await R(f,m,N)}catch(N){console.error(N),Zt.error("Failed to initialize editor."),I(!1)}},F=async()=>{var N;try{const J=g;console.log("--------------------------------------------------"),console.log("SUBMITTING EDITED CONTENT (RAW TEXT):"),console.log("Book:",f),console.log("Song:",m),console.log(J),console.log("--------------------------------------------------"),await AD({bookId:f,songTitle:m,text:J,sessionuser:(N=a==null?void 0:a.user)==null?void 0:N.email}),Zt.success("Content saved successfully!"),l||t(-1)}catch(J){console.error("Error saving content:",J),Zt.error("Failed to save content.")}},z=()=>{l?(w(!1),C(null),y("")):t(-1)},he=()=>{const N=o==null?void 0:o.find(T=>T.id===u||T.name===u),J=(N==null?void 0:N.books)||[];return k.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[k.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Song Editor"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Category"}),k.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",value:u,onChange:T=>{c(T.target.value),p("")},children:[k.jsx("option",{value:"",children:"-- Select Category --"}),o==null?void 0:o.map(T=>k.jsx("option",{value:T.id||T.name,children:T.name},T.id||T.name))]})]}),k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Book"}),k.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",value:f,onChange:T=>p(T.target.value),disabled:!u,children:[k.jsx("option",{value:"",children:"-- Select Book --"}),J.map(T=>k.jsx("option",{value:T.bookId,children:T.bookName},T.bookId))]})]}),k.jsxs("div",{className:"mb-6",children:[k.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Song Title"}),k.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter exact song title",value:m,onChange:T=>_(T.target.value)}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter an existing title to edit, or a new one to create."})]}),k.jsx("button",{onClick:$,disabled:!f||!m||O,className:`w-full py-2 px-4 rounded text-white font-bold transition-colors ${!f||!m||O?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:O?"Loading...":"Start Editing"})]})};return v?k.jsxs("div",{className:"p-4 h-screen flex flex-col bg-gray-50",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("div",{children:[k.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[b?"Edit Song":"Create Song",": ",m]}),k.jsxs("p",{className:"text-sm text-gray-600",children:["Book: ",f]})]}),k.jsxs("div",{className:"space-x-2",children:[k.jsx("button",{onClick:z,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:l?"Back":"Cancel"}),k.jsx("button",{onClick:F,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Submit Changes"})]})]}),k.jsxs("div",{className:"flex-grow flex flex-col",children:[k.jsxs("div",{className:"bg-blue-50 p-3 mb-2 rounded text-sm text-blue-800 border border-blue-200",children:[k.jsx("strong",{children:"Instructions:"})," Edit the text below. Use ",k.jsx("code",{children:" || "})," (space-pipe-pipe-space) to separate columns. Each line represents a new row."]}),k.jsx("textarea",{value:g,onChange:N=>y(N.target.value),className:"flex-grow w-full p-4 font-mono text-base border border-gray-300 rounded shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",spellCheck:!1,placeholder:"Start typing song content here..."})]})]}):k.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:he()})},C5=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:s,onConnectionStatusChange:i})=>{const o=S.useRef(n);S.useEffect(()=>{o.current=n},[n]);const a=S.useRef(null);return S.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, Listener skipping subscription setup."),i("DISCONNECTED");return}return a.current&&(zt.removeChannel(a.current),a.current=null),i("CONNECTING"),a.current=zt.channel(`broadcast:${e}`),a.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},l=>{l.new&&"content"in l.new&&r(l.new.content),l.new&&"scroll_position"in l.new&&l.new.scroll_position!==null&&o.current&&s(l.new.scroll_position)}).subscribe((l,u)=>{switch(l){case"SUBSCRIBED":i("CONNECTED");break;case"CHANNEL_ERROR":case"TIMED_OUT":case"CLOSED":i(l==="CLOSED"?"DISCONNECTED":"ERROR"),console.error(`Subscription issue for broadcast ${e}:`,u||l);break;case"CONNECTING":i("CONNECTING");break}}),()=>{a.current&&(zt.removeChannel(a.current),a.current=null)}},[e,t==null?void 0:t.access_token,r,s,i]),null},T5=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}},P5=({broadcastId:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(null),i=S.useRef(null),[o,a]=S.useState(null),[l,u]=S.useState(!1),[c,f]=S.useState(!0),[p,m]=S.useState(!1),[_,v]=S.useState(null),[w,g]=S.useState("none"),[y,b]=S.useState(!1),[C,O]=S.useState("CONNECTING"),{preferredLanguage:I}=bo(),R=S.useCallback(G=>{O(G),console.log(`Realtime Connection Status Updated: ${G}`)},[]),$=S.useCallback(G=>{const ae=Ra(G??"","devanagari",I);n(ae)},[I]),F=S.useCallback(G=>{l&&G!==null&&s(`trRowAsAnchor-${G}`)},[l]);S.useEffect(()=>{zt.auth.getSession().then(({data:{session:ve}})=>{a(ve)});const{data:G}=zt.auth.onAuthStateChange((ve,ae)=>{a(ae)});return()=>{G.subscription.unsubscribe()}},[]);const z=S.useCallback(async()=>{p||f(!0),v(null);try{const{data:G,error:ve}=await zt.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(ve)console.error("Error fetching broadcast data:",ve),v(ve.message);else if(G){const ae=G.content??"";let ce=Ra(ae,"devanagari",I);n(ce),b(G.is_broadcasting_scroll??!1),m(!0)}}finally{f(!1)}},[e,I,p]);S.useEffect(()=>{o&&e&&!p&&z()},[o,e,z,p]),S.useEffect(()=>{if(r&&i.current){const G=r,ve=i.current.querySelector(`#${G}`);ve&&ve.scrollIntoView({block:"start",behavior:"smooth"}),s(null)}},[r,i]);const he=S.useCallback(async G=>{if(w==="leader"&&y){const{error:ve}=await zt.from("sankeertan").update({scroll_position:G}).eq("id",e);ve&&console.error("Error broadcasting scroll position:",ve)}},[w,y,e]);S.useEffect(()=>{if(w!=="leader"||!y||!i.current)return;const G=i.current,ve=T5(he,200),ae=G.querySelectorAll("tr[id^='trRowAsAnchor-']"),ce=new Set;let se=null;const ye=K=>{K.forEach(Fe=>{Fe.isIntersecting?ce.add(Fe.target):ce.delete(Fe.target)});let de=null,le=1/0;const xe=G.getBoundingClientRect().top;if(ce.forEach(Fe=>{if(typeof Fe.id!="string"||Fe.id==="")return;const me=Fe.getBoundingClientRect().top-xe;me>=0&&me<le&&(le=me,de=Fe.id)}),de){const je=de.split("-").pop();if(je){const me=parseInt(je);de!==se&&(se=de,ve(me))}}},Z={root:G,rootMargin:"0px",threshold:.1},ee=new IntersectionObserver(ye,Z);return ae.forEach(K=>{ee.observe(K)}),()=>{ee.disconnect()}},[w,y,he]);const N=async()=>{const G=!y,{error:ve}=await zt.from("sankeertan").update({is_broadcasting_scroll:G}).eq("id",e);ve?console.error("Failed to update broadcast scroll status:",ve):b(G)},J=G=>{G==="none"&&(b(!1),u(!1)),g(G),G==="follower"&&u(!0)},T=G=>{switch(G){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[k.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:i,children:[k.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",k.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:T(C),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${C}`}),k.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",C,")"]})]}),c&&!p?k.jsx("p",{children:"Loading content..."}):_?k.jsxs("p",{style:{color:"red"},children:["Error loading data: ",_]}):t&&k.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&w==="follower"&&k.jsx(C5,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:$,onScrollPositionUpdated:F,onConnectionStatusChange:R}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[k.jsx("button",{onClick:()=>J(w==="leader"?"none":"leader"),style:{backgroundColor:w==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:w==="leader"?"Disengage (Leader)":"Become a Leader"}),w==="none"&&k.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),w==="leader"&&k.jsx("button",{onClick:N,style:{backgroundColor:y?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:y?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),k.jsx("button",{onClick:()=>J(w==="follower"?"none":"follower"),style:{backgroundColor:w==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:w==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})},Hc=Lt(),$x=(e,t)=>`${e.trim()}|${t.trim()}`;async function A5(){var u,c;console.log("[Dexie Load] Preparing availability check set...");const e=await Hc.songDetails.toCollection().primaryKeys(),t=new Set;for(const[f,p]of e)t.add($x(f,p));console.log(`[Dexie Load] Found ${t.size} available SongDetails.`);const n=await Hc.songIndices.toArray();let r=await Hc.categories.toArray();r.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(f=>setTimeout(f,500)),r=await Hc.categories.toArray(),r.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const s=new Map,i=new Map;for(const f of r){const p=(u=f.id)==null?void 0:u.trim();if(p&&i.set(p,f),Array.isArray(f.books))for(const m of f.books){const _=(c=m.bookId)==null?void 0:c.trim();if(_){let v=s.get(_);if(v){const w=Array.isArray(v.categoryId)?v.categoryId:v.categoryId?[v.categoryId]:[];p&&!w.includes(p)&&(v.categoryId=[...w,p])}else v={...m,bookId:_,bookName:m.bookName||"Unknown Book",categoryId:p?[p]:[],author:m.author||f.author,language:m.language||f.language,type:m.type||f.type,raagam:m.raagam||f.raagam,taaLam:m.taaLam||f.taaLam},s.set(_,v)}}}console.log("Book Map Keys (Flattened):",Array.from(s.keys()).length),console.log("Category Map Keys:",Array.from(i.keys()).length);const o=n.map((f,p)=>{var he,N;const m=(he=f.bookId)==null?void 0:he.trim(),_=(N=f.songTitle)==null?void 0:N.trim(),v=s.get(m);let w=[],g=[];if(v&&v.categoryId){const J=Array.isArray(v.categoryId)?v.categoryId:[v.categoryId];g=J,w=J.map(T=>{var G;return((G=i.get(T))==null?void 0:G.name)||"Unknown Category"})}else w=["Unknown Category"],g=["unknown-category"];v||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${f.songTitle} | Index Book ID: '${m}'`);let y=!1;if(m&&_){const J=$x(m,_);y=t.has(J)}const b=(v==null?void 0:v.bookName)||"Unknown Book",C=g.length>0?i.get(g[0]):void 0,O=f.author||(v==null?void 0:v.author)||(C==null?void 0:C.author)||"Unknown Author",I=f.sourceLanguage||(v==null?void 0:v.language)||(C==null?void 0:C.language)||"Unknown Language",R=f.type||(v==null?void 0:v.type)||(C==null?void 0:C.type)||"Unknown Type",$=f.raagam||(v==null?void 0:v.raagam)||(C==null?void 0:C.raagam)||"Unknown Type",F=f.taaLam||(v==null?void 0:v.taaLam)||(C==null?void 0:C.taaLam)||"Unknown Type";return{uniqueSongId:`${f.bookId}-${f.songTitle}`,indexPositionForNavigation:p,isAvailable:y,bookId:f.bookId,categoryId:g,title:f.songTitle,sourceRow:f.sourceRow,tags:f.tags||null,verseCount:f.verseCount||null,category:w,book:b,author:O,language:I,type:R,raagam:$,taaLam:F,link:f.link}}),a=new Map;for(const f of o){const p=`${f.title.toLowerCase().trim()}|${f.author.toLowerCase().trim()}`;if(a.has(p)){const m=a.get(p),_=(v,w)=>{const g=Array.isArray(v)?v:[v],y=Array.isArray(w)?w:[w];return Array.from(new Set([...g,...y]))};m.book=_(m.book,f.book),m.bookId=_(m.bookId,f.bookId),m.category=_(m.category,f.category),m.categoryId=_(m.categoryId,f.categoryId)}else a.set(p,f)}const l=Array.from(a.values());return console.log(`[Dexie Load] Deduplicated ${o.length} raw songs into ${l.length} unique songs.`),l}const j5=["searchIndex","allSongs"],O5=()=>Of({queryKey:j5,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await A5();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,networkMode:"always",refetchOnWindowFocus:!1}),R5=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const s=t[r];if(s&&s.length>0){const i=s.map(o=>o.value.toLowerCase());n=n.filter(o=>{const a=o[r];return(Array.isArray(a)?a.map(u=>String(u).toLowerCase()):[String(a).toLowerCase()]).some(u=>i.includes(u))})}}),n},I5=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>{const s=i=>Array.isArray(i)?i.some(o=>String(o).toLowerCase().includes(n)):String(i).toLowerCase().includes(n);return s(r.title)||s(r.author)||s(r.book)||s(r.category)}):e},vl=(e,t)=>{const n=new Set;return e.forEach(r=>{const s=r[t];Array.isArray(s)?s.forEach(i=>{typeof i=="string"&&n.add(i)}):typeof s=="string"&&n.add(s)}),Array.from(n).sort()},D5=()=>{const[e,t]=S.useState(""),[n,r]=S.useState({}),[s,i]=S.useState([]),[o,a]=S.useState([]),[l,u]=S.useState("cards"),[c,f]=S.useState(!1),p=Jn(),m=30,[_,v]=S.useState({category:!0,book:!0,title:!0,author:!0,language:!0,raagam:!0}),{preferredLanguage:w}=bo(),g=(K,de="itrans")=>{const le=Array.isArray(K)?K.join(", "):K;return Ra(le,de,w)},{data:y,isLoading:b,isError:C,error:O}=O5(),I=S.useMemo(()=>y||[],[y]);S.useEffect(()=>{if(I.length===0){i([]),a([]);return}let K=R5(I,n),de=I5(K,e);i(de),f(!1);const le=de.map(xe=>({indexPositionForNavigation:xe.indexPositionForNavigation,sourceRow:String(xe.sourceRow),bookId:Array.isArray(xe.bookId)?xe.bookId[0]:xe.bookId,songTitle:Array.isArray(xe.title)?xe.title.join(", "):xe.title}));a(le)},[I,n,e]);const R=(K,de)=>{r(le=>{const xe=le[K]||[],Fe=xe.find(je=>je.value===de);if(Fe)if(Fe.isNot){const je=xe.filter(me=>me.value!==de);if(je.length===0){const me={...le};return delete me[K],me}return{...le,[K]:je}}else return{...le,[K]:xe.map(je=>je.value===de?{...je,isNot:!0}:je)};else return{...le,[K]:[...xe,{value:de,isNot:!1}]}})},$=()=>{r({})},F=(K,de)=>{if(K.type==="link"&&K.link)try{const me=JSON.parse(K.link),Xe=me.bookId,Ye=me.categoryId;if(Xe&&Ye){p(`/book/${Ye}/${Xe}`);return}}catch(me){console.error("Failed to parse link data for song:",K.title,me)}const le=Array.isArray(K.title)?K.title.join(", "):K.title,xe=Array.isArray(K.categoryId)?K.categoryId[0]:K.categoryId,Fe=Array.isArray(K.bookId)?K.bookId[0]:K.bookId,je=K.sourceRow;p(`/details/book/${xe}/${Fe}/${je}/${encodeURIComponent(le)}`,{state:{filteredSongIndices:o,index:de}})},z=K=>{v(de=>({...de,[K]:!de[K]}))},he=vl(s,"author"),N=vl(s,"language"),J=vl(s,"raagam"),T=vl(s,"book"),G=vl(s,"category"),ve={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set,raagam:new Set};e.length>0&&I.forEach(K=>{Object.entries(K).forEach(([de,le])=>{var xe;Array.isArray(le)?le.forEach(Fe=>{var je;typeof Fe=="string"&&Fe.toLowerCase().includes(e.toLowerCase())&&((je=ve[de])==null||je.add(Fe))}):typeof le=="string"&&le.toLowerCase().includes(e.toLowerCase())&&((xe=ve[de])==null||xe.add(le))})});const ae=(K,de)=>s.filter(le=>{const xe=le[K];return Array.isArray(xe)?xe.includes(de):xe===de}).length,ce=(K,de)=>{var xe;const le=(xe=n[K])==null?void 0:xe.find(Fe=>Fe.value===de);return le?le.isNot?"bg-red-500 text-white":"bg-[#3498db] text-white":"hover:bg-gray-100 text-gray-700"};if(b)return k.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500 bg-[#f5f7fa]",children:"Loading search index..."});if(C)return k.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50 m-4 rounded-lg",children:["Error loading search index: ",(O==null?void 0:O.message)||"Unknown error."]});const se=K=>`${Array.isArray(K.bookId)?K.bookId.join("-"):K.bookId}-${K.title}`,ye=K=>Array.isArray(K)?K.join(", "):K,Z="bg-white rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.08)] border border-[#eaeaea] transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_8px_25px_rgba(0,0,0,0.15)]";return k.jsx("div",{className:"min-h-screen bg-[#f5f7fa] p-4 font-sans flex flex-col items-center",children:k.jsxs("div",{className:"w-full max-w-[1400px] bg-[#f5f7fa] p-2 md:p-4",children:[k.jsx("div",{className:"text-2xl font-bold text-[#2c3e50] border-b-2 border-[#eaeaea] pb-4 mb-6 flex justify-between items-center",children:k.jsx("span",{children:"Search Songs"})}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-4 rounded-xl bg-white text-lg text-[#2c3e50] placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#3498db] shadow-sm border border-gray-200 transition-all",value:e,onChange:K=>t(K.target.value)}),e&&Object.values(ve).some(K=>K.size>0)&&k.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-xl shadow-xl border border-gray-200 max-h-64 overflow-y-auto",children:Object.entries(ve).map(([K,de])=>de&&de.size>0&&k.jsxs("div",{className:"p-3 border-b border-gray-100 last:border-0",children:[k.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-2 tracking-wider ml-2",children:K}),Array.from(de).map((le,xe)=>k.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-[#f0f9ff] hover:text-[#3498db] text-gray-700 transition-colors",onClick:()=>{t(""),R(K,le)},children:le},xe))]},K))})]}),Object.keys(n).some(K=>{const de=n[K];return de&&de.length>0})&&k.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[k.jsx("span",{className:"text-sm font-semibold text-gray-500 mr-2",children:"Active Filters:"}),Object.entries(n).map(([K,de])=>de==null?void 0:de.map((le,xe)=>k.jsxs("span",{className:`${le.isNot?"bg-red-500":"bg-[#3498db]"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-2 shadow-sm`,children:[k.jsxs("span",{className:"font-medium opacity-90 capitalize",children:[K,":"]}),k.jsx("span",{className:"font-bold",children:le.value}),k.jsx("button",{onClick:()=>R(K,le.value),className:"ml-1 hover:text-gray-200 transition-colors font-bold",children:""})]},`${K}-${xe}`))),k.jsx("button",{onClick:$,className:"text-sm text-[#3498db] hover:text-[#2980b9] font-semibold transition-colors ml-auto px-3 py-1",children:"Clear All"})]}),k.jsx("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[{key:"category",label:"Category",data:G},{key:"book",label:"Book",data:T},{key:"author",label:"Author",data:he},{key:"language",label:"Language",data:N},{key:"raagam",label:"Raagam",data:J}].map(({key:K,label:de,data:le})=>k.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[k.jsxs("button",{onClick:()=>z(K),className:"w-full text-left px-4 py-3 text-sm font-bold text-[#2c3e50] flex justify-between items-center hover:bg-gray-50 transition-colors bg-gray-50/50",children:[de,k.jsx("span",{className:`transform transition-transform duration-300 text-gray-400 ${_[K]?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${_[K]?"max-h-0":"max-h-64 overflow-y-auto custom-scrollbar"}`,children:k.jsx("div",{className:"p-2",children:le.map(xe=>k.jsxs("button",{onClick:()=>R(K,xe),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors text-sm mb-1 ${ce(K,xe)}`,children:[k.jsx("span",{className:"truncate mr-2",children:xe}),k.jsx("span",{className:"text-xs font-medium bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:ae(K,xe)})]},xe))})})]},K))}),k.jsx("div",{className:"mt-4",children:!e.trim()&&!Object.values(n).some(K=>K&&K.length>0)?k.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[k.jsx("div",{className:"text-6xl mb-4 opacity-20",children:""}),k.jsx("p",{className:"text-xl text-gray-400 font-semibold",children:"Ready to Search"}),k.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter a keyword or select a filter to find songs."})]}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsxs("h2",{className:"text-xl font-bold text-[#2c3e50]",children:["Results ",k.jsxs("span",{className:"text-gray-400 text-lg font-normal ml-2",children:["(",s.length,")"]})]}),k.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:[k.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="cards"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Cards"}),k.jsx("button",{onClick:()=>u("grid"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="grid"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"List"})]})]}),s.length===0?k.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[k.jsx("p",{className:"text-gray-400 text-lg",children:"No songs match your search."}),k.jsx("button",{onClick:$,className:"mt-4 text-[#3498db] font-semibold hover:underline",children:"Clear filters"})]}):k.jsx(k.Fragment,{children:!c&&s.length>m?k.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200 shadow-sm",children:[k.jsxs("p",{className:"text-lg text-gray-600 mb-2",children:["Found ",k.jsx("span",{className:"font-bold text-[#2c3e50]",children:s.length})," matches."]}),k.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"Refine your search or view all results."}),k.jsx("button",{onClick:()=>f(!0),className:"px-8 py-3 bg-[#3498db] hover:bg-[#2980b9] text-white rounded-full font-bold shadow-lg shadow-blue-200 transition-transform transform hover:scale-105",children:"Show All Results"})]}):k.jsx(k.Fragment,{children:l==="cards"?k.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map((K,de)=>{const le=se(K);return k.jsxs("div",{onClick:()=>F(K,de),className:`${Z} p-5 cursor-pointer relative overflow-hidden group`,children:[k.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${K.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),k.jsxs("div",{className:"pl-3",children:[k.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-3 leading-tight group-hover:text-[#3498db] transition-colors",children:g(K.title,K.language)}),k.jsxs("div",{className:"space-y-1.5",children:[k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Author"}),k.jsx("span",{className:"text-gray-700 font-medium",children:K.author})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Raagam"}),k.jsx("span",{className:"text-gray-700",children:K.raagam||"-"})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Taalam"}),k.jsx("span",{className:"text-gray-700",children:K.taaLam||"-"})]}),k.jsxs("div",{className:"flex items-start text-sm",children:[k.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Book"}),k.jsx("span",{className:"text-gray-600 truncate",title:Array.isArray(K.book)?K.book.join(", "):K.book,children:ye(K.book)})]})]})]})]},le)})}):k.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-left border-collapse",children:[k.jsx("thead",{children:k.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold",children:[k.jsx("th",{className:"p-4",children:"Title"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Author"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Raagam"}),k.jsx("th",{className:"p-4 hidden md:table-cell",children:"Taalam"}),k.jsx("th",{className:"p-4 hidden lg:table-cell",children:"Book"}),k.jsx("th",{className:"p-4 hidden xl:table-cell",children:"Category"})]})}),k.jsx("tbody",{className:"text-sm text-[#2c3e50]",children:s.map((K,de)=>{const le=se(K);return k.jsxs("tr",{onClick:()=>F(K,de),className:"border-b border-gray-100 hover:bg-blue-50/50 cursor-pointer transition-colors last:border-0",children:[k.jsxs("td",{className:"p-4 font-bold group",children:[k.jsxs("div",{className:"flex items-center",children:[k.jsx("div",{className:`w-1.5 h-8 rounded-full mr-3 ${K.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),k.jsx("span",{className:"group-hover:text-[#3498db] transition-colors",children:g(K.title,K.language)})]}),k.jsxs("div",{className:"md:hidden mt-1 ml-4 text-xs text-gray-500 space-y-0.5",children:[k.jsx("div",{children:K.author}),k.jsx("div",{children:K.raagam})]})]}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.author}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.raagam||"-"}),k.jsx("td",{className:"p-4 hidden md:table-cell",children:K.taaLam||"-"}),k.jsx("td",{className:"p-4 hidden lg:table-cell text-gray-600",children:k.jsx("div",{className:"truncate max-w-xs",title:Array.isArray(K.book)?K.book.join(", "):K.book,children:ye(K.book)})}),k.jsx("td",{className:"p-4 hidden xl:table-cell text-gray-600",children:k.jsx("div",{className:"truncate max-w-xs",children:ye(K.category)})})]},le)})})]})})})})})]})})]})})},N5="thodaya-mangalam",L5=()=>{const[e,t]=S.useState(""),n=async()=>{t("Exporting...");try{const r=await gD(N5);if(!r){t("No data found for this book or download failed.");return}const s=r.songDetails.map(u=>u),i=r.songIndices.map(u=>{const{indexId:c,timestamp:f,...p}=u;return p}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:f,...p}=u;return p}),a={bookId:r.bookId,songIndices:i,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return k.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[k.jsx("div",{style:{marginTop:"20px"},children:k.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&k.jsxs("div",{style:{marginTop:"15px"},children:[k.jsx("h4",{children:"Exported JSON Structure:"}),k.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},$5=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],M5=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:s,isDownloading:i,startBulkDownload:o}=RS(e.bookId,t),a=()=>i?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${s} `:"Ready to Download";return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[k.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:i?"orange":n==="success"?"green":"gray"},children:a()}),k.jsx("button",{onClick:o,disabled:i,style:{padding:"5px 10px",backgroundColor:i?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:i?"Processing":"Bulk Download"})]})]})},F5=()=>{const e="test@example.com";return k.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[k.jsx("h2",{children:"Offline Content Manager"}),k.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),k.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:$5.map(t=>k.jsx(M5,{book:t,userEmail:e},t.bookId))})]})};function qc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var AC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function o(u,c){if(!s[u]){if(!r[u]){var f=typeof qc=="function"&&qc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=s[u]={exports:{}};r[u][0].call(m.exports,function(_){var v=r[u][1][_];return o(v||_)},m,m.exports,n,r,s,i)}return s[u].exports}for(var a=typeof qc=="function"&&qc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,c,f,p,m,_,v,w=[],g=0,y=l.length,b=y,C=i.getTypeOf(l)!=="string";g<l.length;)b=y-g,f=C?(u=l[g++],c=g<y?l[g++]:0,g<y?l[g++]:0):(u=l.charCodeAt(g++),c=g<y?l.charCodeAt(g++):0,g<y?l.charCodeAt(g++):0),p=u>>2,m=(3&u)<<4|c>>4,_=1<b?(15&c)<<2|f>>6:64,v=2<b?63&f:64,w.push(a.charAt(p)+a.charAt(m)+a.charAt(_)+a.charAt(v));return w.join("")},s.decode=function(l){var u,c,f,p,m,_,v=0,w=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&b--,l.charAt(l.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|b):new Array(0|b);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(p=a.indexOf(l.charAt(v++)))>>4,c=(15&p)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(_=a.indexOf(l.charAt(v++))),y[w++]=u,m!==64&&(y[w++]=c),_!==64&&(y[w++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,f,p,m,_){this.compressedSize=c,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=_}u.prototype={getContentWorker:function(){var c=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,p){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,c,f,p){var m=o,_=p+f;u^=-1;for(var v=p;v<_;v++)u=u>>>8^m[255&(u^c[v])];return-1^u}(0|l,a,a.length,0):function(u,c,f,p){var m=o,_=p+f;u^=-1;for(var v=p;v<_;v++)u=u>>>8^m[255&(u^c.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function c(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new c("Deflate",f)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(m,_){var v,w="";for(v=0;v<_;v++)w+=String.fromCharCode(255&m),m>>>=8;return w}function o(m,_,v,w,g,y){var b,C,O=m.file,I=m.compression,R=y!==u.utf8encode,$=a.transformTo("string",y(O.name)),F=a.transformTo("string",u.utf8encode(O.name)),z=O.comment,he=a.transformTo("string",y(z)),N=a.transformTo("string",u.utf8encode(z)),J=F.length!==O.name.length,T=N.length!==z.length,G="",ve="",ae="",ce=O.dir,se=O.date,ye={crc32:0,compressedSize:0,uncompressedSize:0};_&&!v||(ye.crc32=m.crc32,ye.compressedSize=m.compressedSize,ye.uncompressedSize=m.uncompressedSize);var Z=0;_&&(Z|=8),R||!J&&!T||(Z|=2048);var ee=0,K=0;ce&&(ee|=16),g==="UNIX"?(K=798,ee|=function(le,xe){var Fe=le;return le||(Fe=xe?16893:33204),(65535&Fe)<<16}(O.unixPermissions,ce)):(K=20,ee|=function(le){return 63&(le||0)}(O.dosPermissions)),b=se.getUTCHours(),b<<=6,b|=se.getUTCMinutes(),b<<=5,b|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),J&&(ve=i(1,1)+i(c($),4)+F,G+="up"+i(ve.length,2)+ve),T&&(ae=i(1,1)+i(c(he),4)+N,G+="uc"+i(ae.length,2)+ae);var de="";return de+=`
\0`,de+=i(Z,2),de+=I.magic,de+=i(b,2),de+=i(C,2),de+=i(ye.crc32,4),de+=i(ye.compressedSize,4),de+=i(ye.uncompressedSize,4),de+=i($.length,2),de+=i(G.length,2),{fileRecord:f.LOCAL_FILE_HEADER+de+$+G,dirRecord:f.CENTRAL_FILE_HEADER+i(K,2)+de+i(he.length,2)+"\0\0\0\0"+i(ee,4)+i(w,4)+$+G+he}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),f=n("../signature");function p(m,_,v,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var _=m.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(_+100*(v-w-1))/v:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var v=o(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,v=o(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),_)this.push({data:function(w){return f.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var v=this.bytesWritten-m,w=function(g,y,b,C,O){var I=a.transformTo("string",O(C));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(y,4)+i(b,4)+i(I.length,2)+I}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(v){_.processChunk(v)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(v){_.error(v)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var _=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<_.length;v++)try{_[v].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var _=function(y,b){var C=y||b,O=i[C];if(!O)throw new Error(C+" is not a valid compression method !");return O}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},w=m.dir,g=m.date;m._compressWorker(_,v).withStreamInfo("file",{name:p,dir:w,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(p){return new o.Promise(function(m,_){var v=p.decompressed.getContentWorker().pipe(new u);v.on("error",function(w){_(w)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var _=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(v){var w=new l(m);return w.load(v),w}).then(function(v){var w=[o.Promise.resolve(v)],g=v.files;if(m.checkCRC32)for(var y=0;y<g.length;y++)w.push(f(g[y]));return o.Promise.all(w)}).then(function(v){for(var w=v.shift(),g=w.files,y=0;y<g.length;y++){var b=g[y],C=b.fileNameStr,O=i.resolve(b.fileNameStr);_.file(O,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:m.createFolders}),b.dir||(_.file(O).unsafeOriginalName=C)}return w.zipComment.length&&(_.comment=w.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,u){i.call(this,l),this._helper=a;var c=this;a.on("data",function(f,p){c.push(f)||c._helper.pause(),u&&u(p)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(O,I,R){var $,F=a.getTypeOf(I),z=a.extend(R||{},c);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(O=g(O)),z.createFolders&&($=w(O))&&y.call(this,$,!0);var he=F==="string"&&z.binary===!1&&z.base64===!1;R&&R.binary!==void 0||(z.binary=!he),(I instanceof f&&I.uncompressedSize===0||z.dir||!I||I.length===0)&&(z.base64=!1,z.binary=!0,I="",z.compression="STORE",F="string");var N=null;N=I instanceof f||I instanceof l?I:_.isNode&&_.isStream(I)?new v(O,I):a.prepareContent(O,I,z.binary,z.optimizedBinaryString,z.base64);var J=new p(O,N,z);this.files[O]=J}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),w=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var I=O.lastIndexOf("/");return 0<I?O.substring(0,I):""},g=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},y=function(O,I){return I=I!==void 0?I:c.createFolders,O=g(O),this.files[O]||i.call(this,O,null,{dir:!0,createFolders:I}),this.files[O]};function b(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var I,R,$;for(I in this.files)$=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&O(R,$)},filter:function(O){var I=[];return this.forEach(function(R,$){O(R,$)&&I.push($)}),I},file:function(O,I,R){if(arguments.length!==1)return O=this.root+O,i.call(this,O,I,R),this;if(b(O)){var $=O;return this.filter(function(z,he){return!he.dir&&$.test(z)})}var F=this.files[this.root+O];return F&&!F.dir?F:null},folder:function(O){if(!O)return this;if(b(O))return this.filter(function(F,z){return z.dir&&O.test(F)});var I=this.root+O,R=y.call(this,I),$=this.clone();return $.root=R.name,$},remove:function(O){O=this.root+O;var I=this.files[O];if(I||(O.slice(-1)!=="/"&&(O+="/"),I=this.files[O]),I&&!I.dir)delete this.files[O];else for(var R=this.filter(function(F,z){return z.name.slice(0,O.length)===O}),$=0;$<R.length;$++)delete this.files[R[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var I,R={};try{if((R=a.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var $=R.comment||this.comment||"";I=m.generateWorker(this,R,$)}catch(F){(I=new l("error")).error(F)}return new u(I,R.type||"string",R.mimeType)},generateAsync:function(O,I){return this.generateInternalStream(O).accumulate(I)},generateNodeStream:function(O,I){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===c&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&c===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new c(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=i.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(_,v){return new c.Promise(function(w,g){var y=[],b=_._internalType,C=_._outputType,O=_._mimeType;_.on("data",function(I,R){y.push(I),v&&v(R)}).on("error",function(I){y=[],g(I)}).on("end",function(){try{var I=function(R,$,F){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",$),F);case"base64":return l.encode($);default:return i.transformTo(R,$)}}(C,function(R,$){var F,z=0,he=null,N=0;for(F=0;F<$.length;F++)N+=$[F].length;switch(R){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(he=new Uint8Array(N),F=0;F<$.length;F++)he.set($[F],z),z+=$[F].length;return he;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+R+"'")}}(b,y),O);w(I)}catch(R){g(R)}y=[]}).resume()})}function m(_,v,w){var g=v;switch(v){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=v,this._mimeType=w,i.checkSupport(g),this._worker=_.pipe(new o(g)),_.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(_){return p(this,_)},on:function(_,v){var w=this;return _==="data"?this._worker.on(_,function(g){v.call(w,g.data,g.meta)}):this._worker.on(_,function(){i.delay(v,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}s.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(_){var v,w,g,y,b,C=_.length,O=0;for(y=0;y<C;y++)(64512&(w=_.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=_.charCodeAt(y+1)))==56320&&(w=65536+(w-55296<<10)+(g-56320),y++),O+=w<128?1:w<2048?2:w<65536?3:4;for(v=o.uint8array?new Uint8Array(O):new Array(O),y=b=0;b<O;y++)(64512&(w=_.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=_.charCodeAt(y+1)))==56320&&(w=65536+(w-55296<<10)+(g-56320),y++),w<128?v[b++]=w:(w<2048?v[b++]=192|w>>>6:(w<65536?v[b++]=224|w>>>12:(v[b++]=240|w>>>18,v[b++]=128|w>>>12&63),v[b++]=128|w>>>6&63),v[b++]=128|63&w);return v}(m)},s.utf8decode=function(m){return o.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(_){var v,w,g,y,b=_.length,C=new Array(2*b);for(v=w=0;v<b;)if((g=_[v++])<128)C[w++]=g;else if(4<(y=u[g]))C[w++]=65533,v+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&v<b;)g=g<<6|63&_[v++],y--;1<y?C[w++]=65533:g<65536?C[w++]=g:(g-=65536,C[w++]=55296|g>>10&1023,C[w++]=56320|1023&g)}return C.length!==w&&(C.subarray?C=C.subarray(0,w):C.length=w),i.applyFromCharCode(C)}(m=i.transformTo(o.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var _=i.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=_;(_=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),_.set(v,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var w=function(y,b){var C;for((b=b||y.length)>y.length&&(b=y.length),C=b-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?b:C+u[y[C]]>b?C:b}(_),g=_;w!==_.length&&(o.uint8array?(g=_.subarray(0,w),this.leftOver=_.subarray(w,_.length)):(g=_.slice(0,w),this.leftOver=_.slice(w,_.length))),this.push({data:s.utf8decode(g),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:s.utf8encode(m.data),meta:m.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function c(v,w){for(var g=0;g<v.length;++g)w[g]=255&v.charCodeAt(g);return w}n("setimmediate"),s.newBlob=function(v,w){s.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(v),g.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,w,g){var y=[],b=0,C=v.length;if(C<=g)return String.fromCharCode.apply(null,v);for(;b<C;)w==="array"||w==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(b,Math.min(b+g,C)))):y.push(String.fromCharCode.apply(null,v.subarray(b,Math.min(b+g,C)))),b+=g;return y.join("")},stringifyByChar:function(v){for(var w="",g=0;g<v.length;g++)w+=String.fromCharCode(v[g]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var w=65536,g=s.getTypeOf(v),y=!0;if(g==="uint8array"?y=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<w;)try{return f.stringifyByChunk(v,g,w)}catch{w=Math.floor(w/2)}return f.stringifyByChar(v)}function m(v,w){for(var g=0;g<v.length;g++)w[g]=v[g];return w}s.applyFromCharCode=p;var _={};_.string={string:u,array:function(v){return c(v,new Array(v.length))},arraybuffer:function(v){return _.string.uint8array(v).buffer},uint8array:function(v){return c(v,new Uint8Array(v.length))},nodebuffer:function(v){return c(v,a.allocBuffer(v.length))}},_.array={string:p,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},_.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},_.uint8array={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},_.nodebuffer={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return _.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},s.transformTo=function(v,w){if(w=w||"",!v)return w;s.checkSupport(v);var g=s.getTypeOf(w);return _[g][v](w)},s.resolve=function(v){for(var w=v.split("/"),g=[],y=0;y<w.length;y++){var b=w[y];b==="."||b===""&&y!==0&&y!==w.length-1||(b===".."?g.pop():g.push(b))}return g.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var w,g,y="";for(g=0;g<(v||"").length;g++)y+="\\x"+((w=v.charCodeAt(g))<16?"0":"")+w.toString(16).toUpperCase();return y},s.delay=function(v,w,g){setImmediate(function(){v.apply(g||null,w||[])})},s.inherits=function(v,w){function g(){}g.prototype=w.prototype,v.prototype=new g},s.extend=function(){var v,w,g={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&g[w]===void 0&&(g[w]=arguments[v][w]);return g},s.prepareContent=function(v,w,g,y,b){return l.Promise.resolve(w).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(O,I){var R=new FileReader;R.onload=function($){O($.target.result)},R.onerror=function($){I($.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var O=s.getTypeOf(C);return O?(O==="arraybuffer"?C=s.transformTo("uint8array",C):O==="string"&&(b?C=o.decode(C):g&&y!==!0&&(C=function(I){return c(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var _=this.reader.readString(4)===p;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,_=this.zip64EndOfCentralSize-44;0<_;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=p-m;if(0<_)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),f=n("./support");function p(m,_){this.options=m,this.loadOptions=_}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(w){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===w)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,v,w,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)_=m.readInt(2),v=m.readInt(2),w=m.readData(v),this.extraFields[_]={id:_,length:v,value:w};m.setIndex(g)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=i(m.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:u.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=i(m.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:u.utf8decode(_.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(_,v,w){this.name=_,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");i.prototype={internalStream:function(_){var v=null,w="string";try{if(!_)throw new Error("No output type specified.");var g=(w=_.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(v=v.pipe(new l.Utf8EncodeWorker)),!y&&g&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(b){(v=new c("error")).error(b)}return new o(v,w,"")},async:function(_,v){return this.internalStream(_).accumulate(v)},nodeStream:function(_,v){return this.internalStream(_||"nodebuffer").toNodejsStream(v)},_compressWorker:function(_,v){if(this._data instanceof u&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(w,_,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,c=new l(_),f=i.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){_(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(_,0)};else{var p=new i.MessageChannel;p.port1.onmessage=_,o=function(){p.port2.postMessage(0)}}var m=[];function _(){var v,w;a=!0;for(var g=m.length;g;){for(w=m,m=[],v=-1;++v<g;)w[v]();g=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof en<"u"?en:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&v(this,g)}function p(g,y,b){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function m(g,y,b){i(function(){var C;try{C=y(b)}catch(O){return a.reject(g,O)}C===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,C)})}function _(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function v(g,y){var b=!1;function C(R){b||(b=!0,a.reject(g,R))}function O(R){b||(b=!0,a.resolve(g,R))}var I=w(function(){y(O,C)});I.status==="error"&&C(I.value)}function w(g,y){var b={};try{b.value=g(y),b.status="success"}catch(C){b.status="error",b.value=C}return b}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(b){return y.resolve(g()).then(function(){return b})},function(b){return y.resolve(g()).then(function(){throw b})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,y){if(typeof g!="function"&&this.state===u||typeof y!="function"&&this.state===l)return this;var b=new this.constructor(o);return this.state!==c?m(b,this.state===u?g:y,this.outcome):this.queue.push(new p(b,g,y)),b},p.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},p.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},p.prototype.callRejected=function(g){a.reject(this.promise,g)},p.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,y){var b=w(_,y);if(b.status==="error")return a.reject(g,b.value);var C=b.value;if(C)v(g,C);else{g.state=u,g.outcome=y;for(var O=-1,I=g.queue.length;++O<I;)g.queue[O].callFulfilled(y)}return g},a.reject=function(g,y){g.state=l,g.outcome=y;for(var b=-1,C=g.queue.length;++b<C;)g.queue[b].callRejected(y);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var y=new this(o);return a.reject(y,g)},f.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,C=!1;if(!b)return this.resolve([]);for(var O=new Array(b),I=0,R=-1,$=new this(o);++R<b;)F(g[R],R);return $;function F(z,he){y.resolve(z).then(function(N){O[he]=N,++I!==b||C||(C=!0,a.resolve($,O))},function(N){C||(C=!0,a.reject($,N))})}},f.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,C=!1;if(!b)return this.resolve([]);for(var O=-1,I=new this(o);++O<b;)R=g[O],y.resolve(R).then(function($){C||(C=!0,a.resolve(I,$))},function($){C||(C=!0,a.reject(I,$))});var R;return I}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,f=0,p=-1,m=0,_=8;function v(g){if(!(this instanceof v))return new v(g);this.options=o.assign({level:p,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(b!==f)throw new Error(l[b]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(b=i.deflateSetDictionary(this.strm,C))!==f)throw new Error(l[b]);this._dict_set=!0}}function w(g,y){var b=new v(y);if(b.push(g,!0),b.err)throw b.msg||l[b.err];return b.result}v.prototype.push=function(g,y){var b,C,O=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof g=="string"?O.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?O.input=new Uint8Array(g):O.input=g,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(I),O.next_out=0,O.avail_out=I),(b=i.deflate(O,C))!==1&&b!==f)return this.onEnd(b),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&b!==1);return C===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f):C!==2||(this.onEnd(f),!(O.avail_out=0))},v.prototype.onData=function(g){this.chunks.push(g)},v.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=v,s.deflate=w,s.deflateRaw=function(g,y){return(y=y||{}).raw=!0,w(g,y)},s.gzip=function(g,y){return(y=y||{}).gzip=!0,w(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,w.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function _(v,w){var g=new m(w);if(g.push(v,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(v,w){var g,y,b,C,O,I,R=this.strm,$=this.options.chunkSize,F=this.options.dictionary,z=!1;if(this.ended)return!1;y=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?R.input=a.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?R.input=new Uint8Array(v):R.input=v,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8($),R.next_out=0,R.avail_out=$),(g=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(I=typeof F=="string"?a.string2buf(F):p.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,g=i.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&z===!0&&(g=l.Z_OK,z=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&g!==l.Z_STREAM_END&&(R.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(R.output,R.next_out),C=R.next_out-b,O=a.buf2string(R.output,b),R.next_out=C,R.avail_out=$-C,C&&o.arraySet(R.output,R.output,b,C,0),this.onData(O)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(z=!0)}while((0<R.avail_in||R.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=m,s.inflate=_,s.inflateRaw=function(v,w){return(w=w||{}).raw=!0,_(v,w)},s.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,f,p){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),p);else for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){var u,c,f,p,m,_;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(_=new Uint8Array(f),u=p=0,c=l.length;u<c;u++)m=l[u],_.set(m,p),p+=m.length;return _}},a={arraySet:function(l,u,c,f,p){for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var m="",_=0;_<p;_++)m+=String.fromCharCode(f[_]);return m}l[254]=l[254]=1,s.string2buf=function(f){var p,m,_,v,w,g=f.length,y=0;for(v=0;v<g;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(_=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),v++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new i.Buf8(y),v=w=0;w<y;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(_=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),v++),m<128?p[w++]=m:(m<2048?p[w++]=192|m>>>6:(m<65536?p[w++]=224|m>>>12:(p[w++]=240|m>>>18,p[w++]=128|m>>>12&63),p[w++]=128|m>>>6&63),p[w++]=128|63&m);return p},s.buf2binstring=function(f){return c(f,f.length)},s.binstring2buf=function(f){for(var p=new i.Buf8(f.length),m=0,_=p.length;m<_;m++)p[m]=f.charCodeAt(m);return p},s.buf2string=function(f,p){var m,_,v,w,g=p||f.length,y=new Array(2*g);for(m=_=0;m<g;)if((v=f[m++])<128)y[_++]=v;else if(4<(w=l[v]))y[_++]=65533,m+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&m<g;)v=v<<6|63&f[m++],w--;1<w?y[_++]=65533:v<65536?y[_++]=v:(v-=65536,y[_++]=55296|v>>10&1023,y[_++]=56320|1023&v)}return c(y,_)},s.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var u=65535&i|0,c=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=i,f=u+l;o^=-1;for(var p=u;p<f;p++)o=o>>>8^c[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),f=0,p=4,m=0,_=-2,v=-1,w=4,g=2,y=8,b=9,C=286,O=30,I=19,R=2*C+1,$=15,F=3,z=258,he=z+F+1,N=42,J=113,T=1,G=2,ve=3,ae=4;function ce(A,ge){return A.msg=c[ge],ge}function se(A){return(A<<1)-(4<A?9:0)}function ye(A){for(var ge=A.length;0<=--ge;)A[ge]=0}function Z(A){var ge=A.state,fe=ge.pending;fe>A.avail_out&&(fe=A.avail_out),fe!==0&&(o.arraySet(A.output,ge.pending_buf,ge.pending_out,fe,A.next_out),A.next_out+=fe,ge.pending_out+=fe,A.total_out+=fe,A.avail_out-=fe,ge.pending-=fe,ge.pending===0&&(ge.pending_out=0))}function ee(A,ge){a._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,ge),A.block_start=A.strstart,Z(A.strm)}function K(A,ge){A.pending_buf[A.pending++]=ge}function de(A,ge){A.pending_buf[A.pending++]=ge>>>8&255,A.pending_buf[A.pending++]=255&ge}function le(A,ge){var fe,M,L=A.max_chain_length,X=A.strstart,_e=A.prev_length,we=A.nice_match,oe=A.strstart>A.w_size-he?A.strstart-(A.w_size-he):0,ke=A.window,Le=A.w_mask,Ee=A.prev,ze=A.strstart+z,tt=ke[X+_e-1],Ze=ke[X+_e];A.prev_length>=A.good_match&&(L>>=2),we>A.lookahead&&(we=A.lookahead);do if(ke[(fe=ge)+_e]===Ze&&ke[fe+_e-1]===tt&&ke[fe]===ke[X]&&ke[++fe]===ke[X+1]){X+=2,fe++;do;while(ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&ke[++X]===ke[++fe]&&X<ze);if(M=z-(ze-X),X=ze-z,_e<M){if(A.match_start=ge,we<=(_e=M))break;tt=ke[X+_e-1],Ze=ke[X+_e]}}while((ge=Ee[ge&Le])>oe&&--L!=0);return _e<=A.lookahead?_e:A.lookahead}function xe(A){var ge,fe,M,L,X,_e,we,oe,ke,Le,Ee=A.w_size;do{if(L=A.window_size-A.lookahead-A.strstart,A.strstart>=Ee+(Ee-he)){for(o.arraySet(A.window,A.window,Ee,Ee,0),A.match_start-=Ee,A.strstart-=Ee,A.block_start-=Ee,ge=fe=A.hash_size;M=A.head[--ge],A.head[ge]=Ee<=M?M-Ee:0,--fe;);for(ge=fe=Ee;M=A.prev[--ge],A.prev[ge]=Ee<=M?M-Ee:0,--fe;);L+=Ee}if(A.strm.avail_in===0)break;if(_e=A.strm,we=A.window,oe=A.strstart+A.lookahead,ke=L,Le=void 0,Le=_e.avail_in,ke<Le&&(Le=ke),fe=Le===0?0:(_e.avail_in-=Le,o.arraySet(we,_e.input,_e.next_in,Le,oe),_e.state.wrap===1?_e.adler=l(_e.adler,we,Le,oe):_e.state.wrap===2&&(_e.adler=u(_e.adler,we,Le,oe)),_e.next_in+=Le,_e.total_in+=Le,Le),A.lookahead+=fe,A.lookahead+A.insert>=F)for(X=A.strstart-A.insert,A.ins_h=A.window[X],A.ins_h=(A.ins_h<<A.hash_shift^A.window[X+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[X+F-1])&A.hash_mask,A.prev[X&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=X,X++,A.insert--,!(A.lookahead+A.insert<F)););}while(A.lookahead<he&&A.strm.avail_in!==0)}function Fe(A,ge){for(var fe,M;;){if(A.lookahead<he){if(xe(A),A.lookahead<he&&ge===f)return T;if(A.lookahead===0)break}if(fe=0,A.lookahead>=F&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+F-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),fe!==0&&A.strstart-fe<=A.w_size-he&&(A.match_length=le(A,fe)),A.match_length>=F)if(M=a._tr_tally(A,A.strstart-A.match_start,A.match_length-F),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=F){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+F-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else M=a._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(M&&(ee(A,!1),A.strm.avail_out===0))return T}return A.insert=A.strstart<F-1?A.strstart:F-1,ge===p?(ee(A,!0),A.strm.avail_out===0?ve:ae):A.last_lit&&(ee(A,!1),A.strm.avail_out===0)?T:G}function je(A,ge){for(var fe,M,L;;){if(A.lookahead<he){if(xe(A),A.lookahead<he&&ge===f)return T;if(A.lookahead===0)break}if(fe=0,A.lookahead>=F&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+F-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=F-1,fe!==0&&A.prev_length<A.max_lazy_match&&A.strstart-fe<=A.w_size-he&&(A.match_length=le(A,fe),A.match_length<=5&&(A.strategy===1||A.match_length===F&&4096<A.strstart-A.match_start)&&(A.match_length=F-1)),A.prev_length>=F&&A.match_length<=A.prev_length){for(L=A.strstart+A.lookahead-F,M=a._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-F),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=L&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+F-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=F-1,A.strstart++,M&&(ee(A,!1),A.strm.avail_out===0))return T}else if(A.match_available){if((M=a._tr_tally(A,0,A.window[A.strstart-1]))&&ee(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return T}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(M=a._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<F-1?A.strstart:F-1,ge===p?(ee(A,!0),A.strm.avail_out===0?ve:ae):A.last_lit&&(ee(A,!1),A.strm.avail_out===0)?T:G}function me(A,ge,fe,M,L){this.good_length=A,this.max_lazy=ge,this.nice_length=fe,this.max_chain=M,this.func=L}function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*O+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16($+1),this.heap=new o.Buf16(2*C+1),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),ye(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ye(A){var ge;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=g,(ge=A.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?N:J,A.adler=ge.wrap===2?0:1,ge.last_flush=f,a._tr_init(ge),m):ce(A,_)}function qe(A){var ge=Ye(A);return ge===m&&function(fe){fe.window_size=2*fe.w_size,ye(fe.head),fe.max_lazy_match=i[fe.level].max_lazy,fe.good_match=i[fe.level].good_length,fe.nice_match=i[fe.level].nice_length,fe.max_chain_length=i[fe.level].max_chain,fe.strstart=0,fe.block_start=0,fe.lookahead=0,fe.insert=0,fe.match_length=fe.prev_length=F-1,fe.match_available=0,fe.ins_h=0}(A.state),ge}function ct(A,ge,fe,M,L,X){if(!A)return _;var _e=1;if(ge===v&&(ge=6),M<0?(_e=0,M=-M):15<M&&(_e=2,M-=16),L<1||b<L||fe!==y||M<8||15<M||ge<0||9<ge||X<0||w<X)return ce(A,_);M===8&&(M=9);var we=new Xe;return(A.state=we).strm=A,we.wrap=_e,we.gzhead=null,we.w_bits=M,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=L+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+F-1)/F),we.window=new o.Buf8(2*we.w_size),we.head=new o.Buf16(we.hash_size),we.prev=new o.Buf16(we.w_size),we.lit_bufsize=1<<L+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new o.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=ge,we.strategy=X,we.method=fe,qe(A)}i=[new me(0,0,0,0,function(A,ge){var fe=65535;for(fe>A.pending_buf_size-5&&(fe=A.pending_buf_size-5);;){if(A.lookahead<=1){if(xe(A),A.lookahead===0&&ge===f)return T;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var M=A.block_start+fe;if((A.strstart===0||A.strstart>=M)&&(A.lookahead=A.strstart-M,A.strstart=M,ee(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-he&&(ee(A,!1),A.strm.avail_out===0))return T}return A.insert=0,ge===p?(ee(A,!0),A.strm.avail_out===0?ve:ae):(A.strstart>A.block_start&&(ee(A,!1),A.strm.avail_out),T)}),new me(4,4,8,4,Fe),new me(4,5,16,8,Fe),new me(4,6,32,32,Fe),new me(4,4,16,16,je),new me(8,16,32,32,je),new me(8,16,128,128,je),new me(8,32,128,256,je),new me(32,128,258,1024,je),new me(32,258,258,4096,je)],s.deflateInit=function(A,ge){return ct(A,ge,y,15,8,0)},s.deflateInit2=ct,s.deflateReset=qe,s.deflateResetKeep=Ye,s.deflateSetHeader=function(A,ge){return A&&A.state?A.state.wrap!==2?_:(A.state.gzhead=ge,m):_},s.deflate=function(A,ge){var fe,M,L,X;if(!A||!A.state||5<ge||ge<0)return A?ce(A,_):_;if(M=A.state,!A.output||!A.input&&A.avail_in!==0||M.status===666&&ge!==p)return ce(A,A.avail_out===0?-5:_);if(M.strm=A,fe=M.last_flush,M.last_flush=ge,M.status===N)if(M.wrap===2)A.adler=0,K(M,31),K(M,139),K(M,8),M.gzhead?(K(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),K(M,255&M.gzhead.time),K(M,M.gzhead.time>>8&255),K(M,M.gzhead.time>>16&255),K(M,M.gzhead.time>>24&255),K(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),K(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(K(M,255&M.gzhead.extra.length),K(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(A.adler=u(A.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(K(M,0),K(M,0),K(M,0),K(M,0),K(M,0),K(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),K(M,3),M.status=J);else{var _e=y+(M.w_bits-8<<4)<<8;_e|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(_e|=32),_e+=31-_e%31,M.status=J,de(M,_e),M.strstart!==0&&(de(M,A.adler>>>16),de(M,65535&A.adler)),A.adler=1}if(M.status===69)if(M.gzhead.extra){for(L=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>L&&(A.adler=u(A.adler,M.pending_buf,M.pending-L,L)),Z(A),L=M.pending,M.pending!==M.pending_buf_size));)K(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>L&&(A.adler=u(A.adler,M.pending_buf,M.pending-L,L)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){L=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>L&&(A.adler=u(A.adler,M.pending_buf,M.pending-L,L)),Z(A),L=M.pending,M.pending===M.pending_buf_size)){X=1;break}X=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,K(M,X)}while(X!==0);M.gzhead.hcrc&&M.pending>L&&(A.adler=u(A.adler,M.pending_buf,M.pending-L,L)),X===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){L=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>L&&(A.adler=u(A.adler,M.pending_buf,M.pending-L,L)),Z(A),L=M.pending,M.pending===M.pending_buf_size)){X=1;break}X=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,K(M,X)}while(X!==0);M.gzhead.hcrc&&M.pending>L&&(A.adler=u(A.adler,M.pending_buf,M.pending-L,L)),X===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&Z(A),M.pending+2<=M.pending_buf_size&&(K(M,255&A.adler),K(M,A.adler>>8&255),A.adler=0,M.status=J)):M.status=J),M.pending!==0){if(Z(A),A.avail_out===0)return M.last_flush=-1,m}else if(A.avail_in===0&&se(ge)<=se(fe)&&ge!==p)return ce(A,-5);if(M.status===666&&A.avail_in!==0)return ce(A,-5);if(A.avail_in!==0||M.lookahead!==0||ge!==f&&M.status!==666){var we=M.strategy===2?function(oe,ke){for(var Le;;){if(oe.lookahead===0&&(xe(oe),oe.lookahead===0)){if(ke===f)return T;break}if(oe.match_length=0,Le=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,Le&&(ee(oe,!1),oe.strm.avail_out===0))return T}return oe.insert=0,ke===p?(ee(oe,!0),oe.strm.avail_out===0?ve:ae):oe.last_lit&&(ee(oe,!1),oe.strm.avail_out===0)?T:G}(M,ge):M.strategy===3?function(oe,ke){for(var Le,Ee,ze,tt,Ze=oe.window;;){if(oe.lookahead<=z){if(xe(oe),oe.lookahead<=z&&ke===f)return T;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=F&&0<oe.strstart&&(Ee=Ze[ze=oe.strstart-1])===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]){tt=oe.strstart+z;do;while(Ee===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]&&Ee===Ze[++ze]&&ze<tt);oe.match_length=z-(tt-ze),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=F?(Le=a._tr_tally(oe,1,oe.match_length-F),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(Le=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),Le&&(ee(oe,!1),oe.strm.avail_out===0))return T}return oe.insert=0,ke===p?(ee(oe,!0),oe.strm.avail_out===0?ve:ae):oe.last_lit&&(ee(oe,!1),oe.strm.avail_out===0)?T:G}(M,ge):i[M.level].func(M,ge);if(we!==ve&&we!==ae||(M.status=666),we===T||we===ve)return A.avail_out===0&&(M.last_flush=-1),m;if(we===G&&(ge===1?a._tr_align(M):ge!==5&&(a._tr_stored_block(M,0,0,!1),ge===3&&(ye(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),Z(A),A.avail_out===0))return M.last_flush=-1,m}return ge!==p?m:M.wrap<=0?1:(M.wrap===2?(K(M,255&A.adler),K(M,A.adler>>8&255),K(M,A.adler>>16&255),K(M,A.adler>>24&255),K(M,255&A.total_in),K(M,A.total_in>>8&255),K(M,A.total_in>>16&255),K(M,A.total_in>>24&255)):(de(M,A.adler>>>16),de(M,65535&A.adler)),Z(A),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?m:1)},s.deflateEnd=function(A){var ge;return A&&A.state?(ge=A.state.status)!==N&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==J&&ge!==666?ce(A,_):(A.state=null,ge===J?ce(A,-3):m):_},s.deflateSetDictionary=function(A,ge){var fe,M,L,X,_e,we,oe,ke,Le=ge.length;if(!A||!A.state||(X=(fe=A.state).wrap)===2||X===1&&fe.status!==N||fe.lookahead)return _;for(X===1&&(A.adler=l(A.adler,ge,Le,0)),fe.wrap=0,Le>=fe.w_size&&(X===0&&(ye(fe.head),fe.strstart=0,fe.block_start=0,fe.insert=0),ke=new o.Buf8(fe.w_size),o.arraySet(ke,ge,Le-fe.w_size,fe.w_size,0),ge=ke,Le=fe.w_size),_e=A.avail_in,we=A.next_in,oe=A.input,A.avail_in=Le,A.next_in=0,A.input=ge,xe(fe);fe.lookahead>=F;){for(M=fe.strstart,L=fe.lookahead-(F-1);fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[M+F-1])&fe.hash_mask,fe.prev[M&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=M,M++,--L;);fe.strstart=M,fe.lookahead=F-1,xe(fe)}return fe.strstart+=fe.lookahead,fe.block_start=fe.strstart,fe.insert=fe.lookahead,fe.lookahead=0,fe.match_length=fe.prev_length=F-1,fe.match_available=0,A.next_in=we,A.input=oe,A.avail_in=_e,fe.wrap=X,m},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,u,c,f,p,m,_,v,w,g,y,b,C,O,I,R,$,F,z,he,N,J,T,G;a=i.state,l=i.next_in,T=i.input,u=l+(i.avail_in-5),c=i.next_out,G=i.output,f=c-(o-i.avail_out),p=c+(i.avail_out-257),m=a.dmax,_=a.wsize,v=a.whave,w=a.wnext,g=a.window,y=a.hold,b=a.bits,C=a.lencode,O=a.distcode,I=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{b<15&&(y+=T[l++]<<b,b+=8,y+=T[l++]<<b,b+=8),$=C[y&I];t:for(;;){if(y>>>=F=$>>>24,b-=F,(F=$>>>16&255)===0)G[c++]=65535&$;else{if(!(16&F)){if(!(64&F)){$=C[(65535&$)+(y&(1<<F)-1)];continue t}if(32&F){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}z=65535&$,(F&=15)&&(b<F&&(y+=T[l++]<<b,b+=8),z+=y&(1<<F)-1,y>>>=F,b-=F),b<15&&(y+=T[l++]<<b,b+=8,y+=T[l++]<<b,b+=8),$=O[y&R];n:for(;;){if(y>>>=F=$>>>24,b-=F,!(16&(F=$>>>16&255))){if(!(64&F)){$=O[(65535&$)+(y&(1<<F)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(he=65535&$,b<(F&=15)&&(y+=T[l++]<<b,(b+=8)<F&&(y+=T[l++]<<b,b+=8)),m<(he+=y&(1<<F)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=F,b-=F,(F=c-f)<he){if(v<(F=he-F)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(J=g,(N=0)===w){if(N+=_-F,F<z){for(z-=F;G[c++]=g[N++],--F;);N=c-he,J=G}}else if(w<F){if(N+=_+w-F,(F-=w)<z){for(z-=F;G[c++]=g[N++],--F;);if(N=0,w<z){for(z-=F=w;G[c++]=g[N++],--F;);N=c-he,J=G}}}else if(N+=w-F,F<z){for(z-=F;G[c++]=g[N++],--F;);N=c-he,J=G}for(;2<z;)G[c++]=J[N++],G[c++]=J[N++],G[c++]=J[N++],z-=3;z&&(G[c++]=J[N++],1<z&&(G[c++]=J[N++]))}else{for(N=c-he;G[c++]=G[N++],G[c++]=G[N++],G[c++]=G[N++],2<(z-=3););z&&(G[c++]=G[N++],1<z&&(G[c++]=G[N++]))}break}}break}}while(l<u&&c<p);l-=z=b>>3,y&=(1<<(b-=z<<3))-1,i.next_in=l,i.next_out=c,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=c<p?p-c+257:257-(c-p),a.hold=y,a.bits=b}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,f=2,p=0,m=-2,_=1,v=852,w=592;function g(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(N){var J;return N&&N.state?(J=N.state,N.total_in=N.total_out=J.total=0,N.msg="",J.wrap&&(N.adler=1&J.wrap),J.mode=_,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new i.Buf32(v),J.distcode=J.distdyn=new i.Buf32(w),J.sane=1,J.back=-1,p):m}function C(N){var J;return N&&N.state?((J=N.state).wsize=0,J.whave=0,J.wnext=0,b(N)):m}function O(N,J){var T,G;return N&&N.state?(G=N.state,J<0?(T=0,J=-J):(T=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?m:(G.window!==null&&G.wbits!==J&&(G.window=null),G.wrap=T,G.wbits=J,C(N))):m}function I(N,J){var T,G;return N?(G=new y,(N.state=G).window=null,(T=O(N,J))!==p&&(N.state=null),T):m}var R,$,F=!0;function z(N){if(F){var J;for(R=new i.Buf32(512),$=new i.Buf32(32),J=0;J<144;)N.lens[J++]=8;for(;J<256;)N.lens[J++]=9;for(;J<280;)N.lens[J++]=7;for(;J<288;)N.lens[J++]=8;for(u(c,N.lens,0,288,R,0,N.work,{bits:9}),J=0;J<32;)N.lens[J++]=5;u(f,N.lens,0,32,$,0,N.work,{bits:5}),F=!1}N.lencode=R,N.lenbits=9,N.distcode=$,N.distbits=5}function he(N,J,T,G){var ve,ae=N.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new i.Buf8(ae.wsize)),G>=ae.wsize?(i.arraySet(ae.window,J,T-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(G<(ve=ae.wsize-ae.wnext)&&(ve=G),i.arraySet(ae.window,J,T-G,ve,ae.wnext),(G-=ve)?(i.arraySet(ae.window,J,T-G,G,0),ae.wnext=G,ae.whave=ae.wsize):(ae.wnext+=ve,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=ve))),0}s.inflateReset=C,s.inflateReset2=O,s.inflateResetKeep=b,s.inflateInit=function(N){return I(N,15)},s.inflateInit2=I,s.inflate=function(N,J){var T,G,ve,ae,ce,se,ye,Z,ee,K,de,le,xe,Fe,je,me,Xe,Ye,qe,ct,A,ge,fe,M,L=0,X=new i.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return m;(T=N.state).mode===12&&(T.mode=13),ce=N.next_out,ve=N.output,ye=N.avail_out,ae=N.next_in,G=N.input,se=N.avail_in,Z=T.hold,ee=T.bits,K=se,de=ye,ge=p;e:for(;;)switch(T.mode){case _:if(T.wrap===0){T.mode=13;break}for(;ee<16;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(2&T.wrap&&Z===35615){X[T.check=0]=255&Z,X[1]=Z>>>8&255,T.check=a(T.check,X,2,0),ee=Z=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&Z)<<8)+(Z>>8))%31){N.msg="incorrect header check",T.mode=30;break}if((15&Z)!=8){N.msg="unknown compression method",T.mode=30;break}if(ee-=4,A=8+(15&(Z>>>=4)),T.wbits===0)T.wbits=A;else if(A>T.wbits){N.msg="invalid window size",T.mode=30;break}T.dmax=1<<A,N.adler=T.check=1,T.mode=512&Z?10:12,ee=Z=0;break;case 2:for(;ee<16;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(T.flags=Z,(255&T.flags)!=8){N.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){N.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=Z>>8&1),512&T.flags&&(X[0]=255&Z,X[1]=Z>>>8&255,T.check=a(T.check,X,2,0)),ee=Z=0,T.mode=3;case 3:for(;ee<32;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}T.head&&(T.head.time=Z),512&T.flags&&(X[0]=255&Z,X[1]=Z>>>8&255,X[2]=Z>>>16&255,X[3]=Z>>>24&255,T.check=a(T.check,X,4,0)),ee=Z=0,T.mode=4;case 4:for(;ee<16;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}T.head&&(T.head.xflags=255&Z,T.head.os=Z>>8),512&T.flags&&(X[0]=255&Z,X[1]=Z>>>8&255,T.check=a(T.check,X,2,0)),ee=Z=0,T.mode=5;case 5:if(1024&T.flags){for(;ee<16;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}T.length=Z,T.head&&(T.head.extra_len=Z),512&T.flags&&(X[0]=255&Z,X[1]=Z>>>8&255,T.check=a(T.check,X,2,0)),ee=Z=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(se<(le=T.length)&&(le=se),le&&(T.head&&(A=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),i.arraySet(T.head.extra,G,ae,le,A)),512&T.flags&&(T.check=a(T.check,G,le,ae)),se-=le,ae+=le,T.length-=le),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(se===0)break e;for(le=0;A=G[ae+le++],T.head&&A&&T.length<65536&&(T.head.name+=String.fromCharCode(A)),A&&le<se;);if(512&T.flags&&(T.check=a(T.check,G,le,ae)),se-=le,ae+=le,A)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(se===0)break e;for(le=0;A=G[ae+le++],T.head&&A&&T.length<65536&&(T.head.comment+=String.fromCharCode(A)),A&&le<se;);if(512&T.flags&&(T.check=a(T.check,G,le,ae)),se-=le,ae+=le,A)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;ee<16;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(Z!==(65535&T.check)){N.msg="header crc mismatch",T.mode=30;break}ee=Z=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),N.adler=T.check=0,T.mode=12;break;case 10:for(;ee<32;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}N.adler=T.check=g(Z),ee=Z=0,T.mode=11;case 11:if(T.havedict===0)return N.next_out=ce,N.avail_out=ye,N.next_in=ae,N.avail_in=se,T.hold=Z,T.bits=ee,2;N.adler=T.check=1,T.mode=12;case 12:if(J===5||J===6)break e;case 13:if(T.last){Z>>>=7&ee,ee-=7&ee,T.mode=27;break}for(;ee<3;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}switch(T.last=1&Z,ee-=1,3&(Z>>>=1)){case 0:T.mode=14;break;case 1:if(z(T),T.mode=20,J!==6)break;Z>>>=2,ee-=2;break e;case 2:T.mode=17;break;case 3:N.msg="invalid block type",T.mode=30}Z>>>=2,ee-=2;break;case 14:for(Z>>>=7&ee,ee-=7&ee;ee<32;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if((65535&Z)!=(Z>>>16^65535)){N.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&Z,ee=Z=0,T.mode=15,J===6)break e;case 15:T.mode=16;case 16:if(le=T.length){if(se<le&&(le=se),ye<le&&(le=ye),le===0)break e;i.arraySet(ve,G,ae,le,ce),se-=le,ae+=le,ye-=le,ce+=le,T.length-=le;break}T.mode=12;break;case 17:for(;ee<14;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(T.nlen=257+(31&Z),Z>>>=5,ee-=5,T.ndist=1+(31&Z),Z>>>=5,ee-=5,T.ncode=4+(15&Z),Z>>>=4,ee-=4,286<T.nlen||30<T.ndist){N.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;ee<3;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}T.lens[_e[T.have++]]=7&Z,Z>>>=3,ee-=3}for(;T.have<19;)T.lens[_e[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,fe={bits:T.lenbits},ge=u(0,T.lens,0,19,T.lencode,0,T.work,fe),T.lenbits=fe.bits,ge){N.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;me=(L=T.lencode[Z&(1<<T.lenbits)-1])>>>16&255,Xe=65535&L,!((je=L>>>24)<=ee);){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(Xe<16)Z>>>=je,ee-=je,T.lens[T.have++]=Xe;else{if(Xe===16){for(M=je+2;ee<M;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(Z>>>=je,ee-=je,T.have===0){N.msg="invalid bit length repeat",T.mode=30;break}A=T.lens[T.have-1],le=3+(3&Z),Z>>>=2,ee-=2}else if(Xe===17){for(M=je+3;ee<M;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}ee-=je,A=0,le=3+(7&(Z>>>=je)),Z>>>=3,ee-=3}else{for(M=je+7;ee<M;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}ee-=je,A=0,le=11+(127&(Z>>>=je)),Z>>>=7,ee-=7}if(T.have+le>T.nlen+T.ndist){N.msg="invalid bit length repeat",T.mode=30;break}for(;le--;)T.lens[T.have++]=A}}if(T.mode===30)break;if(T.lens[256]===0){N.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,fe={bits:T.lenbits},ge=u(c,T.lens,0,T.nlen,T.lencode,0,T.work,fe),T.lenbits=fe.bits,ge){N.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,fe={bits:T.distbits},ge=u(f,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,fe),T.distbits=fe.bits,ge){N.msg="invalid distances set",T.mode=30;break}if(T.mode=20,J===6)break e;case 20:T.mode=21;case 21:if(6<=se&&258<=ye){N.next_out=ce,N.avail_out=ye,N.next_in=ae,N.avail_in=se,T.hold=Z,T.bits=ee,l(N,de),ce=N.next_out,ve=N.output,ye=N.avail_out,ae=N.next_in,G=N.input,se=N.avail_in,Z=T.hold,ee=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;me=(L=T.lencode[Z&(1<<T.lenbits)-1])>>>16&255,Xe=65535&L,!((je=L>>>24)<=ee);){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(me&&!(240&me)){for(Ye=je,qe=me,ct=Xe;me=(L=T.lencode[ct+((Z&(1<<Ye+qe)-1)>>Ye)])>>>16&255,Xe=65535&L,!(Ye+(je=L>>>24)<=ee);){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}Z>>>=Ye,ee-=Ye,T.back+=Ye}if(Z>>>=je,ee-=je,T.back+=je,T.length=Xe,me===0){T.mode=26;break}if(32&me){T.back=-1,T.mode=12;break}if(64&me){N.msg="invalid literal/length code",T.mode=30;break}T.extra=15&me,T.mode=22;case 22:if(T.extra){for(M=T.extra;ee<M;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}T.length+=Z&(1<<T.extra)-1,Z>>>=T.extra,ee-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;me=(L=T.distcode[Z&(1<<T.distbits)-1])>>>16&255,Xe=65535&L,!((je=L>>>24)<=ee);){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(!(240&me)){for(Ye=je,qe=me,ct=Xe;me=(L=T.distcode[ct+((Z&(1<<Ye+qe)-1)>>Ye)])>>>16&255,Xe=65535&L,!(Ye+(je=L>>>24)<=ee);){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}Z>>>=Ye,ee-=Ye,T.back+=Ye}if(Z>>>=je,ee-=je,T.back+=je,64&me){N.msg="invalid distance code",T.mode=30;break}T.offset=Xe,T.extra=15&me,T.mode=24;case 24:if(T.extra){for(M=T.extra;ee<M;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}T.offset+=Z&(1<<T.extra)-1,Z>>>=T.extra,ee-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){N.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(ye===0)break e;if(le=de-ye,T.offset>le){if((le=T.offset-le)>T.whave&&T.sane){N.msg="invalid distance too far back",T.mode=30;break}xe=le>T.wnext?(le-=T.wnext,T.wsize-le):T.wnext-le,le>T.length&&(le=T.length),Fe=T.window}else Fe=ve,xe=ce-T.offset,le=T.length;for(ye<le&&(le=ye),ye-=le,T.length-=le;ve[ce++]=Fe[xe++],--le;);T.length===0&&(T.mode=21);break;case 26:if(ye===0)break e;ve[ce++]=T.length,ye--,T.mode=21;break;case 27:if(T.wrap){for(;ee<32;){if(se===0)break e;se--,Z|=G[ae++]<<ee,ee+=8}if(de-=ye,N.total_out+=de,T.total+=de,de&&(N.adler=T.check=T.flags?a(T.check,ve,de,ce-de):o(T.check,ve,de,ce-de)),de=ye,(T.flags?Z:g(Z))!==T.check){N.msg="incorrect data check",T.mode=30;break}ee=Z=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;ee<32;){if(se===0)break e;se--,Z+=G[ae++]<<ee,ee+=8}if(Z!==(4294967295&T.total)){N.msg="incorrect length check",T.mode=30;break}ee=Z=0}T.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return N.next_out=ce,N.avail_out=ye,N.next_in=ae,N.avail_in=se,T.hold=Z,T.bits=ee,(T.wsize||de!==N.avail_out&&T.mode<30&&(T.mode<27||J!==4))&&he(N,N.output,N.next_out,de-N.avail_out)?(T.mode=31,-4):(K-=N.avail_in,de-=N.avail_out,N.total_in+=K,N.total_out+=de,T.total+=de,T.wrap&&de&&(N.adler=T.check=T.flags?a(T.check,ve,de,N.next_out-de):o(T.check,ve,de,N.next_out-de)),N.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(K==0&&de===0||J===4)&&ge===p&&(ge=-5),ge)},s.inflateEnd=function(N){if(!N||!N.state)return m;var J=N.state;return J.window&&(J.window=null),N.state=null,p},s.inflateGetHeader=function(N,J){var T;return N&&N.state&&2&(T=N.state).wrap?((T.head=J).done=!1,p):m},s.inflateSetDictionary=function(N,J){var T,G=J.length;return N&&N.state?(T=N.state).wrap!==0&&T.mode!==11?m:T.mode===11&&o(1,J,G,0)!==T.check?-3:he(N,J,G,G)?(T.mode=31,-4):(T.havedict=1,p):m},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,p,m,_,v,w,g){var y,b,C,O,I,R,$,F,z,he=g.bits,N=0,J=0,T=0,G=0,ve=0,ae=0,ce=0,se=0,ye=0,Z=0,ee=null,K=0,de=new i.Buf16(16),le=new i.Buf16(16),xe=null,Fe=0;for(N=0;N<=15;N++)de[N]=0;for(J=0;J<m;J++)de[f[p+J]]++;for(ve=he,G=15;1<=G&&de[G]===0;G--);if(G<ve&&(ve=G),G===0)return _[v++]=20971520,_[v++]=20971520,g.bits=1,0;for(T=1;T<G&&de[T]===0;T++);for(ve<T&&(ve=T),N=se=1;N<=15;N++)if(se<<=1,(se-=de[N])<0)return-1;if(0<se&&(c===0||G!==1))return-1;for(le[1]=0,N=1;N<15;N++)le[N+1]=le[N]+de[N];for(J=0;J<m;J++)f[p+J]!==0&&(w[le[f[p+J]]++]=J);if(R=c===0?(ee=xe=w,19):c===1?(ee=o,K-=257,xe=a,Fe-=257,256):(ee=l,xe=u,-1),N=T,I=v,ce=J=Z=0,C=-1,O=(ye=1<<(ae=ve))-1,c===1&&852<ye||c===2&&592<ye)return 1;for(;;){for($=N-ce,z=w[J]<R?(F=0,w[J]):w[J]>R?(F=xe[Fe+w[J]],ee[K+w[J]]):(F=96,0),y=1<<N-ce,T=b=1<<ae;_[I+(Z>>ce)+(b-=y)]=$<<24|F<<16|z|0,b!==0;);for(y=1<<N-1;Z&y;)y>>=1;if(y!==0?(Z&=y-1,Z+=y):Z=0,J++,--de[N]==0){if(N===G)break;N=f[p+w[J]]}if(ve<N&&(Z&O)!==C){for(ce===0&&(ce=ve),I+=T,se=1<<(ae=N-ce);ae+ce<G&&!((se-=de[ae+ce])<=0);)ae++,se<<=1;if(ye+=1<<ae,c===1&&852<ye||c===2&&592<ye)return 1;_[C=Z&O]=ve<<24|ae<<16|I-v|0}}return Z!==0&&(_[I+Z]=N-ce<<24|64<<16|0),g.bits=ve,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(L){for(var X=L.length;0<=--X;)L[X]=0}var u=0,c=29,f=256,p=f+1+c,m=30,_=19,v=2*p+1,w=15,g=16,y=7,b=256,C=16,O=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=new Array(2*(p+2));l(he);var N=new Array(2*m);l(N);var J=new Array(512);l(J);var T=new Array(256);l(T);var G=new Array(c);l(G);var ve,ae,ce,se=new Array(m);function ye(L,X,_e,we,oe){this.static_tree=L,this.extra_bits=X,this.extra_base=_e,this.elems=we,this.max_length=oe,this.has_stree=L&&L.length}function Z(L,X){this.dyn_tree=L,this.max_code=0,this.stat_desc=X}function ee(L){return L<256?J[L]:J[256+(L>>>7)]}function K(L,X){L.pending_buf[L.pending++]=255&X,L.pending_buf[L.pending++]=X>>>8&255}function de(L,X,_e){L.bi_valid>g-_e?(L.bi_buf|=X<<L.bi_valid&65535,K(L,L.bi_buf),L.bi_buf=X>>g-L.bi_valid,L.bi_valid+=_e-g):(L.bi_buf|=X<<L.bi_valid&65535,L.bi_valid+=_e)}function le(L,X,_e){de(L,_e[2*X],_e[2*X+1])}function xe(L,X){for(var _e=0;_e|=1&L,L>>>=1,_e<<=1,0<--X;);return _e>>>1}function Fe(L,X,_e){var we,oe,ke=new Array(w+1),Le=0;for(we=1;we<=w;we++)ke[we]=Le=Le+_e[we-1]<<1;for(oe=0;oe<=X;oe++){var Ee=L[2*oe+1];Ee!==0&&(L[2*oe]=xe(ke[Ee]++,Ee))}}function je(L){var X;for(X=0;X<p;X++)L.dyn_ltree[2*X]=0;for(X=0;X<m;X++)L.dyn_dtree[2*X]=0;for(X=0;X<_;X++)L.bl_tree[2*X]=0;L.dyn_ltree[2*b]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function me(L){8<L.bi_valid?K(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Xe(L,X,_e,we){var oe=2*X,ke=2*_e;return L[oe]<L[ke]||L[oe]===L[ke]&&we[X]<=we[_e]}function Ye(L,X,_e){for(var we=L.heap[_e],oe=_e<<1;oe<=L.heap_len&&(oe<L.heap_len&&Xe(X,L.heap[oe+1],L.heap[oe],L.depth)&&oe++,!Xe(X,we,L.heap[oe],L.depth));)L.heap[_e]=L.heap[oe],_e=oe,oe<<=1;L.heap[_e]=we}function qe(L,X,_e){var we,oe,ke,Le,Ee=0;if(L.last_lit!==0)for(;we=L.pending_buf[L.d_buf+2*Ee]<<8|L.pending_buf[L.d_buf+2*Ee+1],oe=L.pending_buf[L.l_buf+Ee],Ee++,we===0?le(L,oe,X):(le(L,(ke=T[oe])+f+1,X),(Le=R[ke])!==0&&de(L,oe-=G[ke],Le),le(L,ke=ee(--we),_e),(Le=$[ke])!==0&&de(L,we-=se[ke],Le)),Ee<L.last_lit;);le(L,b,X)}function ct(L,X){var _e,we,oe,ke=X.dyn_tree,Le=X.stat_desc.static_tree,Ee=X.stat_desc.has_stree,ze=X.stat_desc.elems,tt=-1;for(L.heap_len=0,L.heap_max=v,_e=0;_e<ze;_e++)ke[2*_e]!==0?(L.heap[++L.heap_len]=tt=_e,L.depth[_e]=0):ke[2*_e+1]=0;for(;L.heap_len<2;)ke[2*(oe=L.heap[++L.heap_len]=tt<2?++tt:0)]=1,L.depth[oe]=0,L.opt_len--,Ee&&(L.static_len-=Le[2*oe+1]);for(X.max_code=tt,_e=L.heap_len>>1;1<=_e;_e--)Ye(L,ke,_e);for(oe=ze;_e=L.heap[1],L.heap[1]=L.heap[L.heap_len--],Ye(L,ke,1),we=L.heap[1],L.heap[--L.heap_max]=_e,L.heap[--L.heap_max]=we,ke[2*oe]=ke[2*_e]+ke[2*we],L.depth[oe]=(L.depth[_e]>=L.depth[we]?L.depth[_e]:L.depth[we])+1,ke[2*_e+1]=ke[2*we+1]=oe,L.heap[1]=oe++,Ye(L,ke,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Ze,Ot){var Zn,qt,De,Be,Tt,$t,Ne=Ot.dyn_tree,yr=Ot.max_code,Xn=Ot.stat_desc.static_tree,Xr=Ot.stat_desc.has_stree,Re=Ot.stat_desc.extra_bits,En=Ot.stat_desc.extra_base,vr=Ot.stat_desc.max_length,Nr=0;for(Be=0;Be<=w;Be++)Ze.bl_count[Be]=0;for(Ne[2*Ze.heap[Ze.heap_max]+1]=0,Zn=Ze.heap_max+1;Zn<v;Zn++)vr<(Be=Ne[2*Ne[2*(qt=Ze.heap[Zn])+1]+1]+1)&&(Be=vr,Nr++),Ne[2*qt+1]=Be,yr<qt||(Ze.bl_count[Be]++,Tt=0,En<=qt&&(Tt=Re[qt-En]),$t=Ne[2*qt],Ze.opt_len+=$t*(Be+Tt),Xr&&(Ze.static_len+=$t*(Xn[2*qt+1]+Tt)));if(Nr!==0){do{for(Be=vr-1;Ze.bl_count[Be]===0;)Be--;Ze.bl_count[Be]--,Ze.bl_count[Be+1]+=2,Ze.bl_count[vr]--,Nr-=2}while(0<Nr);for(Be=vr;Be!==0;Be--)for(qt=Ze.bl_count[Be];qt!==0;)yr<(De=Ze.heap[--Zn])||(Ne[2*De+1]!==Be&&(Ze.opt_len+=(Be-Ne[2*De+1])*Ne[2*De],Ne[2*De+1]=Be),qt--)}}(L,X),Fe(ke,tt,L.bl_count)}function A(L,X,_e){var we,oe,ke=-1,Le=X[1],Ee=0,ze=7,tt=4;for(Le===0&&(ze=138,tt=3),X[2*(_e+1)+1]=65535,we=0;we<=_e;we++)oe=Le,Le=X[2*(we+1)+1],++Ee<ze&&oe===Le||(Ee<tt?L.bl_tree[2*oe]+=Ee:oe!==0?(oe!==ke&&L.bl_tree[2*oe]++,L.bl_tree[2*C]++):Ee<=10?L.bl_tree[2*O]++:L.bl_tree[2*I]++,ke=oe,tt=(Ee=0)===Le?(ze=138,3):oe===Le?(ze=6,3):(ze=7,4))}function ge(L,X,_e){var we,oe,ke=-1,Le=X[1],Ee=0,ze=7,tt=4;for(Le===0&&(ze=138,tt=3),we=0;we<=_e;we++)if(oe=Le,Le=X[2*(we+1)+1],!(++Ee<ze&&oe===Le)){if(Ee<tt)for(;le(L,oe,L.bl_tree),--Ee!=0;);else oe!==0?(oe!==ke&&(le(L,oe,L.bl_tree),Ee--),le(L,C,L.bl_tree),de(L,Ee-3,2)):Ee<=10?(le(L,O,L.bl_tree),de(L,Ee-3,3)):(le(L,I,L.bl_tree),de(L,Ee-11,7));ke=oe,tt=(Ee=0)===Le?(ze=138,3):oe===Le?(ze=6,3):(ze=7,4)}}l(se);var fe=!1;function M(L,X,_e,we){de(L,(u<<1)+(we?1:0),3),function(oe,ke,Le,Ee){me(oe),K(oe,Le),K(oe,~Le),i.arraySet(oe.pending_buf,oe.window,ke,Le,oe.pending),oe.pending+=Le}(L,X,_e)}s._tr_init=function(L){fe||(function(){var X,_e,we,oe,ke,Le=new Array(w+1);for(oe=we=0;oe<c-1;oe++)for(G[oe]=we,X=0;X<1<<R[oe];X++)T[we++]=oe;for(T[we-1]=oe,oe=ke=0;oe<16;oe++)for(se[oe]=ke,X=0;X<1<<$[oe];X++)J[ke++]=oe;for(ke>>=7;oe<m;oe++)for(se[oe]=ke<<7,X=0;X<1<<$[oe]-7;X++)J[256+ke++]=oe;for(_e=0;_e<=w;_e++)Le[_e]=0;for(X=0;X<=143;)he[2*X+1]=8,X++,Le[8]++;for(;X<=255;)he[2*X+1]=9,X++,Le[9]++;for(;X<=279;)he[2*X+1]=7,X++,Le[7]++;for(;X<=287;)he[2*X+1]=8,X++,Le[8]++;for(Fe(he,p+1,Le),X=0;X<m;X++)N[2*X+1]=5,N[2*X]=xe(X,5);ve=new ye(he,R,f+1,p,w),ae=new ye(N,$,0,m,w),ce=new ye(new Array(0),F,0,_,y)}(),fe=!0),L.l_desc=new Z(L.dyn_ltree,ve),L.d_desc=new Z(L.dyn_dtree,ae),L.bl_desc=new Z(L.bl_tree,ce),L.bi_buf=0,L.bi_valid=0,je(L)},s._tr_stored_block=M,s._tr_flush_block=function(L,X,_e,we){var oe,ke,Le=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(Ee){var ze,tt=4093624447;for(ze=0;ze<=31;ze++,tt>>>=1)if(1&tt&&Ee.dyn_ltree[2*ze]!==0)return o;if(Ee.dyn_ltree[18]!==0||Ee.dyn_ltree[20]!==0||Ee.dyn_ltree[26]!==0)return a;for(ze=32;ze<f;ze++)if(Ee.dyn_ltree[2*ze]!==0)return a;return o}(L)),ct(L,L.l_desc),ct(L,L.d_desc),Le=function(Ee){var ze;for(A(Ee,Ee.dyn_ltree,Ee.l_desc.max_code),A(Ee,Ee.dyn_dtree,Ee.d_desc.max_code),ct(Ee,Ee.bl_desc),ze=_-1;3<=ze&&Ee.bl_tree[2*z[ze]+1]===0;ze--);return Ee.opt_len+=3*(ze+1)+5+5+4,ze}(L),oe=L.opt_len+3+7>>>3,(ke=L.static_len+3+7>>>3)<=oe&&(oe=ke)):oe=ke=_e+5,_e+4<=oe&&X!==-1?M(L,X,_e,we):L.strategy===4||ke===oe?(de(L,2+(we?1:0),3),qe(L,he,N)):(de(L,4+(we?1:0),3),function(Ee,ze,tt,Ze){var Ot;for(de(Ee,ze-257,5),de(Ee,tt-1,5),de(Ee,Ze-4,4),Ot=0;Ot<Ze;Ot++)de(Ee,Ee.bl_tree[2*z[Ot]+1],3);ge(Ee,Ee.dyn_ltree,ze-1),ge(Ee,Ee.dyn_dtree,tt-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Le+1),qe(L,L.dyn_ltree,L.dyn_dtree)),je(L),we&&me(L)},s._tr_tally=function(L,X,_e){return L.pending_buf[L.d_buf+2*L.last_lit]=X>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&X,L.pending_buf[L.l_buf+L.last_lit]=255&_e,L.last_lit++,X===0?L.dyn_ltree[2*_e]++:(L.matches++,X--,L.dyn_ltree[2*(T[_e]+f+1)]++,L.dyn_dtree[2*ee(X)]++),L.last_lit===L.lit_bufsize-1},s._tr_align=function(L){de(L,2,3),le(L,b,he),function(X){X.bi_valid===16?(K(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,u,c,f,p=1,m={},_=!1,v=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){y(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,O=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=O,C}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(C){o.postMessage(f+C,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){c.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(C){var O=v.createElement("script");O.onreadystatechange=function(){y(C),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):function(C){setTimeout(y,0,C)},w.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var O=new Array(arguments.length-1),I=0;I<O.length;I++)O[I]=arguments[I+1];var R={callback:C,args:O};return m[p]=R,l(p),p++},w.clearImmediate=g}function g(C){delete m[C]}function y(C){if(_)setTimeout(y,0,C);else{var O=m[C];if(O){_=!0;try{(function(I){var R=I.callback,$=I.args;switch($.length){case 0:R();break;case 1:R($[0]);break;case 2:R($[0],$[1]);break;case 3:R($[0],$[1],$[2]);break;default:R.apply(a,$)}})(O)}finally{g(C),_=!1}}}}function b(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(f)===0&&y(+C.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof en<"u"?en:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(AC);var B5=AC.exports;const Mx=of(B5),U5=()=>{const[e,t]=S.useState(!1),[n,r]=S.useState([]),s=S.useRef(null),i=S.useCallback(async u=>{if(!u||u.length===0){r(f=>[...f,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let f=0;f<u.length;f++){const p=u[f];if(p.type==="application/zip"||p.name.endsWith(".zip"))try{const m=await Mx.loadAsync(p),_=Object.values(m.files);for(const v of _)if(!v.dir&&v.name.endsWith(".json"))try{const w=await v.async("string"),g=JSON.parse(w),y=v.name.split("/").pop()||"unknown.json",b=y.replace(/\.json$/,"");localStorage.setItem(b,JSON.stringify(g)),c.push({success:!0,message:`Successfully extracted and stored "${y}" with key "${b}" from ZIP.`})}catch(w){const g=w instanceof Error?w.message:"Unknown error";c.push({success:!1,message:`Error processing file "${v.name}" from ZIP: ${g}`})}else v.dir||c.push({success:!1,message:`Skipped non-JSON file "${v.name}" from ZIP.`})}catch(m){const _=m instanceof Error?m.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${p.name}": ${_}`})}else if(p.type==="application/json"||p.name.endsWith(".json"))try{const m=new FileReader,_=await new Promise((y,b)=>{m.onload=()=>y(m.result),m.onerror=b,m.readAsText(p)}),v=JSON.parse(_),g=p.name.replace(/\.json$/,"");localStorage.setItem(g,JSON.stringify(v)),c.push({success:!0,message:`Successfully stored "${p.name}" with key "${g}".`})}catch(m){const _=m instanceof Error?m.message:"Unknown error";c.push({success:!1,message:`Error processing file "${p.name}": ${_}`})}else c.push({success:!1,message:`File "${p.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(f=>[...f,...c]),t(!1)}},[]),o=u=>{i(u.target.files),s.current&&(s.current.value="")},a=()=>{r([])},l=S.useCallback(async()=>{t(!0);try{debugger;const u=new Mx;let c=!1,f=null;const p=localStorage.getItem("sankeertan_categories_data");if(p)try{f=JSON.parse(p),u.file("sankeertan_categories_data.json",p),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),f=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const m={};for(let g=0;g<localStorage.length;g++){debugger;const y=localStorage.key(g);if(console.log(y),y!=="sb-"+N1+"-auth-token"&&y&&y!=="sankeertan_categories_data"){const b=localStorage.getItem(y);if(b)try{JSON.parse(b);let C=u;if(f&&Array.isArray(f.data))for(const O of f.data)for(const I of O.books){const R=I.bookId,$=`sankeertan_song_details-${R.toLowerCase().replace(/ /g,"-")}`,F=`sankeertan_song_indices-${R.toLowerCase().replace(/ /g,"-")}`;if(y.startsWith($)||y.startsWith(F)){if(!m[R]){const z=u.folder(R);z?m[R]=z:m[R]=u}C=m[R]||u;break}}C.file(`${y}.json`,b),c=!0}catch{console.warn(`Skipping key "${y}" as value is not valid JSON`)}}}if(!c){r(g=>[...g,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const _=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),v=URL.createObjectURL(_),w=document.createElement("a");w.href=v,w.download="sankeertan_localStorage_backup.zip",document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(v),r(g=>[...g,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(f=>[...f,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return k.jsxs("div",{className:"p-4",children:[k.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:s}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),k.jsx("div",{className:"mb-4",children:k.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&k.jsx("div",{className:"mb-4 flex items-center gap-2",children:k.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&k.jsxs("div",{className:"mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>k.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?k.jsx("span",{style:{color:"green"},children:""}):k.jsx("span",{style:{color:"red"},children:""}),k.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),k.jsx("span",{children:u.message})]},c)),k.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),k.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),k.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},nr=({children:e,session:t})=>{const n=Yn();return t?k.jsx(k.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),k.jsx(A1,{to:"/login",replace:!0}))};function z5(){const{session:e}=xi(),{categories:t,isLoading:n}=Df(),r=(t==null?void 0:t.flatMap(s=>s.books))||[];return n?k.jsx("div",{children:"Checking authentication..."}):k.jsx(AS,{children:k.jsx(ED,{books:r,children:k.jsxs(JA,{children:[k.jsx(Yt,{path:"/login",element:k.jsx(vI,{})}),k.jsx(Yt,{path:"/signup",element:k.jsx(wI,{})}),k.jsx(Yt,{path:"/change-password",element:k.jsx(bI,{})}),k.jsx(Yt,{path:"/auth/callback",element:k.jsx(_I,{})}),k.jsx(Yt,{path:"/settings",element:k.jsx(nr,{session:e,children:k.jsx(w5,{})})}),k.jsx(Yt,{path:"/categories",element:k.jsx(nr,{session:e,children:k.jsx(kD,{})})}),k.jsx(Yt,{path:"/books/:categoryId",element:k.jsx(nr,{session:e,children:k.jsx($D,{})})}),k.jsx(Yt,{path:"/book/:categoryId/:bookId",element:k.jsx(nr,{session:e,children:k.jsx(ZD,{})})}),k.jsx(Yt,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(nr,{session:e,children:k.jsx(S5,{})})}),k.jsx(Yt,{path:"/editor/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(nr,{session:e,children:k.jsx(Lx,{})})}),k.jsx(Yt,{path:"/song-editor",element:k.jsx(nr,{session:e,children:k.jsx(Lx,{})})}),k.jsx(Yt,{path:"/sankeertan/:broadcastId",element:k.jsx(nr,{session:e,children:k.jsx(P5,{broadcastId:1})})}),k.jsx(Yt,{path:"/localstoragesync",element:k.jsx(nr,{session:e,children:k.jsx(U5,{})})}),k.jsx(Yt,{path:"/bulkDownloadTester",element:k.jsx(nr,{session:e,children:k.jsx(L5,{})})}),k.jsx(Yt,{path:"/offlineContentManager",element:k.jsx(nr,{session:e,children:k.jsx(F5,{})})}),k.jsx(Yt,{path:"/search",element:k.jsx(nr,{session:e,children:k.jsx(D5,{})})}),k.jsx(Yt,{path:"/",element:e?k.jsx(A1,{to:"/categories",replace:!0}):k.jsx("div",{children:"Welcome!"})})]})})})}const V5=S.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),K5=({children:e})=>{const[t,n]=S.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,s]=S.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[i,o]=S.useState(null),[a,l]=S.useState(!1),[u,c]=S.useState(null),{bookId:f}=Ba(),p=S.useCallback(async _=>{l(!0),c(null),o(null),await new Promise(w=>setTimeout(w,500));const v=t.find(w=>w.id===_);o(v||null),l(!1)},[t,l,c,o]);S.useEffect(()=>{f&&p(f)},[f,p]);const m={books:t,categories:r,currentBook:i,loadBook:p,loading:a,error:u};return k.jsx(V5.Provider,{value:m,children:e})},W5=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var l;const[r,s]=S.useState(null);Jn(),S.useEffect(()=>{zt.auth.getSession().then(({data:{session:u}})=>{s(u)}),zt.auth.onAuthStateChange((u,c)=>{s(c)})},[]);const{handleSignOut:i}=CS(),{isOfflineMode:o,setIsOfflineMode:a}=Vy();return k.jsx("div",{className:"relative inline-block text-left",children:r?k.jsxs("div",{children:[k.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((l=r.user)==null?void 0:l.email)||"User",k.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&k.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:k.jsxs("div",{className:"py-1",children:[k.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:o,onChange:u=>a(u.target.checked)}),k.jsx("span",{children:"Offline Mode"})]})}),k.jsx(Vn,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),k.jsx(Vn,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),k.jsx(Vn,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),k.jsx(Vn,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),k.jsx(Vn,{to:"/song-editor",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Song Editor"}),k.jsx(Vn,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),k.jsx("button",{onClick:i,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):k.jsx(Vn,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var H5=Object.defineProperty,q5=(e,t,n)=>t in e?H5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cp=(e,t,n)=>(q5(e,typeof t!="symbol"?t+"":t,n),n);let G5=class{constructor(){Cp(this,"current",this.detect()),Cp(this,"handoffState","pending"),Cp(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Jr=new G5;function Wu(e){var t;return Jr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function kg(e){var t,n;return Jr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function jC(e){var t,n;return(n=(t=kg(e))==null?void 0:t.activeElement)!=null?n:null}function Q5(e){return jC(e)===e}function zf(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Es(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return zf(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Es();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function Vf(){let[e]=S.useState(Es);return S.useEffect(()=>()=>e.dispose(),[e]),e}let $n=(e,t)=>{Jr.isServer?S.useEffect(e,t):S.useLayoutEffect(e,t)};function xo(e){let t=S.useRef(e);return $n(()=>{t.current=e},[e]),t}let ft=function(e){let t=xo(e);return Ve.useCallback((...n)=>t.current(...n),[t])};function Hu(e){return S.useMemo(()=>e,Object.values(e))}let Y5=S.createContext(void 0);function J5(){return S.useContext(Y5)}function Sg(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function ks(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ks),r}var nf=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(nf||{}),ei=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ei||{});function gr(){let e=X5();return S.useCallback(t=>Z5({mergeRefs:e,...t}),[e])}function Z5({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??e4;let l=OC(t,e);if(i)return Gc(l,n,r,o,a);let u=s??0;if(u&2){let{static:c=!1,...f}=l;if(c)return Gc(f,n,r,o,a)}if(u&1){let{unmount:c=!0,...f}=l;return ks(c?0:1,{0(){return null},1(){return Gc({...f,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return Gc(l,n,r,o,a)}function Gc(e,t={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=Tp(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[_,v]of Object.entries(t))typeof v=="boolean"&&(p=!0),v===!0&&m.push(_.replace(/([A-Z])/g,w=>`-${w.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let _ of m)f[`data-${_}`]=""}}if(Hl(i)&&(Object.keys($i(l)).length>0||Object.keys($i(f)).length>0))if(!S.isValidElement(c)||Array.isArray(c)&&c.length>1||n4(c)){if(Object.keys($i(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys($i(l)).concat(Object.keys($i(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=c.props,m=p==null?void 0:p.className,_=typeof m=="function"?(...g)=>Sg(m(...g),l.className):Sg(m,l.className),v=_?{className:_}:{},w=OC(c.props,$i(Tp(l,["ref"])));for(let g in f)g in w&&delete f[g];return S.cloneElement(c,Object.assign({},w,f,u,{ref:s(t4(c),u.ref)},v))}return S.createElement(i,Object.assign({},Tp(l,["ref"]),!Hl(i)&&u,!Hl(i)&&f),c)}function X5(){let e=S.useRef([]),t=S.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function e4(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function OC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return t}function Mn(e){var t;return Object.assign(S.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function $i(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Tp(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function t4(e){return Ve.version.split(".")[0]>="19"?e.props.ref:e.ref}function Hl(e){return e===S.Fragment||e===Symbol.for("react.fragment")}function n4(e){return Hl(e.type)}let r4="span";var rf=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(rf||{});function s4(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return gr()({ourProps:i,theirProps:s,slot:{},defaultTag:r4,name:"Hidden"})}let Eg=Mn(s4);function i4(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function di(e){return i4(e)&&"tagName"in e}function mo(e){return di(e)&&"accessKey"in e}function ti(e){return di(e)&&"tabIndex"in e}function o4(e){return di(e)&&"style"in e}function a4(e){return mo(e)&&e.nodeName==="IFRAME"}function l4(e){return mo(e)&&e.nodeName==="INPUT"}let RC=Symbol();function u4(e,t=!0){return Object.assign(e,{[RC]:t})}function Zr(...e){let t=S.useRef(e);S.useEffect(()=>{t.current=e},[e]);let n=ft(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[RC]))?void 0:n}let Pv=S.createContext(null);Pv.displayName="DescriptionContext";function IC(){let e=S.useContext(Pv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,IC),t}return e}function c4(){let[e,t]=S.useState([]);return[e.length>0?e.join(" "):void 0,S.useMemo(()=>function(n){let r=ft(i=>(t(o=>[...o,i]),()=>t(o=>{let a=o.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),s=S.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Ve.createElement(Pv.Provider,{value:s},n.children)},[t])]}let d4="p";function f4(e,t){let n=S.useId(),r=J5(),{id:s=`headlessui-description-${n}`,...i}=e,o=IC(),a=Zr(t);$n(()=>o.register(s),[s,o.register]);let l=Hu({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:s};return gr()({ourProps:u,theirProps:i,slot:l,defaultTag:d4,name:o.name||"Description"})}let h4=Mn(f4),p4=Object.assign(h4,{});var DC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(DC||{});let m4=S.createContext(()=>{});function g4({value:e,children:t}){return Ve.createElement(m4.Provider,{value:e},t)}let NC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var y4=Object.defineProperty,v4=(e,t,n)=>t in e?y4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w4=(e,t,n)=>(v4(e,t+"",n),n),LC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rr=(e,t,n)=>(LC(e,t,"read from private field"),n?n.call(e):t.get(e)),Pp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Fx=(e,t,n,r)=>(LC(e,t,"write to private field"),t.set(e,n),n),Fr,Cl,Tl;let b4=class{constructor(t){Pp(this,Fr,{}),Pp(this,Cl,new NC(()=>new Set)),Pp(this,Tl,new Set),w4(this,"disposables",Es()),Fx(this,Fr,t),Jr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return rr(this,Fr)}subscribe(t,n){if(Jr.isServer)return()=>{};let r={selector:t,callback:n,current:t(rr(this,Fr))};return rr(this,Tl).add(r),this.disposables.add(()=>{rr(this,Tl).delete(r)})}on(t,n){return Jr.isServer?()=>{}:(rr(this,Cl).get(t).add(n),this.disposables.add(()=>{rr(this,Cl).get(t).delete(n)}))}send(t){let n=this.reduce(rr(this,Fr),t);if(n!==rr(this,Fr)){Fx(this,Fr,n);for(let r of rr(this,Tl)){let s=r.selector(rr(this,Fr));$C(r.current,s)||(r.current=s,r.callback(s))}for(let r of rr(this,Cl).get(t.type))r(rr(this,Fr),t)}}};Fr=new WeakMap,Cl=new WeakMap,Tl=new WeakMap;function $C(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Ap(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Ap(e.entries(),t.entries()):Bx(e)&&Bx(t)?Ap(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Ap(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Bx(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var x4=Object.defineProperty,_4=(e,t,n)=>t in e?x4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ux=(e,t,n)=>(_4(e,typeof t!="symbol"?t+"":t,n),n),k4=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(k4||{});let S4={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},E4=class MC extends b4{constructor(){super(...arguments),Ux(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Ux(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new MC({stack:[]})}reduce(t,n){return ks(n.type,S4,t,n)}};const FC=new NC(()=>E4.new());var BC={exports:{}},UC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=S;function C4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var T4=typeof Object.is=="function"?Object.is:C4,P4=qu.useSyncExternalStore,A4=qu.useRef,j4=qu.useEffect,O4=qu.useMemo,R4=qu.useDebugValue;UC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=A4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=O4(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),s!==void 0&&o.hasValue){var _=o.value;if(s(_,m))return f=_}return f=m}if(_=f,T4(c,m))return _;var v=r(m);return s!==void 0&&s(_,v)?(c=m,_):(c=m,f=v)}var u=!1,c,f,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,s]);var a=P4(e,i[0],i[1]);return j4(function(){o.hasValue=!0,o.value=a},[a]),R4(a),a};BC.exports=UC;var I4=BC.exports;function zC(e,t,n=$C){return I4.useSyncExternalStoreWithSelector(ft(r=>e.subscribe(D4,r)),ft(()=>e.state),ft(()=>e.state),ft(t),n)}function D4(e){return e}function Gu(e,t){let n=S.useId(),r=FC.get(t),[s,i]=zC(r,S.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return $n(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let Cg=new Map,ql=new Map;function zx(e){var t;let n=(t=ql.get(e))!=null?t:0;return ql.set(e,n+1),n!==0?()=>Vx(e):(Cg.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Vx(e))}function Vx(e){var t;let n=(t=ql.get(e))!=null?t:1;if(n===1?ql.delete(e):ql.set(e,n-1),n!==1)return;let r=Cg.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Cg.delete(e))}function N4(e,{allowed:t,disallowed:n}={}){let r=Gu(e,"inert-others");$n(()=>{var s,i;if(!r)return;let o=Es();for(let l of(s=n==null?void 0:n())!=null?s:[])l&&o.add(zx(l));let a=(i=t==null?void 0:t())!=null?i:[];for(let l of a){if(!l)continue;let u=Wu(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let f of c.children)a.some(p=>f.contains(p))||o.add(zx(f));c=c.parentElement}}return o.dispose},[r,t,n])}function L4(e,t,n){let r=xo(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});S.useEffect(()=>{if(!e)return;let s=t===null?null:mo(t)?t:t.current;if(!s)return;let i=Es();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let sf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),$4=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var us=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(us||{}),Tg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Tg||{}),M4=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(M4||{});function F4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(sf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function B4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll($4)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var VC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(VC||{});function U4(e,t=0){var n;return e===((n=Wu(e))==null?void 0:n.body)?!1:ks(t,{0(){return e.matches(sf)},1(){let r=e;for(;r!==null;){if(r.matches(sf))return!0;r=r.parentElement}return!1}})}var z4=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(z4||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ps(e){e==null||e.focus({preventScroll:!0})}let V4=["textarea","input"].join(",");function K4(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,V4))!=null?n:!1}function W4(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Gl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?kg(e[0]):document:kg(e),o=Array.isArray(e)?n?W4(e):e:t&64?B4(e):F4(e);s.length>0&&o.length>1&&(o=o.filter(m=>!s.some(_=>_!=null&&"current"in _?(_==null?void 0:_.current)===m:_===m))),r=r??(i==null?void 0:i.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,p;do{if(c>=f||c+f<=0)return 0;let m=l+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=o[m],p==null||p.focus(u),c+=a}while(p!==jC(p));return t&6&&K4(p)&&p.select(),2}function KC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function H4(){return/Android/gi.test(window.navigator.userAgent)}function Kx(){return KC()||H4()}function Qc(e,t,n,r){let s=xo(n);S.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function WC(e,t,n,r){let s=xo(n);S.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Wx=30;function q4(e,t,n){let r=xo(n),s=S.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(t);for(let f of c)if(f!==null&&(f.contains(u)||a.composed&&a.composedPath().includes(f)))return;return!U4(u,VC.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),i=S.useRef(null);Qc(e,"pointerdown",a=>{var l,u;Kx()||(i.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),Qc(e,"pointerup",a=>{if(Kx()||!i.current)return;let l=i.current;return i.current=null,s(a,()=>l)},!0);let o=S.useRef({x:0,y:0});Qc(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),Qc(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=Wx||Math.abs(l.y-o.current.y)>=Wx))return s(a,()=>ti(a.target)?a.target:null)},!0),WC(e,"blur",a=>s(a,()=>a4(window.document.activeElement)?window.document.activeElement:null),!0)}function Av(...e){return S.useMemo(()=>Wu(...e),[...e])}function HC(e,t,n,r){let s=xo(n);S.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function G4(e){return S.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Q4(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function Y4(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function J4(){return KC()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Es();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(ti(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);ti(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),ti(l.target)&&o4(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(ti(a.target)){if(l4(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Z4(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Hx(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Gi=Q4(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Es(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Hx(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Hx(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[J4(),Y4(),Z4()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Gi.subscribe(()=>{let e=Gi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Gi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Gi.dispatch("TEARDOWN",n)}});function X4(e,t,n=()=>({containers:[]})){let r=G4(Gi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return $n(()=>{if(!(!t||!e))return Gi.dispatch("PUSH",t,n),()=>Gi.dispatch("POP",t,n)},[e,t]),i}function eB(e,t,n=()=>[document.body]){let r=Gu(e,"scroll-lock");X4(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function tB(e=0){let[t,n]=S.useState(e),r=S.useCallback(l=>n(l),[]),s=S.useCallback(l=>n(u=>u|l),[]),i=S.useCallback(l=>(t&l)===l,[t]),o=S.useCallback(l=>n(u=>u&~l),[]),a=S.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var nB={},qx,Gx;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((qx=process==null?void 0:nB)==null?void 0:qx.NODE_ENV)==="test"&&typeof((Gx=Element==null?void 0:Element.prototype)==null?void 0:Gx.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var rB=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(rB||{});function sB(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function iB(e,t,n,r){let[s,i]=S.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=tB(e&&s?3:0),u=S.useRef(!1),c=S.useRef(!1),f=Vf();return $n(()=>{var p;if(e){if(n&&i(!0),!t){n&&a(3);return}return(p=r==null?void 0:r.start)==null||p.call(r,n),oB(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;c.current&&uB(t)||(u.current=!1,l(7),n||i(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function oB(e,{prepare:t,run:n,done:r,inFlight:s}){let i=Es();return lB(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(aB(e,r))})}),i.dispose}function aB(e,t){var n,r;let s=Es();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||t()}),s.dispose)}function lB(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function uB(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function jv(e,t){let n=S.useRef([]),r=ft(e);S.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let a=r(t,s);return n.current=t,a}},[r,...t])}let Kf=S.createContext(null);Kf.displayName="OpenClosedContext";var Ar=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ar||{});function Wf(){return S.useContext(Kf)}function cB({value:e,children:t}){return Ve.createElement(Kf.Provider,{value:e},t)}function dB({children:e}){return Ve.createElement(Kf.Provider,{value:null},e)}function fB(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vs=[];fB(()=>{function e(t){if(!ti(t.target)||t.target===document.body||Vs[0]===t.target)return;let n=t.target;n=n.closest(sf),Vs.unshift(n??t.target),Vs=Vs.filter(r=>r!=null&&r.isConnected),Vs.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function qC(e){let t=ft(e),n=S.useRef(!1);S.useEffect(()=>(n.current=!1,()=>{n.current=!0,zf(()=>{n.current&&t()})}),[t])}let GC=S.createContext(!1);function hB(){return S.useContext(GC)}function Qx(e){return Ve.createElement(GC.Provider,{value:e.force},e.children)}function pB(e){let t=hB(),n=S.useContext(YC),[r,s]=S.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Jr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return S.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),S.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let QC=S.Fragment,mB=Mn(function(e,t){let{ownerDocument:n=null,...r}=e,s=S.useRef(null),i=Zr(u4(p=>{s.current=p}),t),o=Av(s.current),a=n??o,l=pB(a),u=S.useContext(Pg),c=Vf(),f=gr();return qC(()=>{var p;l&&l.childNodes.length<=0&&((p=l.parentElement)==null||p.removeChild(l))}),l?Ey.createPortal(Ve.createElement("div",{"data-headlessui-portal":"",ref:p=>{c.dispose(),u&&p&&c.add(u.register(p))}},f({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:QC,name:"Portal"})),l):null});function gB(e,t){let n=Zr(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=gr();return r?Ve.createElement(mB,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:QC,name:"Portal"})}let yB=S.Fragment,YC=S.createContext(null);function vB(e,t){let{target:n,...r}=e,s={ref:Zr(t)},i=gr();return Ve.createElement(YC.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:yB,name:"Popover.Group"}))}let Pg=S.createContext(null);function wB(){let e=S.useContext(Pg),t=S.useRef([]),n=ft(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ft(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=S.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,S.useMemo(()=>function({children:i}){return Ve.createElement(Pg.Provider,{value:s},i)},[s])]}let bB=Mn(gB),JC=Mn(vB),xB=Object.assign(bB,{Group:JC});function _B(e,t=typeof document<"u"?document.defaultView:null,n){let r=Gu(e,"escape");HC(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===DC.Escape&&n(s))})}function kB(){var e;let[t]=S.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=S.useState((e=t==null?void 0:t.matches)!=null?e:!1);return $n(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function SB({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ft(()=>{var s,i;let o=Wu(n),a=[];for(let l of e)l!==null&&(di(l)?a.push(l):"current"in l&&di(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(s=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&di(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:ft(s=>r().some(i=>i.contains(s)))}}let ZC=S.createContext(null);function Yx({children:e,node:t}){let[n,r]=S.useState(null),s=XC(t??n);return Ve.createElement(ZC.Provider,{value:s},e,s===null&&Ve.createElement(Eg,{features:rf.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=Wu(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&di(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function XC(e=null){var t;return(t=S.useContext(ZC))!=null?t:e}function EB(){let e=typeof document>"u";return"useSyncExternalStore"in m0?(t=>t.useSyncExternalStore)(m0)(()=>()=>{},()=>!1,()=>!e):!1}function Hf(){let e=EB(),[t,n]=S.useState(Jr.isHandoffComplete);return t&&Jr.isHandoffComplete===!1&&n(!1),S.useEffect(()=>{t!==!0&&n(!0)},[t]),S.useEffect(()=>Jr.handoff(),[]),e?!1:t}function Ov(){let e=S.useRef(!1);return $n(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Pl=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pl||{});function CB(){let e=S.useRef(0);return WC(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function eT(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)di(n.current)&&t.add(n.current);return t}let TB="div";var Bi=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Bi||{});function PB(e,t){let n=S.useRef(null),r=Zr(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...l}=e;Hf()||(a=0);let u=Av(n.current);RB(a,{ownerDocument:u});let c=IB(a,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:i});DB(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let f=CB(),p=ft(y=>{if(!mo(n.current))return;let b=n.current;(C=>C())(()=>{ks(f.current,{[Pl.Forwards]:()=>{Gl(b,us.First,{skipElements:[y.relatedTarget,i]})},[Pl.Backwards]:()=>{Gl(b,us.Last,{skipElements:[y.relatedTarget,i]})}})})}),m=Gu(!!(a&2),"focus-trap#tab-lock"),_=Vf(),v=S.useRef(!1),w={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,_.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){if(!(a&4))return;let b=eT(o);mo(n.current)&&b.add(n.current);let C=y.relatedTarget;ti(C)&&C.dataset.headlessuiFocusGuard!=="true"&&(tT(b,C)||(v.current?Gl(n.current,ks(f.current,{[Pl.Forwards]:()=>us.Next,[Pl.Backwards]:()=>us.Previous})|us.WrapAround,{relativeTo:y.target}):ti(y.target)&&ps(y.target)))}},g=gr();return Ve.createElement(Ve.Fragment,null,m&&Ve.createElement(Eg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:rf.Focusable}),g({ourProps:w,theirProps:l,defaultTag:TB,name:"FocusTrap"}),m&&Ve.createElement(Eg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:rf.Focusable}))}let AB=Mn(PB),jB=Object.assign(AB,{features:Bi});function OB(e=!0){let t=S.useRef(Vs.slice());return jv(([n],[r])=>{r===!0&&n===!1&&zf(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Vs.slice())},[e,Vs,t]),ft(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function RB(e,{ownerDocument:t}){let n=!!(e&8),r=OB(n);jv(()=>{n||Q5(t==null?void 0:t.body)&&ps(r())},[n]),qC(()=>{n&&ps(r())})}function IB(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=S.useRef(null),o=Gu(!!(e&1),"focus-trap#initial-focus"),a=Ov();return jv(()=>{if(e===0)return;if(!o){s!=null&&s.current&&ps(s.current);return}let l=n.current;l&&zf(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){i.current=u;return}}else if(l.contains(u)){i.current=u;return}if(r!=null&&r.current)ps(r.current);else{if(e&16){if(Gl(l,us.First|us.AutoFocus)!==Tg.Error)return}else if(Gl(l,us.First)!==Tg.Error)return;if(s!=null&&s.current&&(ps(s.current),(t==null?void 0:t.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[s,o,e]),i}function DB(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=Ov(),o=!!(e&4);HC(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!i.current)return;let l=eT(r);mo(n.current)&&l.add(n.current);let u=s.current;if(!u)return;let c=a.target;mo(c)?tT(l,c)?(s.current=c,ps(c)):(a.preventDefault(),a.stopPropagation(),ps(u)):ps(s.current)},!0)}function tT(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function nT(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Hl((t=e.as)!=null?t:sT)||Ve.Children.count(e.children)===1}let qf=S.createContext(null);qf.displayName="TransitionContext";var NB=(e=>(e.Visible="visible",e.Hidden="hidden",e))(NB||{});function LB(){let e=S.useContext(qf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $B(){let e=S.useContext(Gf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Gf=S.createContext(null);Gf.displayName="NestingContext";function Qf(e){return"children"in e?Qf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function rT(e,t){let n=xo(e),r=S.useRef([]),s=Ov(),i=Vf(),o=ft((m,_=ei.Hidden)=>{let v=r.current.findIndex(({el:w})=>w===m);v!==-1&&(ks(_,{[ei.Unmount](){r.current.splice(v,1)},[ei.Hidden](){r.current[v].state="hidden"}}),i.microTask(()=>{var w;!Qf(r)&&s.current&&((w=n.current)==null||w.call(n))}))}),a=ft(m=>{let _=r.current.find(({el:v})=>v===m);return _?_.state!=="visible"&&(_.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,ei.Unmount)}),l=S.useRef([]),u=S.useRef(Promise.resolve()),c=S.useRef({enter:[],leave:[]}),f=ft((m,_,v)=>{l.current.splice(0),t&&(t.chains.current[_]=t.chains.current[_].filter(([w])=>w!==m)),t==null||t.chains.current[_].push([m,new Promise(w=>{l.current.push(w)})]),t==null||t.chains.current[_].push([m,new Promise(w=>{Promise.all(c.current[_].map(([g,y])=>y)).then(()=>w())})]),_==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(_)):v(_)}),p=ft((m,_,v)=>{Promise.all(c.current[_].splice(0).map(([w,g])=>g)).then(()=>{var w;(w=l.current.shift())==null||w()}).then(()=>v(_))});return S.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:p,wait:u,chains:c}),[a,o,r,f,p,c,u])}let sT=S.Fragment,iT=nf.RenderStrategy;function MB(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:f,entered:p,leave:m,leaveFrom:_,leaveTo:v,...w}=e,[g,y]=S.useState(null),b=S.useRef(null),C=nT(e),O=Zr(...C?[b,t,y]:t===null?[]:[t]),I=(n=w.unmount)==null||n?ei.Unmount:ei.Hidden,{show:R,appear:$,initial:F}=LB(),[z,he]=S.useState(R?"visible":"hidden"),N=$B(),{register:J,unregister:T}=N;$n(()=>J(b),[J,b]),$n(()=>{if(I===ei.Hidden&&b.current){if(R&&z!=="visible"){he("visible");return}return ks(z,{hidden:()=>T(b),visible:()=>J(b)})}},[z,b,J,T,R,I]);let G=Hf();$n(()=>{if(C&&G&&z==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,z,G,C]);let ve=F&&!$,ae=$&&R&&F,ce=S.useRef(!1),se=rT(()=>{ce.current||(he("hidden"),T(b))},N),ye=ft(Fe=>{ce.current=!0;let je=Fe?"enter":"leave";se.onStart(b,je,me=>{me==="enter"?i==null||i():me==="leave"&&(a==null||a())})}),Z=ft(Fe=>{let je=Fe?"enter":"leave";ce.current=!1,se.onStop(b,je,me=>{me==="enter"?o==null||o():me==="leave"&&(l==null||l())}),je==="leave"&&!Qf(se)&&(he("hidden"),T(b))});S.useEffect(()=>{C&&s||(ye(R),Z(R))},[R,C,s]);let ee=!(!s||!C||!G||ve),[,K]=iB(ee,g,R,{start:ye,end:Z}),de=$i({ref:O,className:((r=Sg(w.className,ae&&u,ae&&c,K.enter&&u,K.enter&&K.closed&&c,K.enter&&!K.closed&&f,K.leave&&m,K.leave&&!K.closed&&_,K.leave&&K.closed&&v,!K.transition&&R&&p))==null?void 0:r.trim())||void 0,...sB(K)}),le=0;z==="visible"&&(le|=Ar.Open),z==="hidden"&&(le|=Ar.Closed),R&&z==="hidden"&&(le|=Ar.Opening),!R&&z==="visible"&&(le|=Ar.Closing);let xe=gr();return Ve.createElement(Gf.Provider,{value:se},Ve.createElement(cB,{value:le},xe({ourProps:de,theirProps:w,defaultTag:sT,features:iT,visible:z==="visible",name:"Transition.Child"})))}function FB(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=S.useRef(null),a=nT(e),l=Zr(...a?[o,t]:t===null?[]:[t]);Hf();let u=Wf();if(n===void 0&&u!==null&&(n=(u&Ar.Open)===Ar.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,f]=S.useState(n?"visible":"hidden"),p=rT(()=>{n||f("hidden")}),[m,_]=S.useState(!0),v=S.useRef([n]);$n(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),_(!1))},[v,n]);let w=S.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);$n(()=>{n?f("visible"):!Qf(p)&&o.current!==null&&f("hidden")},[n,p]);let g={unmount:s},y=ft(()=>{var O;m&&_(!1),(O=e.beforeEnter)==null||O.call(e)}),b=ft(()=>{var O;m&&_(!1),(O=e.beforeLeave)==null||O.call(e)}),C=gr();return Ve.createElement(Gf.Provider,{value:p},Ve.createElement(qf.Provider,{value:w},C({ourProps:{...g,as:S.Fragment,children:Ve.createElement(oT,{ref:l,...g,...i,beforeEnter:y,beforeLeave:b})},theirProps:{},defaultTag:S.Fragment,features:iT,visible:c==="visible",name:"Transition"})))}function BB(e,t){let n=S.useContext(qf)!==null,r=Wf()!==null;return Ve.createElement(Ve.Fragment,null,!n&&r?Ve.createElement(Ag,{ref:t,...e}):Ve.createElement(oT,{ref:t,...e}))}let Ag=Mn(FB),oT=Mn(MB),Rv=Mn(BB),yd=Object.assign(Ag,{Child:Rv,Root:Ag});var UB=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(UB||{}),zB=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(zB||{});let VB={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Iv=S.createContext(null);Iv.displayName="DialogContext";function Yf(e){let t=S.useContext(Iv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yf),n}return t}function KB(e,t){return ks(t.type,VB,e,t)}let Jx=Mn(function(e,t){let n=S.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...f}=e,p=S.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Wf();s===void 0&&m!==null&&(s=(m&Ar.Open)===Ar.Open);let _=S.useRef(null),v=Zr(_,t),w=Av(_.current),g=s?0:1,[y,b]=S.useReducer(KB,{titleId:null,descriptionId:null,panelRef:S.createRef()}),C=ft(()=>i(!1)),O=ft(K=>b({type:0,id:K})),I=Hf()?g===0:!1,[R,$]=wB(),F={get current(){var K;return(K=y.panelRef.current)!=null?K:_.current}},z=XC(),{resolveContainers:he}=SB({mainTreeNode:z,portals:R,defaultContainers:[F]}),N=m!==null?(m&Ar.Closing)===Ar.Closing:!1;N4(u||N?!1:I,{allowed:ft(()=>{var K,de;return[(de=(K=_.current)==null?void 0:K.closest("[data-headlessui-portal]"))!=null?de:null]}),disallowed:ft(()=>{var K;return[(K=z==null?void 0:z.closest("body > *:not(#headlessui-portal-root)"))!=null?K:null]})});let J=FC.get(null);$n(()=>{if(I)return J.actions.push(r),()=>J.actions.pop(r)},[J,r,I]);let T=zC(J,S.useCallback(K=>J.selectors.isTop(K,r),[J,r]));q4(T,he,K=>{K.preventDefault(),C()}),_B(T,w==null?void 0:w.defaultView,K=>{K.preventDefault(),K.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),eB(u||N?!1:I,w,he),L4(I,_,C);let[G,ve]=c4(),ae=S.useMemo(()=>[{dialogState:g,close:C,setTitleId:O,unmount:c},y],[g,C,O,c,y]),ce=Hu({open:g===0}),se={ref:v,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:g===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":G,unmount:c},ye=!kB(),Z=Bi.None;I&&!u&&(Z|=Bi.RestoreFocus,Z|=Bi.TabLock,l&&(Z|=Bi.AutoFocus),ye&&(Z|=Bi.InitialFocus));let ee=gr();return Ve.createElement(dB,null,Ve.createElement(Qx,{force:!0},Ve.createElement(xB,null,Ve.createElement(Iv.Provider,{value:ae},Ve.createElement(JC,{target:_},Ve.createElement(Qx,{force:!1},Ve.createElement(ve,{slot:ce},Ve.createElement($,null,Ve.createElement(jB,{initialFocus:o,initialFocusFallback:_,containers:he,features:Z},Ve.createElement(g4,{value:C},ee({ourProps:se,theirProps:f,slot:ce,defaultTag:WB,features:HB,visible:g===0,name:"Dialog"})))))))))))}),WB="div",HB=nf.RenderStrategy|nf.Static;function qB(e,t){let{transition:n=!1,open:r,...s}=e,i=Wf(),o=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?Ve.createElement(Yx,null,Ve.createElement(yd,{show:r,transition:n,unmount:s.unmount},Ve.createElement(Jx,{ref:t,...s}))):Ve.createElement(Yx,null,Ve.createElement(Jx,{ref:t,open:r,...s}))}let GB="div";function QB(e,t){let n=S.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:a},l]=Yf("Dialog.Panel"),u=Zr(t,l.panelRef),c=Hu({open:o===0}),f=ft(w=>{w.stopPropagation()}),p={ref:u,id:r,onClick:f},m=s?Rv:S.Fragment,_=s?{unmount:a}:{},v=gr();return Ve.createElement(m,{..._},v({ourProps:p,theirProps:i,slot:c,defaultTag:GB,name:"Dialog.Panel"}))}let YB="div";function JB(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=Yf("Dialog.Backdrop"),o=Hu({open:s===0}),a={ref:t,"aria-hidden":!0},l=n?Rv:S.Fragment,u=n?{unmount:i}:{},c=gr();return Ve.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:YB,name:"Dialog.Backdrop"}))}let ZB="h2";function XB(e,t){let n=S.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=Yf("Dialog.Title"),a=Zr(t);S.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Hu({open:i===0}),u={ref:a,id:r};return gr()({ourProps:u,theirProps:s,slot:l,defaultTag:ZB,name:"Dialog.Title"})}let eU=Mn(qB),tU=Mn(QB);Mn(JB);let nU=Mn(XB),jp=Object.assign(eU,{Panel:tU,Title:nU,Description:p4});const rU=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r})=>{const[s,i]=S.useState(r),o=l=>{i(l.target.value)},a=()=>{n(s),t()};return k.jsx(yd,{appear:!0,show:e,as:S.Fragment,children:k.jsxs(jp,{as:"div",className:"relative z-10",onClose:t,children:[k.jsxs(yd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})," "]}),k.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:k.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:k.jsx(yd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:k.jsxs(jp.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[k.jsx(jp.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),k.jsxs("div",{className:"mt-2",children:[k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"iast",checked:s==="iast",onChange:o,className:"mr-2"}),"IAST"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:s==="tamil_superscripted",onChange:o,className:"mr-2"}),"Tamil"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:s==="malayalam",onChange:o,className:"mr-2"}),"Malayalam"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:s==="devanagari",onChange:o,className:"mr-2"}),"Devanagari"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"itrans",checked:s==="itrans",onChange:o,className:"mr-2"}),"ITrans"]}),k.jsx("br",{})]}),k.jsxs("div",{className:"mt-4",children:[k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Save"})]})]})})})})]})})},sU=()=>{const[e,t]=S.useState(navigator.onLine);S.useEffect(()=>{const f=()=>t(!0),p=()=>t(!1);return window.addEventListener("online",f),window.addEventListener("offline",p),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{console.log("Service Worker is active:",m.active)}),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[]);const{preferredLanguage:n,setPreferredLanguage:r}=bo(),[s,i]=S.useState(!1),o=()=>i(!s),[a,l]=S.useState(!1),u=()=>l(!0),c=()=>l(!1);return k.jsx(yI,{children:k.jsxs("div",{className:"app-layout",children:[" ",k.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:k.jsx(W5,{toggleDropdown:o,isDropdownOpen:s,openLanguageSettings:u})}),k.jsx(rU,{isOpen:a,onClose:c,onLanguageSave:r,currentLanguage:n}),k.jsx(xD,{children:k.jsxs(K5,{children:[k.jsx(z5,{}),k.jsx(v5,{})]})})]})})};function iU(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(f=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await Ua(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{i?i("/new-sankeertan/sw.js",f):s==null||s(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}iU();const oU=new HI({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),aU=Op.createRoot(document.getElementById("root"));aU.render(k.jsx(Ve.StrictMode,{children:k.jsx(qI,{client:oU,children:k.jsx(xj,{children:k.jsx(AS,{children:k.jsx(sU,{})})})})}));
