var qT=Object.defineProperty;var x0=e=>{throw TypeError(e)};var GT=(e,t,n)=>t in e?qT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var il=(e,t,n)=>GT(e,typeof t!="symbol"?t+"":t,n),Af=(e,t,n)=>t.has(e)||x0("Cannot "+n);var X=(e,t,n)=>(Af(e,t,"read from private field"),n?n.call(e):t.get(e)),Ge=(e,t,n)=>t.has(e)?x0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ue=(e,t,n,r)=>(Af(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),it=(e,t,n)=>(Af(e,t,"access private method"),n);var Ec=(e,t,n,r)=>({set _(s){Ue(e,t,s,n)},get _(){return X(e,t,r)}});function QT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ou(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function YT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var S_={exports:{}},hh={},E_={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=Symbol.for("react.element"),JT=Symbol.for("react.portal"),ZT=Symbol.for("react.fragment"),XT=Symbol.for("react.strict_mode"),e2=Symbol.for("react.profiler"),t2=Symbol.for("react.provider"),n2=Symbol.for("react.context"),r2=Symbol.for("react.forward_ref"),s2=Symbol.for("react.suspense"),i2=Symbol.for("react.memo"),o2=Symbol.for("react.lazy"),_0=Symbol.iterator;function a2(e){return e===null||typeof e!="object"?null:(e=_0&&e[_0]||e["@@iterator"],typeof e=="function"?e:null)}var C_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T_=Object.assign,P_={};function La(e,t,n){this.props=e,this.context=t,this.refs=P_,this.updater=n||C_}La.prototype.isReactComponent={};La.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};La.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j_(){}j_.prototype=La.prototype;function Bg(e,t,n){this.props=e,this.context=t,this.refs=P_,this.updater=n||C_}var Ug=Bg.prototype=new j_;Ug.constructor=Bg;T_(Ug,La.prototype);Ug.isPureReactComponent=!0;var k0=Array.isArray,R_=Object.prototype.hasOwnProperty,zg={current:null},A_={key:!0,ref:!0,__self:!0,__source:!0};function O_(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)R_.call(t,r)&&!A_.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Iu,type:e,key:i,ref:o,props:s,_owner:zg.current}}function l2(e,t){return{$$typeof:Iu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Iu}function u2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var S0=/\/+/g;function Of(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u2(""+e.key):t.toString(36)}function rd(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Iu:case JT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Of(o,0):r,k0(s)?(n="",e!=null&&(n=e.replace(S0,"$&/")+"/"),rd(s,t,n,"",function(u){return u})):s!=null&&(Vg(s)&&(s=l2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(S0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",k0(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Of(i,a);o+=rd(i,t,n,l,s)}else if(l=a2(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Of(i,a++),o+=rd(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Cc(e,t,n){if(e==null)return e;var r=[],s=0;return rd(e,r,"","",function(i){return t.call(n,i,s++)}),r}function c2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tn={current:null},sd={transition:null},d2={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:sd,ReactCurrentOwner:zg};function I_(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Cc,forEach:function(e,t,n){Cc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cc(e,function(){t++}),t},toArray:function(e){return Cc(e,function(t){return t})||[]},only:function(e){if(!Vg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=La;nt.Fragment=ZT;nt.Profiler=e2;nt.PureComponent=Bg;nt.StrictMode=XT;nt.Suspense=s2;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d2;nt.act=I_;nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=T_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=zg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)R_.call(t,l)&&!A_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Iu,type:e.type,key:s,ref:i,props:r,_owner:o}};nt.createContext=function(e){return e={$$typeof:n2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t2,_context:e},e.Consumer=e};nt.createElement=O_;nt.createFactory=function(e){var t=O_.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:r2,render:e}};nt.isValidElement=Vg;nt.lazy=function(e){return{$$typeof:o2,_payload:{_status:-1,_result:e},_init:c2}};nt.memo=function(e,t){return{$$typeof:i2,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=sd.transition;sd.transition={};try{e()}finally{sd.transition=t}};nt.unstable_act=I_;nt.useCallback=function(e,t){return Tn.current.useCallback(e,t)};nt.useContext=function(e){return Tn.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return Tn.current.useDeferredValue(e)};nt.useEffect=function(e,t){return Tn.current.useEffect(e,t)};nt.useId=function(){return Tn.current.useId()};nt.useImperativeHandle=function(e,t,n){return Tn.current.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Tn.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Tn.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Tn.current.useMemo(e,t)};nt.useReducer=function(e,t,n){return Tn.current.useReducer(e,t,n)};nt.useRef=function(e){return Tn.current.useRef(e)};nt.useState=function(e){return Tn.current.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Tn.current.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Tn.current.useTransition()};nt.version="18.3.1";E_.exports=nt;var S=E_.exports;const We=Ou(S),E0=QT({__proto__:null,default:We},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2=S,f2=Symbol.for("react.element"),p2=Symbol.for("react.fragment"),m2=Object.prototype.hasOwnProperty,g2=h2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y2={key:!0,ref:!0,__self:!0,__source:!0};function D_(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)m2.call(t,r)&&!y2.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:f2,type:e,key:i,ref:o,props:s,_owner:g2.current}}hh.Fragment=p2;hh.jsx=D_;hh.jsxs=D_;S_.exports=hh;var b=S_.exports,Fp={},N_={exports:{}},Xn={},L_={exports:{}},$_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,K){var de=W.length;W.push(K);e:for(;0<de;){var H=de-1>>>1,G=W[H];if(0<s(G,K))W[H]=K,W[de]=G,de=H;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var K=W[0],de=W.pop();if(de!==K){W[0]=de;e:for(var H=0,G=W.length,ve=G>>>1;H<ve;){var q=2*(H+1)-1,ue=W[q],se=q+1,ye=W[se];if(0>s(ue,de))se<G&&0>s(ye,ue)?(W[H]=ye,W[se]=de,H=se):(W[H]=ue,W[q]=de,H=q);else if(se<G&&0>s(ye,de))W[H]=ye,W[se]=de,H=se;else break e}}return K}function s(W,K){var de=W.sortIndex-K.sortIndex;return de!==0?de:W.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,p=!1,w=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(W){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=W)r(u),K.sortIndex=K.expirationTime,t(l,K);else break;K=n(u)}}function C(W){if(g=!1,_(W),!w)if(n(l)!==null)w=!0,we(R);else{var K=n(u);K!==null&&z(C,K.startTime-W)}}function R(W,K){w=!1,g&&(g=!1,y(D),D=-1),p=!0;var de=f;try{for(_(K),h=n(l);h!==null&&(!(h.expirationTime>K)||W&&!he());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var G=H(h.expirationTime<=K);K=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),_(K)}else r(l);h=n(l)}if(h!==null)var ve=!0;else{var q=n(u);q!==null&&z(C,q.startTime-K),ve=!1}return ve}finally{h=null,f=de,p=!1}}var O=!1,I=null,D=-1,$=5,F=-1;function he(){return!(e.unstable_now()-F<$)}function N(){if(I!==null){var W=e.unstable_now();F=W;var K=!0;try{K=I(!0,W)}finally{K?J():(O=!1,I=null)}}else O=!1}var J;if(typeof v=="function")J=function(){v(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Q=j.port2;j.port1.onmessage=N,J=function(){Q.postMessage(null)}}else J=function(){x(N,0)};function we(W){I=W,O||(O=!0,J())}function z(W,K){D=x(function(){W(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,we(R))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(W){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var de=f;f=K;try{return W()}finally{f=de}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,K){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var de=f;f=W;try{return K()}finally{f=de}},e.unstable_scheduleCallback=function(W,K,de){var H=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?H+de:H):de=H,W){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=de+G,W={id:c++,callback:K,priorityLevel:W,startTime:de,expirationTime:G,sortIndex:-1},de>H?(W.sortIndex=de,t(u,W),n(l)===null&&W===n(u)&&(g?(y(D),D=-1):g=!0,z(C,de-H))):(W.sortIndex=G,t(l,W),w||p||(w=!0,we(R))),W},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(W){var K=f;return function(){var de=f;f=K;try{return W.apply(this,arguments)}finally{f=de}}}})($_);L_.exports=$_;var v2=L_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2=S,Jn=v2;function Ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M_=new Set,Xl={};function vo(e,t){Ea(e,t),Ea(e+"Capture",t)}function Ea(e,t){for(Xl[e]=t,e=0;e<t.length;e++)M_.add(t[e])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bp=Object.prototype.hasOwnProperty,b2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C0={},T0={};function x2(e){return Bp.call(T0,e)?!0:Bp.call(C0,e)?!1:b2.test(e)?T0[e]=!0:(C0[e]=!0,!1)}function _2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k2(e,t,n,r){if(t===null||typeof t>"u"||_2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new Pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kg=/[\-:]([a-z])/g;function Wg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kg,Wg);an[t]=new Pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kg,Wg);an[t]=new Pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kg,Wg);an[t]=new Pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hg(e,t,n,r){var s=an.hasOwnProperty(t)?an[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k2(t,n,s,r)&&(n=null),r||s===null?x2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Es=w2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Vo=Symbol.for("react.fragment"),qg=Symbol.for("react.strict_mode"),Up=Symbol.for("react.profiler"),F_=Symbol.for("react.provider"),B_=Symbol.for("react.context"),Gg=Symbol.for("react.forward_ref"),zp=Symbol.for("react.suspense"),Vp=Symbol.for("react.suspense_list"),Qg=Symbol.for("react.memo"),Bs=Symbol.for("react.lazy"),U_=Symbol.for("react.offscreen"),P0=Symbol.iterator;function ol(e){return e===null||typeof e!="object"?null:(e=P0&&e[P0]||e["@@iterator"],typeof e=="function"?e:null)}var Rt=Object.assign,If;function _l(e){if(If===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);If=t&&t[1]||""}return`
`+If+e}var Df=!1;function Nf(e,t){if(!e||Df)return"";Df=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Df=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_l(e):""}function S2(e){switch(e.tag){case 5:return _l(e.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 2:case 15:return e=Nf(e.type,!1),e;case 11:return e=Nf(e.type.render,!1),e;case 1:return e=Nf(e.type,!0),e;default:return""}}function Kp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vo:return"Fragment";case zo:return"Portal";case Up:return"Profiler";case qg:return"StrictMode";case zp:return"Suspense";case Vp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B_:return(e.displayName||"Context")+".Consumer";case F_:return(e._context.displayName||"Context")+".Provider";case Gg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qg:return t=e.displayName||null,t!==null?t:Kp(e.type)||"Memo";case Bs:t=e._payload,e=e._init;try{return Kp(e(t))}catch{}}return null}function E2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kp(t);case 8:return t===qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function C2(e){var t=z_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pc(e){e._valueTracker||(e._valueTracker=C2(e))}function V_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ed(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wp(e,t){var n=t.checked;return Rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function j0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=mi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K_(e,t){t=t.checked,t!=null&&Hg(e,"checked",t,!1)}function Hp(e,t){K_(e,t);var n=mi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qp(e,t.type,n):t.hasOwnProperty("defaultValue")&&qp(e,t.type,mi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function R0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function qp(e,t,n){(t!=="number"||Ed(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kl=Array.isArray;function ia(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Gp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function A0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ce(92));if(kl(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:mi(n)}}function W_(e,t){var n=mi(t.value),r=mi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function O0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function H_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?H_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jc,q_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jc=jc||document.createElement("div"),jc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function eu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T2=["Webkit","ms","Moz","O"];Object.keys(Il).forEach(function(e){T2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Il[t]=Il[e]})});function G_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Il.hasOwnProperty(e)&&Il[e]?(""+t).trim():t+"px"}function Q_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=G_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var P2=Rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yp(e,t){if(t){if(P2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ce(62))}}function Jp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=null;function Yg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xp=null,oa=null,aa=null;function I0(e){if(e=Lu(e)){if(typeof Xp!="function")throw Error(Ce(280));var t=e.stateNode;t&&(t=yh(t),Xp(e.stateNode,e.type,t))}}function Y_(e){oa?aa?aa.push(e):aa=[e]:oa=e}function J_(){if(oa){var e=oa,t=aa;if(aa=oa=null,I0(e),t)for(e=0;e<t.length;e++)I0(t[e])}}function Z_(e,t){return e(t)}function X_(){}var Lf=!1;function ek(e,t,n){if(Lf)return e(t,n);Lf=!0;try{return Z_(e,t,n)}finally{Lf=!1,(oa!==null||aa!==null)&&(X_(),J_())}}function tu(e,t){var n=e.stateNode;if(n===null)return null;var r=yh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ce(231,t,typeof n));return n}var em=!1;if(gs)try{var al={};Object.defineProperty(al,"passive",{get:function(){em=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{em=!1}function j2(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Dl=!1,Cd=null,Td=!1,tm=null,R2={onError:function(e){Dl=!0,Cd=e}};function A2(e,t,n,r,s,i,o,a,l){Dl=!1,Cd=null,j2.apply(R2,arguments)}function O2(e,t,n,r,s,i,o,a,l){if(A2.apply(this,arguments),Dl){if(Dl){var u=Cd;Dl=!1,Cd=null}else throw Error(Ce(198));Td||(Td=!0,tm=u)}}function wo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function D0(e){if(wo(e)!==e)throw Error(Ce(188))}function I2(e){var t=e.alternate;if(!t){if(t=wo(e),t===null)throw Error(Ce(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return D0(s),e;if(i===r)return D0(s),t;i=i.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?e:t}function nk(e){return e=I2(e),e!==null?rk(e):null}function rk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rk(e);if(t!==null)return t;e=e.sibling}return null}var sk=Jn.unstable_scheduleCallback,N0=Jn.unstable_cancelCallback,D2=Jn.unstable_shouldYield,N2=Jn.unstable_requestPaint,$t=Jn.unstable_now,L2=Jn.unstable_getCurrentPriorityLevel,Jg=Jn.unstable_ImmediatePriority,ik=Jn.unstable_UserBlockingPriority,Pd=Jn.unstable_NormalPriority,$2=Jn.unstable_LowPriority,ok=Jn.unstable_IdlePriority,fh=null,qr=null;function M2(e){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(fh,e,void 0,(e.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:U2,F2=Math.log,B2=Math.LN2;function U2(e){return e>>>=0,e===0?32:31-(F2(e)/B2|0)|0}var Rc=64,Ac=4194304;function Sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Sl(a):(i&=o,i!==0&&(r=Sl(i)))}else o=n&~s,o!==0?r=Sl(o):i!==0&&(r=Sl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rr(t),s=1<<n,r|=e[n],t&=~s;return r}function z2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V2(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Rr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=z2(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function nm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ak(){var e=Rc;return Rc<<=1,!(Rc&4194240)&&(Rc=64),e}function $f(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Du(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rr(t),e[t]=n}function K2(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Rr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Zg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ft=0;function lk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uk,Xg,ck,dk,hk,rm=!1,Oc=[],ii=null,oi=null,ai=null,nu=new Map,ru=new Map,zs=[],W2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L0(e,t){switch(e){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":nu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(t.pointerId)}}function ll(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Lu(t),t!==null&&Xg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function H2(e,t,n,r,s){switch(t){case"focusin":return ii=ll(ii,e,t,n,r,s),!0;case"dragenter":return oi=ll(oi,e,t,n,r,s),!0;case"mouseover":return ai=ll(ai,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return nu.set(i,ll(nu.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ru.set(i,ll(ru.get(i)||null,e,t,n,r,s)),!0}return!1}function fk(e){var t=zi(e.target);if(t!==null){var n=wo(t);if(n!==null){if(t=n.tag,t===13){if(t=tk(n),t!==null){e.blockedOn=t,hk(e.priority,function(){ck(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function id(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=sm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Zp=r,n.target.dispatchEvent(r),Zp=null}else return t=Lu(n),t!==null&&Xg(t),e.blockedOn=n,!1;t.shift()}return!0}function $0(e,t,n){id(e)&&n.delete(t)}function q2(){rm=!1,ii!==null&&id(ii)&&(ii=null),oi!==null&&id(oi)&&(oi=null),ai!==null&&id(ai)&&(ai=null),nu.forEach($0),ru.forEach($0)}function ul(e,t){e.blockedOn===t&&(e.blockedOn=null,rm||(rm=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,q2)))}function su(e){function t(s){return ul(s,e)}if(0<Oc.length){ul(Oc[0],e);for(var n=1;n<Oc.length;n++){var r=Oc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ii!==null&&ul(ii,e),oi!==null&&ul(oi,e),ai!==null&&ul(ai,e),nu.forEach(t),ru.forEach(t),n=0;n<zs.length;n++)r=zs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zs.length&&(n=zs[0],n.blockedOn===null);)fk(n),n.blockedOn===null&&zs.shift()}var la=Es.ReactCurrentBatchConfig,Rd=!0;function G2(e,t,n,r){var s=ft,i=la.transition;la.transition=null;try{ft=1,ey(e,t,n,r)}finally{ft=s,la.transition=i}}function Q2(e,t,n,r){var s=ft,i=la.transition;la.transition=null;try{ft=4,ey(e,t,n,r)}finally{ft=s,la.transition=i}}function ey(e,t,n,r){if(Rd){var s=sm(e,t,n,r);if(s===null)qf(e,t,r,Ad,n),L0(e,r);else if(H2(s,e,t,n,r))r.stopPropagation();else if(L0(e,r),t&4&&-1<W2.indexOf(e)){for(;s!==null;){var i=Lu(s);if(i!==null&&uk(i),i=sm(e,t,n,r),i===null&&qf(e,t,r,Ad,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qf(e,t,r,null,n)}}var Ad=null;function sm(e,t,n,r){if(Ad=null,e=Yg(r),e=zi(e),e!==null)if(t=wo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ad=e,null}function pk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L2()){case Jg:return 1;case ik:return 4;case Pd:case $2:return 16;case ok:return 536870912;default:return 16}default:return 16}}var ti=null,ty=null,od=null;function mk(){if(od)return od;var e,t=ty,n=t.length,r,s="value"in ti?ti.value:ti.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return od=s.slice(e,1<r?1-r:void 0)}function ad(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ic(){return!0}function M0(){return!1}function er(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ic:M0,this.isPropagationStopped=M0,this}return Rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ic)},persist:function(){},isPersistent:Ic}),t}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ny=er($a),Nu=Rt({},$a,{view:0,detail:0}),Y2=er(Nu),Mf,Ff,cl,ph=Rt({},Nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ry,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cl&&(cl&&e.type==="mousemove"?(Mf=e.screenX-cl.screenX,Ff=e.screenY-cl.screenY):Ff=Mf=0,cl=e),Mf)},movementY:function(e){return"movementY"in e?e.movementY:Ff}}),F0=er(ph),J2=Rt({},ph,{dataTransfer:0}),Z2=er(J2),X2=Rt({},Nu,{relatedTarget:0}),Bf=er(X2),eP=Rt({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),tP=er(eP),nP=Rt({},$a,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rP=er(nP),sP=Rt({},$a,{data:0}),B0=er(sP),iP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=aP[e])?!!t[e]:!1}function ry(){return lP}var uP=Rt({},Nu,{key:function(e){if(e.key){var t=iP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ad(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ry,charCode:function(e){return e.type==="keypress"?ad(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ad(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cP=er(uP),dP=Rt({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U0=er(dP),hP=Rt({},Nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ry}),fP=er(hP),pP=Rt({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),mP=er(pP),gP=Rt({},ph,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yP=er(gP),vP=[9,13,27,32],sy=gs&&"CompositionEvent"in window,Nl=null;gs&&"documentMode"in document&&(Nl=document.documentMode);var wP=gs&&"TextEvent"in window&&!Nl,gk=gs&&(!sy||Nl&&8<Nl&&11>=Nl),z0=" ",V0=!1;function yk(e,t){switch(e){case"keyup":return vP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ko=!1;function bP(e,t){switch(e){case"compositionend":return vk(t);case"keypress":return t.which!==32?null:(V0=!0,z0);case"textInput":return e=t.data,e===z0&&V0?null:e;default:return null}}function xP(e,t){if(Ko)return e==="compositionend"||!sy&&yk(e,t)?(e=mk(),od=ty=ti=null,Ko=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gk&&t.locale!=="ko"?null:t.data;default:return null}}var _P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_P[e.type]:t==="textarea"}function wk(e,t,n,r){Y_(r),t=Od(t,"onChange"),0<t.length&&(n=new ny("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ll=null,iu=null;function kP(e){Rk(e,0)}function mh(e){var t=qo(e);if(V_(t))return e}function SP(e,t){if(e==="change")return t}var bk=!1;if(gs){var Uf;if(gs){var zf="oninput"in document;if(!zf){var W0=document.createElement("div");W0.setAttribute("oninput","return;"),zf=typeof W0.oninput=="function"}Uf=zf}else Uf=!1;bk=Uf&&(!document.documentMode||9<document.documentMode)}function H0(){Ll&&(Ll.detachEvent("onpropertychange",xk),iu=Ll=null)}function xk(e){if(e.propertyName==="value"&&mh(iu)){var t=[];wk(t,iu,e,Yg(e)),ek(kP,t)}}function EP(e,t,n){e==="focusin"?(H0(),Ll=t,iu=n,Ll.attachEvent("onpropertychange",xk)):e==="focusout"&&H0()}function CP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mh(iu)}function TP(e,t){if(e==="click")return mh(t)}function PP(e,t){if(e==="input"||e==="change")return mh(t)}function jP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Or=typeof Object.is=="function"?Object.is:jP;function ou(e,t){if(Or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bp.call(t,s)||!Or(e[s],t[s]))return!1}return!0}function q0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function G0(e,t){var n=q0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q0(n)}}function _k(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_k(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kk(){for(var e=window,t=Ed();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ed(e.document)}return t}function iy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RP(e){var t=kk(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_k(n.ownerDocument.documentElement,n)){if(r!==null&&iy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=G0(n,i);var o=G0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AP=gs&&"documentMode"in document&&11>=document.documentMode,Wo=null,im=null,$l=null,om=!1;function Q0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;om||Wo==null||Wo!==Ed(r)||(r=Wo,"selectionStart"in r&&iy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$l&&ou($l,r)||($l=r,r=Od(im,"onSelect"),0<r.length&&(t=new ny("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Wo)))}function Dc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ho={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Vf={},Sk={};gs&&(Sk=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function gh(e){if(Vf[e])return Vf[e];if(!Ho[e])return e;var t=Ho[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sk)return Vf[e]=t[n];return e}var Ek=gh("animationend"),Ck=gh("animationiteration"),Tk=gh("animationstart"),Pk=gh("transitionend"),jk=new Map,Y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(e,t){jk.set(e,t),vo(t,[e])}for(var Kf=0;Kf<Y0.length;Kf++){var Wf=Y0[Kf],OP=Wf.toLowerCase(),IP=Wf[0].toUpperCase()+Wf.slice(1);wi(OP,"on"+IP)}wi(Ek,"onAnimationEnd");wi(Ck,"onAnimationIteration");wi(Tk,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(Pk,"onTransitionEnd");Ea("onMouseEnter",["mouseout","mouseover"]);Ea("onMouseLeave",["mouseout","mouseover"]);Ea("onPointerEnter",["pointerout","pointerover"]);Ea("onPointerLeave",["pointerout","pointerover"]);vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DP=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function J0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,O2(r,t,void 0,e),e.currentTarget=null}function Rk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;J0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;J0(s,a,u),i=l}}}if(Td)throw e=tm,Td=!1,tm=null,e}function vt(e,t){var n=t[dm];n===void 0&&(n=t[dm]=new Set);var r=e+"__bubble";n.has(r)||(Ak(t,e,2,!1),n.add(r))}function Hf(e,t,n){var r=0;t&&(r|=4),Ak(n,e,r,t)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function au(e){if(!e[Nc]){e[Nc]=!0,M_.forEach(function(n){n!=="selectionchange"&&(DP.has(n)||Hf(n,!1,e),Hf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nc]||(t[Nc]=!0,Hf("selectionchange",!1,t))}}function Ak(e,t,n,r){switch(pk(t)){case 1:var s=G2;break;case 4:s=Q2;break;default:s=ey}n=s.bind(null,t,n,e),s=void 0,!em||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qf(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=zi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ek(function(){var u=i,c=Yg(n),h=[];e:{var f=jk.get(e);if(f!==void 0){var p=ny,w=e;switch(e){case"keypress":if(ad(n)===0)break e;case"keydown":case"keyup":p=cP;break;case"focusin":w="focus",p=Bf;break;case"focusout":w="blur",p=Bf;break;case"beforeblur":case"afterblur":p=Bf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=F0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Z2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fP;break;case Ek:case Ck:case Tk:p=tP;break;case Pk:p=mP;break;case"scroll":p=Y2;break;case"wheel":p=yP;break;case"copy":case"cut":case"paste":p=rP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=U0}var g=(t&4)!==0,x=!g&&e==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,_;v!==null;){_=v;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,y!==null&&(C=tu(v,y),C!=null&&g.push(lu(v,C,_)))),x)break;v=v.return}0<g.length&&(f=new p(f,w,null,n,c),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Zp&&(w=n.relatedTarget||n.fromElement)&&(zi(w)||w[ys]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=u,w=w?zi(w):null,w!==null&&(x=wo(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(g=F0,C="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=U0,C="onPointerLeave",y="onPointerEnter",v="pointer"),x=p==null?f:qo(p),_=w==null?f:qo(w),f=new g(C,v+"leave",p,n,c),f.target=x,f.relatedTarget=_,C=null,zi(c)===u&&(g=new g(y,v+"enter",w,n,c),g.target=_,g.relatedTarget=x,C=g),x=C,p&&w)t:{for(g=p,y=w,v=0,_=g;_;_=Oo(_))v++;for(_=0,C=y;C;C=Oo(C))_++;for(;0<v-_;)g=Oo(g),v--;for(;0<_-v;)y=Oo(y),_--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Oo(g),y=Oo(y)}g=null}else g=null;p!==null&&Z0(h,f,p,g,!1),w!==null&&x!==null&&Z0(h,x,w,g,!0)}}e:{if(f=u?qo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var R=SP;else if(K0(f))if(bk)R=PP;else{R=CP;var O=EP}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=TP);if(R&&(R=R(e,u))){wk(h,R,n,c);break e}O&&O(e,f,u),e==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&qp(f,"number",f.value)}switch(O=u?qo(u):window,e){case"focusin":(K0(O)||O.contentEditable==="true")&&(Wo=O,im=u,$l=null);break;case"focusout":$l=im=Wo=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,Q0(h,n,c);break;case"selectionchange":if(AP)break;case"keydown":case"keyup":Q0(h,n,c)}var I;if(sy)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Ko?yk(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(gk&&n.locale!=="ko"&&(Ko||D!=="onCompositionStart"?D==="onCompositionEnd"&&Ko&&(I=mk()):(ti=c,ty="value"in ti?ti.value:ti.textContent,Ko=!0)),O=Od(u,D),0<O.length&&(D=new B0(D,e,null,n,c),h.push({event:D,listeners:O}),I?D.data=I:(I=vk(n),I!==null&&(D.data=I)))),(I=wP?bP(e,n):xP(e,n))&&(u=Od(u,"onBeforeInput"),0<u.length&&(c=new B0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=I))}Rk(h,t)})}function lu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Od(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=tu(e,n),i!=null&&r.unshift(lu(e,i,s)),i=tu(e,t),i!=null&&r.push(lu(e,i,s))),e=e.return}return r}function Oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Z0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=tu(n,i),l!=null&&o.unshift(lu(n,l,a))):s||(l=tu(n,i),l!=null&&o.push(lu(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var NP=/\r\n?/g,LP=/\u0000|\uFFFD/g;function X0(e){return(typeof e=="string"?e:""+e).replace(NP,`
`).replace(LP,"")}function Lc(e,t,n){if(t=X0(t),X0(e)!==t&&n)throw Error(Ce(425))}function Id(){}var am=null,lm=null;function um(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cm=typeof setTimeout=="function"?setTimeout:void 0,$P=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,MP=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(e){return ew.resolve(null).then(e).catch(FP)}:cm;function FP(e){setTimeout(function(){throw e})}function Gf(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),su(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);su(t)}function li(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Ma,uu="__reactProps$"+Ma,ys="__reactContainer$"+Ma,dm="__reactEvents$"+Ma,BP="__reactListeners$"+Ma,UP="__reactHandles$"+Ma;function zi(e){var t=e[Wr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ys]||n[Wr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tw(e);e!==null;){if(n=e[Wr])return n;e=tw(e)}return t}e=n,n=e.parentNode}return null}function Lu(e){return e=e[Wr]||e[ys],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ce(33))}function yh(e){return e[uu]||null}var hm=[],Go=-1;function bi(e){return{current:e}}function wt(e){0>Go||(e.current=hm[Go],hm[Go]=null,Go--)}function yt(e,t){Go++,hm[Go]=e.current,e.current=t}var gi={},wn=bi(gi),Mn=bi(!1),uo=gi;function Ca(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fn(e){return e=e.childContextTypes,e!=null}function Dd(){wt(Mn),wt(wn)}function nw(e,t,n){if(wn.current!==gi)throw Error(Ce(168));yt(wn,t),yt(Mn,n)}function Ok(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Ce(108,E2(e)||"Unknown",s));return Rt({},n,r)}function Nd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,uo=wn.current,yt(wn,e),yt(Mn,Mn.current),!0}function rw(e,t,n){var r=e.stateNode;if(!r)throw Error(Ce(169));n?(e=Ok(e,t,uo),r.__reactInternalMemoizedMergedChildContext=e,wt(Mn),wt(wn),yt(wn,e)):wt(Mn),yt(Mn,n)}var as=null,vh=!1,Qf=!1;function Ik(e){as===null?as=[e]:as.push(e)}function zP(e){vh=!0,Ik(e)}function xi(){if(!Qf&&as!==null){Qf=!0;var e=0,t=ft;try{var n=as;for(ft=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}as=null,vh=!1}catch(s){throw as!==null&&(as=as.slice(e+1)),sk(Jg,xi),s}finally{ft=t,Qf=!1}}return null}var Qo=[],Yo=0,Ld=null,$d=0,lr=[],ur=0,co=null,ds=1,hs="";function Di(e,t){Qo[Yo++]=$d,Qo[Yo++]=Ld,Ld=e,$d=t}function Dk(e,t,n){lr[ur++]=ds,lr[ur++]=hs,lr[ur++]=co,co=e;var r=ds;e=hs;var s=32-Rr(r)-1;r&=~(1<<s),n+=1;var i=32-Rr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ds=1<<32-Rr(t)+s|n<<s|r,hs=i+e}else ds=1<<i|n<<s|r,hs=e}function oy(e){e.return!==null&&(Di(e,1),Dk(e,1,0))}function ay(e){for(;e===Ld;)Ld=Qo[--Yo],Qo[Yo]=null,$d=Qo[--Yo],Qo[Yo]=null;for(;e===co;)co=lr[--ur],lr[ur]=null,hs=lr[--ur],lr[ur]=null,ds=lr[--ur],lr[ur]=null}var Yn=null,Qn=null,xt=!1,Pr=null;function Nk(e,t){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yn=e,Qn=li(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yn=e,Qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=co!==null?{id:ds,overflow:hs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yn=e,Qn=null,!0):!1;default:return!1}}function fm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pm(e){if(xt){var t=Qn;if(t){var n=t;if(!sw(e,t)){if(fm(e))throw Error(Ce(418));t=li(n.nextSibling);var r=Yn;t&&sw(e,t)?Nk(r,n):(e.flags=e.flags&-4097|2,xt=!1,Yn=e)}}else{if(fm(e))throw Error(Ce(418));e.flags=e.flags&-4097|2,xt=!1,Yn=e}}}function iw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yn=e}function $c(e){if(e!==Yn)return!1;if(!xt)return iw(e),xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!um(e.type,e.memoizedProps)),t&&(t=Qn)){if(fm(e))throw Lk(),Error(Ce(418));for(;t;)Nk(e,t),t=li(t.nextSibling)}if(iw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qn=li(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qn=null}}else Qn=Yn?li(e.stateNode.nextSibling):null;return!0}function Lk(){for(var e=Qn;e;)e=li(e.nextSibling)}function Ta(){Qn=Yn=null,xt=!1}function ly(e){Pr===null?Pr=[e]:Pr.push(e)}var VP=Es.ReactCurrentBatchConfig;function dl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,e))}return e}function Mc(e,t){throw e=Object.prototype.toString.call(t),Error(Ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ow(e){var t=e._init;return t(e._payload)}function $k(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=hi(y,v),y.index=0,y.sibling=null,y}function i(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,C){return v===null||v.tag!==6?(v=np(_,y.mode,C),v.return=y,v):(v=s(v,_),v.return=y,v)}function l(y,v,_,C){var R=_.type;return R===Vo?c(y,v,_.props.children,C,_.key):v!==null&&(v.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Bs&&ow(R)===v.type)?(C=s(v,_.props),C.ref=dl(y,v,_),C.return=y,C):(C=pd(_.type,_.key,_.props,null,y.mode,C),C.ref=dl(y,v,_),C.return=y,C)}function u(y,v,_,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=rp(_,y.mode,C),v.return=y,v):(v=s(v,_.children||[]),v.return=y,v)}function c(y,v,_,C,R){return v===null||v.tag!==7?(v=oo(_,y.mode,C,R),v.return=y,v):(v=s(v,_),v.return=y,v)}function h(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=np(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Tc:return _=pd(v.type,v.key,v.props,null,y.mode,_),_.ref=dl(y,null,v),_.return=y,_;case zo:return v=rp(v,y.mode,_),v.return=y,v;case Bs:var C=v._init;return h(y,C(v._payload),_)}if(kl(v)||ol(v))return v=oo(v,y.mode,_,null),v.return=y,v;Mc(y,v)}return null}function f(y,v,_,C){var R=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:a(y,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tc:return _.key===R?l(y,v,_,C):null;case zo:return _.key===R?u(y,v,_,C):null;case Bs:return R=_._init,f(y,v,R(_._payload),C)}if(kl(_)||ol(_))return R!==null?null:c(y,v,_,C,null);Mc(y,_)}return null}function p(y,v,_,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(_)||null,a(v,y,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Tc:return y=y.get(C.key===null?_:C.key)||null,l(v,y,C,R);case zo:return y=y.get(C.key===null?_:C.key)||null,u(v,y,C,R);case Bs:var O=C._init;return p(y,v,_,O(C._payload),R)}if(kl(C)||ol(C))return y=y.get(_)||null,c(v,y,C,R,null);Mc(v,C)}return null}function w(y,v,_,C){for(var R=null,O=null,I=v,D=v=0,$=null;I!==null&&D<_.length;D++){I.index>D?($=I,I=null):$=I.sibling;var F=f(y,I,_[D],C);if(F===null){I===null&&(I=$);break}e&&I&&F.alternate===null&&t(y,I),v=i(F,v,D),O===null?R=F:O.sibling=F,O=F,I=$}if(D===_.length)return n(y,I),xt&&Di(y,D),R;if(I===null){for(;D<_.length;D++)I=h(y,_[D],C),I!==null&&(v=i(I,v,D),O===null?R=I:O.sibling=I,O=I);return xt&&Di(y,D),R}for(I=r(y,I);D<_.length;D++)$=p(I,y,D,_[D],C),$!==null&&(e&&$.alternate!==null&&I.delete($.key===null?D:$.key),v=i($,v,D),O===null?R=$:O.sibling=$,O=$);return e&&I.forEach(function(he){return t(y,he)}),xt&&Di(y,D),R}function g(y,v,_,C){var R=ol(_);if(typeof R!="function")throw Error(Ce(150));if(_=R.call(_),_==null)throw Error(Ce(151));for(var O=R=null,I=v,D=v=0,$=null,F=_.next();I!==null&&!F.done;D++,F=_.next()){I.index>D?($=I,I=null):$=I.sibling;var he=f(y,I,F.value,C);if(he===null){I===null&&(I=$);break}e&&I&&he.alternate===null&&t(y,I),v=i(he,v,D),O===null?R=he:O.sibling=he,O=he,I=$}if(F.done)return n(y,I),xt&&Di(y,D),R;if(I===null){for(;!F.done;D++,F=_.next())F=h(y,F.value,C),F!==null&&(v=i(F,v,D),O===null?R=F:O.sibling=F,O=F);return xt&&Di(y,D),R}for(I=r(y,I);!F.done;D++,F=_.next())F=p(I,y,D,F.value,C),F!==null&&(e&&F.alternate!==null&&I.delete(F.key===null?D:F.key),v=i(F,v,D),O===null?R=F:O.sibling=F,O=F);return e&&I.forEach(function(N){return t(y,N)}),xt&&Di(y,D),R}function x(y,v,_,C){if(typeof _=="object"&&_!==null&&_.type===Vo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Tc:e:{for(var R=_.key,O=v;O!==null;){if(O.key===R){if(R=_.type,R===Vo){if(O.tag===7){n(y,O.sibling),v=s(O,_.props.children),v.return=y,y=v;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Bs&&ow(R)===O.type){n(y,O.sibling),v=s(O,_.props),v.ref=dl(y,O,_),v.return=y,y=v;break e}n(y,O);break}else t(y,O);O=O.sibling}_.type===Vo?(v=oo(_.props.children,y.mode,C,_.key),v.return=y,y=v):(C=pd(_.type,_.key,_.props,null,y.mode,C),C.ref=dl(y,v,_),C.return=y,y=C)}return o(y);case zo:e:{for(O=_.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=s(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=rp(_,y.mode,C),v.return=y,y=v}return o(y);case Bs:return O=_._init,x(y,v,O(_._payload),C)}if(kl(_))return w(y,v,_,C);if(ol(_))return g(y,v,_,C);Mc(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,_),v.return=y,y=v):(n(y,v),v=np(_,y.mode,C),v.return=y,y=v),o(y)):n(y,v)}return x}var Pa=$k(!0),Mk=$k(!1),Md=bi(null),Fd=null,Jo=null,uy=null;function cy(){uy=Jo=Fd=null}function dy(e){var t=Md.current;wt(Md),e._currentValue=t}function mm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ua(e,t){Fd=e,uy=Jo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ln=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(uy!==e)if(e={context:e,memoizedValue:t,next:null},Jo===null){if(Fd===null)throw Error(Ce(308));Jo=e,Fd.dependencies={lanes:0,firstContext:e}}else Jo=Jo.next=e;return t}var Vi=null;function hy(e){Vi===null?Vi=[e]:Vi.push(e)}function Fk(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,hy(t)):(n.next=s.next,s.next=n),t.interleaved=n,vs(e,r)}function vs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Us=!1;function fy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ui(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,vs(e,n)}return s=r.interleaved,s===null?(t.next=t,hy(r)):(t.next=s.next,s.next=t),r.interleaved=t,vs(e,n)}function ld(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zg(e,n)}}function aw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bd(e,t,n,r){var s=e.updateQueue;Us=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,g=a;switch(f=t,p=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Rt({},h,f);break e;case 2:Us=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);fo|=o,e.lanes=o,e.memoizedState=h}}function lw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ce(191,s));s.call(r)}}}var $u={},Gr=bi($u),cu=bi($u),du=bi($u);function Ki(e){if(e===$u)throw Error(Ce(174));return e}function py(e,t){switch(yt(du,t),yt(cu,e),yt(Gr,$u),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qp(t,e)}wt(Gr),yt(Gr,t)}function ja(){wt(Gr),wt(cu),wt(du)}function Uk(e){Ki(du.current);var t=Ki(Gr.current),n=Qp(t,e.type);t!==n&&(yt(cu,e),yt(Gr,n))}function my(e){cu.current===e&&(wt(Gr),wt(cu))}var Ct=bi(0);function Ud(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yf=[];function gy(){for(var e=0;e<Yf.length;e++)Yf[e]._workInProgressVersionPrimary=null;Yf.length=0}var ud=Es.ReactCurrentDispatcher,Jf=Es.ReactCurrentBatchConfig,ho=0,jt=null,Wt=null,Xt=null,zd=!1,Ml=!1,hu=0,KP=0;function pn(){throw Error(Ce(321))}function yy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Or(e[n],t[n]))return!1;return!0}function vy(e,t,n,r,s,i){if(ho=i,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ud.current=e===null||e.memoizedState===null?GP:QP,e=n(r,s),Ml){i=0;do{if(Ml=!1,hu=0,25<=i)throw Error(Ce(301));i+=1,Xt=Wt=null,t.updateQueue=null,ud.current=YP,e=n(r,s)}while(Ml)}if(ud.current=Vd,t=Wt!==null&&Wt.next!==null,ho=0,Xt=Wt=jt=null,zd=!1,t)throw Error(Ce(300));return e}function wy(){var e=hu!==0;return hu=0,e}function Br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?jt.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function yr(){if(Wt===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var t=Xt===null?jt.memoizedState:Xt.next;if(t!==null)Xt=t,Wt=e;else{if(e===null)throw Error(Ce(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Xt===null?jt.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function fu(e,t){return typeof t=="function"?t(e):t}function Zf(e){var t=yr(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=Wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((ho&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,jt.lanes|=c,fo|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Or(r,t.memoizedState)||(Ln=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,jt.lanes|=i,fo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xf(e){var t=yr(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Or(i,t.memoizedState)||(Ln=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function zk(){}function Vk(e,t){var n=jt,r=yr(),s=t(),i=!Or(r.memoizedState,s);if(i&&(r.memoizedState=s,Ln=!0),r=r.queue,by(Hk.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,pu(9,Wk.bind(null,n,r,s,t),void 0,null),en===null)throw Error(Ce(349));ho&30||Kk(n,t,s)}return s}function Kk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wk(e,t,n,r){t.value=n,t.getSnapshot=r,qk(t)&&Gk(e)}function Hk(e,t,n){return n(function(){qk(t)&&Gk(e)})}function qk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Or(e,n)}catch{return!0}}function Gk(e){var t=vs(e,1);t!==null&&Ar(t,e,1,-1)}function uw(e){var t=Br();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:e},t.queue=e,e=e.dispatch=qP.bind(null,jt,e),[t.memoizedState,e]}function pu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qk(){return yr().memoizedState}function cd(e,t,n,r){var s=Br();jt.flags|=e,s.memoizedState=pu(1|t,n,void 0,r===void 0?null:r)}function wh(e,t,n,r){var s=yr();r=r===void 0?null:r;var i=void 0;if(Wt!==null){var o=Wt.memoizedState;if(i=o.destroy,r!==null&&yy(r,o.deps)){s.memoizedState=pu(t,n,i,r);return}}jt.flags|=e,s.memoizedState=pu(1|t,n,i,r)}function cw(e,t){return cd(8390656,8,e,t)}function by(e,t){return wh(2048,8,e,t)}function Yk(e,t){return wh(4,2,e,t)}function Jk(e,t){return wh(4,4,e,t)}function Zk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xk(e,t,n){return n=n!=null?n.concat([e]):null,wh(4,4,Zk.bind(null,t,e),n)}function xy(){}function eS(e,t){var n=yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tS(e,t){var n=yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nS(e,t,n){return ho&21?(Or(n,t)||(n=ak(),jt.lanes|=n,fo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ln=!0),e.memoizedState=n)}function WP(e,t){var n=ft;ft=n!==0&&4>n?n:4,e(!0);var r=Jf.transition;Jf.transition={};try{e(!1),t()}finally{ft=n,Jf.transition=r}}function rS(){return yr().memoizedState}function HP(e,t,n){var r=di(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sS(e))iS(t,n);else if(n=Fk(e,t,n,r),n!==null){var s=Cn();Ar(n,e,r,s),oS(n,t,r)}}function qP(e,t,n){var r=di(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sS(e))iS(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Or(a,o)){var l=t.interleaved;l===null?(s.next=s,hy(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=Fk(e,t,s,r),n!==null&&(s=Cn(),Ar(n,e,r,s),oS(n,t,r))}}function sS(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function iS(e,t){Ml=zd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zg(e,n)}}var Vd={readContext:gr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},GP={readContext:gr,useCallback:function(e,t){return Br().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:cw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cd(4194308,4,Zk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cd(4194308,4,e,t)},useInsertionEffect:function(e,t){return cd(4,2,e,t)},useMemo:function(e,t){var n=Br();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Br();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=HP.bind(null,jt,e),[r.memoizedState,e]},useRef:function(e){var t=Br();return e={current:e},t.memoizedState=e},useState:uw,useDebugValue:xy,useDeferredValue:function(e){return Br().memoizedState=e},useTransition:function(){var e=uw(!1),t=e[0];return e=WP.bind(null,e[1]),Br().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jt,s=Br();if(xt){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=t(),en===null)throw Error(Ce(349));ho&30||Kk(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,cw(Hk.bind(null,r,i,e),[e]),r.flags|=2048,pu(9,Wk.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Br(),t=en.identifierPrefix;if(xt){var n=hs,r=ds;n=(r&~(1<<32-Rr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=KP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QP={readContext:gr,useCallback:eS,useContext:gr,useEffect:by,useImperativeHandle:Xk,useInsertionEffect:Yk,useLayoutEffect:Jk,useMemo:tS,useReducer:Zf,useRef:Qk,useState:function(){return Zf(fu)},useDebugValue:xy,useDeferredValue:function(e){var t=yr();return nS(t,Wt.memoizedState,e)},useTransition:function(){var e=Zf(fu)[0],t=yr().memoizedState;return[e,t]},useMutableSource:zk,useSyncExternalStore:Vk,useId:rS,unstable_isNewReconciler:!1},YP={readContext:gr,useCallback:eS,useContext:gr,useEffect:by,useImperativeHandle:Xk,useInsertionEffect:Yk,useLayoutEffect:Jk,useMemo:tS,useReducer:Xf,useRef:Qk,useState:function(){return Xf(fu)},useDebugValue:xy,useDeferredValue:function(e){var t=yr();return Wt===null?t.memoizedState=e:nS(t,Wt.memoizedState,e)},useTransition:function(){var e=Xf(fu)[0],t=yr().memoizedState;return[e,t]},useMutableSource:zk,useSyncExternalStore:Vk,useId:rS,unstable_isNewReconciler:!1};function kr(e,t){if(e&&e.defaultProps){t=Rt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bh={isMounted:function(e){return(e=e._reactInternals)?wo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Cn(),s=di(e),i=fs(r,s);i.payload=t,n!=null&&(i.callback=n),t=ui(e,i,s),t!==null&&(Ar(t,e,s,r),ld(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Cn(),s=di(e),i=fs(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ui(e,i,s),t!==null&&(Ar(t,e,s,r),ld(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Cn(),r=di(e),s=fs(n,r);s.tag=2,t!=null&&(s.callback=t),t=ui(e,s,r),t!==null&&(Ar(t,e,r,n),ld(t,e,r))}};function dw(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ou(n,r)||!ou(s,i):!0}function aS(e,t,n){var r=!1,s=gi,i=t.contextType;return typeof i=="object"&&i!==null?i=gr(i):(s=Fn(t)?uo:wn.current,r=t.contextTypes,i=(r=r!=null)?Ca(e,s):gi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function hw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bh.enqueueReplaceState(t,t.state,null)}function ym(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},fy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gr(i):(i=Fn(t)?uo:wn.current,s.context=Ca(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(gm(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bh.enqueueReplaceState(s,s.state,null),Bd(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ra(e,t){try{var n="",r=t;do n+=S2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ep(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var JP=typeof WeakMap=="function"?WeakMap:Map;function lS(e,t,n){n=fs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wd||(Wd=!0,Pm=r),vm(e,t)},n}function uS(e,t,n){n=fs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){vm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vm(e,t),typeof r!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function fw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new JP;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=dj.bind(null,e,t,n),t.then(e,e))}function pw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mw(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fs(-1,1),t.tag=2,ui(n,t,1))),n.lanes|=1),e)}var ZP=Es.ReactCurrentOwner,Ln=!1;function Sn(e,t,n,r){t.child=e===null?Mk(t,null,n,r):Pa(t,e.child,n,r)}function gw(e,t,n,r,s){n=n.render;var i=t.ref;return ua(t,s),r=vy(e,t,n,r,i,s),n=wy(),e!==null&&!Ln?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ws(e,t,s)):(xt&&n&&oy(t),t.flags|=1,Sn(e,t,r,s),t.child)}function yw(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!jy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,cS(e,t,i,r,s)):(e=pd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ou,n(o,r)&&e.ref===t.ref)return ws(e,t,s)}return t.flags|=1,e=hi(i,r),e.ref=t.ref,e.return=t,t.child=e}function cS(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(ou(i,r)&&e.ref===t.ref)if(Ln=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ln=!0);else return t.lanes=e.lanes,ws(e,t,s)}return wm(e,t,n,r,s)}function dS(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Xo,Gn),Gn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yt(Xo,Gn),Gn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,yt(Xo,Gn),Gn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,yt(Xo,Gn),Gn|=r;return Sn(e,t,s,n),t.child}function hS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wm(e,t,n,r,s){var i=Fn(n)?uo:wn.current;return i=Ca(t,i),ua(t,s),n=vy(e,t,n,r,i,s),r=wy(),e!==null&&!Ln?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ws(e,t,s)):(xt&&r&&oy(t),t.flags|=1,Sn(e,t,n,s),t.child)}function vw(e,t,n,r,s){if(Fn(n)){var i=!0;Nd(t)}else i=!1;if(ua(t,s),t.stateNode===null)dd(e,t),aS(t,n,r),ym(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=Fn(n)?uo:wn.current,u=Ca(t,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&hw(t,o,r,u),Us=!1;var f=t.memoizedState;o.state=f,Bd(t,r,o,s),l=t.memoizedState,a!==r||f!==l||Mn.current||Us?(typeof c=="function"&&(gm(t,n,c,r),l=t.memoizedState),(a=Us||dw(t,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bk(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:kr(t.type,a),o.props=u,h=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gr(l):(l=Fn(n)?uo:wn.current,l=Ca(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&hw(t,o,r,l),Us=!1,f=t.memoizedState,o.state=f,Bd(t,r,o,s);var w=t.memoizedState;a!==h||f!==w||Mn.current||Us?(typeof p=="function"&&(gm(t,n,p,r),w=t.memoizedState),(u=Us||dw(t,n,u,r,f,w,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return bm(e,t,n,r,i,s)}function bm(e,t,n,r,s,i){hS(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&rw(t,n,!1),ws(e,t,i);r=t.stateNode,ZP.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Pa(t,e.child,null,i),t.child=Pa(t,null,a,i)):Sn(e,t,a,i),t.memoizedState=r.state,s&&rw(t,n,!0),t.child}function fS(e){var t=e.stateNode;t.pendingContext?nw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nw(e,t.context,!1),py(e,t.containerInfo)}function ww(e,t,n,r,s){return Ta(),ly(s),t.flags|=256,Sn(e,t,n,r),t.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function _m(e){return{baseLanes:e,cachePool:null,transitions:null}}function pS(e,t,n){var r=t.pendingProps,s=Ct.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),yt(Ct,s&1),e===null)return pm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kh(o,r,0,null),e=oo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_m(n),t.memoizedState=xm,e):_y(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return XP(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=hi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=hi(a,i):(i=oo(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?_m(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=xm,r}return i=e.child,e=i.sibling,r=hi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _y(e,t){return t=kh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fc(e,t,n,r){return r!==null&&ly(r),Pa(t,e.child,null,n),e=_y(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function XP(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ep(Error(Ce(422))),Fc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=kh({mode:"visible",children:r.children},s,0,null),i=oo(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Pa(t,e.child,null,o),t.child.memoizedState=_m(o),t.memoizedState=xm,i);if(!(t.mode&1))return Fc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ce(419)),r=ep(i,r,void 0),Fc(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ln||a){if(r=en,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vs(e,s),Ar(r,e,s,-1))}return Py(),r=ep(Error(Ce(421))),Fc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hj.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Qn=li(s.nextSibling),Yn=t,xt=!0,Pr=null,e!==null&&(lr[ur++]=ds,lr[ur++]=hs,lr[ur++]=co,ds=e.id,hs=e.overflow,co=t),t=_y(t,r.children),t.flags|=4096,t)}function bw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mm(e.return,t,n)}function tp(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mS(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(e,t,r.children,n),r=Ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bw(e,n,t);else if(e.tag===19)bw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(yt(Ct,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ud(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),tp(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ud(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}tp(t,!0,n,null,i);break;case"together":tp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ws(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ce(153));if(t.child!==null){for(e=t.child,n=hi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ej(e,t,n){switch(t.tag){case 3:fS(t),Ta();break;case 5:Uk(t);break;case 1:Fn(t.type)&&Nd(t);break;case 4:py(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;yt(Md,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(yt(Ct,Ct.current&1),t.flags|=128,null):n&t.child.childLanes?pS(e,t,n):(yt(Ct,Ct.current&1),e=ws(e,t,n),e!==null?e.sibling:null);yt(Ct,Ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mS(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(Ct,Ct.current),r)break;return null;case 22:case 23:return t.lanes=0,dS(e,t,n)}return ws(e,t,n)}var gS,km,yS,vS;gS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};km=function(){};yS=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ki(Gr.current);var i=null;switch(n){case"input":s=Wp(e,s),r=Wp(e,r),i=[];break;case"select":s=Rt({},s,{value:void 0}),r=Rt({},r,{value:void 0}),i=[];break;case"textarea":s=Gp(e,s),r=Gp(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Id)}Yp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&vt("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};vS=function(e,t,n,r){n!==r&&(t.flags|=4)};function hl(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tj(e,t,n){var r=t.pendingProps;switch(ay(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(t),null;case 1:return Fn(t.type)&&Dd(),mn(t),null;case 3:return r=t.stateNode,ja(),wt(Mn),wt(wn),gy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($c(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pr!==null&&(Am(Pr),Pr=null))),km(e,t),mn(t),null;case 5:my(t);var s=Ki(du.current);if(n=t.type,e!==null&&t.stateNode!=null)yS(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ce(166));return mn(t),null}if(e=Ki(Gr.current),$c(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Wr]=t,r[uu]=i,e=(t.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(s=0;s<El.length;s++)vt(El[s],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":j0(r,i),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},vt("invalid",r);break;case"textarea":A0(r,i),vt("invalid",r)}Yp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Lc(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Lc(r.textContent,a,e),s=["children",""+a]):Xl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vt("scroll",r)}switch(n){case"input":Pc(r),R0(r,i,!0);break;case"textarea":Pc(r),O0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Id)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=H_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Wr]=t,e[uu]=r,gS(e,t,!1,!1),t.stateNode=e;e:{switch(o=Jp(n,r),n){case"dialog":vt("cancel",e),vt("close",e),s=r;break;case"iframe":case"object":case"embed":vt("load",e),s=r;break;case"video":case"audio":for(s=0;s<El.length;s++)vt(El[s],e);s=r;break;case"source":vt("error",e),s=r;break;case"img":case"image":case"link":vt("error",e),vt("load",e),s=r;break;case"details":vt("toggle",e),s=r;break;case"input":j0(e,r),s=Wp(e,r),vt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Rt({},r,{value:void 0}),vt("invalid",e);break;case"textarea":A0(e,r),s=Gp(e,r),vt("invalid",e);break;default:s=r}Yp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Q_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q_(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&eu(e,l):typeof l=="number"&&eu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&vt("scroll",e):l!=null&&Hg(e,i,l,o))}switch(n){case"input":Pc(e),R0(e,r,!1);break;case"textarea":Pc(e),O0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+mi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ia(e,!!r.multiple,i,!1):r.defaultValue!=null&&ia(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Id)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mn(t),null;case 6:if(e&&t.stateNode!=null)vS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ce(166));if(n=Ki(du.current),Ki(Gr.current),$c(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wr]=t,(i=r.nodeValue!==n)&&(e=Yn,e!==null))switch(e.tag){case 3:Lc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=t,t.stateNode=r}return mn(t),null;case 13:if(wt(Ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xt&&Qn!==null&&t.mode&1&&!(t.flags&128))Lk(),Ta(),t.flags|=98560,i=!1;else if(i=$c(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ce(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ce(317));i[Wr]=t}else Ta(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mn(t),i=!1}else Pr!==null&&(Am(Pr),Pr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?Gt===0&&(Gt=3):Py())),t.updateQueue!==null&&(t.flags|=4),mn(t),null);case 4:return ja(),km(e,t),e===null&&au(t.stateNode.containerInfo),mn(t),null;case 10:return dy(t.type._context),mn(t),null;case 17:return Fn(t.type)&&Dd(),mn(t),null;case 19:if(wt(Ct),i=t.memoizedState,i===null)return mn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)hl(i,!1);else{if(Gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ud(e),o!==null){for(t.flags|=128,hl(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yt(Ct,Ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&$t()>Aa&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ud(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xt)return mn(t),null}else 2*$t()-i.renderingStartTime>Aa&&n!==1073741824&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$t(),t.sibling=null,n=Ct.current,yt(Ct,r?n&1|2:n&1),t):(mn(t),null);case 22:case 23:return Ty(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gn&1073741824&&(mn(t),t.subtreeFlags&6&&(t.flags|=8192)):mn(t),null;case 24:return null;case 25:return null}throw Error(Ce(156,t.tag))}function nj(e,t){switch(ay(t),t.tag){case 1:return Fn(t.type)&&Dd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ja(),wt(Mn),wt(wn),gy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return my(t),null;case 13:if(wt(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ce(340));Ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return wt(Ct),null;case 4:return ja(),null;case 10:return dy(t.type._context),null;case 22:case 23:return Ty(),null;case 24:return null;default:return null}}var Bc=!1,gn=!1,rj=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Zo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(e,t,r)}else n.current=null}function Sm(e,t,n){try{n()}catch(r){It(e,t,r)}}var xw=!1;function sj(e,t){if(am=Rd,e=kk(),iy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=e,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lm={focusedElem:e,selectionRange:n},Rd=!1,Ve=t;Ve!==null;)if(t=Ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ve=e;else for(;Ve!==null;){t=Ve;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,x=w.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:kr(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(C){It(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ve=e;break}Ve=t.return}return w=xw,xw=!1,w}function Fl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sm(t,n,i)}s=s.next}while(s!==r)}}function xh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Em(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wS(e){var t=e.alternate;t!==null&&(e.alternate=null,wS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wr],delete t[uu],delete t[dm],delete t[BP],delete t[UP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bS(e){return e.tag===5||e.tag===3||e.tag===4}function _w(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Id));else if(r!==4&&(e=e.child,e!==null))for(Cm(e,t,n),e=e.sibling;e!==null;)Cm(e,t,n),e=e.sibling}function Tm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Tm(e,t,n),e=e.sibling;e!==null;)Tm(e,t,n),e=e.sibling}var nn=null,Cr=!1;function Ns(e,t,n){for(n=n.child;n!==null;)xS(e,t,n),n=n.sibling}function xS(e,t,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(fh,n)}catch{}switch(n.tag){case 5:gn||Zo(n,t);case 6:var r=nn,s=Cr;nn=null,Ns(e,t,n),nn=r,Cr=s,nn!==null&&(Cr?(e=nn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(Cr?(e=nn,n=n.stateNode,e.nodeType===8?Gf(e.parentNode,n):e.nodeType===1&&Gf(e,n),su(e)):Gf(nn,n.stateNode));break;case 4:r=nn,s=Cr,nn=n.stateNode.containerInfo,Cr=!0,Ns(e,t,n),nn=r,Cr=s;break;case 0:case 11:case 14:case 15:if(!gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Sm(n,t,o),s=s.next}while(s!==r)}Ns(e,t,n);break;case 1:if(!gn&&(Zo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,t,a)}Ns(e,t,n);break;case 21:Ns(e,t,n);break;case 22:n.mode&1?(gn=(r=gn)||n.memoizedState!==null,Ns(e,t,n),gn=r):Ns(e,t,n);break;default:Ns(e,t,n)}}function kw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rj),t.forEach(function(r){var s=fj.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,Cr=!1;break e;case 3:nn=a.stateNode.containerInfo,Cr=!0;break e;case 4:nn=a.stateNode.containerInfo,Cr=!0;break e}a=a.return}if(nn===null)throw Error(Ce(160));xS(i,o,s),nn=null,Cr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){It(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_S(t,e),t=t.sibling}function _S(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wr(t,e),Mr(e),r&4){try{Fl(3,e,e.return),xh(3,e)}catch(g){It(e,e.return,g)}try{Fl(5,e,e.return)}catch(g){It(e,e.return,g)}}break;case 1:wr(t,e),Mr(e),r&512&&n!==null&&Zo(n,n.return);break;case 5:if(wr(t,e),Mr(e),r&512&&n!==null&&Zo(n,n.return),e.flags&32){var s=e.stateNode;try{eu(s,"")}catch(g){It(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&K_(s,i),Jp(a,o);var u=Jp(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Q_(s,h):c==="dangerouslySetInnerHTML"?q_(s,h):c==="children"?eu(s,h):Hg(s,c,h,u)}switch(a){case"input":Hp(s,i);break;case"textarea":W_(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ia(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ia(s,!!i.multiple,i.defaultValue,!0):ia(s,!!i.multiple,i.multiple?[]:"",!1))}s[uu]=i}catch(g){It(e,e.return,g)}}break;case 6:if(wr(t,e),Mr(e),r&4){if(e.stateNode===null)throw Error(Ce(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){It(e,e.return,g)}}break;case 3:if(wr(t,e),Mr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{su(t.containerInfo)}catch(g){It(e,e.return,g)}break;case 4:wr(t,e),Mr(e);break;case 13:wr(t,e),Mr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ey=$t())),r&4&&kw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(gn=(u=gn)||c,wr(t,e),gn=u):wr(t,e),Mr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Ve=e,c=e.child;c!==null;){for(h=Ve=c;Ve!==null;){switch(f=Ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:Fl(4,f,f.return);break;case 1:Zo(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(g){It(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(f.memoizedState!==null){Ew(h);continue}}p!==null?(p.return=f,Ve=p):Ew(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=G_("display",o))}catch(g){It(e,e.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){It(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wr(t,e),Mr(e),r&4&&kw(e);break;case 21:break;default:wr(t,e),Mr(e)}}function Mr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bS(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(eu(s,""),r.flags&=-33);var i=_w(e);Tm(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_w(e);Cm(e,a,o);break;default:throw Error(Ce(161))}}catch(l){It(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ij(e,t,n){Ve=e,kS(e)}function kS(e,t,n){for(var r=(e.mode&1)!==0;Ve!==null;){var s=Ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Bc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||gn;a=Bc;var u=gn;if(Bc=o,(gn=l)&&!u)for(Ve=s;Ve!==null;)o=Ve,l=o.child,o.tag===22&&o.memoizedState!==null?Cw(s):l!==null?(l.return=o,Ve=l):Cw(s);for(;i!==null;)Ve=i,kS(i),i=i.sibling;Ve=s,Bc=a,gn=u}Sw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ve=i):Sw(e)}}function Sw(e){for(;Ve!==null;){var t=Ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gn||xh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:kr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&lw(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lw(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&su(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}gn||t.flags&512&&Em(t)}catch(f){It(t,t.return,f)}}if(t===e){Ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ve=n;break}Ve=t.return}}function Ew(e){for(;Ve!==null;){var t=Ve;if(t===e){Ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ve=n;break}Ve=t.return}}function Cw(e){for(;Ve!==null;){var t=Ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xh(4,t)}catch(l){It(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){It(t,s,l)}}var i=t.return;try{Em(t)}catch(l){It(t,i,l)}break;case 5:var o=t.return;try{Em(t)}catch(l){It(t,o,l)}}}catch(l){It(t,t.return,l)}if(t===e){Ve=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ve=a;break}Ve=t.return}}var oj=Math.ceil,Kd=Es.ReactCurrentDispatcher,ky=Es.ReactCurrentOwner,fr=Es.ReactCurrentBatchConfig,at=0,en=null,zt=null,on=0,Gn=0,Xo=bi(0),Gt=0,mu=null,fo=0,_h=0,Sy=0,Bl=null,Dn=null,Ey=0,Aa=1/0,is=null,Wd=!1,Pm=null,ci=null,Uc=!1,ni=null,Hd=0,Ul=0,jm=null,hd=-1,fd=0;function Cn(){return at&6?$t():hd!==-1?hd:hd=$t()}function di(e){return e.mode&1?at&2&&on!==0?on&-on:VP.transition!==null?(fd===0&&(fd=ak()),fd):(e=ft,e!==0||(e=window.event,e=e===void 0?16:pk(e.type)),e):1}function Ar(e,t,n,r){if(50<Ul)throw Ul=0,jm=null,Error(Ce(185));Du(e,n,r),(!(at&2)||e!==en)&&(e===en&&(!(at&2)&&(_h|=n),Gt===4&&Vs(e,on)),Bn(e,r),n===1&&at===0&&!(t.mode&1)&&(Aa=$t()+500,vh&&xi()))}function Bn(e,t){var n=e.callbackNode;V2(e,t);var r=jd(e,e===en?on:0);if(r===0)n!==null&&N0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&N0(n),t===1)e.tag===0?zP(Tw.bind(null,e)):Ik(Tw.bind(null,e)),MP(function(){!(at&6)&&xi()}),n=null;else{switch(lk(r)){case 1:n=Jg;break;case 4:n=ik;break;case 16:n=Pd;break;case 536870912:n=ok;break;default:n=Pd}n=AS(n,SS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function SS(e,t){if(hd=-1,fd=0,at&6)throw Error(Ce(327));var n=e.callbackNode;if(ca()&&e.callbackNode!==n)return null;var r=jd(e,e===en?on:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qd(e,r);else{t=r;var s=at;at|=2;var i=CS();(en!==e||on!==t)&&(is=null,Aa=$t()+500,io(e,t));do try{uj();break}catch(a){ES(e,a)}while(!0);cy(),Kd.current=i,at=s,zt!==null?t=0:(en=null,on=0,t=Gt)}if(t!==0){if(t===2&&(s=nm(e),s!==0&&(r=s,t=Rm(e,s))),t===1)throw n=mu,io(e,0),Vs(e,r),Bn(e,$t()),n;if(t===6)Vs(e,r);else{if(s=e.current.alternate,!(r&30)&&!aj(s)&&(t=qd(e,r),t===2&&(i=nm(e),i!==0&&(r=i,t=Rm(e,i))),t===1))throw n=mu,io(e,0),Vs(e,r),Bn(e,$t()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Ce(345));case 2:Ni(e,Dn,is);break;case 3:if(Vs(e,r),(r&130023424)===r&&(t=Ey+500-$t(),10<t)){if(jd(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Cn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=cm(Ni.bind(null,e,Dn,is),t);break}Ni(e,Dn,is);break;case 4:if(Vs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Rr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oj(r/1960))-r,10<r){e.timeoutHandle=cm(Ni.bind(null,e,Dn,is),r);break}Ni(e,Dn,is);break;case 5:Ni(e,Dn,is);break;default:throw Error(Ce(329))}}}return Bn(e,$t()),e.callbackNode===n?SS.bind(null,e):null}function Rm(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(io(e,t).flags|=256),e=qd(e,t),e!==2&&(t=Dn,Dn=n,t!==null&&Am(t)),e}function Am(e){Dn===null?Dn=e:Dn.push.apply(Dn,e)}function aj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Or(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vs(e,t){for(t&=~Sy,t&=~_h,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rr(t),r=1<<n;e[n]=-1,t&=~r}}function Tw(e){if(at&6)throw Error(Ce(327));ca();var t=jd(e,0);if(!(t&1))return Bn(e,$t()),null;var n=qd(e,t);if(e.tag!==0&&n===2){var r=nm(e);r!==0&&(t=r,n=Rm(e,r))}if(n===1)throw n=mu,io(e,0),Vs(e,t),Bn(e,$t()),n;if(n===6)throw Error(Ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ni(e,Dn,is),Bn(e,$t()),null}function Cy(e,t){var n=at;at|=1;try{return e(t)}finally{at=n,at===0&&(Aa=$t()+500,vh&&xi())}}function po(e){ni!==null&&ni.tag===0&&!(at&6)&&ca();var t=at;at|=1;var n=fr.transition,r=ft;try{if(fr.transition=null,ft=1,e)return e()}finally{ft=r,fr.transition=n,at=t,!(at&6)&&xi()}}function Ty(){Gn=Xo.current,wt(Xo)}function io(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$P(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(ay(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dd();break;case 3:ja(),wt(Mn),wt(wn),gy();break;case 5:my(r);break;case 4:ja();break;case 13:wt(Ct);break;case 19:wt(Ct);break;case 10:dy(r.type._context);break;case 22:case 23:Ty()}n=n.return}if(en=e,zt=e=hi(e.current,null),on=Gn=t,Gt=0,mu=null,Sy=_h=fo=0,Dn=Bl=null,Vi!==null){for(t=0;t<Vi.length;t++)if(n=Vi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vi=null}return e}function ES(e,t){do{var n=zt;try{if(cy(),ud.current=Vd,zd){for(var r=jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zd=!1}if(ho=0,Xt=Wt=jt=null,Ml=!1,hu=0,ky.current=null,n===null||n.return===null){Gt=1,mu=t,zt=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=on,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=pw(o);if(p!==null){p.flags&=-257,mw(p,o,a,i,t),p.mode&1&&fw(i,u,t),t=p,l=u;var w=t.updateQueue;if(w===null){var g=new Set;g.add(l),t.updateQueue=g}else w.add(l);break e}else{if(!(t&1)){fw(i,u,t),Py();break e}l=Error(Ce(426))}}else if(xt&&a.mode&1){var x=pw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mw(x,o,a,i,t),ly(Ra(l,a));break e}}i=l=Ra(l,a),Gt!==4&&(Gt=2),Bl===null?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=lS(i,l,t);aw(i,y);break e;case 1:a=l;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ci===null||!ci.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=uS(i,a,t);aw(i,C);break e}}i=i.return}while(i!==null)}PS(n)}catch(R){t=R,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function CS(){var e=Kd.current;return Kd.current=Vd,e===null?Vd:e}function Py(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),en===null||!(fo&268435455)&&!(_h&268435455)||Vs(en,on)}function qd(e,t){var n=at;at|=2;var r=CS();(en!==e||on!==t)&&(is=null,io(e,t));do try{lj();break}catch(s){ES(e,s)}while(!0);if(cy(),at=n,Kd.current=r,zt!==null)throw Error(Ce(261));return en=null,on=0,Gt}function lj(){for(;zt!==null;)TS(zt)}function uj(){for(;zt!==null&&!D2();)TS(zt)}function TS(e){var t=RS(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?PS(e):zt=t,ky.current=null}function PS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nj(n,t),n!==null){n.flags&=32767,zt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gt=6,zt=null;return}}else if(n=tj(n,t,Gn),n!==null){zt=n;return}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);Gt===0&&(Gt=5)}function Ni(e,t,n){var r=ft,s=fr.transition;try{fr.transition=null,ft=1,cj(e,t,n,r)}finally{fr.transition=s,ft=r}return null}function cj(e,t,n,r){do ca();while(ni!==null);if(at&6)throw Error(Ce(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ce(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(K2(e,i),e===en&&(zt=en=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uc||(Uc=!0,AS(Pd,function(){return ca(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fr.transition,fr.transition=null;var o=ft;ft=1;var a=at;at|=4,ky.current=null,sj(e,n),_S(n,e),RP(lm),Rd=!!am,lm=am=null,e.current=n,ij(n),N2(),at=a,ft=o,fr.transition=i}else e.current=n;if(Uc&&(Uc=!1,ni=e,Hd=s),i=e.pendingLanes,i===0&&(ci=null),M2(n.stateNode),Bn(e,$t()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wd)throw Wd=!1,e=Pm,Pm=null,e;return Hd&1&&e.tag!==0&&ca(),i=e.pendingLanes,i&1?e===jm?Ul++:(Ul=0,jm=e):Ul=0,xi(),null}function ca(){if(ni!==null){var e=lk(Hd),t=fr.transition,n=ft;try{if(fr.transition=null,ft=16>e?16:e,ni===null)var r=!1;else{if(e=ni,ni=null,Hd=0,at&6)throw Error(Ce(331));var s=at;for(at|=4,Ve=e.current;Ve!==null;){var i=Ve,o=i.child;if(Ve.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ve=u;Ve!==null;){var c=Ve;switch(c.tag){case 0:case 11:case 15:Fl(8,c,i)}var h=c.child;if(h!==null)h.return=c,Ve=h;else for(;Ve!==null;){c=Ve;var f=c.sibling,p=c.return;if(wS(c),c===u){Ve=null;break}if(f!==null){f.return=p,Ve=f;break}Ve=p}}}var w=i.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ve=o;else e:for(;Ve!==null;){if(i=Ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fl(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ve=y;break e}Ve=i.return}}var v=e.current;for(Ve=v;Ve!==null;){o=Ve;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ve=_;else e:for(o=v;Ve!==null;){if(a=Ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xh(9,a)}}catch(R){It(a,a.return,R)}if(a===o){Ve=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ve=C;break e}Ve=a.return}}if(at=s,xi(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(fh,e)}catch{}r=!0}return r}finally{ft=n,fr.transition=t}}return!1}function Pw(e,t,n){t=Ra(n,t),t=lS(e,t,1),e=ui(e,t,1),t=Cn(),e!==null&&(Du(e,1,t),Bn(e,t))}function It(e,t,n){if(e.tag===3)Pw(e,e,n);else for(;t!==null;){if(t.tag===3){Pw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ci===null||!ci.has(r))){e=Ra(n,e),e=uS(t,e,1),t=ui(t,e,1),e=Cn(),t!==null&&(Du(t,1,e),Bn(t,e));break}}t=t.return}}function dj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Cn(),e.pingedLanes|=e.suspendedLanes&n,en===e&&(on&n)===n&&(Gt===4||Gt===3&&(on&130023424)===on&&500>$t()-Ey?io(e,0):Sy|=n),Bn(e,t)}function jS(e,t){t===0&&(e.mode&1?(t=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):t=1);var n=Cn();e=vs(e,t),e!==null&&(Du(e,t,n),Bn(e,n))}function hj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jS(e,n)}function fj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(t),jS(e,n)}var RS;RS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)Ln=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ln=!1,ej(e,t,n);Ln=!!(e.flags&131072)}else Ln=!1,xt&&t.flags&1048576&&Dk(t,$d,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;dd(e,t),e=t.pendingProps;var s=Ca(t,wn.current);ua(t,n),s=vy(null,t,r,e,s,n);var i=wy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fn(r)?(i=!0,Nd(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fy(t),s.updater=bh,t.stateNode=s,s._reactInternals=t,ym(t,r,e,n),t=bm(null,t,r,!0,i,n)):(t.tag=0,xt&&i&&oy(t),Sn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(dd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=mj(r),e=kr(r,e),s){case 0:t=wm(null,t,r,e,n);break e;case 1:t=vw(null,t,r,e,n);break e;case 11:t=gw(null,t,r,e,n);break e;case 14:t=yw(null,t,r,kr(r.type,e),n);break e}throw Error(Ce(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),wm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),vw(e,t,r,s,n);case 3:e:{if(fS(t),e===null)throw Error(Ce(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Bk(e,t),Bd(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ra(Error(Ce(423)),t),t=ww(e,t,r,n,s);break e}else if(r!==s){s=Ra(Error(Ce(424)),t),t=ww(e,t,r,n,s);break e}else for(Qn=li(t.stateNode.containerInfo.firstChild),Yn=t,xt=!0,Pr=null,n=Mk(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ta(),r===s){t=ws(e,t,n);break e}Sn(e,t,r,n)}t=t.child}return t;case 5:return Uk(t),e===null&&pm(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,um(r,s)?o=null:i!==null&&um(r,i)&&(t.flags|=32),hS(e,t),Sn(e,t,o,n),t.child;case 6:return e===null&&pm(t),null;case 13:return pS(e,t,n);case 4:return py(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pa(t,null,r,n):Sn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),gw(e,t,r,s,n);case 7:return Sn(e,t,t.pendingProps,n),t.child;case 8:return Sn(e,t,t.pendingProps.children,n),t.child;case 12:return Sn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,yt(Md,r._currentValue),r._currentValue=o,i!==null)if(Or(i.value,o)){if(i.children===s.children&&!Mn.current){t=ws(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=fs(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),mm(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mm(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ua(t,n),s=gr(s),r=r(s),t.flags|=1,Sn(e,t,r,n),t.child;case 14:return r=t.type,s=kr(r,t.pendingProps),s=kr(r.type,s),yw(e,t,r,s,n);case 15:return cS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:kr(r,s),dd(e,t),t.tag=1,Fn(r)?(e=!0,Nd(t)):e=!1,ua(t,n),aS(t,r,s),ym(t,r,s,n),bm(null,t,r,!0,e,n);case 19:return mS(e,t,n);case 22:return dS(e,t,n)}throw Error(Ce(156,t.tag))};function AS(e,t){return sk(e,t)}function pj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(e,t,n,r){return new pj(e,t,n,r)}function jy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mj(e){if(typeof e=="function")return jy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gg)return 11;if(e===Qg)return 14}return 2}function hi(e,t){var n=e.alternate;return n===null?(n=dr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pd(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")jy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Vo:return oo(n.children,s,i,t);case qg:o=8,s|=8;break;case Up:return e=dr(12,n,t,s|2),e.elementType=Up,e.lanes=i,e;case zp:return e=dr(13,n,t,s),e.elementType=zp,e.lanes=i,e;case Vp:return e=dr(19,n,t,s),e.elementType=Vp,e.lanes=i,e;case U_:return kh(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F_:o=10;break e;case B_:o=9;break e;case Gg:o=11;break e;case Qg:o=14;break e;case Bs:o=16,r=null;break e}throw Error(Ce(130,e==null?e:typeof e,""))}return t=dr(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function oo(e,t,n,r){return e=dr(7,e,r,t),e.lanes=n,e}function kh(e,t,n,r){return e=dr(22,e,r,t),e.elementType=U_,e.lanes=n,e.stateNode={isHidden:!1},e}function np(e,t,n){return e=dr(6,e,null,t),e.lanes=n,e}function rp(e,t,n){return t=dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gj(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ry(e,t,n,r,s,i,o,a,l){return e=new gj(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fy(i),e}function yj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function OS(e){if(!e)return gi;e=e._reactInternals;e:{if(wo(e)!==e||e.tag!==1)throw Error(Ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ce(171))}if(e.tag===1){var n=e.type;if(Fn(n))return Ok(e,n,t)}return t}function IS(e,t,n,r,s,i,o,a,l){return e=Ry(n,r,!0,e,s,i,o,a,l),e.context=OS(null),n=e.current,r=Cn(),s=di(n),i=fs(r,s),i.callback=t??null,ui(n,i,s),e.current.lanes=s,Du(e,s,r),Bn(e,r),e}function Sh(e,t,n,r){var s=t.current,i=Cn(),o=di(s);return n=OS(n),t.context===null?t.context=n:t.pendingContext=n,t=fs(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ui(s,t,o),e!==null&&(Ar(e,s,o,i),ld(e,s,o)),o}function Gd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ay(e,t){jw(e,t),(e=e.alternate)&&jw(e,t)}function vj(){return null}var DS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Oy(e){this._internalRoot=e}Eh.prototype.render=Oy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ce(409));Sh(e,t,null,null)};Eh.prototype.unmount=Oy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;po(function(){Sh(null,e,null,null)}),t[ys]=null}};function Eh(e){this._internalRoot=e}Eh.prototype.unstable_scheduleHydration=function(e){if(e){var t=dk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zs.length&&t!==0&&t<zs[n].priority;n++);zs.splice(n,0,e),n===0&&fk(e)}};function Iy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ch(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rw(){}function wj(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Gd(o);i.call(u)}}var o=IS(t,r,e,0,null,!1,!1,"",Rw);return e._reactRootContainer=o,e[ys]=o.current,au(e.nodeType===8?e.parentNode:e),po(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Gd(l);a.call(u)}}var l=Ry(e,0,!1,null,null,!1,!1,"",Rw);return e._reactRootContainer=l,e[ys]=l.current,au(e.nodeType===8?e.parentNode:e),po(function(){Sh(t,l,n,r)}),l}function Th(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Gd(o);a.call(l)}}Sh(t,o,e,s)}else o=wj(n,t,e,s,r);return Gd(o)}uk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sl(t.pendingLanes);n!==0&&(Zg(t,n|1),Bn(t,$t()),!(at&6)&&(Aa=$t()+500,xi()))}break;case 13:po(function(){var r=vs(e,1);if(r!==null){var s=Cn();Ar(r,e,1,s)}}),Ay(e,1)}};Xg=function(e){if(e.tag===13){var t=vs(e,134217728);if(t!==null){var n=Cn();Ar(t,e,134217728,n)}Ay(e,134217728)}};ck=function(e){if(e.tag===13){var t=di(e),n=vs(e,t);if(n!==null){var r=Cn();Ar(n,e,t,r)}Ay(e,t)}};dk=function(){return ft};hk=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}};Xp=function(e,t,n){switch(t){case"input":if(Hp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=yh(r);if(!s)throw Error(Ce(90));V_(r),Hp(r,s)}}}break;case"textarea":W_(e,n);break;case"select":t=n.value,t!=null&&ia(e,!!n.multiple,t,!1)}};Z_=Cy;X_=po;var bj={usingClientEntryPoint:!1,Events:[Lu,qo,yh,Y_,J_,Cy]},fl={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xj={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nk(e),e===null?null:e.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||vj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{fh=zc.inject(xj),qr=zc}catch{}}Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bj;Xn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iy(t))throw Error(Ce(200));return yj(e,t,null,n)};Xn.createRoot=function(e,t){if(!Iy(e))throw Error(Ce(299));var n=!1,r="",s=DS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ry(e,1,!1,null,null,n,!1,r,s),e[ys]=t.current,au(e.nodeType===8?e.parentNode:e),new Oy(t)};Xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ce(188)):(e=Object.keys(e).join(","),Error(Ce(268,e)));return e=nk(t),e=e===null?null:e.stateNode,e};Xn.flushSync=function(e){return po(e)};Xn.hydrate=function(e,t,n){if(!Ch(t))throw Error(Ce(200));return Th(null,e,t,!0,n)};Xn.hydrateRoot=function(e,t,n){if(!Iy(e))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=DS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=IS(t,null,e,1,n??null,s,!1,i,o),e[ys]=t.current,au(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Eh(t)};Xn.render=function(e,t,n){if(!Ch(t))throw Error(Ce(200));return Th(null,e,t,!1,n)};Xn.unmountComponentAtNode=function(e){if(!Ch(e))throw Error(Ce(40));return e._reactRootContainer?(po(function(){Th(null,null,e,!1,function(){e._reactRootContainer=null,e[ys]=null})}),!0):!1};Xn.unstable_batchedUpdates=Cy;Xn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ch(n))throw Error(Ce(200));if(e==null||e._reactInternals===void 0)throw Error(Ce(38));return Th(e,t,n,!1,r)};Xn.version="18.3.1-next-f1338f8080-20240426";function NS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NS)}catch(e){console.error(e)}}NS(),N_.exports=Xn;var Dy=N_.exports;const _j=Ou(Dy);var Aw=Dy;Fp.createRoot=Aw.createRoot,Fp.hydrateRoot=Aw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ow="popstate";function kj(e={}){function t(s,i){let{pathname:o="/",search:a="",hash:l=""}=bo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Om("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:gu(i))}function r(s,i){Zn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return Ej(t,n,r,e)}function kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sj(){return Math.random().toString(36).substring(2,10)}function Iw(e,t){return{usr:e.state,key:e.key,idx:t}}function Om(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?bo(t):t,state:n,key:t&&t.key||r||Sj()}}function gu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function bo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Ej(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function h(){a="POP";let x=c(),y=x==null?null:x-u;u=x,l&&l({action:a,location:g.location,delta:y})}function f(x,y){a="PUSH";let v=Om(g.location,x,y);n&&n(v,x),u=c()+1;let _=Iw(v,u),C=g.createHref(v);try{o.pushState(_,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}i&&l&&l({action:a,location:g.location,delta:1})}function p(x,y){a="REPLACE";let v=Om(g.location,x,y);n&&n(v,x),u=c();let _=Iw(v,u),C=g.createHref(v);o.replaceState(_,"",C),i&&l&&l({action:a,location:g.location,delta:0})}function w(x){return Cj(x)}let g={get action(){return a},get location(){return e(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ow,h),l=x,()=>{s.removeEventListener(Ow,h),l=null}},createHref(x){return t(s,x)},createURL:w,encodeLocation(x){let y=w(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(x){return o.go(x)}};return g}function Cj(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),kt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:gu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function LS(e,t,n="/"){return Tj(e,t,n,!1)}function Tj(e,t,n,r){let s=typeof t=="string"?bo(t):t,i=bs(s.pathname||"/",n);if(i==null)return null;let o=$S(e);Pj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Fj(i);a=$j(o[l],u,r)}return a}function $S(e,t=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;kt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let h=ps([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(kt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),$S(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:Nj(h,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of MS(o.path))i(o,a,!0,u)}),t}function MS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=MS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Pj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Lj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var jj=/^:[\w-]+$/,Rj=3,Aj=2,Oj=1,Ij=10,Dj=-2,Dw=e=>e==="*";function Nj(e,t){let n=e.split("/"),r=n.length;return n.some(Dw)&&(r+=Dj),t&&(r+=Aj),n.filter(s=>!Dw(s)).reduce((s,i)=>s+(jj.test(i)?Rj:i===""?Oj:Ij),r)}function Lj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function $j(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",h=Qd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Qd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ps([i,h.pathname]),pathnameBase:Vj(ps([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ps([i,h.pathnameBase]))}return o}function Qd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Mj(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},f)=>{if(c==="*"){let w=a[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Mj(e,t=!1,n=!0){Zn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Fj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function bs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Bj(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?bo(e):e;return{pathname:n?n.startsWith("/")?n:Uj(n,t):t,search:Kj(r),hash:Wj(s)}}function Uj(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sp(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zj(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ny(e){let t=zj(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Ly(e,t,n,r=!1){let s;typeof e=="string"?s=bo(e):(s={...e},kt(!s.pathname||!s.pathname.includes("?"),sp("?","pathname","search",s)),kt(!s.pathname||!s.pathname.includes("#"),sp("#","pathname","hash",s)),kt(!s.search||!s.search.includes("#"),sp("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=Bj(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var ps=e=>e.join("/").replace(/\/\/+/g,"/"),Vj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Wj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Hj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var FS=["POST","PUT","PATCH","DELETE"];new Set(FS);var qj=["GET",...FS];new Set(qj);var Fa=S.createContext(null);Fa.displayName="DataRouter";var Ph=S.createContext(null);Ph.displayName="DataRouterState";S.createContext(!1);var BS=S.createContext({isTransitioning:!1});BS.displayName="ViewTransition";var Gj=S.createContext(new Map);Gj.displayName="Fetchers";var Qj=S.createContext(null);Qj.displayName="Await";var Ir=S.createContext(null);Ir.displayName="Navigation";var Mu=S.createContext(null);Mu.displayName="Location";var Dr=S.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var $y=S.createContext(null);$y.displayName="RouteError";function Yj(e,{relative:t}={}){kt(Ba(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Ir),{hash:s,pathname:i,search:o}=Fu(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:ps([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Ba(){return S.useContext(Mu)!=null}function zn(){return kt(Ba(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Mu).location}var US="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zS(e){S.useContext(Ir).static||S.useLayoutEffect(e)}function Vn(){let{isDataRoute:e}=S.useContext(Dr);return e?uR():Jj()}function Jj(){kt(Ba(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Fa),{basename:t,navigator:n}=S.useContext(Ir),{matches:r}=S.useContext(Dr),{pathname:s}=zn(),i=JSON.stringify(Ny(r)),o=S.useRef(!1);return zS(()=>{o.current=!0}),S.useCallback((l,u={})=>{if(Zn(o.current,US),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Ly(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:ps([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}S.createContext(null);function xo(){let{matches:e}=S.useContext(Dr),t=e[e.length-1];return t?t.params:{}}function Fu(e,{relative:t}={}){let{matches:n}=S.useContext(Dr),{pathname:r}=zn(),s=JSON.stringify(Ny(n));return S.useMemo(()=>Ly(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function Zj(e,t){return VS(e,t)}function VS(e,t,n,r,s){var v;kt(Ba(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Ir),{matches:o}=S.useContext(Dr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";KS(u,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=zn(),p;if(t){let _=typeof t=="string"?bo(t):t;kt(c==="/"||((v=_.pathname)==null?void 0:v.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let w=p.pathname||"/",g=w;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=LS(e,{pathname:g});Zn(h||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Zn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=rR(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:ps([c,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:ps([c,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,s);return t&&y?S.createElement(Mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function Xj(){let e=lR(),t=Hj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:s},n):null,o)}var eR=S.createElement(Xj,null),tR=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(Dr.Provider,{value:this.props.routeContext},S.createElement($y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nR({routeContext:e,match:t,children:n}){let r=S.useContext(Fa);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Dr.Provider,{value:e},n)}function rR(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);kt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=n,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,h)=>{let f,p=!1,w=null,g=null;n&&(f=o&&c.route.id?o[c.route.id]:void 0,w=c.route.errorElement||eR,a&&(l<0&&h===0?(KS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):l===h&&(p=!0,g=c.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),y=()=>{let v;return f?v=w:p?v=g:c.route.Component?v=S.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=u,S.createElement(nR,{match:c,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?S.createElement(tR,{location:n.location,revalidation:n.revalidation,component:w,error:f,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:r}):y()},null)}function My(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sR(e){let t=S.useContext(Fa);return kt(t,My(e)),t}function iR(e){let t=S.useContext(Ph);return kt(t,My(e)),t}function oR(e){let t=S.useContext(Dr);return kt(t,My(e)),t}function Fy(e){let t=oR(e),n=t.matches[t.matches.length-1];return kt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function aR(){return Fy("useRouteId")}function lR(){var r;let e=S.useContext($y),t=iR("useRouteError"),n=Fy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function uR(){let{router:e}=sR("useNavigate"),t=Fy("useNavigate"),n=S.useRef(!1);return zS(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{Zn(n.current,US),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Nw={};function KS(e,t,n){!t&&!Nw[e]&&(Nw[e]=!0,Zn(!1,n))}S.memo(cR);function cR({routes:e,future:t,state:n,unstable_onError:r}){return VS(e,void 0,n,r,t)}function WS({to:e,replace:t,state:n,relative:r}){kt(Ba(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(Ir);Zn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(Dr),{pathname:o}=zn(),a=Vn(),l=Ly(e,Ny(i),o,r==="path"),u=JSON.stringify(l);return S.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function Et(e){kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dR({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){kt(!Ba(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=bo(n));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:f="default"}=n,p=S.useMemo(()=>{let w=bs(l,o);return w==null?null:{location:{pathname:w,search:u,hash:c,state:h,key:f},navigationType:r}},[o,l,u,c,h,f,r]);return Zn(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:S.createElement(Ir.Provider,{value:a},S.createElement(Mu.Provider,{children:t,value:p}))}function hR({children:e,location:t}){return Zj(Im(e),t)}function Im(e,t=[]){let n=[];return S.Children.forEach(e,(r,s)=>{if(!S.isValidElement(r))return;let i=[...t,s];if(r.type===S.Fragment){n.push.apply(n,Im(r.props.children,i));return}kt(r.type===Et,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Im(r.props.children,i)),n.push(o)}),n}var md="get",gd="application/x-www-form-urlencoded";function jh(e){return e!=null&&typeof e.tagName=="string"}function fR(e){return jh(e)&&e.tagName.toLowerCase()==="button"}function pR(e){return jh(e)&&e.tagName.toLowerCase()==="form"}function mR(e){return jh(e)&&e.tagName.toLowerCase()==="input"}function gR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yR(e,t){return e.button===0&&(!t||t==="_self")&&!gR(e)}function Dm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function vR(e,t){let n=Dm(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Vc=null;function wR(){if(Vc===null)try{new FormData(document.createElement("form"),0),Vc=!1}catch{Vc=!0}return Vc}var bR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ip(e){return e!=null&&!bR.has(e)?(Zn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gd}"`),null):e}function xR(e,t){let n,r,s,i,o;if(pR(e)){let a=e.getAttribute("action");r=a?bs(a,t):null,n=e.getAttribute("method")||md,s=ip(e.getAttribute("enctype"))||gd,i=new FormData(e)}else if(fR(e)||mR(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?bs(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||md,s=ip(e.getAttribute("formenctype"))||ip(a.getAttribute("enctype"))||gd,i=new FormData(a,e),!wR()){let{name:u,type:c,value:h}=e;if(c==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if(jh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=md,r=null,s=gd,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function By(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _R(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&bs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function kR(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ER(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await kR(i,n);return o.links?o.links():[]}return[]}));return jR(r.flat(1).filter(SR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Lw(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var h;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function CR(e,t,{includeHydrateFallback:n}={}){return TR(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function TR(e){return[...new Set(e)]}function PR(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function jR(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(PR(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function HS(){let e=S.useContext(Fa);return By(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function RR(){let e=S.useContext(Ph);return By(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Uy=S.createContext(void 0);Uy.displayName="FrameworkContext";function qS(){let e=S.useContext(Uy);return By(e,"You must render this element inside a <HydratedRouter> element"),e}function AR(e,t){let n=S.useContext(Uy),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=t,f=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(v=>{o(v.isIntersecting)})},x=new IntersectionObserver(g,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[e]),S.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let p=()=>{s(!0)},w=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,f,{}]:[i,f,{onFocus:pl(a,p),onBlur:pl(l,w),onMouseEnter:pl(u,p),onMouseLeave:pl(c,w),onTouchStart:pl(h,p)}]:[!1,f,{}]}function pl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function OR({page:e,...t}){let{router:n}=HS(),r=S.useMemo(()=>LS(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(DR,{page:e,matches:r,...t}):null}function IR(e){let{manifest:t,routeModules:n}=qS(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return ER(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function DR({page:e,matches:t,...n}){let r=zn(),{manifest:s,routeModules:i}=qS(),{basename:o}=HS(),{loaderData:a,matches:l}=RR(),u=S.useMemo(()=>Lw(e,t,l,s,r,"data"),[e,t,l,s,r]),c=S.useMemo(()=>Lw(e,t,l,s,r,"assets"),[e,t,l,s,r]),h=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,g=!1;if(t.forEach(y=>{var _;let v=s.routes[y.route.id];!v||!v.hasLoader||(!u.some(C=>C.route.id===y.route.id)&&y.route.id in a&&((_=i[y.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?g=!0:w.add(y.route.id))}),w.size===0)return[];let x=_R(e,o,"data");return g&&w.size>0&&x.searchParams.set("_routes",t.filter(y=>w.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[o,a,r,s,u,t,e,i]),f=S.useMemo(()=>CR(c,s),[c,s]),p=IR(c);return S.createElement(S.Fragment,null,h.map(w=>S.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>S.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),p.map(({key:w,link:g})=>S.createElement("link",{key:w,nonce:n.nonce,...g})))}function NR(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var GS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GS&&(window.__reactRouterVersion="7.9.3")}catch{}function LR({basename:e,children:t,window:n}){let r=S.useRef();r.current==null&&(r.current=kj({window:n,v5Compat:!0}));let s=r.current,[i,o]=S.useState({action:s.action,location:s.location}),a=S.useCallback(l=>{S.startTransition(()=>o(l))},[o]);return S.useLayoutEffect(()=>s.listen(a),[s,a]),S.createElement(dR,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var QS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h,...f},p){let{basename:w}=S.useContext(Ir),g=typeof u=="string"&&QS.test(u),x,y=!1;if(typeof u=="string"&&g&&(x=u,GS))try{let $=new URL(window.location.href),F=u.startsWith("//")?new URL($.protocol+u):new URL(u),he=bs(F.pathname,w);F.origin===$.origin&&he!=null?u=he+F.search+F.hash:y=!0}catch{Zn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Yj(u,{relative:s}),[_,C,R]=AR(r,f),O=BR(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:h});function I($){t&&t($),$.defaultPrevented||O($)}let D=S.createElement("a",{...f,...R,href:x||v,onClick:y||i?t:I,ref:NR(p,C),target:l,"data-discover":!g&&n==="render"?"true":void 0});return _&&!g?S.createElement(S.Fragment,null,D,S.createElement(OR,{page:v})):D});On.displayName="Link";var $R=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let h=Fu(o,{relative:u.relative}),f=zn(),p=S.useContext(Ph),{navigator:w,basename:g}=S.useContext(Ir),x=p!=null&&HR(h)&&a===!0,y=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,v=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&g&&(_=bs(_,g)||_);const C=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let R=v===y||!s&&v.startsWith(y)&&v.charAt(C)==="/",O=_!=null&&(_===y||!s&&_.startsWith(y)&&_.charAt(y.length)==="/"),I={isActive:R,isPending:O,isTransitioning:x},D=R?t:void 0,$;typeof r=="function"?$=r(I):$=[r,R?"active":null,O?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(I):i;return S.createElement(On,{...u,"aria-current":D,className:$,ref:c,style:F,to:o,viewTransition:a},typeof l=="function"?l(I):l)});$R.displayName="NavLink";var MR=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=md,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...f},p)=>{let w=KR(),g=WR(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&QS.test(a),v=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let C=_.nativeEvent.submitter,R=(C==null?void 0:C.getAttribute("formmethod"))||o;w(C||_.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:h})};return S.createElement("form",{ref:p,method:x,action:g,onSubmit:r?l:v,...f,"data-discover":!y&&e==="render"?"true":void 0})});MR.displayName="Form";function FR(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YS(e){let t=S.useContext(Fa);return kt(t,FR(e)),t}function BR(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Vn(),l=zn(),u=Fu(e,{relative:i});return S.useCallback(c=>{if(yR(c,t)){c.preventDefault();let h=n!==void 0?n:gu(l)===gu(u);a(e,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}function UR(e){Zn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=S.useRef(Dm(e)),n=S.useRef(!1),r=zn(),s=S.useMemo(()=>vR(r.search,n.current?null:t.current),[r.search]),i=Vn(),o=S.useCallback((a,l)=>{const u=Dm(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var zR=0,VR=()=>`__${String(++zR)}__`;function KR(){let{router:e}=YS("useSubmit"),{basename:t}=S.useContext(Ir),n=aR();return S.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=xR(r,t);if(s.navigate===!1){let c=s.fetcherKey||VR();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function WR(e,{relative:t}={}){let{basename:n}=S.useContext(Ir),r=S.useContext(Dr);kt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Fu(e||".",{relative:t})},o=zn();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ps([n,i.pathname])),gu(i)}function HR(e,{relative:t}={}){let n=S.useContext(BS);kt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YS("useViewTransitionState"),s=Fu(e,{relative:t});if(!n.isTransitioning)return!1;let i=bs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=bs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qd(s.pathname,o)!=null||Qd(s.pathname,i)!=null}const pr="https://script.google.com/macros/s/AKfycbz_SnENgLCwF2519Zb8PKeQqXAcn3lfimI-ZROjODNhJlLzHqF-2aCiI5BOE_IzmoRrsQ/exec",JS="radtpoqypgqetijvopho",qR=["searchIndex","allSongs"],GR=e=>["book-download-status",e],QR="modulepreload",YR=function(e){return"/new-sankeertan/"+e},$w={},Ua=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=YR(l),l in $w)return;$w[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":QR,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},JR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class zy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Mw extends zy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fw extends zy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bw extends zy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Nm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Nm||(Nm={}));var ZR=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class XR{constructor(t,{headers:n={},customFetch:r,region:s=Nm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=JR(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ZR(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const h=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(u["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(u["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:f,signal:l}).catch(y=>{throw y.name==="AbortError"?y:new Mw(y)}),w=p.headers.get("x-relay-error");if(w&&w==="true")throw new Fw(p);if(!p.ok)throw new Bw(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield p.json():g==="application/octet-stream"?x=yield p.blob():g==="text/event-stream"?x=p:g==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Mw(i)}:{data:null,error:i,response:i instanceof Bw||i instanceof Fw?i.context:void 0}}})}}var Nn={},Vy={},Rh={},Bu={},Ah={},Oh={},eA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oa=eA();const tA=Oa.fetch,ZS=Oa.fetch.bind(Oa),XS=Oa.Headers,nA=Oa.Request,rA=Oa.Response,za=Object.freeze(Object.defineProperty({__proto__:null,Headers:XS,Request:nA,Response:rA,default:ZS,fetch:tA},Symbol.toStringTag,{value:"Module"})),sA=YT(za);var Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});let iA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ih.default=iA;var e1=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oh,"__esModule",{value:!0});const oA=e1(sA),aA=e1(Ih);let lA=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=oA.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,h=null,f=null,p=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const x=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(h=[],c=null,p=200,w="OK")}catch{i.status===404&&x===""?(p=204,w="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,p=200,w="OK"),c&&this.shouldThrowOnError)throw new aA.default(c)}return{error:c,data:h,count:f,status:p,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Oh.default=lA;var uA=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ah,"__esModule",{value:!0});const cA=uA(Oh);let dA=class extends cA.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ah.default=dA;var hA=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bu,"__esModule",{value:!0});const fA=hA(Ah);let pA=class extends fA.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Bu.default=pA;var mA=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rh,"__esModule",{value:!0});const ml=mA(Bu);let gA=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new ml.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ml.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new ml.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ml.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ml.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Rh.default=gA;var t1=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vy,"__esModule",{value:!0});const yA=t1(Rh),vA=t1(Bu);let wA=class n1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new yA.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new vA.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Vy.default=wA;var Va=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.PostgrestError=Nn.PostgrestBuilder=Nn.PostgrestTransformBuilder=Nn.PostgrestFilterBuilder=Nn.PostgrestQueryBuilder=Nn.PostgrestClient=void 0;const r1=Va(Vy);Nn.PostgrestClient=r1.default;const s1=Va(Rh);Nn.PostgrestQueryBuilder=s1.default;const i1=Va(Bu);Nn.PostgrestFilterBuilder=i1.default;const o1=Va(Ah);Nn.PostgrestTransformBuilder=o1.default;const a1=Va(Oh);Nn.PostgrestBuilder=a1.default;const l1=Va(Ih);Nn.PostgrestError=l1.default;var bA=Nn.default={PostgrestClient:r1.default,PostgrestQueryBuilder:s1.default,PostgrestFilterBuilder:i1.default,PostgrestTransformBuilder:o1.default,PostgrestBuilder:a1.default,PostgrestError:l1.default};const{PostgrestClient:xA,PostgrestQueryBuilder:FU,PostgrestFilterBuilder:BU,PostgrestTransformBuilder:UU,PostgrestBuilder:zU,PostgrestError:VU}=bA;class _A{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kA="2.74.0",SA=`realtime-js/${kA}`,EA="1.0.0",Lm=1e4,CA=1e3,TA=100;var zl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(zl||(zl={}));var Kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Kt||(Kt={}));var Tr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Tr||(Tr={}));var $m;(function(e){e.websocket="websocket"})($m||($m={}));var Fi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Fi||(Fi={}));class PA{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class u1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(gt||(gt={}));const Uw=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=jA(o,e,t,s),i),{}):{}},jA=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?c1(i,o):Mm(o)},c1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return IA(t,n)}switch(e){case gt.bool:return RA(t);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return AA(t);case gt.json:case gt.jsonb:return OA(t);case gt.timestamp:return DA(t);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return Mm(t);default:return Mm(t)}},Mm=e=>e,RA=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},AA=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},OA=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},IA=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>c1(t,a))}return e},DA=e=>typeof e=="string"?e.replace(" ","T"):e,d1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class op{constructor(t,n,r={},s=Lm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zw||(zw={}));class Vl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Vl.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Vl.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const f=c.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),w=c.filter(x=>p.indexOf(x.presence_ref)<0),g=h.filter(x=>f.indexOf(x.presence_ref)<0);w.length>0&&(a[u]=w),g.length>0&&(l[u]=g)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const h=t[a].map(p=>p.presence_ref),f=c.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Vw||(Vw={}));var Kl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Kl||(Kl={}));var os;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(os||(os={}));class Ky{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new op(this,Tr.join,this.params,this.timeout),this.rejoinTimer=new u1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Vl(this),this.broadcastEndpointURL=d1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Kt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Kl.PRESENCE]&&this.bindings[Kl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(os.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(os.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){t==null||t(os.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(w=g==null?void 0:g.length)!==null&&w!==void 0?w:0,y=[];for(let v=0;v<x;v++){const _=g[v],{filter:{event:C,schema:R,table:O,filter:I}}=_,D=p&&p[v];if(D&&D.event===C&&D.schema===R&&D.table===O&&D.filter===I)y.push(Object.assign(Object.assign({},_),{id:D.id}));else{this.unsubscribe(),this.state=Kt.errored,t==null||t(os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(os.SUBSCRIBED);return}}).receive("error",p=>{this.state=Kt.errored,t==null||t(os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Kt.joined&&t===Kl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new op(this,Tr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new op(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>TA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Tr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var w,g,x;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var w,g,x,y,v,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const C=p.id,R=(w=p.filter)===null||w===void 0?void 0:w.event;return C&&((g=n.ids)===null||g===void 0?void 0:g.includes(C))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const C=(v=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return C==="*"||C===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:g,table:x,commit_timestamp:y,type:v,errors:_}=w;f=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:y,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(w))}p.callback(f,r)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ky.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Tr.close,{},t)}_onError(t){this._on(Tr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Uw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Uw(t.columns,t.old_record)),n}}const ap=()=>{},Kc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NA=[1e3,2e3,5e3,1e4],LA=1e4,$A=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MA{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lm,this.transport=null,this.heartbeatIntervalMs=Kc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ap,this.ref=0,this.reconnectTimer=null,this.logger=ap,this.conn=null,this.sendBuffer=[],this.serializer=new PA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ua(async()=>{const{default:a}=await Promise.resolve().then(()=>za);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${$m.websocket}`,this.httpEndpoint=d1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_A.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:EA}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zl.connecting:return Fi.Connecting;case zl.open:return Fi.Open;case zl.closing:return Fi.Closing;default:return Fi.Closed}}isConnected(){return this.connectionState()===Fi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Ky(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(CA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Kc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Tr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([$A],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:SA};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Tr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new u1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Lm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Kc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:ap,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:h=>NA[h-1]||LA,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Wy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Bt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class FA extends Wy{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fm extends Wy{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var BA=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const h1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},UA=()=>BA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ua(()=>Promise.resolve().then(()=>za),void 0)).Response:Response}),Bm=e=>{if(Array.isArray(e))return e.map(n=>Bm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Bm(r)}),t},zA=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var _o=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const lp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VA=(e,t,n)=>_o(void 0,void 0,void 0,function*(){const r=yield UA();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new FA(lp(s),i,o))}).catch(s=>{t(new Fm(lp(s),s))}):t(new Fm(lp(e),e))}),KA=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(zA(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Uu(e,t,n,r,s,i){return _o(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,KA(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>VA(l,a,r))})})}function Yd(e,t,n,r){return _o(this,void 0,void 0,function*(){return Uu(e,"GET",t,n,r)})}function Ur(e,t,n,r,s){return _o(this,void 0,void 0,function*(){return Uu(e,"POST",t,r,s,n)})}function Um(e,t,n,r,s){return _o(this,void 0,void 0,function*(){return Uu(e,"PUT",t,r,s,n)})}function WA(e,t,n,r){return _o(this,void 0,void 0,function*(){return Uu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function f1(e,t,n,r,s){return _o(this,void 0,void 0,function*(){return Uu(e,"DELETE",t,r,s,n)})}var HA=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class qA{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return HA(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bt(t))return{data:null,error:t};throw t}})}}var GA=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class QA{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new qA(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return GA(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bt(t))return{data:null,error:t};throw t}})}}var jn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const YA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class JA{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=h1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return jn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Kw),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),h=yield(t=="PUT"?Um:Ur)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Bt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return jn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Kw.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield Um(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Bt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return jn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ur(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Wy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}update(t,n,r){return jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return jn(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return jn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return jn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ur(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return jn(this,void 0,void 0,function*(){try{const s=yield Ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>Yd(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new QA(l,this.shouldThrowOnError)}info(t){return jn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Yd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}exists(t){return jn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield WA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r)&&r instanceof Fm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return jn(this,void 0,void 0,function*(){try{return{data:yield f1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}list(t,n,r){return jn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},YA),n),{prefix:t||""});return{data:yield Ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}listV2(t,n){return jn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ur(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const ZA="2.74.0",XA={"X-Client-Info":`storage-js/${ZA}`};var Io=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class eO{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XA),n),this.fetch=h1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Io(this,void 0,void 0,function*(){try{return{data:yield Yd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bt(t))return{data:null,error:t};throw t}})}getBucket(t){return Io(this,void 0,void 0,function*(){try{return{data:yield Yd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}createBucket(t){return Io(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Io(this,void 0,void 0,function*(){try{return{data:yield Um(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Io(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Io(this,void 0,void 0,function*(){try{return{data:yield f1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}}class tO extends eO{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new JA(this.url,this.headers,t,this.fetch)}}const nO="2.74.0";let Cl="";typeof Deno<"u"?Cl="deno":typeof document<"u"?Cl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cl="react-native":Cl="node";const rO={"X-Client-Info":`supabase-js-${Cl}/${nO}`},sO={headers:rO},iO={schema:"public"},oO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aO={};var lO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const uO=e=>{let t;return e?t=e:typeof fetch>"u"?t=ZS:t=fetch,(...n)=>t(...n)},cO=()=>typeof Headers>"u"?XS:Headers,dO=(e,t,n)=>{const r=uO(n),s=cO();return(i,o)=>lO(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var hO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function fO(e){return e.endsWith("/")?e:e+"/"}function pO(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>hO(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function mO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const p1="2.74.0",Bo=30*1e3,zm=3,up=zm*Bo,gO="http://localhost:9999",yO="supabase.auth.token",vO={"X-Client-Info":`gotrue-js/${p1}`},Vm="X-Supabase-Api-Version",m1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bO=10*60*1e3;class yu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xO extends yu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _O(e){return qe(e)&&e.name==="AuthApiError"}class Bi extends yu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class _i extends yu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class $s extends _i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kO(e){return qe(e)&&e.name==="AuthSessionMissingError"}class Do extends _i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wc extends _i{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hc extends _i{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SO(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ww extends _i{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Km extends _i{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function cp(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class Hw extends _i{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Wm extends _i{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qw=` 	
\r=`.split(""),EO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qw.length;t+=1)e[qw[t].charCodeAt(0)]=-2;for(let t=0;t<Jd.length;t+=1)e[Jd[t].charCodeAt(0)]=t;return e})();function Gw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jd[r]),t.queuedBits-=6}}function g1(e,t,n){const r=EO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Qw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{PO(o,r,n)};for(let o=0;o<e.length;o+=1)g1(e.charCodeAt(o),s,i);return t.join("")}function CO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TO(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}CO(r,t)}}function PO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function da(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)g1(e.charCodeAt(s),n,r);return new Uint8Array(t)}function jO(e){const t=[];return TO(e,n=>t.push(n)),new Uint8Array(t)}function Wi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Gw(s,n,r)),Gw(null,n,r),t.join("")}function RO(e){return Math.round(Date.now()/1e3)+e}function AO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const qn=()=>typeof window<"u"&&typeof document<"u",Ai={tested:!1,writable:!1},y1=()=>{if(!qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ai.tested)return Ai.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ai.tested=!0,Ai.writable=!0}catch{Ai.tested=!0,Ai.writable=!1}return Ai.writable};function OO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const v1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ua(async()=>{const{default:r}=await Promise.resolve().then(()=>za);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},IO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Uo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ls=async(e,t)=>{await e.removeItem(t)};class Dh{constructor(){this.promise=new Dh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Dh.promiseConstructor=Promise;function dp(e){const t=e.split(".");if(t.length!==3)throw new Wm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!wO.test(t[r]))throw new Wm("JWT not in base64url format");return{header:JSON.parse(Qw(t[0])),payload:JSON.parse(Qw(t[1])),signature:da(t[2]),raw:{header:t[0],payload:t[1]}}}async function DO(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function NO(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function LO(e){return("0"+e.toString(16)).substr(-2)}function $O(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,LO).join("")}async function MO(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await MO(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function No(e,t,n=!1){const r=$O();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Uo(e,`${t}-code-verifier`,s);const i=await FO(r);return[i,r===i?"plain":"s256"]}const BO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UO(e){const t=e.headers.get(Vm);if(!t||!t.match(BO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function VO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lo(e){if(!KO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yw(e){return JSON.parse(JSON.stringify(e))}var WO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Li=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),HO=[502,503,504];async function Jw(e){var t;if(!IO(e))throw new Km(Li(e),0);if(HO.includes(e.status))throw new Km(Li(e),e.status);let n;try{n=await e.json()}catch(i){throw new Bi(Li(i),i)}let r;const s=UO(e);if(s&&s.getTime()>=m1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Hw(Li(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new $s}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hw(Li(n),e.status,n.weak_password.reasons);throw new xO(Li(n),e.status||500,r)}const qO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ye(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Vm]||(i[Vm]=m1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await GO(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function GO(e,t,n,r,s,i){const o=qO(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Km(Li(l),0)}if(a.ok||await Jw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Jw(l)}}function xr(e){var t;let n=null;JO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=RO(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Zw(e){const t=xr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ks(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QO(e){return{data:e,error:null}}function YO(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=WO(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Xw(e){return e}function JO(e){return e.access_token&&e.refresh_token&&e.expires_in}const fp=["global","local","others"];var ZO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class XO{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=v1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=fp[0]){if(fp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fp.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ks})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ZO(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:YO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ks})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xw});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(qe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Lo(t);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ks})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Lo(t);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ks})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Lo(t);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ks})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Lo(t.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Lo(t.userId),Lo(t.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xw});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(qe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}}function eb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const $o={debug:!!(globalThis&&y1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class w1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class eI extends w1{}async function tI(e,t,n){$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),$o.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw $o.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new eI(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($o.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function nI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function b1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rI(e){return parseInt(e,16)}function sI(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function iI(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=b1(e.address),w=c?`${c}://${r}`:r,g=e.statement?`${e.statement}
`:"",x=`${w} wants you to sign in with your Ethereum account:
${p}

${g}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),u){let v=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);v+=`
- ${_}`}y+=v}return`${x}
${y}`}class Ft extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Zd extends Ft{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function oI({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(_1(o)){if(i.rp.id!==o)return new Ft({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function aI({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(_1(r)){if(n.rpId!==r)return new Ft({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var x1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class lI{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const uI=new lI;function cI(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=x1(e,["challenge","user","excludeCredentials"]),i=da(t).buffer,o=Object.assign(Object.assign({},n),{id:da(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:da(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function dI(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=x1(e,["challenge","allowCredentials"]),s=da(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:da(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function hI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Wi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Wi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Wi(new Uint8Array(s.authenticatorData)),clientDataJSON:Wi(new Uint8Array(s.clientDataJSON)),signature:Wi(new Uint8Array(s.signature)),userHandle:s.userHandle?Wi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _1(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tb(){var e,t;return!!(qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pI(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zd("Browser returned unexpected credential type",t)}:{data:null,error:new Zd("Empty credential response",t)}}catch(t){return{data:null,error:oI({error:t,options:e})}}}async function mI(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zd("Browser returned unexpected credential type",t)}:{data:null,error:new Zd("Empty credential response",t)}}catch(t){return{data:null,error:aI({error:t,options:e})}}}const gI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},yI={userVerification:"preferred",hints:["security-key"]};function Xd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Xd(a,o):r[i]=Xd(o)}else r[i]=o}return r}function vI(e,t){return Xd(gI,e,t||{})}function wI(e,t){return Xd(yI,e,t||{})}class bI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??uI.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=vI(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:h}=await pI({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}case"request":{const u=wI(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:h}=await mI(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}}}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new yu("rpId is required for WebAuthn authentication")};try{if(!tb())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new yu("rpId is required for WebAuthn registration")};try{if(!tb())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in register",o)}}}}nI();const xI={url:gO,storageKey:yO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nb(e,t,n){return await n()}const Mo={};class vu{get jwks(){var t,n;return(n=(t=Mo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Mo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vu.nextInstanceID,vu.nextInstanceID+=1,this.instanceID>0&&qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xI),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new XO({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=v1(s.fetch),this.lock=s.lock||nb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=tI:this.lock=nb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bI(this)},this.persistSession?(s.storage?this.storage=s.storage:y1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eb(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=eb(this.memoryStorage)),qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${p1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=OO(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),qn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SO(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return qe(n)?{error:n}:{error:new Bi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:xr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:h,options:f}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await No(this.storage,this.storageKey)),i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:w},xform:xr})}else if("phone"in t){const{phone:c,password:h,options:f}=t;i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:xr})}else throw new Wc("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zw})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zw})}else throw new Wc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Do}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,c,h,f;let p,w;if("message"in t)p=t.message,w=t.signature;else{const{chain:g,wallet:x,statement:y,options:v}=t;let _;if(qn())if(typeof x=="object")_=x;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")_=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const C=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),R=await _.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=b1(R[0]);let I=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const $=await _.request({method:"eth_chainId"});I=rI($)}const D={domain:C.host,address:O,statement:y,uri:C.href,version:"1",chainId:I,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=iI(D),w=await _.request({method:"personal_sign",params:[sI(p),O]})}try{const{data:g,error:x}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:w},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:xr});if(x)throw x;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Do}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:x})}catch(g){if(qe(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,h,f,p;let w,g;if("message"in t)w=t.message,g=t.signature;else{const{chain:x,wallet:y,statement:v,options:_}=t;let C;if(qn())if(typeof y=="object")C=y;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))C=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=y}const R=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const O=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),v?{statement:v}:null));let I;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")I=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)I=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)w=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),g=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${R.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const O=await C.signMessage(new TextEncoder().encode(w),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=O}}try{const{data:x,error:y}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Wi(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:xr});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Do}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(qe(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Oi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:xr});if(await Ls(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Do}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(qe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Do}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await No(this.storage,this.storageKey));const{error:h}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Wc("You must provide either an email or phone number.")}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(qe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await No(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:QO})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new $s;const{error:s}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Wc("You must provide either an email or phone number and a type")}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<up:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Oi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=hp()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ks}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $s}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ks})})}catch(n){if(qe(n))return kO(n)&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new $s;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await No(this.storage,this.storageKey));const{data:u,error:c}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ks});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $s;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=dp(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new $s;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!qn())throw new Hc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ww("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ww("No code detected.");const{data:v,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Hc("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const p=f-c;p*1e3<=Bo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;c-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,c):c-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,c);const{data:g,error:x}=await this._getUser(i);if(x)throw x;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(qe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(_O(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=AO(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await No(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return qn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(qe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,h=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xr}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Do}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:p})}catch(s){if(qe(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await NO(async s=>(s>0&&await DO(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&cp(i)&&Date.now()+o-r<Bo})}catch(r){if(this._debug(n,"error",r),qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),qn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Oi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Uo(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:hp()}else if(s&&!s.user&&!s.user){const o=await Oi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ls(this.storage,this.storageKey+"-user"),await Uo(this.storage,this.storageKey,s)):s.user=hp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<up;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${up}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),cp(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new $s;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Dh;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new $s;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),qe(i)){const o={data:null,error:i};return cp(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Uo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Yw(s);await Uo(this.storage,this.storageKey,i)}else{const s=Yw(n);await Uo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ls(this.storage,this.storageKey),await Ls(this.storage,this.storageKey+"-code-verifier"),await Ls(this.storage,this.storageKey+"-user"),this.userStorage&&await Ls(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Bo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Bo}ms, refresh threshold is ${zm} ticks`),s<=zm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof w1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await No(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?hI(t.webauthn.credential_response):fI(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:cI(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:dI(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=dp(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+bO>s)return r;const{data:i,error:o}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:w}=await this.getSession();if(w||!p.session)return{data:null,error:w};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=dp(r);n!=null&&n.allowExpired||zO(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const c=VO(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,jO(`${a}.${l}`)))throw new Wm("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}}vu.nextInstanceID=0;const _I=vu;class kI extends _I{constructor(t){super(t)}}var SI=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class EI{constructor(t,n,r){var s,i,o;this.supabaseUrl=t,this.supabaseKey=n;const a=mO(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:iO,realtime:aO,auth:Object.assign(Object.assign({},oO),{storageKey:l}),global:sO},c=pO(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=dO(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new xA(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new tO(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new XR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return SI(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kI({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new MA(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CI=(e,t,n)=>new EI(e,t,n);function TI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}TI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PI="https://"+JS+".supabase.co",jI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",RI=PI,AI=jI,Vt=CI(RI,AI),Hy=S.createContext({session:null,setSession:()=>{},isLoading:!0}),OI=({children:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(!0);S.useEffect(()=>{Vt.auth.getSession().then(({data:{session:a}})=>{n(a),s(!1)});const{data:{subscription:o}}=Vt.auth.onAuthStateChange((a,l)=>{n(l)});return()=>{console.log("AUTH_DEBUG: 5. Cleanup function running."),o.unsubscribe()}},[]);const i={session:t,setSession:n,isLoading:r};return b.jsx(Hy.Provider,{value:i,children:e})},Cs=()=>S.useContext(Hy),II=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(null),l=Vn(),{setSession:u}=Cs(),c=async h=>{h.preventDefault(),i(!0),a(null);try{const{data:{session:f},error:p}=await Vt.auth.signInWithPassword({email:e,password:n});if(p)a(p.message);else if(f){u(f);const w=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(w||"/categories",{replace:!0})}}catch(f){a(f.message||"An unexpected error occurred during login.")}finally{i(!1)}};return b.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:b.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),b.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:b.jsxs("div",{className:"max-w-md mx-auto",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),b.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),b.jsx("div",{children:o&&b.jsx("p",{className:"text-red-500",children:o})}),b.jsxs("div",{className:"divide-y divide-gray-200",children:[b.jsx("form",{onSubmit:c,children:b.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[b.jsxs("div",{className:"relative",children:[b.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:h=>t(h.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),b.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:h=>r(h.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),b.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),b.jsx("div",{className:"relative",children:b.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:s,children:s?"Logging in...":"Login"})})]})}),b.jsxs("p",{children:["Don't have an account? ",b.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),b.jsxs("p",{children:["Forgot your password? ",b.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},DI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(null),l=async u=>{u.preventDefault(),i(!0),a(null);try{const{error:c}=await Vt.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{i(!1)}};return b.jsxs("div",{children:[b.jsx("h2",{children:"Sign Up"}),o&&b.jsx("p",{style:{color:"red"},children:o}),b.jsxs("form",{onSubmit:l,children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",children:"Email:"}),b.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",children:"Password:"}),b.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),b.jsx("button",{type:"submit",disabled:s,children:s?"Signing up...":"Sign Up"})]})]})},NI=()=>{const[e,t]=S.useState(""),[n,r]=S.useState(!1),[s,i]=S.useState(null),[o,a]=S.useState(null),l=async u=>{u.preventDefault(),r(!0),i(null),a(null);try{const{error:c}=await Vt.auth.updateUser({password:e});c?i(c.message):(a("Password updated successfully!"),t(""))}catch(c){i(c.message||"An unexpected error occurred")}finally{r(!1)}};return b.jsxs("div",{children:[b.jsx("h2",{children:"Change Password"}),s&&b.jsx("p",{style:{color:"red"},children:s}),o&&b.jsx("p",{style:{color:"green"},children:o}),b.jsxs("form",{onSubmit:l,children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),b.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),b.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},LI="auth_redirect_sankeertan",$I=()=>{const e=Vn(),[t]=UR(),[n,r]=S.useState(!0),[s,i]=S.useState(null),{setSession:o}=S.useContext(Hy);return S.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(h,f,p)=>{r(!0),i(null);try{let w;if(f==="invite"||f==="signup"||f==="email_change"||f==="magiclink"){const g=p;if(!g){i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}w=await Vt.auth.verifyOtp({token:h,type:f,email:g})}else if(f==="recover"){e(`/reset-password?token=${h}`,{replace:!0});return}else if(f==="sms"){const g=p;if(!g){i("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}w=await Vt.auth.verifyOtp({token:h,type:"sms",phone:g})}else{i(`Unsupported authentication type: ${f}`),r(!1),e("/login",{replace:!0});return}if(w!=null&&w.error)i(w.error.message);else{const{data:{session:g}}=await Vt.auth.getSession();g&&o(g),localStorage.setItem(LI,"true"),e("/",{replace:!0})}}catch(w){i(w.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(i("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?b.jsx("div",{children:"Verifying your account..."}):s?b.jsxs("div",{children:["Error verifying account: ",s]}):null};var zu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},MI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},qs,Fg,p_,FI=(p_=class{constructor(){Ge(this,qs,MI);Ge(this,Fg,!1)}setTimeoutProvider(e){Ue(this,qs,e)}setTimeout(e,t){return X(this,qs).setTimeout(e,t)}clearTimeout(e){X(this,qs).clearTimeout(e)}setInterval(e,t){return X(this,qs).setInterval(e,t)}clearInterval(e){X(this,qs).clearInterval(e)}},qs=new WeakMap,Fg=new WeakMap,p_),Hi=new FI;function BI(e){setTimeout(e,0)}var mo=typeof window>"u"||"Deno"in globalThis;function In(){}function UI(e,t){return typeof e=="function"?e(t):e}function Hm(e){return typeof e=="number"&&e>=0&&e!==1/0}function k1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function fi(e,t){return typeof e=="function"?e(t):e}function ar(e,t){return typeof e=="function"?e(t):e}function rb(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==qy(o,t.options))return!1}else if(!bu(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function sb(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(wu(t.options.mutationKey)!==wu(i))return!1}else if(!bu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function qy(e,t){return((t==null?void 0:t.queryKeyHashFn)||wu)(e)}function wu(e){return JSON.stringify(e,(t,n)=>Gm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function bu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>bu(e[n],t[n])):!1}var zI=Object.prototype.hasOwnProperty;function S1(e,t){if(e===t)return e;const n=ib(e)&&ib(t);if(!n&&!(Gm(e)&&Gm(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:i[u],h=e[c],f=t[c];if(h===f){a[c]=h,(n?u<s:zI.call(e,c))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[c]=f;continue}const p=S1(h,f);a[c]=p,p===h&&l++}return s===o&&l===s?e:a}function qm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function ib(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gm(e){if(!ob(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!ob(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ob(e){return Object.prototype.toString.call(e)==="[object Object]"}function VI(e){return new Promise(t=>{Hi.setTimeout(t,e)})}function Qm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?S1(e,t):t}function KI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function WI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Gy=Symbol();function E1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Gy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function HI(e,t){return typeof e=="function"?e(...t):!!e}var Yi,Gs,fa,m_,qI=(m_=class extends zu{constructor(){super();Ge(this,Yi);Ge(this,Gs);Ge(this,fa);Ue(this,fa,t=>{if(!mo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Gs)||this.setEventListener(X(this,fa))}onUnsubscribe(){var t;this.hasListeners()||((t=X(this,Gs))==null||t.call(this),Ue(this,Gs,void 0))}setEventListener(t){var n;Ue(this,fa,t),(n=X(this,Gs))==null||n.call(this),Ue(this,Gs,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){X(this,Yi)!==t&&(Ue(this,Yi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof X(this,Yi)=="boolean"?X(this,Yi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Yi=new WeakMap,Gs=new WeakMap,fa=new WeakMap,m_),Qy=new qI;function Ym(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var GI=BI;function QI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=GI;const i=a=>{t?e.push(a):s(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var sn=QI(),pa,Qs,ma,g_,YI=(g_=class extends zu{constructor(){super();Ge(this,pa,!0);Ge(this,Qs);Ge(this,ma);Ue(this,ma,t=>{if(!mo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,Qs)||this.setEventListener(X(this,ma))}onUnsubscribe(){var t;this.hasListeners()||((t=X(this,Qs))==null||t.call(this),Ue(this,Qs,void 0))}setEventListener(t){var n;Ue(this,ma,t),(n=X(this,Qs))==null||n.call(this),Ue(this,Qs,t(this.setOnline.bind(this)))}setOnline(t){X(this,pa)!==t&&(Ue(this,pa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return X(this,pa)}},pa=new WeakMap,Qs=new WeakMap,ma=new WeakMap,g_),eh=new YI;function JI(e){return Math.min(1e3*2**e,3e4)}function C1(e){return(e??"online")==="online"?eh.isOnline():!0}var Jm=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function T1(e){let t=!1,n=0,r;const s=Ym(),i=()=>s.status!=="pending",o=g=>{var x;if(!i()){const y=new Jm(g);f(y),(x=e.onCancel)==null||x.call(e,y)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>Qy.isFocused()&&(e.networkMode==="always"||eh.isOnline())&&e.canRun(),c=()=>C1(e.networkMode)&&e.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var x;r=y=>{(i()||u())&&g(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;r=void 0,i()||(g=e.onContinue)==null||g.call(e)}),w=()=>{if(i())return;let g;const x=n===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var O;if(i())return;const v=e.retry??(mo?0:3),_=e.retryDelay??JI,C=typeof _=="function"?_(n,y):_,R=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(t||!R){f(y);return}n++,(O=e.onFail)==null||O.call(e,n,y),VI(C).then(()=>u()?void 0:p()).then(()=>{t?f(y):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?w():p().then(w),s)}}var Ji,y_,P1=(y_=class{constructor(){Ge(this,Ji)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hm(this.gcTime)&&Ue(this,Ji,Hi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(mo?1/0:5*60*1e3))}clearGcTimeout(){X(this,Ji)&&(Hi.clearTimeout(X(this,Ji)),Ue(this,Ji,void 0))}},Ji=new WeakMap,y_),Zi,ga,or,Xi,Zt,Tu,eo,Sr,ss,v_,ZI=(v_=class extends P1{constructor(t){super();Ge(this,Sr);Ge(this,Zi);Ge(this,ga);Ge(this,or);Ge(this,Xi);Ge(this,Zt);Ge(this,Tu);Ge(this,eo);Ue(this,eo,!1),Ue(this,Tu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ue(this,Xi,t.client),Ue(this,or,X(this,Xi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ue(this,Zi,ab(this.options)),this.state=t.state??X(this,Zi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=X(this,Zt))==null?void 0:t.promise}setOptions(t){if(this.options={...X(this,Tu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ab(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Ue(this,Zi,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,or).remove(this)}setData(t,n){const r=Qm(this.state.data,t,this.options);return it(this,Sr,ss).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){it(this,Sr,ss).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=X(this,Zt))==null?void 0:r.promise;return(s=X(this,Zt))==null||s.cancel(t),n?n.then(In).catch(In):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,Zi))}isActive(){return this.observers.some(t=>ar(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>fi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!k1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=X(this,Zt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=X(this,Zt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),X(this,or).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(X(this,Zt)&&(X(this,eo)?X(this,Zt).cancel({revert:!0}):X(this,Zt).cancelRetry()),this.scheduleGc()),X(this,or).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||it(this,Sr,ss).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,h,f,p,w,g,x,y,v,_;if(this.state.fetchStatus!=="idle"&&((l=X(this,Zt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(X(this,Zt))return X(this,Zt).continueRetry(),X(this,Zt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(R=>R.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Ue(this,eo,!0),r.signal)})},i=()=>{const C=E1(this.options,n),O=(()=>{const I={client:X(this,Xi),queryKey:this.queryKey,meta:this.meta};return s(I),I})();return Ue(this,eo,!1),this.options.persister?this.options.persister(C,O,this):C(O)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:X(this,Xi),state:this.state,fetchFn:i};return s(C),C})();(u=this.options.behavior)==null||u.onFetch(a,this),Ue(this,ga,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&it(this,Sr,ss).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),Ue(this,Zt,T1({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof Jm&&C.revert&&this.setState({...X(this,ga),fetchStatus:"idle"}),r.abort()},onFail:(C,R)=>{it(this,Sr,ss).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{it(this,Sr,ss).call(this,{type:"pause"})},onContinue:()=>{it(this,Sr,ss).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await X(this,Zt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(p=(f=X(this,or).config).onSuccess)==null||p.call(f,C,this),(g=(w=X(this,or).config).onSettled)==null||g.call(w,C,this.state.error,this),C}catch(C){if(C instanceof Jm){if(C.silent)return X(this,Zt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw it(this,Sr,ss).call(this,{type:"error",error:C}),(y=(x=X(this,or).config).onError)==null||y.call(x,C,this),(_=(v=X(this,or).config).onSettled)==null||_.call(v,this.state.data,C,this),C}finally{this.scheduleGc()}}},Zi=new WeakMap,ga=new WeakMap,or=new WeakMap,Xi=new WeakMap,Zt=new WeakMap,Tu=new WeakMap,eo=new WeakMap,Sr=new WeakSet,ss=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...j1(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ue(this,ga,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),sn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),X(this,or).notify({query:this,type:"updated",action:t})})},v_);function j1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:C1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ab(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Rn,ot,Pu,_n,to,ya,ls,Ys,ju,va,wa,no,ro,Js,ba,ct,Tl,Zm,Xm,eg,tg,ng,rg,sg,R1,w_,XI=(w_=class extends zu{constructor(t,n){super();Ge(this,ct);Ge(this,Rn);Ge(this,ot);Ge(this,Pu);Ge(this,_n);Ge(this,to);Ge(this,ya);Ge(this,ls);Ge(this,Ys);Ge(this,ju);Ge(this,va);Ge(this,wa);Ge(this,no);Ge(this,ro);Ge(this,Js);Ge(this,ba,new Set);this.options=n,Ue(this,Rn,t),Ue(this,Ys,null),Ue(this,ls,Ym()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,ot).addObserver(this),lb(X(this,ot),this.options)?it(this,ct,Tl).call(this):this.updateResult(),it(this,ct,tg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ig(X(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ig(X(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,it(this,ct,ng).call(this),it(this,ct,rg).call(this),X(this,ot).removeObserver(this)}setOptions(t){const n=this.options,r=X(this,ot);if(this.options=X(this,Rn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ar(this.options.enabled,X(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");it(this,ct,sg).call(this),X(this,ot).setOptions(this.options),n._defaulted&&!qm(this.options,n)&&X(this,Rn).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,ot),observer:this});const s=this.hasListeners();s&&ub(X(this,ot),r,this.options,n)&&it(this,ct,Tl).call(this),this.updateResult(),s&&(X(this,ot)!==r||ar(this.options.enabled,X(this,ot))!==ar(n.enabled,X(this,ot))||fi(this.options.staleTime,X(this,ot))!==fi(n.staleTime,X(this,ot)))&&it(this,ct,Zm).call(this);const i=it(this,ct,Xm).call(this);s&&(X(this,ot)!==r||ar(this.options.enabled,X(this,ot))!==ar(n.enabled,X(this,ot))||i!==X(this,Js))&&it(this,ct,eg).call(this,i)}getOptimisticResult(t){const n=X(this,Rn).getQueryCache().build(X(this,Rn),t),r=this.createResult(n,t);return tD(this,r)&&(Ue(this,_n,r),Ue(this,ya,this.options),Ue(this,to,X(this,ot).state)),r}getCurrentResult(){return X(this,_n)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&X(this,ls).status==="pending"&&X(this,ls).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){X(this,ba).add(t)}getCurrentQuery(){return X(this,ot)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=X(this,Rn).defaultQueryOptions(t),r=X(this,Rn).getQueryCache().build(X(this,Rn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return it(this,ct,Tl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,_n)))}createResult(t,n){var $;const r=X(this,ot),s=this.options,i=X(this,_n),o=X(this,to),a=X(this,ya),u=t!==r?t.state:X(this,Pu),{state:c}=t;let h={...c},f=!1,p;if(n._optimisticResults){const F=this.hasListeners(),he=!F&&lb(t,n),N=F&&ub(t,r,n,s);(he||N)&&(h={...h,...j1(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:g,status:x}=h;p=h.data;let y=!1;if(n.placeholderData!==void 0&&p===void 0&&x==="pending"){let F;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(F=i.data,y=!0):F=typeof n.placeholderData=="function"?n.placeholderData(($=X(this,wa))==null?void 0:$.state.data,X(this,wa)):n.placeholderData,F!==void 0&&(x="success",p=Qm(i==null?void 0:i.data,F,n),f=!0)}if(n.select&&p!==void 0&&!y)if(i&&p===(o==null?void 0:o.data)&&n.select===X(this,ju))p=X(this,va);else try{Ue(this,ju,n.select),p=n.select(p),p=Qm(i==null?void 0:i.data,p,n),Ue(this,va,p),Ue(this,Ys,null)}catch(F){Ue(this,Ys,F)}X(this,Ys)&&(w=X(this,Ys),p=X(this,va),g=Date.now(),x="error");const v=h.fetchStatus==="fetching",_=x==="pending",C=x==="error",R=_&&v,O=p!==void 0,D={status:x,fetchStatus:h.fetchStatus,isPending:_,isSuccess:x==="success",isError:C,isInitialLoading:R,isLoading:R,data:p,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!_,isLoadingError:C&&!O,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:C&&O,isStale:Yy(t,n),refetch:this.refetch,promise:X(this,ls),isEnabled:ar(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const F=J=>{D.status==="error"?J.reject(D.error):D.data!==void 0&&J.resolve(D.data)},he=()=>{const J=Ue(this,ls,D.promise=Ym());F(J)},N=X(this,ls);switch(N.status){case"pending":t.queryHash===r.queryHash&&F(N);break;case"fulfilled":(D.status==="error"||D.data!==N.value)&&he();break;case"rejected":(D.status!=="error"||D.error!==N.reason)&&he();break}}return D}updateResult(){const t=X(this,_n),n=this.createResult(X(this,ot),this.options);if(Ue(this,to,X(this,ot).state),Ue(this,ya,this.options),X(this,to).data!==void 0&&Ue(this,wa,X(this,ot)),qm(n,t))return;Ue(this,_n,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!X(this,ba).size)return!0;const o=new Set(i??X(this,ba));return this.options.throwOnError&&o.add("error"),Object.keys(X(this,_n)).some(a=>{const l=a;return X(this,_n)[l]!==t[l]&&o.has(l)})};it(this,ct,R1).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&it(this,ct,tg).call(this)}},Rn=new WeakMap,ot=new WeakMap,Pu=new WeakMap,_n=new WeakMap,to=new WeakMap,ya=new WeakMap,ls=new WeakMap,Ys=new WeakMap,ju=new WeakMap,va=new WeakMap,wa=new WeakMap,no=new WeakMap,ro=new WeakMap,Js=new WeakMap,ba=new WeakMap,ct=new WeakSet,Tl=function(t){it(this,ct,sg).call(this);let n=X(this,ot).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(In)),n},Zm=function(){it(this,ct,ng).call(this);const t=fi(this.options.staleTime,X(this,ot));if(mo||X(this,_n).isStale||!Hm(t))return;const r=k1(X(this,_n).dataUpdatedAt,t)+1;Ue(this,no,Hi.setTimeout(()=>{X(this,_n).isStale||this.updateResult()},r))},Xm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,ot)):this.options.refetchInterval)??!1},eg=function(t){it(this,ct,rg).call(this),Ue(this,Js,t),!(mo||ar(this.options.enabled,X(this,ot))===!1||!Hm(X(this,Js))||X(this,Js)===0)&&Ue(this,ro,Hi.setInterval(()=>{(this.options.refetchIntervalInBackground||Qy.isFocused())&&it(this,ct,Tl).call(this)},X(this,Js)))},tg=function(){it(this,ct,Zm).call(this),it(this,ct,eg).call(this,it(this,ct,Xm).call(this))},ng=function(){X(this,no)&&(Hi.clearTimeout(X(this,no)),Ue(this,no,void 0))},rg=function(){X(this,ro)&&(Hi.clearInterval(X(this,ro)),Ue(this,ro,void 0))},sg=function(){const t=X(this,Rn).getQueryCache().build(X(this,Rn),this.options);if(t===X(this,ot))return;const n=X(this,ot);Ue(this,ot,t),Ue(this,Pu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},R1=function(t){sn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(X(this,_n))}),X(this,Rn).getQueryCache().notify({query:X(this,ot),type:"observerResultsUpdated"})})},w_);function eD(e,t){return ar(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function lb(e,t){return eD(e,t)||e.state.data!==void 0&&ig(e,t,t.refetchOnMount)}function ig(e,t,n){if(ar(t.enabled,e)!==!1&&fi(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Yy(e,t)}return!1}function ub(e,t,n,r){return(e!==t||ar(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Yy(e,n)}function Yy(e,t){return ar(t.enabled,e)!==!1&&e.isStaleByTime(fi(t.staleTime,e))}function tD(e,t){return!qm(e.getCurrentResult(),t)}function cb(e){return{onFetch:(t,n)=>{var c,h,f,p,w;const r=t.options,s=(f=(h=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=E1(t.options,t.fetchOptions),v=async(_,C,R)=>{if(g)return Promise.reject();if(C==null&&_.pages.length)return Promise.resolve(_);const I=(()=>{const he={client:t.client,queryKey:t.queryKey,pageParam:C,direction:R?"backward":"forward",meta:t.options.meta};return x(he),he})(),D=await y(I),{maxPages:$}=t.options,F=R?WI:KI;return{pages:F(_.pages,D,$),pageParams:F(_.pageParams,C,$)}};if(s&&i.length){const _=s==="backward",C=_?nD:db,R={pages:i,pageParams:o},O=C(r,R);a=await v(R,O,_)}else{const _=e??i.length;do{const C=l===0?o[0]??r.initialPageParam:db(r,a);if(l>0&&C==null)break;a=await v(a,C),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function db(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function nD(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ru,zr,kn,so,Vr,Ms,b_,rD=(b_=class extends P1{constructor(t){super();Ge(this,Vr);Ge(this,Ru);Ge(this,zr);Ge(this,kn);Ge(this,so);Ue(this,Ru,t.client),this.mutationId=t.mutationId,Ue(this,kn,t.mutationCache),Ue(this,zr,[]),this.state=t.state||sD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){X(this,zr).includes(t)||(X(this,zr).push(t),this.clearGcTimeout(),X(this,kn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ue(this,zr,X(this,zr).filter(n=>n!==t)),this.scheduleGc(),X(this,kn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){X(this,zr).length||(this.state.status==="pending"?this.scheduleGc():X(this,kn).remove(this))}continue(){var t;return((t=X(this,so))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,h,f,p,w,g,x,y,v,_,C,R,O,I,D,$;const n=()=>{it(this,Vr,Ms).call(this,{type:"continue"})},r={client:X(this,Ru),meta:this.options.meta,mutationKey:this.options.mutationKey};Ue(this,so,T1({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(F,he)=>{it(this,Vr,Ms).call(this,{type:"failed",failureCount:F,error:he})},onPause:()=>{it(this,Vr,Ms).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,kn).canRun(this)}));const s=this.state.status==="pending",i=!X(this,so).canStart();try{if(s)n();else{it(this,Vr,Ms).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=X(this,kn).config).onMutate)==null?void 0:a.call(o,t,this,r));const he=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));he!==this.state.context&&it(this,Vr,Ms).call(this,{type:"pending",context:he,variables:t,isPaused:i})}const F=await X(this,so).start();return await((h=(c=X(this,kn).config).onSuccess)==null?void 0:h.call(c,F,t,this.state.context,this,r)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,F,t,this.state.context,r)),await((g=(w=X(this,kn).config).onSettled)==null?void 0:g.call(w,F,null,this.state.variables,this.state.context,this,r)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,F,null,t,this.state.context,r)),it(this,Vr,Ms).call(this,{type:"success",data:F}),F}catch(F){try{throw await((_=(v=X(this,kn).config).onError)==null?void 0:_.call(v,F,t,this.state.context,this,r)),await((R=(C=this.options).onError)==null?void 0:R.call(C,F,t,this.state.context,r)),await((I=(O=X(this,kn).config).onSettled)==null?void 0:I.call(O,void 0,F,this.state.variables,this.state.context,this,r)),await(($=(D=this.options).onSettled)==null?void 0:$.call(D,void 0,F,t,this.state.context,r)),F}finally{it(this,Vr,Ms).call(this,{type:"error",error:F})}}finally{X(this,kn).runNext(this)}}},Ru=new WeakMap,zr=new WeakMap,kn=new WeakMap,so=new WeakMap,Vr=new WeakSet,Ms=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),sn.batch(()=>{X(this,zr).forEach(r=>{r.onMutationUpdate(t)}),X(this,kn).notify({mutation:this,type:"updated",action:t})})},b_);function sD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var us,Er,Au,x_,iD=(x_=class extends zu{constructor(t={}){super();Ge(this,us);Ge(this,Er);Ge(this,Au);this.config=t,Ue(this,us,new Set),Ue(this,Er,new Map),Ue(this,Au,0)}build(t,n,r){const s=new rD({client:t,mutationCache:this,mutationId:++Ec(this,Au)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){X(this,us).add(t);const n=qc(t);if(typeof n=="string"){const r=X(this,Er).get(n);r?r.push(t):X(this,Er).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(X(this,us).delete(t)){const n=qc(t);if(typeof n=="string"){const r=X(this,Er).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&X(this,Er).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=qc(t);if(typeof n=="string"){const r=X(this,Er).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=qc(t);if(typeof n=="string"){const s=(r=X(this,Er).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sn.batch(()=>{X(this,us).forEach(t=>{this.notify({type:"removed",mutation:t})}),X(this,us).clear(),X(this,Er).clear()})}getAll(){return Array.from(X(this,us))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>sb(n,r))}findAll(t={}){return this.getAll().filter(n=>sb(t,n))}notify(t){sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return sn.batch(()=>Promise.all(t.map(n=>n.continue().catch(In))))}},us=new WeakMap,Er=new WeakMap,Au=new WeakMap,x_);function qc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Kr,__,oD=(__=class extends zu{constructor(t={}){super();Ge(this,Kr);this.config=t,Ue(this,Kr,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??qy(s,n);let o=this.get(i);return o||(o=new ZI({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){X(this,Kr).has(t.queryHash)||(X(this,Kr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=X(this,Kr).get(t.queryHash);n&&(t.destroy(),n===t&&X(this,Kr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return X(this,Kr).get(t)}getAll(){return[...X(this,Kr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>rb(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>rb(t,r)):n}notify(t){sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Kr=new WeakMap,__),At,Zs,Xs,xa,_a,ei,ka,Sa,k_,aD=(k_=class{constructor(e={}){Ge(this,At);Ge(this,Zs);Ge(this,Xs);Ge(this,xa);Ge(this,_a);Ge(this,ei);Ge(this,ka);Ge(this,Sa);Ue(this,At,e.queryCache||new oD),Ue(this,Zs,e.mutationCache||new iD),Ue(this,Xs,e.defaultOptions||{}),Ue(this,xa,new Map),Ue(this,_a,new Map),Ue(this,ei,0)}mount(){Ec(this,ei)._++,X(this,ei)===1&&(Ue(this,ka,Qy.subscribe(async e=>{e&&(await this.resumePausedMutations(),X(this,At).onFocus())})),Ue(this,Sa,eh.subscribe(async e=>{e&&(await this.resumePausedMutations(),X(this,At).onOnline())})))}unmount(){var e,t;Ec(this,ei)._--,X(this,ei)===0&&((e=X(this,ka))==null||e.call(this),Ue(this,ka,void 0),(t=X(this,Sa))==null||t.call(this),Ue(this,Sa,void 0))}isFetching(e){return X(this,At).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return X(this,Zs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=X(this,At).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=X(this,At).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(fi(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return X(this,At).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=X(this,At).get(r.queryHash),i=s==null?void 0:s.state.data,o=UI(t,i);if(o!==void 0)return X(this,At).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return sn.batch(()=>X(this,At).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=X(this,At).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=X(this,At);sn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=X(this,At);return sn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=sn.batch(()=>X(this,At).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(In).catch(In)}invalidateQueries(e,t={}){return sn.batch(()=>(X(this,At).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=sn.batch(()=>X(this,At).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(In)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(In)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=X(this,At).build(this,t);return n.isStaleByTime(fi(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(In).catch(In)}fetchInfiniteQuery(e){return e.behavior=cb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(In).catch(In)}ensureInfiniteQueryData(e){return e.behavior=cb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return eh.isOnline()?X(this,Zs).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,At)}getMutationCache(){return X(this,Zs)}getDefaultOptions(){return X(this,Xs)}setDefaultOptions(e){Ue(this,Xs,e)}setQueryDefaults(e,t){X(this,xa).set(wu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...X(this,xa).values()],n={};return t.forEach(r=>{bu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){X(this,_a).set(wu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...X(this,_a).values()],n={};return t.forEach(r=>{bu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...X(this,Xs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=qy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Gy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...X(this,Xs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){X(this,At).clear(),X(this,Zs).clear()}},At=new WeakMap,Zs=new WeakMap,Xs=new WeakMap,xa=new WeakMap,_a=new WeakMap,ei=new WeakMap,ka=new WeakMap,Sa=new WeakMap,k_),A1=S.createContext(void 0),Nh=e=>{const t=S.useContext(A1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},lD=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),b.jsx(A1.Provider,{value:e,children:t})),O1=S.createContext(!1),uD=()=>S.useContext(O1);O1.Provider;function cD(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var dD=S.createContext(cD()),hD=()=>S.useContext(dD),fD=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},pD=e=>{S.useEffect(()=>{e.clearReset()},[e])},mD=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||HI(n,[e.error,r])),gD=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},yD=(e,t)=>e.isLoading&&e.isFetching&&!t,vD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,hb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function wD(e,t,n){var h,f,p,w,g;const r=uD(),s=hD(),i=Nh(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",gD(o),fD(o,s),pD(s);const a=!i.getQueryCache().get(o.queryHash),[l]=S.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(x=>{const y=c?l.subscribe(sn.batchCalls(x)):In;return l.updateResult(),y},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o)},[o,l]),vD(o,u))throw hb(o,l,s);if(mD({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||w.call(p,o,u),o.experimental_prefetchInRender&&!mo&&yD(u,r)){const x=a?hb(o,l,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;x==null||x.catch(In).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Vu(e,t){return wD(e,XI)}var I1={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(qt,function(){var n=function(d,m){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,E){k.__proto__=E}||function(k,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(k[T]=E[T])})(d,m)},r=function(){return(r=Object.assign||function(d){for(var m,k=1,E=arguments.length;k<E;k++)for(var T in m=arguments[k])Object.prototype.hasOwnProperty.call(m,T)&&(d[T]=m[T]);return d}).apply(this,arguments)};function s(d,m,k){for(var E,T=0,A=m.length;T<A;T++)!E&&T in m||((E=E||Array.prototype.slice.call(m,0,T))[T]=m[T]);return d.concat(E||Array.prototype.slice.call(m))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qt,o=Object.keys,a=Array.isArray;function l(d,m){return typeof m!="object"||o(m).forEach(function(k){d[k]=m[k]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function h(d,m){return c.call(d,m)}function f(d,m){typeof m=="function"&&(m=m(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(m).forEach(function(k){w(d,k,m[k])})}var p=Object.defineProperty;function w(d,m,k,E){p(d,m,l(k&&h(k,"get")&&typeof k.get=="function"?{get:k.get,set:k.set,configurable:!0}:{value:k,configurable:!0,writable:!0},E))}function g(d){return{from:function(m){return d.prototype=Object.create(m.prototype),w(d.prototype,"constructor",d),{extend:f.bind(null,d.prototype)}}}}var x=Object.getOwnPropertyDescriptor,y=[].slice;function v(d,m,k){return y.call(d,m,k)}function _(d,m){return m(d)}function C(d){if(!d)throw new Error("Assertion Failed")}function R(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function O(d,m){if(typeof m=="string"&&h(d,m))return d[m];if(!m)return d;if(typeof m!="string"){for(var k=[],E=0,T=m.length;E<T;++E){var A=O(d,m[E]);k.push(A)}return k}var L=m.indexOf(".");if(L!==-1){var U=d[m.substr(0,L)];return U==null?void 0:O(U,m.substr(L+1))}}function I(d,m,k){if(d&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof m!="string"&&"length"in m){C(typeof k!="string"&&"length"in k);for(var E=0,T=m.length;E<T;++E)I(d,m[E],k[E])}else{var A,L,U=m.indexOf(".");U!==-1?(A=m.substr(0,U),(L=m.substr(U+1))===""?k===void 0?a(d)&&!isNaN(parseInt(A))?d.splice(A,1):delete d[A]:d[A]=k:I(U=!(U=d[A])||!h(d,A)?d[A]={}:U,L,k)):k===void 0?a(d)&&!isNaN(parseInt(m))?d.splice(m,1):delete d[m]:d[m]=k}}function D(d){var m,k={};for(m in d)h(d,m)&&(k[m]=d[m]);return k}var $=[].concat;function F(d){return $.apply([],d)}var Ke="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(F([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(m){return m+d+"Array"})}))).filter(function(d){return i[d]}),he=new Set(Ke.map(function(d){return i[d]})),N=null;function J(d){return N=new WeakMap,d=function m(k){if(!k||typeof k!="object")return k;var E=N.get(k);if(E)return E;if(a(k)){E=[],N.set(k,E);for(var T=0,A=k.length;T<A;++T)E.push(m(k[T]))}else if(he.has(k.constructor))E=k;else{var L,U=u(k);for(L in E=U===Object.prototype?{}:Object.create(U),N.set(k,E),k)h(k,L)&&(E[L]=m(k[L]))}return E}(d),N=null,d}var j={}.toString;function Q(d){return j.call(d).slice(8,-1)}var we=typeof Symbol<"u"?Symbol.iterator:"@@iterator",z=typeof we=="symbol"?function(d){var m;return d!=null&&(m=d[we])&&m.apply(d)}:function(){return null};function W(d,m){return m=d.indexOf(m),0<=m&&d.splice(m,1),0<=m}var K={};function de(d){var m,k,E,T;if(arguments.length===1){if(a(d))return d.slice();if(this===K&&typeof d=="string")return[d];if(T=z(d)){for(k=[];!(E=T.next()).done;)k.push(E.value);return k}if(d==null)return[d];if(typeof(m=d.length)!="number")return[d];for(k=new Array(m);m--;)k[m]=d[m];return k}for(m=arguments.length,k=new Array(m);m--;)k[m]=arguments[m];return k}var H=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Te=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Te),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ve(d,m){this.name=d,this.message=m}function q(d,m){return d+". Errors: "+Object.keys(m).map(function(k){return m[k].toString()}).filter(function(k,E,T){return T.indexOf(k)===E}).join(`
`)}function ue(d,m,k,E){this.failures=m,this.failedKeys=E,this.successCount=k,this.message=q(d,m)}function se(d,m){this.name="BulkError",this.failures=Object.keys(m).map(function(k){return m[k]}),this.failuresByPos=m,this.message=q(d,this.failures)}g(ve).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(ue).from(ve),g(se).from(ve);var ye=nr.reduce(function(d,m){return d[m]=m+"Error",d},{}),Ee=ve,ae=nr.reduce(function(d,m){var k=m+"Error";function E(T,A){this.name=k,T?typeof T=="string"?(this.message="".concat(T).concat(A?`
 `+A:""),this.inner=A||null):typeof T=="object"&&(this.message="".concat(T.name," ").concat(T.message),this.inner=T):(this.message=G[m]||k,this.inner=null)}return g(E).from(Ee),d[m]=E,d},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var Le=Te.reduce(function(d,m){return d[m+"Error"]=ae[m],d},{}),Be=nr.reduce(function(d,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(d[m+"Error"]=ae[m]),d},{});function Me(){}function dt(d){return d}function P(d,m){return d==null||d===dt?m:function(k){return m(d(k))}}function me(d,m){return function(){d.apply(this,arguments),m.apply(this,arguments)}}function ge(d,m){return d===Me?m:function(){var k=d.apply(this,arguments);k!==void 0&&(arguments[0]=k);var E=this.onsuccess,T=this.onerror;this.onsuccess=null,this.onerror=null;var A=m.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?me(E,this.onsuccess):E),T&&(this.onerror=this.onerror?me(T,this.onerror):T),A!==void 0?A:k}}function B(d,m){return d===Me?m:function(){d.apply(this,arguments);var k=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?me(k,this.onsuccess):k),E&&(this.onerror=this.onerror?me(E,this.onerror):E)}}function M(d,m){return d===Me?m:function(k){var E=d.apply(this,arguments);l(k,E);var T=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,k=m.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?me(T,this.onsuccess):T),A&&(this.onerror=this.onerror?me(A,this.onerror):A),E===void 0?k===void 0?void 0:k:l(E,k)}}function re(d,m){return d===Me?m:function(){return m.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function _e(d,m){return d===Me?m:function(){var k=d.apply(this,arguments);if(k&&typeof k.then=="function"){for(var E=this,T=arguments.length,A=new Array(T);T--;)A[T]=arguments[T];return k.then(function(){return m.apply(E,A)})}return m.apply(this,arguments)}}Be.ModifyError=ue,Be.DexieError=ve,Be.BulkError=se;var xe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fe(d){xe=d}var Se={},$e=100,Ke=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,u(m),d]}(),Te=Ke[0],nr=Ke[1],Ke=Ke[2],nr=nr&&nr.then,rt=Te&&Te.constructor,Je=!!Ke,St=function(d,m){un.push([d,m]),Qt&&(queueMicrotask(kT),Qt=!1)},tr=!0,Qt=!0,ln=[],ht=[],Fe=dt,He={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Me,pgp:!1,env:{},finalize:Me},Ae=He,un=[],bn=0,Xr=[];function Ie(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Ae;if(typeof d!="function"){if(d!==Se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&cn(this,this._value))}this._state=null,this._value=null,++m.ref,function k(E,T){try{T(function(A){if(E._state===null){if(A===E)throw new TypeError("A promise cannot be resolved with itself.");var L=E._lib&&So();A&&typeof A.then=="function"?k(E,function(U,Y){A instanceof Ie?A._then(U,Y):A.then(U,Y)}):(E._state=!0,E._value=A,Ga(E)),L&&Eo()}},cn.bind(null,E))}catch(A){cn(E,A)}}(this,d)}var es={get:function(){var d=Ae,m=ic;function k(E,T){var A=this,L=!d.global&&(d!==Ae||m!==ic),U=L&&!Rs(),Y=new Ie(function(Z,ie){Qa(A,new Nr(Wv(E,d,L,U),Wv(T,d,L,U),Z,ie,d))});return this._consoleTask&&(Y._consoleTask=this._consoleTask),Y}return k.prototype=Se,k},set:function(d){w(this,"then",d&&d.prototype===Se?es:{get:function(){return d},set:es.set})}};function Nr(d,m,k,E,T){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof m=="function"?m:null,this.resolve=k,this.reject=E,this.psd=T}function cn(d,m){var k,E;ht.push(m),d._state===null&&(k=d._lib&&So(),m=Fe(m),d._state=!1,d._value=m,E=d,ln.some(function(T){return T._value===E._value})||ln.push(E),Ga(d),k&&Eo())}function Ga(d){var m=d._listeners;d._listeners=[];for(var k=0,E=m.length;k<E;++k)Qa(d,m[k]);var T=d._PSD;--T.ref||T.finalize(),bn===0&&(++bn,St(function(){--bn==0&&nf()},[]))}function Qa(d,m){if(d._state!==null){var k=d._state?m.onFulfilled:m.onRejected;if(k===null)return(d._state?m.resolve:m.reject)(d._value);++m.psd.ref,++bn,St(tc,[k,d,m])}else d._listeners.push(m)}function tc(d,m,k){try{var E,T=m._value;!m._state&&ht.length&&(ht=[]),E=xe&&m._consoleTask?m._consoleTask.run(function(){return d(T)}):d(T),m._state||ht.indexOf(T)!==-1||function(A){for(var L=ln.length;L;)if(ln[--L]._value===A._value)return ln.splice(L,1)}(m),k.resolve(E)}catch(A){k.reject(A)}finally{--bn==0&&nf(),--k.psd.ref||k.psd.finalize()}}function kT(){Ei(He,function(){So()&&Eo()})}function So(){var d=tr;return Qt=tr=!1,d}function Eo(){var d,m,k;do for(;0<un.length;)for(d=un,un=[],k=d.length,m=0;m<k;++m){var E=d[m];E[0].apply(null,E[1])}while(0<un.length);Qt=tr=!0}function nf(){var d=ln;ln=[],d.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var m=Xr.slice(0),k=m.length;k;)m[--k]()}function nc(d){return new Ie(Se,!1,d)}function bt(d,m){var k=Ae;return function(){var E=So(),T=Ae;try{return As(k,!0),d.apply(this,arguments)}catch(A){m&&m(A)}finally{As(T,!1),E&&Eo()}}}f(Ie.prototype,{then:es,_then:function(d,m){Qa(this,new Nr(null,null,d,m,Ae))},catch:function(d){if(arguments.length===1)return this.then(null,d);var m=d,k=arguments[1];return typeof m=="function"?this.then(null,function(E){return(E instanceof m?k:nc)(E)}):this.then(null,function(E){return(E&&E.name===m?k:nc)(E)})},finally:function(d){return this.then(function(m){return Ie.resolve(d()).then(function(){return m})},function(m){return Ie.resolve(d()).then(function(){return nc(m)})})},timeout:function(d,m){var k=this;return d<1/0?new Ie(function(E,T){var A=setTimeout(function(){return T(new ae.Timeout(m))},d);k.then(E,T).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),He.env=Kv(),f(Ie,{all:function(){var d=de.apply(null,arguments).map(oc);return new Ie(function(m,k){d.length===0&&m([]);var E=d.length;d.forEach(function(T,A){return Ie.resolve(T).then(function(L){d[A]=L,--E||m(d)},k)})})},resolve:function(d){return d instanceof Ie?d:d&&typeof d.then=="function"?new Ie(function(m,k){d.then(m,k)}):new Ie(Se,!0,d)},reject:nc,race:function(){var d=de.apply(null,arguments).map(oc);return new Ie(function(m,k){d.map(function(E){return Ie.resolve(E).then(m,k)})})},PSD:{get:function(){return Ae},set:function(d){return Ae=d}},totalEchoes:{get:function(){return ic}},newPSD:js,usePSD:Ei,scheduler:{get:function(){return St},set:function(d){St=d}},rejectionMapper:{get:function(){return Fe},set:function(d){Fe=d}},follow:function(d,m){return new Ie(function(k,E){return js(function(T,A){var L=Ae;L.unhandleds=[],L.onunhandled=A,L.finalize=me(function(){var U,Y=this;U=function(){Y.unhandleds.length===0?T():A(Y.unhandleds[0])},Xr.push(function Z(){U(),Xr.splice(Xr.indexOf(Z),1)}),++bn,St(function(){--bn==0&&nf()},[])},L.finalize),d()},m,k,E)})}}),rt&&(rt.allSettled&&w(Ie,"allSettled",function(){var d=de.apply(null,arguments).map(oc);return new Ie(function(m){d.length===0&&m([]);var k=d.length,E=new Array(k);d.forEach(function(T,A){return Ie.resolve(T).then(function(L){return E[A]={status:"fulfilled",value:L}},function(L){return E[A]={status:"rejected",reason:L}}).then(function(){return--k||m(E)})})})}),rt.any&&typeof AggregateError<"u"&&w(Ie,"any",function(){var d=de.apply(null,arguments).map(oc);return new Ie(function(m,k){d.length===0&&k(new AggregateError([]));var E=d.length,T=new Array(E);d.forEach(function(A,L){return Ie.resolve(A).then(function(U){return m(U)},function(U){T[L]=U,--E||k(new AggregateError(T))})})})}),rt.withResolvers&&(Ie.withResolvers=rt.withResolvers));var Yt={awaits:0,echoes:0,id:0},ST=0,rc=[],sc=0,ic=0,ET=0;function js(d,m,k,E){var T=Ae,A=Object.create(T);return A.parent=T,A.ref=0,A.global=!1,A.id=++ET,He.env,A.env=Je?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},m&&l(A,m),++T.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Ei(A,d,k,E),A.ref===0&&A.finalize(),E}function Co(){return Yt.id||(Yt.id=++ST),++Yt.awaits,Yt.echoes+=$e,Yt.id}function Rs(){return!!Yt.awaits&&(--Yt.awaits==0&&(Yt.id=0),Yt.echoes=Yt.awaits*$e,!0)}function oc(d){return Yt.echoes&&d&&d.constructor===rt?(Co(),d.then(function(m){return Rs(),m},function(m){return Rs(),Dt(m)})):d}function CT(){var d=rc[rc.length-1];rc.pop(),As(d,!1)}function As(d,m){var k,E=Ae;(m?!Yt.echoes||sc++&&d===Ae:!sc||--sc&&d===Ae)||queueMicrotask(m?(function(T){++ic,Yt.echoes&&--Yt.echoes!=0||(Yt.echoes=Yt.awaits=Yt.id=0),rc.push(Ae),As(T,!0)}).bind(null,d):CT),d!==Ae&&(Ae=d,E===He&&(He.env=Kv()),Je&&(k=He.env.Promise,m=d.env,(E.global||d.global)&&(Object.defineProperty(i,"Promise",m.PromiseProp),k.all=m.all,k.race=m.race,k.resolve=m.resolve,k.reject=m.reject,m.allSettled&&(k.allSettled=m.allSettled),m.any&&(k.any=m.any))))}function Kv(){var d=i.Promise;return Je?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Ei(d,m,k,E,T){var A=Ae;try{return As(d,!0),m(k,E,T)}finally{As(A,!1)}}function Wv(d,m,k,E){return typeof d!="function"?d:function(){var T=Ae;k&&Co(),As(m,!0);try{return d.apply(this,arguments)}finally{As(T,!1),E&&queueMicrotask(Rs)}}}function rf(d){Promise===rt&&Yt.echoes===0?sc===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+nr).indexOf("[native code]")===-1&&(Co=Rs=Me);var Dt=Ie.reject,Ci="",ts="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Hv="String expected.",To=[],ac="__dbnames",sf="readonly",of="readwrite";function Ti(d,m){return d?m?function(){return d.apply(this,arguments)&&m.apply(this,arguments)}:d:m}var qv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function lc(d){return typeof d!="string"||/\./.test(d)?function(m){return m}:function(m){return m[d]===void 0&&d in m&&delete(m=J(m))[d],m}}function Gv(){throw ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function st(d,m){try{var k=Qv(d),E=Qv(m);if(k!==E)return k==="Array"?1:E==="Array"?-1:k==="binary"?1:E==="binary"?-1:k==="string"?1:E==="string"?-1:k==="Date"?1:E!=="Date"?NaN:-1;switch(k){case"number":case"Date":case"string":return m<d?1:d<m?-1:0;case"binary":return function(T,A){for(var L=T.length,U=A.length,Y=L<U?L:U,Z=0;Z<Y;++Z)if(T[Z]!==A[Z])return T[Z]<A[Z]?-1:1;return L===U?0:L<U?-1:1}(Yv(d),Yv(m));case"Array":return function(T,A){for(var L=T.length,U=A.length,Y=L<U?L:U,Z=0;Z<Y;++Z){var ie=st(T[Z],A[Z]);if(ie!==0)return ie}return L===U?0:L<U?-1:1}(d,m)}}catch{}return NaN}function Qv(d){var m=typeof d;return m!="object"?m:ArrayBuffer.isView(d)?"binary":(d=Q(d),d==="ArrayBuffer"?"binary":d)}function Yv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function uc(d,m,k){var E=d.schema.yProps;return E?(m&&0<k.numFailures&&(m=m.filter(function(T,A){return!k.failures[A]})),Promise.all(E.map(function(T){return T=T.updatesTable,m?d.db.table(T).where("k").anyOf(m).delete():d.db.table(T).clear()})).then(function(){return k})):k}var Ya=(Jv.prototype.execute=function(d){var m=this["@@propmod"];if(m.add!==void 0){var k=m.add;if(a(k))return s(s([],a(d)?d:[],!0),k).sort();if(typeof k=="number")return(Number(d)||0)+k;if(typeof k=="bigint")try{return BigInt(d)+k}catch{return BigInt(0)+k}throw new TypeError("Invalid term ".concat(k))}if(m.remove!==void 0){var E=m.remove;if(a(E))return a(d)?d.filter(function(T){return!E.includes(T)}).sort():[];if(typeof E=="number")return Number(d)-E;if(typeof E=="bigint")try{return BigInt(d)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return k=(k=m.replacePrefix)===null||k===void 0?void 0:k[0],k&&typeof d=="string"&&d.startsWith(k)?m.replacePrefix[1]+d.substring(k.length):d},Jv);function Jv(d){this["@@propmod"]=d}function Zv(d,m){for(var k=o(m),E=k.length,T=!1,A=0;A<E;++A){var L=k[A],U=m[L],Y=O(d,L);U instanceof Ya?(I(d,L,U.execute(Y)),T=!0):Y!==U&&(I(d,L,U),T=!0)}return T}var Xv=(mt.prototype._trans=function(d,m,k){var E=this._tx||Ae.trans,T=this.name,A=xe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function L(Z,ie,V){if(!V.schema[T])throw new ae.NotFound("Table "+T+" not part of transaction");return m(V.idbtrans,V)}var U=So();try{var Y=E&&E.db._novip===this.db._novip?E===Ae.trans?E._promise(d,L,k):js(function(){return E._promise(d,L,k)},{trans:E,transless:Ae.transless||Ae}):function Z(ie,V,le,ee){if(ie.idbdb&&(ie._state.openComplete||Ae.letThrough||ie._vip)){var te=ie._createTransaction(V,le,ie._dbSchema);try{te.create(),ie._state.PR1398_maxLoop=3}catch(ne){return ne.name===ye.InvalidState&&ie.isOpen()&&0<--ie._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ie.close({disableAutoOpen:!1}),ie.open().then(function(){return Z(ie,V,le,ee)})):Dt(ne)}return te._promise(V,function(ne,oe){return js(function(){return Ae.trans=te,ee(ne,oe,te)})}).then(function(ne){if(V==="readwrite")try{te.idbtrans.commit()}catch{}return V==="readonly"?ne:te._completion.then(function(){return ne})})}if(ie._state.openComplete)return Dt(new ae.DatabaseClosed(ie._state.dbOpenError));if(!ie._state.isBeingOpened){if(!ie._state.autoOpen)return Dt(new ae.DatabaseClosed);ie.open().catch(Me)}return ie._state.dbReadyPromise.then(function(){return Z(ie,V,le,ee)})}(this.db,d,[this.name],L);return A&&(Y._consoleTask=A,Y=Y.catch(function(Z){return console.trace(Z),Dt(Z)})),Y}finally{U&&Eo()}},mt.prototype.get=function(d,m){var k=this;return d&&d.constructor===Object?this.where(d).first(m):d==null?Dt(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return k.core.get({trans:E,key:d}).then(function(T){return k.hook.reading.fire(T)})}).then(m)},mt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var m=o(d);if(m.length===1)return this.where(m[0]).equals(d[m[0]]);var k=this.schema.indexes.concat(this.schema.primKey).filter(function(U){if(U.compound&&m.every(function(Z){return 0<=U.keyPath.indexOf(Z)})){for(var Y=0;Y<m.length;++Y)if(m.indexOf(U.keyPath[Y])===-1)return!1;return!0}return!1}).sort(function(U,Y){return U.keyPath.length-Y.keyPath.length})[0];if(k&&this.db._maxKey!==Ci){var A=k.keyPath.slice(0,m.length);return this.where(A).equals(A.map(function(Y){return d[Y]}))}!k&&xe&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var E=this.schema.idxByName;function T(U,Y){return st(U,Y)===0}var L=m.reduce(function(V,Y){var Z=V[0],ie=V[1],V=E[Y],le=d[Y];return[Z||V,Z||!V?Ti(ie,V&&V.multi?function(ee){return ee=O(ee,Y),a(ee)&&ee.some(function(te){return T(le,te)})}:function(ee){return T(le,O(ee,Y))}):ie]},[null,null]),A=L[0],L=L[1];return A?this.where(A.name).equals(d[A.keyPath]).filter(L):k?this.filter(L):this.where(m).equals("")},mt.prototype.filter=function(d){return this.toCollection().and(d)},mt.prototype.count=function(d){return this.toCollection().count(d)},mt.prototype.offset=function(d){return this.toCollection().offset(d)},mt.prototype.limit=function(d){return this.toCollection().limit(d)},mt.prototype.each=function(d){return this.toCollection().each(d)},mt.prototype.toArray=function(d){return this.toCollection().toArray(d)},mt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},mt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},mt.prototype.reverse=function(){return this.toCollection().reverse()},mt.prototype.mapToClass=function(d){var m,k=this.db,E=this.name;function T(){return m!==null&&m.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Gv&&(function(Y,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function ie(){this.constructor=Y}n(Y,Z),Y.prototype=Z===null?Object.create(Z):(ie.prototype=Z.prototype,new ie)}(T,m=d),Object.defineProperty(T.prototype,"db",{get:function(){return k},enumerable:!1,configurable:!0}),T.prototype.table=function(){return E},d=T);for(var A=new Set,L=d.prototype;L;L=u(L))Object.getOwnPropertyNames(L).forEach(function(Y){return A.add(Y)});function U(Y){if(!Y)return Y;var Z,ie=Object.create(d.prototype);for(Z in Y)if(!A.has(Z))try{ie[Z]=Y[Z]}catch{}return ie}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=U,this.hook("reading",U),d},mt.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},mt.prototype.add=function(d,m){var k=this,E=this.schema.primKey,T=E.auto,A=E.keyPath,L=d;return A&&T&&(L=lc(A)(d)),this._trans("readwrite",function(U){return k.core.mutate({trans:U,type:"add",keys:m!=null?[m]:null,values:[L]})}).then(function(U){return U.numFailures?Ie.reject(U.failures[0]):U.lastResult}).then(function(U){if(A)try{I(d,A,U)}catch{}return U})},mt.prototype.upsert=function(d,m){var k=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(T){return k.core.get({trans:T,key:d}).then(function(A){var L=A??{};return Zv(L,m),E&&I(L,E,d),k.core.mutate({trans:T,type:"put",values:[L],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[m]}}).then(function(U){return U.numFailures?Ie.reject(U.failures[0]):!!A})})})},mt.prototype.update=function(d,m){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(m):(d=O(d,this.schema.primKey.keyPath),d===void 0?Dt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(m))},mt.prototype.put=function(d,m){var k=this,E=this.schema.primKey,T=E.auto,A=E.keyPath,L=d;return A&&T&&(L=lc(A)(d)),this._trans("readwrite",function(U){return k.core.mutate({trans:U,type:"put",values:[L],keys:m!=null?[m]:null})}).then(function(U){return U.numFailures?Ie.reject(U.failures[0]):U.lastResult}).then(function(U){if(A)try{I(d,A,U)}catch{}return U})},mt.prototype.delete=function(d){var m=this;return this._trans("readwrite",function(k){return m.core.mutate({trans:k,type:"delete",keys:[d]}).then(function(E){return uc(m,[d],E)}).then(function(E){return E.numFailures?Ie.reject(E.failures[0]):void 0})})},mt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(m){return d.core.mutate({trans:m,type:"deleteRange",range:qv}).then(function(k){return uc(d,null,k)})}).then(function(m){return m.numFailures?Ie.reject(m.failures[0]):void 0})},mt.prototype.bulkGet=function(d){var m=this;return this._trans("readonly",function(k){return m.core.getMany({keys:d,trans:k}).then(function(E){return E.map(function(T){return m.hook.reading.fire(T)})})})},mt.prototype.bulkAdd=function(d,m,k){var E=this,T=Array.isArray(m)?m:void 0,A=(k=k||(T?void 0:m))?k.allKeys:void 0;return this._trans("readwrite",function(L){var Z=E.schema.primKey,U=Z.auto,Z=Z.keyPath;if(Z&&T)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var Y=d.length,Z=Z&&U?d.map(lc(Z)):d;return E.core.mutate({trans:L,type:"add",keys:T,values:Z,wantResults:A}).then(function(te){var V=te.numFailures,le=te.results,ee=te.lastResult,te=te.failures;if(V===0)return A?le:ee;throw new se("".concat(E.name,".bulkAdd(): ").concat(V," of ").concat(Y," operations failed"),te)})})},mt.prototype.bulkPut=function(d,m,k){var E=this,T=Array.isArray(m)?m:void 0,A=(k=k||(T?void 0:m))?k.allKeys:void 0;return this._trans("readwrite",function(L){var Z=E.schema.primKey,U=Z.auto,Z=Z.keyPath;if(Z&&T)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var Y=d.length,Z=Z&&U?d.map(lc(Z)):d;return E.core.mutate({trans:L,type:"put",keys:T,values:Z,wantResults:A}).then(function(te){var V=te.numFailures,le=te.results,ee=te.lastResult,te=te.failures;if(V===0)return A?le:ee;throw new se("".concat(E.name,".bulkPut(): ").concat(V," of ").concat(Y," operations failed"),te)})})},mt.prototype.bulkUpdate=function(d){var m=this,k=this.core,E=d.map(function(L){return L.key}),T=d.map(function(L){return L.changes}),A=[];return this._trans("readwrite",function(L){return k.getMany({trans:L,keys:E,cache:"clone"}).then(function(U){var Y=[],Z=[];d.forEach(function(V,le){var ee=V.key,te=V.changes,ne=U[le];if(ne){for(var oe=0,ce=Object.keys(te);oe<ce.length;oe++){var pe=ce[oe],be=te[pe];if(pe===m.schema.primKey.keyPath){if(st(be,ee)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else I(ne,pe,be)}A.push(le),Y.push(ee),Z.push(ne)}});var ie=Y.length;return k.mutate({trans:L,type:"put",keys:Y,values:Z,updates:{keys:E,changeSpecs:T}}).then(function(V){var le=V.numFailures,ee=V.failures;if(le===0)return ie;for(var te=0,ne=Object.keys(ee);te<ne.length;te++){var oe,ce=ne[te],pe=A[Number(ce)];pe!=null&&(oe=ee[ce],delete ee[ce],ee[pe]=oe)}throw new se("".concat(m.name,".bulkUpdate(): ").concat(le," of ").concat(ie," operations failed"),ee)})})})},mt.prototype.bulkDelete=function(d){var m=this,k=d.length;return this._trans("readwrite",function(E){return m.core.mutate({trans:E,type:"delete",keys:d}).then(function(T){return uc(m,d,T)})}).then(function(L){var T=L.numFailures,A=L.lastResult,L=L.failures;if(T===0)return A;throw new se("".concat(m.name,".bulkDelete(): ").concat(T," of ").concat(k," operations failed"),L)})},mt);function mt(){}function Ja(d){function m(L,U){if(U){for(var Y=arguments.length,Z=new Array(Y-1);--Y;)Z[Y-1]=arguments[Y];return k[L].subscribe.apply(null,Z),d}if(typeof L=="string")return k[L]}var k={};m.addEventType=A;for(var E=1,T=arguments.length;E<T;++E)A(arguments[E]);return m;function A(L,U,Y){if(typeof L!="object"){var Z;U=U||re;var ie={subscribers:[],fire:Y=Y||Me,subscribe:function(V){ie.subscribers.indexOf(V)===-1&&(ie.subscribers.push(V),ie.fire=U(ie.fire,V))},unsubscribe:function(V){ie.subscribers=ie.subscribers.filter(function(le){return le!==V}),ie.fire=ie.subscribers.reduce(U,Y)}};return k[L]=m[L]=ie}o(Z=L).forEach(function(V){var le=Z[V];if(a(le))A(V,Z[V][0],Z[V][1]);else{if(le!=="asap")throw new ae.InvalidArgument("Invalid event config");var ee=A(V,dt,function(){for(var te=arguments.length,ne=new Array(te);te--;)ne[te]=arguments[te];ee.subscribers.forEach(function(oe){R(function(){oe.apply(null,ne)})})})}})}}function Za(d,m){return g(m).from({prototype:d}),m}function Po(d,m){return!(d.filter||d.algorithm||d.or)&&(m?d.justLimit:!d.replayFilter)}function af(d,m){d.filter=Ti(d.filter,m)}function lf(d,m,k){var E=d.replayFilter;d.replayFilter=E?function(){return Ti(E(),m())}:m,d.justLimit=k&&!E}function cc(d,m){if(d.isPrimKey)return m.primaryKey;var k=m.getIndexByKeyPath(d.index);if(!k)throw new ae.Schema("KeyPath "+d.index+" on object store "+m.name+" is not indexed");return k}function e0(d,m,k){var E=cc(d,m.schema);return m.openCursor({trans:k,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:E,range:d.range}})}function dc(d,m,k,E){var T=d.replayFilter?Ti(d.filter,d.replayFilter()):d.filter;if(d.or){var A={},L=function(U,Y,Z){var ie,V;T&&!T(Y,Z,function(le){return Y.stop(le)},function(le){return Y.fail(le)})||((V=""+(ie=Y.primaryKey))=="[object ArrayBuffer]"&&(V=""+new Uint8Array(ie)),h(A,V)||(A[V]=!0,m(U,Y,Z)))};return Promise.all([d.or._iterate(L,k),t0(e0(d,E,k),d.algorithm,L,!d.keysOnly&&d.valueMapper)])}return t0(e0(d,E,k),Ti(d.algorithm,T),m,!d.keysOnly&&d.valueMapper)}function t0(d,m,k,E){var T=bt(E?function(A,L,U){return k(E(A),L,U)}:k);return d.then(function(A){if(A)return A.start(function(){var L=function(){return A.continue()};m&&!m(A,function(U){return L=U},function(U){A.stop(U),L=Me},function(U){A.fail(U),L=Me})||T(A.value,A,function(U){return L=U}),L()})})}var TT=(lt.prototype._read=function(d,m){var k=this._ctx;return k.error?k.table._trans(null,Dt.bind(null,k.error)):k.table._trans("readonly",d).then(m)},lt.prototype._write=function(d){var m=this._ctx;return m.error?m.table._trans(null,Dt.bind(null,m.error)):m.table._trans("readwrite",d,"locked")},lt.prototype._addAlgorithm=function(d){var m=this._ctx;m.algorithm=Ti(m.algorithm,d)},lt.prototype._iterate=function(d,m){return dc(this._ctx,d,m,this._ctx.table.core)},lt.prototype.clone=function(d){var m=Object.create(this.constructor.prototype),k=Object.create(this._ctx);return d&&l(k,d),m._ctx=k,m},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(d){var m=this._ctx;return this._read(function(k){return dc(m,d,k,m.table.core)})},lt.prototype.count=function(d){var m=this;return this._read(function(k){var E=m._ctx,T=E.table.core;if(Po(E,!0))return T.count({trans:k,query:{index:cc(E,T.schema),range:E.range}}).then(function(L){return Math.min(L,E.limit)});var A=0;return dc(E,function(){return++A,!1},k,T).then(function(){return A})}).then(d)},lt.prototype.sortBy=function(d,m){var k=d.split(".").reverse(),E=k[0],T=k.length-1;function A(Y,Z){return Z?A(Y[k[Z]],Z-1):Y[E]}var L=this._ctx.dir==="next"?1:-1;function U(Y,Z){return st(A(Y,T),A(Z,T))*L}return this.toArray(function(Y){return Y.sort(U)}).then(m)},lt.prototype.toArray=function(d){var m=this;return this._read(function(k){var E=m._ctx;if(E.dir==="next"&&Po(E,!0)&&0<E.limit){var T=E.valueMapper,A=cc(E,E.table.core.schema);return E.table.core.query({trans:k,limit:E.limit,values:!0,query:{index:A,range:E.range}}).then(function(U){return U=U.result,T?U.map(T):U})}var L=[];return dc(E,function(U){return L.push(U)},k,E.table.core).then(function(){return L})},d)},lt.prototype.offset=function(d){var m=this._ctx;return d<=0||(m.offset+=d,Po(m)?lf(m,function(){var k=d;return function(E,T){return k===0||(k===1?--k:T(function(){E.advance(k),k=0}),!1)}}):lf(m,function(){var k=d;return function(){return--k<0}})),this},lt.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),lf(this._ctx,function(){var m=d;return function(k,E,T){return--m<=0&&E(T),0<=m}},!0),this},lt.prototype.until=function(d,m){return af(this._ctx,function(k,E,T){return!d(k.value)||(E(T),m)}),this},lt.prototype.first=function(d){return this.limit(1).toArray(function(m){return m[0]}).then(d)},lt.prototype.last=function(d){return this.reverse().first(d)},lt.prototype.filter=function(d){var m;return af(this._ctx,function(k){return d(k.value)}),(m=this._ctx).isMatch=Ti(m.isMatch,d),this},lt.prototype.and=function(d){return this.filter(d)},lt.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(d){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(k,E){d(E.key,E)})},lt.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},lt.prototype.eachPrimaryKey=function(d){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(k,E){d(E.primaryKey,E)})},lt.prototype.keys=function(d){var m=this._ctx;m.keysOnly=!m.isMatch;var k=[];return this.each(function(E,T){k.push(T.key)}).then(function(){return k}).then(d)},lt.prototype.primaryKeys=function(d){var m=this._ctx;if(m.dir==="next"&&Po(m,!0)&&0<m.limit)return this._read(function(E){var T=cc(m,m.table.core.schema);return m.table.core.query({trans:E,values:!1,limit:m.limit,query:{index:T,range:m.range}})}).then(function(E){return E.result}).then(d);m.keysOnly=!m.isMatch;var k=[];return this.each(function(E,T){k.push(T.primaryKey)}).then(function(){return k}).then(d)},lt.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},lt.prototype.firstKey=function(d){return this.limit(1).keys(function(m){return m[0]}).then(d)},lt.prototype.lastKey=function(d){return this.reverse().firstKey(d)},lt.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var m={};return af(this._ctx,function(T){var E=T.primaryKey.toString(),T=h(m,E);return m[E]=!0,!T}),this},lt.prototype.modify=function(d){var m=this,k=this._ctx;return this._write(function(E){var T=typeof d=="function"?d:function(ne){return Zv(ne,d)},A=k.table.core,Z=A.schema.primaryKey,L=Z.outbound,U=Z.extractKey,Y=200,Z=m.db._options.modifyChunkSize;Z&&(Y=typeof Z=="object"?Z[A.name]||Z["*"]||200:Z);function ie(ne,pe){var ce=pe.failures,pe=pe.numFailures;le+=ne-pe;for(var be=0,ke=o(ce);be<ke.length;be++){var je=ke[be];V.push(ce[je])}}var V=[],le=0,ee=[],te=d===n0;return m.clone().primaryKeys().then(function(ne){function oe(pe){var be=Math.min(Y,ne.length-pe),ke=ne.slice(pe,pe+be);return(te?Promise.resolve([]):A.getMany({trans:E,keys:ke,cache:"immutable"})).then(function(je){var De=[],Pe=[],Re=L?[]:null,Ne=te?ke:[];if(!te)for(var Oe=0;Oe<be;++Oe){var ze=je[Oe],Xe={value:J(ze),primKey:ne[pe+Oe]};T.call(Xe,Xe.value,Xe)!==!1&&(Xe.value==null?Ne.push(ne[pe+Oe]):L||st(U(ze),U(Xe.value))===0?(Pe.push(Xe.value),L&&Re.push(ne[pe+Oe])):(Ne.push(ne[pe+Oe]),De.push(Xe.value)))}return Promise.resolve(0<De.length&&A.mutate({trans:E,type:"add",values:De}).then(function(et){for(var tt in et.failures)Ne.splice(parseInt(tt),1);ie(De.length,et)})).then(function(){return(0<Pe.length||ce&&typeof d=="object")&&A.mutate({trans:E,type:"put",keys:Re,values:Pe,criteria:ce,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<pe}).then(function(et){return ie(Pe.length,et)})}).then(function(){return(0<Ne.length||ce&&te)&&A.mutate({trans:E,type:"delete",keys:Ne,criteria:ce,isAdditionalChunk:0<pe}).then(function(et){return uc(k.table,Ne,et)}).then(function(et){return ie(Ne.length,et)})}).then(function(){return ne.length>pe+be&&oe(pe+Y)})})}var ce=Po(k)&&k.limit===1/0&&(typeof d!="function"||te)&&{index:k.index,range:k.range};return oe(0).then(function(){if(0<V.length)throw new ue("Error modifying one or more objects",V,le,ee);return ne.length})})})},lt.prototype.delete=function(){var d=this._ctx,m=d.range;return!Po(d)||d.table.schema.yProps||!d.isPrimKey&&m.type!==3?this.modify(n0):this._write(function(k){var E=d.table.core.schema.primaryKey,T=m;return d.table.core.count({trans:k,query:{index:E,range:T}}).then(function(A){return d.table.core.mutate({trans:k,type:"deleteRange",range:T}).then(function(Y){var U=Y.failures,Y=Y.numFailures;if(Y)throw new ue("Could not delete some values",Object.keys(U).map(function(Z){return U[Z]}),A-Y);return A-Y})})})},lt);function lt(){}var n0=function(d,m){return m.value=null};function PT(d,m){return d<m?-1:d===m?0:1}function jT(d,m){return m<d?-1:d===m?0:1}function Wn(d,m,k){return d=d instanceof s0?new d.Collection(d):d,d._ctx.error=new(k||TypeError)(m),d}function jo(d){return new d.Collection(d,function(){return r0("")}).limit(0)}function hc(d,m,k,E){var T,A,L,U,Y,Z,ie,V=k.length;if(!k.every(function(te){return typeof te=="string"}))return Wn(d,Hv);function le(te){T=te==="next"?function(oe){return oe.toUpperCase()}:function(oe){return oe.toLowerCase()},A=te==="next"?function(oe){return oe.toLowerCase()}:function(oe){return oe.toUpperCase()},L=te==="next"?PT:jT;var ne=k.map(function(oe){return{lower:A(oe),upper:T(oe)}}).sort(function(oe,ce){return L(oe.lower,ce.lower)});U=ne.map(function(oe){return oe.upper}),Y=ne.map(function(oe){return oe.lower}),ie=(Z=te)==="next"?"":E}le("next"),d=new d.Collection(d,function(){return Os(U[0],Y[V-1]+E)}),d._ondirectionchange=function(te){le(te)};var ee=0;return d._addAlgorithm(function(te,ne,oe){var ce=te.key;if(typeof ce!="string")return!1;var pe=A(ce);if(m(pe,Y,ee))return!0;for(var be=null,ke=ee;ke<V;++ke){var je=function(De,Pe,Re,Ne,Oe,ze){for(var Xe=Math.min(De.length,Ne.length),et=-1,tt=0;tt<Xe;++tt){var Hn=Pe[tt];if(Hn!==Ne[tt])return Oe(De[tt],Re[tt])<0?De.substr(0,tt)+Re[tt]+Re.substr(tt+1):Oe(De[tt],Ne[tt])<0?De.substr(0,tt)+Ne[tt]+Re.substr(tt+1):0<=et?De.substr(0,et)+Pe[et]+Re.substr(et+1):null;Oe(De[tt],Hn)<0&&(et=tt)}return Xe<Ne.length&&ze==="next"?De+Re.substr(De.length):Xe<De.length&&ze==="prev"?De.substr(0,Re.length):et<0?null:De.substr(0,et)+Ne[et]+Re.substr(et+1)}(ce,pe,U[ke],Y[ke],L,Z);je===null&&be===null?ee=ke+1:(be===null||0<L(be,je))&&(be=je)}return ne(be!==null?function(){te.continue(be+ie)}:oe),!1}),d}function Os(d,m,k,E){return{type:2,lower:d,upper:m,lowerOpen:k,upperOpen:E}}function r0(d){return{type:1,lower:d,upper:d}}var s0=(Object.defineProperty(Jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Jt.prototype.between=function(d,m,k,E){k=k!==!1,E=E===!0;try{return 0<this._cmp(d,m)||this._cmp(d,m)===0&&(k||E)&&(!k||!E)?jo(this):new this.Collection(this,function(){return Os(d,m,!k,!E)})}catch{return Wn(this,ts)}},Jt.prototype.equals=function(d){return d==null?Wn(this,ts):new this.Collection(this,function(){return r0(d)})},Jt.prototype.above=function(d){return d==null?Wn(this,ts):new this.Collection(this,function(){return Os(d,void 0,!0)})},Jt.prototype.aboveOrEqual=function(d){return d==null?Wn(this,ts):new this.Collection(this,function(){return Os(d,void 0,!1)})},Jt.prototype.below=function(d){return d==null?Wn(this,ts):new this.Collection(this,function(){return Os(void 0,d,!1,!0)})},Jt.prototype.belowOrEqual=function(d){return d==null?Wn(this,ts):new this.Collection(this,function(){return Os(void 0,d)})},Jt.prototype.startsWith=function(d){return typeof d!="string"?Wn(this,Hv):this.between(d,d+Ci,!0,!0)},Jt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):hc(this,function(m,k){return m.indexOf(k[0])===0},[d],Ci)},Jt.prototype.equalsIgnoreCase=function(d){return hc(this,function(m,k){return m===k[0]},[d],"")},Jt.prototype.anyOfIgnoreCase=function(){var d=de.apply(K,arguments);return d.length===0?jo(this):hc(this,function(m,k){return k.indexOf(m)!==-1},d,"")},Jt.prototype.startsWithAnyOfIgnoreCase=function(){var d=de.apply(K,arguments);return d.length===0?jo(this):hc(this,function(m,k){return k.some(function(E){return m.indexOf(E)===0})},d,Ci)},Jt.prototype.anyOf=function(){var d=this,m=de.apply(K,arguments),k=this._cmp;try{m.sort(k)}catch{return Wn(this,ts)}if(m.length===0)return jo(this);var E=new this.Collection(this,function(){return Os(m[0],m[m.length-1])});E._ondirectionchange=function(A){k=A==="next"?d._ascending:d._descending,m.sort(k)};var T=0;return E._addAlgorithm(function(A,L,U){for(var Y=A.key;0<k(Y,m[T]);)if(++T===m.length)return L(U),!1;return k(Y,m[T])===0||(L(function(){A.continue(m[T])}),!1)}),E},Jt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Jt.prototype.noneOf=function(){var d=de.apply(K,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Wn(this,ts)}var m=d.reduce(function(k,E){return k?k.concat([[k[k.length-1][1],E]]):[[-1/0,E]]},null);return m.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},Jt.prototype.inAnyRange=function(ce,m){var k=this,E=this._cmp,T=this._ascending,A=this._descending,L=this._min,U=this._max;if(ce.length===0)return jo(this);if(!ce.every(function(pe){return pe[0]!==void 0&&pe[1]!==void 0&&T(pe[0],pe[1])<=0}))return Wn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var Y=!m||m.includeLowers!==!1,Z=m&&m.includeUppers===!0,ie,V=T;function le(pe,be){return V(pe[0],be[0])}try{(ie=ce.reduce(function(pe,be){for(var ke=0,je=pe.length;ke<je;++ke){var De=pe[ke];if(E(be[0],De[1])<0&&0<E(be[1],De[0])){De[0]=L(De[0],be[0]),De[1]=U(De[1],be[1]);break}}return ke===je&&pe.push(be),pe},[])).sort(le)}catch{return Wn(this,ts)}var ee=0,te=Z?function(pe){return 0<T(pe,ie[ee][1])}:function(pe){return 0<=T(pe,ie[ee][1])},ne=Y?function(pe){return 0<A(pe,ie[ee][0])}:function(pe){return 0<=A(pe,ie[ee][0])},oe=te,ce=new this.Collection(this,function(){return Os(ie[0][0],ie[ie.length-1][1],!Y,!Z)});return ce._ondirectionchange=function(pe){V=pe==="next"?(oe=te,T):(oe=ne,A),ie.sort(le)},ce._addAlgorithm(function(pe,be,ke){for(var je,De=pe.key;oe(De);)if(++ee===ie.length)return be(ke),!1;return!te(je=De)&&!ne(je)||(k._cmp(De,ie[ee][1])===0||k._cmp(De,ie[ee][0])===0||be(function(){V===T?pe.continue(ie[ee][0]):pe.continue(ie[ee][1])}),!1)}),ce},Jt.prototype.startsWithAnyOf=function(){var d=de.apply(K,arguments);return d.every(function(m){return typeof m=="string"})?d.length===0?jo(this):this.inAnyRange(d.map(function(m){return[m,m+Ci]})):Wn(this,"startsWithAnyOf() only works with strings")},Jt);function Jt(){}function Lr(d){return bt(function(m){return Xa(m),d(m.target.error),!1})}function Xa(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var el="storagemutated",uf="x-storagemutated-1",Is=Ja(null,el),RT=($r.prototype._lock=function(){return C(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},$r.prototype._unlock=function(){if(C(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Ei(d[1],d[0])}catch{}}return this},$r.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},$r.prototype.create=function(d){var m=this;if(!this.mode)return this;var k=this.db.idbdb,E=this.db._state.dbOpenError;if(C(!this.idbtrans),!d&&!k)switch(E&&E.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(E);case"MissingAPIError":throw new ae.MissingAPI(E.message,E);default:throw new ae.OpenFailed(E)}if(!this.active)throw new ae.TransactionInactive;return C(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||k).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=bt(function(T){Xa(T),m._reject(d.error)}),d.onabort=bt(function(T){Xa(T),m.active&&m._reject(new ae.Abort(d.error)),m.active=!1,m.on("abort").fire(T)}),d.oncomplete=bt(function(){m.active=!1,m._resolve(),"mutatedParts"in d&&Is.storagemutated.fire(d.mutatedParts)}),this},$r.prototype._promise=function(d,m,k){var E=this;if(d==="readwrite"&&this.mode!=="readwrite")return Dt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return Dt(new ae.TransactionInactive);if(this._locked())return new Ie(function(A,L){E._blockedFuncs.push([function(){E._promise(d,m,k).then(A,L)},Ae])});if(k)return js(function(){var A=new Ie(function(L,U){E._lock();var Y=m(L,U,E);Y&&Y.then&&Y.then(L,U)});return A.finally(function(){return E._unlock()}),A._lib=!0,A});var T=new Ie(function(A,L){var U=m(A,L,E);U&&U.then&&U.then(A,L)});return T._lib=!0,T},$r.prototype._root=function(){return this.parent?this.parent._root():this},$r.prototype.waitFor=function(d){var m,k=this._root(),E=Ie.resolve(d);k._waitingFor?k._waitingFor=k._waitingFor.then(function(){return E}):(k._waitingFor=E,k._waitingQueue=[],m=k.idbtrans.objectStore(k.storeNames[0]),function A(){for(++k._spinCount;k._waitingQueue.length;)k._waitingQueue.shift()();k._waitingFor&&(m.get(-1/0).onsuccess=A)}());var T=k._waitingFor;return new Ie(function(A,L){E.then(function(U){return k._waitingQueue.push(bt(A.bind(null,U)))},function(U){return k._waitingQueue.push(bt(L.bind(null,U)))}).finally(function(){k._waitingFor===T&&(k._waitingFor=null)})})},$r.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},$r.prototype.table=function(d){var m=this._memoizedTables||(this._memoizedTables={});if(h(m,d))return m[d];var k=this.schema[d];if(!k)throw new ae.NotFound("Table "+d+" not part of transaction");return k=new this.db.Table(d,k,this),k.core=this.db.core.table(d),m[d]=k},$r);function $r(){}function cf(d,m,k,E,T,A,L,U){return{name:d,keyPath:m,unique:k,multi:E,auto:T,compound:A,src:(k&&!L?"&":"")+(E?"*":"")+(T?"++":"")+i0(m),type:U}}function i0(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function df(d,m,k){return{name:d,primKey:m,indexes:k,mappedClass:null,idxByName:(E=function(T){return[T.name,T]},k.reduce(function(T,A,L){return L=E(A,L),L&&(T[L[0]]=L[1]),T},{}))};var E}var tl=function(d){try{return d.only([[]]),tl=function(){return[[]]},[[]]}catch{return tl=function(){return Ci},Ci}};function hf(d){return d==null?function(){}:typeof d=="string"?(m=d).split(".").length===1?function(k){return k[m]}:function(k){return O(k,m)}:function(k){return O(k,d)};var m}function o0(d){return[].slice.call(d)}var AT=0;function nl(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function OT(d,m,Y){function E(oe){if(oe.type===3)return null;if(oe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ee=oe.lower,te=oe.upper,ne=oe.lowerOpen,oe=oe.upperOpen;return ee===void 0?te===void 0?null:m.upperBound(te,!!oe):te===void 0?m.lowerBound(ee,!!ne):m.bound(ee,te,!!ne,!!oe)}function T(le){var ee,te=le.name;return{name:te,schema:le,mutate:function(ne){var oe=ne.trans,ce=ne.type,pe=ne.keys,be=ne.values,ke=ne.range;return new Promise(function(je,De){je=bt(je);var Pe=oe.objectStore(te),Re=Pe.keyPath==null,Ne=ce==="put"||ce==="add";if(!Ne&&ce!=="delete"&&ce!=="deleteRange")throw new Error("Invalid operation type: "+ce);var Oe,ze=(pe||be||{length:1}).length;if(pe&&be&&pe.length!==be.length)throw new Error("Given keys array must have same length as given values array.");if(ze===0)return je({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(xn){++Hn,Xa(xn)}var et=[],tt=[],Hn=0;if(ce==="deleteRange"){if(ke.type===4)return je({numFailures:Hn,failures:tt,results:[],lastResult:void 0});ke.type===3?et.push(Oe=Pe.clear()):et.push(Oe=Pe.delete(E(ke)))}else{var Re=Ne?Re?[be,pe]:[be,null]:[pe,null],Ze=Re[0],hn=Re[1];if(Ne)for(var fn=0;fn<ze;++fn)et.push(Oe=hn&&hn[fn]!==void 0?Pe[ce](Ze[fn],hn[fn]):Pe[ce](Ze[fn])),Oe.onerror=Xe;else for(fn=0;fn<ze;++fn)et.push(Oe=Pe[ce](Ze[fn])),Oe.onerror=Xe}function Sc(xn){xn=xn.target.result,et.forEach(function(Ri,Rf){return Ri.error!=null&&(tt[Rf]=Ri.error)}),je({numFailures:Hn,failures:tt,results:ce==="delete"?pe:et.map(function(Ri){return Ri.result}),lastResult:xn})}Oe.onerror=function(xn){Xe(xn),Sc(xn)},Oe.onsuccess=Sc})},getMany:function(ne){var oe=ne.trans,ce=ne.keys;return new Promise(function(pe,be){pe=bt(pe);for(var ke,je=oe.objectStore(te),De=ce.length,Pe=new Array(De),Re=0,Ne=0,Oe=function(et){et=et.target,Pe[et._pos]=et.result,++Ne===Re&&pe(Pe)},ze=Lr(be),Xe=0;Xe<De;++Xe)ce[Xe]!=null&&((ke=je.get(ce[Xe]))._pos=Xe,ke.onsuccess=Oe,ke.onerror=ze,++Re);Re===0&&pe(Pe)})},get:function(ne){var oe=ne.trans,ce=ne.key;return new Promise(function(pe,be){pe=bt(pe);var ke=oe.objectStore(te).get(ce);ke.onsuccess=function(je){return pe(je.target.result)},ke.onerror=Lr(be)})},query:(ee=Z,function(ne){return new Promise(function(oe,ce){oe=bt(oe);var pe,be,ke,Re=ne.trans,je=ne.values,De=ne.limit,Oe=ne.query,Pe=De===1/0?void 0:De,Ne=Oe.index,Oe=Oe.range,Re=Re.objectStore(te),Ne=Ne.isPrimaryKey?Re:Re.index(Ne.name),Oe=E(Oe);if(De===0)return oe({result:[]});ee?((Pe=je?Ne.getAll(Oe,Pe):Ne.getAllKeys(Oe,Pe)).onsuccess=function(ze){return oe({result:ze.target.result})},Pe.onerror=Lr(ce)):(pe=0,be=!je&&"openKeyCursor"in Ne?Ne.openKeyCursor(Oe):Ne.openCursor(Oe),ke=[],be.onsuccess=function(ze){var Xe=be.result;return Xe?(ke.push(je?Xe.value:Xe.primaryKey),++pe===De?oe({result:ke}):void Xe.continue()):oe({result:ke})},be.onerror=Lr(ce))})}),openCursor:function(ne){var oe=ne.trans,ce=ne.values,pe=ne.query,be=ne.reverse,ke=ne.unique;return new Promise(function(je,De){je=bt(je);var Ne=pe.index,Pe=pe.range,Re=oe.objectStore(te),Re=Ne.isPrimaryKey?Re:Re.index(Ne.name),Ne=be?ke?"prevunique":"prev":ke?"nextunique":"next",Oe=!ce&&"openKeyCursor"in Re?Re.openKeyCursor(E(Pe),Ne):Re.openCursor(E(Pe),Ne);Oe.onerror=Lr(De),Oe.onsuccess=bt(function(ze){var Xe,et,tt,Hn,Ze=Oe.result;Ze?(Ze.___id=++AT,Ze.done=!1,Xe=Ze.continue.bind(Ze),et=(et=Ze.continuePrimaryKey)&&et.bind(Ze),tt=Ze.advance.bind(Ze),Hn=function(){throw new Error("Cursor not stopped")},Ze.trans=oe,Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=function(){throw new Error("Cursor not started")},Ze.fail=bt(De),Ze.next=function(){var hn=this,fn=1;return this.start(function(){return fn--?hn.continue():hn.stop()}).then(function(){return hn})},Ze.start=function(hn){function fn(){if(Oe.result)try{hn()}catch(xn){Ze.fail(xn)}else Ze.done=!0,Ze.start=function(){throw new Error("Cursor behind last entry")},Ze.stop()}var Sc=new Promise(function(xn,Ri){xn=bt(xn),Oe.onerror=Lr(Ri),Ze.fail=Ri,Ze.stop=function(Rf){Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=Hn,xn(Rf)}});return Oe.onsuccess=bt(function(xn){Oe.onsuccess=fn,fn()}),Ze.continue=Xe,Ze.continuePrimaryKey=et,Ze.advance=tt,fn(),Sc},je(Ze)):je(null)},De)})},count:function(ne){var oe=ne.query,ce=ne.trans,pe=oe.index,be=oe.range;return new Promise(function(ke,je){var De=ce.objectStore(te),Pe=pe.isPrimaryKey?De:De.index(pe.name),De=E(be),Pe=De?Pe.count(De):Pe.count();Pe.onsuccess=bt(function(Re){return ke(Re.target.result)}),Pe.onerror=Lr(je)})}}}var A,L,U,ie=(L=Y,U=o0((A=d).objectStoreNames),{schema:{name:A.name,tables:U.map(function(le){return L.objectStore(le)}).map(function(le){var ee=le.keyPath,oe=le.autoIncrement,te=a(ee),ne={},oe={name:le.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ee==null,compound:te,keyPath:ee,autoIncrement:oe,unique:!0,extractKey:hf(ee)},indexes:o0(le.indexNames).map(function(ce){return le.index(ce)}).map(function(ke){var pe=ke.name,be=ke.unique,je=ke.multiEntry,ke=ke.keyPath,je={name:pe,compound:a(ke),keyPath:ke,unique:be,multiEntry:je,extractKey:hf(ke)};return ne[nl(ke)]=je}),getIndexByKeyPath:function(ce){return ne[nl(ce)]}};return ne[":id"]=oe.primaryKey,ee!=null&&(ne[nl(ee)]=oe.primaryKey),oe})},hasGetAll:0<U.length&&"getAll"in L.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Y=ie.schema,Z=ie.hasGetAll,ie=Y.tables.map(T),V={};return ie.forEach(function(le){return V[le.name]=le}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(le){if(!V[le])throw new Error("Table '".concat(le,"' not found"));return V[le]},MIN_KEY:-1/0,MAX_KEY:tl(m),schema:Y}}function IT(d,m,k,E){var T=k.IDBKeyRange;return k.indexedDB,{dbcore:(E=OT(m,T,E),d.dbcore.reduce(function(A,L){return L=L.create,r(r({},A),L(A))},E))}}function fc(d,E){var k=E.db,E=IT(d._middlewares,k,d._deps,E);d.core=E.dbcore,d.tables.forEach(function(T){var A=T.name;d.core.schema.tables.some(function(L){return L.name===A})&&(T.core=d.core.table(A),d[A]instanceof d.Table&&(d[A].core=T.core))})}function pc(d,m,k,E){k.forEach(function(T){var A=E[T];m.forEach(function(L){var U=function Y(Z,ie){return x(Z,ie)||(Z=u(Z))&&Y(Z,ie)}(L,T);(!U||"value"in U&&U.value===void 0)&&(L===d.Transaction.prototype||L instanceof d.Transaction?w(L,T,{get:function(){return this.table(T)},set:function(Y){p(this,T,{value:Y,writable:!0,configurable:!0,enumerable:!0})}}):L[T]=new d.Table(T,A))})})}function ff(d,m){m.forEach(function(k){for(var E in k)k[E]instanceof d.Table&&delete k[E]})}function DT(d,m){return d._cfg.version-m._cfg.version}function NT(d,m,k,E){var T=d._dbSchema;k.objectStoreNames.contains("$meta")&&!T.$meta&&(T.$meta=df("$meta",l0("")[0],[]),d._storeNames.push("$meta"));var A=d._createTransaction("readwrite",d._storeNames,T);A.create(k),A._completion.catch(E);var L=A._reject.bind(A),U=Ae.transless||Ae;js(function(){return Ae.trans=A,Ae.transless=U,m!==0?(fc(d,k),Z=m,((Y=A).storeNames.includes("$meta")?Y.table("$meta").get("version").then(function(ie){return ie??Z}):Ie.resolve(Z)).then(function(ie){return le=ie,ee=A,te=k,ne=[],ie=(V=d)._versions,oe=V._dbSchema=gc(0,V.idbdb,te),(ie=ie.filter(function(ce){return ce._cfg.version>=le})).length!==0?(ie.forEach(function(ce){ne.push(function(){var pe=oe,be=ce._cfg.dbschema;yc(V,pe,te),yc(V,be,te),oe=V._dbSchema=be;var ke=pf(pe,be);ke.add.forEach(function(Ne){mf(te,Ne[0],Ne[1].primKey,Ne[1].indexes)}),ke.change.forEach(function(Ne){if(Ne.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var Oe=te.objectStore(Ne.name);Ne.add.forEach(function(ze){return mc(Oe,ze)}),Ne.change.forEach(function(ze){Oe.deleteIndex(ze.name),mc(Oe,ze)}),Ne.del.forEach(function(ze){return Oe.deleteIndex(ze)})});var je=ce._cfg.contentUpgrade;if(je&&ce._cfg.version>le){fc(V,te),ee._memoizedTables={};var De=D(be);ke.del.forEach(function(Ne){De[Ne]=pe[Ne]}),ff(V,[V.Transaction.prototype]),pc(V,[V.Transaction.prototype],o(De),De),ee.schema=De;var Pe,Re=H(je);return Re&&Co(),ke=Ie.follow(function(){var Ne;(Pe=je(ee))&&Re&&(Ne=Rs.bind(null,null),Pe.then(Ne,Ne))}),Pe&&typeof Pe.then=="function"?Ie.resolve(Pe):ke.then(function(){return Pe})}}),ne.push(function(pe){var be,ke,je=ce._cfg.dbschema;be=je,ke=pe,[].slice.call(ke.db.objectStoreNames).forEach(function(De){return be[De]==null&&ke.db.deleteObjectStore(De)}),ff(V,[V.Transaction.prototype]),pc(V,[V.Transaction.prototype],V._storeNames,V._dbSchema),ee.schema=V._dbSchema}),ne.push(function(pe){V.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(V.idbdb.version/10)===ce._cfg.version?(V.idbdb.deleteObjectStore("$meta"),delete V._dbSchema.$meta,V._storeNames=V._storeNames.filter(function(be){return be!=="$meta"})):pe.objectStore("$meta").put(ce._cfg.version,"version"))})}),function ce(){return ne.length?Ie.resolve(ne.shift()(ee.idbtrans)).then(ce):Ie.resolve()}().then(function(){a0(oe,te)})):Ie.resolve();var V,le,ee,te,ne,oe}).catch(L)):(o(T).forEach(function(ie){mf(k,ie,T[ie].primKey,T[ie].indexes)}),fc(d,k),void Ie.follow(function(){return d.on.populate.fire(A)}).catch(L));var Y,Z})}function LT(d,m){a0(d._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var k=gc(0,d.idbdb,m);yc(d,d._dbSchema,m);for(var E=0,T=pf(k,d._dbSchema).change;E<T.length;E++){var A=function(L){if(L.change.length||L.recreate)return console.warn("Unable to patch indexes of table ".concat(L.name," because it has changes on the type of index or primary key.")),{value:void 0};var U=m.objectStore(L.name);L.add.forEach(function(Y){xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(L.name,".").concat(Y.src)),mc(U,Y)})}(T[E]);if(typeof A=="object")return A.value}}function pf(d,m){var k,E={del:[],add:[],change:[]};for(k in d)m[k]||E.del.push(k);for(k in m){var T=d[k],A=m[k];if(T){var L={name:k,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(T.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||T.primKey.auto!==A.primKey.auto)L.recreate=!0,E.change.push(L);else{var U=T.idxByName,Y=A.idxByName,Z=void 0;for(Z in U)Y[Z]||L.del.push(Z);for(Z in Y){var ie=U[Z],V=Y[Z];ie?ie.src!==V.src&&L.change.push(V):L.add.push(V)}(0<L.del.length||0<L.add.length||0<L.change.length)&&E.change.push(L)}}else E.add.push([k,A])}return E}function mf(d,m,k,E){var T=d.db.createObjectStore(m,k.keyPath?{keyPath:k.keyPath,autoIncrement:k.auto}:{autoIncrement:k.auto});return E.forEach(function(A){return mc(T,A)}),T}function a0(d,m){o(d).forEach(function(k){m.db.objectStoreNames.contains(k)||(xe&&console.debug("Dexie: Creating missing table",k),mf(m,k,d[k].primKey,d[k].indexes))})}function mc(d,m){d.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function gc(d,m,k){var E={};return v(m.objectStoreNames,0).forEach(function(T){for(var A=k.objectStore(T),L=cf(i0(Z=A.keyPath),Z||"",!0,!1,!!A.autoIncrement,Z&&typeof Z!="string",!0),U=[],Y=0;Y<A.indexNames.length;++Y){var ie=A.index(A.indexNames[Y]),Z=ie.keyPath,ie=cf(ie.name,Z,!!ie.unique,!!ie.multiEntry,!1,Z&&typeof Z!="string",!1);U.push(ie)}E[T]=df(T,L,U)}),E}function yc(d,m,k){for(var E=k.db.objectStoreNames,T=0;T<E.length;++T){var A=E[T],L=k.objectStore(A);d._hasGetAll="getAll"in L;for(var U=0;U<L.indexNames.length;++U){var Y=L.indexNames[U],Z=L.index(Y).keyPath,ie=typeof Z=="string"?Z:"["+v(Z).join("+")+"]";!m[A]||(Z=m[A].idxByName[ie])&&(Z.name=Y,delete m[A].idxByName[ie],m[A].idxByName[Y]=Z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function l0(d){return d.split(",").map(function(m,k){var A=m.split(":"),E=(T=A[1])===null||T===void 0?void 0:T.trim(),T=(m=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(T)?T.match(/^\[(.*)\]$/)[1].split("+"):T;return cf(T,A||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),a(A),k===0,E)})}var $T=(Ro.prototype._createTableSchema=df,Ro.prototype._parseIndexSyntax=l0,Ro.prototype._parseStoresSpec=function(d,m){var k=this;o(d).forEach(function(E){if(d[E]!==null){var T=k._parseIndexSyntax(d[E]),A=T.shift();if(!A)throw new ae.Schema("Invalid schema for table "+E+": "+d[E]);if(A.unique=!0,A.multi)throw new ae.Schema("Primary key cannot be multiEntry*");T.forEach(function(L){if(L.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!L.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")}),T=k._createTableSchema(E,A,T),m[E]=T}})},Ro.prototype.stores=function(k){var m=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,k):k;var k=m._versions,E={},T={};return k.forEach(function(A){l(E,A._cfg.storesSource),T=A._cfg.dbschema={},A._parseStoresSpec(E,T)}),m._dbSchema=T,ff(m,[m._allTables,m,m.Transaction.prototype]),pc(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],o(T),T),m._storeNames=o(T),this},Ro.prototype.upgrade=function(d){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||Me,d),this},Ro);function Ro(){}function gf(d,m){var k=d._dbNamesDB;return k||(k=d._dbNamesDB=new ns(ac,{addons:[],indexedDB:d,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),k.table("dbnames")}function yf(d){return d&&typeof d.databases=="function"}function vf(d){return js(function(){return Ae.letThrough=!0,d()})}function wf(d){return!("from"in d)}var dn=function(d,m){if(!this){var k=new dn;return d&&"d"in d&&l(k,d),k}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?m:d}:{d:0})};function rl(d,m,k){var E=st(m,k);if(!isNaN(E)){if(0<E)throw RangeError();if(wf(d))return l(d,{from:m,to:k,d:1});var T=d.l,E=d.r;if(st(k,d.from)<0)return T?rl(T,m,k):d.l={from:m,to:k,d:1,l:null,r:null},c0(d);if(0<st(m,d.to))return E?rl(E,m,k):d.r={from:m,to:k,d:1,l:null,r:null},c0(d);st(m,d.from)<0&&(d.from=m,d.l=null,d.d=E?E.d+1:1),0<st(k,d.to)&&(d.to=k,d.r=null,d.d=d.l?d.l.d+1:1),k=!d.r,T&&!d.l&&sl(d,T),E&&k&&sl(d,E)}}function sl(d,m){wf(m)||function k(E,Y){var A=Y.from,L=Y.to,U=Y.l,Y=Y.r;rl(E,A,L),U&&k(E,U),Y&&k(E,Y)}(d,m)}function u0(d,m){var k=vc(m),E=k.next();if(E.done)return!1;for(var T=E.value,A=vc(d),L=A.next(T.from),U=L.value;!E.done&&!L.done;){if(st(U.from,T.to)<=0&&0<=st(U.to,T.from))return!0;st(T.from,U.from)<0?T=(E=k.next(U.from)).value:U=(L=A.next(T.from)).value}return!1}function vc(d){var m=wf(d)?null:{s:0,n:d};return{next:function(k){for(var E=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,E)for(;m.n.l&&st(k,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!E||st(k,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function c0(d){var m,k,E=(((m=d.r)===null||m===void 0?void 0:m.d)||0)-(((k=d.l)===null||k===void 0?void 0:k.d)||0),T=1<E?"r":E<-1?"l":"";T&&(m=T=="r"?"l":"r",k=r({},d),E=d[T],d.from=E.from,d.to=E.to,d[T]=E[T],k[T]=E[m],(d[m]=k).d=d0(k)),d.d=d0(d)}function d0(k){var m=k.r,k=k.l;return(m?k?Math.max(m.d,k.d):m.d:k?k.d:0)+1}function wc(d,m){return o(m).forEach(function(k){d[k]?sl(d[k],m[k]):d[k]=function E(T){var A,L,U={};for(A in T)h(T,A)&&(L=T[A],U[A]=!L||typeof L!="object"||he.has(L.constructor)?L:E(L));return U}(m[k])}),d}function bf(d,m){return d.all||m.all||Object.keys(d).some(function(k){return m[k]&&u0(m[k],d[k])})}f(dn.prototype,((nr={add:function(d){return sl(this,d),this},addKey:function(d){return rl(this,d,d),this},addKeys:function(d){var m=this;return d.forEach(function(k){return rl(m,k,k)}),this},hasKey:function(d){var m=vc(this).next(d).value;return m&&st(m.from,d)<=0&&0<=st(m.to,d)}})[we]=function(){return vc(this)},nr));var Pi={},xf={},_f=!1;function bc(d){wc(xf,d),_f||(_f=!0,setTimeout(function(){_f=!1,kf(xf,!(xf={}))},0))}function kf(d,m){m===void 0&&(m=!1);var k=new Set;if(d.all)for(var E=0,T=Object.values(Pi);E<T.length;E++)h0(L=T[E],d,k,m);else for(var A in d){var L,U=/^idb\:\/\/(.*)\/(.*)\//.exec(A);U&&(A=U[1],U=U[2],(L=Pi["idb://".concat(A,"/").concat(U)])&&h0(L,d,k,m))}k.forEach(function(Y){return Y()})}function h0(d,m,k,E){for(var T=[],A=0,L=Object.entries(d.queries.query);A<L.length;A++){for(var U=L[A],Y=U[0],Z=[],ie=0,V=U[1];ie<V.length;ie++){var le=V[ie];bf(m,le.obsSet)?le.subscribers.forEach(function(oe){return k.add(oe)}):E&&Z.push(le)}E&&T.push([Y,Z])}if(E)for(var ee=0,te=T;ee<te.length;ee++){var ne=te[ee],Y=ne[0],Z=ne[1];d.queries.query[Y]=Z}}function MT(d){var m=d._state,k=d._deps.indexedDB;if(m.isBeingOpened||d.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?Dt(m.dbOpenError):d});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var E=m.openCanceller,T=Math.round(10*d.verno),A=!1;function L(){if(m.openCanceller!==E)throw new ae.DatabaseClosed("db.open() was cancelled")}function U(){return new Ie(function(le,ee){if(L(),!k)throw new ae.MissingAPI;var te=d.name,ne=m.autoSchema||!T?k.open(te):k.open(te,T);if(!ne)throw new ae.MissingAPI;ne.onerror=Lr(ee),ne.onblocked=bt(d._fireOnBlocked),ne.onupgradeneeded=bt(function(oe){var ce;ie=ne.transaction,m.autoSchema&&!d._options.allowEmptyDB?(ne.onerror=Xa,ie.abort(),ne.result.close(),(ce=k.deleteDatabase(te)).onsuccess=ce.onerror=bt(function(){ee(new ae.NoSuchDatabase("Database ".concat(te," doesnt exist")))})):(ie.onerror=Lr(ee),oe=oe.oldVersion>Math.pow(2,62)?0:oe.oldVersion,V=oe<1,d.idbdb=ne.result,A&&LT(d,ie),NT(d,oe/10,ie,ee))},ee),ne.onsuccess=bt(function(){ie=null;var oe,ce,pe,be,ke,je=d.idbdb=ne.result,De=v(je.objectStoreNames);if(0<De.length)try{var Pe=je.transaction((be=De).length===1?be[0]:be,"readonly");if(m.autoSchema)ce=je,pe=Pe,(oe=d).verno=ce.version/10,pe=oe._dbSchema=gc(0,ce,pe),oe._storeNames=v(ce.objectStoreNames,0),pc(oe,[oe._allTables],o(pe),pe);else if(yc(d,d._dbSchema,Pe),((ke=pf(gc(0,(ke=d).idbdb,Pe),ke._dbSchema)).add.length||ke.change.some(function(Re){return Re.add.length||Re.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),je.close(),T=je.version+1,A=!0,le(U());fc(d,Pe)}catch{}To.push(d),je.onversionchange=bt(function(Re){m.vcFired=!0,d.on("versionchange").fire(Re)}),je.onclose=bt(function(){d.close({disableAutoOpen:!1})}),V&&(ke=d._deps,Pe=te,je=ke.indexedDB,ke=ke.IDBKeyRange,yf(je)||Pe===ac||gf(je,ke).put({name:Pe}).catch(Me)),le()},ee)}).catch(function(le){switch(le==null?void 0:le.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),U();break;case"VersionError":if(0<T)return T=0,U()}return Ie.reject(le)})}var Y,Z=m.dbReadyResolve,ie=null,V=!1;return Ie.race([E,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(le){function ee(){return indexedDB.databases().finally(le)}Y=setInterval(ee,100),ee()}).finally(function(){return clearInterval(Y)}):Promise.resolve()).then(U)]).then(function(){return L(),m.onReadyBeingFired=[],Ie.resolve(vf(function(){return d.on.ready.fire(d.vip)})).then(function le(){if(0<m.onReadyBeingFired.length){var ee=m.onReadyBeingFired.reduce(_e,Me);return m.onReadyBeingFired=[],Ie.resolve(vf(function(){return ee(d.vip)})).then(le)}})}).finally(function(){m.openCanceller===E&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(le){m.dbOpenError=le;try{ie&&ie.abort()}catch{}return E===m.openCanceller&&d._close(),Dt(le)}).finally(function(){m.openComplete=!0,Z()}).then(function(){var le;return V&&(le={},d.tables.forEach(function(ee){ee.schema.indexes.forEach(function(te){te.name&&(le["idb://".concat(d.name,"/").concat(ee.name,"/").concat(te.name)]=new dn(-1/0,[[[]]]))}),le["idb://".concat(d.name,"/").concat(ee.name,"/")]=le["idb://".concat(d.name,"/").concat(ee.name,"/:dels")]=new dn(-1/0,[[[]]])}),Is(el).fire(le),kf(le,!0)),d})}function Sf(d){function m(A){return d.next(A)}var k=T(m),E=T(function(A){return d.throw(A)});function T(A){return function(Y){var U=A(Y),Y=U.value;return U.done?Y:Y&&typeof Y.then=="function"?Y.then(k,E):a(Y)?Promise.all(Y).then(k,E):k(Y)}}return T(m)()}function xc(d,m,k){for(var E=a(d)?d.slice():[d],T=0;T<k;++T)E.push(m);return E}var FT={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(m){var k=d.table(m),E=k.schema,T={},A=[];function L(V,le,ee){var te=nl(V),ne=T[te]=T[te]||[],oe=V==null?0:typeof V=="string"?1:V.length,ce=0<le,ce=r(r({},ee),{name:ce?"".concat(te,"(virtual-from:").concat(ee.name,")"):ee.name,lowLevelIndex:ee,isVirtual:ce,keyTail:le,keyLength:oe,extractKey:hf(V),unique:!ce&&ee.unique});return ne.push(ce),ce.isPrimaryKey||A.push(ce),1<oe&&L(oe===2?V[0]:V.slice(0,oe-1),le+1,ee),ne.sort(function(pe,be){return pe.keyTail-be.keyTail}),ce}m=L(E.primaryKey.keyPath,0,E.primaryKey),T[":id"]=[m];for(var U=0,Y=E.indexes;U<Y.length;U++){var Z=Y[U];L(Z.keyPath,0,Z)}function ie(V){var le,ee=V.query.index;return ee.isVirtual?r(r({},V),{query:{index:ee.lowLevelIndex,range:(le=V.query.range,ee=ee.keyTail,{type:le.type===1?2:le.type,lower:xc(le.lower,le.lowerOpen?d.MAX_KEY:d.MIN_KEY,ee),lowerOpen:!0,upper:xc(le.upper,le.upperOpen?d.MIN_KEY:d.MAX_KEY,ee),upperOpen:!0})}}):V}return r(r({},k),{schema:r(r({},E),{primaryKey:m,indexes:A,getIndexByKeyPath:function(V){return(V=T[nl(V)])&&V[0]}}),count:function(V){return k.count(ie(V))},query:function(V){return k.query(ie(V))},openCursor:function(V){var le=V.query.index,ee=le.keyTail,te=le.isVirtual,ne=le.keyLength;return te?k.openCursor(ie(V)).then(function(ce){return ce&&oe(ce)}):k.openCursor(V);function oe(ce){return Object.create(ce,{continue:{value:function(pe){pe!=null?ce.continue(xc(pe,V.reverse?d.MAX_KEY:d.MIN_KEY,ee)):V.unique?ce.continue(ce.key.slice(0,ne).concat(V.reverse?d.MIN_KEY:d.MAX_KEY,ee)):ce.continue()}},continuePrimaryKey:{value:function(pe,be){ce.continuePrimaryKey(xc(pe,d.MAX_KEY,ee),be)}},primaryKey:{get:function(){return ce.primaryKey}},key:{get:function(){var pe=ce.key;return ne===1?pe[0]:pe.slice(0,ne)}},value:{get:function(){return ce.value}}})}}})}})}};function Ef(d,m,k,E){return k=k||{},E=E||"",o(d).forEach(function(T){var A,L,U;h(m,T)?(A=d[T],L=m[T],typeof A=="object"&&typeof L=="object"&&A&&L?(U=Q(A))!==Q(L)?k[E+T]=m[T]:U==="Object"?Ef(A,L,k,E+T+"."):A!==L&&(k[E+T]=m[T]):A!==L&&(k[E+T]=m[T])):k[E+T]=void 0}),o(m).forEach(function(T){h(d,T)||(k[E+T]=m[T])}),k}function Cf(d,m){return m.type==="delete"?m.keys:m.keys||m.values.map(d.extractKey)}var BT={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(m){var k=d.table(m),E=k.schema.primaryKey;return r(r({},k),{mutate:function(T){var A=Ae.trans,L=A.table(m).hook,U=L.deleting,Y=L.creating,Z=L.updating;switch(T.type){case"add":if(Y.fire===Me)break;return A._promise("readwrite",function(){return ie(T)},!0);case"put":if(Y.fire===Me&&Z.fire===Me)break;return A._promise("readwrite",function(){return ie(T)},!0);case"delete":if(U.fire===Me)break;return A._promise("readwrite",function(){return ie(T)},!0);case"deleteRange":if(U.fire===Me)break;return A._promise("readwrite",function(){return function V(le,ee,te){return k.query({trans:le,values:!1,query:{index:E,range:ee},limit:te}).then(function(ne){var oe=ne.result;return ie({type:"delete",keys:oe,trans:le}).then(function(ce){return 0<ce.numFailures?Promise.reject(ce.failures[0]):oe.length<te?{failures:[],numFailures:0,lastResult:void 0}:V(le,r(r({},ee),{lower:oe[oe.length-1],lowerOpen:!0}),te)})})}(T.trans,T.range,1e4)},!0)}return k.mutate(T);function ie(V){var le,ee,te,ne=Ae.trans,oe=V.keys||Cf(E,V);if(!oe)throw new Error("Keys missing");return(V=V.type==="add"||V.type==="put"?r(r({},V),{keys:oe}):r({},V)).type!=="delete"&&(V.values=s([],V.values)),V.keys&&(V.keys=s([],V.keys)),le=k,te=oe,((ee=V).type==="add"?Promise.resolve([]):le.getMany({trans:ee.trans,keys:te,cache:"immutable"})).then(function(ce){var pe=oe.map(function(be,ke){var je,De,Pe,Re=ce[ke],Ne={onerror:null,onsuccess:null};return V.type==="delete"?U.fire.call(Ne,be,Re,ne):V.type==="add"||Re===void 0?(je=Y.fire.call(Ne,be,V.values[ke],ne),be==null&&je!=null&&(V.keys[ke]=be=je,E.outbound||I(V.values[ke],E.keyPath,be))):(je=Ef(Re,V.values[ke]),(De=Z.fire.call(Ne,je,be,Re,ne))&&(Pe=V.values[ke],Object.keys(De).forEach(function(Oe){h(Pe,Oe)?Pe[Oe]=De[Oe]:I(Pe,Oe,De[Oe])}))),Ne});return k.mutate(V).then(function(be){for(var ke=be.failures,je=be.results,De=be.numFailures,be=be.lastResult,Pe=0;Pe<oe.length;++Pe){var Re=(je||oe)[Pe],Ne=pe[Pe];Re==null?Ne.onerror&&Ne.onerror(ke[Pe]):Ne.onsuccess&&Ne.onsuccess(V.type==="put"&&ce[Pe]?V.values[Pe]:Re)}return{failures:ke,results:je,numFailures:De,lastResult:be}}).catch(function(be){return pe.forEach(function(ke){return ke.onerror&&ke.onerror(be)}),Promise.reject(be)})})}}})}})}};function f0(d,m,k){try{if(!m||m.keys.length<d.length)return null;for(var E=[],T=0,A=0;T<m.keys.length&&A<d.length;++T)st(m.keys[T],d[A])===0&&(E.push(k?J(m.values[T]):m.values[T]),++A);return E.length===d.length?E:null}catch{return null}}var UT={stack:"dbcore",level:-1,create:function(d){return{table:function(m){var k=d.table(m);return r(r({},k),{getMany:function(E){if(!E.cache)return k.getMany(E);var T=f0(E.keys,E.trans._cache,E.cache==="clone");return T?Ie.resolve(T):k.getMany(E).then(function(A){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?J(A):A},A})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),k.mutate(E)}})}}}};function p0(d,m){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function m0(d,m){switch(d){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var zT={stack:"dbcore",level:0,name:"Observability",create:function(d){var m=d.schema.name,k=new dn(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(E,T,A){if(Ae.subscr&&T!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return d.transaction(E,T,A)},table:function(E){var T=d.table(E),A=T.schema,L=A.primaryKey,V=A.indexes,U=L.extractKey,Y=L.outbound,Z=L.autoIncrement&&V.filter(function(ee){return ee.compound&&ee.keyPath.includes(L.keyPath)}),ie=r(r({},T),{mutate:function(ee){function te(Oe){return Oe="idb://".concat(m,"/").concat(E,"/").concat(Oe),be[Oe]||(be[Oe]=new dn)}var ne,oe,ce,pe=ee.trans,be=ee.mutatedParts||(ee.mutatedParts={}),ke=te(""),je=te(":dels"),De=ee.type,Ne=ee.type==="deleteRange"?[ee.range]:ee.type==="delete"?[ee.keys]:ee.values.length<50?[Cf(L,ee).filter(function(Oe){return Oe}),ee.values]:[],Pe=Ne[0],Re=Ne[1],Ne=ee.trans._cache;return a(Pe)?(ke.addKeys(Pe),(Ne=De==="delete"||Pe.length===Re.length?f0(Pe,Ne):null)||je.addKeys(Pe),(Ne||Re)&&(ne=te,oe=Ne,ce=Re,A.indexes.forEach(function(Oe){var ze=ne(Oe.name||"");function Xe(tt){return tt!=null?Oe.extractKey(tt):null}function et(tt){return Oe.multiEntry&&a(tt)?tt.forEach(function(Hn){return ze.addKey(Hn)}):ze.addKey(tt)}(oe||ce).forEach(function(tt,hn){var Ze=oe&&Xe(oe[hn]),hn=ce&&Xe(ce[hn]);st(Ze,hn)!==0&&(Ze!=null&&et(Ze),hn!=null&&et(hn))})}))):Pe?(Re={from:(Re=Pe.lower)!==null&&Re!==void 0?Re:d.MIN_KEY,to:(Re=Pe.upper)!==null&&Re!==void 0?Re:d.MAX_KEY},je.add(Re),ke.add(Re)):(ke.add(k),je.add(k),A.indexes.forEach(function(Oe){return te(Oe.name).add(k)})),T.mutate(ee).then(function(Oe){return!Pe||ee.type!=="add"&&ee.type!=="put"||(ke.addKeys(Oe.results),Z&&Z.forEach(function(ze){for(var Xe=ee.values.map(function(Ze){return ze.extractKey(Ze)}),et=ze.keyPath.findIndex(function(Ze){return Ze===L.keyPath}),tt=0,Hn=Oe.results.length;tt<Hn;++tt)Xe[tt][et]=Oe.results[tt];te(ze.name).addKeys(Xe)})),pe.mutatedParts=wc(pe.mutatedParts||{},be),Oe})}}),V=function(te){var ne=te.query,te=ne.index,ne=ne.range;return[te,new dn((te=ne.lower)!==null&&te!==void 0?te:d.MIN_KEY,(ne=ne.upper)!==null&&ne!==void 0?ne:d.MAX_KEY)]},le={get:function(ee){return[L,new dn(ee.key)]},getMany:function(ee){return[L,new dn().addKeys(ee.keys)]},count:V,query:V,openCursor:V};return o(le).forEach(function(ee){ie[ee]=function(te){var ne=Ae.subscr,oe=!!ne,ce=p0(Ae,T)&&m0(ee,te)?te.obsSet={}:ne;if(oe){var pe=function(Re){return Re="idb://".concat(m,"/").concat(E,"/").concat(Re),ce[Re]||(ce[Re]=new dn)},be=pe(""),ke=pe(":dels"),ne=le[ee](te),oe=ne[0],ne=ne[1];if((ee==="query"&&oe.isPrimaryKey&&!te.values?ke:pe(oe.name||"")).add(ne),!oe.isPrimaryKey){if(ee!=="count"){var je=ee==="query"&&Y&&te.values&&T.query(r(r({},te),{values:!1}));return T[ee].apply(this,arguments).then(function(Re){if(ee==="query"){if(Y&&te.values)return je.then(function(Xe){return Xe=Xe.result,be.addKeys(Xe),Re});var Ne=te.values?Re.result.map(U):Re.result;(te.values?be:ke).addKeys(Ne)}else if(ee==="openCursor"){var Oe=Re,ze=te.values;return Oe&&Object.create(Oe,{key:{get:function(){return ke.addKey(Oe.primaryKey),Oe.key}},primaryKey:{get:function(){var Xe=Oe.primaryKey;return ke.addKey(Xe),Xe}},value:{get:function(){return ze&&be.addKey(Oe.primaryKey),Oe.value}}})}return Re})}ke.add(k)}}return T[ee].apply(this,arguments)}}),ie}})}};function g0(d,m,k){if(k.numFailures===0)return m;if(m.type==="deleteRange")return null;var E=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1;return k.numFailures===E?null:(m=r({},m),a(m.keys)&&(m.keys=m.keys.filter(function(T,A){return!(A in k.failures)})),"values"in m&&a(m.values)&&(m.values=m.values.filter(function(T,A){return!(A in k.failures)})),m)}function Tf(d,m){return k=d,((E=m).lower===void 0||(E.lowerOpen?0<st(k,E.lower):0<=st(k,E.lower)))&&(d=d,(m=m).upper===void 0||(m.upperOpen?st(d,m.upper)<0:st(d,m.upper)<=0));var k,E}function y0(d,m,le,E,T,A){if(!le||le.length===0)return d;var L=m.query.index,U=L.multiEntry,Y=m.query.range,Z=E.schema.primaryKey.extractKey,ie=L.extractKey,V=(L.lowLevelIndex||L).extractKey,le=le.reduce(function(ee,te){var ne=ee,oe=[];if(te.type==="add"||te.type==="put")for(var ce=new dn,pe=te.values.length-1;0<=pe;--pe){var be,ke=te.values[pe],je=Z(ke);ce.hasKey(je)||(be=ie(ke),(U&&a(be)?be.some(function(Oe){return Tf(Oe,Y)}):Tf(be,Y))&&(ce.addKey(je),oe.push(ke)))}switch(te.type){case"add":var De=new dn().addKeys(m.values?ee.map(function(ze){return Z(ze)}):ee),ne=ee.concat(m.values?oe.filter(function(ze){return ze=Z(ze),!De.hasKey(ze)&&(De.addKey(ze),!0)}):oe.map(function(ze){return Z(ze)}).filter(function(ze){return!De.hasKey(ze)&&(De.addKey(ze),!0)}));break;case"put":var Pe=new dn().addKeys(te.values.map(function(ze){return Z(ze)}));ne=ee.filter(function(ze){return!Pe.hasKey(m.values?Z(ze):ze)}).concat(m.values?oe:oe.map(function(ze){return Z(ze)}));break;case"delete":var Re=new dn().addKeys(te.keys);ne=ee.filter(function(ze){return!Re.hasKey(m.values?Z(ze):ze)});break;case"deleteRange":var Ne=te.range;ne=ee.filter(function(ze){return!Tf(Z(ze),Ne)})}return ne},d);return le===d?d:(le.sort(function(ee,te){return st(V(ee),V(te))||st(Z(ee),Z(te))}),m.limit&&m.limit<1/0&&(le.length>m.limit?le.length=m.limit:d.length===m.limit&&le.length<m.limit&&(T.dirty=!0)),A?Object.freeze(le):le)}function v0(d,m){return st(d.lower,m.lower)===0&&st(d.upper,m.upper)===0&&!!d.lowerOpen==!!m.lowerOpen&&!!d.upperOpen==!!m.upperOpen}function VT(d,m){return function(k,E,T,A){if(k===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=st(k,E))===0){if(T&&A)return 0;if(T)return 1;if(A)return-1}return E}(d.lower,m.lower,d.lowerOpen,m.lowerOpen)<=0&&0<=function(k,E,T,A){if(k===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=st(k,E))===0){if(T&&A)return 0;if(T)return-1;if(A)return 1}return E}(d.upper,m.upper,d.upperOpen,m.upperOpen)}function KT(d,m,k,E){d.subscribers.add(k),E.addEventListener("abort",function(){var T,A;d.subscribers.delete(k),d.subscribers.size===0&&(T=d,A=m,setTimeout(function(){T.subscribers.size===0&&W(A,T)},3e3))})}var WT={stack:"dbcore",level:0,name:"Cache",create:function(d){var m=d.schema.name;return r(r({},d),{transaction:function(k,E,T){var A,L,U=d.transaction(k,E,T);return E==="readwrite"&&(L=(A=new AbortController).signal,T=function(Y){return function(){if(A.abort(),E==="readwrite"){for(var Z=new Set,ie=0,V=k;ie<V.length;ie++){var le=V[ie],ee=Pi["idb://".concat(m,"/").concat(le)];if(ee){var te=d.table(le),ne=ee.optimisticOps.filter(function(ze){return ze.trans===U});if(U._explicit&&Y&&U.mutatedParts)for(var oe=0,ce=Object.values(ee.queries.query);oe<ce.length;oe++)for(var pe=0,be=(De=ce[oe]).slice();pe<be.length;pe++)bf((Pe=be[pe]).obsSet,U.mutatedParts)&&(W(De,Pe),Pe.subscribers.forEach(function(ze){return Z.add(ze)}));else if(0<ne.length){ee.optimisticOps=ee.optimisticOps.filter(function(ze){return ze.trans!==U});for(var ke=0,je=Object.values(ee.queries.query);ke<je.length;ke++)for(var De,Pe,Re,Ne=0,Oe=(De=je[ke]).slice();Ne<Oe.length;Ne++)(Pe=Oe[Ne]).res!=null&&U.mutatedParts&&(Y&&!Pe.dirty?(Re=Object.isFrozen(Pe.res),Re=y0(Pe.res,Pe.req,ne,te,Pe,Re),Pe.dirty?(W(De,Pe),Pe.subscribers.forEach(function(ze){return Z.add(ze)})):Re!==Pe.res&&(Pe.res=Re,Pe.promise=Ie.resolve({result:Re}))):(Pe.dirty&&W(De,Pe),Pe.subscribers.forEach(function(ze){return Z.add(ze)})))}}}Z.forEach(function(ze){return ze()})}}},U.addEventListener("abort",T(!1),{signal:L}),U.addEventListener("error",T(!1),{signal:L}),U.addEventListener("complete",T(!0),{signal:L})),U},table:function(k){var E=d.table(k),T=E.schema.primaryKey;return r(r({},E),{mutate:function(A){var L=Ae.trans;if(T.outbound||L.db._options.cache==="disabled"||L.explicit||L.idbtrans.mode!=="readwrite")return E.mutate(A);var U=Pi["idb://".concat(m,"/").concat(k)];return U?(L=E.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||Cf(T,A).some(function(Y){return Y==null}))?(U.optimisticOps.push(A),A.mutatedParts&&bc(A.mutatedParts),L.then(function(Y){0<Y.numFailures&&(W(U.optimisticOps,A),(Y=g0(0,A,Y))&&U.optimisticOps.push(Y),A.mutatedParts&&bc(A.mutatedParts))}),L.catch(function(){W(U.optimisticOps,A),A.mutatedParts&&bc(A.mutatedParts)})):L.then(function(Y){var Z=g0(0,r(r({},A),{values:A.values.map(function(ie,V){var le;return Y.failures[V]?ie:(ie=(le=T.keyPath)!==null&&le!==void 0&&le.includes(".")?J(ie):r({},ie),I(ie,T.keyPath,Y.results[V]),ie)})}),Y);U.optimisticOps.push(Z),queueMicrotask(function(){return A.mutatedParts&&bc(A.mutatedParts)})}),L):E.mutate(A)},query:function(A){if(!p0(Ae,E)||!m0("query",A))return E.query(A);var L=((Z=Ae.trans)===null||Z===void 0?void 0:Z.db._options.cache)==="immutable",V=Ae,U=V.requery,Y=V.signal,Z=function(te,ne,oe,ce){var pe=Pi["idb://".concat(te,"/").concat(ne)];if(!pe)return[];if(!(ne=pe.queries[oe]))return[null,!1,pe,null];var be=ne[(ce.query?ce.query.index.name:null)||""];if(!be)return[null,!1,pe,null];switch(oe){case"query":var ke=be.find(function(je){return je.req.limit===ce.limit&&je.req.values===ce.values&&v0(je.req.query.range,ce.query.range)});return ke?[ke,!0,pe,be]:[be.find(function(je){return("limit"in je.req?je.req.limit:1/0)>=ce.limit&&(!ce.values||je.req.values)&&VT(je.req.query.range,ce.query.range)}),!1,pe,be];case"count":return ke=be.find(function(je){return v0(je.req.query.range,ce.query.range)}),[ke,!!ke,pe,be]}}(m,k,"query",A),ie=Z[0],V=Z[1],le=Z[2],ee=Z[3];return ie&&V?ie.obsSet=A.obsSet:(V=E.query(A).then(function(te){var ne=te.result;if(ie&&(ie.res=ne),L){for(var oe=0,ce=ne.length;oe<ce;++oe)Object.freeze(ne[oe]);Object.freeze(ne)}else te.result=J(ne);return te}).catch(function(te){return ee&&ie&&W(ee,ie),Promise.reject(te)}),ie={obsSet:A.obsSet,promise:V,subscribers:new Set,type:"query",req:A,dirty:!1},ee?ee.push(ie):(ee=[ie],(le=le||(Pi["idb://".concat(m,"/").concat(k)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=ee)),KT(ie,ee,U,Y),ie.promise.then(function(te){return{result:y0(te.result,A,le==null?void 0:le.optimisticOps,E,ie,L)}})}})}})}};function _c(d,m){return new Proxy(d,{get:function(k,E,T){return E==="db"?m:Reflect.get(k,E,T)}})}var ns=(Nt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new ae.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var m=this._versions,k=m.filter(function(E){return E._cfg.version===d})[0];return k||(k=new this.Version(d),m.push(k),m.sort(DT),k.stores({}),this._state.autoSchema=!1,k)},Nt.prototype._whenReady=function(d){var m=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?d():new Ie(function(k,E){if(m._state.openComplete)return E(new ae.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void E(new ae.DatabaseClosed);m.open().catch(Me)}m._state.dbReadyPromise.then(k,E)}).then(d)},Nt.prototype.use=function(d){var m=d.stack,k=d.create,E=d.level,T=d.name;return T&&this.unuse({stack:m,name:T}),d=this._middlewares[m]||(this._middlewares[m]=[]),d.push({stack:m,create:k,level:E??10,name:T}),d.sort(function(A,L){return A.level-L.level}),this},Nt.prototype.unuse=function(d){var m=d.stack,k=d.name,E=d.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(T){return E?T.create!==E:!!k&&T.name!==k})),this},Nt.prototype.open=function(){var d=this;return Ei(He,function(){return MT(d)})},Nt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,m=To.indexOf(this);if(0<=m&&To.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Ie(function(k){d.dbReadyResolve=k}),d.openCanceller=new Ie(function(k,E){d.cancelOpen=E}))},Nt.prototype.close=function(k){var m=(k===void 0?{disableAutoOpen:!0}:k).disableAutoOpen,k=this._state;m?(k.isBeingOpened&&k.cancelOpen(new ae.DatabaseClosed),this._close(),k.autoOpen=!1,k.dbOpenError=new ae.DatabaseClosed):(this._close(),k.autoOpen=this._options.autoOpen||k.isBeingOpened,k.openComplete=!1,k.dbOpenError=null)},Nt.prototype.delete=function(d){var m=this;d===void 0&&(d={disableAutoOpen:!0});var k=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ie(function(T,A){function L(){m.close(d);var U=m._deps.indexedDB.deleteDatabase(m.name);U.onsuccess=bt(function(){var Y,Z,ie;Y=m._deps,Z=m.name,ie=Y.indexedDB,Y=Y.IDBKeyRange,yf(ie)||Z===ac||gf(ie,Y).delete(Z).catch(Me),T()}),U.onerror=Lr(A),U.onblocked=m._fireOnBlocked}if(k)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(L):L()})},Nt.prototype.backendDB=function(){return this.idbdb},Nt.prototype.isOpen=function(){return this.idbdb!==null},Nt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Nt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Nt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Nt.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(m){return d._allTables[m]})},enumerable:!1,configurable:!0}),Nt.prototype.transaction=function(){var d=(function(m,k,E){var T=arguments.length;if(T<2)throw new ae.InvalidArgument("Too few arguments");for(var A=new Array(T-1);--T;)A[T-1]=arguments[T];return E=A.pop(),[m,F(A),E]}).apply(this,arguments);return this._transaction.apply(this,d)},Nt.prototype._transaction=function(d,m,k){var E=this,T=Ae.trans;T&&T.db===this&&d.indexOf("!")===-1||(T=null);var A,L,U=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(L=m.map(function(Z){if(Z=Z instanceof E.Table?Z.name:Z,typeof Z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Z}),d=="r"||d===sf)A=sf;else{if(d!="rw"&&d!=of)throw new ae.InvalidArgument("Invalid transaction mode: "+d);A=of}if(T){if(T.mode===sf&&A===of){if(!U)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");T=null}T&&L.forEach(function(Z){if(T&&T.storeNames.indexOf(Z)===-1){if(!U)throw new ae.SubTransaction("Table "+Z+" not included in parent transaction.");T=null}}),U&&T&&!T.active&&(T=null)}}catch(Z){return T?T._promise(null,function(ie,V){V(Z)}):Dt(Z)}var Y=(function Z(ie,V,le,ee,te){return Ie.resolve().then(function(){var ne=Ae.transless||Ae,oe=ie._createTransaction(V,le,ie._dbSchema,ee);if(oe.explicit=!0,ne={trans:oe,transless:ne},ee)oe.idbtrans=ee.idbtrans;else try{oe.create(),oe.idbtrans._explicit=!0,ie._state.PR1398_maxLoop=3}catch(be){return be.name===ye.InvalidState&&ie.isOpen()&&0<--ie._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ie.close({disableAutoOpen:!1}),ie.open().then(function(){return Z(ie,V,le,null,te)})):Dt(be)}var ce,pe=H(te);return pe&&Co(),ne=Ie.follow(function(){var be;(ce=te.call(oe,oe))&&(pe?(be=Rs.bind(null,null),ce.then(be,be)):typeof ce.next=="function"&&typeof ce.throw=="function"&&(ce=Sf(ce)))},ne),(ce&&typeof ce.then=="function"?Ie.resolve(ce).then(function(be){return oe.active?be:Dt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ne.then(function(){return ce})).then(function(be){return ee&&oe._resolve(),oe._completion.then(function(){return be})}).catch(function(be){return oe._reject(be),Dt(be)})})}).bind(null,this,A,L,T,k);return T?T._promise(A,Y,"lock"):Ae.trans?Ei(Ae.transless,function(){return E._whenReady(Y)}):this._whenReady(Y)},Nt.prototype.table=function(d){if(!h(this._allTables,d))throw new ae.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Nt);function Nt(d,m){var k=this;this._middlewares={},this.verno=0;var E=Nt.dependencies;this._options=m=r({addons:Nt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},E=m.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var T,A,L,U,Y,Z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Me,dbReadyPromise:null,cancelOpen:Me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen};Z.dbReadyPromise=new Ie(function(V){Z.dbReadyResolve=V}),Z.openCanceller=new Ie(function(V,le){Z.cancelOpen=le}),this._state=Z,this.name=d,this.on=Ja(this,"populate","blocked","versionchange","close",{ready:[_e,Me]}),this.once=function(V,le){var ee=function(){for(var te=[],ne=0;ne<arguments.length;ne++)te[ne]=arguments[ne];k.on(V).unsubscribe(ee),le.apply(k,te)};return k.on(V,ee)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(V){return function(le,ee){Nt.vip(function(){var te,ne=k._state;ne.openComplete?(ne.dbOpenError||Ie.resolve().then(le),ee&&V(le)):ne.onReadyBeingFired?(ne.onReadyBeingFired.push(le),ee&&V(le)):(V(le),te=k,ee||V(function oe(){te.on.ready.unsubscribe(le),te.on.ready.unsubscribe(oe)}))})}}),this.Collection=(T=this,Za(TT.prototype,function(ce,oe){this.db=T;var ee=qv,te=null;if(oe)try{ee=oe()}catch(pe){te=pe}var ne=ce._ctx,oe=ne.table,ce=oe.hook.reading.fire;this._ctx={table:oe,index:ne.index,isPrimKey:!ne.index||oe.schema.primKey.keyPath&&ne.index===oe.schema.primKey.name,range:ee,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:te,or:ne.or,valueMapper:ce!==dt?ce:null}})),this.Table=(A=this,Za(Xv.prototype,function(V,le,ee){this.db=A,this._tx=ee,this.name=V,this.schema=le,this.hook=A._allTables[V]?A._allTables[V].hook:Ja(null,{creating:[ge,Me],reading:[P,dt],updating:[M,Me],deleting:[B,Me]})})),this.Transaction=(L=this,Za(RT.prototype,function(V,le,ee,te,ne){var oe=this;V!=="readonly"&&le.forEach(function(ce){ce=(ce=ee[ce])===null||ce===void 0?void 0:ce.yProps,ce&&(le=le.concat(ce.map(function(pe){return pe.updatesTable})))}),this.db=L,this.mode=V,this.storeNames=le,this.schema=ee,this.chromeTransactionDurability=te,this.idbtrans=null,this.on=Ja(this,"complete","error","abort"),this.parent=ne||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(ce,pe){oe._resolve=ce,oe._reject=pe}),this._completion.then(function(){oe.active=!1,oe.on.complete.fire()},function(ce){var pe=oe.active;return oe.active=!1,oe.on.error.fire(ce),oe.parent?oe.parent._reject(ce):pe&&oe.idbtrans&&oe.idbtrans.abort(),Dt(ce)})})),this.Version=(U=this,Za($T.prototype,function(V){this.db=U,this._cfg={version:V,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Y=this,Za(s0.prototype,function(V,le,ee){if(this.db=Y,this._ctx={table:V,index:le===":id"?null:le,or:ee},this._cmp=this._ascending=st,this._descending=function(te,ne){return st(ne,te)},this._max=function(te,ne){return 0<st(te,ne)?te:ne},this._min=function(te,ne){return st(te,ne)<0?te:ne},this._IDBKeyRange=Y._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})),this.on("versionchange",function(V){0<V.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(V){!V.newVersion||V.newVersion<V.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(V.oldVersion/10))}),this._maxKey=tl(m.IDBKeyRange),this._createTransaction=function(V,le,ee,te){return new k.Transaction(V,le,ee,k._options.chromeTransactionDurability,te)},this._fireOnBlocked=function(V){k.on("blocked").fire(V),To.filter(function(le){return le.name===k.name&&le!==k&&!le._state.vcFired}).map(function(le){return le.on("versionchange").fire(V)})},this.use(UT),this.use(WT),this.use(zT),this.use(FT),this.use(BT);var ie=new Proxy(this,{get:function(V,le,ee){if(le==="_vip")return!0;if(le==="table")return function(ne){return _c(k.table(ne),ie)};var te=Reflect.get(V,le,ee);return te instanceof Xv?_c(te,ie):le==="tables"?te.map(function(ne){return _c(ne,ie)}):le==="_createTransaction"?function(){return _c(te.apply(this,arguments),ie)}:te}});this.vip=ie,E.forEach(function(V){return V(k)})}var kc,nr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",HT=(Pf.prototype.subscribe=function(d,m,k){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:m,complete:k})},Pf.prototype[nr]=function(){return this},Pf);function Pf(d){this._subscribe=d}try{kc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{kc={indexedDB:null,IDBKeyRange:null}}function w0(d){var m,k=!1,E=new HT(function(T){var A=H(d),L,U=!1,Y={},Z={},ie={get closed(){return U},unsubscribe:function(){U||(U=!0,L&&L.abort(),V&&Is.storagemutated.unsubscribe(ee))}};T.start&&T.start(ie);var V=!1,le=function(){return rf(te)},ee=function(ne){wc(Y,ne),bf(Z,Y)&&le()},te=function(){var ne,oe,ce;!U&&kc.indexedDB&&(Y={},ne={},L&&L.abort(),L=new AbortController,ce=function(pe){var be=So();try{A&&Co();var ke=js(d,pe);return ke=A?ke.finally(Rs):ke}finally{be&&Eo()}}(oe={subscr:ne,signal:L.signal,requery:le,querier:d,trans:null}),Promise.resolve(ce).then(function(pe){k=!0,m=pe,U||oe.signal.aborted||(Y={},function(be){for(var ke in be)if(h(be,ke))return;return 1}(Z=ne)||V||(Is(el,ee),V=!0),rf(function(){return!U&&T.next&&T.next(pe)}))},function(pe){k=!1,["DatabaseClosedError","AbortError"].includes(pe==null?void 0:pe.name)||U||rf(function(){U||T.error&&T.error(pe)})}))};return setTimeout(le,0),ie});return E.hasValue=function(){return k},E.getValue=function(){return m},E}var ji=ns;function jf(d){var m=Ds;try{Ds=!0,Is.storagemutated.fire(d),kf(d,!0)}finally{Ds=m}}f(ji,r(r({},Be),{delete:function(d){return new ji(d,{addons:[]}).delete()},exists:function(d){return new ji(d,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return m=ji.dependencies,k=m.indexedDB,m=m.IDBKeyRange,(yf(k)?Promise.resolve(k.databases()).then(function(E){return E.map(function(T){return T.name}).filter(function(T){return T!==ac})}):gf(k,m).toCollection().primaryKeys()).then(d)}catch{return Dt(new ae.MissingAPI)}var m,k},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Ae.trans?Ei(Ae.transless,d):d()},vip:vf,async:function(d){return function(){try{var m=Sf(d.apply(this,arguments));return m&&typeof m.then=="function"?m:Ie.resolve(m)}catch(k){return Dt(k)}}},spawn:function(d,m,k){try{var E=Sf(d.apply(k,m||[]));return E&&typeof E.then=="function"?E:Ie.resolve(E)}catch(T){return Dt(T)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(d,m){return m=Ie.resolve(typeof d=="function"?ji.ignoreTransaction(d):d).timeout(m||6e4),Ae.trans?Ae.trans.waitFor(m):m},Promise:Ie,debug:{get:function(){return xe},set:function(d){fe(d)}},derive:g,extend:l,props:f,override:_,Events:Ja,on:Is,liveQuery:w0,extendObservabilitySet:wc,getByKeyPath:O,setByKeyPath:I,delByKeyPath:function(d,m){typeof m=="string"?I(d,m,void 0):"length"in m&&[].map.call(m,function(k){I(d,k,void 0)})},shallowClone:D,deepClone:J,getObjectDiff:Ef,cmp:st,asap:R,minKey:-1/0,addons:[],connections:To,errnames:ye,dependencies:kc,cache:Pi,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,m,k){return d+m/Math.pow(10,2*k)})})),ji.maxKey=tl(ji.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Is(el,function(d){Ds||(d=new CustomEvent(uf,{detail:d}),Ds=!0,dispatchEvent(d),Ds=!1)}),addEventListener(uf,function(d){d=d.detail,Ds||jf(d)}));var Ao,Ds=!1,b0=function(){};return typeof BroadcastChannel<"u"&&((b0=function(){(Ao=new BroadcastChannel(uf)).onmessage=function(d){return d.data&&jf(d.data)}})(),typeof Ao.unref=="function"&&Ao.unref(),Is(el,function(d){Ds||Ao.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!ns.disableBfCache&&d.persisted){xe&&console.debug("Dexie: handling persisted pagehide"),Ao!=null&&Ao.close();for(var m=0,k=To;m<k.length;m++)k[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!ns.disableBfCache&&d.persisted&&(xe&&console.debug("Dexie: handling persisted pageshow"),b0(),jf({all:new dn(-1/0,[[]])}))})),Ie.rejectionMapper=function(d,m){return!d||d instanceof ve||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Le[d.name]?d:(m=new Le[d.name](m||d.message,d),"stack"in d&&w(m,"stack",{get:function(){return this.inner.stack}}),m)},fe(xe),r(ns,Object.freeze({__proto__:null,Dexie:ns,liveQuery:w0,Entity:Gv,cmp:st,PropModification:Ya,replacePrefix:function(d,m){return new Ya({replacePrefix:[d,m]})},add:function(d){return new Ya({add:d})},remove:function(d){return new Ya({remove:d})},default:ns,RangeSet:dn,mergeRanges:sl,rangesOverlap:u0}),{default:ns}),ns})})(I1);var bD=I1.exports;const og=Ou(bD),fb=Symbol.for("Dexie"),Ia=globalThis[fb]||(globalThis[fb]=og);if(og.semVer!==Ia.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${og.semVer} and ${Ia.semVer}`);const{liveQuery:KU,mergeRanges:WU,rangesOverlap:HU,RangeSet:qU,cmp:GU,Entity:QU,PropModification:YU,replacePrefix:JU,add:ZU,remove:XU,DexieYProvider:e6}=Ia;function xD(e,t,n){var r,s;typeof e=="function"?(r=t||[],s=n):(r=[],s=t);var i=We.useRef({hasResult:!1,result:s,error:null}),o=We.useReducer(function(u){return u+1},0);o[0];var a=o[1],l=We.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")i.current.result=u.getValue(),i.current.hasResult=!0;else{var c=u.subscribe(function(h){i.current.result=h,i.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(We.useDebugValue(i.current.result),We.useEffect(function(){var u=l.subscribe(function(c){var h=i.current;(h.error!==null||h.result!==c)&&(h.error=null,h.result=c,h.hasResult=!0,a())},function(c){var h=i.current;h.error!==c&&(h.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),i.current.error)throw i.current.error;return i.current.result}function _D(e,t,n){return xD(function(){return Ia.liveQuery(e)},[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=Ia.DexieYProvider;t&&t.release(e)});class D1 extends Ia{constructor(){super("SankeertanDB");il(this,"categories");il(this,"songIndices");il(this,"songDetails");il(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId, categoryId"})}}let yd=null;function Mt(){return yd===null&&(yd=new D1,console.log("Database initialized or re-initialized.")),yd}yd=new D1;async function Lh(e){try{const n=await Mt().songIndices.where("bookId").equals(e).sortBy("insertionId");return n.length>0?n:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function Jy(e,t){try{const n=Mt();await n.songIndices.where("bookId").equals(e).delete();const r=t.map(s=>({...s,bookId:e,tags:s.tags||[]}));await n.songIndices.bulkAdd(r)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}const Ka=async e=>{try{return await Mt().songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function kD(e){try{const n=await Mt().songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${n} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function SD(e){try{return await Mt().songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function $h(e,t){try{const n=[e,t];return await Mt().songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function Zy(e,t){try{const n=Mt(),r=[e,t];return await n.songDetails.where("[bookId+songTitle]").equals(r).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const N1=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function Xy(e){const t=N1(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await Mt().songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function ED(e,t){try{const n=Mt(),r=[e,t];await n.songDetails.delete(r)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function L1(e){try{return await Mt().songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function $1(e){try{const t=Mt(),n=await t.songDetails.where("bookId").equals(e).delete(),r=await t.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${n}, Indices removed: ${r}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function CD(e){try{await Mt().songDetails.bulkPut(e)}catch(t){throw console.error("Error bulk saving song details:",t),t}}async function TD(e){try{await Mt().songIndices.bulkPut(e)}catch(t){throw console.error("Error bulk saving song indices:",t),t}}function PD(e){const t=[];return e.forEach(n=>{const r=n.id;n.books&&Array.isArray(n.books)&&n.books.forEach(s=>{const i={...s,categoryId:r};t.push(i)})}),t}async function jD(e){const t=Mt(),n=PD(e);if(n.length===0){console.warn("No books found after transformation. Skipping 'books' table refresh.");return}try{await t.transaction("rw",t.books,async()=>{await t.books.clear(),await t.books.bulkPut(n)}),console.log(`Successfully saved ${n.length} books to the 'books' table.`)}catch(r){console.error("Error saving books to DB:",r)}}async function th(e){try{return await Mt().books.get(e)}catch(t){console.error(`Error retrieving metadata for book ${e}:`,t);return}}async function M1(e){try{const t=await th(e);if(!t)return!1;const n=Number(t.songCount)||0;if(n===0)return!1;const[r,s]=await Promise.all([Ka(e),L1(e)]);return r&&s>=n}catch(t){return console.error(`Error checking download status for book ${e}:`,t),!1}}async function RD(){try{const n=(await Mt().books.toArray()).map(async s=>({bookId:s.bookId,isDownloaded:await M1(s.bookId)}));return(await Promise.all(n)).filter(s=>s.isDownloaded).map(s=>s.bookId)}catch(e){return console.error("Error getting all fully downloaded book IDs:",e),[]}}async function AD(e){try{const t=Mt(),n=await t.songIndices.where("bookId").equals(e).toArray(),r=await t.songDetails.where("bookId").equals(e).toArray();return!n.length&&!r.length?null:{bookId:e,songIndices:n,songDetails:r}}catch(t){return console.error(`Error exporting full book structure for ${e}:`,t),null}}async function OD(e){try{const t=Mt();await t.categories.clear(),await t.categories.bulkAdd(e),await jD(e),console.log("Categories saved successfully.")}catch(t){console.error("Error saving categories to DB:",t)}}const pp=new Map;async function ID(e,t,n,r){const{sourceRow:s,songTitle:i}=t,o=N1(e,i);if(await $h(e,i))return;const l=pp.get(o);if(l)return l;const u=String(s),c=Number(s),h=(async()=>{if(!e||!i||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${i}, Row: ${s}, User: ${n}`);try{const f=await r({bookId:e,sourceRow:u,songTitle:i,sessionuser:n});if(f.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[p,w,g,x]=f;await Xy({bookId:e,songTitle:i,sourceRow:u,indexPosition:x,songData:p,metadata:w,sourceLanguage:g})}catch(f){throw console.error(`Failed to download and cache song ${i} in book ${e}:`,f),f}})();pp.set(o,h);try{await h}finally{pp.delete(o)}}async function pb(e){const t=e.map(async s=>{const i=s.bookId,o=s.songCount||0,[a,l,u]=await Promise.all([Ka(i),L1(i),SD(i)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const h=c>0?l:0;return{bookId:i,status:{totalSongs:c,downloadedSongs:h,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(s=>{r[s.bookId]=s.status}),r}const DD=async e=>{const t=new URL(`${pr}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const i=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(i)}`)}const r=await n.json();return Object.keys(r).filter(i=>i!=="books").map(i=>({name:i,bookCount:Array.isArray(r[i])?r[i].length:0,books:Array.isArray(r[i])?r[i].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],Type:o.Type,songCount:o["Song Count"],verseCount:o["Verse Count"],author:o.author,language:o.language,isFullBookDownloadable:o.isFullBookDownloadable==="true"||o.isFullBookDownloadable===!0,isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:i.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(i)}&font=lora`}))},F1=S.createContext({categories:[],isLoading:!1,isFetching:!1,error:null,refresh:()=>{}}),ND=Mt(),LD=({children:e})=>{var u;const{session:t}=Cs(),n=(u=t==null?void 0:t.user)==null?void 0:u.email,r=_D(()=>ND.categories.toArray());S.useEffect(()=>{console.log("CategoryContext: Dexie categories loaded:",r==null?void 0:r.length)},[r]);const{isLoading:s,isFetching:i,error:o,data:a,refetch:l}=Vu({queryKey:["categories",n],queryFn:()=>DD(n??null),enabled:!!n&&r!==void 0&&r.length===0,networkMode:"always",staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1});return S.useEffect(()=>{a&&(console.log("CategoryContext: Fetched new categories from API, saving to Dexie..."),OD(a).catch(c=>console.error("Failed to sync categories to Dexie:",c)))},[a]),b.jsx(F1.Provider,{value:{categories:r??[],isLoading:r===void 0||((r==null?void 0:r.length)??0)===0&&s,isFetching:i,error:o,refresh:l},children:e})},Mh=()=>S.useContext(F1),mb=e=>{const[t,n]=S.useState(!1);return S.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),s=i=>n(i.matches);return n(r.matches),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e]),t},B1=()=>{const e=Vn();return{handleSignOut:async()=>{const{error:n}=await Vt.auth.signOut();n?console.error("Error signing out:",n):(console.log("User signed out successfully. Navigating to /login."),e("/login"))}}},$D=Mt();function mp({mode:e="read"}){const[t,n]=S.useState(!1),{categories:r,isLoading:s,isFetching:i,error:o,refresh:a}=Mh(),l=Vn(),[u,c]=S.useState([]),h=mb("(max-width: 600px) and (orientation: portrait)"),f=mb("(max-width: 900px) and (orientation: landscape)"),{session:p}=Cs(),{handleSignOut:w}=B1();S.useEffect(()=>{r&&c(($=>{const F=[],he=360/$;for(let N=0;N<$;N++){const J=N*he;F.push(`hsl(${J}, 70%, 60%)`)}return F})(r.length))},[r==null?void 0:r.length]);const g=async()=>{console.log("Categories & Books -> Triggering manual refresh from server..."),a()},x=S.useCallback(async()=>{n(!1);try{console.warn("[DB ACTION] Attempting to delete entire database..."),await $D.delete(),await w()}catch(D){console.error("[DB ERROR] Could not delete the database:",D)}},[w]),y=S.useCallback(D=>{D.stopPropagation(),n(!0)},[]);if(s||i)return b.jsx("div",{children:"Loading categories..."});if(o instanceof Error)return b.jsxs("div",{children:["Error loading categories: ",o.message]});const v=(D,$)=>{D.stopPropagation(),l(e==="proofreading"?`/proofreading/books/${$}`:`/books/${$}`)},_={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea",display:"flex",justifyContent:"space-between",alignItems:"center"},categoryGrid:{display:"grid",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"},actionButton:{border:"none",background:"none",cursor:"pointer",fontSize:"1.5rem",padding:"5px",borderRadius:"5px",transition:"background-color 0.2s",color:"#666",lineHeight:"1.5rem"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"30px",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",maxWidth:"400px",textAlign:"center"},buttonGroup:{display:"flex",justifyContent:"space-around",marginTop:"20px"}};let C;h?C="repeat(2, 1fr)":f?C="repeat(3, 1fr)":C="repeat(auto-fill, minmax(280px, 1fr))";const R={..._.categoryGrid,gridTemplateColumns:C},O=r==null?void 0:r.filter(D=>{var $;return($=D.books)==null?void 0:$.some(F=>F.Type==="book")}),I=()=>t?b.jsx("div",{style:_.modalOverlay,children:b.jsxs("div",{style:_.modalContent,children:[b.jsx("h3",{className:"text-xl font-bold mb-3 text-red-600",children:" Confirm Permanent Deletion"}),b.jsx("p",{className:"text-gray-700",children:"Are you absolutely sure you want to delete **ALL** stored data (Categories, Books, Songs)? This action cannot be undone."}),b.jsxs("div",{style:_.buttonGroup,children:[b.jsx("button",{onClick:x,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Yes, Delete Everything"}),b.jsx("button",{onClick:()=>n(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Cancel"})]})]})}):null;return b.jsxs("div",{style:_.container,children:[b.jsxs("h2",{style:_.heading,children:[b.jsx("span",{style:{marginRight:"auto"},children:e==="proofreading"?"Proof Reading - Select Category":"Book Categories"}),b.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[b.jsx("button",{onClick:g,style:{..._.actionButton,color:"#3498db",marginRight:"10px"},title:"Reload",children:""}),b.jsx("button",{onClick:y,style:{..._.actionButton,color:"#e74c3c"},title:"Delete ALL Data",children:""})]})]}),b.jsx("div",{style:R,children:O==null?void 0:O.map((D,$)=>b.jsxs("div",{onClick:F=>v(F,D.id),style:{..._.categoryItem,backgroundColor:$%2===0?"#f8f9fa":"#ffffff",borderLeft:`5px solid ${u[$]||"#3498db"}`},className:"category-item",children:[b.jsx("div",{style:{..._.categoryIcon,backgroundColor:u[$]||"#3498db"},children:""}),b.jsx("span",{style:_.categoryName,children:D.name})]},D.id))}),b.jsx("style",{children:`
                    .category-item:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                        border-color: #3498db;
                    }
                `}),b.jsx(I,{})]})}const MD=S.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),ev=()=>S.useContext(MD);console.log("DownloadStatusProvider Function Running!");const gb={},U1=S.createContext(void 0),FD=({children:e,books:t})=>{const n=S.useMemo(()=>t.reduce((x,y)=>(x[y.bookId]={totalSongs:y.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},x),{}),[t]),[r,s]=S.useState(n),[i,o]=S.useState(!1);S.useEffect(()=>{if(!t||t.length===0){s({}),o(!0);return}(async()=>{try{const y=await pb(t),v={};for(const _ of t){const C=_.bookId,R=y[C]||{},O=await Ka(C);v[C]={totalSongs:_.songCount||R.totalSongs||0,downloadedSongs:R.downloadedSongs||0,isIndexDownloaded:O,downloadingSongs:{}}}s(v),o(!0)}catch(y){console.error("Failed to load or initialize download status:",y),s({}),o(!0)}})()},[t]);const a=S.useMemo(()=>t.map(x=>x.bookId).join(","),[t]);S.useEffect(()=>{if(!t||t.length===0){s(gb);return}(async()=>{try{const y=await pb(t);s(y)}catch(y){console.error("Failed to load initial download status from DB:",y),s(gb)}})()},[a,t]);const l=S.useCallback((x,y)=>{s(v=>({...v,[x]:{...v[x],totalSongs:y}}))},[]),u=S.useCallback((x,y)=>{s(v=>({...v,[x]:{...v[x],downloadedSongs:y}}))},[]),c=S.useCallback((x,y)=>{s(v=>({...v,[x]:{...v[x],isIndexDownloaded:y}}))},[]),h=S.useCallback((x,y)=>{s(v=>{var _;return{...v,[x]:{...v[x],downloadingSongs:{...(_=v[x])==null?void 0:_.downloadingSongs,[y]:!0}}}})},[]),f=S.useCallback((x,y)=>{s(v=>{const _=v[x];if(!_)return v;const C={..._.downloadingSongs};return delete C[y],{...v,[x]:{..._,downloadedSongs:(_.downloadedSongs||0)+1,downloadingSongs:C}}})},[]),p=S.useCallback((x,y,v)=>{s(_=>{const C=_[x]||{},R=C.downloadedSongs||0;return{..._,[x]:{...C,totalSongs:y,downloadedSongs:R,downloadingSongs:v}}})},[]),w=S.useCallback(x=>{s(y=>{const v=y[x];return v?{...y,[x]:{...v,downloadedSongs:v.totalSongs,downloadingSongs:{}}}:y})},[]),g={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:h,markSongAsDownloaded:f,updateIndexStatus:c,markBookDownloadStart:p,markBookDownloadComplete:w,isLoaded:i};return b.jsx(U1.Provider,{value:g,children:e})},tv=()=>{const e=S.useContext(U1);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},BD=3e3,UD=1,zD=5,Fh=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const s=new URL(pr);s.searchParams.append("mode","api"),s.searchParams.append("apiname","getsongtextforsong"),s.searchParams.append("book",e),s.searchParams.append("sourcerow",t),s.searchParams.append("songtitle",n),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString());if(!i.ok){const o=await i.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},VD=async({bookId:e,songTitle:t,text:n,sessionuser:r})=>{const s=new URL(pr);s.searchParams.append("mode","api"),s.searchParams.append("apiname","savesongtextfromui"),s.searchParams.append("book",e),s.searchParams.append("songtitle",t),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString(),{method:"POST",body:JSON.stringify({text:n})});if(!i.ok){const o=await i.json().catch(()=>({}));throw new Error(`Failed to save song text: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},KD=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:s,markBookDownloadStart:i,markBookDownloadComplete:o}=tv(),a=S.useCallback(c=>{const h=r[c];if(!h)return!1;const f=h.downloadingSongs??{};return Object.keys(f).length>0},[r]),l=S.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=S.useCallback(async(c,h)=>{if(a(c))return 0;let f=[],p=0;if(await Ka(c)){const v=await Lh(c);v&&Array.isArray(v)&&(f=v.map(_=>({sourceRow:_.sourceRow,songTitle:_.songTitle,tags:_.tags})),p=f.length)}else try{const v=new URL(pr);v.searchParams.append("mode","api"),v.searchParams.append("apiname","getsongsforbook"),v.searchParams.append("book",c),h&&v.searchParams.append("sessionuser",h);const _=await fetch(v.toString());if(!_.ok){const O=await _.json();throw new Error(`Failed to fetch song indices: ${_.status} - ${JSON.stringify(O)}`)}const R=(await _.json()).map(O=>({...O,sourceRow:typeof O.sourceRow=="string"?parseInt(O.sourceRow,10):O.sourceRow,tags:O.tags??void 0}));f=R,p=f.length,await Jy(c,R)}catch{return 0}if(f.length===0)return 0;const w=[];for(const v of f)await $h(c,v.songTitle)?s(c,v.songTitle):w.push(v);const g=w.slice(0,zD),x={};for(const v of g)x[v.songTitle]="pending";i(c,p,x);let y=0;for(const v of g)try{y>=UD&&(await new Promise(_=>setTimeout(_,BD)),y=0),await ID(c,v,h??null,Fh),s(c,v.songTitle),y++}catch{}return p},[e,t,n,a,s,i]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},br={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},nv=()=>{const e=zn(),{categoryId:t,bookId:n,songTitle:r}=xo(),s=r?decodeURIComponent(r):"",[i,o]=We.useState(!1),a={...br.link,color:i?"#0056b3":"#007bff",textDecoration:i?"underline":"none"},l=b.jsx(On,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"}),u=(c,h)=>c?c.length>h?c.substring(0,h)+"...":c:"";return e.pathname.startsWith("/books/")?b.jsxs("div",{style:br.container,children:[l,b.jsx("span",{style:br.separator,children:">"}),b.jsx("span",{title:t,children:u(t,20)})]}):e.pathname.startsWith("/book/")?b.jsxs("div",{style:br.container,children:[l,b.jsx("span",{style:br.separator,children:">"}),b.jsx(On,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:t,children:u(t,20)}),b.jsx("span",{style:br.separator,children:">"}),b.jsx("span",{title:n,children:u(n,25)})]}):e.pathname.startsWith("/details/book/")?b.jsxs("div",{style:br.container,children:[l,b.jsx("span",{style:br.separator,children:">"}),b.jsx(On,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:t,children:u(t,20)}),b.jsx("span",{style:br.separator,children:">"}),b.jsx(On,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),title:n,children:u(n,25)}),b.jsx("span",{style:br.separator,children:">"}),b.jsx("span",{style:br.currentPage,title:s,children:u(s,40)})]}):null},z1=S.createContext({preferredLanguage:"devanagari",setPreferredLanguage:()=>{},isMarathiMode:!1,setIsMarathiMode:()=>{},retainEnglishNumerals:!0,setRetainEnglishNumerals:()=>{}}),V1=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=S.useState(t||"devanagari"),s=localStorage.getItem("isMarathiMode"),[i,o]=S.useState(s==="true"),a=localStorage.getItem("retainEnglishNumerals"),[l,u]=S.useState(a===null?!0:a==="true");return S.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),S.useEffect(()=>{localStorage.setItem("isMarathiMode",String(i))},[i]),S.useEffect(()=>{localStorage.setItem("retainEnglishNumerals",String(l))},[l]),b.jsx(z1.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r,isMarathiMode:i,setIsMarathiMode:o,retainEnglishNumerals:l,setRetainEnglishNumerals:u},children:e})},Ts=()=>S.useContext(z1);async function K1(e,t){const n=[];let r=0;for(;r<e.length;){const s=e.slice(r,r+t),i=await Promise.all(s.map(o=>o()));n.push(...i),r+=t}return n}const yb=3,WD=10;async function HD(e,t,n,r,s){const i=n||new Set,o=qD(r,e);if(o.length>0){const a=o.slice(0,WD);console.log(`[RECURSION START] Found ${o.length} linked books in ${e}. Queuing ${a.length} for batched download...`);const l=a.filter(u=>!i.has(u)).map(u=>()=>s(u,t,n));l.length>0?(console.log(`[BATCH EXECUTION] Queued ${l.length} unique downloads with batch size ${yb}.`),await K1(l,yb),console.log(`[RECURSION COMPLETE] All batched linked books for ${e} have been processed.`)):console.log(`[RECURSION SKIP] All queued linked books in ${e} are already being processed or downloaded.`)}}function qD(e,t){return e.filter(s=>s.type==="link"&&s.link).map(s=>{try{return JSON.parse(s.link).bookId}catch(i){return console.error("Failed to parse link JSON:",s.link,i),null}}).filter(s=>s!==null).filter((s,i,o)=>s!==t&&o.indexOf(s)===i)}async function W1(e,t,n=new Set,r){if(!e)return 0;if(n.has(e))return console.warn(`[SKIP] Book ${e} is already in the download chain. Skipping.`),0;const s=await th(e);if(!s||!s.isFullBookDownloadable)return console.warn(`[SKIP] Book ${e} is not configured as full-book downloadable. Skipping.`),0;if(await M1(e))return console.log(`[SKIP] Book ${e} is already fully downloaded (from Dexie check). Skipping.`),0;n.add(e),console.log(`[DOWNLOAD START] Initiating bulk download for book ID: ${e}`);const i=new URL(pr);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getentirebookasjson"),i.searchParams.append("book",e),i.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`[FETCH] URL for ${e}: ${i.toString()}`);try{const o=await fetch(i.toString());if(!o.ok){let c={};try{c=await o.json()}catch{c={message:"No detailed error message, raw response status error."}}throw new Error(`Failed to fetch content for book ${e}: ${o.status} - ${JSON.stringify(c)}`)}const a=await o.json(),{songIndices:l,songDetails:u}=a;return!u||u.length===0?(console.log(`[DOWNLOAD] No song details found for book: ${e}. Returning 0.`),0):(await CD(u),await TD(l),console.log(`[DOWNLOAD SUCCESS] Data for ${e} saved to IndexedDB. Songs downloaded: ${u.length}`),console.log(`[RECURSION CHECK] Checking for linked books in ${e}...`),await HD(e,t,n,l,W1),u.length)}catch(o){throw console.error(`[DOWNLOAD ERROR] Failed during processing for ${e}:`,o),o}finally{console.log(`[DOWNLOAD END] Finished processing book ID: ${e}.`)}}const H1=(e,t)=>{const n=Nh(),[r,s]=S.useState({status:"idle",downloadedCount:null,error:null}),i=S.useCallback(async()=>{if(r.status!=="loading"){s({status:"loading",downloadedCount:null,error:null});try{const o=await W1(e,t);return console.log("Bulk download successful. Invalidating React Query cache..."),await n.invalidateQueries({queryKey:GR(e)}),await n.invalidateQueries({queryKey:qR}),console.log("Cache invalidated and refetched successfully."),s({status:"success",downloadedCount:o,error:null}),o}catch(o){const a=o.message||"Bulk download failed.";return s({status:"error",downloadedCount:null,error:a}),0}}},[e,t,r.status,n]);return{...r,startBulkDownload:i,isDownloading:r.status==="loading"}},q1=We.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:s,isEffectivelyOffline:i,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:h,handleDeleteIndexClick:f,handleDeleteBookClick:p,DownloadNotAvailableIcon:w,DownloadIndexIcon:g,DownloadedIcon:x,DownloadBookIcon:y,DeleteIndexIcon:v,DeleteBookIcon:_}=e,{status:C,isDownloading:R,startBulkDownload:O}=H1(t.bookId,s),I=a(t.bookId),D=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,$=n.downloadedSongs||0,F=n.totalSongs||t.songCount||0,he=Math.max(Number(F),$),N=he>0?Math.floor($/he*100):0,J=r[t.bookId]??!1,j=$===he&&he>0,Q=t.isFullBookDownloadable;return b.jsx("li",{onClick:we=>u(we,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:b.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[b.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[b.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),b.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${N}%`}}),b.jsx("span",{className:`relative z-20 px-2 ${N>25,"text-black-900"}`,children:I?b.jsxs("span",{className:"font-bold",children:[b.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),b.jsxs("span",{className:"text-green-700",children:["Downloading... (",D," remaining)"]})]}):b.jsx("span",{className:"text-black-900",children:t.bookName})})]}),b.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[b.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:b.jsxs("span",{children:["(",$,"/",he," downloaded)"]})}),b.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:J?b.jsxs("span",{className:"flex items-center text-green-500",children:[x," ",b.jsx("span",{className:"ml-1",children:"Index"})]}):b.jsx("button",{onClick:we=>{we.stopPropagation(),c(we,t.bookId)},disabled:i||o||a(t.bookId)||J,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":b.jsxs(b.Fragment,{children:[g," ",b.jsx("span",{className:"ml-1",children:"Index"})]})})}),b.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:j?b.jsxs("span",{className:"flex items-center text-green-500",children:[x," ",b.jsx("span",{className:"ml-1",children:"Book"})]}):b.jsx(b.Fragment,{children:Q?b.jsx("button",{onClick:we=>{we.stopPropagation(),O()},disabled:i||o||a(t.bookId),className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:b.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[y," ",R?"Downloading (Fast)...":C==="success"?"Downloaded ":"Book"]})}):b.jsxs("span",{className:"flex items-center text-red-500 cursor-help",title:"Bulk download is restricted for this book.",children:[w,b.jsx("span",{className:"ml-1 text-sm font-medium",children:"Not Available"})]})})}),b.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[b.jsxs("button",{onClick:we=>{we.stopPropagation(),f(we,t.bookId)},disabled:!J,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[v," ",b.jsx("span",{className:"ml-1",children:"Index"})]}),b.jsxs("button",{onClick:we=>{we.stopPropagation(),p(we,t.bookId)},disabled:a(t.bookId)||N===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[_," ",b.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});q1.displayName="BookListItem";const GD=3;function QD(e,t){return t?t.filter(n=>n.type==="link"&&n.link).map(n=>{try{return JSON.parse(n.link).bookId}catch(r){return console.error("Error parsing link in song index:",r),null}}).filter(n=>n!==null&&n!==e).filter((n,r,s)=>s.indexOf(n)===r):[]}async function G1(e,t){if(t.has(e)){console.log(`[DELETION SKIP] Already processed ${e}.`);return}t.add(e),console.log(`[DELETION START] Analyzing dependencies for book: ${e}`);const n=await Lh(e),r=QD(e,n);if(r.length>0){console.log(`[RECURSION CHECK] Book ${e} links to ${r.length} unique books.`);const o=r,l=(await Promise.all(o.map(async u=>{const c=await th(u);return{id:u,type:c&&c.Type?c.Type:"mini-book"}}))).filter(u=>u.type==="mini-book").map(u=>u.id);if(l.length>0){const u=l.filter(c=>!t.has(c)).map(c=>()=>G1(c,t));u.length>0&&(console.log(`[BATCH EXECUTION] Queuing ${u.length} *mini-book* dependency deletions.`),await K1(u,GD),console.log(`[RECURSION COMPLETE] All mini-book dependencies for ${e} have been processed.`))}}const s=await th(e);(s&&s.Type?s.Type:"book")==="mini-book"?(await $1(e),console.log(`[DELETION SUCCESS] Successfully deleted mini-book ${e} and its dependencies.`)):console.log(`[CLEANUP COMPLETE] Book ${e} is type 'Book'. Only dependencies were deleted.`)}function YD(e,t){const n=S.useMemo(()=>((e==null?void 0:e.books)??[]).filter(a=>a.Type==="book"),[e==null?void 0:e.books]),[r,s]=S.useState(n);return S.useEffect(()=>{if(!t){s(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await Ka(u.bookId)})))).filter(u=>u.isCached);s(l)})()},[n,t]),S.useMemo(()=>t?r:n,[t,n,r])}function vb({mode:e="read"}){var q,ue;const{categoryId:t}=xo(),n=Vn(),{categories:r,isLoading:s,isFetching:i,error:o}=Mh(),{isEffectivelyOffline:a}=ev(),l=S.useMemo(()=>{if(r&&t)return r.find(se=>se.id===t)},[r,t]),u=YD(l,a),{downloadAllSongsForBook:c,isDownloadingBook:h,isAnyBookDownloading:f}=KD(),[p,w]=S.useState(null),[g,x]=S.useState(!1),[y,v]=S.useState({});Nh();const{preferredLanguage:_}=Ts(),{downloadStatus:C,isLoaded:R,updateDownloadProgress:O,updateDownloadedCount:I}=tv(),{session:D}=Cs(),$=(q=D==null?void 0:D.user)==null?void 0:q.email;S.useEffect(()=>{if(!u||u.length===0){v({});return}(async()=>{const ye=u.map(Le=>Ka(Le.bookId)),Ee=await Promise.all(ye),ae={};u.forEach((Le,Be)=>{ae[Le.bookId]=Ee[Be]}),v(ae)})()},[u]);const F=S.useCallback(async(se,ye)=>{let ae;for(let Le=0;Le<1;Le++)try{const Be=new URL(pr);Be.searchParams.append("mode","api"),Be.searchParams.append("apiname","getsongsforbook"),Be.searchParams.append("book",se),Be.searchParams.append("sessionuser",ye??"dummyfornow");const Me=await fetch(Be.toString());if(!Me.ok){const me=await Me.text();throw new Error(`Fetch failed (Status: ${Me.status}). Body: ${me}`)}const P=(await Me.json()).map(me=>({...me,sourceRow:typeof me.sourceRow=="string"?parseInt(me.sourceRow,10):me.sourceRow,tags:me.tags||null}));return await Jy(se,P),P}catch(Be){if(ae=Be,Le<0){const Me=Math.pow(2,Le)*1e3;console.log(`Retrying fetch in ${Me}ms...`),await new Promise(dt=>setTimeout(dt,Me))}}throw ae},[]),he=S.useCallback(async(se,ye)=>{se.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] Confirm deletion of book index [${ye}]. Proceeding with deletion assuming user confirmed.`),await kD(ye),v(Ee=>({...Ee,[ye]:!1})),O(ye,0),I(ye,0)},[O,I]),N=S.useCallback(async(se,ye)=>{se.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] WARNING: This will permanently delete the ENTIRE book "${ye}". Proceeding with deletion assuming user confirmed.`);const Ee=new Set;try{await G1(ye,Ee),await $1(ye),O(ye,0),I(ye,0)}catch(ae){console.error(`Failed to delete book ${ye} recursively:`,ae)}},[O,I]),J=S.useCallback((se,ye)=>{console.log(`categoryId:${t}, bookId:${ye}`),se.stopPropagation(),n(e==="proofreading"?`/proofreading/book/${t}/${ye}`:`/book/${t}/${ye}`)},[t,n,e]),j=async()=>{var ye;x(!0);const se=(ye=D==null?void 0:D.user)==null?void 0:ye.email;try{for(const ae of u)console.log(`Downloading index for book: ${ae.bookId}`),await F(ae.bookId,se);console.log("All song indices downloaded successfully.");const Ee=u.reduce((ae,Le)=>(ae[Le.bookId]=!0,ae),{});v(Ee)}catch(Ee){console.error("Failed to download all indices:",Ee),v({})}finally{x(!1)}},Q=S.useCallback(async(se,ye)=>{var ae;se.stopPropagation(),w(ye);const Ee=(ae=D==null?void 0:D.user)==null?void 0:ae.email;try{await F(ye,Ee),console.log(`Index for Book ${ye} downloaded successfully and cached.`),v(Le=>({...Le,[ye]:!0}))}catch(Le){console.error(`Failed to download index for Book ${ye}:`,Le),v(Be=>({...Be,[ye]:!1}))}finally{w(null)}},[(ue=D==null?void 0:D.user)==null?void 0:ue.email,F]),we=S.useCallback((se,ye,Ee)=>{se.stopPropagation(),c(ye,$)},[c,$]),z=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),[]),W=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),[]),K=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),[]),de=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]}),[]),H=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),[]),G=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),[]),ve=S.useMemo(()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[b.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]}),[]);return s||i?b.jsx("div",{children:"Loading books..."}):o instanceof Error?b.jsxs("div",{children:["Error loading books: ",o.message]}):R?b.jsxs(b.Fragment,{children:[b.jsx(nv,{}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:e==="proofreading"?"Proof Reading - Select Book":`Books in ${(l==null?void 0:l.name)||"Category"}`}),u.length>0?b.jsx("ul",{className:"list-none p-0 space-y-3",children:u.map(se=>b.jsx(q1,{book:se,status:C[se.bookId]||{},indexDownloadStatus:y,userEmail:$??null,isEffectivelyOffline:a,isAnyBookDownloading:f,isDownloadingBook:h,isDownloadingBookIndex:p,handleBookClick:J,handleDownloadBookIndexClick:Q,handleDownloadBookClick:we,handleDeleteIndexClick:he,handleDeleteBookClick:N,DownloadNotAvailableIcon:de,DownloadIndexIcon:z,DownloadedIcon:H,DownloadBookIcon:K,DeleteIndexIcon:ve,DeleteBookIcon:G},se.bookId))}):b.jsx("div",{className:"text-center py-10 text-gray-500 bg-white rounded-lg shadow-md",children:a?"No cached books found. Connect to the internet to download content.":"No books found in this category."})]}),b.jsx("div",{className:"mt-6 flex justify-end",children:b.jsxs("button",{onClick:j,disabled:g,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 flex items-center justify-center space-x-2 shadow-md ${g?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[g?b.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):W,b.jsx("span",{children:g?"Downloading All Indices...":"Download All Indices"})]})})]}):b.jsx("div",{className:"flex justify-center items-center h-40",children:b.jsx("p",{children:"Loading download status..."})})}var ag={exports:{}};(function(e,t){function n(p){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},n(p)}function r(p,w){var g=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!g){if(Array.isArray(p)||(g=o(p))||w){g&&(p=g);var x=0,y=function(){};return{s:y,n:function(){return x>=p.length?{done:!0}:{done:!1,value:p[x++]}},e:function(O){throw O},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,_=!1,C;return{s:function(){g=g.call(p)},n:function(){var O=g.next();return v=O.done,O},e:function(O){_=!0,C=O},f:function(){try{!v&&g.return!=null&&g.return()}finally{if(_)throw C}}}}function s(p,w){return u(p)||l(p,w)||o(p,w)||i()}function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(p,w){if(p){if(typeof p=="string")return a(p,w);var g=Object.prototype.toString.call(p).slice(8,-1);if(g==="Object"&&p.constructor&&(g=p.constructor.name),g==="Map"||g==="Set")return Array.from(p);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return a(p,w)}}function a(p,w){(w==null||w>p.length)&&(w=p.length);for(var g=0,x=new Array(w);g<w;g++)x[g]=p[g];return x}function l(p,w){var g=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(g!=null){var x,y,v,_,C=[],R=!0,O=!1;try{if(v=(g=g.call(p)).next,w!==0)for(;!(R=(x=v.call(g)).done)&&(C.push(x.value),C.length!==w);R=!0);}catch(I){O=!0,y=I}finally{try{if(!R&&g.return!=null&&(_=g.return(),Object(_)!==_))return}finally{if(O)throw y}}return C}}function u(p){if(Array.isArray(p))return p}var c={};c.ahom={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.assamese={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.balinese={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.bengali={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.bhaiksuki={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.brahmi={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.brahmi_tamil={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"'","":".","":".."},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.burmese={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.cham={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.devanagari={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":"","":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},zwnj:{"":""},skip:{undefined:""},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},alternates:{:[""],:[""],:[""],:[""],:[""],:[""],:[""],:[""],:[""],:[""],:[""]}},c.dogra={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.gondi_gunjala={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":".","":".."},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.gondi_masaram={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.grantha={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.grantha_pandya={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.gujarati={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.gurmukhi={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},alternates:{"":[""]},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},accents:{"":"","":""}},c.javanese={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.kannada={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},alternates:{"":[""]}},c.khamti_shan={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.kharoshthi={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.khmer={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.khom_thai={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.khudawadi={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.lao={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.lao_pali={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.lepcha={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.limbu={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.malayalam={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.manipuri={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.marchen={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.modi={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.mon={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""}},c.mro={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.newa={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.ol_chiki={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.oriya={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.phags_pa={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"","":"","":""},candra:{"":""}},c.ranjana={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.rohingya={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""}},c.shan={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.sharada={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.siddham={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.sinhala={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"()","":".","":".."},candra:{"":""}},c.sora_sompeng={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":".","":".."},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.tai_laing={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.takri={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.tamil={vowels:{:"",:"",:"",:"",:"",:"",:"'",:"'",:"'",:"'",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"'","":"'","":"'","":"'","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},extra_consonants:{:"'",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.tamil_extended={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.tamil_superscripted={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"()","":".","":".."},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.telugu={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.thai={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.tibetan={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.tirhuta_maithili={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.urdu={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.vattelutu={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"","":".","":".."},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.wancho={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":".","":".."},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.warang_citi={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"'","":".","":".."},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.zanbazar_square={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""}},c.avestan={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vowel_marks:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""},isRomanScheme:!0},c.baraha={_vowel_comment:["omissions  from optitrans_dravidian","ea","oa"],_yogavaahas_comment:["omissions  from optitrans_dravidian","kH","pH"],vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"Ru",:"RU",:"~lu",:"~lU",:"e",:"E",:"ai",:"o",:"O",:"au",:"",:""},yogavaahas:{"":"M","":"H","":"~M","":"","":"","":"(gg)"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"~g",:"ch",:"Ch",:"j",:"jh",:"~j",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"sh",:"Sh",:"s",:"h",:"L",:"kSh",:"j~ja"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:"&","":"|","":"||"},candra:{"":"~M"},zwj:{"":"^"},zwnj:{"":"^^"},skip:{undefined:"_"},accents:{"":"#","":"q","":"Q","":"V","":"W","":"$"},alternates:{A:["aa"],I:["ee"],U:["oo"],kh:["K"],gh:["G"],ch:["c"],Ch:["C"],jh:["J"],ph:["P"],bh:["B"],"~n":["JN"],v:["w"],sh:["S"],h:["~h"],V:["x"],"|":["."],"||":[".."]},isRomanScheme:!0},c.cyrillic={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},yogavaahas:{"":"","":"","":""},virama:{"":""},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"'","":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""},isRomanScheme:!0},c.hk={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"R",:"RR",:"lR",:"lRR",:"",:"e",:"ai",:"",:"o",:"au"},yogavaahas:{"":"M","":"H","":"~"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"G",:"c",:"ch",:"j",:"jh",:"J",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"z",:"S",:"s",:"h",:"L",:"kS",:"jJ"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:"'","":"|","":"||"},extra_consonants:{:"q",:"qh",:"g2",:"z2",:"r3",:"r3h",:"f",:"Y",:"r2",:"zh",:"n2"},isRomanScheme:!0},c.hk_dravidian={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"R",:"RR",:"lR",:"lRR",:"e",:"E",:"ai",:"o",:"O",:"au"},yogavaahas:{"":"M","":"H","":"~"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"G",:"c",:"ch",:"j",:"jh",:"J",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"z",:"S",:"s",:"h",:"L",:"kS",:"jJ"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:"'","":"|","":"||"},extra_consonants:{:"q",:"qh",:"g2",:"z2",:"r3",:"r3h",:"f",:"Y",:"r2",:"zh",:"n2"},isRomanScheme:!0},c.iast={vowels:{:"a",:"",:"i",:"",:"u",:"",:"",:"",:"",:"",:"",:"e",:"ai",:"",:"o",:"au"},yogavaahas:{"":"","":"","":"~","":"m"},virama:{"":""},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},consonants:{:"k",:"kh",:"g",:"gh",:"",:"c",:"ch",:"j",:"jh",:"",:"",:"h",:"",:"h",:"",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"",:"",:"s",:"h",:"l",:"k",:"j"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"o",:"'","":"|","":"||"},extra_consonants:{:"q",:"kh",:"",:"z",:"r",:"rh",:"f",:"",:"",:"",:""},alternates:{"|":[".","/"],"||":["..","//"],"'":["`"],m:["m",""],:["m"],:["h"],:["t"],h:["th"],:["d"],h:["dh"],:["n"],:["s"],:["n"],:["n"],:["r","r"],:["","r","r","r","r"],"":[""]},accented_vowel_alternates:{a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],:["r","r"]},isRomanScheme:!0},c.iast_iso_m={vowels:{:"a",:"",:"i",:"",:"u",:"",:"",:"",:"",:"",:"",:"e",:"ai",:"",:"o",:"au"},yogavaahas:{"":"","":"","":"~","":"m"},virama:{"":""},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},consonants:{:"k",:"kh",:"g",:"gh",:"",:"c",:"ch",:"j",:"jh",:"",:"",:"h",:"",:"h",:"",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"",:"",:"s",:"h",:"l",:"k",:"j"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"o",:"'","":"|","":"||"},extra_consonants:{:"q",:"kh",:"",:"z",:"r",:"rh",:"f",:"",:"",:"",:""},alternates:{"|":[".","/"],"||":["..","//"],"'":["`"],:["m","m",""],:["h"],:["t"],h:["th"],:["d"],h:["dh"],:["n"],:["s"],:["n"],:["n"],:["r","r"],:["","r","r","r","r"],"":[""]},accented_vowel_alternates:{a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],:["r","r"]},isRomanScheme:!0},c.iso={vowels:{:"a",:"",:"i",:"",:"u",:"",:"r",:"r",:"l",:"l",:"e",:"",:"ai",:"o",:"",:"au",:"",:""},yogavaahas:{"":"","":"","":"",:"","":"m"},virama:{"":""},zwj:{"":"{}"},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},consonants:{:"k",:"kh",:"g",:"gh",:"",:"c",:"ch",:"j",:"jh",:"",:"",:"h",:"",:"h",:"",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"",:"",:"s",:"h",:"",:"k",:"j"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"'","":"","":""},extra_consonants:{:"q",:"kh",:"",:"z",:"",:"h",:"f",:"",:"",:"",:"",:"r",:"s",:"s",:"h",:"t",:"",:"",:"h",:"",:"",:"",:"w"},accented_vowel_alternates:{a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],r:["","r"],r:["","","r","r","r","r","r"],a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],r:["r"],r:["r","r","r","r","r"]},alternates:{"|":[".","/"],"||":["..","//"],"'":["`"],m:["m"],:["","r","r","r","r"],:["m"],:["h"],:["t"],h:["th"],:["d"],h:["dh"],:["n"],:["n"],:["n"],:["s"],:["r"],h:["rh"],"kh":["","h"],q:[""],w:[""],:["g"],"":[""],r:["ri"]},isRomanScheme:!0},c.iso_vedic={vowels:{:"a",:"",:"i",:"",:"u",:"",:"r",:"r",:"l",:"l",:"e",:"ai",:"i",:"o",:"au",:"u",:"",:""},yogavaahas:{"":"","":"","":"",:"","":"m"},virama:{"":""},zwj:{"":"{}"},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},consonants:{:"k",:"kh",:"g",:"gh",:"",:"c",:"ch",:"j",:"jh",:"",:"",:"h",:"",:"h",:"",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"",:"",:"s",:"h",:"",:"k",:"j"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"'","":"","":""},extra_consonants:{:"q",:"kh",:"",:"z",:"",:"h",:"f",:"",:"",:"",:"",:"r",:"s",:"s",:"h",:"t",:"",:"",:"h",:"",:"",:"",:"w"},accented_vowel_alternates:{a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],r:["","r"],r:["","","r","r","r","r","r"],a:[""],i:[""],ai:["a"],i:[""],u:[""],au:["a"],u:[""],r:["r"],r:["r","r","r","r","r"]},alternates:{"|":[".","/"],"||":["..","//"],"'":["`"],m:["m"],:["","r","r","r","r"],:["m"],:["h"],:["t"],h:["th"],:["d"],h:["dh"],:["n"],:["n"],:["n"],:["s"],:["r"],h:["rh"],"kh":["","h"],q:[""],w:[""],:["g"],"":[""],r:["ri"]},isRomanScheme:!0},c.itrans={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"RRi",:"RRI",:"LLi",:"LLI",:"",:"e",:"ai",:"",:"o",:"au"},yogavaahas:{"":"M","":"H","":".N"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"~N",:"ch",:"Ch",:"j",:"jh",:"~n",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"sh",:"Sh",:"s",:"h",:"L",:"kSh",:"j~n"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:".a","":"|","":"||"},candra:{"":".c"},zwj:{"":"{}"},skip:{undefined:"_"},accents:{"":"\\'","":"\\_"},extra_consonants:{:"q",:"K",:"G",:"z",:".D",:".Dh",:"f",:"Y",:"R",:"zh"},alternates:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":["\\_.m","\\_.n","\\`M","\\`.m","\\`.n"],".a":["~"],"|":["."],"||":[".."],z:["J"]},isRomanScheme:!0},c.itrans_dravidian={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"RRi",:"RRI",:"LLi",:"LLI",:"e",:"E",:"ai",:"o",:"O",:"au"},yogavaahas:{"":"M","":"H","":".N"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"~N",:"ch",:"Ch",:"j",:"jh",:"~n",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"sh",:"Sh",:"s",:"h",:"L",:"kSh",:"j~n"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:".a","":"|","":"||"},candra:{"":".c"},zwj:{"":"{}"},skip:{undefined:"_"},accents:{"":"\\'","":"\\_"},extra_consonants:{:"q",:"K",:"G",:"z",:".D",:".Dh",:"f",:"Y",:"R",:"zh",:"n2"},alternates:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":["\\_.m","\\_.n","\\`M","\\`.m","\\`.n"],".a":["~"],"|":["."],"||":[".."],z:["J"]},isRomanScheme:!0},c.itrans_lowercase={vowels:{:"a",:"aa",:"i",:"ii",:"u",:"uu",:"RRi",:"RRI",:"LLi",:"LLI",:"",:"e",:"ai",:"",:"o",:"au"},yogavaahas:{"":"M","":"H","":".N"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"~N",:"ch",:"Ch",:"j",:"jh",:"~n",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"sh",:"Sh",:"s",:"h",:"L",:"kSh",:"GY"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:".a","":"|","":"||"},candra:{"":".c"},zwj:{"":"{}"},skip:{undefined:"_"},accents:{"":"\\'","":"\\_"},extra_consonants:{:"q",:"K",:"G",:"z",:".D",:".Dh",:"f",:"Y",:"R",:"zh"},alternates:{A:["A"],I:["I","ee"],U:["U","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],GY:["j~n","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":["\\_.m","\\_.n","\\`M","\\`.m","\\`.n"],".a":["~"],"|":["."],"||":[".."],z:["J"]},isRomanScheme:!0},c.kolkata_v2={vowels:{:"a",:"",:"i",:"",:"u",:"",:"",:"",:"",:"",:"e",:"",:"ai",:"o",:"",:"au"},yogavaahas:{"":"","":"","":"~"},virama:{"":""},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},consonants:{:"k",:"kh",:"g",:"gh",:"",:"c",:"ch",:"j",:"jh",:"",:"",:"h",:"",:"h",:"",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"",:"",:"s",:"h",:"l",:"k",:"j"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"",:"'","":"|","":"||"},extra_consonants:{:"q",:"kh",:"",:"z",:"r",:"rh",:"f",:"",:"",:"",:""},alternates:{"|":[".","/"],"||":["..","//"],"'":["`"],m:["m"],:["m"],:["h"],:["t"],h:["th"],:["d"],h:["dh"],:["n"],:["n"],:["n"],:["s"],:["r","r"],:["","r","r","r","r"],"":[""]},accented_vowel_alternates:{a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],:["r","r"]},isRomanScheme:!0},c.mahajani={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},zwj:{"":""},skip:{undefined:""},accents:{"":"","":""},candra:{"":""},extra_consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:""},isRomanScheme:!0},c.multani={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},yogavaahas:{"":"","":"","":""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},isRomanScheme:!0},c.optitrans={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"R",:"RR",:"LLi",:"LLI",:"E",:"e",:"ai",:"O",:"o",:"au",:"ea",:"oa"},yogavaahas:{"":"M","":"H","":".N","":"kH","":"pH"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"~N",:"ch",:"Ch",:"j",:"jh",:"~n",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"sh",:"Sh",:"s",:"h",:"L",:"x",:"jn"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:".a","":"|","":"||"},candra:{"":".c"},zwj:{"":"{}"},skip:{undefined:"_"},accents:{"":"\\'","":"\\_"},extra_consonants:{:"q",:".kh",:".g",:"z",:".D",:".Dh",:"f",:"Y",:".Rh",:".L"},alternates:{A:["aa"],I:["ii","ee"],U:["uu"],R:["RRi","R^i"],RR:["RRI","R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],ch:["c"],Ch:["C"],jh:["J"],ph:["P"],bh:["B"],"~n":["JN"],v:["w"],Sh:["S"],x:["kS","ksh"],jn:["GY","dny"],"|":["."],"||":[".."],z:["J"]},shortcuts:{"~nc":"nc","~nC":"nC","~nj":"nj","~nJ":"nJ","~Nk":"nk","~NK":"nK","~Ng":"ng","~NG":"nG","~Nx":"nx"},isRomanScheme:!0},c.optitrans_dravidian={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"R",:"RR",:"LLi",:"LLI",:"e",:"E",:"ai",:"o",:"O",:"au",:"ea",:"oa"},yogavaahas:{"":"M","":"H","":".N","":"kH","":"pH"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:"~N",:"ch",:"Ch",:"j",:"jh",:"~n",:"T",:"Th",:"D",:"Dh",:"N",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:"sh",:"Sh",:"s",:"h",:"L",:"x",:"jn"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"OM",:".a","":"|","":"||"},candra:{"":".c"},zwj:{"":"{}"},skip:{undefined:"_"},accents:{"":"\\'","":"\\_"},extra_consonants:{:".k",:"q",:".g",:"z",:".D",:".Dh",:"f",:"Y",:".Rh",:".L",:"n2"},alternates:{A:["aa"],I:["ii","ee"],U:["uu"],R:["RRi","R^i"],RR:["RRI","R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],ch:["c"],Ch:["C"],jh:["J"],ph:["P"],bh:["B"],"~n":["JN"],v:["w"],Sh:["S"],x:["kS","ksh"],jn:["GY","dny"],"|":["."],"||":[".."],z:["J"]},shortcuts:{"~nc":"nc","~nC":"nC","~nj":"nj","~nJ":"nJ","~Nk":"nk","~NK":"nK","~Ng":"ng","~NG":"nG","~Nx":"nx"},isRomanScheme:!0},c.persian_old={vowels:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},virama:{"":""},consonants:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},symbols:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"","":"","":""},candra:{"":""},isRomanScheme:!0},c.slp1={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"f",:"F",:"x",:"X",:"",:"e",:"E",:"",:"o",:"O"},yogavaahas:{"":"M","":"H","":"~"},virama:{"":""},consonants:{:"k",:"K",:"g",:"G",:"N",:"c",:"C",:"j",:"J",:"Y",:"w",:"W",:"q",:"Q",:"R",:"t",:"T",:"d",:"D",:"n",:"p",:"P",:"b",:"B",:"m",:"y",:"r",:"l",:"v",:"S",:"z",:"s",:"h",:"L",:"kz",:"jY"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"AUM",:"'","":".","":".."},extra_consonants:{:"k0",:"K0",:"g0",:"j0",:"q0",:"Q0",:"P0",:"Y0",:"r2",:"L0",:"n0"},shortcuts:{Lh:"|"},isRomanScheme:!0},c.slp1_accented={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"f",:"F",:"x",:"X",:"",:"e",:"E",:"",:"o",:"O"},yogavaahas:{"":"M","":"H","":"~","":"M"},virama:{"":""},consonants:{:"k",:"K",:"g",:"G",:"N",:"c",:"C",:"j",:"J",:"Y",:"w",:"W",:"q",:"Q",:"R",:"t",:"T",:"d",:"D",:"n",:"p",:"P",:"b",:"B",:"m",:"y",:"r",:"l",:"v",:"S",:"z",:"s",:"h",:"L",:"kz",:"jY"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"AUM",:"'","":".","":".."},accents:{"":"","":"\\","":"^","":"/","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},extra_consonants:{:"k0",:"K0",:"g0",:"j0",:"q0",:"Q0",:"P0",:"Y0",:"r2",:"L0"},shortcuts:{Lh:"|"},isRomanScheme:!0},c.titus={vowels:{:"a",:"",:"i",:"",:"u",:"",:"r",:"r",:"l",:"l",:"",:"e",:"ai",:"",:"o",:"au",:"",:""},yogavaahas:{"":"","":"","":"m"},virama:{"":""},consonants:{:"k",:"k",:"g",:"g",:"",:"c",:"c",:"j",:"j",:"",:"",:"",:"",:"",:"",:"t",:"t",:"d",:"d",:"n",:"p",:"p",:"b",:"b",:"m",:"y",:"r",:"l",:"v",:"",:"",:"s",:"h",:"",:"k",:"j"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"o",:"'","":".","":".."},zwj:{"":""},skip:{undefined:""},candra:{"":""},extra_consonants:{:"q",:"k",:"",:"z",:"",:"",:"f",:"",:"",:""},accents:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},accented_vowel_alternates:{a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],r:["","r"],r:["","","r","r","r","r","r"],a:[""],e:[""],i:[""],ai:["a"],o:[""],u:[""],au:["a"],r:["r"],r:["r","r","r","r","r"]},alternates:{m:["m"],o:[""],r:["r"],".":["|","/"],"..":["||","//"]},isRomanScheme:!0},c.velthuis={vowels:{:"a",:"aa",:"i",:"ii",:"u",:"uu",:".r",:".rr",:".l",:".ll",:"",:"e",:"ai",:"",:"o",:"au"},yogavaahas:{"":".m","":".h","":"~m"},virama:{"":""},consonants:{:"k",:"kh",:"g",:"gh",:'"n',:"c",:"ch",:"j",:"jh",:"~n",:".t",:".th",:".d",:".dh",:".n",:"t",:"th",:"d",:"dh",:"n",:"p",:"ph",:"b",:"bh",:"m",:"y",:"r",:"l",:"v",:'"s',:".s",:"s",:"h",:"L",:"k.s",:"j~n"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"O",:".a","":"|","":"||"},isRomanScheme:!0},c.wx={vowels:{:"a",:"A",:"i",:"I",:"u",:"U",:"q",:"Q",:"L",:"",:"",:"e",:"E",:"",:"o",:"O"},yogavaahas:{"":"M","":"H","":"z"},virama:{"":""},consonants:{:"k",:"K",:"g",:"G",:"f",:"c",:"C",:"j",:"J",:"F",:"t",:"T",:"d",:"D",:"N",:"w",:"W",:"x",:"X",:"n",:"p",:"P",:"b",:"B",:"m",:"y",:"r",:"l",:"v",:"S",:"R",:"s",:"h",:"l",:"kR",:"jF"},symbols:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",:"oM",:"'","":".","":".."},isRomanScheme:!0};var h={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function f(p,w,g){var x={};x.defaults={skip_sgml:!1,syncope:!1,preferred_alternates:{}};var y={SCHEMES:[["Bengali",2432],["Devanagari",2304],["Gujarati",2688],["Gurmukhi",2560],["Kannada",3200],["Malayalam",3328],["Oriya",2816],["Tamil",2944],["Telugu",3072],["HK",null],["IAST",null],["ITRANS",null],["Kolkata",null],["SLP1",null],["Velthuis",null]],BRAHMIC_FIRST_CODE_POINT:2304,BRAHMIC_LAST_CODE_POINT:3455,RE_IAST_OR_KOLKATA_ONLY:/[]/,RE_ITRANS_OR_VELTHUIS_ONLY:/aa|ii|uu|~n/,RE_ITRANS_ONLY:/ee|oo|\^[iI]|RR[iI]|L[iI]|~N|N\^|Ch|chh|JN|sh|Sh|\.a/,RE_KOLKATA_ONLY:/[]/,RE_SLP1_ONLY:RegExp(["[fFxXEOCYwWqQPB]|kz|Nk|Ng|tT|dD|Sc|Sn|","[aAiIuUfFxXeEoO]R|","G[yr]|(\\W|^)G"].join("")),RE_VELTHUIS_ONLY:/\.[mhnrlntds]|"n|~s/};x.detect=function(O){for(var I={},D=0;D<y.SCHEMES.length;D++){var $=y.SCHEMES[D][0];I[$]=$}for(var F=y.SCHEMES.filter(function(we){return we[1]}).sort(function(we,z){return z[1]-we[1]}),he=0;he<O.length;he++){var N=O[he],J=N.charCodeAt(N);if(J>=y.BRAHMIC_FIRST_CODE_POINT&&J<=y.BRAHMIC_LAST_CODE_POINT)for(var j=0;j<F.length;j++){var Q=F[j];if(J>=Q[1])return Q[0]}}return y.RE_IAST_OR_KOLKATA_ONLY.test(O)?y.RE_KOLKATA_ONLY.test(O)?I.Kolkata:I.IAST:y.RE_ITRANS_ONLY.test(O)?I.ITRANS:y.RE_SLP1_ONLY.test(O)?I.SLP1:y.RE_VELTHUIS_ONLY.test(O)?I.Velthuis:y.RE_ITRANS_OR_VELTHUIS_ONLY.test(O)?I.ITRANS:I.HK},x.schemes=w;var v={};x.addBrahmicScheme=function(O,I){x.schemes[O]=I},x.addRomanScheme=function(O,I){if(!("vowel_marks"in I)){I.vowel_marks={};for(var D=0,$=Object.entries(I.vowels);D<$.length;D++){var F=s($[D],2),he=F[0],N=F[1];he!=""&&(I.vowel_marks[g[he]]=N)}}x.schemes[O]=I},function(){var O=function(j){return j.charAt(0).toUpperCase()+j.substring(1,j.length)},I=function(j,Q){var we=r(j),z;try{for(we.s();!(z=we.n()).done;){var W=z.value,K=Q[W]||[],de=K;de=de.concat(O(W));var H=r(K),G;try{for(H.s();!(G=H.n()).done;){var ve=G.value;de=de.concat(O(ve))}}catch(q){H.e(q)}finally{H.f()}Q[W]=de}}catch(q){we.e(q)}finally{we.f()}};I(Object.values(w.iast.vowels),w.iast.alternates),I(Object.values(w.iast.consonants),w.iast.alternates),I(Object.values(w.iast.extra_consonants),w.iast.alternates),I(["o"],w.iast.alternates),I(Object.values(w.kolkata_v2.vowels),w.kolkata_v2.alternates),I(Object.values(w.kolkata_v2.consonants),w.kolkata_v2.alternates),I(Object.values(w.kolkata_v2.extra_consonants),w.kolkata_v2.alternates),I(Object.values(w.iso.vowels),w.iso.alternates),I(Object.values(w.iso.consonants),w.iso.alternates),I(Object.values(w.iso.extra_consonants),w.iso.alternates),I([""],w.iso.alternates);for(var D=0,$=Object.entries(w);D<$.length;D++){var F=s($[D],2),he=F[0],N=F[1];N.isRomanScheme&&x.addRomanScheme(he,N)}}();var _=function(I,D,$){var F={},he=x.schemes[I],N={},J=[],j={},Q={},we=x.schemes[D],z=he.alternates||{};for(var W in he)if({}.hasOwnProperty.call(he,W)&&!["alternates","accented_vowel_alternates","isRomanScheme"].includes(W)){var K=he[W],de=we[W];if(de!==void 0)for(var H=0,G=Object.entries(K);H<G.length;H++){var ve=s(G[H],2),q=ve[0],ue=ve[1],se=de[q];if(se!==void 0){se==""&&!["virama","zwj","skip"].includes(W)&&(se=ue);var ye=z[ue]||[],Ee=ye.length,ae=0;for(J.push(ue.length),ae=0;ae<Ee;ae++)J.push(ye[ae].length);if(W==="vowel_marks"||W==="virama")for(j[ue]=se,ae=0;ae<Ee;ae++)j[ye[ae]]=se;else{for(N[ue]=se,ae=0;ae<Ee;ae++)N[ye[ae]]=se;if(W==="consonants"||W==="extra_consonants")for(F[ue]=se,ae=0;ae<Ee;ae++)F[ye[ae]]=se;if(W==="accents")for(Q[ue]=se,ae=0;ae<Ee;ae++)Q[ye[ae]]=se}}}}if(he.accented_vowel_alternates)for(var Le=0,Be=Object.keys(he.accented_vowel_alternates);Le<Be.length;Le++){var Me=Be[Le],dt=he.accented_vowel_alternates[Me],P=r(dt),me;try{for(P.s();!(me=P.n()).done;){var ge=me.value,B=Me.substring(0,Me.length-1),M=Me[Me.length-1],re=Q[M]||M;j[ge]=(j[B]||"")+re,N[B]||console.error(B,re,N),N[ge]=N[B].concat(re)}}catch(_e){P.e(_e)}finally{P.f()}}return{consonants:F,accents:Q,fromRoman:he.isRomanScheme,letters:N,marks:j,maxTokenLength:Math.max.apply(Math,J),toRoman:we.isRomanScheme,virama:we.virama[""],toSchemeA:we.vowels.,fromSchemeA:he.vowels.,from:I,to:D}},C=function(I,D,$){for(var F=[],he=D.consonants,N=I.length,J=D.letters,j=D.marks,Q=D.maxTokenLength,we=$.skip_sgml,z=$.syncope,W=D.toRoman,K=D.virama,de=!1,H,G,ve="",q=!1,ue=!1,se=!1,ye=0,Ee;(Ee=I.charAt(ye))||ve;ye++){var ae=Q-ve.length;if(!(ae>0&&ye<N&&(ve+=Ee,ae>1)))for(var Le=0;Le<Q;Le++){var Be=ve.substr(0,Q-Le);if(q===!0)q=Be!==">";else if(Be==="<")q=we;else if(Be==="##"){se=!se,ve=ve.substr(2);break}if(ue=q||se,(H=J[Be])!==void 0&&!ue){W?F.push(H):(de?(G=j[Be])?F.push(G):Be!==D.fromSchemeA&&(F.push(K),F.push(H)):F.push(H),de=Be in he),ve=ve.substr(Q-Le);break}else Le===Q-1&&(de&&(de=!1,z||F.push(K)),F.push(Be),ve=ve.substr(1))}}de&&!z&&F.push(K);var Me=F.join(""),dt=w[D.to];if(!W&&Object.keys(D.accents).length>0){var P=new RegExp("([".concat(Object.values(D.accents).join(""),"])([").concat(Object.values(dt.yogavaahas).join(""),"])"),"g");Me=Me.replace(P,"$2$1")}return Me},R=function(I,D,$){var F=[],he=D.consonants,N=D.letters,J=D.marks,j=D.toRoman,Q=!1,we=!1,z,W=!1,K=w[D.to];if(j&&Object.keys(D.accents).length>0){var de=new RegExp("([".concat(Object.values(K.yogavaahas).join(""),"])([").concat(Object.values(D.accents).join(""),"])"),"g");I=I.replace(de,"$2$1")}for(var H=0,G;G=I.charAt(H);H++){if(G==="#"){Q?(W=!W,Q=!1):Q=!0,we&&(F.push(D.toSchemeA),we=!1);continue}else if(W){F.push(G);continue}(z=J[G])!==void 0?(F.push(z),we=!1):(Q&&(F.push("#"),Q=!1),we&&(F.push(D.toSchemeA),we=!1),(z=N[G])?(F.push(z),we=j&&G in he):F.push(G))}return we&&F.push(D.toSchemeA),F.join("")};x.t=function(O,I,D,$){I||(I=x.detect(O).toLowerCase()),$=$||{};var F=v.options||{},he=x.defaults,N=v.from===I&&v.to===D,J;for(var j in he)if({}.hasOwnProperty.call(he,j)){var Q=he[j];j in $&&(Q=$[j]),$[j]=Q,Q!==F[j]&&(N=!1)}if(N?J=v.map:(J=_(I,D),v={from:I,map:J,options:$,to:D}),I==="itrans"&&(O=O.replace(/\{\\m\+\}/g,".h.N"),O=O.replace(/\.h/g,""),O=O.replace(/\\([^'`_]|$)/g,"##$1##")),I==="tamil_superscripted"){var we="(["+Object.values(w.tamil_superscripted.vowel_marks).join("")+w.tamil_superscripted.virama[""]+"]+)([])";O=O.replace(new RegExp(we,"g"),"$2$1"),console.error("transliteration from tamil_superscripted not fully implemented!")}var z=w[I].shortcuts;if(z)for(var W in z){var K=z[W];W.includes(K)&&(O=O.replace(W,K)),O=O.replace(K,W)}var de="";J.fromRoman?de=C(O,J,$):de=R(O,J);var H=w[D].shortcuts;if(H)for(var G in H){var ve=H[G];ve.includes(G)&&(de=de.replace(ve,G)),de=de.replace(G,ve)}if(D==="tamil_superscripted"){var q="([])(["+Object.values(w.tamil_superscripted.vowel_marks).join("")+w.tamil_superscripted.virama[""]+"]+)";de=de.replace(new RegExp(q,"g"),"$2$1")}if(n($.preferred_alternates[D])=="object")for(var ue=Object.keys($.preferred_alternates[D]),se=0;se<ue.length;se++)de=de.split(ue[se]).join($.preferred_alternates[D][ue[se]]);return de},x.transliterateWordwise=function(O,I,D,$){$=$||{};var F=O.split(/\s+/),he=F.map(function(N){var J=x.t(N,I,D,$);return[N,J]});return he},e.exports&&(t=x,e.exports=x),t.Sanscript=x}f(qt,c,h)})(ag,ag.exports);var JD=ag.exports;const Pl=Ou(JD),ZD=e=>{const t=e.default||e;if(!t||!t.addBrahmicScheme){console.error("Sanscript not found or addBrahmicScheme not supported");return}if(t.schemes&&t.schemes.devanagari){if(Array.isArray(t.schemes.devanagari.consonants)){const g=t.schemes.devanagari.consonants;g.indexOf("")===-1&&g.push(""),g.indexOf("")===-1&&g.push(""),g.indexOf("")===-1&&g.push("")}}else console.warn("CustomSchemes: Could not patch Devanagari scheme. S.schemes.devanagari not found."),t.schemes&&console.log("CustomSchemes: Available schemes:",Object.keys(t.schemes));t.addBrahmicScheme("devanagari_extended",{vowels:["","","","","","","","","","","","","","","",""],vowel_marks:["","","","","","","","","","","","","","",""],other:["","","","","",""],virama:[""],consonants:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],symbols:["","","","","","","","","","","",""],c_specials:{l3:"",r2:"",n2:""}}),t.addBrahmicScheme("malayalam_extended",{vowels:["","","","","","","","","","","","","","","",""],vowel_marks:["","","","","","","","","","","","","","",""],other:["","","","","",""],virama:[""],consonants:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],symbols:["","","","","","","","","","","",""],c_specials:{l3:"",r2:"",n2:""}}),t.addRomanScheme("itrans_extended",{vowels:["a","A","i","I","u","U","R","RR","LL","lRR","e","E","ai","o","O","au"],vowel_marks:["A","i","I","u","U","R","RR","LL","lRR","e","E","ai","o","O","au"],other:["M","H",".N",".a","OM",".."],virama:[""],consonants:["k","kh","g","gh","ng","c","ch","j","jh","nj","T","Th","D","Dh","N","t","th","d","dh","n","p","ph","b","bh","m","y","r","l","v","S","sh","s","h","L","ksh","jn","zh","R","n2"],c_specials:{l3:"zh",r2:"R",n2:"n2"}});const n=["","","","",""],r=["","","","",""],s=["","","","",""],i=["","","","",""],o=["","","","",""],a=["","","",""],l=["","","",""],u=["","",""],c=["","",""],h=[...n,...r,...s,...i,...o,...a,...l,...u,...c],f=["","","","","","","","","","","","","","","",""],p=["","","","","","","","","","","","","","",""];if(t.schemes.tamil&&t.schemes.devanagari){const g=t.schemes.tamil,x=t.schemes.devanagari,y=(_,C)=>Array.isArray(_)?_.map(R=>C[R]||""):[],v={vowels:f,vowel_marks:p,other:y(x.other,g.other||{}),virama:[""],consonants:h,symbols:y(x.symbols,g.symbols||{}),c_specials:{l3:"",r2:"",n2:""}};t.addBrahmicScheme("tamil_extended",v)}else console.error("CustomSchemes: Failed to register 'tamil_extended'. Tamil or Devanagari schemes missing.");const w={vowels:["","","","","","","","","","","","","","","",""],vowel_marks:["","","","","","","","","","","","","","",""],other:["","","","","",""],virama:[""],consonants:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],symbols:["","","","","","","","","","",".",".."],c_specials:{l3:"",r2:"",n2:""}};t.addBrahmicScheme("tamil_superscripted",w)},wb={:"",:"",:"",:"",:"",:""},XD=["","","","",""],eN=["","","","",""],gl="",tN="",bb="",nN=e=>{let t=e;const n=Object.keys(wb);let r=0,s="";for(;r<t.length;){let i=!1;for(const o of n)if(t.startsWith(o,r)){const a=wb[o],l=t[r+o.length];let u=!1;if(o===""?(l&&XD.includes(l)&&(u=!0),(l===gl||l===bb)&&(u=!0)):o===""?(l&&eN.includes(l)&&(u=!0),l===gl&&(u=!0)):o===""?(l===""&&(u=!0),(l===tN||l===gl)&&(u=!0)):o===""?l===""&&(u=!0):o===""?l===gl&&(u=!0):o===""&&(l===bb&&(u=!0),l===gl&&(u=!0)),!u){s+=a,r+=o.length,i=!0;break}}i||(s+=t[r],r++)}return s},gp=(e,t,n=!1)=>{const r="",s=[...n?[{nasal:"",chars:""}]:[{nasal:"",chars:""}],...n?[]:[{nasal:"",chars:""}],{nasal:"",chars:""},{nasal:"",chars:""},...n?[{nasal:"",chars:""}]:[{nasal:"",chars:""}]];let i="";for(let o=0;o<e.length;o++){const a=e[o];if(a===r&&o+1<e.length){const l=e[o+1];let u=!1;for(const c of s)if(c.chars.includes(l)){i+=c.nasal,u=!0;break}u||(i+=a)}else i+=a}return i},xb=e=>{let t=e;const n="",r="",s=new RegExp(`([${n}])${r}(?![\\u0900-\\u097F])`,"g");t=t.replace(s,"$1");const i="--",o=new RegExp(`([${n}])${r}([${i}])`,"g");return t=t.replace(o,"$1$2"),t},rN={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"","":"","":""},sN=e=>{let t="";for(let n=0;n<e.length;n++){const r=e[n];t+=rN[r]||r}return t};ZD(Pl);function iN(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const go=(e,t,n,r={})=>{const s=t.toLowerCase(),i=n.toLowerCase();if(i==="original")return e;let o=e,a=e;try{s==="devanagari"?(r.isMarathiMode&&(o=xb(o)),o=gp(o,"devanagari",r.isMarathiMode)):(s==="tamil"||s==="tamil_superscripted")&&(o=o.normalize("NFC"));let l=s,u=i;s==="tamil_superscripted"&&(l="tamil"),l==="tamil"&&(o=sN(o),r.isMarathiMode?(o=xb(o),o=gp(o,"devanagari",!0)):o=gp(o,"devanagari",!1),l="devanagari_extended");const c=["devanagari","malayalam","tamil","tamil_superscripted"];if(c.includes(l)&&c.includes(u)&&(l==="devanagari"&&(l="devanagari_extended"),l==="malayalam"&&(l="malayalam_extended"),l==="tamil"&&(l="tamil_extended"),u==="devanagari"&&(u="devanagari_extended"),u==="malayalam"&&(u="malayalam_extended"),u==="tamil"&&(u="tamil_extended")),u==="tamil"&&(u="tamil_superscripted"),l!==u){let f=Pl.default||Pl;if((!f||!f.t)&&(f=window.Sanscript),f&&f.t){const p=["itrans","iast","hk","slp1","velthuis","wx","kolkata"].includes(l),w=["tamil_superscripted","tamil_extended","malayalam_extended"].includes(u);if(p&&w){console.log(`[Transliteration] Manual Pivot 3-Step: Source=${l}, Target=${u}`);let g=f.t(o,l,"devanagari");f.schemes.devanagari_extended?g=f.t(g,"devanagari","devanagari_extended"):console.error("[Transliteration] 'devanagari_extended' missing! Skipping Step 2."),f.schemes[u]?f.schemes.devanagari_extended?a=f.t(g,"devanagari_extended",u):a=f.t(g,"devanagari",u):(console.error(`[Transliteration] Scheme '${u}' not found!`),a=g)}else a=f.t(o,l,u)}else return e}else a=o;if(i.includes("malayalam")&&(a=nN(a)),r.retainEnglishNumerals!==!1){const f="0123456789";let p="",w=Pl.default||Pl;if((!w||!w.t)&&(w=window.Sanscript),w&&w.t&&l!==u){const g="itrans";if(["tamil_superscripted","tamil_extended","malayalam_extended"].includes(u)){let y=w.t(f,g,"devanagari");w.schemes.devanagari_extended&&(y=w.t(y,"devanagari","devanagari_extended")),w.schemes[u]&&(w.schemes.devanagari_extended?p=w.t(y,"devanagari_extended",u):p=w.t(y,"devanagari",u))}else p=w.t(f,g,u)}if(p&&p!==f&&p.length===10)for(let g=0;g<10;g++){const x=p[g],y=f[g];x!==y&&(a=a.split(x).join(y))}}return i==="itrans"&&s==="tamil"&&(a=iN(a)),a}catch(l){return console.error("Transliteration Error:",l),e}},oN=()=>localStorage.getItem("isMarathiMode")==="true",aN={color:"#059669",background:"#E6FFEE"},lN={color:"#EF4444",background:"#FEEEEE"},uN={color:"green"},cN={color:"black"},_b={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},dN={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},Q1={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},hN={backgroundColor:"#f0f4f8"},fN={backgroundColor:"#f5f5f5",fontWeight:"bold",fontSize:"1.2em",padding:"15px 15px 5px 15px",cursor:"default",marginBottom:"10px",marginTop:"15px",borderBottom:"2px solid #ddd",boxShadow:"none"},kb={...Q1,backgroundColor:"#eaf2ff",color:"#1e40af",fontWeight:"500",border:"1px solid #c3dafe"},pN=async(e,t)=>{if(!e)return[];const n=new URL(pr);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const i=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(i)}`)}const s=await r.json();return s.data||s},mN=(e,t)=>{const[n,r]=S.useState({});return S.useEffect(()=>{if(r({}),!e||!t||t.length===0)return;(async()=>{const i=t.map(async l=>{const u=await $h(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(i)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n},gN=(e,t)=>{const n=t==="itrans"?e.songTitle:(()=>{if(window.Sanscript)try{return go(e.songTitle,"itrans",t,{isMarathiMode:oN()})}catch(i){return console.error("Error during transliteration",i),e.songTitle}return e.songTitle})(),r=n.length>50?n.substring(0,50)+"...":n,s=e.raagam?t==="itrans"?e.raagam:(()=>{if(window.Sanscript)try{return go(e.raagam,"itrans",t)}catch(i){return console.error("Error during raagam transliteration",i),e.raagam}return e.raagam})():null;return e.type==="link"?b.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"10px",minWidth:"20px"},children:[b.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"}),b.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"})]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[b.jsx("span",{style:{fontSize:"1.2em"},title:n,children:r}),s&&b.jsxs(b.Fragment,{children:[b.jsx("span",{style:{margin:"0 8px",color:"#ccc"},children:"|"}),b.jsx("span",{style:{fontSize:"0.95em",color:"#666",fontStyle:"italic"},children:s})]})]})]}):b.jsxs("div",{style:{flexGrow:1,display:"flex",alignItems:"center",flexWrap:"wrap"},children:[b.jsx("span",{style:{fontSize:"1.2em"},title:n,children:r}),s&&b.jsxs(b.Fragment,{children:[b.jsx("span",{style:{margin:"0 8px",color:"#ccc"},children:"|"}),b.jsx("span",{style:{fontSize:"0.95em",color:"#666",fontStyle:"italic"},children:s})]})]})},Sb=e=>{if(e.type!=="link"||!e.link)return null;try{return JSON.parse(e.link).bookId||null}catch{return null}};function Eb({mode:e="read"}){var j;const{categoryId:t,bookId:n}=xo(),r=Vn(),{isEffectivelyOffline:s}=ev(),{session:i}=Cs(),o=(j=i==null?void 0:i.user)==null?void 0:j.email,[a,l]=S.useState(null),{preferredLanguage:u}=Ts(),[,c]=S.useState({}),[h,f]=S.useState(!0),[p,w]=S.useState([]);S.useEffect(()=>{(async()=>{f(!0);try{const we=await RD();w(we)}catch(we){console.error("Failed to fetch downloaded book IDs:",we)}finally{f(!1)}})()},[]),S.useEffect(()=>{c({})},[u]);const{isLoading:g,error:x,data:y,isFetching:v}=Vu({queryKey:["songIndices",n,o],queryFn:async()=>{if(!n||!o)return[];const Q=await Lh(n);return Q&&Q.length>0?Q:pN(n,o)},staleTime:1/0,gcTime:0,networkMode:"always",refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!!n&&!!o}),_=y,{downloadStatus:C}=tv(),R=mN(n,_);if(S.useEffect(()=>{n&&y&&!v&&Jy(n,y).catch(Q=>{console.error("Error saving song indices data to IndexedDB:",Q)})},[n,y,v]),S.useEffect(()=>{const Q=sessionStorage.getItem("lastClickedSongIndex");Q!==null&&(l(parseInt(Q,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),g)return b.jsx("div",{style:dN,children:b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[b.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),b.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),b.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),b.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(x instanceof Error)return b.jsxs("div",{children:["Error loading song indices: ",x.message]});const I=(Q,we,z,W)=>{switch(Q.stopPropagation(),we[z].type){case"title":break;case"link":const de=we[z].link,H=JSON.parse(de),G=H.categoryId.trim(),ve=H.bookId.trim(),q=`/book/${G}/${ve}`;console.log(q),G&&ve&&(sessionStorage.setItem("lastClickedSongIndex",z.toString()),r(q));break;default:const ue=we[z].sourceRow,se=we[z].songTitle;W&&(sessionStorage.setItem("lastClickedSongIndex",z.toString()),e==="proofreading"?r(`/proofreading/verify/${t}/${W}/${ue}/${encodeURIComponent(se)}`,{state:{filteredSongIndices:we,index:z}}):r(`/details/book/${t}/${W}/${ue}/${encodeURIComponent(se)}`,{state:{filteredSongIndices:we,index:z}}))}},D=Q=>R[Q]===!0,$=Q=>p.includes(Q),F=(_==null?void 0:_.filter(Q=>s?D(Q.songTitle):!0))??[],he=(Q,we)=>{if(Q.type==="title")return fN;if(Q.type==="link"){const W=Sb(Q),K=W?$(W):!1;return{...kb,...K?aN:lN,...we===a&&_b}}const z=D(Q.songTitle);return{...Q1,...z?uN:cN,...we===a&&_b}},N=(Q,we)=>{we!=="title"&&(Q.currentTarget.style.backgroundColor=hN.backgroundColor)},J=(Q,we)=>{we!=="title"&&(we==="link"?Q.currentTarget.style.backgroundColor=kb.backgroundColor:Q.currentTarget.style.backgroundColor="")};return b.jsxs(b.Fragment,{children:[b.jsx(nv,{}),b.jsxs("div",{children:[b.jsx("h2",{children:e==="proofreading"?"Proof Reading - Select Song":`Song Indices for Book: bookId: ${n} (${F.length} items)`}),b.jsx("ul",{className:"list-none p-0 m-0",children:F==null?void 0:F.map((Q,we)=>{var z;return Sb(Q),b.jsxs("li",{onClick:W=>{Q.type!=="title"&&I(W,F,we,n)},style:he(Q,we),onMouseEnter:W=>N(W,Q.type),onMouseLeave:W=>J(W,Q.type),className:`transition-all duration-150 ease-in-out ${Q.type!=="title"?"hover:shadow-md":""}`,children:[gN(Q,u),Q.type==="song"&&b.jsx("span",{style:{marginLeft:"10px",color:"#EF4444"},children:n&&((z=C[n])==null?void 0:z.downloadingSongs[Q.songTitle||""])&&"..downloading song.."}),Q.type==="link"&&$(n)&&b.jsx("span",{style:{marginLeft:"10px",color:"orange",fontSize:"0.85em",fontWeight:"600"},children:"..downloading linked book.."})]},Q.sourceRow)})})]})]})}const yN=e=>e,vN=e=>{const t=/<link\s+categoryId="([^"]+)"\s+bookId="([^"]+)"\s+sourceRow=(?:\"([^\"]+)\"|(\S+))\s+songTitle="([^"]+)">([\s\S]*?)<\/link>/gi;return e.replace(t,(n,r,s,i,o,a,l)=>{const u=i||o,c=r.replace(/"/g,"&quot;"),h=s.replace(/"/g,"&quot;"),f=u.replace(/"/g,"&quot;"),p=a.replace(/"/g,"&quot;");return`
      <a 
        href="#"
        class="text-indigo-600 hover:text-indigo-800 font-medium underline cursor-pointer transition-colors duration-150"
        onclick="event.preventDefault(); window.handleInternalNavigation(
          '${c}', 
          '${h}', 
          '${f}', 
          '${p}'
        );"
      >
        ${l}
      </a>
    `})},Y1=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:s=[],striped:i=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c,isMarathiMode:h=!1,retainEnglishNumerals:f=!0})=>{if(!Array.isArray(e)||e.length<1)return b.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[p,...w]=e,g=y=>{let v=String(y).replace(/ \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof y=="string"&&u!==c)try{const _=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let C=go(_,c,u,{isMarathiMode:h,retainEnglishNumerals:f});(u.toLowerCase()==="devanagari"||u.toLowerCase()==="devanagari")&&(C=yN(C)),v=C}catch(_){return console.error("Error during transliteration:",_),{__html:v}}return v=v.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),v=vN(v),{__html:v}},x=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return b.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${x} ${t}`,children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsx("tr",{children:p.map((y,v)=>b.jsx("th",{className:`
         px-4 py-4 text-left text-${l} font-medium text-gray-700
         ${r.includes(v)?n:""}
         sticky top-0 bg-gray-100
        `,dangerouslySetInnerHTML:g(y)},`th-${v}`))})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map((y,v)=>b.jsx("tr",{id:`trRowAsAnchor-${v}`,className:`
    ${i&&v%2===0?"bg-white":"bg-gray-100"}
    ${o?"hover:bg-indigo-50":""}
   `,children:y.map((_,C)=>b.jsx("td",{className:`
      px-4 py-3.5 text-${l} align-top
      ${s.includes(C)?"whitespace-normal break-all max-w-full":"whitespace-nowrap"}
      ${r.includes(C)?n:""}
     `,dangerouslySetInnerHTML:g(_)},`td-${v}-${C}`))},`row-${v}`))})]})})};function wN(e,t,n){return Math.max(t,Math.min(e,n))}const yn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Cb(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function Tb(e,t,n,r=.15){return r===0?wN(e,t,n):e<t?-Cb(t-e,n-t,r)+t:e>n?+Cb(e-n,n-t,r)+n:e}function bN(e,[t,n],[r,s]){const[[i,o],[a,l]]=e;return[Tb(t,i,o,r),Tb(n,a,l,s)]}function xN(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _N(e){var t=xN(e,"string");return typeof t=="symbol"?t:String(t)}function An(e,t,n){return t=_N(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pb(Object(n),!0).forEach(function(r){An(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const J1={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function jb(e){return e?e[0].toUpperCase()+e.slice(1):""}const kN=["enter","leave"];function SN(e=!1,t){return e&&!kN.includes(t)}function EN(e,t="",n=!1){const r=J1[e],s=r&&r[t]||t;return"on"+jb(e)+jb(s)+(SN(n,s)?"Capture":"")}const CN=["gotpointercapture","lostpointercapture"];function TN(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=CN.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function PN(e,t=""){const n=J1[e],r=n&&n[t]||t;return e+r}function Bh(e){return"touches"in e}function Z1(e){return Bh(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function jN(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function RN(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function X1(e){return Bh(e)?RN(e)[0]:e}function AN(e){return jN(e).map(t=>t.identifier)}function yp(e){const t=X1(e);return Bh(e)?t.identifier:t.pointerId}function Rb(e){const t=X1(e);return[t.clientX,t.clientY]}function ON(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i})}return t}function nh(e,...t){return typeof e=="function"?e(...t):e}function IN(){}function DN(...e){return e.length===0?IN:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function Ab(e,t){return Object.assign({},t,e||{})}const NN=32;class LN{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?nh(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let i=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,ON(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const O=n._delta.map(Math.abs);yn.addTo(n._distance,O)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:h}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&h[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&h[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const f=[0,0];if(r.hasCustomTransform){const[O,I]=h;f[0]=c[0]!==!1?O-c[0]:0,f[1]=c[1]!==!1?I-c[1]:0}else f[0]=c[0]!==!1?o-c[0]:0,f[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(f);const p=n.offset,w=n._active&&!n._blocked||n.active;w&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=nh(r.bounds,n)),this.setup&&this.setup()),n.movement=f,this.computeOffset()));const[g,x]=n.offset,[[y,v],[_,C]]=n._bounds;n.overflow=[g<y?-1:g>v?1:0,x<_?-1:x>C?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const R=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=bN(n._bounds,n.offset,R),n.delta=yn.sub(n.offset,p),this.computeMovement(),w&&(!n.last||i>NN)){n.delta=yn.sub(n.offset,p);const O=n.delta.map(Math.abs);yn.addTo(n.distance,O),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[O[0]/i,O[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(Pt(Pt(Pt({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function $N([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class MN extends LN{constructor(...t){super(...t),An(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=yn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=yn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[Z1(t)]:r.axisThreshold;n.axis=$N(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const FN=e=>e,Ob=.15,eE={enabled(e=!0){return e},eventOptions(e,t,n){return Pt(Pt({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Ob,Ob];case!1:return[0,0];default:return yn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return yn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||FN},threshold(e){return yn.toVector(e,0)}},BN=0,Ku=Pt(Pt({},eE),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=BN){return e},bounds(e={}){if(typeof e=="function")return i=>Ku.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),Ib={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class UN extends MN{constructor(...t){super(...t),An(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Ku.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=yp(t),r._pointerActive=!0,this.computeValues(Rb(t)),this.computeInitial(),n.preventScrollAxis&&Z1(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=yp(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const i=Rb(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=yn.sub(i,n._values),this.computeValues(i)),yn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=yp(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,o]=n._distance;if(n.tap=i<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[h,f]=r.swipe.velocity,[p,w]=r.swipe.distance,g=r.swipe.duration;if(n.elapsedTime<g){const x=Math.abs(a/n.timeDelta),y=Math.abs(l/n.timeDelta);x>h&&Math.abs(u)>p&&(n.swipe[0]=Math.sign(a)),y>f&&Math.abs(c)>w&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,zN(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=Ib[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,yn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Ib&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function zN(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Wu=typeof window<"u"&&window.document&&window.document.createElement;function tE(){return Wu&&"ontouchstart"in window}function VN(){return tE()||Wu&&window.navigator.maxTouchPoints>1}function KN(){return Wu&&"onpointerdown"in window}function WN(){return Wu&&"exitPointerLock"in window.document}function HN(){try{return"constructor"in GestureEvent}catch{return!1}}const cr={isBrowser:Wu,gesture:HN(),touch:tE(),touchscreen:VN(),pointer:KN(),pointerLock:WN()},qN=250,GN=180,QN=.5,YN=50,JN=250,ZN=10,Db={mouse:0,touch:0,pen:8},XN=Pt(Pt({},Ku),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&cr.pointerLock,cr.touch&&n?"touch":this.pointerLock?"mouse":cr.pointer&&!s?"pointer":cr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?qN:void 0,!(!cr.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const i=yn.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:e=QN,distance:t=YN,duration:n=JN}={}){return{velocity:this.transform(yn.toVector(e)),distance:this.transform(yn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return GN;case!1:return 0;default:return e}},axisThreshold(e){return e?Pt(Pt({},Db),e):Db},keyboardDisplacement(e=ZN){return e}});Pt(Pt({},eE),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!cr.touch&&cr.gesture)return"gesture";if(cr.touch&&r)return"touch";if(cr.touchscreen){if(cr.pointer)return"pointer";if(cr.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const a=Ab(nh(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=Ab(nh(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[s(),i()]:o=>[s(o),i(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",yn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});Pt(Pt({},Ku),{},{mouseOnly:(e=!0)=>e});Pt(Pt({},Ku),{},{mouseOnly:(e=!0)=>e});const nE=new Map,lg=new Map;function eL(e){nE.set(e.key,e.engine),lg.set(e.key,e.resolver)}const tL={key:"drag",engine:UN,resolver:XN};function nL(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function rL(e,t){if(e==null)return{};var n=nL(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const sL={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=cr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},iL=["target","eventOptions","window","enabled","transform"];function vd(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=vd(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function oL(e,t,n={}){const r=e,{target:s,eventOptions:i,window:o,enabled:a,transform:l}=r,u=rL(r,iL);if(n.shared=vd({target:s,eventOptions:i,window:o,enabled:a,transform:l},sL),t){const c=lg.get(t);n[t]=vd(Pt({shared:n.shared},u),c)}else for(const c in u){const h=lg.get(c);h&&(n[c]=vd(Pt({shared:n.shared},u[c]),h))}return n}class rE{constructor(t,n){An(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,i){const o=this._listeners,a=PN(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Pt(Pt({},l),i);t.addEventListener(a,s,u);const c=()=>{t.removeEventListener(a,s,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class aL{constructor(){An(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class lL{constructor(t){An(this,"gestures",new Set),An(this,"_targetEventStore",new rE(this)),An(this,"gestureEventStores",{}),An(this,"gestureTimeoutStores",{}),An(this,"handlers",{}),An(this,"config",{}),An(this,"pointerIds",new Set),An(this,"touchIds",new Set),An(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),uL(this,t)}setEventIds(t){if(Bh(t))return this.touchIds=new Set(AN(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=oL(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=Nb(r,a.eventOptions,!!s);if(a.enabled){const u=nE.get(o);new u(this,t,o).bind(l)}}const i=Nb(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)i(o,"",a=>this.nativeHandlers[o](Pt(Pt({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const i in r)r[i]=DN(...r[i]);if(!s)return r;for(const i in r){const{device:o,capture:a,passive:l}=TN(i);this._targetEventStore.add(s,o,"",r[i],{capture:a,passive:l})}}}}function Fo(e,t){e.gestures.add(t),e.gestureEventStores[t]=new rE(e,t),e.gestureTimeoutStores[t]=new aL}function uL(e,t){t.drag&&Fo(e,"drag"),t.wheel&&Fo(e,"wheel"),t.scroll&&Fo(e,"scroll"),t.move&&Fo(e,"move"),t.pinch&&Fo(e,"pinch"),t.hover&&Fo(e,"hover")}const Nb=(e,t,n)=>(r,s,i,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,h=(u=o.passive)!==null&&u!==void 0?u:t.passive;let f=a?r:EN(r,s,c);n&&h&&(f+="Passive"),e[f]=e[f]||[],e[f].push(i)};function cL(e,t={},n,r){const s=We.useMemo(()=>new lL(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),We.useEffect(s.effect.bind(s)),We.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function dL(e,t){return eL(tL),cL({drag:e},t||{},"drag")}const rv=S.createContext({});function sv(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const iv=typeof window<"u",sE=iv?S.useLayoutEffect:S.useEffect,Uh=S.createContext(null);function ov(e,t){e.indexOf(t)===-1&&e.push(t)}function av(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const xs=(e,t,n)=>n>t?t:n<e?e:n;let lv=()=>{};const _s={},iE=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function oE(e){return typeof e=="object"&&e!==null}const aE=e=>/^0[^.\s]+$/u.test(e);function uv(e){let t;return()=>(t===void 0&&(t=e()),t)}const mr=e=>e,hL=(e,t)=>n=>t(e(n)),Hu=(...e)=>e.reduce(hL),xu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class cv{constructor(){this.subscriptions=[]}add(t){return ov(this.subscriptions,t),()=>av(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qr=e=>e*1e3,hr=e=>e/1e3;function lE(e,t){return t?e*(1e3/t):0}const uE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,fL=1e-7,pL=12;function mL(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=uE(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>fL&&++a<pL);return o}function qu(e,t,n,r){if(e===t&&n===r)return mr;const s=i=>mL(i,0,1,e,n);return i=>i===0||i===1?i:uE(s(i),t,r)}const cE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,dE=e=>t=>1-e(1-t),hE=qu(.33,1.53,.69,.99),dv=dE(hE),fE=cE(dv),pE=e=>(e*=2)<1?.5*dv(e):.5*(2-Math.pow(2,-10*(e-1))),hv=e=>1-Math.sin(Math.acos(e)),mE=dE(hv),gE=cE(hv),gL=qu(.42,0,1,1),yL=qu(0,0,.58,1),yE=qu(.42,0,.58,1),vL=e=>Array.isArray(e)&&typeof e[0]!="number",vE=e=>Array.isArray(e)&&typeof e[0]=="number",wL={linear:mr,easeIn:gL,easeInOut:yE,easeOut:yL,circIn:hv,circInOut:gE,circOut:mE,backIn:dv,backInOut:fE,backOut:hE,anticipate:pE},bL=e=>typeof e=="string",Lb=e=>{if(vE(e)){lv(e.length===4);const[t,n,r,s]=e;return qu(t,n,r,s)}else if(bL(e))return wL[e];return e},Gc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xL(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,h=!1,f=!1)=>{const w=f&&s?n:r;return h&&o.add(c),w.has(c)||w.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const _L=40;function wE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Gc.reduce((_,C)=>(_[C]=xL(i),_),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:f,render:p,postRender:w}=o,g=()=>{const _=_s.useManualTiming?s.timestamp:performance.now();n=!1,_s.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,_L),1)),s.timestamp=_,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),h.process(s),f.process(s),p.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(g))},x=()=>{n=!0,r=!0,s.isProcessing||e(g)};return{schedule:Gc.reduce((_,C)=>{const R=o[C];return _[C]=(O,I=!1,D=!1)=>(n||x(),R.schedule(O,I,D)),_},{}),cancel:_=>{for(let C=0;C<Gc.length;C++)o[Gc[C]].cancel(_)},state:s,steps:o}}const{schedule:_t,cancel:yi,state:rn,steps:vp}=wE(typeof requestAnimationFrame<"u"?requestAnimationFrame:mr,!0);let wd;function kL(){wd=void 0}const $n={now:()=>(wd===void 0&&$n.set(rn.isProcessing||_s.useManualTiming?rn.timestamp:performance.now()),wd),set:e=>{wd=e,queueMicrotask(kL)}},bE=e=>t=>typeof t=="string"&&t.startsWith(e),fv=bE("--"),SL=bE("var(--"),pv=e=>SL(e)?EL.test(e.split("/*")[0].trim()):!1,EL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},_u={...Wa,transform:e=>xs(0,1,e)},Qc={...Wa,default:1},Wl=e=>Math.round(e*1e5)/1e5,mv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CL(e){return e==null}const TL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gv=(e,t)=>n=>!!(typeof n=="string"&&TL.test(n)&&n.startsWith(e)||t&&!CL(n)&&Object.prototype.hasOwnProperty.call(n,t)),xE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(mv);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},PL=e=>xs(0,255,e),wp={...Wa,transform:e=>Math.round(PL(e))},qi={test:gv("rgb","red"),parse:xE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+wp.transform(e)+", "+wp.transform(t)+", "+wp.transform(n)+", "+Wl(_u.transform(r))+")"};function jL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ug={test:gv("#"),parse:jL,transform:qi.transform},Gu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Fs=Gu("deg"),Yr=Gu("%"),Qe=Gu("px"),RL=Gu("vh"),AL=Gu("vw"),$b={...Yr,parse:e=>Yr.parse(e)/100,transform:e=>Yr.transform(e*100)},ea={test:gv("hsl","hue"),parse:xE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Yr.transform(Wl(t))+", "+Yr.transform(Wl(n))+", "+Wl(_u.transform(r))+")"},Ut={test:e=>qi.test(e)||ug.test(e)||ea.test(e),parse:e=>qi.test(e)?qi.parse(e):ea.test(e)?ea.parse(e):ug.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?qi.transform(e):ea.transform(e),getAnimatableNone:e=>{const t=Ut.parse(e);return t.alpha=0,Ut.transform(t)}},OL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function IL(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(mv))==null?void 0:t.length)||0)+(((n=e.match(OL))==null?void 0:n.length)||0)>0}const _E="number",kE="color",DL="var",NL="var(",Mb="${}",LL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ku(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(LL,l=>(Ut.test(l)?(r.color.push(i),s.push(kE),n.push(Ut.parse(l))):l.startsWith(NL)?(r.var.push(i),s.push(DL),n.push(l)):(r.number.push(i),s.push(_E),n.push(parseFloat(l))),++i,Mb)).split(Mb);return{values:n,split:a,indexes:r,types:s}}function SE(e){return ku(e).values}function EE(e){const{split:t,types:n}=ku(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===_E?i+=Wl(s[o]):a===kE?i+=Ut.transform(s[o]):i+=s[o]}return i}}const $L=e=>typeof e=="number"?0:Ut.test(e)?Ut.getAnimatableNone(e):e;function ML(e){const t=SE(e);return EE(e)(t.map($L))}const vi={test:IL,parse:SE,createTransformer:EE,getAnimatableNone:ML};function bp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function FL({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=bp(l,a,e+1/3),i=bp(l,a,e),o=bp(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function rh(e,t){return n=>n>0?t:e}const Tt=(e,t,n)=>e+(t-e)*n,xp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},BL=[ug,qi,ea],UL=e=>BL.find(t=>t.test(e));function Fb(e){const t=UL(e);if(!t)return!1;let n=t.parse(e);return t===ea&&(n=FL(n)),n}const Bb=(e,t)=>{const n=Fb(e),r=Fb(t);if(!n||!r)return rh(e,t);const s={...n};return i=>(s.red=xp(n.red,r.red,i),s.green=xp(n.green,r.green,i),s.blue=xp(n.blue,r.blue,i),s.alpha=Tt(n.alpha,r.alpha,i),qi.transform(s))},cg=new Set(["none","hidden"]);function zL(e,t){return cg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function VL(e,t){return n=>Tt(e,t,n)}function yv(e){return typeof e=="number"?VL:typeof e=="string"?pv(e)?rh:Ut.test(e)?Bb:HL:Array.isArray(e)?CE:typeof e=="object"?Ut.test(e)?Bb:KL:rh}function CE(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>yv(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function KL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=yv(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function WL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const HL=(e,t)=>{const n=vi.createTransformer(t),r=ku(e),s=ku(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?cg.has(e)&&!s.values.length||cg.has(t)&&!r.values.length?zL(e,t):Hu(CE(WL(r,s),s.values),n):rh(e,t)};function TE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Tt(e,t,n):yv(e)(e,t)}const qL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>_t.update(t,n),stop:()=>yi(t),now:()=>rn.isProcessing?rn.timestamp:$n.now()}},PE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},sh=2e4;function vv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<sh;)t+=n,r=e.next(t);return t>=sh?1/0:t}function GL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(vv(r),sh);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:hr(s)}}const QL=5;function jE(e,t,n){const r=Math.max(t-QL,0);return lE(n-e(r),t-r)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_p=.001;function YL({duration:e=Ot.duration,bounce:t=Ot.bounce,velocity:n=Ot.velocity,mass:r=Ot.mass}){let s,i,o=1-t;o=xs(Ot.minDamping,Ot.maxDamping,o),e=xs(Ot.minDuration,Ot.maxDuration,hr(e)),o<1?(s=u=>{const c=u*o,h=c*e,f=c-n,p=dg(u,o),w=Math.exp(-h);return _p-f/p*w},i=u=>{const h=u*o*e,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*e,w=Math.exp(-h),g=dg(Math.pow(u,2),o);return(-s(u)+_p>0?-1:1)*((f-p)*w)/g}):(s=u=>{const c=Math.exp(-u*e),h=(u-n)*e+1;return-_p+c*h},i=u=>{const c=Math.exp(-u*e),h=(n-u)*(e*e);return c*h});const a=5/e,l=ZL(s,i,a);if(e=Qr(e),isNaN(l))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const JL=12;function ZL(e,t,n){let r=n;for(let s=1;s<JL;s++)r=r-e(r)/t(r);return r}function dg(e,t){return e*Math.sqrt(1-t*t)}const XL=["duration","bounce"],e$=["stiffness","damping","mass"];function Ub(e,t){return t.some(n=>e[n]!==void 0)}function t$(e){let t={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...e};if(!Ub(e,e$)&&Ub(e,XL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*xs(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ot.mass,stiffness:s,damping:i}}else{const n=YL(e);t={...t,...n,mass:Ot.mass},t.isResolvedFromDuration=!0}return t}function ih(e=Ot.visualDuration,t=Ot.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:p}=t$({...n,velocity:-hr(n.velocity||0)}),w=f||0,g=u/(2*Math.sqrt(l*c)),x=o-i,y=hr(Math.sqrt(l/c)),v=Math.abs(x)<5;r||(r=v?Ot.restSpeed.granular:Ot.restSpeed.default),s||(s=v?Ot.restDelta.granular:Ot.restDelta.default);let _;if(g<1){const R=dg(y,g);_=O=>{const I=Math.exp(-g*y*O);return o-I*((w+g*y*x)/R*Math.sin(R*O)+x*Math.cos(R*O))}}else if(g===1)_=R=>o-Math.exp(-y*R)*(x+(w+y*x)*R);else{const R=y*Math.sqrt(g*g-1);_=O=>{const I=Math.exp(-g*y*O),D=Math.min(R*O,300);return o-I*((w+g*y*x)*Math.sinh(D)+R*x*Math.cosh(D))/R}}const C={calculatedDuration:p&&h||null,next:R=>{const O=_(R);if(p)a.done=R>=h;else{let I=R===0?w:0;g<1&&(I=R===0?Qr(w):jE(_,R,O));const D=Math.abs(I)<=r,$=Math.abs(o-O)<=s;a.done=D&&$}return a.value=a.done?o:O,a},toString:()=>{const R=Math.min(vv(C),sh),O=PE(I=>C.next(R*I).value,R,30);return R+"ms "+O},toTransition:()=>{}};return C}ih.applyToOptions=e=>{const t=GL(e,100,ih);return e.ease=t.ease,e.duration=Qr(t.duration),e.type="keyframes",e};function hg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=e[0],f={done:!1,value:h},p=D=>a!==void 0&&D<a||l!==void 0&&D>l,w=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let g=n*t;const x=h+g,y=o===void 0?x:o(x);y!==x&&(g=y-h);const v=D=>-g*Math.exp(-D/r),_=D=>y+v(D),C=D=>{const $=v(D),F=_(D);f.done=Math.abs($)<=u,f.value=f.done?y:F};let R,O;const I=D=>{p(f.value)&&(R=D,O=ih({keyframes:[f.value,w(f.value)],velocity:jE(_,D,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return I(0),{calculatedDuration:null,next:D=>{let $=!1;return!O&&R===void 0&&($=!0,C(D),I(D)),R!==void 0&&D>=R?O.next(D-R):(!$&&C(D),f)}}}function n$(e,t,n){const r=[],s=n||_s.mix||TE,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||mr:t;a=Hu(l,a)}r.push(a)}return r}function r$(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(lv(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=n$(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(c<e[h+1]);h++);const f=xu(e[h],e[h+1],c);return a[h](f)};return n?c=>u(xs(e[0],e[i-1],c)):u}function s$(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=xu(0,t,r);e.push(Tt(n,1,s))}}function i$(e){const t=[0];return s$(t,e.length-1),t}function o$(e,t){return e.map(n=>n*t)}function a$(e,t){return e.map(()=>t||yE).splice(0,e.length-1)}function Hl({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=vL(r)?r.map(Lb):Lb(r),i={done:!1,value:t[0]},o=o$(n&&n.length===t.length?n:i$(t),e),a=r$(o,t,{ease:Array.isArray(s)?s:a$(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const l$=e=>e!==null;function wv(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(l$),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const u$={decay:hg,inertia:hg,tween:Hl,keyframes:Hl,spring:ih};function RE(e){typeof e.type=="string"&&(e.type=u$[e.type])}class bv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const c$=e=>e/100;class xv extends bv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==$n.now()&&this.tick($n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;RE(t);const{type:n=Hl,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||Hl;l!==Hl&&typeof a[0]!="number"&&(this.mixKeyframes=Hu(c$,TE(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=vv(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:f,repeatDelay:p,type:w,onUpdate:g,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,C=r;if(h){const D=Math.min(this.currentTime,s)/a;let $=Math.floor(D),F=D%1;!F&&D>=1&&(F=1),F===1&&$--,$=Math.min($,h+1),!!($%2)&&(f==="reverse"?(F=1-F,p&&(F-=p/a)):f==="mirror"&&(C=o)),_=xs(0,1,F)*a}const R=v?{done:!1,value:c[0]}:C.next(_);i&&(R.value=i(R.value));let{done:O}=R;!v&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&w!==hg&&(R.value=wv(c,this.options,x,this.speed)),g&&g(R.value),I&&this.finish(),R}then(t,n){return this.finished.then(t,n)}get duration(){return hr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hr(t)}get time(){return hr(this.currentTime)}set time(t){var n;t=Qr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime($n.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=qL,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function d$(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Gi=e=>e*180/Math.PI,fg=e=>{const t=Gi(Math.atan2(e[1],e[0]));return pg(t)},h$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:fg,rotateZ:fg,skewX:e=>Gi(Math.atan(e[1])),skewY:e=>Gi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},pg=e=>(e=e%360,e<0&&(e+=360),e),zb=fg,Vb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Kb=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),f$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Vb,scaleY:Kb,scale:e=>(Vb(e)+Kb(e))/2,rotateX:e=>pg(Gi(Math.atan2(e[6],e[5]))),rotateY:e=>pg(Gi(Math.atan2(-e[2],e[0]))),rotateZ:zb,rotate:zb,skewX:e=>Gi(Math.atan(e[4])),skewY:e=>Gi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function mg(e){return e.includes("scale")?1:0}function gg(e,t){if(!e||e==="none")return mg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=f$,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=h$,s=a}if(!s)return mg(t);const i=r[t],o=s[1].split(",").map(m$);return typeof i=="function"?i(o):o[i]}const p$=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return gg(n,t)};function m$(e){return parseFloat(e.trim())}const Ha=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qa=new Set(Ha),Wb=e=>e===Wa||e===Qe,g$=new Set(["x","y","z"]),y$=Ha.filter(e=>!g$.has(e));function v$(e){const t=[];return y$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const ao={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>gg(t,"x"),y:(e,{transform:t})=>gg(t,"y")};ao.translateX=ao.x;ao.translateY=ao.y;const lo=new Set;let yg=!1,vg=!1,wg=!1;function AE(){if(vg){const e=Array.from(lo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=v$(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vg=!1,yg=!1,lo.forEach(e=>e.complete(wg)),lo.clear()}function OE(){lo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vg=!0)})}function w$(){wg=!0,OE(),AE(),wg=!1}class _v{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(lo.add(this),yg||(yg=!0,_t.read(OE),_t.resolveKeyframes(AE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}d$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),lo.delete(this)}cancel(){this.state==="scheduled"&&(lo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const b$=e=>e.startsWith("--");function x$(e,t,n){b$(t)?e.style.setProperty(t,n):e.style[t]=n}const _$=uv(()=>window.ScrollTimeline!==void 0),k$={};function S$(e,t){const n=uv(e);return()=>k$[t]??n()}const IE=S$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Hb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jl([0,.65,.55,1]),circOut:jl([.55,0,1,.45]),backIn:jl([.31,.01,.66,-.59]),backOut:jl([.33,1.53,.69,.99])};function DE(e,t){if(e)return typeof e=="function"?IE()?PE(e,t):"ease-out":vE(e)?jl(e):Array.isArray(e)?e.map(n=>DE(n,t)||Hb.easeOut):Hb[e]}function E$(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const h=DE(a,s);Array.isArray(h)&&(c.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(c,f)}function NE(e){return typeof e=="function"&&"applyToOptions"in e}function C$({type:e,...t}){return NE(e)&&IE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class T$ extends bv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,lv(typeof t.type!="string");const u=C$(t);this.animation=E$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=wv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):x$(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hr(t)}get time(){return hr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Qr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&_$()?(this.animation.timeline=t,mr):n(this)}}const LE={anticipate:pE,backInOut:fE,circInOut:gE};function P$(e){return e in LE}function j$(e){typeof e.ease=="string"&&P$(e.ease)&&(e.ease=LE[e.ease])}const qb=10;class R$ extends T${constructor(t){j$(t),RE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new xv({...o,autoplay:!1}),l=Qr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-qb).value,a.sample(l).value,qb),a.stop()}}const Gb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vi.test(e)||e==="0")&&!e.startsWith("url("));function A$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function O$(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Gb(s,t),a=Gb(i,t);return!o||!a?!1:A$(e)||(n==="spring"||NE(n))&&r}function bg(e){e.duration=0,e.type="keyframes"}const I$=new Set(["opacity","clipPath","filter","transform"]),D$=uv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function N$(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return D$()&&n&&I$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const L$=40;class $$ extends bv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...h}){var w;super(),this.stop=()=>{var g,x;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=$n.now();const f={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...h},p=(c==null?void 0:c.KeyframeResolver)||_v;this.keyframeResolver=new p(a,(g,x,y)=>this.onKeyframesResolved(g,x,f,!y),l,u,c),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=$n.now(),O$(t,i,o,a)||((_s.instantAnimations||!l)&&(c==null||c(wv(t,r,n))),t[0]=t[t.length-1],bg(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>L$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!u&&N$(f)?new R$({...f,element:f.motionValue.owner.current}):new xv(f);p.finished.then(()=>this.notifyFinished()).catch(mr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),w$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const M$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F$(e){const t=M$.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function $E(e,t,n=1){const[r,s]=F$(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return iE(o)?parseFloat(o):o}return pv(s)?$E(s,t,n+1):s}function kv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const ME=new Set(["width","height","top","left","right","bottom",...Ha]),B$={test:e=>e==="auto",parse:e=>e},FE=e=>t=>t.test(e),BE=[Wa,Qe,Yr,Fs,AL,RL,B$],Qb=e=>BE.find(FE(e));function U$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||aE(e):!0}const z$=new Set(["brightness","contrast","saturate","opacity"]);function V$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(mv)||[];if(!r)return e;const s=n.replace(r,"");let i=z$.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const K$=/\b([a-z-]*)\(.*?\)/gu,xg={...vi,getAnimatableNone:e=>{const t=e.match(K$);return t?t.map(V$).join(" "):e}},Yb={...Wa,transform:Math.round},W$={rotate:Fs,rotateX:Fs,rotateY:Fs,rotateZ:Fs,scale:Qc,scaleX:Qc,scaleY:Qc,scaleZ:Qc,skew:Fs,skewX:Fs,skewY:Fs,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:_u,originX:$b,originY:$b,originZ:Qe},Sv={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe,...W$,zIndex:Yb,fillOpacity:_u,strokeOpacity:_u,numOctaves:Yb},H$={...Sv,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:xg,WebkitFilter:xg},UE=e=>H$[e];function zE(e,t){let n=UE(e);return n!==xg&&(n=vi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const q$=new Set(["auto","none","0"]);function G$(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!q$.has(i)&&ku(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=zE(n,s)}class Q$ extends _v{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),pv(u))){const c=$E(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!ME.has(r)||t.length!==2)return;const[s,i]=t,o=Qb(s),a=Qb(i);if(o!==a)if(Wb(o)&&Wb(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else ao[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||U$(t[s]))&&r.push(s);r.length&&G$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ao[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=ao[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Y$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const VE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function KE(e){return oE(e)&&"offsetHeight"in e}const Jb=30,J$=e=>!isNaN(parseFloat(e));class Z${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=$n.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=$n.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=J$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new cv);const r=this.events[t].add(n);return t==="change"?()=>{r(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Jb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Jb);return lE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Da(e,t){return new Z$(e,t)}const{schedule:Ev}=wE(queueMicrotask,!1),_r={x:!1,y:!1};function WE(){return _r.x||_r.y}function X$(e){return e==="x"||e==="y"?_r[e]?null:(_r[e]=!0,()=>{_r[e]=!1}):_r.x||_r.y?null:(_r.x=_r.y=!0,()=>{_r.x=_r.y=!1})}function HE(e,t){const n=Y$(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Zb(e){return!(e.pointerType==="touch"||WE())}function eM(e,t,n={}){const[r,s,i]=HE(e,n),o=a=>{if(!Zb(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=h=>{Zb(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const qE=(e,t)=>t?e===t?!0:qE(e,t.parentElement):!1,Cv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,tM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nM(e){return tM.has(e.tagName)||e.tabIndex!==-1}const bd=new WeakSet;function Xb(e){return t=>{t.key==="Enter"&&e(t)}}function kp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const rM=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Xb(()=>{if(bd.has(n))return;kp(n,"down");const s=Xb(()=>{kp(n,"up")}),i=()=>kp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function ex(e){return Cv(e)&&!WE()}function sM(e,t,n={}){const[r,s,i]=HE(e,n),o=a=>{const l=a.currentTarget;if(!ex(a))return;bd.add(l);const u=t(l,a),c=(p,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),bd.has(l)&&bd.delete(l),ex(p)&&typeof u=="function"&&u(p,{success:w})},h=p=>{c(p,l===window||l===document||n.useGlobalTarget||qE(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),KE(a)&&(a.addEventListener("focus",u=>rM(u,s)),!nM(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function GE(e){return oE(e)&&"ownerSVGElement"in e}function iM(e){return GE(e)&&e.tagName==="svg"}const vn=e=>!!(e&&e.getVelocity),oM=[...BE,Ut,vi],aM=e=>oM.find(FE(e)),Tv=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function tx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function lM(...e){return t=>{let n=!1;const r=e.map(s=>{const i=tx(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():tx(e[s],null)}}}}function uM(...e){return S.useCallback(lM(...e),e)}class cM extends S.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=KE(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dM({children:e,isPresent:t,anchorX:n,root:r}){const s=S.useId(),i=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=S.useContext(Tv),l=uM(i,e==null?void 0:e.ref);return S.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:f,right:p}=o.current;if(t||!i.current||!u||!c)return;const w=n==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const g=document.createElement("style");a&&(g.nonce=a);const x=r??document.head;return x.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${w}px !important;
            top: ${h}px !important;
          }
        `),()=>{x.contains(g)&&x.removeChild(g)}},[t]),b.jsx(cM,{isPresent:t,childRef:i,sizeRef:o,children:S.cloneElement(e,{ref:l})})}const hM=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=sv(fM),c=S.useId();let h=!0,f=S.useMemo(()=>(h=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const w of u.values())if(!w)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),S.useMemo(()=>{u.forEach((p,w)=>u.set(w,!1))},[n]),S.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=b.jsx(dM,{isPresent:n,anchorX:a,root:l,children:e})),b.jsx(Uh.Provider,{value:f,children:e})};function fM(){return new Map}function QE(e=!0){const t=S.useContext(Uh);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=S.useId();S.useEffect(()=>{if(e)return s(i)},[e]);const o=S.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Yc=e=>e.key||"";function nx(e){const t=[];return S.Children.forEach(e,n=>{S.isValidElement(n)&&t.push(n)}),t}const pM=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=QE(o),h=S.useMemo(()=>nx(e),[e]),f=o&&!u?[]:h.map(Yc),p=S.useRef(!0),w=S.useRef(h),g=sv(()=>new Map),[x,y]=S.useState(h),[v,_]=S.useState(h);sE(()=>{p.current=!1,w.current=h;for(let O=0;O<v.length;O++){const I=Yc(v[O]);f.includes(I)?g.delete(I):g.get(I)!==!0&&g.set(I,!1)}},[v,f.length,f.join("-")]);const C=[];if(h!==x){let O=[...h];for(let I=0;I<v.length;I++){const D=v[I],$=Yc(D);f.includes($)||(O.splice(I,0,D),C.push(D))}return i==="wait"&&C.length&&(O=C),_(nx(O)),y(h),null}const{forceRender:R}=S.useContext(rv);return b.jsx(b.Fragment,{children:v.map(O=>{const I=Yc(O),D=o&&!u?!1:h===v||f.includes(I),$=()=>{if(g.has(I))g.set(I,!0);else return;let F=!0;g.forEach(he=>{he||(F=!1)}),F&&(R==null||R(),_(w.current),o&&(c==null||c()),r&&r())};return b.jsx(hM,{isPresent:D,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:D?void 0:$,anchorX:a,children:O},I)})})},YE=S.createContext({strict:!1}),rx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Na={};for(const e in rx)Na[e]={isEnabled:t=>rx[e].some(n=>!!t[n])};function mM(e){for(const t in e)Na[t]={...Na[t],...e[t]}}const gM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||gM.has(e)}let JE=e=>!oh(e);function yM(e){typeof e=="function"&&(JE=t=>t.startsWith("on")?!oh(t):e(t))}try{yM(require("@emotion/is-prop-valid").default)}catch{}function vM(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(JE(s)||n===!0&&oh(s)||!t&&!oh(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const zh=S.createContext({});function Vh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Su(e){return typeof e=="string"||Array.isArray(e)}const Pv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jv=["initial",...Pv];function Kh(e){return Vh(e.animate)||jv.some(t=>Su(e[t]))}function ZE(e){return!!(Kh(e)||e.variants)}function wM(e,t){if(Kh(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Su(n)?n:void 0,animate:Su(r)?r:void 0}}return e.inherit!==!1?t:{}}function bM(e){const{initial:t,animate:n}=wM(e,S.useContext(zh));return S.useMemo(()=>({initial:t,animate:n}),[sx(t),sx(n)])}function sx(e){return Array.isArray(e)?e.join(" "):e}const Eu={};function xM(e){for(const t in e)Eu[t]=e[t],fv(t)&&(Eu[t].isCSSVariable=!0)}function XE(e,{layout:t,layoutId:n}){return qa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Eu[e]||e==="opacity")}const _M={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kM=Ha.length;function SM(e,t,n){let r="",s=!0;for(let i=0;i<kM;i++){const o=Ha[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=VE(a,Sv[o]);if(!l){s=!1;const c=_M[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Rv(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(qa.has(l)){o=!0;continue}else if(fv(l)){s[l]=u;continue}else{const c=VE(u,Sv[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=SM(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const Av=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eC(e,t,n){for(const r in t)!vn(t[r])&&!XE(r,n)&&(e[r]=t[r])}function EM({transformTemplate:e},t){return S.useMemo(()=>{const n=Av();return Rv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function CM(e,t){const n=e.style||{},r={};return eC(r,n,e),Object.assign(r,EM(e,t)),r}function TM(e,t){const n={},r=CM(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const PM={offset:"stroke-dashoffset",array:"stroke-dasharray"},jM={offset:"strokeDashoffset",array:"strokeDasharray"};function RM(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?PM:jM;e[i.offset]=Qe.transform(-r);const o=Qe.transform(t),a=Qe.transform(n);e[i.array]=`${o} ${a}`}function tC(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(Rv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&RM(h,s,i,o,!1)}const nC=()=>({...Av(),attrs:{}}),rC=e=>typeof e=="string"&&e.toLowerCase()==="svg";function AM(e,t,n,r){const s=S.useMemo(()=>{const i=nC();return tC(i,t,rC(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};eC(i,e.style,e),s.style={...i,...s.style}}return s}const OM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ov(e){return typeof e!="string"||e.includes("-")?!1:!!(OM.indexOf(e)>-1||/[A-Z]/u.test(e))}function IM(e,t,n,{latestValues:r},s,i=!1){const a=(Ov(e)?AM:TM)(t,r,s,e),l=vM(t,typeof e=="string",i),u=e!==S.Fragment?{...l,...a,ref:n}:{},{children:c}=t,h=S.useMemo(()=>vn(c)?c.get():c,[c]);return S.createElement(e,{...u,children:h})}function ix(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Iv(e,t,n,r){if(typeof t=="function"){const[s,i]=ix(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=ix(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function xd(e){return vn(e)?e.get():e}function DM({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:NM(n,r,s,e),renderState:t()}}function NM(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=xd(i[f]);let{initial:o,animate:a}=e;const l=Kh(e),u=ZE(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!Vh(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const w=Iv(e,f[p]);if(w){const{transitionEnd:g,transition:x,...y}=w;for(const v in y){let _=y[v];if(Array.isArray(_)){const C=c?_.length-1:0;_=_[C]}_!==null&&(s[v]=_)}for(const v in g)s[v]=g[v]}}}return s}const sC=e=>(t,n)=>{const r=S.useContext(zh),s=S.useContext(Uh),i=()=>DM(e,t,r,s);return n?i():sv(i)};function Dv(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(vn(r[o])||t.style&&vn(t.style[o])||XE(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const LM=sC({scrapeMotionValuesFromProps:Dv,createRenderState:Av});function iC(e,t,n){const r=Dv(e,t,n);for(const s in e)if(vn(e[s])||vn(t[s])){const i=Ha.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const $M=sC({scrapeMotionValuesFromProps:iC,createRenderState:nC}),MM=Symbol.for("motionComponentSymbol");function ta(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function FM(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ta(n)&&(n.current=r))},[t])}const Nv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BM="framerAppearId",oC="data-"+Nv(BM),aC=S.createContext({});function UM(e,t,n,r,s){var g,x;const{visualElement:i}=S.useContext(zh),o=S.useContext(YE),a=S.useContext(Uh),l=S.useContext(Tv).reducedMotion,u=S.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=S.useContext(aC);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&zM(u.current,n,s,h);const f=S.useRef(!1);S.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const p=n[oC],w=S.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return sE(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),w.current&&c.animationState&&c.animationState.animateChanges())}),S.useEffect(()=>{c&&(!w.current&&c.animationState&&c.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),w.current=!1),c.enteringChildren=void 0)}),c}function zM(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:lC(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ta(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function lC(e){if(e)return e.options.allowProjection!==!1?e.projection:lC(e.parent)}function Sp(e,{forwardMotionProps:t=!1}={},n,r){n&&mM(n);const s=Ov(e)?$M:LM;function i(a,l){let u;const c={...S.useContext(Tv),...a,layoutId:VM(a)},{isStatic:h}=c,f=bM(a),p=s(a,h);if(!h&&iv){KM();const w=WM(c);u=w.MeasureLayout,f.visualElement=UM(e,p,c,r,w.ProjectionNode)}return b.jsxs(zh.Provider,{value:f,children:[u&&f.visualElement?b.jsx(u,{visualElement:f.visualElement,...c}):null,IM(e,a,FM(p,f.visualElement,l),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=S.forwardRef(i);return o[MM]=e,o}function VM({layoutId:e}){const t=S.useContext(rv).id;return t&&e!==void 0?t+"-"+e:e}function KM(e,t){S.useContext(YE).strict}function WM(e){const{drag:t,layout:n}=Na;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function HM(e,t){if(typeof Proxy>"u")return Sp;const n=new Map,r=(i,o)=>Sp(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Sp(o,void 0,e,t)),n.get(o))})}function uC({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function qM({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function GM(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ep(e){return e===void 0||e===1}function _g({scale:e,scaleX:t,scaleY:n}){return!Ep(e)||!Ep(t)||!Ep(n)}function $i(e){return _g(e)||cC(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function cC(e){return ox(e.x)||ox(e.y)}function ox(e){return e&&e!=="0%"}function ah(e,t,n){const r=e-n,s=t*r;return n+s}function ax(e,t,n,r,s){return s!==void 0&&(e=ah(e,s,r)),ah(e,n,r)+t}function kg(e,t=0,n=1,r,s){e.min=ax(e.min,t,n,r,s),e.max=ax(e.max,t,n,r,s)}function dC(e,{x:t,y:n}){kg(e.x,t.translate,t.scale,t.originPoint),kg(e.y,n.translate,n.scale,n.originPoint)}const lx=.999999999999,ux=1.0000000000001;function QM(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ra(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,dC(e,o)),r&&$i(i.latestValues)&&ra(e,i.latestValues))}t.x<ux&&t.x>lx&&(t.x=1),t.y<ux&&t.y>lx&&(t.y=1)}function na(e,t){e.min=e.min+t,e.max=e.max+t}function cx(e,t,n,r,s=.5){const i=Tt(e.min,e.max,s);kg(e,t,n,i,r)}function ra(e,t){cx(e.x,t.x,t.scaleX,t.scale,t.originX),cx(e.y,t.y,t.scaleY,t.scale,t.originY)}function hC(e,t){return uC(GM(e.getBoundingClientRect(),t))}function YM(e,t,n){const r=hC(e,n),{scroll:s}=t;return s&&(na(r.x,s.offset.x),na(r.y,s.offset.y)),r}const dx=()=>({translate:0,scale:1,origin:0,originPoint:0}),sa=()=>({x:dx(),y:dx()}),hx=()=>({min:0,max:0}),Lt=()=>({x:hx(),y:hx()}),Sg={current:null},fC={current:!1};function JM(){if(fC.current=!0,!!iv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Sg.current=e.matches;e.addEventListener("change",t),t()}else Sg.current=!1}const ZM=new WeakMap;function XM(e,t,n){for(const r in t){const s=t[r],i=n[r];if(vn(s))e.addValue(r,s);else if(vn(i))e.addValue(r,Da(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,Da(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const fx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class e3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_v,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=$n.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,_t.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Kh(n),this.isVariantNode=ZE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&vn(p)&&p.set(l[f])}}mount(t){var n;this.current=t,ZM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),fC.current||JM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=qa.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&_t.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Na){const n=Na[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fx.length;r++){const s=fx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=XM(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Da(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(iE(r)||aE(r))?r=parseFloat(r):!aM(r)&&vi.test(n)&&(r=zE(t,n)),this.setBaseTarget(t,vn(r)?r.get():r)),vn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Iv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!vn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new cv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Ev.render(this.render)}}class pC extends e3{constructor(){super(...arguments),this.KeyframeResolver=Q$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mC(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function t3(e){return window.getComputedStyle(e)}class n3 extends pC{constructor(){super(...arguments),this.type="html",this.renderInstance=mC}readValueFromInstance(t,n){var r;if(qa.has(n))return(r=this.projection)!=null&&r.isProjecting?mg(n):p$(t,n);{const s=t3(t),i=(fv(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return hC(t,n)}build(t,n,r){Rv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Dv(t,n,r)}}const gC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function r3(e,t,n,r){mC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(gC.has(s)?s:Nv(s),t.attrs[s])}class s3 extends pC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(qa.has(n)){const r=UE(n);return r&&r.default||0}return n=gC.has(n)?n:Nv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return iC(t,n,r)}build(t,n,r){tC(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){r3(t,n,r,s)}mount(t){this.isSVGTag=rC(t.tagName),super.mount(t)}}const i3=(e,t)=>Ov(e)?new s3(t):new n3(t,{allowProjection:e!==S.Fragment});function ha(e,t,n){const r=e.getProps();return Iv(r,t,n!==void 0?n:r.custom,e)}const Eg=e=>Array.isArray(e);function o3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Da(n))}function a3(e){return Eg(e)?e[e.length-1]||0:e}function l3(e,t){const n=ha(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=a3(i[o]);o3(e,o,a)}}function u3(e){return!!(vn(e)&&e.add)}function Cg(e,t){const n=e.getValue("willChange");if(u3(n))return n.add(t);if(!n&&_s.WillChange){const r=new _s.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function yC(e){return e.props[oC]}const c3=e=>e!==null;function d3(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(c3),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const h3={type:"spring",stiffness:500,damping:25,restSpeed:10},f3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),p3={type:"keyframes",duration:.8},m3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g3=(e,{keyframes:t})=>t.length>2?p3:qa.has(e)?e.startsWith("scale")?f3(t[1]):h3:m3;function y3({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Lv=(e,t,n,r={},s,i)=>o=>{const a=kv(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};y3(a)||Object.assign(c,g3(e,c)),c.duration&&(c.duration=Qr(c.duration)),c.repeatDelay&&(c.repeatDelay=Qr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(bg(c),c.delay===0&&(h=!0)),(_s.instantAnimations||_s.skipAnimations)&&(h=!0,bg(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=d3(c.keyframes,a);if(f!==void 0){_t.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new xv(c):new $$(c)};function v3({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function vC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const h=e.getValue(c,e.latestValues[c]??null),f=a[c];if(f===void 0||u&&v3(u,c))continue;const p={delay:n,...kv(i||{},c)},w=h.get();if(w!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===w&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=yC(e);if(y){const v=window.MotionHandoffAnimation(y,c,_t);v!==null&&(p.startTime=v,g=!0)}}Cg(e,c),h.start(Lv(c,h,f,e.shouldReduceMotion&&ME.has(c)?{type:!1}:p,e,g));const x=h.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{_t.update(()=>{o&&l3(e,o)})}),l}function wC(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function Tg(e,t,n={}){var l;const r=ha(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(vC(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return w3(e,t,u,c,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function w3(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Tg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+wC(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function b3(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Tg(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Tg(e,t,n);else{const s=typeof t=="function"?ha(e,t,n.custom):t;r=Promise.all(vC(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function bC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const x3=jv.length;function xC(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?xC(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<x3;n++){const r=jv[n],s=e.props[r];(Su(s)||s===!1)&&(t[r]=s)}return t}const _3=[...Pv].reverse(),k3=Pv.length;function S3(e){return t=>Promise.all(t.map(({animation:n,options:r})=>b3(e,n,r)))}function E3(e){let t=S3(e),n=px(),r=!0;const s=l=>(u,c)=>{var f;const h=ha(e,c,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:w,...g}=h;u={...u,...g,...w}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=xC(e.parent)||{},h=[],f=new Set;let p={},w=1/0;for(let x=0;x<k3;x++){const y=_3[x],v=n[y],_=u[y]!==void 0?u[y]:c[y],C=Su(_),R=y===l?v.isActive:null;R===!1&&(w=x);let O=_===c[y]&&_!==u[y]&&C;if(O&&r&&e.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...p},!v.isActive&&R===null||!_&&!v.prevProp||Vh(_)||typeof _=="boolean")continue;const I=C3(v.prevProp,_);let D=I||y===l&&v.isActive&&!O&&C||x>w&&C,$=!1;const F=Array.isArray(_)?_:[_];let he=F.reduce(s(y),{});R===!1&&(he={});const{prevResolvedValues:N={}}=v,J={...N,...he},j=z=>{D=!0,f.has(z)&&($=!0,f.delete(z)),v.needsAnimating[z]=!0;const W=e.getValue(z);W&&(W.liveStyle=!1)};for(const z in J){const W=he[z],K=N[z];if(p.hasOwnProperty(z))continue;let de=!1;Eg(W)&&Eg(K)?de=!bC(W,K):de=W!==K,de?W!=null?j(z):f.add(z):W!==void 0&&f.has(z)?j(z):v.protectedKeys[z]=!0}v.prevProp=_,v.prevResolvedValues=he,v.isActive&&(p={...p,...he}),r&&e.blockInitialAnimation&&(D=!1);const Q=O&&I;D&&(!Q||$)&&h.push(...F.map(z=>{const W={type:y};if(typeof z=="string"&&r&&!Q&&e.manuallyAnimateOnMount&&e.parent){const{parent:K}=e,de=ha(K,z);if(K.enteringChildren&&de){const{delayChildren:H}=de.transition||{};W.delay=wC(K.enteringChildren,e,H)}}return{animation:z,options:W}}))}if(f.size){const x={};if(typeof u.initial!="boolean"){const y=ha(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(x.transition=y.transition)}f.forEach(y=>{const v=e.getBaseTarget(y),_=e.getValue(y);_&&(_.liveStyle=!0),x[y]=v??null}),h.push({animation:x})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=px(),r=!0}}}function C3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!bC(t,e):!1}function Ii(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function px(){return{animate:Ii(!0),whileInView:Ii(),whileHover:Ii(),whileTap:Ii(),whileDrag:Ii(),whileFocus:Ii(),exit:Ii()}}class ki{constructor(t){this.isMounted=!1,this.node=t}update(){}}class T3 extends ki{constructor(t){super(t),t.animationState||(t.animationState=E3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Vh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let P3=0;class j3 extends ki{constructor(){super(...arguments),this.id=P3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const R3={animation:{Feature:T3},exit:{Feature:j3}};function Cu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Qu(e){return{point:{x:e.pageX,y:e.pageY}}}const A3=e=>t=>Cv(t)&&e(t,Qu(t));function ql(e,t,n,r){return Cu(e,t,A3(n),r)}const _C=1e-4,O3=1-_C,I3=1+_C,kC=.01,D3=0-kC,N3=0+kC;function En(e){return e.max-e.min}function L3(e,t,n){return Math.abs(e-t)<=n}function mx(e,t,n,r=.5){e.origin=r,e.originPoint=Tt(t.min,t.max,e.origin),e.scale=En(n)/En(t),e.translate=Tt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=O3&&e.scale<=I3||isNaN(e.scale))&&(e.scale=1),(e.translate>=D3&&e.translate<=N3||isNaN(e.translate))&&(e.translate=0)}function Gl(e,t,n,r){mx(e.x,t.x,n.x,r?r.originX:void 0),mx(e.y,t.y,n.y,r?r.originY:void 0)}function gx(e,t,n){e.min=n.min+t.min,e.max=e.min+En(t)}function $3(e,t,n){gx(e.x,t.x,n.x),gx(e.y,t.y,n.y)}function yx(e,t,n){e.min=t.min-n.min,e.max=e.min+En(t)}function Ql(e,t,n){yx(e.x,t.x,n.x),yx(e.y,t.y,n.y)}function ir(e){return[e("x"),e("y")]}const SC=({current:e})=>e?e.ownerDocument.defaultView:null,vx=(e,t)=>Math.abs(e-t);function M3(e,t){const n=vx(e.x,t.x),r=vx(e.y,t.y);return Math.sqrt(n**2+r**2)}class EC{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Tp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,w=M3(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!w)return;const{point:g}=f,{timestamp:x}=rn;this.history.push({...g,timestamp:x});const{onStart:y,onMove:v}=this.handlers;p||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Cp(p,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:w,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Tp(f.type==="pointercancel"?this.lastMoveEventInfo:Cp(p,this.transformPagePoint),this.history);this.startEvent&&w&&w(f,y),g&&g(f,y)},!Cv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=Qu(t),l=Cp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=rn;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(t,Tp(l,this.history)),this.removeListeners=Hu(ql(this.contextWindow,"pointermove",this.handlePointerMove),ql(this.contextWindow,"pointerup",this.handlePointerUp),ql(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function Cp(e,t){return t?{point:t(e.point)}:e}function wx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Tp({point:e},t){return{point:e,delta:wx(e,CC(t)),offset:wx(e,F3(t)),velocity:B3(t,.1)}}function F3(e){return e[0]}function CC(e){return e[e.length-1]}function B3(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=CC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Qr(t)));)n--;if(!r)return{x:0,y:0};const i=hr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function U3(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Tt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Tt(n,e,r.max):Math.min(e,n)),e}function bx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function z3(e,{top:t,left:n,bottom:r,right:s}){return{x:bx(e.x,n,s),y:bx(e.y,t,r)}}function xx(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function V3(e,t){return{x:xx(e.x,t.x),y:xx(e.y,t.y)}}function K3(e,t){let n=.5;const r=En(e),s=En(t);return s>r?n=xu(t.min,t.max-r,e.min):r>s&&(n=xu(e.min,e.max-s,t.min)),xs(0,1,n)}function W3(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Pg=.35;function H3(e=Pg){return e===!1?e=0:e===!0&&(e=Pg),{x:_x(e,"left","right"),y:_x(e,"top","bottom")}}function _x(e,t,n){return{min:kx(e,t),max:kx(e,n)}}function kx(e,t){return typeof e=="number"?e:e[t]||0}const q3=new WeakMap;class G3{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qu(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:w,onDragStart:g}=this.getProps();if(p&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=X$(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ir(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Yr.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const C=_.layout.layoutBox[y];C&&(v=En(C)*(parseFloat(v)/100))}}this.originPoint[y]=v}),g&&_t.postRender(()=>g(h,f)),Cg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:w,onDirectionLock:g,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=f;if(w&&this.currentDirection===null){this.currentDirection=Q3(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),x&&x(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ir(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new EC(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:SC(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&_t.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Jc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=U3(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&ta(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=z3(r.layoutBox,t):this.constraints=!1,this.elastic=H3(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ir(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=W3(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ta(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=YM(r,s.root,this.visualElement.getTransformPagePoint());let o=V3(s.layout.layoutBox,i);if(n){const a=n(qM(o));this.hasMutatedConstraints=!!a,a&&(o=uC(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ir(c=>{if(!Jc(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,w={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(c,w)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Cg(this.visualElement,t),r.start(Lv(t,r,0,n,this.visualElement,!1))}stopAnimation(){ir(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ir(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ir(n=>{const{drag:r}=this.getProps();if(!Jc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-Tt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ta(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ir(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=K3({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ir(o=>{if(!Jc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Tt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;q3.set(this.visualElement,this);const t=this.visualElement.current,n=ql(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ta(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),_t.read(r);const o=Cu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ir(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Pg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Jc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Q3(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Y3 extends ki{constructor(t){super(t),this.removeGroupControls=mr,this.removeListeners=mr,this.controls=new G3(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sx=e=>(t,n)=>{e&&_t.postRender(()=>e(t,n))};class J3 extends ki{constructor(){super(...arguments),this.removePointerDownListener=mr}onPointerDown(t){this.session=new EC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Sx(t),onStart:Sx(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&_t.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=ql(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _d={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ex(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const yl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Qe.test(e))e=parseFloat(e);else return e;const n=Ex(e,t.target.x),r=Ex(e,t.target.y);return`${n}% ${r}%`}},Z3={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=vi.parse(e);if(s.length>5)return r;const i=vi.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=Tt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let Pp=!1;class X3 extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;xM(e4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),Pp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),_d.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Pp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||_t.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Ev.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Pp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function TC(e){const[t,n]=QE(),r=S.useContext(rv);return b.jsx(X3,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(aC),isPresent:t,safeToRemove:n})}const e4={borderRadius:{...yl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yl,borderTopRightRadius:yl,borderBottomLeftRadius:yl,borderBottomRightRadius:yl,boxShadow:Z3};function t4(e,t,n){const r=vn(e)?e:Da(e);return r.start(Lv("",r,t,n)),r.animation}const n4=(e,t)=>e.depth-t.depth;class r4{constructor(){this.children=[],this.isDirty=!1}add(t){ov(this.children,t),this.isDirty=!0}remove(t){av(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(n4),this.isDirty=!1,this.children.forEach(t)}}function s4(e,t){const n=$n.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(yi(r),e(i-t))};return _t.setup(r,!0),()=>yi(r)}const PC=["TopLeft","TopRight","BottomLeft","BottomRight"],i4=PC.length,Cx=e=>typeof e=="string"?parseFloat(e):e,Tx=e=>typeof e=="number"||Qe.test(e);function o4(e,t,n,r,s,i){s?(e.opacity=Tt(0,n.opacity??1,a4(r)),e.opacityExit=Tt(t.opacity??1,0,l4(r))):i&&(e.opacity=Tt(t.opacity??1,n.opacity??1,r));for(let o=0;o<i4;o++){const a=`border${PC[o]}Radius`;let l=Px(t,a),u=Px(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Tx(l)===Tx(u)?(e[a]=Math.max(Tt(Cx(l),Cx(u),r),0),(Yr.test(u)||Yr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Tt(t.rotate||0,n.rotate||0,r))}function Px(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const a4=jC(0,.5,mE),l4=jC(.5,.95,mr);function jC(e,t,n){return r=>r<e?0:r>t?1:n(xu(e,t,r))}function jx(e,t){e.min=t.min,e.max=t.max}function rr(e,t){jx(e.x,t.x),jx(e.y,t.y)}function Rx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ax(e,t,n,r,s){return e-=t,e=ah(e,1/n,r),s!==void 0&&(e=ah(e,1/s,r)),e}function u4(e,t=0,n=1,r=.5,s,i=e,o=e){if(Yr.test(t)&&(t=parseFloat(t),t=Tt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Tt(i.min,i.max,r);e===i&&(a-=t),e.min=Ax(e.min,t,n,a,s),e.max=Ax(e.max,t,n,a,s)}function Ox(e,t,[n,r,s],i,o){u4(e,t[n],t[r],t[s],t.scale,i,o)}const c4=["x","scaleX","originX"],d4=["y","scaleY","originY"];function Ix(e,t,n,r){Ox(e.x,t,c4,n?n.x:void 0,r?r.x:void 0),Ox(e.y,t,d4,n?n.y:void 0,r?r.y:void 0)}function Dx(e){return e.translate===0&&e.scale===1}function RC(e){return Dx(e.x)&&Dx(e.y)}function Nx(e,t){return e.min===t.min&&e.max===t.max}function h4(e,t){return Nx(e.x,t.x)&&Nx(e.y,t.y)}function Lx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function AC(e,t){return Lx(e.x,t.x)&&Lx(e.y,t.y)}function $x(e){return En(e.x)/En(e.y)}function Mx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class f4{constructor(){this.members=[]}add(t){ov(this.members,t),t.scheduleRender()}remove(t){if(av(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function p4(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:f,skewX:p,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const jp=["","X","Y","Z"],m4=1e3;let g4=0;function Rp(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function OC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=yC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",_t,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&OC(r)}function IC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=g4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(w4),this.nodes.forEach(k4),this.nodes.forEach(S4),this.nodes.forEach(b4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new r4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new cv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=GE(o)&&!iM(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,h=0;const f=()=>this.root.updateBlockedByResize=!1;_t.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,c&&c(),c=s4(f,250),_d.hasAnimatedSinceResize&&(_d.hasAnimatedSinceResize=!1,this.nodes.forEach(Ux)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||j4,{onLayoutAnimationStart:g,onLayoutAnimationComplete:x}=u.getProps(),y=!this.targetLayout||!AC(this.targetLayout,p),v=!h&&f;if(this.options.layoutRoot||this.resumeFrom||v||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...kv(w,"layout"),onPlay:g,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(c,v)}else h||Ux(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Bx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_4),this.nodes.forEach(y4),this.nodes.forEach(v4)):this.nodes.forEach(Bx),this.clearAllSnapshots();const a=$n.now();rn.delta=xs(0,1e3/60,a-rn.timestamp),rn.timestamp=a,rn.isProcessing=!0,vp.update.process(rn),vp.preRender.process(rn),vp.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ev.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x4),this.sharedNodes.forEach(C4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!En(this.snapshot.measuredBox.x)&&!En(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!RC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||$i(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),R4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Lt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(A4))){const{scroll:c}=this.root;c&&(na(a.x,c.offset.x),na(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Lt();if(rr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;c!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&rr(a,o),na(a.x,h.offset.x),na(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Lt();rr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ra(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),$i(c.latestValues)&&ra(l,c.latestValues)}return $i(this.latestValues)&&ra(l,this.latestValues),l}removeTransform(o){const a=Lt();rr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!$i(u.latestValues))continue;_g(u.latestValues)&&u.updateSnapshot();const c=Lt(),h=u.measurePageBox();rr(c,h),Ix(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return $i(this.latestValues)&&Ix(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=rn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),Ql(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lt(),this.targetWithTransforms=Lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rr(this.target,this.layout.layoutBox),dC(this.target,this.targetDelta)):rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),Ql(this.relativeTargetOrigin,this.target,p.target),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_g(this.parent.latestValues)||cC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;rr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;QM(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Lt());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rx(this.prevProjectionDelta.x,this.projectionDelta.x),Rx(this.prevProjectionDelta.y,this.projectionDelta.y)),Gl(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Mx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Mx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sa(),this.projectionDelta=sa(),this.projectionDeltaWithTransform=sa()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=sa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Lt(),p=l?l.source:void 0,w=this.layout?this.layout.source:void 0,g=p!==w,x=this.getStack(),y=!x||x.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(P4));this.animationProgress=0;let _;this.mixTargetDelta=C=>{const R=C/1e3;zx(h.x,o.x,R),zx(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ql(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),T4(this.relativeTarget,this.relativeTargetOrigin,f,R),_&&h4(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Lt()),rr(_,this.relativeTarget)),g&&(this.animationValues=c,o4(c,u,this.latestValues,R,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{_d.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Da(0)),this.currentAnimation=t4(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(m4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&DC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Lt();const h=En(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=En(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}rr(a,l),ra(a,c),Gl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new f4),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Rp("z",o,u,this.animationValues);for(let c=0;c<jp.length;c++)Rp(`rotate${jp[c]}`,o,u,this.animationValues),Rp(`skew${jp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=xd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=xd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!$i(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=p4(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const w in Eu){if(c[w]===void 0)continue;const{correct:g,applyTo:x,isCSSVariable:y}=Eu[w],v=h==="none"?c[w]:g(c[w],u);if(x){const _=x.length;for(let C=0;C<_;C++)o[x[C]]=v}else y?this.options.visualElement.renderState.vars[w]=v:o[w]=v}this.options.layoutId&&(o.pointerEvents=u===this?xd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Fx),this.root.sharedNodes.clear()}}}function y4(e){e.updateLayout()}function v4(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?ir(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=En(f);f.min=r[h].min,f.max=f.min+p}):DC(i,t.layoutBox,r)&&ir(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=En(r[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=sa();Gl(a,r,t.layoutBox);const l=sa();o?Gl(l,e.applyTransform(s,!0),t.measuredBox):Gl(l,r,t.layoutBox);const u=!RC(a);let c=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const w=Lt();Ql(w,t.layoutBox,f.layoutBox);const g=Lt();Ql(g,r,p.layoutBox),AC(w,g)||(c=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=w,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function w4(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function b4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function x4(e){e.clearSnapshot()}function Fx(e){e.clearMeasurements()}function Bx(e){e.isLayoutDirty=!1}function _4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ux(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function k4(e){e.resolveTargetDelta()}function S4(e){e.calcProjection()}function E4(e){e.resetSkewAndRotation()}function C4(e){e.removeLeadSnapshot()}function zx(e,t,n){e.translate=Tt(t.translate,0,n),e.scale=Tt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Vx(e,t,n,r){e.min=Tt(t.min,n.min,r),e.max=Tt(t.max,n.max,r)}function T4(e,t,n,r){Vx(e.x,t.x,n.x,r),Vx(e.y,t.y,n.y,r)}function P4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const j4={duration:.45,ease:[.4,0,.1,1]},Kx=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Wx=Kx("applewebkit/")&&!Kx("chrome/")?Math.round:mr;function Hx(e){e.min=Wx(e.min),e.max=Wx(e.max)}function R4(e){Hx(e.x),Hx(e.y)}function DC(e,t,n){return e==="position"||e==="preserve-aspect"&&!L3($x(t),$x(n),.2)}function A4(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const O4=IC({attachResizeListener:(e,t)=>Cu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ap={current:void 0},NC=IC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ap.current){const e=new O4({});e.mount(window),e.setOptions({layoutScroll:!0}),Ap.current=e}return Ap.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),I4={pan:{Feature:J3},drag:{Feature:Y3,ProjectionNode:NC,MeasureLayout:TC}};function qx(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&_t.postRender(()=>i(t,Qu(t)))}class D4 extends ki{mount(){const{current:t}=this.node;t&&(this.unmount=eM(t,(n,r)=>(qx(this.node,r,"Start"),s=>qx(this.node,s,"End"))))}unmount(){}}class N4 extends ki{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hu(Cu(this.node.current,"focus",()=>this.onFocus()),Cu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gx(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&_t.postRender(()=>i(t,Qu(t)))}class L4 extends ki{mount(){const{current:t}=this.node;t&&(this.unmount=sM(t,(n,r)=>(Gx(this.node,r,"Start"),(s,{success:i})=>Gx(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jg=new WeakMap,Op=new WeakMap,$4=e=>{const t=jg.get(e.target);t&&t(e)},M4=e=>{e.forEach($4)};function F4({root:e,...t}){const n=e||document;Op.has(n)||Op.set(n,{});const r=Op.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(M4,{root:e,...t})),r[s]}function B4(e,t,n){const r=F4(t);return jg.set(e,n),r.observe(e),()=>{jg.delete(e),r.unobserve(e)}}const U4={some:0,all:1};class z4 extends ki{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:U4[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=u?c:h;f&&f(l)};return B4(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(V4(t,n))&&this.startObserver()}unmount(){}}function V4({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const K4={inView:{Feature:z4},tap:{Feature:L4},focus:{Feature:N4},hover:{Feature:D4}},W4={layout:{ProjectionNode:NC,MeasureLayout:TC}},H4={...R3,...K4,...I4,...W4},q4=HM(H4,i3);let G4={data:""},Q4=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||G4},Y4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,J4=/\/\*[^]*?\*\/|  +/g,Qx=/\n+/g,Ws=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Ws(o,i):i+"{"+Ws(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=Ws(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ws.p?Ws.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},rs={},LC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+LC(e[n]);return t}return e},Z4=(e,t,n,r,s)=>{let i=LC(e),o=rs[i]||(rs[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!rs[o]){let l=i!==e?e:(u=>{let c,h,f=[{}];for(;c=Y4.exec(u.replace(J4,""));)c[4]?f.shift():c[3]?(h=c[3].replace(Qx," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][c[1]]=c[2].replace(Qx," ").trim();return f[0]})(e);rs[o]=Ws(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&rs.g?rs.g:null;return n&&(rs.g=rs[o]),((l,u,c,h)=>{h?u.data=u.data.replace(h,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(rs[o],t,r,a),o},X4=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ws(a,""):a===!1?"":a}return r+s+(o??"")},"");function Wh(e){let t=this||{},n=e.call?e(t.p):e;return Z4(n.unshift?n.raw?X4(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,Q4(t.target),t.g,t.o,t.k)}let $C,Rg,Ag;Wh.bind({g:1});let ks=Wh.bind({k:1});function e5(e,t,n,r){Ws.p=t,$C=e,Rg=n,Ag=r}function Si(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:Rg&&Rg()},a),n.o=/ *go\d+/.test(l),a.className=Wh.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),Ag&&u[0]&&Ag(a),$C(u,a)}return s}}var t5=e=>typeof e=="function",lh=(e,t)=>t5(e)?e(t):e,n5=(()=>{let e=0;return()=>(++e).toString()})(),MC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),r5=20,$v="default",FC=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return FC(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},kd=[],BC={toasts:[],pausedAt:void 0,settings:{toastLimit:r5}},Hr={},UC=(e,t=$v)=>{Hr[t]=FC(Hr[t]||BC,e),kd.forEach(([n,r])=>{n===t&&r(Hr[t])})},zC=e=>Object.keys(Hr).forEach(t=>UC(e,t)),s5=e=>Object.keys(Hr).find(t=>Hr[t].toasts.some(n=>n.id===e)),Hh=(e=$v)=>t=>{UC(t,e)},i5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},o5=(e={},t=$v)=>{let[n,r]=S.useState(Hr[t]||BC),s=S.useRef(Hr[t]);S.useEffect(()=>(s.current!==Hr[t]&&r(Hr[t]),kd.push([t,r]),()=>{let o=kd.findIndex(([a])=>a===t);o>-1&&kd.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||i5[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},a5=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||n5()}),Yu=e=>(t,n)=>{let r=a5(t,e,n);return Hh(r.toasterId||s5(r.id))({type:2,toast:r}),r.id},Ht=(e,t)=>Yu("blank")(e,t);Ht.error=Yu("error");Ht.success=Yu("success");Ht.loading=Yu("loading");Ht.custom=Yu("custom");Ht.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Hh(t)(n):zC(n)};Ht.dismissAll=e=>Ht.dismiss(void 0,e);Ht.remove=(e,t)=>{let n={type:4,toastId:e};t?Hh(t)(n):zC(n)};Ht.removeAll=e=>Ht.remove(void 0,e);Ht.promise=(e,t,n)=>{let r=Ht.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?lh(t.success,s):void 0;return i?Ht.success(i,{id:r,...n,...n==null?void 0:n.success}):Ht.dismiss(r),s}).catch(s=>{let i=t.error?lh(t.error,s):void 0;i?Ht.error(i,{id:r,...n,...n==null?void 0:n.error}):Ht.dismiss(r)}),e};var l5=1e3,u5=(e,t="default")=>{let{toasts:n,pausedAt:r}=o5(e,t),s=S.useRef(new Map).current,i=S.useCallback((h,f=l5)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,p)},[]);S.useEffect(()=>{if(r)return;let h=Date.now(),f=n.map(p=>{if(p.duration===1/0)return;let w=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(w<0){p.visible&&Ht.dismiss(p.id);return}return setTimeout(()=>Ht.dismiss(p.id,t),w)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[n,r,t]);let o=S.useCallback(Hh(t),[t]),a=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=S.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),u=S.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=S.useCallback((h,f)=>{let{reverseOrder:p=!1,gutter:w=8,defaultPosition:g}=f||{},x=n.filter(_=>(_.position||g)===(h.position||g)&&_.height),y=x.findIndex(_=>_.id===h.id),v=x.filter((_,C)=>C<y&&_.visible).length;return x.filter(_=>_.visible).slice(...p?[v+1]:[0,v]).reduce((_,C)=>_+(C.height||0)+w,0)},[n]);return S.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},c5=ks`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,d5=ks`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,h5=ks`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,f5=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${c5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${d5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${h5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,p5=ks`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,m5=Si("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${p5} 1s linear infinite;
`,g5=ks`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,y5=ks`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,v5=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${g5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${y5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,w5=Si("div")`
  position: absolute;
`,b5=Si("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,x5=ks`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_5=Si("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${x5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,k5=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?S.createElement(_5,null,t):t:n==="blank"?null:S.createElement(b5,null,S.createElement(m5,{...r}),n!=="loading"&&S.createElement(w5,null,n==="error"?S.createElement(f5,{...r}):S.createElement(v5,{...r})))},S5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,E5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,C5="0%{opacity:0;} 100%{opacity:1;}",T5="0%{opacity:1;} 100%{opacity:0;}",P5=Si("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,j5=Si("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,R5=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=MC()?[C5,T5]:[S5(n),E5(n)];return{animation:t?`${ks(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ks(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},A5=S.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?R5(e.position||t||"top-center",e.visible):{opacity:0},i=S.createElement(k5,{toast:e}),o=S.createElement(j5,{...e.ariaProps},lh(e.message,e));return S.createElement(P5,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):S.createElement(S.Fragment,null,i,o))});e5(S.createElement);var O5=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=S.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return S.createElement("div",{ref:i,className:t,style:n},s)},I5=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:MC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},D5=Wh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zc=16,N5=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=u5(n,i);return S.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Zc,left:Zc,right:Zc,bottom:Zc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let h=c.position||t,f=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),p=I5(h,f);return S.createElement(O5,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?D5:"",style:p},c.type==="custom"?lh(c.message,c):s?s(c):S.createElement(A5,{toast:c,position:h}))}))},ut=Ht;const VC=({isMarathiMode:e,retainEnglishNumerals:t,onMarathiModeChange:n,onRetainNumeralsChange:r})=>b.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[b.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer mb-2",children:[b.jsx("input",{type:"checkbox",checked:t,onChange:r,className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),b.jsx("span",{className:"text-gray-900 font-medium",children:"Retain English Numerals (0-9)"})]}),b.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:e,onChange:n,className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),b.jsx("span",{className:"text-gray-900 font-medium",children:"Treat content as Marathi"})]}),b.jsx("p",{className:"text-xs text-gray-500 ml-7 mt-1",children:"Drops silent Anusvaras (e.g., 'sga'  'sga') for cleaner pronunciation."})]}),KC=[{code:"original",name:"Original Script"},{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"itrans",name:"ITRANS"},{code:"iast",name:"IAST"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"}];function L5(){const{preferredLanguage:e,setPreferredLanguage:t,isMarathiMode:n,setIsMarathiMode:r,retainEnglishNumerals:s,setRetainEnglishNumerals:i}=Ts(),[o,a]=S.useState(e);S.useEffect(()=>{localStorage.setItem("preferredLanguage",o),t(o)},[o,t]);const l=h=>{a(h.target.value)},u=h=>{const f=h.target.checked;r(f),localStorage.setItem("isMarathiMode",String(f))},c=h=>{const f=h.target.checked;i(f),localStorage.setItem("retainEnglishNumerals",String(f))};return b.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md max-w-md mx-auto mt-10",children:[b.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Language Preferences"}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Script / Language:"}),b.jsx("select",{value:o,onChange:l,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-2 px-3 border",children:KC.map(h=>b.jsx("option",{value:h.code,children:h.name},h.code))})]}),b.jsx(VC,{isMarathiMode:n,retainEnglishNumerals:s,onMarathiModeChange:u,onRetainNumeralsChange:c})]})}const $5=0,M5={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},vl={marginRight:"10px"},wl={opacity:.5,cursor:"not-allowed",color:"#888"},F5=async function(e){try{return await Vt.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},B5=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters for fetching song details.");const o=await Zy(n,i);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await Fh({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,h]=a;await Xy({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:h,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${i}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function U5(){var Qt,ln,ht;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=xo(),s=zn(),i=Vn(),{session:o}=Cs(),a=(Qt=o==null?void 0:o.user)==null?void 0:Qt.email,l=(ln=s.state)==null?void 0:ln.filteredSongIndices,u=(ht=s.state)==null?void 0:ht.index,c=Nh(),h=S.useMemo(()=>decodeURIComponent(r||""),[r]),f=["songDetails",t,n,a,h],{preferredLanguage:p,setPreferredLanguage:w,isMarathiMode:g,retainEnglishNumerals:x}=Ts(),y=S.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),v=S.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),_=S.useCallback(async(Fe,He)=>{if(!Fe||!Fe.bookId||!Fe.songTitle){He(!1);return}const Ae=await $h(Fe.bookId,Fe.songTitle);He(Ae)},[]),[C,R]=S.useState(!1),[O,I]=S.useState(!1);S.useEffect(()=>(window.handleInternalNavigation=(Fe,He,Ae,un)=>{const bn=`/details/book/${Fe}/${He}/${Ae}/${encodeURIComponent(un)}`;i(bn,{state:{filteredSongIndices:l||[],index:$5},replace:!1}),console.log(`Internal navigation triggered: ${bn}`)},()=>{delete window.handleInternalNavigation}),[i,l,u]),S.useEffect(()=>{_(y,R),_(v,I)},[y,v,_]);const{isLoading:D,isFetching:$,error:F,data:he}=Vu({queryKey:f,queryFn:B5,staleTime:1/0,gcTime:0,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1});dL(({swipe:[Fe]})=>{Fe===1?(console.log("going to prev"),Me()):Fe===-1&&(console.log("going to next"),Be())},{axis:"x",filterTaps:!0});const[N,J]=S.useState(!1),[j,Q]=S.useState({x:0,y:0}),[we,z]=S.useState(!1),W=S.useRef(null),[K,de]=S.useState(""),[H,G]=S.useState(null),ve=S.useRef(null),q=Fe=>{Fe.preventDefault();const He=window.getSelection(),Ae=(He==null?void 0:He.toString().trim())??"";He&&He.rangeCount>0&&!He.getRangeAt(0).collapsed?(de(Ae),G(He.getRangeAt(0)),z(!0)):(de(""),G(null),z(!1)),Q({x:Fe.clientX,y:Fe.clientY}),z(!!K),J(!0)};S.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),S.useEffect(()=>{const Fe=He=>{W.current&&!W.current.contains(He.target)&&J(!1)};return N?window.addEventListener("mousedown",Fe):window.removeEventListener("mousedown",Fe),()=>{window.removeEventListener("mousedown",Fe)}},[N]),S.useEffect(()=>{s.state||window.location.pathname.startsWith("/sankeertan")},[s,t]),S.useEffect(()=>{const Fe=He=>{W.current&&!W.current.contains(He.target)&&J(!1)};return N&&document.addEventListener("mousedown",Fe),()=>{document.removeEventListener("mousedown",Fe)}},[N]);const ue=()=>{const Fe=window.location.href;navigator.clipboard.writeText(Fe).then(()=>{console.log("URL copied to clipboard:",Fe),ut.success("URL copied to clipboard!")}).catch(He=>{console.error("Failed to copy URL: ",He)})},se=S.useRef(null);function ye(Fe){const un=new DOMParser().parseFromString(Fe,"text/html").querySelectorAll("tr");let bn="";return un.forEach(Xr=>{const Ie=Xr.querySelectorAll("td, th"),es=[];Ie.forEach(Nr=>{var tc;let cn=Nr.innerHTML;cn=cn.replace(/<\/p>\s*<p>/gi,`
`),cn=cn.replace(/<p>|<\/p>/gi,""),cn=cn.replace(/<br\s*\/?>/gi,`
`);const Ga=document.createElement("div");Ga.innerHTML=cn;const Qa=((tc=Ga.textContent)==null?void 0:tc.trim())||"";es.push(Qa)}),bn+=es.join(" | ")+`

`}),bn.trim()}const Ee=()=>{if(!H||H.collapsed){console.warn("No valid selection range to highlight.");return}const Fe=document.createElement("span");Fe.className="highlighted-text";try{H.surroundContents(Fe),console.log("Text highlighted successfully!")}catch(He){console.error("Failed to highlight text:",He)}G(null)},ae=()=>{if(!se.current)return"";const Fe=se.current.innerHTML;return Fe.includes("<table")?ye(Fe):se.current.textContent||""},Le=(Fe=!1)=>{if(se.current){const He=se.current.innerHTML;let Ae="radhekrishna!!";Fe?Ae=He:He.includes("<table")?Ae=ye(He):Ae=se.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(Ae).then(()=>{console.log("Song content copied to clipboard:"),ut.success("Song content copied to clipboard!")}).catch(un=>{console.error("Failed to copy song: ",un)})}},Be=()=>{if(l&&u!==void 0&&u<l.length-1){const Fe=u+1,He=l[Fe];sessionStorage.setItem("lastClickedSongIndex",Fe.toString()),i(`/details/book/${e}/${t}/${He.sourceRow}/${encodeURIComponent(He.songTitle)}`,{state:{filteredSongIndices:l,index:Fe},replace:!0})}},Me=()=>{if(l&&u!==void 0&&u>0){const Fe=u-1,He=l[Fe];sessionStorage.setItem("lastClickedSongIndex",Fe.toString()),i(`/details/book/${e}/${t}/${He.sourceRow}/${encodeURIComponent(He.songTitle)}`,{state:{filteredSongIndices:l,index:Fe},replace:!0})}},dt=u===0,P=u===(l==null?void 0:l.length)-1,me=l&&l.length>0,ge=async Fe=>{if(K){const He=await fetch(`${pr}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${K}&sessionuser=${Fe}`);if(!He.ok){const un=await He.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${He.status} - ${JSON.stringify(un)}`)}const Ae=await He.json();ut.success(`Issue/Mistake is reported as ${Ae[1]}!!`)}else console.log("No text was selected.")},B=async()=>{t&&r?(await ED(t,h),ut.success("Local cache cleared. Reloading from server..."),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:f})):console.warn("Cannot reload song: bookId or songTitle is missing.")},M=async Fe=>{switch(J(!1),Fe){case"broadcast":r&&Ke();break;case"copyPageUrl":ue();break;case"CopySongAsHtml":Le(!0);break;case"CopySongAsText":Le(!1);break;case"ReportMistake":ge(a);break;case"Copy":if(K)try{await navigator.clipboard.writeText(K),ut.success("Text copied!")}catch(He){console.error("Failed to copy text: ",He),ut.error("Failed to copy text.")}break;case"Highlight":Ee();break}},re=S.useMemo(()=>b.jsx(q4.div,{ref:W,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:j.y,left:j.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:Fe=>Fe.stopPropagation(),children:b.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:we?b.jsxs(b.Fragment,{children:[b.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>M("Copy"),children:"Copy Selected"}),b.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>M("ReportMistake"),children:"Report Mistake"})]}):b.jsx(b.Fragment,{children:b.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[b.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),KC.map(Fe=>b.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:Fe.code===p?"bold":"normal",backgroundColor:Fe.code===p?"#f0f0f0":"transparent"},onClick:()=>rt(Fe),children:Fe.name},Fe.code))]})})})},"context-menu"),[we,j,p]),[_e,xe]=S.useState(!1),[fe,Se]=S.useState(null),[$e,Te]=S.useState(!0),Ke=S.useCallback(async()=>{if(_e){console.warn("isBroadcasting already");return}if(!$e){ut.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(se.current){xe(!0),Se("broadcasting");try{const Fe=se.current.innerHTML,He=await F5(Fe);xe(!1),Se("success"),ut.success("Broadcast was successful!"),Te(!1),setTimeout(()=>Se(null),2e3)}catch(Fe){console.error("Broadcast failed:",Fe),ut.error("Broadcast had errors!"),xe(!1),Se("error"),setTimeout(()=>Se(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),Se("failed"),xe(!1)},[se,_e,$e]);S.useEffect(()=>{Te(!0)},[he]),S.useEffect(()=>{he&&he.length>=3&&t&&h&&n&&(_(y,R),_(v,I))},[he,t,h,n,y,v,_]);const rt=Fe=>{w(Fe.code),J(!1)},Je={backgroundColor:"green",color:"white"},St={backgroundColor:"brown",color:"white"};if(D&&!he)return b.jsx("div",{style:M5,children:b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[b.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),b.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),b.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),b.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if(F)return b.jsxs("div",{children:["Error loading song details: ",F.message]});if(!he)return b.jsx("div",{children:"No song details available. Please try reloading."});const tr=document.getElementById("context-menu-root");return b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:ve,children:[b.jsx(nv,{}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[b.jsx("button",{onClick:Me,disabled:dt||!me,style:{...vl,...dt||!me?wl:{},...C?Je:St},children:" Prev"}),b.jsx("button",{onClick:Be,disabled:P||!me,style:{...vl,...P||!me?wl:{},...O?Je:St,marginRight:0},children:"Next "})]})]}),b.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:q,children:[b.jsx("div",{ref:se,children:he&&b.jsx(Y1,{data:he[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[0,1,2,3,4],maxWidth:"max-w-6xl",preferredLanguage:p,sourceLanguage:he[2],isMarathiMode:g,retainEnglishNumerals:x})}),b.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[b.jsxs("div",{children:[b.jsx("button",{onClick:Me,disabled:dt||!me,style:{...vl,...dt||!me?wl:{},...C?Je:St},children:" Prev"}),b.jsx("button",{onClick:Be,disabled:P||!me,style:{...vl,...P||!me?wl:{},...O?Je:St,marginRight:0},children:"Next "})]}),b.jsxs("div",{children:[b.jsx("button",{onClick:()=>{const Fe=ae();i(`/editor/book/${e}/${t}/${n}/${encodeURIComponent(r||"")}`,{state:{initialContent:Fe}})},style:{marginRight:"10px"},title:"Edit Song",children:""}),b.jsx("button",{onClick:B,disabled:$,style:{marginRight:"10px",backgroundColor:$?"#ccc":"#f0f0f0",color:$?"#666":"inherit",cursor:$?"not-allowed":"pointer"},title:"Reload from Server (Clears local cache)",children:$?b.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[b.jsxs("svg",{className:"animate-spin",style:{width:"16px",height:"16px",marginRight:"5px"},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),b.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Reloading..."]}):""}),b.jsx("button",{onClick:ue,style:{marginRight:"10px"},title:"Copy URL",children:""}),b.jsx("button",{onClick:()=>Le(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),b.jsx("button",{onClick:Ke,disabled:!$e,style:{...vl,...$e?{}:wl},title:"Broadcast",children:""})]})]}),b.jsx("style",{children:`
          .highlighted-text {
            background-color: #ffeb3b; /* Yellow background */
            padding: 2px 4px;
            border-radius: 4px;
          }
          .animate-spin {
            animation: spin 1s linear infinite;
          }
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `}),N&&tr&&_j.createPortal(b.jsx(pM,{children:re}),tr)]})]})}const z5=" || ",Yx=e=>!e||!Array.isArray(e)?"":e.map(t=>Array.isArray(t)?t.map(n=>n==null?"":String(n)).join(z5):"").join(`
`),V5=e=>{if(!e)return"";let t=e.trim();return t=t.replace(/<\/p>\s*<p>/gi,`
`),t=t.replace(/<p>|<\/p>/gi,""),t=t.replace(/<br\s*\/?>/gi,`
`),t=t.replace(/&nbsp;/gi," "),t.trim()},bl=e=>e?e.split(`
`).map(t=>`<p>${t.trim()||"&nbsp;"}</p>`).join(""):"",K5=({data:e,onChange:t})=>{const[n,r]=S.useState([]);S.useEffect(()=>{if(!e)return;const u=e.map(c=>(c||[]).map(h=>V5(String(h||""))));r(u)},[e]);const s=(u,c,h)=>{const f=[...n];f[u]=[...f[u]],f[u][c]=h,r(f);const p=f.map(w=>w.map(g=>bl(g)));t(p)},i=()=>{const u=[...n],c=u.length>0?u[0].length:1;u.push(new Array(c).fill("")),r(u);const h=u.map(f=>f.map(p=>bl(p)));t(h)},o=u=>{const c=n.filter((f,p)=>p!==u);r(c);const h=c.map(f=>f.map(p=>bl(p)));t(h)},a=()=>{const u=n.map(h=>[...h,""]);r(u);const c=u.map(h=>h.map(f=>bl(f)));t(c)},l=u=>{const c=n.map(f=>f.filter((p,w)=>w!==u));r(c);const h=c.map(f=>f.map(p=>bl(p)));t(h)};return b.jsxs("div",{className:"overflow-auto bg-white p-4 rounded shadow",children:[b.jsxs("div",{className:"mb-4 flex space-x-2",children:[b.jsx("button",{onClick:i,className:"px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 text-sm font-medium",children:"+ Add Row"}),b.jsx("button",{onClick:a,className:"px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm font-medium",children:"+ Add Column"})]}),b.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10",children:"#"}),n.length>0&&n[0].map((u,c)=>b.jsxs("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider relative group",children:["Col ",c+1,b.jsx("button",{onClick:()=>l(c),className:"ml-2 text-red-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove Column",children:""})]},c))]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((u,c)=>b.jsxs("tr",{children:[b.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-xs text-gray-500 text-center relative group w-10 bg-gray-50",children:[c+1,b.jsx("button",{onClick:()=>o(c),className:"absolute left-0 top-0 bottom-0 w-full bg-red-100 text-red-600 opacity-0 group-hover:opacity-90 flex items-center justify-center font-bold",title:"Remove Row",children:""})]}),u.map((h,f)=>b.jsx("td",{className:"px-2 py-2 border-l border-r relative min-w-[200px]",children:b.jsx("textarea",{value:h,onChange:p=>s(c,f,p.target.value),className:"w-full h-full p-2 border-none focus:ring-2 focus:ring-indigo-500 rounded resize-y min-h-[60px] text-base",placeholder:`Row ${c+1}, Col ${f+1}`,rows:Math.max(2,h.split(`
`).length)})},f))]},c))})]}),n.length===0&&b.jsx("div",{className:"text-center py-8 text-gray-500",children:'No data. Click "Add Row" to start.'}),b.jsx("div",{className:"mt-4 flex space-x-2",children:b.jsx("button",{onClick:i,className:"px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 text-sm font-medium",children:"+ Add Row at Bottom"})})]})},Jx=()=>{const e=zn(),t=Vn(),{categoryId:n,bookId:r,sourceRow:s,songTitle:i}=xo(),{categories:o}=Mh(),{session:a}=Cs(),{preferredLanguage:l,retainEnglishNumerals:u,isMarathiMode:c}=Ts(),h=!r,[f,p]=S.useState(n||""),[w,g]=S.useState(r||""),[x,y]=S.useState(i?decodeURIComponent(i):""),[v,_]=S.useState(!1),[C,R]=S.useState(""),[O,I]=S.useState(null),[D,$]=S.useState(!1),[F,he]=S.useState(!1);S.useEffect(()=>{const z=e.state;z!=null&&z.initialContent,!h&&r&&i&&s&&N(r,decodeURIComponent(i),s)},[r,i,s,h,e.state,l,u]);const N=async(z,W,K)=>{var de,H;$(!0);try{let G=[],ve="devanagari";const q=await Zy(z,W);if(q&&q.songData)G=q.songData,ve=((de=q.metadata)==null?void 0:de.language)||"devanagari",ut.success("Loaded from local cache");else if(K)try{const se=await Fh({bookId:z,sourceRow:K,songTitle:W,sessionuser:(H=a==null?void 0:a.user)==null?void 0:H.email});se&&se[0]&&(G=se[0],ve=se[2]||"devanagari",ut.success("Loaded from server"))}catch(se){console.error("Network fetch failed",se),ut.error("Failed to fetch song from server."),$(!1);return}else{R(""),I([[""]]),_(!0),ut("Creating a new song",{icon:""}),$(!1);return}let ue=G;l&&l.toLowerCase()!==ve.toLowerCase()&&(console.log(`Transliterating Editor Content: ${ve} -> ${l}`),ue=G.map(se=>se.map(ye=>typeof ye!="string"?ye:go(ye,ve,l,{retainEnglishNumerals:u,isMarathiMode:c})))),I(ue),R(Yx(ue)),_(!0)}catch(G){console.error("Error loading song:",G),ut.error("Error loading song data.")}finally{$(!1)}},J=async()=>{if(!w||!x){ut.error("Please select a book and enter a song title.");return}$(!0);try{let z;const W=await Lh(w);if(W){const K=W.find(de=>de.songTitle.toLowerCase()===x.toLowerCase());K&&(z=K.sourceRow.toString())}await N(w,x,z)}catch(z){console.error(z),ut.error("Failed to initialize editor."),$(!1)}},j=async()=>{var z;he(!0);try{const W=O;console.log("--------------------------------------------------"),console.log("SUBMITTING EDITED CONTENT (STRUCTURED DATA):"),console.log("Book:",w),console.log("Song:",x);const K=Yx(W);await VD({bookId:w,songTitle:x,text:K,sessionuser:(z=a==null?void 0:a.user)==null?void 0:z.email}),ut.success("Content saved successfully!"),h||t(-1)}catch(W){console.error("Error saving content:",W),ut.error("Failed to save content.")}finally{he(!1)}},Q=()=>{h?(_(!1),I(null),R("")):t(-1)},we=()=>{const z=o==null?void 0:o.find(K=>K.id===f||K.name===f),W=(z==null?void 0:z.books)||[];return b.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[b.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Song Editor"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Category"}),b.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",value:f,onChange:K=>{p(K.target.value),g("")},children:[b.jsx("option",{value:"",children:"-- Select Category --"}),o==null?void 0:o.map(K=>b.jsx("option",{value:K.id||K.name,children:K.name},K.id||K.name))]})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Book"}),b.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",value:w,onChange:K=>g(K.target.value),disabled:!f,children:[b.jsx("option",{value:"",children:"-- Select Book --"}),W.map(K=>b.jsx("option",{value:K.bookId,children:K.bookName},K.bookId))]})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Song Title"}),b.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter exact song title",value:x,onChange:K=>y(K.target.value)}),b.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter an existing title to edit, or a new one to create."})]}),b.jsx("button",{onClick:J,disabled:!w||!x||D,className:`w-full py-2 px-4 rounded text-white font-bold transition-colors ${!w||!x||D?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:D?"Loading...":"Start Editing"})]})};return v?b.jsxs("div",{className:"p-4 h-screen flex flex-col bg-gray-50",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsxs("div",{children:[b.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[O?"Edit Song":"Create Song",": ",x]}),b.jsxs("p",{className:"text-sm text-gray-600",children:["Book: ",w]})]}),b.jsxs("div",{className:"space-x-2",children:[b.jsx("button",{onClick:Q,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:h?"Back":"Cancel"}),b.jsxs("button",{onClick:j,disabled:F,className:`px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors flex items-center ${F?"opacity-70 cursor-not-allowed":""}`,children:[F&&b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),F?"Saving...":"Submit Changes"]})]})]}),b.jsxs("div",{className:"flex-grow flex flex-col bg-white rounded shadow p-4 overflow-hidden",children:[b.jsxs("div",{className:"bg-blue-50 p-3 mb-4 rounded text-sm text-blue-800 border border-blue-200",children:[b.jsx("strong",{children:"Instructions:"})," Edit the song content using the grid below.",b.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[b.jsx("li",{children:"Each cell represents a column."}),b.jsx("li",{children:'Use "Add Row" / "Add Column" to expand.'}),b.jsx("li",{children:"Content is automatically formatted (HTML tags stripped for editing)."})]})]}),b.jsx("div",{className:"flex-grow overflow-auto border border-gray-300 rounded",children:b.jsx(K5,{data:O||[[""]],onChange:z=>{I(z)}})})]})]}):b.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:we()})},W5=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:s,onConnectionStatusChange:i})=>{const o=S.useRef(n);S.useEffect(()=>{o.current=n},[n]);const a=S.useRef(null);return S.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, Listener skipping subscription setup."),i("DISCONNECTED");return}return a.current&&(Vt.removeChannel(a.current),a.current=null),i("CONNECTING"),a.current=Vt.channel(`broadcast:${e}`),a.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},l=>{l.new&&"content"in l.new&&r(l.new.content),l.new&&"scroll_position"in l.new&&l.new.scroll_position!==null&&o.current&&s(l.new.scroll_position)}).subscribe((l,u)=>{switch(l){case"SUBSCRIBED":i("CONNECTED");break;case"CHANNEL_ERROR":case"TIMED_OUT":case"CLOSED":i(l==="CLOSED"?"DISCONNECTED":"ERROR"),console.error(`Subscription issue for broadcast ${e}:`,u||l);break;case"CONNECTING":i("CONNECTING");break}}),()=>{a.current&&(Vt.removeChannel(a.current),a.current=null)}},[e,t==null?void 0:t.access_token,r,s,i]),null},H5=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}},q5=({broadcastId:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(null),i=S.useRef(null),[o,a]=S.useState(null),[l,u]=S.useState(!1),[c,h]=S.useState(!0),[f,p]=S.useState(!1),[w,g]=S.useState(null),[x,y]=S.useState("none"),[v,_]=S.useState(!1),[C,R]=S.useState("CONNECTING"),{preferredLanguage:O,isMarathiMode:I,retainEnglishNumerals:D}=Ts(),$=S.useCallback(z=>{R(z),console.log(`Realtime Connection Status Updated: ${z}`)},[]),F=S.useCallback(z=>{const K=go(z??"","devanagari",O,{isMarathiMode:I,retainEnglishNumerals:D});n(K)},[O,I,D]),he=S.useCallback(z=>{l&&z!==null&&s(`trRowAsAnchor-${z}`)},[l]);S.useEffect(()=>{Vt.auth.getSession().then(({data:{session:W}})=>{a(W)});const{data:z}=Vt.auth.onAuthStateChange((W,K)=>{a(K)});return()=>{z.subscription.unsubscribe()}},[]);const N=S.useCallback(async()=>{f||h(!0),g(null);try{const{data:z,error:W}=await Vt.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(W)console.error("Error fetching broadcast data:",W),g(W.message);else if(z){const K=z.content??"";let de=go(K,"devanagari",O,{isMarathiMode:I,retainEnglishNumerals:D});n(de),_(z.is_broadcasting_scroll??!1),p(!0)}}finally{h(!1)}},[e,O,I,D,f]);S.useEffect(()=>{o&&e&&!f&&N()},[o,e,N,f]),S.useEffect(()=>{if(r&&i.current){const z=r,W=i.current.querySelector(`#${z}`);W&&W.scrollIntoView({block:"start",behavior:"smooth"}),s(null)}},[r,i]);const J=S.useCallback(async z=>{if(x==="leader"&&v){const{error:W}=await Vt.from("sankeertan").update({scroll_position:z}).eq("id",e);W&&console.error("Error broadcasting scroll position:",W)}},[x,v,e]);S.useEffect(()=>{if(x!=="leader"||!v||!i.current)return;const z=i.current,W=H5(J,200),K=z.querySelectorAll("tr[id^='trRowAsAnchor-']"),de=new Set;let H=null;const G=ue=>{ue.forEach(ae=>{ae.isIntersecting?de.add(ae.target):de.delete(ae.target)});let se=null,ye=1/0;const Ee=z.getBoundingClientRect().top;if(de.forEach(ae=>{if(typeof ae.id!="string"||ae.id==="")return;const Be=ae.getBoundingClientRect().top-Ee;Be>=0&&Be<ye&&(ye=Be,se=ae.id)}),se){const Le=se.split("-").pop();if(Le){const Be=parseInt(Le);se!==H&&(H=se,W(Be))}}},ve={root:z,rootMargin:"0px",threshold:.1},q=new IntersectionObserver(G,ve);return K.forEach(ue=>{q.observe(ue)}),()=>{q.disconnect()}},[x,v,J]);const j=async()=>{const z=!v,{error:W}=await Vt.from("sankeertan").update({is_broadcasting_scroll:z}).eq("id",e);W?console.error("Failed to update broadcast scroll status:",W):_(z)},Q=z=>{z==="none"&&(_(!1),u(!1)),y(z),z==="follower"&&u(!0)},we=z=>{switch(z){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return b.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[b.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:i,children:[b.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",b.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:we(C),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${C}`}),b.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",C,")"]})]}),c&&!f?b.jsx("p",{children:"Loading content..."}):w?b.jsxs("p",{style:{color:"red"},children:["Error loading data: ",w]}):t&&b.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&x==="follower"&&b.jsx(W5,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:F,onScrollPositionUpdated:he,onConnectionStatusChange:$}),b.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[b.jsx("button",{onClick:()=>Q(x==="leader"?"none":"leader"),style:{backgroundColor:x==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x==="leader"?"Disengage (Leader)":"Become a Leader"}),x==="none"&&b.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),x==="leader"&&b.jsx("button",{onClick:j,style:{backgroundColor:v?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:v?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),b.jsx("button",{onClick:()=>Q(x==="follower"?"none":"follower"),style:{backgroundColor:x==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})},Xc=Mt(),Zx=(e,t)=>`${e.trim()}|${t.trim()}`;async function G5(){var u,c;console.log("[Dexie Load] Preparing availability check set...");const e=await Xc.songDetails.toCollection().primaryKeys(),t=new Set;for(const[h,f]of e)t.add(Zx(h,f));console.log(`[Dexie Load] Found ${t.size} available SongDetails.`);const n=await Xc.songIndices.toArray();let r=await Xc.categories.toArray();r.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(h=>setTimeout(h,500)),r=await Xc.categories.toArray(),r.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const s=new Map,i=new Map;for(const h of r){const f=(u=h.id)==null?void 0:u.trim();if(f&&i.set(f,h),Array.isArray(h.books))for(const p of h.books){const w=(c=p.bookId)==null?void 0:c.trim();if(w){let g=s.get(w);if(g){const x=Array.isArray(g.categoryId)?g.categoryId:g.categoryId?[g.categoryId]:[];f&&!x.includes(f)&&(g.categoryId=[...x,f])}else g={...p,bookId:w,bookName:p.bookName||"Unknown Book",categoryId:f?[f]:[],author:p.author||h.author,language:p.language||h.language,type:p.type||h.type,raagam:p.raagam||h.raagam,taaLam:p.taaLam||h.taaLam},s.set(w,g)}}}console.log("Book Map Keys (Flattened):",Array.from(s.keys()).length),console.log("Category Map Keys:",Array.from(i.keys()).length);const o=n.map((h,f)=>{var he,N;const p=(he=h.bookId)==null?void 0:he.trim(),w=(N=h.songTitle)==null?void 0:N.trim(),g=s.get(p);let x=[],y=[];if(g&&g.categoryId){const J=Array.isArray(g.categoryId)?g.categoryId:[g.categoryId];y=J,x=J.map(j=>{var Q;return((Q=i.get(j))==null?void 0:Q.name)||"Unknown Category"})}else x=["Unknown Category"],y=["unknown-category"];g||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${h.songTitle} | Index Book ID: '${p}'`);let v=!1;if(p&&w){const J=Zx(p,w);v=t.has(J)}const _=(g==null?void 0:g.bookName)||"Unknown Book",C=y.length>0?i.get(y[0]):void 0,R=h.author||(g==null?void 0:g.author)||(C==null?void 0:C.author)||"Unknown Author",O=h.sourceLanguage||(g==null?void 0:g.language)||(C==null?void 0:C.language)||"Unknown Language",I=h.type||(g==null?void 0:g.type)||(C==null?void 0:C.type)||"Unknown Type",D=h.raagam||(g==null?void 0:g.raagam)||(C==null?void 0:C.raagam)||"Unknown Type",$=h.taaLam||(g==null?void 0:g.taaLam)||(C==null?void 0:C.taaLam)||"Unknown Type";return{uniqueSongId:`${h.bookId}-${h.songTitle}`,indexPositionForNavigation:f,isAvailable:v,bookId:h.bookId,categoryId:y,title:h.songTitle,sourceRow:h.sourceRow,tags:h.tags||null,verseCount:h.verseCount||null,category:x,book:_,author:R,language:O,type:I,raagam:D,taaLam:$,link:h.link}}),a=new Map;for(const h of o){const f=`${h.title.toLowerCase().trim()}|${h.author.toLowerCase().trim()}`;if(a.has(f)){const p=a.get(f),w=(g,x)=>{const y=Array.isArray(g)?g:[g],v=Array.isArray(x)?x:[x];return Array.from(new Set([...y,...v]))};p.book=w(p.book,h.book),p.bookId=w(p.bookId,h.bookId),p.category=w(p.category,h.category),p.categoryId=w(p.categoryId,h.categoryId)}else a.set(f,h)}const l=Array.from(a.values());return console.log(`[Dexie Load] Deduplicated ${o.length} raw songs into ${l.length} unique songs.`),l}const Q5=["searchIndex","allSongs"],Y5=()=>Vu({queryKey:Q5,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await G5();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,networkMode:"always",refetchOnWindowFocus:!1}),J5=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const s=t[r];if(s&&s.length>0){const i=s.map(o=>o.value.toLowerCase());n=n.filter(o=>{const a=o[r];return(Array.isArray(a)?a.map(u=>String(u).toLowerCase()):[String(a).toLowerCase()]).some(u=>i.includes(u))})}}),n},Z5=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>{const s=i=>Array.isArray(i)?i.some(o=>String(o).toLowerCase().includes(n)):String(i).toLowerCase().includes(n);return s(r.title)||s(r.author)||s(r.book)||s(r.category)}):e},xl=(e,t)=>{const n=new Set;return e.forEach(r=>{const s=r[t];Array.isArray(s)?s.forEach(i=>{typeof i=="string"&&n.add(i)}):typeof s=="string"&&n.add(s)}),Array.from(n).sort()},X5=()=>{const[e,t]=S.useState(""),[n,r]=S.useState({}),[s,i]=S.useState([]),[o,a]=S.useState([]),[l,u]=S.useState("cards"),[c,h]=S.useState(!1),f=Vn(),p=30,[w,g]=S.useState({category:!0,book:!0,title:!0,author:!0,language:!0,raagam:!0}),{preferredLanguage:x,isMarathiMode:y}=Ts(),v=(q,ue="itrans")=>{const se=Array.isArray(q)?q.join(", "):q;return go(se,ue,x,{isMarathiMode:y})},{data:_,isLoading:C,isError:R,error:O}=Y5(),I=S.useMemo(()=>_||[],[_]);S.useEffect(()=>{if(I.length===0){i([]),a([]);return}let q=J5(I,n),ue=Z5(q,e);i(ue),h(!1);const se=ue.map(ye=>({indexPositionForNavigation:ye.indexPositionForNavigation,sourceRow:String(ye.sourceRow),bookId:Array.isArray(ye.bookId)?ye.bookId[0]:ye.bookId,songTitle:Array.isArray(ye.title)?ye.title.join(", "):ye.title}));a(se)},[I,n,e]);const D=(q,ue)=>{r(se=>{const ye=se[q]||[],Ee=ye.find(ae=>ae.value===ue);if(Ee)if(Ee.isNot){const ae=ye.filter(Le=>Le.value!==ue);if(ae.length===0){const Le={...se};return delete Le[q],Le}return{...se,[q]:ae}}else return{...se,[q]:ye.map(ae=>ae.value===ue?{...ae,isNot:!0}:ae)};else return{...se,[q]:[...ye,{value:ue,isNot:!1}]}})},$=()=>{r({})},F=(q,ue)=>{if(q.type==="link"&&q.link)try{const Le=JSON.parse(q.link),Be=Le.bookId,Me=Le.categoryId;if(Be&&Me){f(`/book/${Me}/${Be}`);return}}catch(Le){console.error("Failed to parse link data for song:",q.title,Le)}const se=Array.isArray(q.title)?q.title.join(", "):q.title,ye=Array.isArray(q.categoryId)?q.categoryId[0]:q.categoryId,Ee=Array.isArray(q.bookId)?q.bookId[0]:q.bookId,ae=q.sourceRow;f(`/details/book/${ye}/${Ee}/${ae}/${encodeURIComponent(se)}`,{state:{filteredSongIndices:o,index:ue}})},he=q=>{g(ue=>({...ue,[q]:!ue[q]}))},N=xl(s,"author"),J=xl(s,"language"),j=xl(s,"raagam"),Q=xl(s,"book"),we=xl(s,"category"),z={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set,raagam:new Set};e.length>0&&I.forEach(q=>{Object.entries(q).forEach(([ue,se])=>{var ye;Array.isArray(se)?se.forEach(Ee=>{var ae;typeof Ee=="string"&&Ee.toLowerCase().includes(e.toLowerCase())&&((ae=z[ue])==null||ae.add(Ee))}):typeof se=="string"&&se.toLowerCase().includes(e.toLowerCase())&&((ye=z[ue])==null||ye.add(se))})});const W=(q,ue)=>s.filter(se=>{const ye=se[q];return Array.isArray(ye)?ye.includes(ue):ye===ue}).length,K=(q,ue)=>{var ye;const se=(ye=n[q])==null?void 0:ye.find(Ee=>Ee.value===ue);return se?se.isNot?"bg-red-500 text-white":"bg-[#3498db] text-white":"hover:bg-gray-100 text-gray-700"};if(C)return b.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500 bg-[#f5f7fa]",children:"Loading search index..."});if(R)return b.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50 m-4 rounded-lg",children:["Error loading search index: ",(O==null?void 0:O.message)||"Unknown error."]});const de=q=>`${Array.isArray(q.bookId)?q.bookId.join("-"):q.bookId}-${q.title}`,H=q=>Array.isArray(q)?q.join(", "):q,G="bg-white rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.08)] border border-[#eaeaea] transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_8px_25px_rgba(0,0,0,0.15)]";return b.jsx("div",{className:"min-h-screen bg-[#f5f7fa] p-4 font-sans flex flex-col items-center",children:b.jsxs("div",{className:"w-full max-w-[1400px] bg-[#f5f7fa] p-2 md:p-4",children:[b.jsx("div",{className:"text-2xl font-bold text-[#2c3e50] border-b-2 border-[#eaeaea] pb-4 mb-6 flex justify-between items-center",children:b.jsx("span",{children:"Search Songs"})}),b.jsxs("div",{className:"relative mb-6",children:[b.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-4 rounded-xl bg-white text-lg text-[#2c3e50] placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#3498db] shadow-sm border border-gray-200 transition-all",value:e,onChange:q=>t(q.target.value)}),e&&Object.values(z).some(q=>q.size>0)&&b.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-xl shadow-xl border border-gray-200 max-h-64 overflow-y-auto",children:Object.entries(z).map(([q,ue])=>ue&&ue.size>0&&b.jsxs("div",{className:"p-3 border-b border-gray-100 last:border-0",children:[b.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-2 tracking-wider ml-2",children:q}),Array.from(ue).map((se,ye)=>b.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-[#f0f9ff] hover:text-[#3498db] text-gray-700 transition-colors",onClick:()=>{t(""),D(q,se)},children:se},ye))]},q))})]}),Object.keys(n).some(q=>{const ue=n[q];return ue&&ue.length>0})&&b.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[b.jsx("span",{className:"text-sm font-semibold text-gray-500 mr-2",children:"Active Filters:"}),Object.entries(n).map(([q,ue])=>ue==null?void 0:ue.map((se,ye)=>b.jsxs("span",{className:`${se.isNot?"bg-red-500":"bg-[#3498db]"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-2 shadow-sm`,children:[b.jsxs("span",{className:"font-medium opacity-90 capitalize",children:[q,":"]}),b.jsx("span",{className:"font-bold",children:se.value}),b.jsx("button",{onClick:()=>D(q,se.value),className:"ml-1 hover:text-gray-200 transition-colors font-bold",children:""})]},`${q}-${ye}`))),b.jsx("button",{onClick:$,className:"text-sm text-[#3498db] hover:text-[#2980b9] font-semibold transition-colors ml-auto px-3 py-1",children:"Clear All"})]}),b.jsx("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[{key:"category",label:"Category",data:we},{key:"book",label:"Book",data:Q},{key:"author",label:"Author",data:N},{key:"language",label:"Language",data:J},{key:"raagam",label:"Raagam",data:j}].map(({key:q,label:ue,data:se})=>b.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[b.jsxs("button",{onClick:()=>he(q),className:"w-full text-left px-4 py-3 text-sm font-bold text-[#2c3e50] flex justify-between items-center hover:bg-gray-50 transition-colors bg-gray-50/50",children:[ue,b.jsx("span",{className:`transform transition-transform duration-300 text-gray-400 ${w[q]?"":"rotate-180"}`,children:""})]}),b.jsx("div",{className:`overflow-hidden transition-all duration-300 ${w[q]?"max-h-0":"max-h-64 overflow-y-auto custom-scrollbar"}`,children:b.jsx("div",{className:"p-2",children:se.map(ye=>b.jsxs("button",{onClick:()=>D(q,ye),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors text-sm mb-1 ${K(q,ye)}`,children:[b.jsx("span",{className:"truncate mr-2",children:ye}),b.jsx("span",{className:"text-xs font-medium bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:W(q,ye)})]},ye))})})]},q))}),b.jsx("div",{className:"mt-4",children:!e.trim()&&!Object.values(n).some(q=>q&&q.length>0)?b.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[b.jsx("div",{className:"text-6xl mb-4 opacity-20",children:""}),b.jsx("p",{className:"text-xl text-gray-400 font-semibold",children:"Ready to Search"}),b.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter a keyword or select a filter to find songs."})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsxs("h2",{className:"text-xl font-bold text-[#2c3e50]",children:["Results ",b.jsxs("span",{className:"text-gray-400 text-lg font-normal ml-2",children:["(",s.length,")"]})]}),b.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:[b.jsx("button",{onClick:()=>u("cards"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="cards"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Cards"}),b.jsx("button",{onClick:()=>u("grid"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${l==="grid"?"bg-[#3498db] text-white shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"List"})]})]}),s.length===0?b.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[b.jsx("p",{className:"text-gray-400 text-lg",children:"No songs match your search."}),b.jsx("button",{onClick:$,className:"mt-4 text-[#3498db] font-semibold hover:underline",children:"Clear filters"})]}):b.jsx(b.Fragment,{children:!c&&s.length>p?b.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200 shadow-sm",children:[b.jsxs("p",{className:"text-lg text-gray-600 mb-2",children:["Found ",b.jsx("span",{className:"font-bold text-[#2c3e50]",children:s.length})," matches."]}),b.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"Refine your search or view all results."}),b.jsx("button",{onClick:()=>h(!0),className:"px-8 py-3 bg-[#3498db] hover:bg-[#2980b9] text-white rounded-full font-bold shadow-lg shadow-blue-200 transition-transform transform hover:scale-105",children:"Show All Results"})]}):b.jsx(b.Fragment,{children:l==="cards"?b.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map((q,ue)=>{const se=de(q);return b.jsxs("div",{onClick:()=>F(q,ue),className:`${G} p-5 cursor-pointer relative overflow-hidden group`,children:[b.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${q.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),b.jsxs("div",{className:"pl-3",children:[b.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-3 leading-tight group-hover:text-[#3498db] transition-colors",children:v(q.title,q.language)}),b.jsxs("div",{className:"space-y-1.5",children:[b.jsxs("div",{className:"flex items-start text-sm",children:[b.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Author"}),b.jsx("span",{className:"text-gray-700 font-medium",children:q.author})]}),b.jsxs("div",{className:"flex items-start text-sm",children:[b.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Raagam"}),b.jsx("span",{className:"text-gray-700",children:q.raagam||"-"})]}),b.jsxs("div",{className:"flex items-start text-sm",children:[b.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Taalam"}),b.jsx("span",{className:"text-gray-700",children:q.taaLam||"-"})]}),b.jsxs("div",{className:"flex items-start text-sm",children:[b.jsx("span",{className:"text-gray-400 w-20 flex-shrink-0 text-xs uppercase tracking-wide mt-0.5",children:"Book"}),b.jsx("span",{className:"text-gray-600 truncate",title:Array.isArray(q.book)?q.book.join(", "):q.book,children:H(q.book)})]})]})]})]},se)})}):b.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full text-left border-collapse",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold",children:[b.jsx("th",{className:"p-4",children:"Title"}),b.jsx("th",{className:"p-4 hidden md:table-cell",children:"Author"}),b.jsx("th",{className:"p-4 hidden md:table-cell",children:"Raagam"}),b.jsx("th",{className:"p-4 hidden md:table-cell",children:"Taalam"}),b.jsx("th",{className:"p-4 hidden lg:table-cell",children:"Book"}),b.jsx("th",{className:"p-4 hidden xl:table-cell",children:"Category"})]})}),b.jsx("tbody",{className:"text-sm text-[#2c3e50]",children:s.map((q,ue)=>{const se=de(q);return b.jsxs("tr",{onClick:()=>F(q,ue),className:"border-b border-gray-100 hover:bg-blue-50/50 cursor-pointer transition-colors last:border-0",children:[b.jsxs("td",{className:"p-4 font-bold group",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:`w-1.5 h-8 rounded-full mr-3 ${q.isAvailable?"bg-[#3498db]":"bg-red-400"}`}),b.jsx("span",{className:"group-hover:text-[#3498db] transition-colors",children:v(q.title,q.language)})]}),b.jsxs("div",{className:"md:hidden mt-1 ml-4 text-xs text-gray-500 space-y-0.5",children:[b.jsx("div",{children:q.author}),b.jsx("div",{children:q.raagam})]})]}),b.jsx("td",{className:"p-4 hidden md:table-cell",children:q.author}),b.jsx("td",{className:"p-4 hidden md:table-cell",children:q.raagam||"-"}),b.jsx("td",{className:"p-4 hidden md:table-cell",children:q.taaLam||"-"}),b.jsx("td",{className:"p-4 hidden lg:table-cell text-gray-600",children:b.jsx("div",{className:"truncate max-w-xs",title:Array.isArray(q.book)?q.book.join(", "):q.book,children:H(q.book)})}),b.jsx("td",{className:"p-4 hidden xl:table-cell text-gray-600",children:b.jsx("div",{className:"truncate max-w-xs",children:H(q.category)})})]},se)})})]})})})})})]})})]})})},eF="thodaya-mangalam",tF=()=>{const[e,t]=S.useState(""),n=async()=>{t("Exporting...");try{const r=await AD(eF);if(!r){t("No data found for this book or download failed.");return}const s=r.songDetails.map(u=>u),i=r.songIndices.map(u=>{const{indexId:c,timestamp:h,...f}=u;return f}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:h,...f}=u;return f}),a={bookId:r.bookId,songIndices:i,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return b.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[b.jsx("div",{style:{marginTop:"20px"},children:b.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&b.jsxs("div",{style:{marginTop:"15px"},children:[b.jsx("h4",{children:"Exported JSON Structure:"}),b.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},nF=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],rF=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:s,isDownloading:i,startBulkDownload:o}=H1(e.bookId,t),a=()=>i?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${s} `:"Ready to Download";return b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[b.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:i?"orange":n==="success"?"green":"gray"},children:a()}),b.jsx("button",{onClick:o,disabled:i,style:{padding:"5px 10px",backgroundColor:i?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:i?"Processing":"Bulk Download"})]})]})},sF=()=>{const e="test@example.com";return b.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[b.jsx("h2",{children:"Offline Content Manager"}),b.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),b.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:nF.map(t=>b.jsx(rF,{book:t,userEmail:e},t.bookId))})]})};function ed(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var WC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function o(u,c){if(!s[u]){if(!r[u]){var h=typeof ed=="function"&&ed;if(!c&&h)return h(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var p=s[u]={exports:{}};r[u][0].call(p.exports,function(w){var g=r[u][1][w];return o(g||w)},p,p.exports,n,r,s,i)}return s[u].exports}for(var a=typeof ed=="function"&&ed,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,c,h,f,p,w,g,x=[],y=0,v=l.length,_=v,C=i.getTypeOf(l)!=="string";y<l.length;)_=v-y,h=C?(u=l[y++],c=y<v?l[y++]:0,y<v?l[y++]:0):(u=l.charCodeAt(y++),c=y<v?l.charCodeAt(y++):0,y<v?l.charCodeAt(y++):0),f=u>>2,p=(3&u)<<4|c>>4,w=1<_?(15&c)<<2|h>>6:64,g=2<_?63&h:64,x.push(a.charAt(f)+a.charAt(p)+a.charAt(w)+a.charAt(g));return x.join("")},s.decode=function(l){var u,c,h,f,p,w,g=0,x=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|_):new Array(0|_);g<l.length;)u=a.indexOf(l.charAt(g++))<<2|(f=a.indexOf(l.charAt(g++)))>>4,c=(15&f)<<4|(p=a.indexOf(l.charAt(g++)))>>2,h=(3&p)<<6|(w=a.indexOf(l.charAt(g++))),v[x++]=u,p!==64&&(v[x++]=c),w!==64&&(v[x++]=h);return v}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,h,f,p,w){this.compressedSize=c,this.uncompressedSize=h,this.crc32=f,this.compression=p,this.compressedContent=w}u.prototype={getContentWorker:function(){var c=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return c.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,h,f){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,c,h,f){var p=o,w=f+h;u^=-1;for(var g=f;g<w;g++)u=u>>>8^p[255&(u^c[g])];return-1^u}(0|l,a,a.length,0):function(u,c,h,f){var p=o,w=f+h;u^=-1;for(var g=f;g<w;g++)u=u>>>8^p[255&(u^c.charCodeAt(g))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function c(h,f){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}s.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,h.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},s.compressWorker=function(h){return new c("Deflate",h)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(p,w){var g,x="";for(g=0;g<w;g++)x+=String.fromCharCode(255&p),p>>>=8;return x}function o(p,w,g,x,y,v){var _,C,R=p.file,O=p.compression,I=v!==u.utf8encode,D=a.transformTo("string",v(R.name)),$=a.transformTo("string",u.utf8encode(R.name)),F=R.comment,he=a.transformTo("string",v(F)),N=a.transformTo("string",u.utf8encode(F)),J=$.length!==R.name.length,j=N.length!==F.length,Q="",we="",z="",W=R.dir,K=R.date,de={crc32:0,compressedSize:0,uncompressedSize:0};w&&!g||(de.crc32=p.crc32,de.compressedSize=p.compressedSize,de.uncompressedSize=p.uncompressedSize);var H=0;w&&(H|=8),I||!J&&!j||(H|=2048);var G=0,ve=0;W&&(G|=16),y==="UNIX"?(ve=798,G|=function(ue,se){var ye=ue;return ue||(ye=se?16893:33204),(65535&ye)<<16}(R.unixPermissions,W)):(ve=20,G|=function(ue){return 63&(ue||0)}(R.dosPermissions)),_=K.getUTCHours(),_<<=6,_|=K.getUTCMinutes(),_<<=5,_|=K.getUTCSeconds()/2,C=K.getUTCFullYear()-1980,C<<=4,C|=K.getUTCMonth()+1,C<<=5,C|=K.getUTCDate(),J&&(we=i(1,1)+i(c(D),4)+$,Q+="up"+i(we.length,2)+we),j&&(z=i(1,1)+i(c(he),4)+N,Q+="uc"+i(z.length,2)+z);var q="";return q+=`
\0`,q+=i(H,2),q+=O.magic,q+=i(_,2),q+=i(C,2),q+=i(de.crc32,4),q+=i(de.compressedSize,4),q+=i(de.uncompressedSize,4),q+=i(D.length,2),q+=i(Q.length,2),{fileRecord:h.LOCAL_FILE_HEADER+q+D+Q,dirRecord:h.CENTRAL_FILE_HEADER+i(ve,2)+q+i(he.length,2)+"\0\0\0\0"+i(G,4)+i(x,4)+D+Q+he}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),h=n("../signature");function f(p,w,g,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=g,this.encodeFileName=x,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(f,l),f.prototype.push=function(p){var w=p.meta.percent||0,g=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(w+100*(g-x-1))/g:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var w=this.streamFiles&&!p.file.dir;if(w){var g=o(p,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var w=this.streamFiles&&!p.file.dir,g=o(p,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),w)this.push({data:function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var g=this.bytesWritten-p,x=function(y,v,_,C,R){var O=a.transformTo("string",R(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(y,2)+i(y,2)+i(v,4)+i(_,4)+i(O.length,2)+O}(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var w=this;return p.on("data",function(g){w.processChunk(g)}),p.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),p.on("error",function(g){w.error(g)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var w=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var g=0;g<w.length;g++)try{w[g].error(p)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,w=0;w<p.length;w++)p[w].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{a.forEach(function(f,p){h++;var w=function(v,_){var C=v||_,R=i[C];if(!R)throw new Error(C+" is not a valid compression method !");return R}(p.options.compression,l.compression),g=p.options.compressionOptions||l.compressionOptions||{},x=p.dir,y=p.date;p._compressWorker(w,g).withStreamInfo("file",{name:f,dir:x,date:y,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(c)}),c.entriesCount=h}catch(f){c.error(f)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function h(f){return new o.Promise(function(p,w){var g=f.decompressed.getContentWorker().pipe(new u);g.on("error",function(x){w(x)}).on("end",function(){g.streamInfo.crc32!==f.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(f,p){var w=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(g){var x=new l(p);return x.load(g),x}).then(function(g){var x=[o.Promise.resolve(g)],y=g.files;if(p.checkCRC32)for(var v=0;v<y.length;v++)x.push(h(y[v]));return o.Promise.all(x)}).then(function(g){for(var x=g.shift(),y=x.files,v=0;v<y.length;v++){var _=y[v],C=_.fileNameStr,R=i.resolve(_.fileNameStr);w.file(R,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:p.createFolders}),_.dir||(w.file(R).unsafeOriginalName=C)}return x.zipComment.length&&(w.comment=x.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,u){i.call(this,l),this._helper=a;var c=this;a.on("data",function(h,f){c.push(h)||c._helper.pause(),u&&u(f)}).on("error",function(h){c.emit("error",h)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(R,O,I){var D,$=a.getTypeOf(O),F=a.extend(I||{},c);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(R=y(R)),F.createFolders&&(D=x(R))&&v.call(this,D,!0);var he=$==="string"&&F.binary===!1&&F.base64===!1;I&&I.binary!==void 0||(F.binary=!he),(O instanceof h&&O.uncompressedSize===0||F.dir||!O||O.length===0)&&(F.base64=!1,F.binary=!0,O="",F.compression="STORE",$="string");var N=null;N=O instanceof h||O instanceof l?O:w.isNode&&w.isStream(O)?new g(R,O):a.prepareContent(R,O,F.binary,F.optimizedBinaryString,F.base64);var J=new f(R,N,F);this.files[R]=J}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),h=n("./compressedObject"),f=n("./zipObject"),p=n("./generate"),w=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),x=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var O=R.lastIndexOf("/");return 0<O?R.substring(0,O):""},y=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},v=function(R,O){return O=O!==void 0?O:c.createFolders,R=y(R),this.files[R]||i.call(this,R,null,{dir:!0,createFolders:O}),this.files[R]};function _(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var O,I,D;for(O in this.files)D=this.files[O],(I=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&R(I,D)},filter:function(R){var O=[];return this.forEach(function(I,D){R(I,D)&&O.push(D)}),O},file:function(R,O,I){if(arguments.length!==1)return R=this.root+R,i.call(this,R,O,I),this;if(_(R)){var D=R;return this.filter(function(F,he){return!he.dir&&D.test(F)})}var $=this.files[this.root+R];return $&&!$.dir?$:null},folder:function(R){if(!R)return this;if(_(R))return this.filter(function($,F){return F.dir&&R.test($)});var O=this.root+R,I=v.call(this,O),D=this.clone();return D.root=I.name,D},remove:function(R){R=this.root+R;var O=this.files[R];if(O||(R.slice(-1)!=="/"&&(R+="/"),O=this.files[R]),O&&!O.dir)delete this.files[R];else for(var I=this.filter(function($,F){return F.name.slice(0,R.length)===R}),D=0;D<I.length;D++)delete this.files[I[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var O,I={};try{if((I=a.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var D=I.comment||this.comment||"";O=p.generateWorker(this,I,D)}catch($){(O=new l("error")).error($)}return new u(O,I.type||"string",I.mimeType)},generateAsync:function(R,O){return this.generateInternalStream(R).accumulate(O)},generateNodeStream:function(R,O){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(O)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),h=a.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===u&&this.data[f+2]===c&&this.data[f+3]===h)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),h=a.charCodeAt(3),f=this.readData(4);return l===f[0]&&u===f[1]&&c===f[2]&&h===f[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(h){var f=i.getTypeOf(h);return i.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new u(h):o.uint8array?new c(i.transformTo("uint8array",h)):new a(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=i.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(w,g){return new c.Promise(function(x,y){var v=[],_=w._internalType,C=w._outputType,R=w._mimeType;w.on("data",function(O,I){v.push(O),g&&g(I)}).on("error",function(O){v=[],y(O)}).on("end",function(){try{var O=function(I,D,$){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),$);case"base64":return l.encode(D);default:return i.transformTo(I,D)}}(C,function(I,D){var $,F=0,he=null,N=0;for($=0;$<D.length;$++)N+=D[$].length;switch(I){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(he=new Uint8Array(N),$=0;$<D.length;$++)he.set(D[$],F),F+=D[$].length;return he;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+I+"'")}}(_,v),R);x(O)}catch(I){y(I)}v=[]}).resume()})}function p(w,g,x){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=x,i.checkSupport(y),this._worker=w.pipe(new o(y)),w.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}p.prototype={accumulate:function(w){return f(this,w)},on:function(w,g){var x=this;return w==="data"?this._worker.on(w,function(y){g.call(x,y.data,y.meta)}):this._worker.on(w,function(){i.delay(g,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}s.utf8encode=function(p){return o.nodebuffer?a.newBufferFrom(p,"utf-8"):function(w){var g,x,y,v,_,C=w.length,R=0;for(v=0;v<C;v++)(64512&(x=w.charCodeAt(v)))==55296&&v+1<C&&(64512&(y=w.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),v++),R+=x<128?1:x<2048?2:x<65536?3:4;for(g=o.uint8array?new Uint8Array(R):new Array(R),v=_=0;_<R;v++)(64512&(x=w.charCodeAt(v)))==55296&&v+1<C&&(64512&(y=w.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),v++),x<128?g[_++]=x:(x<2048?g[_++]=192|x>>>6:(x<65536?g[_++]=224|x>>>12:(g[_++]=240|x>>>18,g[_++]=128|x>>>12&63),g[_++]=128|x>>>6&63),g[_++]=128|63&x);return g}(p)},s.utf8decode=function(p){return o.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):function(w){var g,x,y,v,_=w.length,C=new Array(2*_);for(g=x=0;g<_;)if((y=w[g++])<128)C[x++]=y;else if(4<(v=u[y]))C[x++]=65533,g+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&g<_;)y=y<<6|63&w[g++],v--;1<v?C[x++]=65533:y<65536?C[x++]=y:(y-=65536,C[x++]=55296|y>>10&1023,C[x++]=56320|1023&y)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)}(p=i.transformTo(o.uint8array?"uint8array":"array",p))},i.inherits(h,l),h.prototype.processChunk=function(p){var w=i.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=w;(w=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),w.set(g,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var x=function(v,_){var C;for((_=_||v.length)>v.length&&(_=v.length),C=_-1;0<=C&&(192&v[C])==128;)C--;return C<0||C===0?_:C+u[v[C]]>_?C:_}(w),y=w;x!==w.length&&(o.uint8array?(y=w.subarray(0,x),this.leftOver=w.subarray(x,w.length)):(y=w.slice(0,x),this.leftOver=w.slice(x,w.length))),this.push({data:s.utf8decode(y),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,i.inherits(f,l),f.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(g){return g}function c(g,x){for(var y=0;y<g.length;++y)x[y]=255&g.charCodeAt(y);return x}n("setimmediate"),s.newBlob=function(g,x){s.checkSupport("blob");try{return new Blob([g],{type:x})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,x,y){var v=[],_=0,C=g.length;if(C<=y)return String.fromCharCode.apply(null,g);for(;_<C;)x==="array"||x==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(_,Math.min(_+y,C)))):v.push(String.fromCharCode.apply(null,g.subarray(_,Math.min(_+y,C)))),_+=y;return v.join("")},stringifyByChar:function(g){for(var x="",y=0;y<g.length;y++)x+=String.fromCharCode(g[y]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function f(g){var x=65536,y=s.getTypeOf(g),v=!0;if(y==="uint8array"?v=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<x;)try{return h.stringifyByChunk(g,y,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(g)}function p(g,x){for(var y=0;y<g.length;y++)x[y]=g[y];return x}s.applyFromCharCode=f;var w={};w.string={string:u,array:function(g){return c(g,new Array(g.length))},arraybuffer:function(g){return w.string.uint8array(g).buffer},uint8array:function(g){return c(g,new Uint8Array(g.length))},nodebuffer:function(g){return c(g,a.allocBuffer(g.length))}},w.array={string:f,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},w.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},w.uint8array={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return a.newBufferFrom(g)}},w.nodebuffer={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return w.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:u},s.transformTo=function(g,x){if(x=x||"",!g)return x;s.checkSupport(g);var y=s.getTypeOf(x);return w[y][g](x)},s.resolve=function(g){for(var x=g.split("/"),y=[],v=0;v<x.length;v++){var _=x[v];_==="."||_===""&&v!==0&&v!==x.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},s.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(g)?"nodebuffer":i.uint8array&&g instanceof Uint8Array?"uint8array":i.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(g){if(!i[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(g){var x,y,v="";for(y=0;y<(g||"").length;y++)v+="\\x"+((x=g.charCodeAt(y))<16?"0":"")+x.toString(16).toUpperCase();return v},s.delay=function(g,x,y){setImmediate(function(){g.apply(y||null,x||[])})},s.inherits=function(g,x){function y(){}y.prototype=x.prototype,g.prototype=new y},s.extend=function(){var g,x,y={};for(g=0;g<arguments.length;g++)for(x in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],x)&&y[x]===void 0&&(y[x]=arguments[g][x]);return y},s.prepareContent=function(g,x,y,v,_){return l.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(R,O){var I=new FileReader;I.onload=function(D){R(D.target.result)},I.onerror=function(D){O(D.target.error)},I.readAsArrayBuffer(C)}):C}).then(function(C){var R=s.getTypeOf(C);return R?(R==="arraybuffer"?C=s.transformTo("uint8array",C):R==="string"&&(_?C=o.decode(C):y&&v!==!0&&(C=function(O){return c(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(h){this.files=[],this.loadOptions=h}c.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(h)+")")}},isSignature:function(h,f){var p=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===f;return this.reader.setIndex(p),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",p=o.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,p,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var w=f-p;if(0<w)this.isSignature(f,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),h=n("./support");function f(p,w){this.options=p,this.loadOptions=w}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var w,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(x){for(var y in c)if(Object.prototype.hasOwnProperty.call(c,y)&&c[y].magic===x)return c[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var w=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(w),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var w,g,x,y=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<y;)w=p.readInt(2),g=p.readInt(2),x=p.readData(g),this.extraFields[w]={id:w,length:g,value:x};p.setIndex(y)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var g=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var y=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var w=i(p.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:u.utf8decode(w.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var w=i(p.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:u.utf8decode(w.readData(p.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,g,x){this.name=w,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=g,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var g=null,x="string";try{if(!w)throw new Error("No output type specified.");var y=(x=w.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(g=g.pipe(new l.Utf8EncodeWorker)),!v&&y&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(_){(g=new c("error")).error(_)}return new o(g,x,"")},async:function(w,g){return this.internalStream(w).accumulate(g)},nodeStream:function(w,g){return this.internalStream(w||"nodebuffer").toNodejsStream(g)},_compressWorker:function(w,g){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,w,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)i.prototype[h[p]]=f;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,c=new l(w),h=i.document.createTextNode("");c.observe(h,{characterData:!0}),o=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var g=i.document.createElement("script");g.onreadystatechange=function(){w(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},i.document.documentElement.appendChild(g)}:function(){setTimeout(w,0)};else{var f=new i.MessageChannel;f.port1.onmessage=w,o=function(){f.port2.postMessage(0)}}var p=[];function w(){var g,x;a=!0;for(var y=p.length;y;){for(x=p,p=[],g=-1;++g<y;)x[g]();y=p.length}a=!1}r.exports=function(g){p.push(g)!==1||a||o()}}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,y!==o&&g(this,y)}function f(y,v,_){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function p(y,v,_){i(function(){var C;try{C=v(_)}catch(R){return a.reject(y,R)}C===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,C)})}function w(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function g(y,v){var _=!1;function C(I){_||(_=!0,a.reject(y,I))}function R(I){_||(_=!0,a.resolve(y,I))}var O=x(function(){v(R,C)});O.status==="error"&&C(O.value)}function x(y,v){var _={};try{_.value=y(v),_.status="success"}catch(C){_.status="error",_.value=C}return _}(r.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(_){return v.resolve(y()).then(function(){return _})},function(_){return v.resolve(y()).then(function(){throw _})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,v){if(typeof y!="function"&&this.state===u||typeof v!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==c?p(_,this.state===u?y:v,this.outcome):this.queue.push(new f(_,y,v)),_},f.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},f.prototype.otherCallFulfilled=function(y){p(this.promise,this.onFulfilled,y)},f.prototype.callRejected=function(y){a.reject(this.promise,y)},f.prototype.otherCallRejected=function(y){p(this.promise,this.onRejected,y)},a.resolve=function(y,v){var _=x(w,v);if(_.status==="error")return a.reject(y,_.value);var C=_.value;if(C)g(y,C);else{y.state=u,y.outcome=v;for(var R=-1,O=y.queue.length;++R<O;)y.queue[R].callFulfilled(v)}return y},a.reject=function(y,v){y.state=l,y.outcome=v;for(var _=-1,C=y.queue.length;++_<C;)y.queue[_].callRejected(v);return y},h.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},h.reject=function(y){var v=new this(o);return a.reject(v,y)},h.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,C=!1;if(!_)return this.resolve([]);for(var R=new Array(_),O=0,I=-1,D=new this(o);++I<_;)$(y[I],I);return D;function $(F,he){v.resolve(F).then(function(N){R[he]=N,++O!==_||C||(C=!0,a.resolve(D,R))},function(N){C||(C=!0,a.reject(D,N))})}},h.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,C=!1;if(!_)return this.resolve([]);for(var R=-1,O=new this(o);++R<_;)I=y[R],v.resolve(I).then(function(D){C||(C=!0,a.resolve(O,D))},function(D){C||(C=!0,a.reject(O,D))});var I;return O}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,h=0,f=-1,p=0,w=8;function g(y){if(!(this instanceof g))return new g(y);this.options=o.assign({level:f,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(_!==h)throw new Error(l[_]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var C;if(C=typeof v.dictionary=="string"?a.string2buf(v.dictionary):c.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(_=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[_]);this._dict_set=!0}}function x(y,v){var _=new g(v);if(_.push(y,!0),_.err)throw _.msg||l[_.err];return _.result}g.prototype.push=function(y,v){var _,C,R=this.strm,O=this.options.chunkSize;if(this.ended)return!1;C=v===~~v?v:v===!0?4:0,typeof y=="string"?R.input=a.string2buf(y):c.call(y)==="[object ArrayBuffer]"?R.input=new Uint8Array(y):R.input=y,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(O),R.next_out=0,R.avail_out=O),(_=i.deflate(R,C))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(R.output,R.next_out))):this.onData(o.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&_!==1);return C===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):C!==2||(this.onEnd(h),!(R.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Deflate=g,s.deflate=x,s.deflateRaw=function(y,v){return(v=v||{}).raw=!0,x(y,v)},s.gzip=function(y,v){return(v=v||{}).gzip=!0,x(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),h=n("./zlib/gzheader"),f=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||g&&g.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var y=i.inflateInit2(this.strm,x.windowBits);if(y!==l.Z_OK)throw new Error(u[y]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function w(g,x){var y=new p(x);if(y.push(g,!0),y.err)throw y.msg||u[y.err];return y.result}p.prototype.push=function(g,x){var y,v,_,C,R,O,I=this.strm,D=this.options.chunkSize,$=this.options.dictionary,F=!1;if(this.ended)return!1;v=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?I.input=a.binstring2buf(g):f.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(D),I.next_out=0,I.avail_out=D),(y=i.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&$&&(O=typeof $=="string"?a.string2buf($):f.call($)==="[object ArrayBuffer]"?new Uint8Array($):$,y=i.inflateSetDictionary(this.strm,O)),y===l.Z_BUF_ERROR&&F===!0&&(y=l.Z_OK,F=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&y!==l.Z_STREAM_END&&(I.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(I.output,I.next_out),C=I.next_out-_,R=a.buf2string(I.output,_),I.next_out=C,I.avail_out=D-C,C&&o.arraySet(I.output,I.output,_,C,0),this.onData(R)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(F=!0)}while((0<I.avail_in||I.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(y=i.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=p,s.inflate=w,s.inflateRaw=function(g,x){return(x=x||{}).raw=!0,w(g,x)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,h,f){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+h),f);else for(var p=0;p<h;p++)l[f+p]=u[c+p]},flattenChunks:function(l){var u,c,h,f,p,w;for(u=h=0,c=l.length;u<c;u++)h+=l[u].length;for(w=new Uint8Array(h),u=f=0,c=l.length;u<c;u++)p=l[u],w.set(p,f),f+=p.length;return w}},a={arraySet:function(l,u,c,h,f){for(var p=0;p<h;p++)l[f+p]=u[c+p]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(h,f){if(f<65537&&(h.subarray&&a||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,f));for(var p="",w=0;w<f;w++)p+=String.fromCharCode(h[w]);return p}l[254]=l[254]=1,s.string2buf=function(h){var f,p,w,g,x,y=h.length,v=0;for(g=0;g<y;g++)(64512&(p=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(w=h.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(w-56320),g++),v+=p<128?1:p<2048?2:p<65536?3:4;for(f=new i.Buf8(v),g=x=0;x<v;g++)(64512&(p=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(w=h.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(w-56320),g++),p<128?f[x++]=p:(p<2048?f[x++]=192|p>>>6:(p<65536?f[x++]=224|p>>>12:(f[x++]=240|p>>>18,f[x++]=128|p>>>12&63),f[x++]=128|p>>>6&63),f[x++]=128|63&p);return f},s.buf2binstring=function(h){return c(h,h.length)},s.binstring2buf=function(h){for(var f=new i.Buf8(h.length),p=0,w=f.length;p<w;p++)f[p]=h.charCodeAt(p);return f},s.buf2string=function(h,f){var p,w,g,x,y=f||h.length,v=new Array(2*y);for(p=w=0;p<y;)if((g=h[p++])<128)v[w++]=g;else if(4<(x=l[g]))v[w++]=65533,p+=x-1;else{for(g&=x===2?31:x===3?15:7;1<x&&p<y;)g=g<<6|63&h[p++],x--;1<x?v[w++]=65533:g<65536?v[w++]=g:(g-=65536,v[w++]=55296|g>>10&1023,v[w++]=56320|1023&g)}return c(v,w)},s.utf8border=function(h,f){var p;for((f=f||h.length)>h.length&&(f=h.length),p=f-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?f:p+l[h[p]]>f?p:f}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var u=65535&i|0,c=i>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--h;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=i,h=u+l;o^=-1;for(var f=u;f<h;f++)o=o>>>8^c[255&(o^a[f])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),h=0,f=4,p=0,w=-2,g=-1,x=4,y=2,v=8,_=9,C=286,R=30,O=19,I=2*C+1,D=15,$=3,F=258,he=F+$+1,N=42,J=113,j=1,Q=2,we=3,z=4;function W(P,me){return P.msg=c[me],me}function K(P){return(P<<1)-(4<P?9:0)}function de(P){for(var me=P.length;0<=--me;)P[me]=0}function H(P){var me=P.state,ge=me.pending;ge>P.avail_out&&(ge=P.avail_out),ge!==0&&(o.arraySet(P.output,me.pending_buf,me.pending_out,ge,P.next_out),P.next_out+=ge,me.pending_out+=ge,P.total_out+=ge,P.avail_out-=ge,me.pending-=ge,me.pending===0&&(me.pending_out=0))}function G(P,me){a._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,me),P.block_start=P.strstart,H(P.strm)}function ve(P,me){P.pending_buf[P.pending++]=me}function q(P,me){P.pending_buf[P.pending++]=me>>>8&255,P.pending_buf[P.pending++]=255&me}function ue(P,me){var ge,B,M=P.max_chain_length,re=P.strstart,_e=P.prev_length,xe=P.nice_match,fe=P.strstart>P.w_size-he?P.strstart-(P.w_size-he):0,Se=P.window,$e=P.w_mask,Te=P.prev,Ke=P.strstart+F,rt=Se[re+_e-1],Je=Se[re+_e];P.prev_length>=P.good_match&&(M>>=2),xe>P.lookahead&&(xe=P.lookahead);do if(Se[(ge=me)+_e]===Je&&Se[ge+_e-1]===rt&&Se[ge]===Se[re]&&Se[++ge]===Se[re+1]){re+=2,ge++;do;while(Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&Se[++re]===Se[++ge]&&re<Ke);if(B=F-(Ke-re),re=Ke-F,_e<B){if(P.match_start=me,xe<=(_e=B))break;rt=Se[re+_e-1],Je=Se[re+_e]}}while((me=Te[me&$e])>fe&&--M!=0);return _e<=P.lookahead?_e:P.lookahead}function se(P){var me,ge,B,M,re,_e,xe,fe,Se,$e,Te=P.w_size;do{if(M=P.window_size-P.lookahead-P.strstart,P.strstart>=Te+(Te-he)){for(o.arraySet(P.window,P.window,Te,Te,0),P.match_start-=Te,P.strstart-=Te,P.block_start-=Te,me=ge=P.hash_size;B=P.head[--me],P.head[me]=Te<=B?B-Te:0,--ge;);for(me=ge=Te;B=P.prev[--me],P.prev[me]=Te<=B?B-Te:0,--ge;);M+=Te}if(P.strm.avail_in===0)break;if(_e=P.strm,xe=P.window,fe=P.strstart+P.lookahead,Se=M,$e=void 0,$e=_e.avail_in,Se<$e&&($e=Se),ge=$e===0?0:(_e.avail_in-=$e,o.arraySet(xe,_e.input,_e.next_in,$e,fe),_e.state.wrap===1?_e.adler=l(_e.adler,xe,$e,fe):_e.state.wrap===2&&(_e.adler=u(_e.adler,xe,$e,fe)),_e.next_in+=$e,_e.total_in+=$e,$e),P.lookahead+=ge,P.lookahead+P.insert>=$)for(re=P.strstart-P.insert,P.ins_h=P.window[re],P.ins_h=(P.ins_h<<P.hash_shift^P.window[re+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[re+$-1])&P.hash_mask,P.prev[re&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=re,re++,P.insert--,!(P.lookahead+P.insert<$)););}while(P.lookahead<he&&P.strm.avail_in!==0)}function ye(P,me){for(var ge,B;;){if(P.lookahead<he){if(se(P),P.lookahead<he&&me===h)return j;if(P.lookahead===0)break}if(ge=0,P.lookahead>=$&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+$-1])&P.hash_mask,ge=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),ge!==0&&P.strstart-ge<=P.w_size-he&&(P.match_length=ue(P,ge)),P.match_length>=$)if(B=a._tr_tally(P,P.strstart-P.match_start,P.match_length-$),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=$){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+$-1])&P.hash_mask,ge=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else B=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(B&&(G(P,!1),P.strm.avail_out===0))return j}return P.insert=P.strstart<$-1?P.strstart:$-1,me===f?(G(P,!0),P.strm.avail_out===0?we:z):P.last_lit&&(G(P,!1),P.strm.avail_out===0)?j:Q}function Ee(P,me){for(var ge,B,M;;){if(P.lookahead<he){if(se(P),P.lookahead<he&&me===h)return j;if(P.lookahead===0)break}if(ge=0,P.lookahead>=$&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+$-1])&P.hash_mask,ge=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=$-1,ge!==0&&P.prev_length<P.max_lazy_match&&P.strstart-ge<=P.w_size-he&&(P.match_length=ue(P,ge),P.match_length<=5&&(P.strategy===1||P.match_length===$&&4096<P.strstart-P.match_start)&&(P.match_length=$-1)),P.prev_length>=$&&P.match_length<=P.prev_length){for(M=P.strstart+P.lookahead-$,B=a._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-$),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=M&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+$-1])&P.hash_mask,ge=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=$-1,P.strstart++,B&&(G(P,!1),P.strm.avail_out===0))return j}else if(P.match_available){if((B=a._tr_tally(P,0,P.window[P.strstart-1]))&&G(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return j}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(B=a._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<$-1?P.strstart:$-1,me===f?(G(P,!0),P.strm.avail_out===0?we:z):P.last_lit&&(G(P,!1),P.strm.avail_out===0)?j:Q}function ae(P,me,ge,B,M){this.good_length=P,this.max_lazy=me,this.nice_length=ge,this.max_chain=B,this.func=M}function Le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*C+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Be(P){var me;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=y,(me=P.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?N:J,P.adler=me.wrap===2?0:1,me.last_flush=h,a._tr_init(me),p):W(P,w)}function Me(P){var me=Be(P);return me===p&&function(ge){ge.window_size=2*ge.w_size,de(ge.head),ge.max_lazy_match=i[ge.level].max_lazy,ge.good_match=i[ge.level].good_length,ge.nice_match=i[ge.level].nice_length,ge.max_chain_length=i[ge.level].max_chain,ge.strstart=0,ge.block_start=0,ge.lookahead=0,ge.insert=0,ge.match_length=ge.prev_length=$-1,ge.match_available=0,ge.ins_h=0}(P.state),me}function dt(P,me,ge,B,M,re){if(!P)return w;var _e=1;if(me===g&&(me=6),B<0?(_e=0,B=-B):15<B&&(_e=2,B-=16),M<1||_<M||ge!==v||B<8||15<B||me<0||9<me||re<0||x<re)return W(P,w);B===8&&(B=9);var xe=new Le;return(P.state=xe).strm=P,xe.wrap=_e,xe.gzhead=null,xe.w_bits=B,xe.w_size=1<<xe.w_bits,xe.w_mask=xe.w_size-1,xe.hash_bits=M+7,xe.hash_size=1<<xe.hash_bits,xe.hash_mask=xe.hash_size-1,xe.hash_shift=~~((xe.hash_bits+$-1)/$),xe.window=new o.Buf8(2*xe.w_size),xe.head=new o.Buf16(xe.hash_size),xe.prev=new o.Buf16(xe.w_size),xe.lit_bufsize=1<<M+6,xe.pending_buf_size=4*xe.lit_bufsize,xe.pending_buf=new o.Buf8(xe.pending_buf_size),xe.d_buf=1*xe.lit_bufsize,xe.l_buf=3*xe.lit_bufsize,xe.level=me,xe.strategy=re,xe.method=ge,Me(P)}i=[new ae(0,0,0,0,function(P,me){var ge=65535;for(ge>P.pending_buf_size-5&&(ge=P.pending_buf_size-5);;){if(P.lookahead<=1){if(se(P),P.lookahead===0&&me===h)return j;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var B=P.block_start+ge;if((P.strstart===0||P.strstart>=B)&&(P.lookahead=P.strstart-B,P.strstart=B,G(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-he&&(G(P,!1),P.strm.avail_out===0))return j}return P.insert=0,me===f?(G(P,!0),P.strm.avail_out===0?we:z):(P.strstart>P.block_start&&(G(P,!1),P.strm.avail_out),j)}),new ae(4,4,8,4,ye),new ae(4,5,16,8,ye),new ae(4,6,32,32,ye),new ae(4,4,16,16,Ee),new ae(8,16,32,32,Ee),new ae(8,16,128,128,Ee),new ae(8,32,128,256,Ee),new ae(32,128,258,1024,Ee),new ae(32,258,258,4096,Ee)],s.deflateInit=function(P,me){return dt(P,me,v,15,8,0)},s.deflateInit2=dt,s.deflateReset=Me,s.deflateResetKeep=Be,s.deflateSetHeader=function(P,me){return P&&P.state?P.state.wrap!==2?w:(P.state.gzhead=me,p):w},s.deflate=function(P,me){var ge,B,M,re;if(!P||!P.state||5<me||me<0)return P?W(P,w):w;if(B=P.state,!P.output||!P.input&&P.avail_in!==0||B.status===666&&me!==f)return W(P,P.avail_out===0?-5:w);if(B.strm=P,ge=B.last_flush,B.last_flush=me,B.status===N)if(B.wrap===2)P.adler=0,ve(B,31),ve(B,139),ve(B,8),B.gzhead?(ve(B,(B.gzhead.text?1:0)+(B.gzhead.hcrc?2:0)+(B.gzhead.extra?4:0)+(B.gzhead.name?8:0)+(B.gzhead.comment?16:0)),ve(B,255&B.gzhead.time),ve(B,B.gzhead.time>>8&255),ve(B,B.gzhead.time>>16&255),ve(B,B.gzhead.time>>24&255),ve(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),ve(B,255&B.gzhead.os),B.gzhead.extra&&B.gzhead.extra.length&&(ve(B,255&B.gzhead.extra.length),ve(B,B.gzhead.extra.length>>8&255)),B.gzhead.hcrc&&(P.adler=u(P.adler,B.pending_buf,B.pending,0)),B.gzindex=0,B.status=69):(ve(B,0),ve(B,0),ve(B,0),ve(B,0),ve(B,0),ve(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),ve(B,3),B.status=J);else{var _e=v+(B.w_bits-8<<4)<<8;_e|=(2<=B.strategy||B.level<2?0:B.level<6?1:B.level===6?2:3)<<6,B.strstart!==0&&(_e|=32),_e+=31-_e%31,B.status=J,q(B,_e),B.strstart!==0&&(q(B,P.adler>>>16),q(B,65535&P.adler)),P.adler=1}if(B.status===69)if(B.gzhead.extra){for(M=B.pending;B.gzindex<(65535&B.gzhead.extra.length)&&(B.pending!==B.pending_buf_size||(B.gzhead.hcrc&&B.pending>M&&(P.adler=u(P.adler,B.pending_buf,B.pending-M,M)),H(P),M=B.pending,B.pending!==B.pending_buf_size));)ve(B,255&B.gzhead.extra[B.gzindex]),B.gzindex++;B.gzhead.hcrc&&B.pending>M&&(P.adler=u(P.adler,B.pending_buf,B.pending-M,M)),B.gzindex===B.gzhead.extra.length&&(B.gzindex=0,B.status=73)}else B.status=73;if(B.status===73)if(B.gzhead.name){M=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>M&&(P.adler=u(P.adler,B.pending_buf,B.pending-M,M)),H(P),M=B.pending,B.pending===B.pending_buf_size)){re=1;break}re=B.gzindex<B.gzhead.name.length?255&B.gzhead.name.charCodeAt(B.gzindex++):0,ve(B,re)}while(re!==0);B.gzhead.hcrc&&B.pending>M&&(P.adler=u(P.adler,B.pending_buf,B.pending-M,M)),re===0&&(B.gzindex=0,B.status=91)}else B.status=91;if(B.status===91)if(B.gzhead.comment){M=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>M&&(P.adler=u(P.adler,B.pending_buf,B.pending-M,M)),H(P),M=B.pending,B.pending===B.pending_buf_size)){re=1;break}re=B.gzindex<B.gzhead.comment.length?255&B.gzhead.comment.charCodeAt(B.gzindex++):0,ve(B,re)}while(re!==0);B.gzhead.hcrc&&B.pending>M&&(P.adler=u(P.adler,B.pending_buf,B.pending-M,M)),re===0&&(B.status=103)}else B.status=103;if(B.status===103&&(B.gzhead.hcrc?(B.pending+2>B.pending_buf_size&&H(P),B.pending+2<=B.pending_buf_size&&(ve(B,255&P.adler),ve(B,P.adler>>8&255),P.adler=0,B.status=J)):B.status=J),B.pending!==0){if(H(P),P.avail_out===0)return B.last_flush=-1,p}else if(P.avail_in===0&&K(me)<=K(ge)&&me!==f)return W(P,-5);if(B.status===666&&P.avail_in!==0)return W(P,-5);if(P.avail_in!==0||B.lookahead!==0||me!==h&&B.status!==666){var xe=B.strategy===2?function(fe,Se){for(var $e;;){if(fe.lookahead===0&&(se(fe),fe.lookahead===0)){if(Se===h)return j;break}if(fe.match_length=0,$e=a._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++,$e&&(G(fe,!1),fe.strm.avail_out===0))return j}return fe.insert=0,Se===f?(G(fe,!0),fe.strm.avail_out===0?we:z):fe.last_lit&&(G(fe,!1),fe.strm.avail_out===0)?j:Q}(B,me):B.strategy===3?function(fe,Se){for(var $e,Te,Ke,rt,Je=fe.window;;){if(fe.lookahead<=F){if(se(fe),fe.lookahead<=F&&Se===h)return j;if(fe.lookahead===0)break}if(fe.match_length=0,fe.lookahead>=$&&0<fe.strstart&&(Te=Je[Ke=fe.strstart-1])===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]){rt=fe.strstart+F;do;while(Te===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]&&Te===Je[++Ke]&&Ke<rt);fe.match_length=F-(rt-Ke),fe.match_length>fe.lookahead&&(fe.match_length=fe.lookahead)}if(fe.match_length>=$?($e=a._tr_tally(fe,1,fe.match_length-$),fe.lookahead-=fe.match_length,fe.strstart+=fe.match_length,fe.match_length=0):($e=a._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++),$e&&(G(fe,!1),fe.strm.avail_out===0))return j}return fe.insert=0,Se===f?(G(fe,!0),fe.strm.avail_out===0?we:z):fe.last_lit&&(G(fe,!1),fe.strm.avail_out===0)?j:Q}(B,me):i[B.level].func(B,me);if(xe!==we&&xe!==z||(B.status=666),xe===j||xe===we)return P.avail_out===0&&(B.last_flush=-1),p;if(xe===Q&&(me===1?a._tr_align(B):me!==5&&(a._tr_stored_block(B,0,0,!1),me===3&&(de(B.head),B.lookahead===0&&(B.strstart=0,B.block_start=0,B.insert=0))),H(P),P.avail_out===0))return B.last_flush=-1,p}return me!==f?p:B.wrap<=0?1:(B.wrap===2?(ve(B,255&P.adler),ve(B,P.adler>>8&255),ve(B,P.adler>>16&255),ve(B,P.adler>>24&255),ve(B,255&P.total_in),ve(B,P.total_in>>8&255),ve(B,P.total_in>>16&255),ve(B,P.total_in>>24&255)):(q(B,P.adler>>>16),q(B,65535&P.adler)),H(P),0<B.wrap&&(B.wrap=-B.wrap),B.pending!==0?p:1)},s.deflateEnd=function(P){var me;return P&&P.state?(me=P.state.status)!==N&&me!==69&&me!==73&&me!==91&&me!==103&&me!==J&&me!==666?W(P,w):(P.state=null,me===J?W(P,-3):p):w},s.deflateSetDictionary=function(P,me){var ge,B,M,re,_e,xe,fe,Se,$e=me.length;if(!P||!P.state||(re=(ge=P.state).wrap)===2||re===1&&ge.status!==N||ge.lookahead)return w;for(re===1&&(P.adler=l(P.adler,me,$e,0)),ge.wrap=0,$e>=ge.w_size&&(re===0&&(de(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),Se=new o.Buf8(ge.w_size),o.arraySet(Se,me,$e-ge.w_size,ge.w_size,0),me=Se,$e=ge.w_size),_e=P.avail_in,xe=P.next_in,fe=P.input,P.avail_in=$e,P.next_in=0,P.input=me,se(ge);ge.lookahead>=$;){for(B=ge.strstart,M=ge.lookahead-($-1);ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[B+$-1])&ge.hash_mask,ge.prev[B&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=B,B++,--M;);ge.strstart=B,ge.lookahead=$-1,se(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=$-1,ge.match_available=0,P.next_in=xe,P.input=fe,P.avail_in=_e,ge.wrap=re,p},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,u,c,h,f,p,w,g,x,y,v,_,C,R,O,I,D,$,F,he,N,J,j,Q;a=i.state,l=i.next_in,j=i.input,u=l+(i.avail_in-5),c=i.next_out,Q=i.output,h=c-(o-i.avail_out),f=c+(i.avail_out-257),p=a.dmax,w=a.wsize,g=a.whave,x=a.wnext,y=a.window,v=a.hold,_=a.bits,C=a.lencode,R=a.distcode,O=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{_<15&&(v+=j[l++]<<_,_+=8,v+=j[l++]<<_,_+=8),D=C[v&O];t:for(;;){if(v>>>=$=D>>>24,_-=$,($=D>>>16&255)===0)Q[c++]=65535&D;else{if(!(16&$)){if(!(64&$)){D=C[(65535&D)+(v&(1<<$)-1)];continue t}if(32&$){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}F=65535&D,($&=15)&&(_<$&&(v+=j[l++]<<_,_+=8),F+=v&(1<<$)-1,v>>>=$,_-=$),_<15&&(v+=j[l++]<<_,_+=8,v+=j[l++]<<_,_+=8),D=R[v&I];n:for(;;){if(v>>>=$=D>>>24,_-=$,!(16&($=D>>>16&255))){if(!(64&$)){D=R[(65535&D)+(v&(1<<$)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(he=65535&D,_<($&=15)&&(v+=j[l++]<<_,(_+=8)<$&&(v+=j[l++]<<_,_+=8)),p<(he+=v&(1<<$)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=$,_-=$,($=c-h)<he){if(g<($=he-$)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(J=y,(N=0)===x){if(N+=w-$,$<F){for(F-=$;Q[c++]=y[N++],--$;);N=c-he,J=Q}}else if(x<$){if(N+=w+x-$,($-=x)<F){for(F-=$;Q[c++]=y[N++],--$;);if(N=0,x<F){for(F-=$=x;Q[c++]=y[N++],--$;);N=c-he,J=Q}}}else if(N+=x-$,$<F){for(F-=$;Q[c++]=y[N++],--$;);N=c-he,J=Q}for(;2<F;)Q[c++]=J[N++],Q[c++]=J[N++],Q[c++]=J[N++],F-=3;F&&(Q[c++]=J[N++],1<F&&(Q[c++]=J[N++]))}else{for(N=c-he;Q[c++]=Q[N++],Q[c++]=Q[N++],Q[c++]=Q[N++],2<(F-=3););F&&(Q[c++]=Q[N++],1<F&&(Q[c++]=Q[N++]))}break}}break}}while(l<u&&c<f);l-=F=_>>3,v&=(1<<(_-=F<<3))-1,i.next_in=l,i.next_out=c,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=c<f?f-c+257:257-(c-f),a.hold=v,a.bits=_}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,h=2,f=0,p=-2,w=1,g=852,x=592;function y(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(N){var J;return N&&N.state?(J=N.state,N.total_in=N.total_out=J.total=0,N.msg="",J.wrap&&(N.adler=1&J.wrap),J.mode=w,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new i.Buf32(g),J.distcode=J.distdyn=new i.Buf32(x),J.sane=1,J.back=-1,f):p}function C(N){var J;return N&&N.state?((J=N.state).wsize=0,J.whave=0,J.wnext=0,_(N)):p}function R(N,J){var j,Q;return N&&N.state?(Q=N.state,J<0?(j=0,J=-J):(j=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?p:(Q.window!==null&&Q.wbits!==J&&(Q.window=null),Q.wrap=j,Q.wbits=J,C(N))):p}function O(N,J){var j,Q;return N?(Q=new v,(N.state=Q).window=null,(j=R(N,J))!==f&&(N.state=null),j):p}var I,D,$=!0;function F(N){if($){var J;for(I=new i.Buf32(512),D=new i.Buf32(32),J=0;J<144;)N.lens[J++]=8;for(;J<256;)N.lens[J++]=9;for(;J<280;)N.lens[J++]=7;for(;J<288;)N.lens[J++]=8;for(u(c,N.lens,0,288,I,0,N.work,{bits:9}),J=0;J<32;)N.lens[J++]=5;u(h,N.lens,0,32,D,0,N.work,{bits:5}),$=!1}N.lencode=I,N.lenbits=9,N.distcode=D,N.distbits=5}function he(N,J,j,Q){var we,z=N.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new i.Buf8(z.wsize)),Q>=z.wsize?(i.arraySet(z.window,J,j-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(Q<(we=z.wsize-z.wnext)&&(we=Q),i.arraySet(z.window,J,j-Q,we,z.wnext),(Q-=we)?(i.arraySet(z.window,J,j-Q,Q,0),z.wnext=Q,z.whave=z.wsize):(z.wnext+=we,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=we))),0}s.inflateReset=C,s.inflateReset2=R,s.inflateResetKeep=_,s.inflateInit=function(N){return O(N,15)},s.inflateInit2=O,s.inflate=function(N,J){var j,Q,we,z,W,K,de,H,G,ve,q,ue,se,ye,Ee,ae,Le,Be,Me,dt,P,me,ge,B,M=0,re=new i.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return p;(j=N.state).mode===12&&(j.mode=13),W=N.next_out,we=N.output,de=N.avail_out,z=N.next_in,Q=N.input,K=N.avail_in,H=j.hold,G=j.bits,ve=K,q=de,me=f;e:for(;;)switch(j.mode){case w:if(j.wrap===0){j.mode=13;break}for(;G<16;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(2&j.wrap&&H===35615){re[j.check=0]=255&H,re[1]=H>>>8&255,j.check=a(j.check,re,2,0),G=H=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&H)<<8)+(H>>8))%31){N.msg="incorrect header check",j.mode=30;break}if((15&H)!=8){N.msg="unknown compression method",j.mode=30;break}if(G-=4,P=8+(15&(H>>>=4)),j.wbits===0)j.wbits=P;else if(P>j.wbits){N.msg="invalid window size",j.mode=30;break}j.dmax=1<<P,N.adler=j.check=1,j.mode=512&H?10:12,G=H=0;break;case 2:for(;G<16;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(j.flags=H,(255&j.flags)!=8){N.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){N.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=H>>8&1),512&j.flags&&(re[0]=255&H,re[1]=H>>>8&255,j.check=a(j.check,re,2,0)),G=H=0,j.mode=3;case 3:for(;G<32;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}j.head&&(j.head.time=H),512&j.flags&&(re[0]=255&H,re[1]=H>>>8&255,re[2]=H>>>16&255,re[3]=H>>>24&255,j.check=a(j.check,re,4,0)),G=H=0,j.mode=4;case 4:for(;G<16;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}j.head&&(j.head.xflags=255&H,j.head.os=H>>8),512&j.flags&&(re[0]=255&H,re[1]=H>>>8&255,j.check=a(j.check,re,2,0)),G=H=0,j.mode=5;case 5:if(1024&j.flags){for(;G<16;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}j.length=H,j.head&&(j.head.extra_len=H),512&j.flags&&(re[0]=255&H,re[1]=H>>>8&255,j.check=a(j.check,re,2,0)),G=H=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(K<(ue=j.length)&&(ue=K),ue&&(j.head&&(P=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),i.arraySet(j.head.extra,Q,z,ue,P)),512&j.flags&&(j.check=a(j.check,Q,ue,z)),K-=ue,z+=ue,j.length-=ue),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(K===0)break e;for(ue=0;P=Q[z+ue++],j.head&&P&&j.length<65536&&(j.head.name+=String.fromCharCode(P)),P&&ue<K;);if(512&j.flags&&(j.check=a(j.check,Q,ue,z)),K-=ue,z+=ue,P)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(K===0)break e;for(ue=0;P=Q[z+ue++],j.head&&P&&j.length<65536&&(j.head.comment+=String.fromCharCode(P)),P&&ue<K;);if(512&j.flags&&(j.check=a(j.check,Q,ue,z)),K-=ue,z+=ue,P)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;G<16;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(H!==(65535&j.check)){N.msg="header crc mismatch",j.mode=30;break}G=H=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),N.adler=j.check=0,j.mode=12;break;case 10:for(;G<32;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}N.adler=j.check=y(H),G=H=0,j.mode=11;case 11:if(j.havedict===0)return N.next_out=W,N.avail_out=de,N.next_in=z,N.avail_in=K,j.hold=H,j.bits=G,2;N.adler=j.check=1,j.mode=12;case 12:if(J===5||J===6)break e;case 13:if(j.last){H>>>=7&G,G-=7&G,j.mode=27;break}for(;G<3;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}switch(j.last=1&H,G-=1,3&(H>>>=1)){case 0:j.mode=14;break;case 1:if(F(j),j.mode=20,J!==6)break;H>>>=2,G-=2;break e;case 2:j.mode=17;break;case 3:N.msg="invalid block type",j.mode=30}H>>>=2,G-=2;break;case 14:for(H>>>=7&G,G-=7&G;G<32;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if((65535&H)!=(H>>>16^65535)){N.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&H,G=H=0,j.mode=15,J===6)break e;case 15:j.mode=16;case 16:if(ue=j.length){if(K<ue&&(ue=K),de<ue&&(ue=de),ue===0)break e;i.arraySet(we,Q,z,ue,W),K-=ue,z+=ue,de-=ue,W+=ue,j.length-=ue;break}j.mode=12;break;case 17:for(;G<14;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(j.nlen=257+(31&H),H>>>=5,G-=5,j.ndist=1+(31&H),H>>>=5,G-=5,j.ncode=4+(15&H),H>>>=4,G-=4,286<j.nlen||30<j.ndist){N.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;G<3;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}j.lens[_e[j.have++]]=7&H,H>>>=3,G-=3}for(;j.have<19;)j.lens[_e[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,ge={bits:j.lenbits},me=u(0,j.lens,0,19,j.lencode,0,j.work,ge),j.lenbits=ge.bits,me){N.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;ae=(M=j.lencode[H&(1<<j.lenbits)-1])>>>16&255,Le=65535&M,!((Ee=M>>>24)<=G);){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(Le<16)H>>>=Ee,G-=Ee,j.lens[j.have++]=Le;else{if(Le===16){for(B=Ee+2;G<B;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(H>>>=Ee,G-=Ee,j.have===0){N.msg="invalid bit length repeat",j.mode=30;break}P=j.lens[j.have-1],ue=3+(3&H),H>>>=2,G-=2}else if(Le===17){for(B=Ee+3;G<B;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}G-=Ee,P=0,ue=3+(7&(H>>>=Ee)),H>>>=3,G-=3}else{for(B=Ee+7;G<B;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}G-=Ee,P=0,ue=11+(127&(H>>>=Ee)),H>>>=7,G-=7}if(j.have+ue>j.nlen+j.ndist){N.msg="invalid bit length repeat",j.mode=30;break}for(;ue--;)j.lens[j.have++]=P}}if(j.mode===30)break;if(j.lens[256]===0){N.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,ge={bits:j.lenbits},me=u(c,j.lens,0,j.nlen,j.lencode,0,j.work,ge),j.lenbits=ge.bits,me){N.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,ge={bits:j.distbits},me=u(h,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,ge),j.distbits=ge.bits,me){N.msg="invalid distances set",j.mode=30;break}if(j.mode=20,J===6)break e;case 20:j.mode=21;case 21:if(6<=K&&258<=de){N.next_out=W,N.avail_out=de,N.next_in=z,N.avail_in=K,j.hold=H,j.bits=G,l(N,q),W=N.next_out,we=N.output,de=N.avail_out,z=N.next_in,Q=N.input,K=N.avail_in,H=j.hold,G=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;ae=(M=j.lencode[H&(1<<j.lenbits)-1])>>>16&255,Le=65535&M,!((Ee=M>>>24)<=G);){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(ae&&!(240&ae)){for(Be=Ee,Me=ae,dt=Le;ae=(M=j.lencode[dt+((H&(1<<Be+Me)-1)>>Be)])>>>16&255,Le=65535&M,!(Be+(Ee=M>>>24)<=G);){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}H>>>=Be,G-=Be,j.back+=Be}if(H>>>=Ee,G-=Ee,j.back+=Ee,j.length=Le,ae===0){j.mode=26;break}if(32&ae){j.back=-1,j.mode=12;break}if(64&ae){N.msg="invalid literal/length code",j.mode=30;break}j.extra=15&ae,j.mode=22;case 22:if(j.extra){for(B=j.extra;G<B;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}j.length+=H&(1<<j.extra)-1,H>>>=j.extra,G-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;ae=(M=j.distcode[H&(1<<j.distbits)-1])>>>16&255,Le=65535&M,!((Ee=M>>>24)<=G);){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(!(240&ae)){for(Be=Ee,Me=ae,dt=Le;ae=(M=j.distcode[dt+((H&(1<<Be+Me)-1)>>Be)])>>>16&255,Le=65535&M,!(Be+(Ee=M>>>24)<=G);){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}H>>>=Be,G-=Be,j.back+=Be}if(H>>>=Ee,G-=Ee,j.back+=Ee,64&ae){N.msg="invalid distance code",j.mode=30;break}j.offset=Le,j.extra=15&ae,j.mode=24;case 24:if(j.extra){for(B=j.extra;G<B;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}j.offset+=H&(1<<j.extra)-1,H>>>=j.extra,G-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){N.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(de===0)break e;if(ue=q-de,j.offset>ue){if((ue=j.offset-ue)>j.whave&&j.sane){N.msg="invalid distance too far back",j.mode=30;break}se=ue>j.wnext?(ue-=j.wnext,j.wsize-ue):j.wnext-ue,ue>j.length&&(ue=j.length),ye=j.window}else ye=we,se=W-j.offset,ue=j.length;for(de<ue&&(ue=de),de-=ue,j.length-=ue;we[W++]=ye[se++],--ue;);j.length===0&&(j.mode=21);break;case 26:if(de===0)break e;we[W++]=j.length,de--,j.mode=21;break;case 27:if(j.wrap){for(;G<32;){if(K===0)break e;K--,H|=Q[z++]<<G,G+=8}if(q-=de,N.total_out+=q,j.total+=q,q&&(N.adler=j.check=j.flags?a(j.check,we,q,W-q):o(j.check,we,q,W-q)),q=de,(j.flags?H:y(H))!==j.check){N.msg="incorrect data check",j.mode=30;break}G=H=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;G<32;){if(K===0)break e;K--,H+=Q[z++]<<G,G+=8}if(H!==(4294967295&j.total)){N.msg="incorrect length check",j.mode=30;break}G=H=0}j.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return p}return N.next_out=W,N.avail_out=de,N.next_in=z,N.avail_in=K,j.hold=H,j.bits=G,(j.wsize||q!==N.avail_out&&j.mode<30&&(j.mode<27||J!==4))&&he(N,N.output,N.next_out,q-N.avail_out)?(j.mode=31,-4):(ve-=N.avail_in,q-=N.avail_out,N.total_in+=ve,N.total_out+=q,j.total+=q,j.wrap&&q&&(N.adler=j.check=j.flags?a(j.check,we,q,N.next_out-q):o(j.check,we,q,N.next_out-q)),N.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(ve==0&&q===0||J===4)&&me===f&&(me=-5),me)},s.inflateEnd=function(N){if(!N||!N.state)return p;var J=N.state;return J.window&&(J.window=null),N.state=null,f},s.inflateGetHeader=function(N,J){var j;return N&&N.state&&2&(j=N.state).wrap?((j.head=J).done=!1,f):p},s.inflateSetDictionary=function(N,J){var j,Q=J.length;return N&&N.state?(j=N.state).wrap!==0&&j.mode!==11?p:j.mode===11&&o(1,J,Q,0)!==j.check?-3:he(N,J,Q,Q)?(j.mode=31,-4):(j.havedict=1,f):p},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,h,f,p,w,g,x,y){var v,_,C,R,O,I,D,$,F,he=y.bits,N=0,J=0,j=0,Q=0,we=0,z=0,W=0,K=0,de=0,H=0,G=null,ve=0,q=new i.Buf16(16),ue=new i.Buf16(16),se=null,ye=0;for(N=0;N<=15;N++)q[N]=0;for(J=0;J<p;J++)q[h[f+J]]++;for(we=he,Q=15;1<=Q&&q[Q]===0;Q--);if(Q<we&&(we=Q),Q===0)return w[g++]=20971520,w[g++]=20971520,y.bits=1,0;for(j=1;j<Q&&q[j]===0;j++);for(we<j&&(we=j),N=K=1;N<=15;N++)if(K<<=1,(K-=q[N])<0)return-1;if(0<K&&(c===0||Q!==1))return-1;for(ue[1]=0,N=1;N<15;N++)ue[N+1]=ue[N]+q[N];for(J=0;J<p;J++)h[f+J]!==0&&(x[ue[h[f+J]]++]=J);if(I=c===0?(G=se=x,19):c===1?(G=o,ve-=257,se=a,ye-=257,256):(G=l,se=u,-1),N=j,O=g,W=J=H=0,C=-1,R=(de=1<<(z=we))-1,c===1&&852<de||c===2&&592<de)return 1;for(;;){for(D=N-W,F=x[J]<I?($=0,x[J]):x[J]>I?($=se[ye+x[J]],G[ve+x[J]]):($=96,0),v=1<<N-W,j=_=1<<z;w[O+(H>>W)+(_-=v)]=D<<24|$<<16|F|0,_!==0;);for(v=1<<N-1;H&v;)v>>=1;if(v!==0?(H&=v-1,H+=v):H=0,J++,--q[N]==0){if(N===Q)break;N=h[f+x[J]]}if(we<N&&(H&R)!==C){for(W===0&&(W=we),O+=j,K=1<<(z=N-W);z+W<Q&&!((K-=q[z+W])<=0);)z++,K<<=1;if(de+=1<<z,c===1&&852<de||c===2&&592<de)return 1;w[C=H&R]=we<<24|z<<16|O-g|0}}return H!==0&&(w[O+H]=N-W<<24|64<<16|0),y.bits=we,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(M){for(var re=M.length;0<=--re;)M[re]=0}var u=0,c=29,h=256,f=h+1+c,p=30,w=19,g=2*f+1,x=15,y=16,v=7,_=256,C=16,R=17,O=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=new Array(2*(f+2));l(he);var N=new Array(2*p);l(N);var J=new Array(512);l(J);var j=new Array(256);l(j);var Q=new Array(c);l(Q);var we,z,W,K=new Array(p);function de(M,re,_e,xe,fe){this.static_tree=M,this.extra_bits=re,this.extra_base=_e,this.elems=xe,this.max_length=fe,this.has_stree=M&&M.length}function H(M,re){this.dyn_tree=M,this.max_code=0,this.stat_desc=re}function G(M){return M<256?J[M]:J[256+(M>>>7)]}function ve(M,re){M.pending_buf[M.pending++]=255&re,M.pending_buf[M.pending++]=re>>>8&255}function q(M,re,_e){M.bi_valid>y-_e?(M.bi_buf|=re<<M.bi_valid&65535,ve(M,M.bi_buf),M.bi_buf=re>>y-M.bi_valid,M.bi_valid+=_e-y):(M.bi_buf|=re<<M.bi_valid&65535,M.bi_valid+=_e)}function ue(M,re,_e){q(M,_e[2*re],_e[2*re+1])}function se(M,re){for(var _e=0;_e|=1&M,M>>>=1,_e<<=1,0<--re;);return _e>>>1}function ye(M,re,_e){var xe,fe,Se=new Array(x+1),$e=0;for(xe=1;xe<=x;xe++)Se[xe]=$e=$e+_e[xe-1]<<1;for(fe=0;fe<=re;fe++){var Te=M[2*fe+1];Te!==0&&(M[2*fe]=se(Se[Te]++,Te))}}function Ee(M){var re;for(re=0;re<f;re++)M.dyn_ltree[2*re]=0;for(re=0;re<p;re++)M.dyn_dtree[2*re]=0;for(re=0;re<w;re++)M.bl_tree[2*re]=0;M.dyn_ltree[2*_]=1,M.opt_len=M.static_len=0,M.last_lit=M.matches=0}function ae(M){8<M.bi_valid?ve(M,M.bi_buf):0<M.bi_valid&&(M.pending_buf[M.pending++]=M.bi_buf),M.bi_buf=0,M.bi_valid=0}function Le(M,re,_e,xe){var fe=2*re,Se=2*_e;return M[fe]<M[Se]||M[fe]===M[Se]&&xe[re]<=xe[_e]}function Be(M,re,_e){for(var xe=M.heap[_e],fe=_e<<1;fe<=M.heap_len&&(fe<M.heap_len&&Le(re,M.heap[fe+1],M.heap[fe],M.depth)&&fe++,!Le(re,xe,M.heap[fe],M.depth));)M.heap[_e]=M.heap[fe],_e=fe,fe<<=1;M.heap[_e]=xe}function Me(M,re,_e){var xe,fe,Se,$e,Te=0;if(M.last_lit!==0)for(;xe=M.pending_buf[M.d_buf+2*Te]<<8|M.pending_buf[M.d_buf+2*Te+1],fe=M.pending_buf[M.l_buf+Te],Te++,xe===0?ue(M,fe,re):(ue(M,(Se=j[fe])+h+1,re),($e=I[Se])!==0&&q(M,fe-=Q[Se],$e),ue(M,Se=G(--xe),_e),($e=D[Se])!==0&&q(M,xe-=K[Se],$e)),Te<M.last_lit;);ue(M,_,re)}function dt(M,re){var _e,xe,fe,Se=re.dyn_tree,$e=re.stat_desc.static_tree,Te=re.stat_desc.has_stree,Ke=re.stat_desc.elems,rt=-1;for(M.heap_len=0,M.heap_max=g,_e=0;_e<Ke;_e++)Se[2*_e]!==0?(M.heap[++M.heap_len]=rt=_e,M.depth[_e]=0):Se[2*_e+1]=0;for(;M.heap_len<2;)Se[2*(fe=M.heap[++M.heap_len]=rt<2?++rt:0)]=1,M.depth[fe]=0,M.opt_len--,Te&&(M.static_len-=$e[2*fe+1]);for(re.max_code=rt,_e=M.heap_len>>1;1<=_e;_e--)Be(M,Se,_e);for(fe=Ke;_e=M.heap[1],M.heap[1]=M.heap[M.heap_len--],Be(M,Se,1),xe=M.heap[1],M.heap[--M.heap_max]=_e,M.heap[--M.heap_max]=xe,Se[2*fe]=Se[2*_e]+Se[2*xe],M.depth[fe]=(M.depth[_e]>=M.depth[xe]?M.depth[_e]:M.depth[xe])+1,Se[2*_e+1]=Se[2*xe+1]=fe,M.heap[1]=fe++,Be(M,Se,1),2<=M.heap_len;);M.heap[--M.heap_max]=M.heap[1],function(Je,St){var tr,Qt,ln,ht,Fe,He,Ae=St.dyn_tree,un=St.max_code,bn=St.stat_desc.static_tree,Xr=St.stat_desc.has_stree,Ie=St.stat_desc.extra_bits,es=St.stat_desc.extra_base,Nr=St.stat_desc.max_length,cn=0;for(ht=0;ht<=x;ht++)Je.bl_count[ht]=0;for(Ae[2*Je.heap[Je.heap_max]+1]=0,tr=Je.heap_max+1;tr<g;tr++)Nr<(ht=Ae[2*Ae[2*(Qt=Je.heap[tr])+1]+1]+1)&&(ht=Nr,cn++),Ae[2*Qt+1]=ht,un<Qt||(Je.bl_count[ht]++,Fe=0,es<=Qt&&(Fe=Ie[Qt-es]),He=Ae[2*Qt],Je.opt_len+=He*(ht+Fe),Xr&&(Je.static_len+=He*(bn[2*Qt+1]+Fe)));if(cn!==0){do{for(ht=Nr-1;Je.bl_count[ht]===0;)ht--;Je.bl_count[ht]--,Je.bl_count[ht+1]+=2,Je.bl_count[Nr]--,cn-=2}while(0<cn);for(ht=Nr;ht!==0;ht--)for(Qt=Je.bl_count[ht];Qt!==0;)un<(ln=Je.heap[--tr])||(Ae[2*ln+1]!==ht&&(Je.opt_len+=(ht-Ae[2*ln+1])*Ae[2*ln],Ae[2*ln+1]=ht),Qt--)}}(M,re),ye(Se,rt,M.bl_count)}function P(M,re,_e){var xe,fe,Se=-1,$e=re[1],Te=0,Ke=7,rt=4;for($e===0&&(Ke=138,rt=3),re[2*(_e+1)+1]=65535,xe=0;xe<=_e;xe++)fe=$e,$e=re[2*(xe+1)+1],++Te<Ke&&fe===$e||(Te<rt?M.bl_tree[2*fe]+=Te:fe!==0?(fe!==Se&&M.bl_tree[2*fe]++,M.bl_tree[2*C]++):Te<=10?M.bl_tree[2*R]++:M.bl_tree[2*O]++,Se=fe,rt=(Te=0)===$e?(Ke=138,3):fe===$e?(Ke=6,3):(Ke=7,4))}function me(M,re,_e){var xe,fe,Se=-1,$e=re[1],Te=0,Ke=7,rt=4;for($e===0&&(Ke=138,rt=3),xe=0;xe<=_e;xe++)if(fe=$e,$e=re[2*(xe+1)+1],!(++Te<Ke&&fe===$e)){if(Te<rt)for(;ue(M,fe,M.bl_tree),--Te!=0;);else fe!==0?(fe!==Se&&(ue(M,fe,M.bl_tree),Te--),ue(M,C,M.bl_tree),q(M,Te-3,2)):Te<=10?(ue(M,R,M.bl_tree),q(M,Te-3,3)):(ue(M,O,M.bl_tree),q(M,Te-11,7));Se=fe,rt=(Te=0)===$e?(Ke=138,3):fe===$e?(Ke=6,3):(Ke=7,4)}}l(K);var ge=!1;function B(M,re,_e,xe){q(M,(u<<1)+(xe?1:0),3),function(fe,Se,$e,Te){ae(fe),ve(fe,$e),ve(fe,~$e),i.arraySet(fe.pending_buf,fe.window,Se,$e,fe.pending),fe.pending+=$e}(M,re,_e)}s._tr_init=function(M){ge||(function(){var re,_e,xe,fe,Se,$e=new Array(x+1);for(fe=xe=0;fe<c-1;fe++)for(Q[fe]=xe,re=0;re<1<<I[fe];re++)j[xe++]=fe;for(j[xe-1]=fe,fe=Se=0;fe<16;fe++)for(K[fe]=Se,re=0;re<1<<D[fe];re++)J[Se++]=fe;for(Se>>=7;fe<p;fe++)for(K[fe]=Se<<7,re=0;re<1<<D[fe]-7;re++)J[256+Se++]=fe;for(_e=0;_e<=x;_e++)$e[_e]=0;for(re=0;re<=143;)he[2*re+1]=8,re++,$e[8]++;for(;re<=255;)he[2*re+1]=9,re++,$e[9]++;for(;re<=279;)he[2*re+1]=7,re++,$e[7]++;for(;re<=287;)he[2*re+1]=8,re++,$e[8]++;for(ye(he,f+1,$e),re=0;re<p;re++)N[2*re+1]=5,N[2*re]=se(re,5);we=new de(he,I,h+1,f,x),z=new de(N,D,0,p,x),W=new de(new Array(0),$,0,w,v)}(),ge=!0),M.l_desc=new H(M.dyn_ltree,we),M.d_desc=new H(M.dyn_dtree,z),M.bl_desc=new H(M.bl_tree,W),M.bi_buf=0,M.bi_valid=0,Ee(M)},s._tr_stored_block=B,s._tr_flush_block=function(M,re,_e,xe){var fe,Se,$e=0;0<M.level?(M.strm.data_type===2&&(M.strm.data_type=function(Te){var Ke,rt=4093624447;for(Ke=0;Ke<=31;Ke++,rt>>>=1)if(1&rt&&Te.dyn_ltree[2*Ke]!==0)return o;if(Te.dyn_ltree[18]!==0||Te.dyn_ltree[20]!==0||Te.dyn_ltree[26]!==0)return a;for(Ke=32;Ke<h;Ke++)if(Te.dyn_ltree[2*Ke]!==0)return a;return o}(M)),dt(M,M.l_desc),dt(M,M.d_desc),$e=function(Te){var Ke;for(P(Te,Te.dyn_ltree,Te.l_desc.max_code),P(Te,Te.dyn_dtree,Te.d_desc.max_code),dt(Te,Te.bl_desc),Ke=w-1;3<=Ke&&Te.bl_tree[2*F[Ke]+1]===0;Ke--);return Te.opt_len+=3*(Ke+1)+5+5+4,Ke}(M),fe=M.opt_len+3+7>>>3,(Se=M.static_len+3+7>>>3)<=fe&&(fe=Se)):fe=Se=_e+5,_e+4<=fe&&re!==-1?B(M,re,_e,xe):M.strategy===4||Se===fe?(q(M,2+(xe?1:0),3),Me(M,he,N)):(q(M,4+(xe?1:0),3),function(Te,Ke,rt,Je){var St;for(q(Te,Ke-257,5),q(Te,rt-1,5),q(Te,Je-4,4),St=0;St<Je;St++)q(Te,Te.bl_tree[2*F[St]+1],3);me(Te,Te.dyn_ltree,Ke-1),me(Te,Te.dyn_dtree,rt-1)}(M,M.l_desc.max_code+1,M.d_desc.max_code+1,$e+1),Me(M,M.dyn_ltree,M.dyn_dtree)),Ee(M),xe&&ae(M)},s._tr_tally=function(M,re,_e){return M.pending_buf[M.d_buf+2*M.last_lit]=re>>>8&255,M.pending_buf[M.d_buf+2*M.last_lit+1]=255&re,M.pending_buf[M.l_buf+M.last_lit]=255&_e,M.last_lit++,re===0?M.dyn_ltree[2*_e]++:(M.matches++,re--,M.dyn_ltree[2*(j[_e]+h+1)]++,M.dyn_dtree[2*G(re)]++),M.last_lit===M.lit_bufsize-1},s._tr_align=function(M){q(M,2,3),ue(M,_,he),function(re){re.bi_valid===16?(ve(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(M)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,u,c,h,f=1,p={},w=!1,g=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){v(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,R=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=R,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){v(C.data)},function(C){c.port2.postMessage(C)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(C){var R=g.createElement("script");R.onreadystatechange=function(){v(C),R.onreadystatechange=null,u.removeChild(R),R=null},u.appendChild(R)}):function(C){setTimeout(v,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var R=new Array(arguments.length-1),O=0;O<R.length;O++)R[O]=arguments[O+1];var I={callback:C,args:R};return p[f]=I,l(f),f++},x.clearImmediate=y}function y(C){delete p[C]}function v(C){if(w)setTimeout(v,0,C);else{var R=p[C];if(R){w=!0;try{(function(O){var I=O.callback,D=O.args;switch(D.length){case 0:I();break;case 1:I(D[0]);break;case 2:I(D[0],D[1]);break;case 3:I(D[0],D[1],D[2]);break;default:I.apply(a,D)}})(R)}finally{y(C),w=!1}}}}function _(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&v(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof qt<"u"?qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(WC);var iF=WC.exports;const Xx=Ou(iF),oF=()=>{const[e,t]=S.useState(!1),[n,r]=S.useState([]),s=S.useRef(null),i=S.useCallback(async u=>{if(!u||u.length===0){r(h=>[...h,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let h=0;h<u.length;h++){const f=u[h];if(f.type==="application/zip"||f.name.endsWith(".zip"))try{const p=await Xx.loadAsync(f),w=Object.values(p.files);for(const g of w)if(!g.dir&&g.name.endsWith(".json"))try{const x=await g.async("string"),y=JSON.parse(x),v=g.name.split("/").pop()||"unknown.json",_=v.replace(/\.json$/,"");localStorage.setItem(_,JSON.stringify(y)),c.push({success:!0,message:`Successfully extracted and stored "${v}" with key "${_}" from ZIP.`})}catch(x){const y=x instanceof Error?x.message:"Unknown error";c.push({success:!1,message:`Error processing file "${g.name}" from ZIP: ${y}`})}else g.dir||c.push({success:!1,message:`Skipped non-JSON file "${g.name}" from ZIP.`})}catch(p){const w=p instanceof Error?p.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${f.name}": ${w}`})}else if(f.type==="application/json"||f.name.endsWith(".json"))try{const p=new FileReader,w=await new Promise((v,_)=>{p.onload=()=>v(p.result),p.onerror=_,p.readAsText(f)}),g=JSON.parse(w),y=f.name.replace(/\.json$/,"");localStorage.setItem(y,JSON.stringify(g)),c.push({success:!0,message:`Successfully stored "${f.name}" with key "${y}".`})}catch(p){const w=p instanceof Error?p.message:"Unknown error";c.push({success:!1,message:`Error processing file "${f.name}": ${w}`})}else c.push({success:!1,message:`File "${f.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(h=>[...h,...c]),t(!1)}},[]),o=u=>{i(u.target.files),s.current&&(s.current.value="")},a=()=>{r([])},l=S.useCallback(async()=>{t(!0);try{debugger;const u=new Xx;let c=!1,h=null;const f=localStorage.getItem("sankeertan_categories_data");if(f)try{h=JSON.parse(f),u.file("sankeertan_categories_data.json",f),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),h=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const p={};for(let y=0;y<localStorage.length;y++){debugger;const v=localStorage.key(y);if(console.log(v),v!=="sb-"+JS+"-auth-token"&&v&&v!=="sankeertan_categories_data"){const _=localStorage.getItem(v);if(_)try{JSON.parse(_);let C=u;if(h&&Array.isArray(h.data))for(const R of h.data)for(const O of R.books){const I=O.bookId,D=`sankeertan_song_details-${I.toLowerCase().replace(/ /g,"-")}`,$=`sankeertan_song_indices-${I.toLowerCase().replace(/ /g,"-")}`;if(v.startsWith(D)||v.startsWith($)){if(!p[I]){const F=u.folder(I);F?p[I]=F:p[I]=u}C=p[I]||u;break}}C.file(`${v}.json`,_),c=!0}catch{console.warn(`Skipping key "${v}" as value is not valid JSON`)}}}if(!c){r(y=>[...y,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const w=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),g=URL.createObjectURL(w),x=document.createElement("a");x.href=g,x.download="sankeertan_localStorage_backup.zip",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(g),r(y=>[...y,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(h=>[...h,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return b.jsxs("div",{className:"p-4",children:[b.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:s}),b.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),b.jsx("div",{className:"mb-4",children:b.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&b.jsx("div",{className:"mb-4 flex items-center gap-2",children:b.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&b.jsxs("div",{className:"mb-4",children:[b.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>b.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?b.jsx("span",{style:{color:"green"},children:""}):b.jsx("span",{style:{color:"red"},children:""}),b.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),b.jsx("span",{children:u.message})]},c)),b.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),b.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[b.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),b.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},tn=({children:e,session:t})=>{const n=zn();return t?b.jsx(b.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),b.jsx(WS,{to:"/login",replace:!0}))},aF=({media:e,isLoading:t})=>{var l;if(t)return b.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100 text-gray-500",children:"Loading Source Media..."});if(!e)return b.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100 text-gray-500",children:"No source media available."});const[n,r]=We.useState(1),s=()=>r(u=>Math.min(u+.25,4)),i=()=>r(u=>Math.max(u-.25,.5)),o=()=>r(1),a=e.url.includes("drive.google.com")&&e.url.includes("/preview");return b.jsxs("div",{className:"h-full w-full flex flex-col bg-gray-200 overflow-hidden relative",children:[b.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs z-10 flex items-center space-x-2",children:b.jsxs("span",{children:[e.type," ",(l=e.metadata)!=null&&l.pageNumber?`- Page ${e.metadata.pageNumber}`:""]})}),e.type==="IMAGE"&&!a&&b.jsxs("div",{className:"absolute top-2 right-2 bg-white rounded shadow-md z-10 flex flex-col",children:[b.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 border-b",title:"Zoom In",children:b.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),b.jsxs("button",{onClick:o,className:"p-2 hover:bg-gray-100 border-b text-xs font-bold text-gray-700",title:"Reset",children:[Math.round(n*100),"%"]}),b.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100",title:"Zoom Out",children:b.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),a?b.jsx("div",{className:"flex-1 w-full h-full bg-gray-100",children:b.jsx("iframe",{src:e.url,className:"w-full h-full border-none",title:"Source Preview",allow:"autoplay"})}):e.type==="IMAGE"?b.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center p-4",children:b.jsx("img",{src:e.url,alt:"Source Material",referrerPolicy:"no-referrer",onError:u=>{console.error("SourceViewer: Image failed to load",e.url,u)},className:"max-w-none shadow-lg transition-transform duration-200 ease-out origin-center",style:{transform:`scale(${n})`,cursor:n>1?"grab":"default"}})}):b.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 bg-gray-100",children:[b.jsx("svg",{className:"w-16 h-16 text-red-500 mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),b.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"PDF Document"}),b.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Open PDF in New Tab"})]})]})},lF=({status:e,onVerify:t,onNext:n,onPrev:r,isNextDisabled:s,isPrevDisabled:i})=>b.jsxs("div",{className:"border-t border-gray-200 bg-white p-4 flex items-center justify-between shadow-lg z-20",children:[b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("button",{onClick:r,disabled:i,className:`px-4 py-2 rounded border ${i?"opacity-50 cursor-not-allowed bg-gray-100":"hover:bg-gray-50"}`,children:" Prev"}),b.jsx("button",{onClick:n,disabled:s,className:`px-4 py-2 rounded border ${s?"opacity-50 cursor-not-allowed bg-gray-100":"hover:bg-gray-50"}`,children:"Next "})]}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsxs("div",{className:"flex flex-col items-end mr-4",children:[b.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Status"}),b.jsx("span",{className:`font-semibold ${e==="VERIFIED"?"text-green-600":e==="CORRECTION_NEEDED"?"text-red-600":"text-yellow-600"}`,children:e})]}),b.jsx("button",{onClick:()=>t("CORRECTION_NEEDED"),className:"px-4 py-2 rounded bg-red-100 text-red-700 hover:bg-red-200 font-medium transition",children:"Report Issue"}),b.jsx("button",{onClick:()=>t("VERIFIED"),className:"px-6 py-2 rounded bg-green-600 text-white hover:bg-green-700 font-bold shadow-md transition transform active:scale-95",children:"Mark Verified"})]})]}),uF=({isOpen:e,onClose:t,onSubmitReport:n,onEditSong:r})=>{const[s,i]=S.useState("");return e?b.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[b.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),b.jsx("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:p-0",children:b.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[b.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:b.jsxs("div",{className:"sm:flex sm:items-start",children:[b.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:b.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),b.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[b.jsx("h3",{className:"text-base font-semibold leading-6 text-gray-900",id:"modal-title",children:"Report Issue"}),b.jsxs("div",{className:"mt-2",children:[b.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"You can either describe the issue below or choose to edit the song directly to fix it yourself."}),b.jsx("textarea",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",rows:4,placeholder:"Describe the issue (e.g., spelling mistake on line 3)...",value:s,onChange:o=>i(o.target.value)})]})]})]})}),b.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[b.jsx("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>n(s),children:"Submit Report"}),b.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto",onClick:r,children:"Edit Song Directly"}),b.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:t,children:"Cancel"})]})]})})]}):null},e_={},Ip={getSourceMedia:async(e,t,n)=>{try{const r=encodeURIComponent(n),s=`${pr}?mode=api&apiname=downloadsource&category=${e}&book=${t}&songtitle=${r}`;console.log("[ProofReadingService] Fetching media (GET):",s);const i=await fetch(s);if(!i.ok)return null;const o=await i.json();if(o.success&&o.url){const a=o.url;let l=a;const u=a.match(/\/d\/([a-zA-Z0-9_-]+)/);return!!u&&u&&(l=`https://drive.google.com/file/d/${u[1]}/preview`),{type:a.toLowerCase().endsWith(".pdf")?"PDF":"IMAGE",url:l,metadata:{pageNumber:1}}}return null}catch(r){return console.error("Failed to fetch source media:",r),null}},submitVerification:async(e,t,n,r,s,i)=>{console.log(`[MockService] Submitting verification for ${e}/${n}: ${r} by ${s}. Comments: ${i}`);const o=`${e}_${t}`;return e_[o]={bookId:e,songTitle:n,sourceRow:t,status:r,verifiedBy:s,timestamp:Date.now(),comments:i},new Promise(a=>setTimeout(a,500))},getVerificationStatus:async(e,t)=>{await new Promise(r=>setTimeout(r,300));const n=`${e}_${t}`;return e_[n]||{bookId:e,sourceRow:t,songTitle:"",status:"PENDING"}}},cF=({isOpen:e,onClose:t,onPreview:n})=>{const[r,s]=S.useState(null),[i,o]=S.useState(!1),a=S.useRef(null);if(!e)return null;const l=h=>{if(h.target.files&&h.target.files[0]){const f=h.target.files[0];if(f.size>5*1024*1024){ut.error("File size exceeds 5MB limit.");return}if(!["image/jpeg","image/png","application/pdf"].includes(f.type)){ut.error("Only JPG, PNG and PDF files are allowed.");return}s(f)}},u=h=>new Promise((f,p)=>{const w=new FileReader;w.readAsDataURL(h),w.onload=()=>{const x=w.result.split(",")[1];f(x)},w.onerror=g=>p(g)}),c=async()=>{if(!r){ut.error("Please select a file first.");return}o(!0);try{const h=await u(r);await n(r,h),s(null),t()}catch(h){console.error("Preview failed in modal:",h)}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[b.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Upload Source Media"}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Select Image or PDF"}),b.jsx("input",{type:"file",ref:a,accept:"image/jpeg,image/png,application/pdf",onChange:l,className:`block w-full text-sm text-gray-500\r
                            file:mr-4 file:py-2 file:px-4\r
                            file:rounded-full file:border-0\r
                            file:text-sm file:font-semibold\r
                            file:bg-indigo-50 file:text-indigo-700\r
                            hover:file:bg-indigo-100`}),b.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Max size: 5MB"})]}),r&&b.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded border text-sm text-gray-700",children:["Selected: ",b.jsx("strong",{children:r.name})," (",(r.size/1024).toFixed(1)," KB)"]}),b.jsxs("div",{className:"flex justify-end space-x-3",children:[b.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",disabled:i,children:"Cancel"}),b.jsx("button",{onClick:c,className:"px-4 py-2 text-white bg-indigo-600 rounded hover:bg-indigo-700 flex items-center",disabled:i||!r,children:i?b.jsxs(b.Fragment,{children:[b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading Preview..."]}):"Load for Preview"})]})]})})},dF=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters.");const o=await Zy(n,i);if(o&&o.songData&&o.sourceLanguage)return[o.songData,o.metadata,o.sourceLanguage];const a=await Fh({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,h]=a;Xy({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:h,songData:l,metadata:u,sourceLanguage:c}).catch(console.error)}return a},hF=()=>{var ve,q,ue;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=xo(),s=zn(),i=Vn(),{session:o}=Cs(),{preferredLanguage:a,isMarathiMode:l,retainEnglishNumerals:u}=Ts(),c=((ve=s.state)==null?void 0:ve.filteredSongIndices)||[],h=((q=s.state)==null?void 0:q.index)||0,f=S.useMemo(()=>decodeURIComponent(r||""),[r]),{data:p,isLoading:w}=Vu({queryKey:["songDetails",t,n,(ue=o==null?void 0:o.user)==null?void 0:ue.email,f],queryFn:dF,staleTime:1/0,enabled:!!t&&!!n&&!!f}),[g,x]=S.useState(null),[y,v]=S.useState(!1);S.useEffect(()=>{if(t&&r){v(!0);const se=decodeURIComponent(r);Ip.getSourceMedia(e||"",t,se).then(x).finally(()=>v(!1))}},[e,t,r]);const[_,C]=S.useState("LOADING"),[R,O]=S.useState(!1);S.useEffect(()=>{t&&n&&(C("LOADING"),Ip.getVerificationStatus(t,n).then(se=>C((se==null?void 0:se.status)||"PENDING")))},[t,n]);const I=async(se,ye)=>{var ae;if(!t||!n||!r||!((ae=o==null?void 0:o.user)!=null&&ae.email))return;const Ee=_;C(se);try{se==="VERIFIED"&&await j(),await Ip.submitVerification(t,n,f,se,o.user.email,ye),ut.success(se==="VERIFIED"?"Verified!":"Issue Reported"),O(!1)}catch(Le){console.error(Le),ut.error("Failed to save status"),C(Ee)}},D=()=>{O(!0)},$=()=>{p&&p[0]?(p[0],i(`/editor/book/${e}/${t}/${n}/${encodeURIComponent(r||"")}`)):i(`/editor/book/${e}/${t}/${n}/${encodeURIComponent(r||"")}`),O(!1)},F=()=>{if(c&&h<c.length-1){const se=h+1,ye=c[se];i(`/proofreading/verify/${e}/${t}/${ye.sourceRow}/${encodeURIComponent(ye.songTitle)}`,{state:{filteredSongIndices:c,index:se},replace:!0})}},he=()=>{if(c&&h>0){const se=h-1,ye=c[se];i(`/proofreading/verify/${e}/${t}/${ye.sourceRow}/${encodeURIComponent(ye.songTitle)}`,{state:{filteredSongIndices:c,index:se},replace:!0})}},N=()=>{i(`/proofreading/book/${e}/${t}`)},J=async se=>{var ae;if(!t||!n||!r||!((ae=o==null?void 0:o.user)!=null&&ae.email))return;const ye=encodeURIComponent(f),Ee=encodeURIComponent(se);try{const Le=await fetch(`${pr}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${ye}&text=${Ee}&sessionuser=${o.user.email}`);if(!Le.ok){const Me=await Le.json();throw new Error(`API Error: ${Le.status} - ${JSON.stringify(Me)}`)}const Be=await Le.json();return ut.success(`Issue reported to server: ${Be[1]||"Success"}`),!0}catch(Le){return console.error("Failed to report issue:",Le),ut.error("Failed to report issue to server."),!1}},j=async()=>{var ye;if(!t||!r||!((ye=o==null?void 0:o.user)!=null&&ye.email))return;const se=encodeURIComponent(f);try{const Ee=await fetch(`${pr}?mode=api&apiname=marksongasverified&book=${t}&songtitle=${se}&sessionuser=${o.user.email}`,{method:"POST"});if(!Ee.ok){const Le=await Ee.json();throw new Error(`API Error: ${Ee.status} - ${JSON.stringify(Le)}`)}const ae=await Ee.json();if(ae.success)return!0;throw new Error(ae.message)}catch(Ee){return console.error("Failed to mark verified:",Ee),ut.error("Failed to sync verification to server."),!1}},[Q,we]=S.useState(!1),[z,W]=S.useState(!1),[K,de]=S.useState(null),H=async(se,ye)=>{se.type;const Ee=`data:${se.type};base64,${ye}`;x({type:se.type==="application/pdf"?"PDF":"IMAGE",url:Ee}),de({file:se,base64:ye}),ut('Source loaded for preview. Click "Save to Server" to confirm.',{icon:""})},G=async()=>{var Ee;if(!t||!n||!r||!((Ee=o==null?void 0:o.user)!=null&&Ee.email)||!K)return;const{file:se,base64:ye}=K;try{const ae=new URL(pr);ae.searchParams.append("apiname","uploadsource"),ae.searchParams.append("sessionuser",o.user.email||"anonymous");const Le={category:e,book:t,sourcerow:n,songtitle:f,filename:se.name,mimetype:se.type,filedata:ye};W(!0);const Be=await fetch(ae.toString(),{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(Le)});if(!Be.ok)throw new Error(`Upload Status: ${Be.status}`);const Me=await Be.json();console.log("Save To Server Result:",Me),Me&&Me.success?(ut.success("File uploaded successfully to server!"),de(null)):ut.error(`Upload failed: ${Me.message||"Unknown error"}`)}catch(ae){console.error("Upload error:",ae),ut.error("Failed to upload file to server.")}finally{W(!1)}};return b.jsxs("div",{className:"flex flex-col h-screen overflow-hidden bg-gray-50",children:[b.jsxs("div",{className:"flex-none bg-indigo-700 text-white p-3 flex items-center justify-between shadow-md z-30",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{onClick:N,className:"mr-4 hover:bg-indigo-600 px-2 py-1 rounded",children:" Back"}),b.jsxs("h1",{className:"text-lg font-semibold truncate max-w-xl",children:["Proof Reading: ",f]})]}),b.jsxs("div",{className:"flex items-center space-x-4",children:[K?b.jsxs("div",{className:"flex items-center space-x-2 bg-indigo-800 rounded px-2 py-1",children:[b.jsx("span",{className:"text-xs text-indigo-200",children:"New Source Previewing..."}),b.jsxs("button",{onClick:G,disabled:z,className:`px-3 py-1 bg-green-500 hover:bg-green-600 rounded text-sm text-white font-bold transition-colors shadow-sm flex items-center ${z?"opacity-70 cursor-not-allowed":""}`,children:[z&&b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),z?"Saving...":"Save to Server"]}),b.jsx("button",{onClick:()=>{de(null),ut.error("Upload cancelled.")},className:"px-2 py-1 bg-red-500 hover:bg-red-600 rounded text-xs text-white",children:"Cancel"})]}):b.jsxs("button",{onClick:()=>we(!0),className:"flex items-center px-3 py-1 bg-indigo-600 hover:bg-indigo-500 rounded text-sm transition-colors border border-indigo-400",title:"Upload correct source image/pdf",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Source"]}),b.jsxs("div",{className:"text-sm opacity-80",children:["Song ",h+1," of ",c.length]})]})]}),b.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[b.jsx("div",{className:"w-1/2 border-r border-gray-300 bg-gray-200 relative",children:b.jsx(aF,{media:g,isLoading:y})}),b.jsx("div",{className:"w-1/2 bg-white overflow-auto flex flex-col relative",children:w||!p?b.jsx("div",{className:"flex-1 flex items-center justify-center",children:"Loading Content..."}):b.jsx("div",{className:"flex-1 p-6",children:b.jsx(Y1,{data:p[0],sourceLanguage:p[2],preferredLanguage:a,isMarathiMode:l,retainEnglishNumerals:u})})})]}),b.jsx("div",{className:"flex-none",children:b.jsx(lF,{status:_,onVerify:se=>{se==="CORRECTION_NEEDED"?D():I(se)},onNext:F,onPrev:he,isNextDisabled:h>=c.length-1,isPrevDisabled:h<=0})}),b.jsx(uF,{isOpen:R,onClose:()=>O(!1),onSubmitReport:async se=>{await J(se)&&I("CORRECTION_NEEDED",se)},onEditSong:$}),b.jsx(cF,{isOpen:Q,onClose:()=>we(!1),onPreview:H})]})};function fF(){const{session:e}=Cs(),{categories:t,isLoading:n}=Mh(),r=(t==null?void 0:t.flatMap(s=>s.books))||[];return n?b.jsx("div",{children:"Checking authentication..."}):b.jsx(V1,{children:b.jsx(FD,{books:r,children:b.jsxs(hR,{children:[b.jsx(Et,{path:"/login",element:b.jsx(II,{})}),b.jsx(Et,{path:"/signup",element:b.jsx(DI,{})}),b.jsx(Et,{path:"/change-password",element:b.jsx(NI,{})}),b.jsx(Et,{path:"/auth/callback",element:b.jsx($I,{})}),b.jsx(Et,{path:"/settings",element:b.jsx(tn,{session:e,children:b.jsx(L5,{})})}),b.jsx(Et,{path:"/categories",element:b.jsx(tn,{session:e,children:b.jsx(mp,{})})}),b.jsx(Et,{path:"/books/:categoryId",element:b.jsx(tn,{session:e,children:b.jsx(vb,{})})}),b.jsx(Et,{path:"/book/:categoryId/:bookId",element:b.jsx(tn,{session:e,children:b.jsx(Eb,{})})}),b.jsx(Et,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:b.jsx(tn,{session:e,children:b.jsx(U5,{})})}),b.jsx(Et,{path:"/editor/book/:categoryId/:bookId/:sourceRow/:songTitle",element:b.jsx(tn,{session:e,children:b.jsx(Jx,{})})}),b.jsx(Et,{path:"/song-editor",element:b.jsx(tn,{session:e,children:b.jsx(Jx,{})})}),b.jsx(Et,{path:"/sankeertan/:broadcastId",element:b.jsx(tn,{session:e,children:b.jsx(q5,{broadcastId:1})})}),b.jsx(Et,{path:"/localstoragesync",element:b.jsx(tn,{session:e,children:b.jsx(oF,{})})}),b.jsx(Et,{path:"/bulkDownloadTester",element:b.jsx(tn,{session:e,children:b.jsx(tF,{})})}),b.jsx(Et,{path:"/offlineContentManager",element:b.jsx(tn,{session:e,children:b.jsx(sF,{})})}),b.jsx(Et,{path:"/search",element:b.jsx(tn,{session:e,children:b.jsx(X5,{})})}),b.jsx(Et,{path:"/",element:e?b.jsx(WS,{to:"/categories",replace:!0}):b.jsx("div",{children:"Welcome!"})}),b.jsx(Et,{path:"/proofreading",element:b.jsx(tn,{session:e,children:b.jsx(mp,{mode:"proofreading"})})}),b.jsx(Et,{path:"/proofreading/categories",element:b.jsx(tn,{session:e,children:b.jsx(mp,{mode:"proofreading"})})}),b.jsx(Et,{path:"/proofreading/books/:categoryId",element:b.jsx(tn,{session:e,children:b.jsx(vb,{mode:"proofreading"})})}),b.jsx(Et,{path:"/proofreading/book/:categoryId/:bookId",element:b.jsx(tn,{session:e,children:b.jsx(Eb,{mode:"proofreading"})})}),b.jsx(Et,{path:"/proofreading/verify/:categoryId/:bookId/:sourceRow/:songTitle",element:b.jsx(tn,{session:e,children:b.jsx(hF,{})})})]})})})}const pF=S.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),mF=({children:e})=>{const[t,n]=S.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,s]=S.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[i,o]=S.useState(null),[a,l]=S.useState(!1),[u,c]=S.useState(null),{bookId:h}=xo(),f=S.useCallback(async w=>{l(!0),c(null),o(null),await new Promise(x=>setTimeout(x,500));const g=t.find(x=>x.id===w);o(g||null),l(!1)},[t,l,c,o]);S.useEffect(()=>{h&&f(h)},[h,f]);const p={books:t,categories:r,currentBook:i,loadBook:f,loading:a,error:u};return b.jsx(pF.Provider,{value:p,children:e})},gF=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var l;const[r,s]=S.useState(null);Vn(),S.useEffect(()=>{Vt.auth.getSession().then(({data:{session:u}})=>{s(u)}),Vt.auth.onAuthStateChange((u,c)=>{s(c)})},[]);const{handleSignOut:i}=B1(),{isOfflineMode:o,setIsOfflineMode:a}=ev();return b.jsx("div",{className:"relative inline-block text-left",children:r?b.jsxs("div",{children:[b.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((l=r.user)==null?void 0:l.email)||"User",b.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:b.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&b.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:b.jsxs("div",{className:"py-1",children:[b.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:b.jsxs("label",{className:"flex items-center",children:[b.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:o,onChange:u=>a(u.target.checked)}),b.jsx("span",{children:"Offline Mode"})]})}),b.jsx(On,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),b.jsx(On,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),b.jsx(On,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),b.jsx(On,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),b.jsx(On,{to:"/song-editor",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Song Editor"}),b.jsx(On,{to:"/proofreading",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Proof Reading"}),b.jsx(On,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),b.jsx("button",{onClick:i,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):b.jsx(On,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var yF=Object.defineProperty,vF=(e,t,n)=>t in e?yF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dp=(e,t,n)=>(vF(e,typeof t!="symbol"?t+"":t,n),n);let wF=class{constructor(){Dp(this,"current",this.detect()),Dp(this,"handoffState","pending"),Dp(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Jr=new wF;function Ju(e){var t;return Jr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function Og(e){var t,n;return Jr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function HC(e){var t,n;return(n=(t=Og(e))==null?void 0:t.activeElement)!=null?n:null}function bF(e){return HC(e)===e}function qh(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ps(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return qh(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Ps();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function Gh(){let[e]=S.useState(Ps);return S.useEffect(()=>()=>e.dispose(),[e]),e}let Un=(e,t)=>{Jr.isServer?S.useEffect(e,t):S.useLayoutEffect(e,t)};function ko(e){let t=S.useRef(e);return Un(()=>{t.current=e},[e]),t}let pt=function(e){let t=ko(e);return We.useCallback((...n)=>t.current(...n),[t])};function Zu(e){return S.useMemo(()=>e,Object.values(e))}let xF=S.createContext(void 0);function _F(){return S.useContext(xF)}function Ig(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ss(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ss),r}var uh=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(uh||{}),ri=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ri||{});function vr(){let e=SF();return S.useCallback(t=>kF({mergeRefs:e,...t}),[e])}function kF({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??EF;let l=qC(t,e);if(i)return td(l,n,r,o,a);let u=s??0;if(u&2){let{static:c=!1,...h}=l;if(c)return td(h,n,r,o,a)}if(u&1){let{unmount:c=!0,...h}=l;return Ss(c?0:1,{0(){return null},1(){return td({...h,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return td(l,n,r,o,a)}function td(e,t={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=Np(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let h={};if(t){let f=!1,p=[];for(let[w,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&p.push(w.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(f){h["data-headlessui-state"]=p.join(" ");for(let w of p)h[`data-${w}`]=""}}if(Yl(i)&&(Object.keys(Mi(l)).length>0||Object.keys(Mi(h)).length>0))if(!S.isValidElement(c)||Array.isArray(c)&&c.length>1||TF(c)){if(Object.keys(Mi(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Mi(l)).concat(Object.keys(Mi(h))).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}else{let f=c.props,p=f==null?void 0:f.className,w=typeof p=="function"?(...y)=>Ig(p(...y),l.className):Ig(p,l.className),g=w?{className:w}:{},x=qC(c.props,Mi(Np(l,["ref"])));for(let y in h)y in x&&delete h[y];return S.cloneElement(c,Object.assign({},x,h,u,{ref:s(CF(c),u.ref)},g))}return S.createElement(i,Object.assign({},Np(l,["ref"]),!Yl(i)&&u,!Yl(i)&&h),c)}function SF(){let e=S.useRef([]),t=S.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function EF(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function qC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return t}function Kn(e){var t;return Object.assign(S.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Mi(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Np(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function CF(e){return We.version.split(".")[0]>="19"?e.props.ref:e.ref}function Yl(e){return e===S.Fragment||e===Symbol.for("react.fragment")}function TF(e){return Yl(e.type)}let PF="span";var ch=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ch||{});function jF(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return vr()({ourProps:i,theirProps:s,slot:{},defaultTag:PF,name:"Hidden"})}let Dg=Kn(jF);function RF(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function pi(e){return RF(e)&&"tagName"in e}function yo(e){return pi(e)&&"accessKey"in e}function si(e){return pi(e)&&"tabIndex"in e}function AF(e){return pi(e)&&"style"in e}function OF(e){return yo(e)&&e.nodeName==="IFRAME"}function IF(e){return yo(e)&&e.nodeName==="INPUT"}let GC=Symbol();function DF(e,t=!0){return Object.assign(e,{[GC]:t})}function Zr(...e){let t=S.useRef(e);S.useEffect(()=>{t.current=e},[e]);let n=pt(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[GC]))?void 0:n}let Mv=S.createContext(null);Mv.displayName="DescriptionContext";function QC(){let e=S.useContext(Mv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,QC),t}return e}function NF(){let[e,t]=S.useState([]);return[e.length>0?e.join(" "):void 0,S.useMemo(()=>function(n){let r=pt(i=>(t(o=>[...o,i]),()=>t(o=>{let a=o.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),s=S.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return We.createElement(Mv.Provider,{value:s},n.children)},[t])]}let LF="p";function $F(e,t){let n=S.useId(),r=_F(),{id:s=`headlessui-description-${n}`,...i}=e,o=QC(),a=Zr(t);Un(()=>o.register(s),[s,o.register]);let l=Zu({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:s};return vr()({ourProps:u,theirProps:i,slot:l,defaultTag:LF,name:o.name||"Description"})}let MF=Kn($F),FF=Object.assign(MF,{});var YC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(YC||{});let BF=S.createContext(()=>{});function UF({value:e,children:t}){return We.createElement(BF.Provider,{value:e},t)}let JC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var zF=Object.defineProperty,VF=(e,t,n)=>t in e?zF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KF=(e,t,n)=>(VF(e,t+"",n),n),ZC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sr=(e,t,n)=>(ZC(e,t,"read from private field"),n?n.call(e):t.get(e)),Lp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},t_=(e,t,n,r)=>(ZC(e,t,"write to private field"),t.set(e,n),n),Fr,Rl,Al;let WF=class{constructor(t){Lp(this,Fr,{}),Lp(this,Rl,new JC(()=>new Set)),Lp(this,Al,new Set),KF(this,"disposables",Ps()),t_(this,Fr,t),Jr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return sr(this,Fr)}subscribe(t,n){if(Jr.isServer)return()=>{};let r={selector:t,callback:n,current:t(sr(this,Fr))};return sr(this,Al).add(r),this.disposables.add(()=>{sr(this,Al).delete(r)})}on(t,n){return Jr.isServer?()=>{}:(sr(this,Rl).get(t).add(n),this.disposables.add(()=>{sr(this,Rl).get(t).delete(n)}))}send(t){let n=this.reduce(sr(this,Fr),t);if(n!==sr(this,Fr)){t_(this,Fr,n);for(let r of sr(this,Al)){let s=r.selector(sr(this,Fr));XC(r.current,s)||(r.current=s,r.callback(s))}for(let r of sr(this,Rl).get(t.type))r(sr(this,Fr),t)}}};Fr=new WeakMap,Rl=new WeakMap,Al=new WeakMap;function XC(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:$p(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:$p(e.entries(),t.entries()):n_(e)&&n_(t)?$p(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function $p(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function n_(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var HF=Object.defineProperty,qF=(e,t,n)=>t in e?HF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r_=(e,t,n)=>(qF(e,typeof t!="symbol"?t+"":t,n),n),GF=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(GF||{});let QF={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},YF=class eT extends WF{constructor(){super(...arguments),r_(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),r_(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new eT({stack:[]})}reduce(t,n){return Ss(n.type,QF,t,n)}};const tT=new JC(()=>YF.new());var nT={exports:{}},rT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=S;function JF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ZF=typeof Object.is=="function"?Object.is:JF,XF=Xu.useSyncExternalStore,eB=Xu.useRef,tB=Xu.useEffect,nB=Xu.useMemo,rB=Xu.useDebugValue;rT.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=eB(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=nB(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),s!==void 0&&o.hasValue){var w=o.value;if(s(w,p))return h=w}return h=p}if(w=h,ZF(c,p))return w;var g=r(p);return s!==void 0&&s(w,g)?(c=p,w):(c=p,h=g)}var u=!1,c,h,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,s]);var a=XF(e,i[0],i[1]);return tB(function(){o.hasValue=!0,o.value=a},[a]),rB(a),a};nT.exports=rT;var sB=nT.exports;function sT(e,t,n=XC){return sB.useSyncExternalStoreWithSelector(pt(r=>e.subscribe(iB,r)),pt(()=>e.state),pt(()=>e.state),pt(t),n)}function iB(e){return e}function ec(e,t){let n=S.useId(),r=tT.get(t),[s,i]=sT(r,S.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Un(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let Ng=new Map,Jl=new Map;function s_(e){var t;let n=(t=Jl.get(e))!=null?t:0;return Jl.set(e,n+1),n!==0?()=>i_(e):(Ng.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>i_(e))}function i_(e){var t;let n=(t=Jl.get(e))!=null?t:1;if(n===1?Jl.delete(e):Jl.set(e,n-1),n!==1)return;let r=Ng.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ng.delete(e))}function oB(e,{allowed:t,disallowed:n}={}){let r=ec(e,"inert-others");Un(()=>{var s,i;if(!r)return;let o=Ps();for(let l of(s=n==null?void 0:n())!=null?s:[])l&&o.add(s_(l));let a=(i=t==null?void 0:t())!=null?i:[];for(let l of a){if(!l)continue;let u=Ju(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let h of c.children)a.some(f=>h.contains(f))||o.add(s_(h));c=c.parentElement}}return o.dispose},[r,t,n])}function aB(e,t,n){let r=ko(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});S.useEffect(()=>{if(!e)return;let s=t===null?null:yo(t)?t:t.current;if(!s)return;let i=Ps();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let dh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),lB=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var cs=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(cs||{}),Lg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Lg||{}),uB=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(uB||{});function cB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(dh)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function dB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(lB)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var iT=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(iT||{});function hB(e,t=0){var n;return e===((n=Ju(e))==null?void 0:n.body)?!1:Ss(t,{0(){return e.matches(dh)},1(){let r=e;for(;r!==null;){if(r.matches(dh))return!0;r=r.parentElement}return!1}})}var fB=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(fB||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ms(e){e==null||e.focus({preventScroll:!0})}let pB=["textarea","input"].join(",");function mB(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,pB))!=null?n:!1}function gB(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Zl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?Og(e[0]):document:Og(e),o=Array.isArray(e)?n?gB(e):e:t&64?dB(e):cB(e);s.length>0&&o.length>1&&(o=o.filter(p=>!s.some(w=>w!=null&&"current"in w?(w==null?void 0:w.current)===p:w===p))),r=r??(i==null?void 0:i.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,h=o.length,f;do{if(c>=h||c+h<=0)return 0;let p=l+c;if(t&16)p=(p+h)%h;else{if(p<0)return 3;if(p>=h)return 1}f=o[p],f==null||f.focus(u),c+=a}while(f!==HC(f));return t&6&&mB(f)&&f.select(),2}function oT(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function yB(){return/Android/gi.test(window.navigator.userAgent)}function o_(){return oT()||yB()}function nd(e,t,n,r){let s=ko(n);S.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function aT(e,t,n,r){let s=ko(n);S.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const a_=30;function vB(e,t,n){let r=ko(n),s=S.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function h(f){return typeof f=="function"?h(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let h of c)if(h!==null&&(h.contains(u)||a.composed&&a.composedPath().includes(h)))return;return!hB(u,iT.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),i=S.useRef(null);nd(e,"pointerdown",a=>{var l,u;o_()||(i.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),nd(e,"pointerup",a=>{if(o_()||!i.current)return;let l=i.current;return i.current=null,s(a,()=>l)},!0);let o=S.useRef({x:0,y:0});nd(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),nd(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=a_||Math.abs(l.y-o.current.y)>=a_))return s(a,()=>si(a.target)?a.target:null)},!0),aT(e,"blur",a=>s(a,()=>OF(window.document.activeElement)?window.document.activeElement:null),!0)}function Fv(...e){return S.useMemo(()=>Ju(...e),[...e])}function lT(e,t,n,r){let s=ko(n);S.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function wB(e){return S.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function bB(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function xB(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function _B(){return oT()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Ps();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(si(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);si(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),si(l.target)&&AF(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(si(a.target)){if(IF(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function kB(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function l_(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Qi=bB(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ps(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=l_(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=l_(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[_B(),xB(),kB()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Qi.subscribe(()=>{let e=Qi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Qi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Qi.dispatch("TEARDOWN",n)}});function SB(e,t,n=()=>({containers:[]})){let r=wB(Qi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return Un(()=>{if(!(!t||!e))return Qi.dispatch("PUSH",t,n),()=>Qi.dispatch("POP",t,n)},[e,t]),i}function EB(e,t,n=()=>[document.body]){let r=ec(e,"scroll-lock");SB(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function CB(e=0){let[t,n]=S.useState(e),r=S.useCallback(l=>n(l),[]),s=S.useCallback(l=>n(u=>u|l),[]),i=S.useCallback(l=>(t&l)===l,[t]),o=S.useCallback(l=>n(u=>u&~l),[]),a=S.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var TB={},u_,c_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((u_=process==null?void 0:TB)==null?void 0:u_.NODE_ENV)==="test"&&typeof((c_=Element==null?void 0:Element.prototype)==null?void 0:c_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var PB=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(PB||{});function jB(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function RB(e,t,n,r){let[s,i]=S.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=CB(e&&s?3:0),u=S.useRef(!1),c=S.useRef(!1),h=Gh();return Un(()=>{var f;if(e){if(n&&i(!0),!t){n&&a(3);return}return(f=r==null?void 0:r.start)==null||f.call(r,n),AB(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var p;c.current&&DB(t)||(u.current=!1,l(7),n||i(!1),(p=r==null?void 0:r.end)==null||p.call(r,n))}})}},[e,n,t,h]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function AB(e,{prepare:t,run:n,done:r,inFlight:s}){let i=Ps();return IB(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(OB(e,r))})}),i.dispose}function OB(e,t){var n,r;let s=Ps();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||t()}),s.dispose)}function IB(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function DB(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Bv(e,t){let n=S.useRef([]),r=pt(e);S.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let a=r(t,s);return n.current=t,a}},[r,...t])}let Qh=S.createContext(null);Qh.displayName="OpenClosedContext";var jr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(jr||{});function Yh(){return S.useContext(Qh)}function NB({value:e,children:t}){return We.createElement(Qh.Provider,{value:e},t)}function LB({children:e}){return We.createElement(Qh.Provider,{value:null},e)}function $B(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Hs=[];$B(()=>{function e(t){if(!si(t.target)||t.target===document.body||Hs[0]===t.target)return;let n=t.target;n=n.closest(dh),Hs.unshift(n??t.target),Hs=Hs.filter(r=>r!=null&&r.isConnected),Hs.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function uT(e){let t=pt(e),n=S.useRef(!1);S.useEffect(()=>(n.current=!1,()=>{n.current=!0,qh(()=>{n.current&&t()})}),[t])}let cT=S.createContext(!1);function MB(){return S.useContext(cT)}function d_(e){return We.createElement(cT.Provider,{value:e.force},e.children)}function FB(e){let t=MB(),n=S.useContext(hT),[r,s]=S.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Jr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return S.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),S.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let dT=S.Fragment,BB=Kn(function(e,t){let{ownerDocument:n=null,...r}=e,s=S.useRef(null),i=Zr(DF(f=>{s.current=f}),t),o=Fv(s.current),a=n??o,l=FB(a),u=S.useContext($g),c=Gh(),h=vr();return uT(()=>{var f;l&&l.childNodes.length<=0&&((f=l.parentElement)==null||f.removeChild(l))}),l?Dy.createPortal(We.createElement("div",{"data-headlessui-portal":"",ref:f=>{c.dispose(),u&&f&&c.add(u.register(f))}},h({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:dT,name:"Portal"})),l):null});function UB(e,t){let n=Zr(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=vr();return r?We.createElement(BB,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:dT,name:"Portal"})}let zB=S.Fragment,hT=S.createContext(null);function VB(e,t){let{target:n,...r}=e,s={ref:Zr(t)},i=vr();return We.createElement(hT.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:zB,name:"Popover.Group"}))}let $g=S.createContext(null);function KB(){let e=S.useContext($g),t=S.useRef([]),n=pt(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=pt(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=S.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,S.useMemo(()=>function({children:i}){return We.createElement($g.Provider,{value:s},i)},[s])]}let WB=Kn(UB),fT=Kn(VB),HB=Object.assign(WB,{Group:fT});function qB(e,t=typeof document<"u"?document.defaultView:null,n){let r=ec(e,"escape");lT(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===YC.Escape&&n(s))})}function GB(){var e;let[t]=S.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=S.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Un(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function QB({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=pt(()=>{var s,i;let o=Ju(n),a=[];for(let l of e)l!==null&&(pi(l)?a.push(l):"current"in l&&pi(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(s=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&pi(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:pt(s=>r().some(i=>i.contains(s)))}}let pT=S.createContext(null);function h_({children:e,node:t}){let[n,r]=S.useState(null),s=mT(t??n);return We.createElement(pT.Provider,{value:s},e,s===null&&We.createElement(Dg,{features:ch.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=Ju(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&pi(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function mT(e=null){var t;return(t=S.useContext(pT))!=null?t:e}function YB(){let e=typeof document>"u";return"useSyncExternalStore"in E0?(t=>t.useSyncExternalStore)(E0)(()=>()=>{},()=>!1,()=>!e):!1}function Jh(){let e=YB(),[t,n]=S.useState(Jr.isHandoffComplete);return t&&Jr.isHandoffComplete===!1&&n(!1),S.useEffect(()=>{t!==!0&&n(!0)},[t]),S.useEffect(()=>Jr.handoff(),[]),e?!1:t}function Uv(){let e=S.useRef(!1);return Un(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ol=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ol||{});function JB(){let e=S.useRef(0);return aT(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function gT(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)pi(n.current)&&t.add(n.current);return t}let ZB="div";var Ui=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Ui||{});function XB(e,t){let n=S.useRef(null),r=Zr(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...l}=e;Jh()||(a=0);let u=Fv(n.current);rU(a,{ownerDocument:u});let c=sU(a,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:i});iU(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let h=JB(),f=pt(v=>{if(!yo(n.current))return;let _=n.current;(C=>C())(()=>{Ss(h.current,{[Ol.Forwards]:()=>{Zl(_,cs.First,{skipElements:[v.relatedTarget,i]})},[Ol.Backwards]:()=>{Zl(_,cs.Last,{skipElements:[v.relatedTarget,i]})}})})}),p=ec(!!(a&2),"focus-trap#tab-lock"),w=Gh(),g=S.useRef(!1),x={ref:r,onKeyDown(v){v.key=="Tab"&&(g.current=!0,w.requestAnimationFrame(()=>{g.current=!1}))},onBlur(v){if(!(a&4))return;let _=gT(o);yo(n.current)&&_.add(n.current);let C=v.relatedTarget;si(C)&&C.dataset.headlessuiFocusGuard!=="true"&&(yT(_,C)||(g.current?Zl(n.current,Ss(h.current,{[Ol.Forwards]:()=>cs.Next,[Ol.Backwards]:()=>cs.Previous})|cs.WrapAround,{relativeTo:v.target}):si(v.target)&&ms(v.target)))}},y=vr();return We.createElement(We.Fragment,null,p&&We.createElement(Dg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:ch.Focusable}),y({ourProps:x,theirProps:l,defaultTag:ZB,name:"FocusTrap"}),p&&We.createElement(Dg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:ch.Focusable}))}let eU=Kn(XB),tU=Object.assign(eU,{features:Ui});function nU(e=!0){let t=S.useRef(Hs.slice());return Bv(([n],[r])=>{r===!0&&n===!1&&qh(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Hs.slice())},[e,Hs,t]),pt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function rU(e,{ownerDocument:t}){let n=!!(e&8),r=nU(n);Bv(()=>{n||bF(t==null?void 0:t.body)&&ms(r())},[n]),uT(()=>{n&&ms(r())})}function sU(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=S.useRef(null),o=ec(!!(e&1),"focus-trap#initial-focus"),a=Uv();return Bv(()=>{if(e===0)return;if(!o){s!=null&&s.current&&ms(s.current);return}let l=n.current;l&&qh(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){i.current=u;return}}else if(l.contains(u)){i.current=u;return}if(r!=null&&r.current)ms(r.current);else{if(e&16){if(Zl(l,cs.First|cs.AutoFocus)!==Lg.Error)return}else if(Zl(l,cs.First)!==Lg.Error)return;if(s!=null&&s.current&&(ms(s.current),(t==null?void 0:t.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[s,o,e]),i}function iU(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=Uv(),o=!!(e&4);lT(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!i.current)return;let l=gT(r);yo(n.current)&&l.add(n.current);let u=s.current;if(!u)return;let c=a.target;yo(c)?yT(l,c)?(s.current=c,ms(c)):(a.preventDefault(),a.stopPropagation(),ms(u)):ms(s.current)},!0)}function yT(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function vT(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Yl((t=e.as)!=null?t:bT)||We.Children.count(e.children)===1}let Zh=S.createContext(null);Zh.displayName="TransitionContext";var oU=(e=>(e.Visible="visible",e.Hidden="hidden",e))(oU||{});function aU(){let e=S.useContext(Zh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function lU(){let e=S.useContext(Xh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Xh=S.createContext(null);Xh.displayName="NestingContext";function ef(e){return"children"in e?ef(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function wT(e,t){let n=ko(e),r=S.useRef([]),s=Uv(),i=Gh(),o=pt((p,w=ri.Hidden)=>{let g=r.current.findIndex(({el:x})=>x===p);g!==-1&&(Ss(w,{[ri.Unmount](){r.current.splice(g,1)},[ri.Hidden](){r.current[g].state="hidden"}}),i.microTask(()=>{var x;!ef(r)&&s.current&&((x=n.current)==null||x.call(n))}))}),a=pt(p=>{let w=r.current.find(({el:g})=>g===p);return w?w.state!=="visible"&&(w.state="visible"):r.current.push({el:p,state:"visible"}),()=>o(p,ri.Unmount)}),l=S.useRef([]),u=S.useRef(Promise.resolve()),c=S.useRef({enter:[],leave:[]}),h=pt((p,w,g)=>{l.current.splice(0),t&&(t.chains.current[w]=t.chains.current[w].filter(([x])=>x!==p)),t==null||t.chains.current[w].push([p,new Promise(x=>{l.current.push(x)})]),t==null||t.chains.current[w].push([p,new Promise(x=>{Promise.all(c.current[w].map(([y,v])=>v)).then(()=>x())})]),w==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(w)):g(w)}),f=pt((p,w,g)=>{Promise.all(c.current[w].splice(0).map(([x,y])=>y)).then(()=>{var x;(x=l.current.shift())==null||x()}).then(()=>g(w))});return S.useMemo(()=>({children:r,register:a,unregister:o,onStart:h,onStop:f,wait:u,chains:c}),[a,o,r,h,f,c,u])}let bT=S.Fragment,xT=uh.RenderStrategy;function uU(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:h,entered:f,leave:p,leaveFrom:w,leaveTo:g,...x}=e,[y,v]=S.useState(null),_=S.useRef(null),C=vT(e),R=Zr(...C?[_,t,v]:t===null?[]:[t]),O=(n=x.unmount)==null||n?ri.Unmount:ri.Hidden,{show:I,appear:D,initial:$}=aU(),[F,he]=S.useState(I?"visible":"hidden"),N=lU(),{register:J,unregister:j}=N;Un(()=>J(_),[J,_]),Un(()=>{if(O===ri.Hidden&&_.current){if(I&&F!=="visible"){he("visible");return}return Ss(F,{hidden:()=>j(_),visible:()=>J(_)})}},[F,_,J,j,I,O]);let Q=Jh();Un(()=>{if(C&&Q&&F==="visible"&&_.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[_,F,Q,C]);let we=$&&!D,z=D&&I&&$,W=S.useRef(!1),K=wT(()=>{W.current||(he("hidden"),j(_))},N),de=pt(ye=>{W.current=!0;let Ee=ye?"enter":"leave";K.onStart(_,Ee,ae=>{ae==="enter"?i==null||i():ae==="leave"&&(a==null||a())})}),H=pt(ye=>{let Ee=ye?"enter":"leave";W.current=!1,K.onStop(_,Ee,ae=>{ae==="enter"?o==null||o():ae==="leave"&&(l==null||l())}),Ee==="leave"&&!ef(K)&&(he("hidden"),j(_))});S.useEffect(()=>{C&&s||(de(I),H(I))},[I,C,s]);let G=!(!s||!C||!Q||we),[,ve]=RB(G,y,I,{start:de,end:H}),q=Mi({ref:R,className:((r=Ig(x.className,z&&u,z&&c,ve.enter&&u,ve.enter&&ve.closed&&c,ve.enter&&!ve.closed&&h,ve.leave&&p,ve.leave&&!ve.closed&&w,ve.leave&&ve.closed&&g,!ve.transition&&I&&f))==null?void 0:r.trim())||void 0,...jB(ve)}),ue=0;F==="visible"&&(ue|=jr.Open),F==="hidden"&&(ue|=jr.Closed),I&&F==="hidden"&&(ue|=jr.Opening),!I&&F==="visible"&&(ue|=jr.Closing);let se=vr();return We.createElement(Xh.Provider,{value:K},We.createElement(NB,{value:ue},se({ourProps:q,theirProps:x,defaultTag:bT,features:xT,visible:F==="visible",name:"Transition.Child"})))}function cU(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=S.useRef(null),a=vT(e),l=Zr(...a?[o,t]:t===null?[]:[t]);Jh();let u=Yh();if(n===void 0&&u!==null&&(n=(u&jr.Open)===jr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,h]=S.useState(n?"visible":"hidden"),f=wT(()=>{n||h("hidden")}),[p,w]=S.useState(!0),g=S.useRef([n]);Un(()=>{p!==!1&&g.current[g.current.length-1]!==n&&(g.current.push(n),w(!1))},[g,n]);let x=S.useMemo(()=>({show:n,appear:r,initial:p}),[n,r,p]);Un(()=>{n?h("visible"):!ef(f)&&o.current!==null&&h("hidden")},[n,f]);let y={unmount:s},v=pt(()=>{var R;p&&w(!1),(R=e.beforeEnter)==null||R.call(e)}),_=pt(()=>{var R;p&&w(!1),(R=e.beforeLeave)==null||R.call(e)}),C=vr();return We.createElement(Xh.Provider,{value:f},We.createElement(Zh.Provider,{value:x},C({ourProps:{...y,as:S.Fragment,children:We.createElement(_T,{ref:l,...y,...i,beforeEnter:v,beforeLeave:_})},theirProps:{},defaultTag:S.Fragment,features:xT,visible:c==="visible",name:"Transition"})))}function dU(e,t){let n=S.useContext(Zh)!==null,r=Yh()!==null;return We.createElement(We.Fragment,null,!n&&r?We.createElement(Mg,{ref:t,...e}):We.createElement(_T,{ref:t,...e}))}let Mg=Kn(cU),_T=Kn(uU),zv=Kn(dU),Sd=Object.assign(Mg,{Child:zv,Root:Mg});var hU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(hU||{}),fU=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(fU||{});let pU={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Vv=S.createContext(null);Vv.displayName="DialogContext";function tf(e){let t=S.useContext(Vv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tf),n}return t}function mU(e,t){return Ss(t.type,pU,e,t)}let f_=Kn(function(e,t){let n=S.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...h}=e,f=S.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(f.current||(f.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let p=Yh();s===void 0&&p!==null&&(s=(p&jr.Open)===jr.Open);let w=S.useRef(null),g=Zr(w,t),x=Fv(w.current),y=s?0:1,[v,_]=S.useReducer(mU,{titleId:null,descriptionId:null,panelRef:S.createRef()}),C=pt(()=>i(!1)),R=pt(ve=>_({type:0,id:ve})),O=Jh()?y===0:!1,[I,D]=KB(),$={get current(){var ve;return(ve=v.panelRef.current)!=null?ve:w.current}},F=mT(),{resolveContainers:he}=QB({mainTreeNode:F,portals:I,defaultContainers:[$]}),N=p!==null?(p&jr.Closing)===jr.Closing:!1;oB(u||N?!1:O,{allowed:pt(()=>{var ve,q;return[(q=(ve=w.current)==null?void 0:ve.closest("[data-headlessui-portal]"))!=null?q:null]}),disallowed:pt(()=>{var ve;return[(ve=F==null?void 0:F.closest("body > *:not(#headlessui-portal-root)"))!=null?ve:null]})});let J=tT.get(null);Un(()=>{if(O)return J.actions.push(r),()=>J.actions.pop(r)},[J,r,O]);let j=sT(J,S.useCallback(ve=>J.selectors.isTop(ve,r),[J,r]));vB(j,he,ve=>{ve.preventDefault(),C()}),qB(j,x==null?void 0:x.defaultView,ve=>{ve.preventDefault(),ve.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),EB(u||N?!1:O,x,he),aB(O,w,C);let[Q,we]=NF(),z=S.useMemo(()=>[{dialogState:y,close:C,setTitleId:R,unmount:c},v],[y,C,R,c,v]),W=Zu({open:y===0}),K={ref:g,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:y===0?!0:void 0,"aria-labelledby":v.titleId,"aria-describedby":Q,unmount:c},de=!GB(),H=Ui.None;O&&!u&&(H|=Ui.RestoreFocus,H|=Ui.TabLock,l&&(H|=Ui.AutoFocus),de&&(H|=Ui.InitialFocus));let G=vr();return We.createElement(LB,null,We.createElement(d_,{force:!0},We.createElement(HB,null,We.createElement(Vv.Provider,{value:z},We.createElement(fT,{target:w},We.createElement(d_,{force:!1},We.createElement(we,{slot:W},We.createElement(D,null,We.createElement(tU,{initialFocus:o,initialFocusFallback:w,containers:he,features:H},We.createElement(UF,{value:C},G({ourProps:K,theirProps:h,slot:W,defaultTag:gU,features:yU,visible:y===0,name:"Dialog"})))))))))))}),gU="div",yU=uh.RenderStrategy|uh.Static;function vU(e,t){let{transition:n=!1,open:r,...s}=e,i=Yh(),o=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?We.createElement(h_,null,We.createElement(Sd,{show:r,transition:n,unmount:s.unmount},We.createElement(f_,{ref:t,...s}))):We.createElement(h_,null,We.createElement(f_,{ref:t,open:r,...s}))}let wU="div";function bU(e,t){let n=S.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:a},l]=tf("Dialog.Panel"),u=Zr(t,l.panelRef),c=Zu({open:o===0}),h=pt(x=>{x.stopPropagation()}),f={ref:u,id:r,onClick:h},p=s?zv:S.Fragment,w=s?{unmount:a}:{},g=vr();return We.createElement(p,{...w},g({ourProps:f,theirProps:i,slot:c,defaultTag:wU,name:"Dialog.Panel"}))}let xU="div";function _U(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=tf("Dialog.Backdrop"),o=Zu({open:s===0}),a={ref:t,"aria-hidden":!0},l=n?zv:S.Fragment,u=n?{unmount:i}:{},c=vr();return We.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:xU,name:"Dialog.Backdrop"}))}let kU="h2";function SU(e,t){let n=S.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=tf("Dialog.Title"),a=Zr(t);S.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Zu({open:i===0}),u={ref:a,id:r};return vr()({ourProps:u,theirProps:s,slot:l,defaultTag:kU,name:"Dialog.Title"})}let EU=Kn(vU),CU=Kn(bU);Kn(_U);let TU=Kn(SU),Mp=Object.assign(EU,{Panel:CU,Title:TU,Description:FF});const PU=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r,isMarathiMode:s,retainEnglishNumerals:i})=>{const[o,a]=S.useState(r),[l,u]=S.useState(s),[c,h]=S.useState(i);We.useEffect(()=>{a(r),u(s),h(i)},[r,s,i,e]);const f=x=>{a(x.target.value)},p=x=>{u(x.target.checked)},w=x=>{h(x.target.checked)},g=()=>{n(o,l,c),t()};return b.jsx(Sd,{appear:!0,show:e,as:S.Fragment,children:b.jsxs(Mp,{as:"div",className:"relative z-10",onClose:t,children:[b.jsx(Sd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),b.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:b.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:b.jsx(Sd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:b.jsxs(Mp.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[b.jsx(Mp.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),b.jsxs("div",{className:"mt-2",children:[b.jsx(VC,{isMarathiMode:l,retainEnglishNumerals:c,onMarathiModeChange:p,onRetainNumeralsChange:w}),b.jsx("hr",{className:"my-3"}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"radio",name:"language",value:"iast",checked:o==="iast",onChange:f,className:"mr-2"}),"IAST"]}),b.jsx("br",{}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:o==="tamil_superscripted",onChange:f,className:"mr-2"}),"Tamil"]}),b.jsx("br",{}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:o==="malayalam",onChange:f,className:"mr-2"}),"Malayalam"]}),b.jsx("br",{}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:o==="devanagari",onChange:f,className:"mr-2"}),"Devanagari"]}),b.jsx("br",{}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"radio",name:"language",value:"itrans",checked:o==="itrans",onChange:f,className:"mr-2"}),"ITrans"]}),b.jsx("br",{})]}),b.jsxs("div",{className:"mt-4",children:[b.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),b.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:g,children:"Save"})]})]})})})})]})})},jU=()=>{const[e,t]=S.useState(navigator.onLine);S.useEffect(()=>{const x=()=>t(!0),y=()=>t(!1);return window.addEventListener("online",x),window.addEventListener("offline",y),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(v=>{console.log("Service Worker is active:",v.active)}),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",y)}},[]);const{preferredLanguage:n,setPreferredLanguage:r,isMarathiMode:s,setIsMarathiMode:i,retainEnglishNumerals:o,setRetainEnglishNumerals:a}=Ts(),[l,u]=S.useState(!1),c=()=>u(!l),[h,f]=S.useState(!1),p=()=>f(!0),w=()=>f(!1),g=(x,y,v)=>{r(x),i(y),a(v)};return b.jsx(OI,{children:b.jsxs("div",{className:"app-layout",children:[" ",b.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:b.jsx(gF,{toggleDropdown:c,isDropdownOpen:l,openLanguageSettings:p})}),b.jsx(PU,{isOpen:h,onClose:w,onLanguageSave:g,currentLanguage:n,isMarathiMode:s,retainEnglishNumerals:o}),b.jsx(LD,{children:b.jsxs(mF,{children:[b.jsx(fF,{}),b.jsx(N5,{})]})})]})})};function RU(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(h=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await Ua(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r==null||r()}),a.register({immediate:t}).then(h=>{i?i("/new-sankeertan/sw.js",h):s==null||s(h)}).catch(h=>{o==null||o(h)})}}return l=c(),u}RU();const AU=new aD({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),OU=Fp.createRoot(document.getElementById("root"));OU.render(b.jsx(We.StrictMode,{children:b.jsx(lD,{client:AU,children:b.jsx(LR,{children:b.jsx(V1,{children:b.jsx(jU,{})})})})}));
