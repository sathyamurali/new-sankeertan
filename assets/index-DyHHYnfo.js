var ST=Object.defineProperty;var c0=e=>{throw TypeError(e)};var ET=(e,t,n)=>t in e?ST(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var el=(e,t,n)=>ET(e,typeof t!="symbol"?t+"":t,n),bh=(e,t,n)=>t.has(e)||c0("Cannot "+n);var G=(e,t,n)=>(bh(e,t,"read from private field"),n?n.call(e):t.get(e)),We=(e,t,n)=>t.has(e)?c0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),$e=(e,t,n,r)=>(bh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),at=(e,t,n)=>(bh(e,t,"access private method"),n);var gc=(e,t,n,r)=>({set _(s){$e(e,t,s,n)},get _(){return G(e,t,r)}});function CT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function TT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var i_={exports:{}},rf={},o_={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ku=Symbol.for("react.element"),PT=Symbol.for("react.portal"),AT=Symbol.for("react.fragment"),OT=Symbol.for("react.strict_mode"),jT=Symbol.for("react.profiler"),RT=Symbol.for("react.provider"),IT=Symbol.for("react.context"),DT=Symbol.for("react.forward_ref"),NT=Symbol.for("react.suspense"),LT=Symbol.for("react.memo"),$T=Symbol.for("react.lazy"),d0=Symbol.iterator;function MT(e){return e===null||typeof e!="object"?null:(e=d0&&e[d0]||e["@@iterator"],typeof e=="function"?e:null)}var a_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l_=Object.assign,u_={};function Ia(e,t,n){this.props=e,this.context=t,this.refs=u_,this.updater=n||a_}Ia.prototype.isReactComponent={};Ia.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ia.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c_(){}c_.prototype=Ia.prototype;function Tg(e,t,n){this.props=e,this.context=t,this.refs=u_,this.updater=n||a_}var Pg=Tg.prototype=new c_;Pg.constructor=Tg;l_(Pg,Ia.prototype);Pg.isPureReactComponent=!0;var f0=Array.isArray,d_=Object.prototype.hasOwnProperty,Ag={current:null},f_={key:!0,ref:!0,__self:!0,__source:!0};function h_(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)d_.call(t,r)&&!f_.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ku,type:e,key:i,ref:o,props:s,_owner:Ag.current}}function FT(e,t){return{$$typeof:ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Og(e){return typeof e=="object"&&e!==null&&e.$$typeof===ku}function BT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var h0=/\/+/g;function xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BT(""+e.key):t.toString(36)}function qc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ku:case PT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+xh(o,0):r,f0(s)?(n="",e!=null&&(n=e.replace(h0,"$&/")+"/"),qc(s,t,n,"",function(u){return u})):s!=null&&(Og(s)&&(s=FT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(h0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",f0(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+xh(i,a);o+=qc(i,t,n,l,s)}else if(l=MT(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+xh(i,a++),o+=qc(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function yc(e,t,n){if(e==null)return e;var r=[],s=0;return qc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function UT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},Gc={transition:null},zT={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Gc,ReactCurrentOwner:Ag};function p_(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:yc,forEach:function(e,t,n){yc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yc(e,function(){t++}),t},toArray:function(e){return yc(e,function(t){return t})||[]},only:function(e){if(!Og(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Ia;st.Fragment=AT;st.Profiler=jT;st.PureComponent=Tg;st.StrictMode=OT;st.Suspense=NT;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zT;st.act=p_;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=l_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ag.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)d_.call(t,l)&&!f_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ku,type:e.type,key:s,ref:i,props:r,_owner:o}};st.createContext=function(e){return e={$$typeof:IT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:RT,_context:e},e.Consumer=e};st.createElement=h_;st.createFactory=function(e){var t=h_.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:DT,render:e}};st.isValidElement=Og;st.lazy=function(e){return{$$typeof:$T,_payload:{_status:-1,_result:e},_init:UT}};st.memo=function(e,t){return{$$typeof:LT,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=Gc.transition;Gc.transition={};try{e()}finally{Gc.transition=t}};st.unstable_act=p_;st.useCallback=function(e,t){return _n.current.useCallback(e,t)};st.useContext=function(e){return _n.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};st.useEffect=function(e,t){return _n.current.useEffect(e,t)};st.useId=function(){return _n.current.useId()};st.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return _n.current.useMemo(e,t)};st.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};st.useRef=function(e){return _n.current.useRef(e)};st.useState=function(e){return _n.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return _n.current.useTransition()};st.version="18.3.1";o_.exports=st;var E=o_.exports;const He=nf(E),p0=CT({__proto__:null,default:He},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=E,KT=Symbol.for("react.element"),WT=Symbol.for("react.fragment"),HT=Object.prototype.hasOwnProperty,qT=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GT={key:!0,ref:!0,__self:!0,__source:!0};function m_(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)HT.call(t,r)&&!GT.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:KT,type:e,key:i,ref:o,props:s,_owner:qT.current}}rf.Fragment=WT;rf.jsx=m_;rf.jsxs=m_;i_.exports=rf;var k=i_.exports,Ep={},g_={exports:{}},Wn={},y_={exports:{}},v_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,L){var se=ue.length;ue.push(L);e:for(;0<se;){var V=se-1>>>1,W=ue[V];if(0<s(W,L))ue[V]=L,ue[se]=W,se=V;else break e}}function n(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var L=ue[0],se=ue.pop();if(se!==L){ue[0]=se;e:for(var V=0,W=ue.length,he=W>>>1;V<he;){var ye=2*(V+1)-1,ce=ue[ye],Re=ye+1,Ue=ue[Re];if(0>s(ce,se))Re<W&&0>s(Ue,ce)?(ue[V]=Ue,ue[Re]=se,V=Re):(ue[V]=ce,ue[ye]=se,V=ye);else if(Re<W&&0>s(Ue,se))ue[V]=Ue,ue[Re]=se,V=Re;else break e}}return L}function s(ue,L){var se=ue.sortIndex-L.sortIndex;return se!==0?se:ue.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,w=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(ue){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=ue)r(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=n(u)}}function T(ue){if(v=!1,_(ue),!w)if(n(l)!==null)w=!0,ve(j);else{var L=n(u);L!==null&&ae(T,L.startTime-ue)}}function j(ue,L){w=!1,v&&(v=!1,g($),$=-1),m=!0;var se=p;try{for(_(L),f=n(l);f!==null&&(!(f.expirationTime>L)||ue&&!me());){var V=f.callback;if(typeof V=="function"){f.callback=null,p=f.priorityLevel;var W=V(f.expirationTime<=L);L=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),_(L)}else r(l);f=n(l)}if(f!==null)var he=!0;else{var ye=n(u);ye!==null&&ae(T,ye.startTime-L),he=!1}return he}finally{f=null,p=se,m=!1}}var R=!1,I=null,$=-1,U=5,K=-1;function me(){return!(e.unstable_now()-K<U)}function M(){if(I!==null){var ue=e.unstable_now();K=ue;var L=!0;try{L=I(!0,ue)}finally{L?re():(R=!1,I=null)}}else R=!1}var re;if(typeof y=="function")re=function(){y(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Y=A.port2;A.port1.onmessage=M,re=function(){Y.postMessage(null)}}else re=function(){x(M,0)};function ve(ue){I=ue,R||(R=!0,re())}function ae(ue,L){$=x(function(){ue(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,ve(j))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ue){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var se=p;p=L;try{return ue()}finally{p=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,L){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var se=p;p=ue;try{return L()}finally{p=se}},e.unstable_scheduleCallback=function(ue,L,se){var V=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?V+se:V):se=V,ue){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=se+W,ue={id:c++,callback:L,priorityLevel:ue,startTime:se,expirationTime:W,sortIndex:-1},se>V?(ue.sortIndex=se,t(u,ue),n(l)===null&&ue===n(u)&&(v?(g($),$=-1):v=!0,ae(T,se-V))):(ue.sortIndex=W,t(l,ue),w||m||(w=!0,ve(j))),ue},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(ue){var L=p;return function(){var se=p;p=L;try{return ue.apply(this,arguments)}finally{p=se}}}})(v_);y_.exports=v_;var QT=y_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT=E,Vn=QT;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w_=new Set,Kl={};function mo(e,t){ka(e,t),ka(e+"Capture",t)}function ka(e,t){for(Kl[e]=t,e=0;e<t.length;e++)w_.add(t[e])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cp=Object.prototype.hasOwnProperty,JT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m0={},g0={};function ZT(e){return Cp.call(g0,e)?!0:Cp.call(m0,e)?!1:JT.test(e)?g0[e]=!0:(m0[e]=!0,!1)}function XT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eP(e,t,n,r){if(t===null||typeof t>"u"||XT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kn(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var jg=/[\-:]([a-z])/g;function Rg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jg,Rg);rn[t]=new kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jg,Rg);rn[t]=new kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jg,Rg);rn[t]=new kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new kn(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ig(e,t,n,r){var s=rn.hasOwnProperty(t)?rn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eP(t,n,s,r)&&(n=null),r||s===null?ZT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ks=YT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vc=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),Dg=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),b_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),Ng=Symbol.for("react.forward_ref"),Pp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Lg=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),y0=Symbol.iterator;function tl(e){return e===null||typeof e!="object"?null:(e=y0&&e[y0]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,_h;function pl(e){if(_h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var kh=!1;function Sh(e,t){if(!e||kh)return"";kh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{kh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pl(e):""}function tP(e){switch(e.tag){case 5:return pl(e.type);case 16:return pl("Lazy");case 13:return pl("Suspense");case 19:return pl("SuspenseList");case 0:case 2:case 15:return e=Sh(e.type,!1),e;case 11:return e=Sh(e.type.render,!1),e;case 1:return e=Sh(e.type,!0),e;default:return""}}function Op(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case Bo:return"Portal";case Tp:return"Profiler";case Dg:return"StrictMode";case Pp:return"Suspense";case Ap:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case x_:return(e.displayName||"Context")+".Consumer";case b_:return(e._context.displayName||"Context")+".Provider";case Ng:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lg:return t=e.displayName||null,t!==null?t:Op(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return Op(e(t))}catch{}}return null}function nP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Op(t);case 8:return t===Dg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function k_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rP(e){var t=k_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wc(e){e._valueTracker||(e._valueTracker=rP(e))}function S_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=k_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function pd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jp(e,t){var n=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function v0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E_(e,t){t=t.checked,t!=null&&Ig(e,"checked",t,!1)}function Rp(e,t){E_(e,t);var n=fi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ip(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ip(e,t.type,fi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function w0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ip(e,t,n){(t!=="number"||pd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ml=Array.isArray;function ra(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Dp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function b0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Se(92));if(ml(n)){if(1<n.length)throw Error(Se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fi(n)}}function C_(e,t){var n=fi(t.value),r=fi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function x0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function T_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Np(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?T_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bc,P_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bc=bc||document.createElement("div"),bc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sP=["Webkit","ms","Moz","O"];Object.keys(Sl).forEach(function(e){sP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sl[t]=Sl[e]})});function A_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sl.hasOwnProperty(e)&&Sl[e]?(""+t).trim():t+"px"}function O_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var iP=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lp(e,t){if(t){if(iP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function $p(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mp=null;function $g(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fp=null,sa=null,ia=null;function _0(e){if(e=Cu(e)){if(typeof Fp!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=uf(t),Fp(e.stateNode,e.type,t))}}function j_(e){sa?ia?ia.push(e):ia=[e]:sa=e}function R_(){if(sa){var e=sa,t=ia;if(ia=sa=null,_0(e),t)for(e=0;e<t.length;e++)_0(t[e])}}function I_(e,t){return e(t)}function D_(){}var Eh=!1;function N_(e,t,n){if(Eh)return e(t,n);Eh=!0;try{return I_(e,t,n)}finally{Eh=!1,(sa!==null||ia!==null)&&(D_(),R_())}}function Hl(e,t){var n=e.stateNode;if(n===null)return null;var r=uf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Se(231,t,typeof n));return n}var Bp=!1;if(ps)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Bp=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Bp=!1}function oP(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var El=!1,md=null,gd=!1,Up=null,aP={onError:function(e){El=!0,md=e}};function lP(e,t,n,r,s,i,o,a,l){El=!1,md=null,oP.apply(aP,arguments)}function uP(e,t,n,r,s,i,o,a,l){if(lP.apply(this,arguments),El){if(El){var u=md;El=!1,md=null}else throw Error(Se(198));gd||(gd=!0,Up=u)}}function go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k0(e){if(go(e)!==e)throw Error(Se(188))}function cP(e){var t=e.alternate;if(!t){if(t=go(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return k0(s),e;if(i===r)return k0(s),t;i=i.sibling}throw Error(Se(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?e:t}function $_(e){return e=cP(e),e!==null?M_(e):null}function M_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=M_(e);if(t!==null)return t;e=e.sibling}return null}var F_=Vn.unstable_scheduleCallback,S0=Vn.unstable_cancelCallback,dP=Vn.unstable_shouldYield,fP=Vn.unstable_requestPaint,Lt=Vn.unstable_now,hP=Vn.unstable_getCurrentPriorityLevel,Mg=Vn.unstable_ImmediatePriority,B_=Vn.unstable_UserBlockingPriority,yd=Vn.unstable_NormalPriority,pP=Vn.unstable_LowPriority,U_=Vn.unstable_IdlePriority,sf=null,Wr=null;function mP(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(sf,e,void 0,(e.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:vP,gP=Math.log,yP=Math.LN2;function vP(e){return e>>>=0,e===0?32:31-(gP(e)/yP|0)|0}var xc=64,_c=4194304;function gl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gl(a):(i&=o,i!==0&&(r=gl(i)))}else o=n&~s,o!==0?r=gl(o):i!==0&&(r=gl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cr(t),s=1<<n,r|=e[n],t&=~s;return r}function wP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Cr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=wP(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function zp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function z_(){var e=xc;return xc<<=1,!(xc&4194240)&&(xc=64),e}function Ch(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Su(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cr(t),e[t]=n}function xP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Cr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Fg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ft=0;function V_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K_,Bg,W_,H_,q_,Vp=!1,kc=[],ni=null,ri=null,si=null,ql=new Map,Gl=new Map,Fs=[],_P="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E0(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(t.pointerId)}}function rl(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Cu(t),t!==null&&Bg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function kP(e,t,n,r,s){switch(t){case"focusin":return ni=rl(ni,e,t,n,r,s),!0;case"dragenter":return ri=rl(ri,e,t,n,r,s),!0;case"mouseover":return si=rl(si,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ql.set(i,rl(ql.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Gl.set(i,rl(Gl.get(i)||null,e,t,n,r,s)),!0}return!1}function G_(e){var t=Bi(e.target);if(t!==null){var n=go(t);if(n!==null){if(t=n.tag,t===13){if(t=L_(n),t!==null){e.blockedOn=t,q_(e.priority,function(){W_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mp=r,n.target.dispatchEvent(r),Mp=null}else return t=Cu(n),t!==null&&Bg(t),e.blockedOn=n,!1;t.shift()}return!0}function C0(e,t,n){Qc(e)&&n.delete(t)}function SP(){Vp=!1,ni!==null&&Qc(ni)&&(ni=null),ri!==null&&Qc(ri)&&(ri=null),si!==null&&Qc(si)&&(si=null),ql.forEach(C0),Gl.forEach(C0)}function sl(e,t){e.blockedOn===t&&(e.blockedOn=null,Vp||(Vp=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,SP)))}function Ql(e){function t(s){return sl(s,e)}if(0<kc.length){sl(kc[0],e);for(var n=1;n<kc.length;n++){var r=kc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ni!==null&&sl(ni,e),ri!==null&&sl(ri,e),si!==null&&sl(si,e),ql.forEach(t),Gl.forEach(t),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)G_(n),n.blockedOn===null&&Fs.shift()}var oa=ks.ReactCurrentBatchConfig,wd=!0;function EP(e,t,n,r){var s=ft,i=oa.transition;oa.transition=null;try{ft=1,Ug(e,t,n,r)}finally{ft=s,oa.transition=i}}function CP(e,t,n,r){var s=ft,i=oa.transition;oa.transition=null;try{ft=4,Ug(e,t,n,r)}finally{ft=s,oa.transition=i}}function Ug(e,t,n,r){if(wd){var s=Kp(e,t,n,r);if(s===null)Lh(e,t,r,bd,n),E0(e,r);else if(kP(s,e,t,n,r))r.stopPropagation();else if(E0(e,r),t&4&&-1<_P.indexOf(e)){for(;s!==null;){var i=Cu(s);if(i!==null&&K_(i),i=Kp(e,t,n,r),i===null&&Lh(e,t,r,bd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lh(e,t,r,null,n)}}var bd=null;function Kp(e,t,n,r){if(bd=null,e=$g(r),e=Bi(e),e!==null)if(t=go(e),t===null)e=null;else if(n=t.tag,n===13){if(e=L_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bd=e,null}function Q_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hP()){case Mg:return 1;case B_:return 4;case yd:case pP:return 16;case U_:return 536870912;default:return 16}default:return 16}}var Zs=null,zg=null,Yc=null;function Y_(){if(Yc)return Yc;var e,t=zg,n=t.length,r,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Yc=s.slice(e,1<r?1-r:void 0)}function Jc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sc(){return!0}function T0(){return!1}function Hn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sc:T0,this.isPropagationStopped=T0,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),t}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=Hn(Da),Eu=Tt({},Da,{view:0,detail:0}),TP=Hn(Eu),Th,Ph,il,of=Tt({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==il&&(il&&e.type==="mousemove"?(Th=e.screenX-il.screenX,Ph=e.screenY-il.screenY):Ph=Th=0,il=e),Th)},movementY:function(e){return"movementY"in e?e.movementY:Ph}}),P0=Hn(of),PP=Tt({},of,{dataTransfer:0}),AP=Hn(PP),OP=Tt({},Eu,{relatedTarget:0}),Ah=Hn(OP),jP=Tt({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),RP=Hn(jP),IP=Tt({},Da,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),DP=Hn(IP),NP=Tt({},Da,{data:0}),A0=Hn(NP),LP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$P={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=MP[e])?!!t[e]:!1}function Kg(){return FP}var BP=Tt({},Eu,{key:function(e){if(e.key){var t=LP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$P[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kg,charCode:function(e){return e.type==="keypress"?Jc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),UP=Hn(BP),zP=Tt({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=Hn(zP),VP=Tt({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kg}),KP=Hn(VP),WP=Tt({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),HP=Hn(WP),qP=Tt({},of,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GP=Hn(qP),QP=[9,13,27,32],Wg=ps&&"CompositionEvent"in window,Cl=null;ps&&"documentMode"in document&&(Cl=document.documentMode);var YP=ps&&"TextEvent"in window&&!Cl,J_=ps&&(!Wg||Cl&&8<Cl&&11>=Cl),j0=" ",R0=!1;function Z_(e,t){switch(e){case"keyup":return QP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zo=!1;function JP(e,t){switch(e){case"compositionend":return X_(t);case"keypress":return t.which!==32?null:(R0=!0,j0);case"textInput":return e=t.data,e===j0&&R0?null:e;default:return null}}function ZP(e,t){if(zo)return e==="compositionend"||!Wg&&Z_(e,t)?(e=Y_(),Yc=zg=Zs=null,zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J_&&t.locale!=="ko"?null:t.data;default:return null}}var XP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XP[e.type]:t==="textarea"}function ek(e,t,n,r){j_(r),t=xd(t,"onChange"),0<t.length&&(n=new Vg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Tl=null,Yl=null;function e2(e){dk(e,0)}function af(e){var t=Wo(e);if(S_(t))return e}function t2(e,t){if(e==="change")return t}var tk=!1;if(ps){var Oh;if(ps){var jh="oninput"in document;if(!jh){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),jh=typeof D0.oninput=="function"}Oh=jh}else Oh=!1;tk=Oh&&(!document.documentMode||9<document.documentMode)}function N0(){Tl&&(Tl.detachEvent("onpropertychange",nk),Yl=Tl=null)}function nk(e){if(e.propertyName==="value"&&af(Yl)){var t=[];ek(t,Yl,e,$g(e)),N_(e2,t)}}function n2(e,t,n){e==="focusin"?(N0(),Tl=t,Yl=n,Tl.attachEvent("onpropertychange",nk)):e==="focusout"&&N0()}function r2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return af(Yl)}function s2(e,t){if(e==="click")return af(t)}function i2(e,t){if(e==="input"||e==="change")return af(t)}function o2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pr=typeof Object.is=="function"?Object.is:o2;function Jl(e,t){if(Pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cp.call(t,s)||!Pr(e[s],t[s]))return!1}return!0}function L0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $0(e,t){var n=L0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L0(n)}}function rk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sk(){for(var e=window,t=pd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pd(e.document)}return t}function Hg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function a2(e){var t=sk(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rk(n.ownerDocument.documentElement,n)){if(r!==null&&Hg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=$0(n,i);var o=$0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var l2=ps&&"documentMode"in document&&11>=document.documentMode,Vo=null,Wp=null,Pl=null,Hp=!1;function M0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hp||Vo==null||Vo!==pd(r)||(r=Vo,"selectionStart"in r&&Hg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pl&&Jl(Pl,r)||(Pl=r,r=xd(Wp,"onSelect"),0<r.length&&(t=new Vg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vo)))}function Ec(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ko={animationend:Ec("Animation","AnimationEnd"),animationiteration:Ec("Animation","AnimationIteration"),animationstart:Ec("Animation","AnimationStart"),transitionend:Ec("Transition","TransitionEnd")},Rh={},ik={};ps&&(ik=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function lf(e){if(Rh[e])return Rh[e];if(!Ko[e])return e;var t=Ko[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ik)return Rh[e]=t[n];return e}var ok=lf("animationend"),ak=lf("animationiteration"),lk=lf("animationstart"),uk=lf("transitionend"),ck=new Map,F0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){ck.set(e,t),mo(t,[e])}for(var Ih=0;Ih<F0.length;Ih++){var Dh=F0[Ih],u2=Dh.toLowerCase(),c2=Dh[0].toUpperCase()+Dh.slice(1);gi(u2,"on"+c2)}gi(ok,"onAnimationEnd");gi(ak,"onAnimationIteration");gi(lk,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(uk,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d2=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function B0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,uP(r,t,void 0,e),e.currentTarget=null}function dk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;B0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;B0(s,a,u),i=l}}}if(gd)throw e=Up,gd=!1,Up=null,e}function yt(e,t){var n=t[Jp];n===void 0&&(n=t[Jp]=new Set);var r=e+"__bubble";n.has(r)||(fk(t,e,2,!1),n.add(r))}function Nh(e,t,n){var r=0;t&&(r|=4),fk(n,e,r,t)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Zl(e){if(!e[Cc]){e[Cc]=!0,w_.forEach(function(n){n!=="selectionchange"&&(d2.has(n)||Nh(n,!1,e),Nh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cc]||(t[Cc]=!0,Nh("selectionchange",!1,t))}}function fk(e,t,n,r){switch(Q_(t)){case 1:var s=EP;break;case 4:s=CP;break;default:s=Ug}n=s.bind(null,t,n,e),s=void 0,!Bp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Lh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Bi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}N_(function(){var u=i,c=$g(n),f=[];e:{var p=ck.get(e);if(p!==void 0){var m=Vg,w=e;switch(e){case"keypress":if(Jc(n)===0)break e;case"keydown":case"keyup":m=UP;break;case"focusin":w="focus",m=Ah;break;case"focusout":w="blur",m=Ah;break;case"beforeblur":case"afterblur":m=Ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=P0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=AP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=KP;break;case ok:case ak:case lk:m=RP;break;case uk:m=HP;break;case"scroll":m=TP;break;case"wheel":m=GP;break;case"copy":case"cut":case"paste":m=DP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O0}var v=(t&4)!==0,x=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,_;y!==null;){_=y;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,g!==null&&(T=Hl(y,g),T!=null&&v.push(Xl(y,T,_)))),x)break;y=y.return}0<v.length&&(p=new m(p,w,null,n,c),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Mp&&(w=n.relatedTarget||n.fromElement)&&(Bi(w)||w[ms]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?Bi(w):null,w!==null&&(x=go(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(v=P0,T="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=O0,T="onPointerLeave",g="onPointerEnter",y="pointer"),x=m==null?p:Wo(m),_=w==null?p:Wo(w),p=new v(T,y+"leave",m,n,c),p.target=x,p.relatedTarget=_,T=null,Bi(c)===u&&(v=new v(g,y+"enter",w,n,c),v.target=_,v.relatedTarget=x,T=v),x=T,m&&w)t:{for(v=m,g=w,y=0,_=v;_;_=Oo(_))y++;for(_=0,T=g;T;T=Oo(T))_++;for(;0<y-_;)v=Oo(v),y--;for(;0<_-y;)g=Oo(g),_--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Oo(v),g=Oo(g)}v=null}else v=null;m!==null&&U0(f,p,m,v,!1),w!==null&&x!==null&&U0(f,x,w,v,!0)}}e:{if(p=u?Wo(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=t2;else if(I0(p))if(tk)j=i2;else{j=r2;var R=n2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=s2);if(j&&(j=j(e,u))){ek(f,j,n,c);break e}R&&R(e,p,u),e==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Ip(p,"number",p.value)}switch(R=u?Wo(u):window,e){case"focusin":(I0(R)||R.contentEditable==="true")&&(Vo=R,Wp=u,Pl=null);break;case"focusout":Pl=Wp=Vo=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,M0(f,n,c);break;case"selectionchange":if(l2)break;case"keydown":case"keyup":M0(f,n,c)}var I;if(Wg)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else zo?Z_(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(J_&&n.locale!=="ko"&&(zo||$!=="onCompositionStart"?$==="onCompositionEnd"&&zo&&(I=Y_()):(Zs=c,zg="value"in Zs?Zs.value:Zs.textContent,zo=!0)),R=xd(u,$),0<R.length&&($=new A0($,e,null,n,c),f.push({event:$,listeners:R}),I?$.data=I:(I=X_(n),I!==null&&($.data=I)))),(I=YP?JP(e,n):ZP(e,n))&&(u=xd(u,"onBeforeInput"),0<u.length&&(c=new A0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=I))}dk(f,t)})}function Xl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xd(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hl(e,n),i!=null&&r.unshift(Xl(e,i,s)),i=Hl(e,t),i!=null&&r.push(Xl(e,i,s))),e=e.return}return r}function Oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function U0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Hl(n,i),l!=null&&o.unshift(Xl(n,l,a))):s||(l=Hl(n,i),l!=null&&o.push(Xl(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var f2=/\r\n?/g,h2=/\u0000|\uFFFD/g;function z0(e){return(typeof e=="string"?e:""+e).replace(f2,`
`).replace(h2,"")}function Tc(e,t,n){if(t=z0(t),z0(e)!==t&&n)throw Error(Se(425))}function _d(){}var qp=null,Gp=null;function Qp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yp=typeof setTimeout=="function"?setTimeout:void 0,p2=typeof clearTimeout=="function"?clearTimeout:void 0,V0=typeof Promise=="function"?Promise:void 0,m2=typeof queueMicrotask=="function"?queueMicrotask:typeof V0<"u"?function(e){return V0.resolve(null).then(e).catch(g2)}:Yp;function g2(e){setTimeout(function(){throw e})}function $h(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ql(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ql(t)}function ii(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function K0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Na=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Na,eu="__reactProps$"+Na,ms="__reactContainer$"+Na,Jp="__reactEvents$"+Na,y2="__reactListeners$"+Na,v2="__reactHandles$"+Na;function Bi(e){var t=e[Vr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[Vr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=K0(e);e!==null;){if(n=e[Vr])return n;e=K0(e)}return t}e=n,n=e.parentNode}return null}function Cu(e){return e=e[Vr]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function uf(e){return e[eu]||null}var Zp=[],Ho=-1;function yi(e){return{current:e}}function vt(e){0>Ho||(e.current=Zp[Ho],Zp[Ho]=null,Ho--)}function gt(e,t){Ho++,Zp[Ho]=e.current,e.current=t}var hi={},mn=yi(hi),Rn=yi(!1),ao=hi;function Sa(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function In(e){return e=e.childContextTypes,e!=null}function kd(){vt(Rn),vt(mn)}function W0(e,t,n){if(mn.current!==hi)throw Error(Se(168));gt(mn,t),gt(Rn,n)}function hk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Se(108,nP(e)||"Unknown",s));return Tt({},n,r)}function Sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,ao=mn.current,gt(mn,e),gt(Rn,Rn.current),!0}function H0(e,t,n){var r=e.stateNode;if(!r)throw Error(Se(169));n?(e=hk(e,t,ao),r.__reactInternalMemoizedMergedChildContext=e,vt(Rn),vt(mn),gt(mn,e)):vt(Rn),gt(Rn,n)}var is=null,cf=!1,Mh=!1;function pk(e){is===null?is=[e]:is.push(e)}function w2(e){cf=!0,pk(e)}function vi(){if(!Mh&&is!==null){Mh=!0;var e=0,t=ft;try{var n=is;for(ft=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}is=null,cf=!1}catch(s){throw is!==null&&(is=is.slice(e+1)),F_(Mg,vi),s}finally{ft=t,Mh=!1}}return null}var qo=[],Go=0,Ed=null,Cd=0,tr=[],nr=0,lo=null,us=1,cs="";function Ri(e,t){qo[Go++]=Cd,qo[Go++]=Ed,Ed=e,Cd=t}function mk(e,t,n){tr[nr++]=us,tr[nr++]=cs,tr[nr++]=lo,lo=e;var r=us;e=cs;var s=32-Cr(r)-1;r&=~(1<<s),n+=1;var i=32-Cr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,us=1<<32-Cr(t)+s|n<<s|r,cs=i+e}else us=1<<i|n<<s|r,cs=e}function qg(e){e.return!==null&&(Ri(e,1),mk(e,1,0))}function Gg(e){for(;e===Ed;)Ed=qo[--Go],qo[Go]=null,Cd=qo[--Go],qo[Go]=null;for(;e===lo;)lo=tr[--nr],tr[nr]=null,cs=tr[--nr],tr[nr]=null,us=tr[--nr],tr[nr]=null}var zn=null,Un=null,bt=!1,Sr=null;function gk(e,t){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function q0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zn=e,Un=ii(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zn=e,Un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lo!==null?{id:us,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zn=e,Un=null,!0):!1;default:return!1}}function Xp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function em(e){if(bt){var t=Un;if(t){var n=t;if(!q0(e,t)){if(Xp(e))throw Error(Se(418));t=ii(n.nextSibling);var r=zn;t&&q0(e,t)?gk(r,n):(e.flags=e.flags&-4097|2,bt=!1,zn=e)}}else{if(Xp(e))throw Error(Se(418));e.flags=e.flags&-4097|2,bt=!1,zn=e}}}function G0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zn=e}function Pc(e){if(e!==zn)return!1;if(!bt)return G0(e),bt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qp(e.type,e.memoizedProps)),t&&(t=Un)){if(Xp(e))throw yk(),Error(Se(418));for(;t;)gk(e,t),t=ii(t.nextSibling)}if(G0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Un=ii(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Un=null}}else Un=zn?ii(e.stateNode.nextSibling):null;return!0}function yk(){for(var e=Un;e;)e=ii(e.nextSibling)}function Ea(){Un=zn=null,bt=!1}function Qg(e){Sr===null?Sr=[e]:Sr.push(e)}var b2=ks.ReactCurrentBatchConfig;function ol(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,e))}return e}function Ac(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Q0(e){var t=e._init;return t(e._payload)}function vk(e){function t(g,y){if(e){var _=g.deletions;_===null?(g.deletions=[y],g.flags|=16):_.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=ui(g,y),g.index=0,g.sibling=null,g}function i(g,y,_){return g.index=_,e?(_=g.alternate,_!==null?(_=_.index,_<y?(g.flags|=2,y):_):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,_,T){return y===null||y.tag!==6?(y=Wh(_,g.mode,T),y.return=g,y):(y=s(y,_),y.return=g,y)}function l(g,y,_,T){var j=_.type;return j===Uo?c(g,y,_.props.children,T,_.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===$s&&Q0(j)===y.type)?(T=s(y,_.props),T.ref=ol(g,y,_),T.return=g,T):(T=sd(_.type,_.key,_.props,null,g.mode,T),T.ref=ol(g,y,_),T.return=g,T)}function u(g,y,_,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Hh(_,g.mode,T),y.return=g,y):(y=s(y,_.children||[]),y.return=g,y)}function c(g,y,_,T,j){return y===null||y.tag!==7?(y=so(_,g.mode,T,j),y.return=g,y):(y=s(y,_),y.return=g,y)}function f(g,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Wh(""+y,g.mode,_),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vc:return _=sd(y.type,y.key,y.props,null,g.mode,_),_.ref=ol(g,null,y),_.return=g,_;case Bo:return y=Hh(y,g.mode,_),y.return=g,y;case $s:var T=y._init;return f(g,T(y._payload),_)}if(ml(y)||tl(y))return y=so(y,g.mode,_,null),y.return=g,y;Ac(g,y)}return null}function p(g,y,_,T){var j=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:a(g,y,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vc:return _.key===j?l(g,y,_,T):null;case Bo:return _.key===j?u(g,y,_,T):null;case $s:return j=_._init,p(g,y,j(_._payload),T)}if(ml(_)||tl(_))return j!==null?null:c(g,y,_,T,null);Ac(g,_)}return null}function m(g,y,_,T,j){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(_)||null,a(y,g,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case vc:return g=g.get(T.key===null?_:T.key)||null,l(y,g,T,j);case Bo:return g=g.get(T.key===null?_:T.key)||null,u(y,g,T,j);case $s:var R=T._init;return m(g,y,_,R(T._payload),j)}if(ml(T)||tl(T))return g=g.get(_)||null,c(y,g,T,j,null);Ac(y,T)}return null}function w(g,y,_,T){for(var j=null,R=null,I=y,$=y=0,U=null;I!==null&&$<_.length;$++){I.index>$?(U=I,I=null):U=I.sibling;var K=p(g,I,_[$],T);if(K===null){I===null&&(I=U);break}e&&I&&K.alternate===null&&t(g,I),y=i(K,y,$),R===null?j=K:R.sibling=K,R=K,I=U}if($===_.length)return n(g,I),bt&&Ri(g,$),j;if(I===null){for(;$<_.length;$++)I=f(g,_[$],T),I!==null&&(y=i(I,y,$),R===null?j=I:R.sibling=I,R=I);return bt&&Ri(g,$),j}for(I=r(g,I);$<_.length;$++)U=m(I,g,$,_[$],T),U!==null&&(e&&U.alternate!==null&&I.delete(U.key===null?$:U.key),y=i(U,y,$),R===null?j=U:R.sibling=U,R=U);return e&&I.forEach(function(me){return t(g,me)}),bt&&Ri(g,$),j}function v(g,y,_,T){var j=tl(_);if(typeof j!="function")throw Error(Se(150));if(_=j.call(_),_==null)throw Error(Se(151));for(var R=j=null,I=y,$=y=0,U=null,K=_.next();I!==null&&!K.done;$++,K=_.next()){I.index>$?(U=I,I=null):U=I.sibling;var me=p(g,I,K.value,T);if(me===null){I===null&&(I=U);break}e&&I&&me.alternate===null&&t(g,I),y=i(me,y,$),R===null?j=me:R.sibling=me,R=me,I=U}if(K.done)return n(g,I),bt&&Ri(g,$),j;if(I===null){for(;!K.done;$++,K=_.next())K=f(g,K.value,T),K!==null&&(y=i(K,y,$),R===null?j=K:R.sibling=K,R=K);return bt&&Ri(g,$),j}for(I=r(g,I);!K.done;$++,K=_.next())K=m(I,g,$,K.value,T),K!==null&&(e&&K.alternate!==null&&I.delete(K.key===null?$:K.key),y=i(K,y,$),R===null?j=K:R.sibling=K,R=K);return e&&I.forEach(function(M){return t(g,M)}),bt&&Ri(g,$),j}function x(g,y,_,T){if(typeof _=="object"&&_!==null&&_.type===Uo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case vc:e:{for(var j=_.key,R=y;R!==null;){if(R.key===j){if(j=_.type,j===Uo){if(R.tag===7){n(g,R.sibling),y=s(R,_.props.children),y.return=g,g=y;break e}}else if(R.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===$s&&Q0(j)===R.type){n(g,R.sibling),y=s(R,_.props),y.ref=ol(g,R,_),y.return=g,g=y;break e}n(g,R);break}else t(g,R);R=R.sibling}_.type===Uo?(y=so(_.props.children,g.mode,T,_.key),y.return=g,g=y):(T=sd(_.type,_.key,_.props,null,g.mode,T),T.ref=ol(g,y,_),T.return=g,g=T)}return o(g);case Bo:e:{for(R=_.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(g,y.sibling),y=s(y,_.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Hh(_,g.mode,T),y.return=g,g=y}return o(g);case $s:return R=_._init,x(g,y,R(_._payload),T)}if(ml(_))return w(g,y,_,T);if(tl(_))return v(g,y,_,T);Ac(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,_),y.return=g,g=y):(n(g,y),y=Wh(_,g.mode,T),y.return=g,g=y),o(g)):n(g,y)}return x}var Ca=vk(!0),wk=vk(!1),Td=yi(null),Pd=null,Qo=null,Yg=null;function Jg(){Yg=Qo=Pd=null}function Zg(e){var t=Td.current;vt(Td),e._currentValue=t}function tm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function aa(e,t){Pd=e,Yg=Qo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(On=!0),e.firstContext=null)}function ur(e){var t=e._currentValue;if(Yg!==e)if(e={context:e,memoizedValue:t,next:null},Qo===null){if(Pd===null)throw Error(Se(308));Qo=e,Pd.dependencies={lanes:0,firstContext:e}}else Qo=Qo.next=e;return t}var Ui=null;function Xg(e){Ui===null?Ui=[e]:Ui.push(e)}function bk(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Xg(t)):(n.next=s.next,s.next=n),t.interleaved=n,gs(e,r)}function gs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function ey(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,gs(e,n)}return s=r.interleaved,s===null?(t.next=t,Xg(r)):(t.next=s.next,s.next=t),r.interleaved=t,gs(e,n)}function Zc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fg(e,n)}}function Y0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ad(e,t,n,r){var s=e.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,v=a;switch(p=t,m=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(m,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(m,f,p):w,p==null)break e;f=Tt({},f,p);break e;case 2:Ms=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);co|=o,e.lanes=o,e.memoizedState=f}}function J0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Se(191,s));s.call(r)}}}var Tu={},Hr=yi(Tu),tu=yi(Tu),nu=yi(Tu);function zi(e){if(e===Tu)throw Error(Se(174));return e}function ty(e,t){switch(gt(nu,t),gt(tu,e),gt(Hr,Tu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Np(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Np(t,e)}vt(Hr),gt(Hr,t)}function Ta(){vt(Hr),vt(tu),vt(nu)}function _k(e){zi(nu.current);var t=zi(Hr.current),n=Np(t,e.type);t!==n&&(gt(tu,e),gt(Hr,n))}function ny(e){tu.current===e&&(vt(Hr),vt(tu))}var kt=yi(0);function Od(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fh=[];function ry(){for(var e=0;e<Fh.length;e++)Fh[e]._workInProgressVersionPrimary=null;Fh.length=0}var Xc=ks.ReactCurrentDispatcher,Bh=ks.ReactCurrentBatchConfig,uo=0,Ct=null,Vt=null,Yt=null,jd=!1,Al=!1,ru=0,x2=0;function un(){throw Error(Se(321))}function sy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pr(e[n],t[n]))return!1;return!0}function iy(e,t,n,r,s,i){if(uo=i,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=e===null||e.memoizedState===null?E2:C2,e=n(r,s),Al){i=0;do{if(Al=!1,ru=0,25<=i)throw Error(Se(301));i+=1,Yt=Vt=null,t.updateQueue=null,Xc.current=T2,e=n(r,s)}while(Al)}if(Xc.current=Rd,t=Vt!==null&&Vt.next!==null,uo=0,Yt=Vt=Ct=null,jd=!1,t)throw Error(Se(300));return e}function oy(){var e=ru!==0;return ru=0,e}function Mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Ct.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function cr(){if(Vt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Yt===null?Ct.memoizedState:Yt.next;if(t!==null)Yt=t,Vt=e;else{if(e===null)throw Error(Se(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Yt===null?Ct.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function su(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=Vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((uo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ct.lanes|=c,co|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Pr(r,t.memoizedState)||(On=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ct.lanes|=i,co|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Pr(i,t.memoizedState)||(On=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function kk(){}function Sk(e,t){var n=Ct,r=cr(),s=t(),i=!Pr(r.memoizedState,s);if(i&&(r.memoizedState=s,On=!0),r=r.queue,ay(Tk.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,iu(9,Ck.bind(null,n,r,s,t),void 0,null),Zt===null)throw Error(Se(349));uo&30||Ek(n,t,s)}return s}function Ek(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ck(e,t,n,r){t.value=n,t.getSnapshot=r,Pk(t)&&Ak(e)}function Tk(e,t,n){return n(function(){Pk(t)&&Ak(e)})}function Pk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pr(e,n)}catch{return!0}}function Ak(e){var t=gs(e,1);t!==null&&Tr(t,e,1,-1)}function Z0(e){var t=Mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:e},t.queue=e,e=e.dispatch=S2.bind(null,Ct,e),[t.memoizedState,e]}function iu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ok(){return cr().memoizedState}function ed(e,t,n,r){var s=Mr();Ct.flags|=e,s.memoizedState=iu(1|t,n,void 0,r===void 0?null:r)}function df(e,t,n,r){var s=cr();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var o=Vt.memoizedState;if(i=o.destroy,r!==null&&sy(r,o.deps)){s.memoizedState=iu(t,n,i,r);return}}Ct.flags|=e,s.memoizedState=iu(1|t,n,i,r)}function X0(e,t){return ed(8390656,8,e,t)}function ay(e,t){return df(2048,8,e,t)}function jk(e,t){return df(4,2,e,t)}function Rk(e,t){return df(4,4,e,t)}function Ik(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dk(e,t,n){return n=n!=null?n.concat([e]):null,df(4,4,Ik.bind(null,t,e),n)}function ly(){}function Nk(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lk(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $k(e,t,n){return uo&21?(Pr(n,t)||(n=z_(),Ct.lanes|=n,co|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,On=!0),e.memoizedState=n)}function _2(e,t){var n=ft;ft=n!==0&&4>n?n:4,e(!0);var r=Bh.transition;Bh.transition={};try{e(!1),t()}finally{ft=n,Bh.transition=r}}function Mk(){return cr().memoizedState}function k2(e,t,n){var r=li(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fk(e))Bk(t,n);else if(n=bk(e,t,n,r),n!==null){var s=xn();Tr(n,e,r,s),Uk(n,t,r)}}function S2(e,t,n){var r=li(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fk(e))Bk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pr(a,o)){var l=t.interleaved;l===null?(s.next=s,Xg(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=bk(e,t,s,r),n!==null&&(s=xn(),Tr(n,e,r,s),Uk(n,t,r))}}function Fk(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function Bk(e,t){Al=jd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fg(e,n)}}var Rd={readContext:ur,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},E2={readContext:ur,useCallback:function(e,t){return Mr().memoizedState=[e,t===void 0?null:t],e},useContext:ur,useEffect:X0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ed(4194308,4,Ik.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ed(4194308,4,e,t)},useInsertionEffect:function(e,t){return ed(4,2,e,t)},useMemo:function(e,t){var n=Mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=k2.bind(null,Ct,e),[r.memoizedState,e]},useRef:function(e){var t=Mr();return e={current:e},t.memoizedState=e},useState:Z0,useDebugValue:ly,useDeferredValue:function(e){return Mr().memoizedState=e},useTransition:function(){var e=Z0(!1),t=e[0];return e=_2.bind(null,e[1]),Mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ct,s=Mr();if(bt){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=t(),Zt===null)throw Error(Se(349));uo&30||Ek(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,X0(Tk.bind(null,r,i,e),[e]),r.flags|=2048,iu(9,Ck.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Mr(),t=Zt.identifierPrefix;if(bt){var n=cs,r=us;n=(r&~(1<<32-Cr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ru++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=x2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},C2={readContext:ur,useCallback:Nk,useContext:ur,useEffect:ay,useImperativeHandle:Dk,useInsertionEffect:jk,useLayoutEffect:Rk,useMemo:Lk,useReducer:Uh,useRef:Ok,useState:function(){return Uh(su)},useDebugValue:ly,useDeferredValue:function(e){var t=cr();return $k(t,Vt.memoizedState,e)},useTransition:function(){var e=Uh(su)[0],t=cr().memoizedState;return[e,t]},useMutableSource:kk,useSyncExternalStore:Sk,useId:Mk,unstable_isNewReconciler:!1},T2={readContext:ur,useCallback:Nk,useContext:ur,useEffect:ay,useImperativeHandle:Dk,useInsertionEffect:jk,useLayoutEffect:Rk,useMemo:Lk,useReducer:zh,useRef:Ok,useState:function(){return zh(su)},useDebugValue:ly,useDeferredValue:function(e){var t=cr();return Vt===null?t.memoizedState=e:$k(t,Vt.memoizedState,e)},useTransition:function(){var e=zh(su)[0],t=cr().memoizedState;return[e,t]},useMutableSource:kk,useSyncExternalStore:Sk,useId:Mk,unstable_isNewReconciler:!1};function wr(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ff={isMounted:function(e){return(e=e._reactInternals)?go(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xn(),s=li(e),i=ds(r,s);i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Tr(t,e,s,r),Zc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xn(),s=li(e),i=ds(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Tr(t,e,s,r),Zc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xn(),r=li(e),s=ds(n,r);s.tag=2,t!=null&&(s.callback=t),t=oi(e,s,r),t!==null&&(Tr(t,e,r,n),Zc(t,e,r))}};function ew(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Jl(n,r)||!Jl(s,i):!0}function zk(e,t,n){var r=!1,s=hi,i=t.contextType;return typeof i=="object"&&i!==null?i=ur(i):(s=In(t)?ao:mn.current,r=t.contextTypes,i=(r=r!=null)?Sa(e,s):hi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ff,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function tw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ff.enqueueReplaceState(t,t.state,null)}function rm(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ey(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ur(i):(i=In(t)?ao:mn.current,s.context=Sa(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(nm(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ff.enqueueReplaceState(s,s.state,null),Ad(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pa(e,t){try{var n="",r=t;do n+=tP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Vh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function sm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var P2=typeof WeakMap=="function"?WeakMap:Map;function Vk(e,t,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dd||(Dd=!0,pm=r),sm(e,t)},n}function Kk(e,t,n){n=ds(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){sm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sm(e,t),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function nw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new P2;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=z2.bind(null,e,t,n),t.then(e,e))}function rw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sw(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ds(-1,1),t.tag=2,oi(n,t,1))),n.lanes|=1),e)}var A2=ks.ReactCurrentOwner,On=!1;function wn(e,t,n,r){t.child=e===null?wk(t,null,n,r):Ca(t,e.child,n,r)}function iw(e,t,n,r,s){n=n.render;var i=t.ref;return aa(t,s),r=iy(e,t,n,r,i,s),n=oy(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(bt&&n&&qg(t),t.flags|=1,wn(e,t,r,s),t.child)}function ow(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!gy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Wk(e,t,i,r,s)):(e=sd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jl,n(o,r)&&e.ref===t.ref)return ys(e,t,s)}return t.flags|=1,e=ui(i,r),e.ref=t.ref,e.return=t,t.child=e}function Wk(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Jl(i,r)&&e.ref===t.ref)if(On=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(On=!0);else return t.lanes=e.lanes,ys(e,t,s)}return im(e,t,n,r,s)}function Hk(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Jo,Bn),Bn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gt(Jo,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,gt(Jo,Bn),Bn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,gt(Jo,Bn),Bn|=r;return wn(e,t,s,n),t.child}function qk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function im(e,t,n,r,s){var i=In(n)?ao:mn.current;return i=Sa(t,i),aa(t,s),n=iy(e,t,n,r,i,s),r=oy(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(bt&&r&&qg(t),t.flags|=1,wn(e,t,n,s),t.child)}function aw(e,t,n,r,s){if(In(n)){var i=!0;Sd(t)}else i=!1;if(aa(t,s),t.stateNode===null)td(e,t),zk(t,n,r),rm(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ur(u):(u=In(n)?ao:mn.current,u=Sa(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&tw(t,o,r,u),Ms=!1;var p=t.memoizedState;o.state=p,Ad(t,r,o,s),l=t.memoizedState,a!==r||p!==l||Rn.current||Ms?(typeof c=="function"&&(nm(t,n,c,r),l=t.memoizedState),(a=Ms||ew(t,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xk(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:wr(t.type,a),o.props=u,f=t.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=In(n)?ao:mn.current,l=Sa(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&tw(t,o,r,l),Ms=!1,p=t.memoizedState,o.state=p,Ad(t,r,o,s);var w=t.memoizedState;a!==f||p!==w||Rn.current||Ms?(typeof m=="function"&&(nm(t,n,m,r),w=t.memoizedState),(u=Ms||ew(t,n,u,r,p,w,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return om(e,t,n,r,i,s)}function om(e,t,n,r,s,i){qk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&H0(t,n,!1),ys(e,t,i);r=t.stateNode,A2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ca(t,e.child,null,i),t.child=Ca(t,null,a,i)):wn(e,t,a,i),t.memoizedState=r.state,s&&H0(t,n,!0),t.child}function Gk(e){var t=e.stateNode;t.pendingContext?W0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&W0(e,t.context,!1),ty(e,t.containerInfo)}function lw(e,t,n,r,s){return Ea(),Qg(s),t.flags|=256,wn(e,t,n,r),t.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qk(e,t,n){var r=t.pendingProps,s=kt.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),gt(kt,s&1),e===null)return em(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mf(o,r,0,null),e=so(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=lm(n),t.memoizedState=am,e):uy(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return O2(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ui(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ui(a,i):(i=so(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?lm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=am,r}return i=e.child,e=i.sibling,r=ui(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uy(e,t){return t=mf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oc(e,t,n,r){return r!==null&&Qg(r),Ca(t,e.child,null,n),e=uy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function O2(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Vh(Error(Se(422))),Oc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=mf({mode:"visible",children:r.children},s,0,null),i=so(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ca(t,e.child,null,o),t.child.memoizedState=lm(o),t.memoizedState=am,i);if(!(t.mode&1))return Oc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Se(419)),r=Vh(i,r,void 0),Oc(e,t,o,r)}if(a=(o&e.childLanes)!==0,On||a){if(r=Zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gs(e,s),Tr(r,e,s,-1))}return my(),r=Vh(Error(Se(421))),Oc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=V2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Un=ii(s.nextSibling),zn=t,bt=!0,Sr=null,e!==null&&(tr[nr++]=us,tr[nr++]=cs,tr[nr++]=lo,us=e.id,cs=e.overflow,lo=t),t=uy(t,r.children),t.flags|=4096,t)}function uw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tm(e.return,t,n)}function Kh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yk(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wn(e,t,r.children,n),r=kt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uw(e,n,t);else if(e.tag===19)uw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(gt(kt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Od(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Kh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Od(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Kh(t,!0,n,null,i);break;case"together":Kh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function td(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ys(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),co|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,n=ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function j2(e,t,n){switch(t.tag){case 3:Gk(t),Ea();break;case 5:_k(t);break;case 1:In(t.type)&&Sd(t);break;case 4:ty(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;gt(Td,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(gt(kt,kt.current&1),t.flags|=128,null):n&t.child.childLanes?Qk(e,t,n):(gt(kt,kt.current&1),e=ys(e,t,n),e!==null?e.sibling:null);gt(kt,kt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yk(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),gt(kt,kt.current),r)break;return null;case 22:case 23:return t.lanes=0,Hk(e,t,n)}return ys(e,t,n)}var Jk,um,Zk,Xk;Jk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};um=function(){};Zk=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,zi(Hr.current);var i=null;switch(n){case"input":s=jp(e,s),r=jp(e,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Dp(e,s),r=Dp(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_d)}Lp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&yt("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Xk=function(e,t,n,r){n!==r&&(t.flags|=4)};function al(e,t){if(!bt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function R2(e,t,n){var r=t.pendingProps;switch(Gg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return In(t.type)&&kd(),cn(t),null;case 3:return r=t.stateNode,Ta(),vt(Rn),vt(mn),ry(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Pc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sr!==null&&(ym(Sr),Sr=null))),um(e,t),cn(t),null;case 5:ny(t);var s=zi(nu.current);if(n=t.type,e!==null&&t.stateNode!=null)Zk(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Se(166));return cn(t),null}if(e=zi(Hr.current),Pc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vr]=t,r[eu]=i,e=(t.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(s=0;s<yl.length;s++)yt(yl[s],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":v0(r,i),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},yt("invalid",r);break;case"textarea":b0(r,i),yt("invalid",r)}Lp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Tc(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Tc(r.textContent,a,e),s=["children",""+a]):Kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&yt("scroll",r)}switch(n){case"input":wc(r),w0(r,i,!0);break;case"textarea":wc(r),x0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_d)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=T_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Vr]=t,e[eu]=r,Jk(e,t,!1,!1),t.stateNode=e;e:{switch(o=$p(n,r),n){case"dialog":yt("cancel",e),yt("close",e),s=r;break;case"iframe":case"object":case"embed":yt("load",e),s=r;break;case"video":case"audio":for(s=0;s<yl.length;s++)yt(yl[s],e);s=r;break;case"source":yt("error",e),s=r;break;case"img":case"image":case"link":yt("error",e),yt("load",e),s=r;break;case"details":yt("toggle",e),s=r;break;case"input":v0(e,r),s=jp(e,r),yt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),yt("invalid",e);break;case"textarea":b0(e,r),s=Dp(e,r),yt("invalid",e);break;default:s=r}Lp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?O_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&P_(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wl(e,l):typeof l=="number"&&Wl(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&yt("scroll",e):l!=null&&Ig(e,i,l,o))}switch(n){case"input":wc(e),w0(e,r,!1);break;case"textarea":wc(e),x0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ra(e,!!r.multiple,i,!1):r.defaultValue!=null&&ra(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=_d)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)Xk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Se(166));if(n=zi(nu.current),zi(Hr.current),Pc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vr]=t,(i=r.nodeValue!==n)&&(e=zn,e!==null))switch(e.tag){case 3:Tc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=t,t.stateNode=r}return cn(t),null;case 13:if(vt(kt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bt&&Un!==null&&t.mode&1&&!(t.flags&128))yk(),Ea(),t.flags|=98560,i=!1;else if(i=Pc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Se(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Se(317));i[Vr]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),i=!1}else Sr!==null&&(ym(Sr),Sr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?Wt===0&&(Wt=3):my())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Ta(),um(e,t),e===null&&Zl(t.stateNode.containerInfo),cn(t),null;case 10:return Zg(t.type._context),cn(t),null;case 17:return In(t.type)&&kd(),cn(t),null;case 19:if(vt(kt),i=t.memoizedState,i===null)return cn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)al(i,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Od(e),o!==null){for(t.flags|=128,al(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return gt(kt,kt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Lt()>Aa&&(t.flags|=128,r=!0,al(i,!1),t.lanes=4194304)}else{if(!r)if(e=Od(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),al(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bt)return cn(t),null}else 2*Lt()-i.renderingStartTime>Aa&&n!==1073741824&&(t.flags|=128,r=!0,al(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Lt(),t.sibling=null,n=kt.current,gt(kt,r?n&1|2:n&1),t):(cn(t),null);case 22:case 23:return py(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function I2(e,t){switch(Gg(t),t.tag){case 1:return In(t.type)&&kd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(),vt(Rn),vt(mn),ry(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ny(t),null;case 13:if(vt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vt(kt),null;case 4:return Ta(),null;case 10:return Zg(t.type._context),null;case 22:case 23:return py(),null;case 24:return null;default:return null}}var jc=!1,fn=!1,D2=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Yo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function cm(e,t,n){try{n()}catch(r){jt(e,t,r)}}var cw=!1;function N2(e,t){if(qp=wd,e=sk(),Hg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===s&&(a=o),p===i&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gp={focusedElem:e,selectionRange:n},wd=!1,Fe=t;Fe!==null;)if(t=Fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fe=e;else for(;Fe!==null;){t=Fe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,x=w.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:wr(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(T){jt(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,Fe=e;break}Fe=t.return}return w=cw,cw=!1,w}function Ol(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&cm(t,n,i)}s=s.next}while(s!==r)}}function hf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function dm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function e1(e){var t=e.alternate;t!==null&&(e.alternate=null,e1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vr],delete t[eu],delete t[Jp],delete t[y2],delete t[v2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function t1(e){return e.tag===5||e.tag===3||e.tag===4}function dw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||t1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_d));else if(r!==4&&(e=e.child,e!==null))for(fm(e,t,n),e=e.sibling;e!==null;)fm(e,t,n),e=e.sibling}function hm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hm(e,t,n),e=e.sibling;e!==null;)hm(e,t,n),e=e.sibling}var Xt=null,_r=!1;function Rs(e,t,n){for(n=n.child;n!==null;)n1(e,t,n),n=n.sibling}function n1(e,t,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(sf,n)}catch{}switch(n.tag){case 5:fn||Yo(n,t);case 6:var r=Xt,s=_r;Xt=null,Rs(e,t,n),Xt=r,_r=s,Xt!==null&&(_r?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(_r?(e=Xt,n=n.stateNode,e.nodeType===8?$h(e.parentNode,n):e.nodeType===1&&$h(e,n),Ql(e)):$h(Xt,n.stateNode));break;case 4:r=Xt,s=_r,Xt=n.stateNode.containerInfo,_r=!0,Rs(e,t,n),Xt=r,_r=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cm(n,t,o),s=s.next}while(s!==r)}Rs(e,t,n);break;case 1:if(!fn&&(Yo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,t,a)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,Rs(e,t,n),fn=r):Rs(e,t,n);break;default:Rs(e,t,n)}}function fw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new D2),t.forEach(function(r){var s=K2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,_r=!1;break e;case 3:Xt=a.stateNode.containerInfo,_r=!0;break e;case 4:Xt=a.stateNode.containerInfo,_r=!0;break e}a=a.return}if(Xt===null)throw Error(Se(160));n1(i,o,s),Xt=null,_r=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){jt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r1(t,e),t=t.sibling}function r1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mr(t,e),Nr(e),r&4){try{Ol(3,e,e.return),hf(3,e)}catch(v){jt(e,e.return,v)}try{Ol(5,e,e.return)}catch(v){jt(e,e.return,v)}}break;case 1:mr(t,e),Nr(e),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(mr(t,e),Nr(e),r&512&&n!==null&&Yo(n,n.return),e.flags&32){var s=e.stateNode;try{Wl(s,"")}catch(v){jt(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&E_(s,i),$p(a,o);var u=$p(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?O_(s,f):c==="dangerouslySetInnerHTML"?P_(s,f):c==="children"?Wl(s,f):Ig(s,c,f,u)}switch(a){case"input":Rp(s,i);break;case"textarea":C_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ra(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?ra(s,!!i.multiple,i.defaultValue,!0):ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[eu]=i}catch(v){jt(e,e.return,v)}}break;case 6:if(mr(t,e),Nr(e),r&4){if(e.stateNode===null)throw Error(Se(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){jt(e,e.return,v)}}break;case 3:if(mr(t,e),Nr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ql(t.containerInfo)}catch(v){jt(e,e.return,v)}break;case 4:mr(t,e),Nr(e);break;case 13:mr(t,e),Nr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fy=Lt())),r&4&&fw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(u=fn)||c,mr(t,e),fn=u):mr(t,e),Nr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Fe=e,c=e.child;c!==null;){for(f=Fe=c;Fe!==null;){switch(p=Fe,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ol(4,p,p.return);break;case 1:Yo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){jt(r,n,v)}}break;case 5:Yo(p,p.return);break;case 22:if(p.memoizedState!==null){pw(f);continue}}m!==null?(m.return=p,Fe=m):pw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=A_("display",o))}catch(v){jt(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mr(t,e),Nr(e),r&4&&fw(e);break;case 21:break;default:mr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(t1(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wl(s,""),r.flags&=-33);var i=dw(e);hm(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dw(e);fm(e,a,o);break;default:throw Error(Se(161))}}catch(l){jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function L2(e,t,n){Fe=e,s1(e)}function s1(e,t,n){for(var r=(e.mode&1)!==0;Fe!==null;){var s=Fe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||fn;a=jc;var u=fn;if(jc=o,(fn=l)&&!u)for(Fe=s;Fe!==null;)o=Fe,l=o.child,o.tag===22&&o.memoizedState!==null?mw(s):l!==null?(l.return=o,Fe=l):mw(s);for(;i!==null;)Fe=i,s1(i),i=i.sibling;Fe=s,jc=a,fn=u}hw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Fe=i):hw(e)}}function hw(e){for(;Fe!==null;){var t=Fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||hf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:wr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&J0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}J0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ql(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}fn||t.flags&512&&dm(t)}catch(p){jt(t,t.return,p)}}if(t===e){Fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Fe=n;break}Fe=t.return}}function pw(e){for(;Fe!==null;){var t=Fe;if(t===e){Fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Fe=n;break}Fe=t.return}}function mw(e){for(;Fe!==null;){var t=Fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hf(4,t)}catch(l){jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){jt(t,s,l)}}var i=t.return;try{dm(t)}catch(l){jt(t,i,l)}break;case 5:var o=t.return;try{dm(t)}catch(l){jt(t,o,l)}}}catch(l){jt(t,t.return,l)}if(t===e){Fe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Fe=a;break}Fe=t.return}}var $2=Math.ceil,Id=ks.ReactCurrentDispatcher,cy=ks.ReactCurrentOwner,ar=ks.ReactCurrentBatchConfig,ut=0,Zt=null,Bt=null,nn=0,Bn=0,Jo=yi(0),Wt=0,ou=null,co=0,pf=0,dy=0,jl=null,Pn=null,fy=0,Aa=1/0,rs=null,Dd=!1,pm=null,ai=null,Rc=!1,Xs=null,Nd=0,Rl=0,mm=null,nd=-1,rd=0;function xn(){return ut&6?Lt():nd!==-1?nd:nd=Lt()}function li(e){return e.mode&1?ut&2&&nn!==0?nn&-nn:b2.transition!==null?(rd===0&&(rd=z_()),rd):(e=ft,e!==0||(e=window.event,e=e===void 0?16:Q_(e.type)),e):1}function Tr(e,t,n,r){if(50<Rl)throw Rl=0,mm=null,Error(Se(185));Su(e,n,r),(!(ut&2)||e!==Zt)&&(e===Zt&&(!(ut&2)&&(pf|=n),Wt===4&&Bs(e,nn)),Dn(e,r),n===1&&ut===0&&!(t.mode&1)&&(Aa=Lt()+500,cf&&vi()))}function Dn(e,t){var n=e.callbackNode;bP(e,t);var r=vd(e,e===Zt?nn:0);if(r===0)n!==null&&S0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&S0(n),t===1)e.tag===0?w2(gw.bind(null,e)):pk(gw.bind(null,e)),m2(function(){!(ut&6)&&vi()}),n=null;else{switch(V_(r)){case 1:n=Mg;break;case 4:n=B_;break;case 16:n=yd;break;case 536870912:n=U_;break;default:n=yd}n=f1(n,i1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function i1(e,t){if(nd=-1,rd=0,ut&6)throw Error(Se(327));var n=e.callbackNode;if(la()&&e.callbackNode!==n)return null;var r=vd(e,e===Zt?nn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ld(e,r);else{t=r;var s=ut;ut|=2;var i=a1();(Zt!==e||nn!==t)&&(rs=null,Aa=Lt()+500,ro(e,t));do try{B2();break}catch(a){o1(e,a)}while(!0);Jg(),Id.current=i,ut=s,Bt!==null?t=0:(Zt=null,nn=0,t=Wt)}if(t!==0){if(t===2&&(s=zp(e),s!==0&&(r=s,t=gm(e,s))),t===1)throw n=ou,ro(e,0),Bs(e,r),Dn(e,Lt()),n;if(t===6)Bs(e,r);else{if(s=e.current.alternate,!(r&30)&&!M2(s)&&(t=Ld(e,r),t===2&&(i=zp(e),i!==0&&(r=i,t=gm(e,i))),t===1))throw n=ou,ro(e,0),Bs(e,r),Dn(e,Lt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Se(345));case 2:Ii(e,Pn,rs);break;case 3:if(Bs(e,r),(r&130023424)===r&&(t=fy+500-Lt(),10<t)){if(vd(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){xn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yp(Ii.bind(null,e,Pn,rs),t);break}Ii(e,Pn,rs);break;case 4:if(Bs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Cr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$2(r/1960))-r,10<r){e.timeoutHandle=Yp(Ii.bind(null,e,Pn,rs),r);break}Ii(e,Pn,rs);break;case 5:Ii(e,Pn,rs);break;default:throw Error(Se(329))}}}return Dn(e,Lt()),e.callbackNode===n?i1.bind(null,e):null}function gm(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(ro(e,t).flags|=256),e=Ld(e,t),e!==2&&(t=Pn,Pn=n,t!==null&&ym(t)),e}function ym(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function M2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~dy,t&=~pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cr(t),r=1<<n;e[n]=-1,t&=~r}}function gw(e){if(ut&6)throw Error(Se(327));la();var t=vd(e,0);if(!(t&1))return Dn(e,Lt()),null;var n=Ld(e,t);if(e.tag!==0&&n===2){var r=zp(e);r!==0&&(t=r,n=gm(e,r))}if(n===1)throw n=ou,ro(e,0),Bs(e,t),Dn(e,Lt()),n;if(n===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ii(e,Pn,rs),Dn(e,Lt()),null}function hy(e,t){var n=ut;ut|=1;try{return e(t)}finally{ut=n,ut===0&&(Aa=Lt()+500,cf&&vi())}}function fo(e){Xs!==null&&Xs.tag===0&&!(ut&6)&&la();var t=ut;ut|=1;var n=ar.transition,r=ft;try{if(ar.transition=null,ft=1,e)return e()}finally{ft=r,ar.transition=n,ut=t,!(ut&6)&&vi()}}function py(){Bn=Jo.current,vt(Jo)}function ro(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,p2(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(Gg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kd();break;case 3:Ta(),vt(Rn),vt(mn),ry();break;case 5:ny(r);break;case 4:Ta();break;case 13:vt(kt);break;case 19:vt(kt);break;case 10:Zg(r.type._context);break;case 22:case 23:py()}n=n.return}if(Zt=e,Bt=e=ui(e.current,null),nn=Bn=t,Wt=0,ou=null,dy=pf=co=0,Pn=jl=null,Ui!==null){for(t=0;t<Ui.length;t++)if(n=Ui[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ui=null}return e}function o1(e,t){do{var n=Bt;try{if(Jg(),Xc.current=Rd,jd){for(var r=Ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jd=!1}if(uo=0,Yt=Vt=Ct=null,Al=!1,ru=0,cy.current=null,n===null||n.return===null){Wt=1,ou=t,Bt=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=rw(o);if(m!==null){m.flags&=-257,sw(m,o,a,i,t),m.mode&1&&nw(i,u,t),t=m,l=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(l),t.updateQueue=v}else w.add(l);break e}else{if(!(t&1)){nw(i,u,t),my();break e}l=Error(Se(426))}}else if(bt&&a.mode&1){var x=rw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),sw(x,o,a,i,t),Qg(Pa(l,a));break e}}i=l=Pa(l,a),Wt!==4&&(Wt=2),jl===null?jl=[i]:jl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Vk(i,l,t);Y0(i,g);break e;case 1:a=l;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ai===null||!ai.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var T=Kk(i,a,t);Y0(i,T);break e}}i=i.return}while(i!==null)}u1(n)}catch(j){t=j,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function a1(){var e=Id.current;return Id.current=Rd,e===null?Rd:e}function my(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Zt===null||!(co&268435455)&&!(pf&268435455)||Bs(Zt,nn)}function Ld(e,t){var n=ut;ut|=2;var r=a1();(Zt!==e||nn!==t)&&(rs=null,ro(e,t));do try{F2();break}catch(s){o1(e,s)}while(!0);if(Jg(),ut=n,Id.current=r,Bt!==null)throw Error(Se(261));return Zt=null,nn=0,Wt}function F2(){for(;Bt!==null;)l1(Bt)}function B2(){for(;Bt!==null&&!dP();)l1(Bt)}function l1(e){var t=d1(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?u1(e):Bt=t,cy.current=null}function u1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=I2(n,t),n!==null){n.flags&=32767,Bt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,Bt=null;return}}else if(n=R2(n,t,Bn),n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Wt===0&&(Wt=5)}function Ii(e,t,n){var r=ft,s=ar.transition;try{ar.transition=null,ft=1,U2(e,t,n,r)}finally{ar.transition=s,ft=r}return null}function U2(e,t,n,r){do la();while(Xs!==null);if(ut&6)throw Error(Se(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(xP(e,i),e===Zt&&(Bt=Zt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rc||(Rc=!0,f1(yd,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var o=ft;ft=1;var a=ut;ut|=4,cy.current=null,N2(e,n),r1(n,e),a2(Gp),wd=!!qp,Gp=qp=null,e.current=n,L2(n),fP(),ut=a,ft=o,ar.transition=i}else e.current=n;if(Rc&&(Rc=!1,Xs=e,Nd=s),i=e.pendingLanes,i===0&&(ai=null),mP(n.stateNode),Dn(e,Lt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dd)throw Dd=!1,e=pm,pm=null,e;return Nd&1&&e.tag!==0&&la(),i=e.pendingLanes,i&1?e===mm?Rl++:(Rl=0,mm=e):Rl=0,vi(),null}function la(){if(Xs!==null){var e=V_(Nd),t=ar.transition,n=ft;try{if(ar.transition=null,ft=16>e?16:e,Xs===null)var r=!1;else{if(e=Xs,Xs=null,Nd=0,ut&6)throw Error(Se(331));var s=ut;for(ut|=4,Fe=e.current;Fe!==null;){var i=Fe,o=i.child;if(Fe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Fe=u;Fe!==null;){var c=Fe;switch(c.tag){case 0:case 11:case 15:Ol(8,c,i)}var f=c.child;if(f!==null)f.return=c,Fe=f;else for(;Fe!==null;){c=Fe;var p=c.sibling,m=c.return;if(e1(c),c===u){Fe=null;break}if(p!==null){p.return=m,Fe=p;break}Fe=m}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Fe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Fe=o;else e:for(;Fe!==null;){if(i=Fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ol(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Fe=g;break e}Fe=i.return}}var y=e.current;for(Fe=y;Fe!==null;){o=Fe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Fe=_;else e:for(o=y;Fe!==null;){if(a=Fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hf(9,a)}}catch(j){jt(a,a.return,j)}if(a===o){Fe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Fe=T;break e}Fe=a.return}}if(ut=s,vi(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(sf,e)}catch{}r=!0}return r}finally{ft=n,ar.transition=t}}return!1}function yw(e,t,n){t=Pa(n,t),t=Vk(e,t,1),e=oi(e,t,1),t=xn(),e!==null&&(Su(e,1,t),Dn(e,t))}function jt(e,t,n){if(e.tag===3)yw(e,e,n);else for(;t!==null;){if(t.tag===3){yw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){e=Pa(n,e),e=Kk(t,e,1),t=oi(t,e,1),e=xn(),t!==null&&(Su(t,1,e),Dn(t,e));break}}t=t.return}}function z2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xn(),e.pingedLanes|=e.suspendedLanes&n,Zt===e&&(nn&n)===n&&(Wt===4||Wt===3&&(nn&130023424)===nn&&500>Lt()-fy?ro(e,0):dy|=n),Dn(e,t)}function c1(e,t){t===0&&(e.mode&1?(t=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):t=1);var n=xn();e=gs(e,t),e!==null&&(Su(e,t,n),Dn(e,n))}function V2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),c1(e,n)}function K2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(t),c1(e,n)}var d1;d1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rn.current)On=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return On=!1,j2(e,t,n);On=!!(e.flags&131072)}else On=!1,bt&&t.flags&1048576&&mk(t,Cd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;td(e,t),e=t.pendingProps;var s=Sa(t,mn.current);aa(t,n),s=iy(null,t,r,e,s,n);var i=oy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(i=!0,Sd(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ey(t),s.updater=ff,t.stateNode=s,s._reactInternals=t,rm(t,r,e,n),t=om(null,t,r,!0,i,n)):(t.tag=0,bt&&i&&qg(t),wn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(td(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=H2(r),e=wr(r,e),s){case 0:t=im(null,t,r,e,n);break e;case 1:t=aw(null,t,r,e,n);break e;case 11:t=iw(null,t,r,e,n);break e;case 14:t=ow(null,t,r,wr(r.type,e),n);break e}throw Error(Se(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wr(r,s),im(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wr(r,s),aw(e,t,r,s,n);case 3:e:{if(Gk(t),e===null)throw Error(Se(387));r=t.pendingProps,i=t.memoizedState,s=i.element,xk(e,t),Ad(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Pa(Error(Se(423)),t),t=lw(e,t,r,n,s);break e}else if(r!==s){s=Pa(Error(Se(424)),t),t=lw(e,t,r,n,s);break e}else for(Un=ii(t.stateNode.containerInfo.firstChild),zn=t,bt=!0,Sr=null,n=wk(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),r===s){t=ys(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return _k(t),e===null&&em(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Qp(r,s)?o=null:i!==null&&Qp(r,i)&&(t.flags|=32),qk(e,t),wn(e,t,o,n),t.child;case 6:return e===null&&em(t),null;case 13:return Qk(e,t,n);case 4:return ty(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ca(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wr(r,s),iw(e,t,r,s,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,gt(Td,r._currentValue),r._currentValue=o,i!==null)if(Pr(i.value,o)){if(i.children===s.children&&!Rn.current){t=ys(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ds(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),tm(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tm(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,aa(t,n),s=ur(s),r=r(s),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,s=wr(r,t.pendingProps),s=wr(r.type,s),ow(e,t,r,s,n);case 15:return Wk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wr(r,s),td(e,t),t.tag=1,In(r)?(e=!0,Sd(t)):e=!1,aa(t,n),zk(t,r,s),rm(t,r,s,n),om(null,t,r,!0,e,n);case 19:return Yk(e,t,n);case 22:return Hk(e,t,n)}throw Error(Se(156,t.tag))};function f1(e,t){return F_(e,t)}function W2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,n,r){return new W2(e,t,n,r)}function gy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H2(e){if(typeof e=="function")return gy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ng)return 11;if(e===Lg)return 14}return 2}function ui(e,t){var n=e.alternate;return n===null?(n=ir(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function sd(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")gy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Uo:return so(n.children,s,i,t);case Dg:o=8,s|=8;break;case Tp:return e=ir(12,n,t,s|2),e.elementType=Tp,e.lanes=i,e;case Pp:return e=ir(13,n,t,s),e.elementType=Pp,e.lanes=i,e;case Ap:return e=ir(19,n,t,s),e.elementType=Ap,e.lanes=i,e;case __:return mf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b_:o=10;break e;case x_:o=9;break e;case Ng:o=11;break e;case Lg:o=14;break e;case $s:o=16,r=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=ir(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function so(e,t,n,r){return e=ir(7,e,r,t),e.lanes=n,e}function mf(e,t,n,r){return e=ir(22,e,r,t),e.elementType=__,e.lanes=n,e.stateNode={isHidden:!1},e}function Wh(e,t,n){return e=ir(6,e,null,t),e.lanes=n,e}function Hh(e,t,n){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q2(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yy(e,t,n,r,s,i,o,a,l){return e=new q2(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ir(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ey(i),e}function G2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function h1(e){if(!e)return hi;e=e._reactInternals;e:{if(go(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var n=e.type;if(In(n))return hk(e,n,t)}return t}function p1(e,t,n,r,s,i,o,a,l){return e=yy(n,r,!0,e,s,i,o,a,l),e.context=h1(null),n=e.current,r=xn(),s=li(n),i=ds(r,s),i.callback=t??null,oi(n,i,s),e.current.lanes=s,Su(e,s,r),Dn(e,r),e}function gf(e,t,n,r){var s=t.current,i=xn(),o=li(s);return n=h1(n),t.context===null?t.context=n:t.pendingContext=n,t=ds(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=oi(s,t,o),e!==null&&(Tr(e,s,o,i),Zc(e,s,o)),o}function $d(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vy(e,t){vw(e,t),(e=e.alternate)&&vw(e,t)}function Q2(){return null}var m1=typeof reportError=="function"?reportError:function(e){console.error(e)};function wy(e){this._internalRoot=e}yf.prototype.render=wy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));gf(e,t,null,null)};yf.prototype.unmount=wy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fo(function(){gf(null,e,null,null)}),t[ms]=null}};function yf(e){this._internalRoot=e}yf.prototype.unstable_scheduleHydration=function(e){if(e){var t=H_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fs.length&&t!==0&&t<Fs[n].priority;n++);Fs.splice(n,0,e),n===0&&G_(e)}};function by(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ww(){}function Y2(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=$d(o);i.call(u)}}var o=p1(t,r,e,0,null,!1,!1,"",ww);return e._reactRootContainer=o,e[ms]=o.current,Zl(e.nodeType===8?e.parentNode:e),fo(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=$d(l);a.call(u)}}var l=yy(e,0,!1,null,null,!1,!1,"",ww);return e._reactRootContainer=l,e[ms]=l.current,Zl(e.nodeType===8?e.parentNode:e),fo(function(){gf(t,l,n,r)}),l}function wf(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=$d(o);a.call(l)}}gf(t,o,e,s)}else o=Y2(n,t,e,s,r);return $d(o)}K_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gl(t.pendingLanes);n!==0&&(Fg(t,n|1),Dn(t,Lt()),!(ut&6)&&(Aa=Lt()+500,vi()))}break;case 13:fo(function(){var r=gs(e,1);if(r!==null){var s=xn();Tr(r,e,1,s)}}),vy(e,1)}};Bg=function(e){if(e.tag===13){var t=gs(e,134217728);if(t!==null){var n=xn();Tr(t,e,134217728,n)}vy(e,134217728)}};W_=function(e){if(e.tag===13){var t=li(e),n=gs(e,t);if(n!==null){var r=xn();Tr(n,e,t,r)}vy(e,t)}};H_=function(){return ft};q_=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}};Fp=function(e,t,n){switch(t){case"input":if(Rp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=uf(r);if(!s)throw Error(Se(90));S_(r),Rp(r,s)}}}break;case"textarea":C_(e,n);break;case"select":t=n.value,t!=null&&ra(e,!!n.multiple,t,!1)}};I_=hy;D_=fo;var J2={usingClientEntryPoint:!1,Events:[Cu,Wo,uf,j_,R_,hy]},ll={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z2={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$_(e),e===null?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||Q2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{sf=Ic.inject(Z2),Wr=Ic}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J2;Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!by(t))throw Error(Se(200));return G2(e,t,null,n)};Wn.createRoot=function(e,t){if(!by(e))throw Error(Se(299));var n=!1,r="",s=m1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yy(e,1,!1,null,null,n,!1,r,s),e[ms]=t.current,Zl(e.nodeType===8?e.parentNode:e),new wy(t)};Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=$_(t),e=e===null?null:e.stateNode,e};Wn.flushSync=function(e){return fo(e)};Wn.hydrate=function(e,t,n){if(!vf(t))throw Error(Se(200));return wf(null,e,t,!0,n)};Wn.hydrateRoot=function(e,t,n){if(!by(e))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=m1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=p1(t,null,e,1,n??null,s,!1,i,o),e[ms]=t.current,Zl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new yf(t)};Wn.render=function(e,t,n){if(!vf(t))throw Error(Se(200));return wf(null,e,t,!1,n)};Wn.unmountComponentAtNode=function(e){if(!vf(e))throw Error(Se(40));return e._reactRootContainer?(fo(function(){wf(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Wn.unstable_batchedUpdates=hy;Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vf(n))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return wf(e,t,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function g1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g1)}catch(e){console.error(e)}}g1(),g_.exports=Wn;var xy=g_.exports;const X2=nf(xy);var bw=xy;Ep.createRoot=bw.createRoot,Ep.hydrateRoot=bw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xw="popstate";function eA(e={}){function t(s,i){let{pathname:o="/",search:a="",hash:l=""}=yo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),vm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:au(i))}function r(s,i){Kn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return nA(t,n,r,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tA(){return Math.random().toString(36).substring(2,10)}function _w(e,t){return{usr:e.state,key:e.key,idx:t}}function vm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yo(t):t,state:n,key:t&&t.key||r||tA()}}function au({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function yo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function nA(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let x=c(),g=x==null?null:x-u;u=x,l&&l({action:a,location:v.location,delta:g})}function p(x,g){a="PUSH";let y=vm(v.location,x,g);n&&n(y,x),u=c()+1;let _=_w(y,u),T=v.createHref(y);try{o.pushState(_,"",T)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(T)}i&&l&&l({action:a,location:v.location,delta:1})}function m(x,g){a="REPLACE";let y=vm(v.location,x,g);n&&n(y,x),u=c();let _=_w(y,u),T=v.createHref(y);o.replaceState(_,"",T),i&&l&&l({action:a,location:v.location,delta:0})}function w(x){return rA(x)}let v={get action(){return a},get location(){return e(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(xw,f),l=x,()=>{s.removeEventListener(xw,f),l=null}},createHref(x){return t(s,x)},createURL:w,encodeLocation(x){let g=w(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return v}function rA(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:au(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function y1(e,t,n="/"){return sA(e,t,n,!1)}function sA(e,t,n,r){let s=typeof t=="string"?yo(t):t,i=vs(s.pathname||"/",n);if(i==null)return null;let o=v1(e);iA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=gA(i);a=pA(o[l],u,r)}return a}function v1(e,t=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;_t(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let f=fs([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(_t(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),v1(o.children,t,p,f,l)),!(o.path==null&&!o.index)&&t.push({path:f,score:fA(f,o.index),routesMeta:p})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of w1(o.path))i(o,a,!0,u)}),t}function w1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=w1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function iA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var oA=/^:[\w-]+$/,aA=3,lA=2,uA=1,cA=10,dA=-2,kw=e=>e==="*";function fA(e,t){let n=e.split("/"),r=n.length;return n.some(kw)&&(r+=dA),t&&(r+=lA),n.filter(s=>!kw(s)).reduce((s,i)=>s+(oA.test(i)?aA:i===""?uA:cA),r)}function hA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function pA(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=Md({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Md({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:fs([i,f.pathname]),pathnameBase:bA(fs([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=fs([i,f.pathnameBase]))}return o}function Md(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=mA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},p)=>{if(c==="*"){let w=a[p]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function mA(e,t=!1,n=!0){Kn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function gA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function yA(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?yo(e):e;return{pathname:n?n.startsWith("/")?n:vA(n,t):t,search:xA(r),hash:_A(s)}}function vA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _y(e){let t=wA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function ky(e,t,n,r=!1){let s;typeof e=="string"?s=yo(e):(s={...e},_t(!s.pathname||!s.pathname.includes("?"),qh("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),qh("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),qh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=yA(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var fs=e=>e.join("/").replace(/\/\/+/g,"/"),bA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_A=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var b1=["POST","PUT","PATCH","DELETE"];new Set(b1);var SA=["GET",...b1];new Set(SA);var La=E.createContext(null);La.displayName="DataRouter";var bf=E.createContext(null);bf.displayName="DataRouterState";E.createContext(!1);var x1=E.createContext({isTransitioning:!1});x1.displayName="ViewTransition";var EA=E.createContext(new Map);EA.displayName="Fetchers";var CA=E.createContext(null);CA.displayName="Await";var Ar=E.createContext(null);Ar.displayName="Navigation";var Pu=E.createContext(null);Pu.displayName="Location";var Or=E.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var Sy=E.createContext(null);Sy.displayName="RouteError";function TA(e,{relative:t}={}){_t($a(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=E.useContext(Ar),{hash:s,pathname:i,search:o}=Ou(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:fs([n,i])),r.createHref({pathname:a,search:o,hash:s})}function $a(){return E.useContext(Pu)!=null}function dr(){return _t($a(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Pu).location}var _1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k1(e){E.useContext(Ar).static||E.useLayoutEffect(e)}function jr(){let{isDataRoute:e}=E.useContext(Or);return e?BA():PA()}function PA(){_t($a(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext(La),{basename:t,navigator:n}=E.useContext(Ar),{matches:r}=E.useContext(Or),{pathname:s}=dr(),i=JSON.stringify(_y(r)),o=E.useRef(!1);return k1(()=>{o.current=!0}),E.useCallback((l,u={})=>{if(Kn(o.current,_1),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=ky(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:fs([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}E.createContext(null);function Au(){let{matches:e}=E.useContext(Or),t=e[e.length-1];return t?t.params:{}}function Ou(e,{relative:t}={}){let{matches:n}=E.useContext(Or),{pathname:r}=dr(),s=JSON.stringify(_y(n));return E.useMemo(()=>ky(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function AA(e,t){return S1(e,t)}function S1(e,t,n,r,s){var y;_t($a(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=E.useContext(Ar),{matches:o}=E.useContext(Or),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let _=f&&f.path||"";E1(u,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=dr(),m;if(t){let _=typeof t=="string"?yo(t):t;_t(c==="/"||((y=_.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),m=_}else m=p;let w=m.pathname||"/",v=w;if(c!=="/"){let _=c.replace(/^\//,"").split("/");v="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=y1(e,{pathname:v});Kn(f||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Kn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=DA(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:fs([c,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:fs([c,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,s);return t&&g?E.createElement(Pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function OA(){let e=FA(),t=kA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:i},"ErrorBoundary")," or"," ",E.createElement("code",{style:i},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:s},n):null,o)}var jA=E.createElement(OA,null),RA=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?E.createElement(Or.Provider,{value:this.props.routeContext},E.createElement(Sy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IA({routeContext:e,match:t,children:n}){let r=E.useContext(La);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Or.Provider,{value:e},n)}function DA(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);_t(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:f,errors:p}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,f)=>{let p,m=!1,w=null,v=null;n&&(p=o&&c.route.id?o[c.route.id]:void 0,w=c.route.errorElement||jA,a&&(l<0&&f===0?(E1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=c.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,f+1)),g=()=>{let y;return p?y=w:m?y=v:c.route.Component?y=E.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,E.createElement(IA,{match:c,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?E.createElement(RA,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:r}):g()},null)}function Ey(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NA(e){let t=E.useContext(La);return _t(t,Ey(e)),t}function LA(e){let t=E.useContext(bf);return _t(t,Ey(e)),t}function $A(e){let t=E.useContext(Or);return _t(t,Ey(e)),t}function Cy(e){let t=$A(e),n=t.matches[t.matches.length-1];return _t(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function MA(){return Cy("useRouteId")}function FA(){var r;let e=E.useContext(Sy),t=LA("useRouteError"),n=Cy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function BA(){let{router:e}=NA("useNavigate"),t=Cy("useNavigate"),n=E.useRef(!1);return k1(()=>{n.current=!0}),E.useCallback(async(s,i={})=>{Kn(n.current,_1),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Sw={};function E1(e,t,n){!t&&!Sw[e]&&(Sw[e]=!0,Kn(!1,n))}E.memo(UA);function UA({routes:e,future:t,state:n,unstable_onError:r}){return S1(e,void 0,n,r,t)}function C1({to:e,replace:t,state:n,relative:r}){_t($a(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(Ar);Kn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=E.useContext(Or),{pathname:o}=dr(),a=jr(),l=ky(e,_y(i),o,r==="path"),u=JSON.stringify(l);return E.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function dn(e){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){_t(!$a(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=yo(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:p="default"}=n,m=E.useMemo(()=>{let w=vs(l,o);return w==null?null:{location:{pathname:w,search:u,hash:c,state:f,key:p},navigationType:r}},[o,l,u,c,f,p,r]);return Kn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:E.createElement(Ar.Provider,{value:a},E.createElement(Pu.Provider,{children:t,value:m}))}function VA({children:e,location:t}){return AA(wm(e),t)}function wm(e,t=[]){let n=[];return E.Children.forEach(e,(r,s)=>{if(!E.isValidElement(r))return;let i=[...t,s];if(r.type===E.Fragment){n.push.apply(n,wm(r.props.children,i));return}_t(r.type===dn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wm(r.props.children,i)),n.push(o)}),n}var id="get",od="application/x-www-form-urlencoded";function xf(e){return e!=null&&typeof e.tagName=="string"}function KA(e){return xf(e)&&e.tagName.toLowerCase()==="button"}function WA(e){return xf(e)&&e.tagName.toLowerCase()==="form"}function HA(e){return xf(e)&&e.tagName.toLowerCase()==="input"}function qA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GA(e,t){return e.button===0&&(!t||t==="_self")&&!qA(e)}function bm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function QA(e,t){let n=bm(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Dc=null;function YA(){if(Dc===null)try{new FormData(document.createElement("form"),0),Dc=!1}catch{Dc=!0}return Dc}var JA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gh(e){return e!=null&&!JA.has(e)?(Kn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${od}"`),null):e}function ZA(e,t){let n,r,s,i,o;if(WA(e)){let a=e.getAttribute("action");r=a?vs(a,t):null,n=e.getAttribute("method")||id,s=Gh(e.getAttribute("enctype"))||od,i=new FormData(e)}else if(KA(e)||HA(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?vs(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||id,s=Gh(e.getAttribute("formenctype"))||Gh(a.getAttribute("enctype"))||od,i=new FormData(a,e),!YA()){let{name:u,type:c,value:f}=e;if(c==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,f)}}else{if(xf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=id,r=null,s=od,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ty(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XA(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&vs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function eO(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tO(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function nO(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await eO(i,n);return o.links?o.links():[]}return[]}));return oO(r.flat(1).filter(tO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ew(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function rO(e,t,{includeHydrateFallback:n}={}){return sO(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function sO(e){return[...new Set(e)]}function iO(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function oO(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(iO(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function T1(){let e=E.useContext(La);return Ty(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function aO(){let e=E.useContext(bf);return Ty(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Py=E.createContext(void 0);Py.displayName="FrameworkContext";function P1(){let e=E.useContext(Py);return Ty(e,"You must render this element inside a <HydratedRouter> element"),e}function lO(e,t){let n=E.useContext(Py),[r,s]=E.useState(!1),[i,o]=E.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,p=E.useRef(null);E.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[e]),E.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{s(!0)},w=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:ul(a,m),onBlur:ul(l,w),onMouseEnter:ul(u,m),onMouseLeave:ul(c,w),onTouchStart:ul(f,m)}]:[!1,p,{}]}function ul(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function uO({page:e,...t}){let{router:n}=T1(),r=E.useMemo(()=>y1(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?E.createElement(dO,{page:e,matches:r,...t}):null}function cO(e){let{manifest:t,routeModules:n}=P1(),[r,s]=E.useState([]);return E.useEffect(()=>{let i=!1;return nO(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function dO({page:e,matches:t,...n}){let r=dr(),{manifest:s,routeModules:i}=P1(),{basename:o}=T1(),{loaderData:a,matches:l}=aO(),u=E.useMemo(()=>Ew(e,t,l,s,r,"data"),[e,t,l,s,r]),c=E.useMemo(()=>Ew(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=E.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,v=!1;if(t.forEach(g=>{var _;let y=s.routes[g.route.id];!y||!y.hasLoader||(!u.some(T=>T.route.id===g.route.id)&&g.route.id in a&&((_=i[g.route.id])!=null&&_.shouldRevalidate)||y.hasClientLoader?v=!0:w.add(g.route.id))}),w.size===0)return[];let x=XA(e,o,"data");return v&&w.size>0&&x.searchParams.set("_routes",t.filter(g=>w.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[o,a,r,s,u,t,e,i]),p=E.useMemo(()=>rO(c,s),[c,s]),m=cO(c);return E.createElement(E.Fragment,null,f.map(w=>E.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),p.map(w=>E.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),m.map(({key:w,link:v})=>E.createElement("link",{key:w,nonce:n.nonce,...v})))}function fO(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var A1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A1&&(window.__reactRouterVersion="7.9.3")}catch{}function hO({basename:e,children:t,window:n}){let r=E.useRef();r.current==null&&(r.current=eA({window:n,v5Compat:!0}));let s=r.current,[i,o]=E.useState({action:s.action,location:s.location}),a=E.useCallback(l=>{E.startTransition(()=>o(l))},[o]);return E.useLayoutEffect(()=>s.listen(a),[s,a]),E.createElement(zA,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var O1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rr=E.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...p},m){let{basename:w}=E.useContext(Ar),v=typeof u=="string"&&O1.test(u),x,g=!1;if(typeof u=="string"&&v&&(x=u,A1))try{let U=new URL(window.location.href),K=u.startsWith("//")?new URL(U.protocol+u):new URL(u),me=vs(K.pathname,w);K.origin===U.origin&&me!=null?u=me+K.search+K.hash:g=!0}catch{Kn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=TA(u,{relative:s}),[_,T,j]=lO(r,p),R=yO(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function I(U){t&&t(U),U.defaultPrevented||R(U)}let $=E.createElement("a",{...p,...j,href:x||y,onClick:g||i?t:I,ref:fO(m,T),target:l,"data-discover":!v&&n==="render"?"true":void 0});return _&&!v?E.createElement(E.Fragment,null,$,E.createElement(uO,{page:y})):$});rr.displayName="Link";var pO=E.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let f=Ou(o,{relative:u.relative}),p=dr(),m=E.useContext(bf),{navigator:w,basename:v}=E.useContext(Ar),x=m!=null&&kO(f)&&a===!0,g=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,y=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),_=_?_.toLowerCase():null,g=g.toLowerCase()),_&&v&&(_=vs(_,v)||_);const T=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=y===g||!s&&y.startsWith(g)&&y.charAt(T)==="/",R=_!=null&&(_===g||!s&&_.startsWith(g)&&_.charAt(g.length)==="/"),I={isActive:j,isPending:R,isTransitioning:x},$=j?t:void 0,U;typeof r=="function"?U=r(I):U=[r,j?"active":null,R?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let K=typeof i=="function"?i(I):i;return E.createElement(rr,{...u,"aria-current":$,className:U,ref:c,style:K,to:o,viewTransition:a},typeof l=="function"?l(I):l)});pO.displayName="NavLink";var mO=E.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=id,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...p},m)=>{let w=xO(),v=_O(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&O1.test(a),y=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,j=(T==null?void 0:T.getAttribute("formmethod"))||o;w(T||_.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:f})};return E.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:y,...p,"data-discover":!g&&e==="render"?"true":void 0})});mO.displayName="Form";function gO(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j1(e){let t=E.useContext(La);return _t(t,gO(e)),t}function yO(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=jr(),l=dr(),u=Ou(e,{relative:i});return E.useCallback(c=>{if(GA(c,t)){c.preventDefault();let f=n!==void 0?n:au(l)===au(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}function vO(e){Kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=E.useRef(bm(e)),n=E.useRef(!1),r=dr(),s=E.useMemo(()=>QA(r.search,n.current?null:t.current),[r.search]),i=jr(),o=E.useCallback((a,l)=>{const u=bm(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var wO=0,bO=()=>`__${String(++wO)}__`;function xO(){let{router:e}=j1("useSubmit"),{basename:t}=E.useContext(Ar),n=MA();return E.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=ZA(r,t);if(s.navigate===!1){let c=s.fetcherKey||bO();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function _O(e,{relative:t}={}){let{basename:n}=E.useContext(Ar),r=E.useContext(Or);_t(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ou(e||".",{relative:t})},o=dr();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:fs([n,i.pathname])),au(i)}function kO(e,{relative:t}={}){let n=E.useContext(x1);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=j1("useViewTransitionState"),s=Ou(e,{relative:t});if(!n.isTransitioning)return!1;let i=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Md(s.pathname,o)!=null||Md(s.pathname,i)!=null}const vo="https://script.google.com/macros/s/AKfycbzcPH_BrshB8ud4LdfeHhrlfnN_SvPShzgOkEkUPlpFAKmcdi1HYal4I-TYJCJK9NQYUQ/exec",R1="radtpoqypgqetijvopho",SO=["searchIndex","allSongs"],EO=e=>["book-download-status",e],CO="modulepreload",TO=function(e){return"/new-sankeertan/"+e},Cw={},Ma=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=TO(l),l in Cw)return;Cw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":CO,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},PO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ma(async()=>{const{default:r}=await Promise.resolve().then(()=>Fa);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ay extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Tw extends Ay{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Pw extends Ay{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Aw extends Ay{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xm||(xm={}));var AO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class OO{constructor(t,{headers:n={},customFetch:r,region:s=xm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=PO(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return AO(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const f=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let p;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(u["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(u["Content-Type"]="application/json",p=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Tw(g)}),w=m.headers.get("x-relay-error");if(w&&w==="true")throw new Pw(m);if(!m.ok)throw new Aw(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield m.json():v==="application/octet-stream"?x=yield m.blob():v==="text/event-stream"?x=m:v==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Tw(i)}:{data:null,error:i,response:i instanceof Aw||i instanceof Pw?i.context:void 0}}})}}var An={},Oy={},_f={},ju={},kf={},Sf={},jO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oa=jO();const RO=Oa.fetch,I1=Oa.fetch.bind(Oa),D1=Oa.Headers,IO=Oa.Request,DO=Oa.Response,Fa=Object.freeze(Object.defineProperty({__proto__:null,Headers:D1,Request:IO,Response:DO,default:I1,fetch:RO},Symbol.toStringTag,{value:"Module"})),NO=TT(Fa);var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});let LO=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ef.default=LO;var N1=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const $O=N1(NO),MO=N1(Ef);let FO=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=$O.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,f=null,p=null,m=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const x=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,w="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(f=[],c=null,m=200,w="OK")}catch{i.status===404&&x===""?(m=204,w="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,w="OK"),c&&this.shouldThrowOnError)throw new MO.default(c)}return{error:c,data:f,count:p,status:m,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Sf.default=FO;var BO=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kf,"__esModule",{value:!0});const UO=BO(Sf);let zO=class extends UO.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};kf.default=zO;var VO=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ju,"__esModule",{value:!0});const KO=VO(kf);let WO=class extends KO.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};ju.default=WO;var HO=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});const cl=HO(ju);let qO=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new cl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new cl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new cl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new cl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new cl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};_f.default=qO;var L1=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oy,"__esModule",{value:!0});const GO=L1(_f),QO=L1(ju);let YO=class $1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new GO.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new QO.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Oy.default=YO;var Ba=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const M1=Ba(Oy);An.PostgrestClient=M1.default;const F1=Ba(_f);An.PostgrestQueryBuilder=F1.default;const B1=Ba(ju);An.PostgrestFilterBuilder=B1.default;const U1=Ba(kf);An.PostgrestTransformBuilder=U1.default;const z1=Ba(Sf);An.PostgrestBuilder=z1.default;const V1=Ba(Ef);An.PostgrestError=V1.default;var JO=An.default={PostgrestClient:M1.default,PostgrestQueryBuilder:F1.default,PostgrestFilterBuilder:B1.default,PostgrestTransformBuilder:U1.default,PostgrestBuilder:z1.default,PostgrestError:V1.default};const{PostgrestClient:ZO,PostgrestQueryBuilder:iU,PostgrestFilterBuilder:oU,PostgrestTransformBuilder:aU,PostgrestBuilder:lU,PostgrestError:uU}=JO;class XO{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ej="2.74.0",tj=`realtime-js/${ej}`,nj="1.0.0",_m=1e4,rj=1e3,sj=100;var Il;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Il||(Il={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var kr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(kr||(kr={}));var km;(function(e){e.websocket="websocket"})(km||(km={}));var $i;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})($i||($i={}));class ij{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class K1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mt||(mt={}));const Ow=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=oj(o,e,t,s),i),{}):{}},oj=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?W1(i,o):Sm(o)},W1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return cj(t,n)}switch(e){case mt.bool:return aj(t);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return lj(t);case mt.json:case mt.jsonb:return uj(t);case mt.timestamp:return dj(t);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return Sm(t);default:return Sm(t)}},Sm=e=>e,aj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},cj=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>W1(t,a))}return e},dj=e=>typeof e=="string"?e.replace(" ","T"):e,H1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qh{constructor(t,n,r={},s=_m){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jw||(jw={}));class Dl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Dl.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Dl.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const p=c.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),w=c.filter(x=>m.indexOf(x.presence_ref)<0),v=f.filter(x=>p.indexOf(x.presence_ref)<0);w.length>0&&(a[u]=w),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(m=>m.presence_ref),p=c.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Rw||(Rw={}));var Nl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nl||(Nl={}));var ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class jy{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qh(this,kr.join,this.params,this.timeout),this.rejoinTimer=new K1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Dl(this),this.broadcastEndpointURL=H1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Nl.PRESENCE]&&this.bindings[Nl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ss.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ss.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket.setAuth(),m===void 0){t==null||t(ss.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(w=v==null?void 0:v.length)!==null&&w!==void 0?w:0,g=[];for(let y=0;y<x;y++){const _=v[y],{filter:{event:T,schema:j,table:R,filter:I}}=_,$=m&&m[y];if($&&$.event===T&&$.schema===j&&$.table===R&&$.filter===I)g.push(Object.assign(Object.assign({},_),{id:$.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ss.SUBSCRIBED);return}}).receive("error",m=>{this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===zt.joined&&t===Nl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Qh(this,kr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qh(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=kr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var w,v,x;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var w,v,x,g,y,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const T=m.id,j=(w=m.filter)===null||w===void 0?void 0:w.event;return T&&((v=n.ids)===null||v===void 0?void 0:v.includes(T))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const T=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return T==="*"||T===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:v,table:x,commit_timestamp:g,type:y,errors:_}=w;p=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:g,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(w))}m.callback(p,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&jy.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(kr.close,{},t)}_onError(t){this._on(kr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ow(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ow(t.columns,t.old_record)),n}}const Yh=()=>{},Nc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fj=[1e3,2e3,5e3,1e4],hj=1e4,pj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mj{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_m,this.transport=null,this.heartbeatIntervalMs=Nc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yh,this.ref=0,this.reconnectTimer=null,this.logger=Yh,this.conn=null,this.sendBuffer=[],this.serializer=new ij,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ma(async()=>{const{default:a}=await Promise.resolve().then(()=>Fa);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${km.websocket}`,this.httpEndpoint=H1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=XO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nj}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Il.connecting:return $i.Connecting;case Il.open:return $i.Open;case Il.closing:return $i.Closing;default:return $i.Closed}}isConnected(){return this.connectionState()===$i.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new jy(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(rj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Nc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(kr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([pj],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:tj};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(kr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new K1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:_m,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Nc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Yh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>fj[f-1]||hj,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ry extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class gj extends Ry{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Em extends Ry{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var yj=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const q1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ma(async()=>{const{default:r}=await Promise.resolve().then(()=>Fa);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},vj=()=>yj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ma(()=>Promise.resolve().then(()=>Fa),void 0)).Response:Response}),Cm=e=>{if(Array.isArray(e))return e.map(n=>Cm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Cm(r)}),t},wj=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Jh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bj=(e,t,n)=>wo(void 0,void 0,void 0,function*(){const r=yield vj();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new gj(Jh(s),i,o))}).catch(s=>{t(new Em(Jh(s),s))}):t(new Em(Jh(e),e))}),xj=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(wj(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Ru(e,t,n,r,s,i){return wo(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,xj(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>bj(l,a,r))})})}function Fd(e,t,n,r){return wo(this,void 0,void 0,function*(){return Ru(e,"GET",t,n,r)})}function Fr(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Ru(e,"POST",t,r,s,n)})}function Tm(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Ru(e,"PUT",t,r,s,n)})}function _j(e,t,n,r){return wo(this,void 0,void 0,function*(){return Ru(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function G1(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Ru(e,"DELETE",t,r,s,n)})}var kj=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Sj{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return kj(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var Ej=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Cj{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new Sj(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return Ej(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var Sn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Tj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Iw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pj{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=q1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Sn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Iw),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?Tm:Fr)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Sn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Iw.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield Tm(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Sn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ry("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Sn(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Sn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Sn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Sn(this,void 0,void 0,function*(){try{const s=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>Fd(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Cj(l,this.shouldThrowOnError)}info(t){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Fd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}exists(t){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield _j(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r)&&r instanceof Em){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Sn(this,void 0,void 0,function*(){try{return{data:yield G1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Sn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Tj),n),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Sn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Aj="2.74.0",Oj={"X-Client-Info":`storage-js/${Aj}`};var jo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class jj{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oj),n),this.fetch=q1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jo(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}getBucket(t){return jo(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}createBucket(t){return jo(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return jo(this,void 0,void 0,function*(){try{return{data:yield Tm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return jo(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return jo(this,void 0,void 0,function*(){try{return{data:yield G1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}class Rj extends jj{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new Pj(this.url,this.headers,t,this.fetch)}}const Ij="2.74.0";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const Dj={"X-Client-Info":`supabase-js-${vl}/${Ij}`},Nj={headers:Dj},Lj={schema:"public"},$j={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mj={};var Fj=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Bj=e=>{let t;return e?t=e:typeof fetch>"u"?t=I1:t=fetch,(...n)=>t(...n)},Uj=()=>typeof Headers>"u"?D1:Headers,zj=(e,t,n)=>{const r=Bj(n),s=Uj();return(i,o)=>Fj(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Vj=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function Kj(e){return e.endsWith("/")?e:e+"/"}function Wj(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Vj(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function Hj(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kj(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Q1="2.74.0",Mo=30*1e3,Pm=3,Zh=Pm*Mo,qj="http://localhost:9999",Gj="supabase.auth.token",Qj={"X-Client-Info":`gotrue-js/${Q1}`},Am="X-Supabase-Api-Version",Y1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jj=10*60*1e3;class lu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Zj extends lu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Xj(e){return Ve(e)&&e.name==="AuthApiError"}class Mi extends lu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class wi extends lu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ds extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eR(e){return Ve(e)&&e.name==="AuthSessionMissingError"}class Ro extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lc extends wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $c extends wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tR(e){return Ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class Dw extends wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Om extends wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Xh(e){return Ve(e)&&e.name==="AuthRetryableFetchError"}class Nw extends wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class jm extends wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lw=` 	
\r=`.split(""),nR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lw.length;t+=1)e[Lw[t].charCodeAt(0)]=-2;for(let t=0;t<Bd.length;t+=1)e[Bd[t].charCodeAt(0)]=t;return e})();function $w(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Bd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Bd[r]),t.queuedBits-=6}}function J1(e,t,n){const r=nR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Mw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{iR(o,r,n)};for(let o=0;o<e.length;o+=1)J1(e.charCodeAt(o),s,i);return t.join("")}function rR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function sR(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}rR(r,t)}}function iR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ua(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)J1(e.charCodeAt(s),n,r);return new Uint8Array(t)}function oR(e){const t=[];return sR(e,n=>t.push(n)),new Uint8Array(t)}function Vi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>$w(s,n,r)),$w(null,n,r),t.join("")}function aR(e){return Math.round(Date.now()/1e3)+e}function lR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fn=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},Z1=()=>{if(!Fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function uR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const X1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ma(async()=>{const{default:r}=await Promise.resolve().then(()=>Fa);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},cR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ai=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Is=async(e,t)=>{await e.removeItem(t)};class Cf{constructor(){this.promise=new Cf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Cf.promiseConstructor=Promise;function ep(e){const t=e.split(".");if(t.length!==3)throw new jm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Yj.test(t[r]))throw new jm("JWT not in base64url format");return{header:JSON.parse(Mw(t[0])),payload:JSON.parse(Mw(t[1])),signature:ua(t[2]),raw:{header:t[0],payload:t[1]}}}async function dR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function fR(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function hR(e){return("0"+e.toString(16)).substr(-2)}function pR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,hR).join("")}async function mR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function gR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await mR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Io(e,t,n=!1){const r=pR();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Fo(e,`${t}-code-verifier`,s);const i=await gR(r);return[i,r===i?"plain":"s256"]}const yR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vR(e){const t=e.headers.get(Am);if(!t||!t.match(yR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function bR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(e){if(!xR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fw(e){return JSON.parse(JSON.stringify(e))}var _R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Di=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kR=[502,503,504];async function Bw(e){var t;if(!cR(e))throw new Om(Di(e),0);if(kR.includes(e.status))throw new Om(Di(e),e.status);let n;try{n=await e.json()}catch(i){throw new Mi(Di(i),i)}let r;const s=vR(e);if(s&&s.getTime()>=Y1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Nw(Di(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ds}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Nw(Di(n),e.status,n.weak_password.reasons);throw new Zj(Di(n),e.status||500,r)}const SR=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ge(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Am]||(i[Am]=Y1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ER(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ER(e,t,n,r,s,i){const o=SR(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Om(Di(l),0)}if(a.ok||await Bw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Bw(l)}}function yr(e){var t;let n=null;PR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=aR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Uw(e){const t=yr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function CR(e){return{data:e,error:null}}function TR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=_R(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function zw(e){return e}function PR(e){return e.access_token&&e.refresh_token&&e.expires_in}const np=["global","local","others"];var AR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class OR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=X1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=np[0]){if(np.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${np.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=AR(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:TR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ve(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Do(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Do(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Us})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Do(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Do(t.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Do(t.userId),Do(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ve(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}function Vw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const No={debug:!!(globalThis&&Z1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class jR extends eS{}async function RR(e,t,n){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),No.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{No.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw No.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new jR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(No.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function IR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tS(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function DR(e){return parseInt(e,16)}function NR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function LR(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:f,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=tS(e.address),w=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",x=`${w} wants you to sign in with your Ethereum account:
${m}

${v}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);y+=`
- ${_}`}g+=y}return`${x}
${g}`}class $t extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Ud extends $t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function $R({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(rS(o)){if(i.rp.id!==o)return new $t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function MR({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(rS(r)){if(n.rpId!==r)return new $t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var nS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class FR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const BR=new FR;function UR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=nS(e,["challenge","user","excludeCredentials"]),i=ua(t).buffer,o=Object.assign(Object.assign({},n),{id:ua(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ua(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function zR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=nS(e,["challenge","allowCredentials"]),s=ua(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ua(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function VR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Vi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Vi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function KR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Vi(new Uint8Array(s.authenticatorData)),clientDataJSON:Vi(new Uint8Array(s.clientDataJSON)),signature:Vi(new Uint8Array(s.signature)),userHandle:s.userHandle?Vi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Kw(){var e,t;return!!(Fn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function WR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ud("Browser returned unexpected credential type",t)}:{data:null,error:new Ud("Empty credential response",t)}}catch(t){return{data:null,error:$R({error:t,options:e})}}}async function HR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ud("Browser returned unexpected credential type",t)}:{data:null,error:new Ud("Empty credential response",t)}}catch(t){return{data:null,error:MR({error:t,options:e})}}}const qR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},GR={userVerification:"preferred",hints:["security-key"]};function zd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=zd(a,o):r[i]=zd(o)}else r[i]=o}return r}function QR(e,t){return zd(qR,e,t||{})}function YR(e,t){return zd(GR,e,t||{})}class JR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??BR.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=QR(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:f}=await WR({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=YR(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:f}=await HR(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new Mi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new lu("rpId is required for WebAuthn authentication")};try{if(!Kw())return{data:null,error:new Mi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new Mi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new lu("rpId is required for WebAuthn registration")};try{if(!Kw())return{data:null,error:new Mi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new Mi("Unexpected error in register",o)}}}}IR();const ZR={url:qj,storageKey:Gj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ww(e,t,n){return await n()}const Lo={};class uu{get jwks(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uu.nextInstanceID,uu.nextInstanceID+=1,this.instanceID>0&&Fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ZR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new OR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=X1(s.fetch),this.lock=s.lock||Ww,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Fn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=RR:this.lock=Ww,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new JR(this)},this.persistSession?(s.storage?this.storage=s.storage:Z1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Vw(this.memoryStorage)),Fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Q1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=uR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tR(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?{error:n}:{error:new Mi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:yr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:f,options:p}=t;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await Io(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:w},xform:yr})}else if("phone"in t){const{phone:c,password:f,options:p}=t;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:yr})}else throw new Lc("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Uw})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Uw})}else throw new Lc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ro}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,c,f,p;let m,w;if("message"in t)m=t.message,w=t.signature;else{const{chain:v,wallet:x,statement:g,options:y}=t;let _;if(Fn())if(typeof x=="object")_=x;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")_=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),j=await _.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=tS(j[0]);let I=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const U=await _.request({method:"eth_chainId"});I=DR(U)}const $={domain:T.host,address:R,statement:g,uri:T.href,version:"1",chainId:I,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=LR($),w=await _.request({method:"personal_sign",params:[NR(m),R]})}try{const{data:v,error:x}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:w},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:yr});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Ro}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(Ve(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,f,p,m;let w,v;if("message"in t)w=t.message,v=t.signature;else{const{chain:x,wallet:g,statement:y,options:_}=t;let T;if(Fn())if(typeof g=="object")T=g;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))T=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=g}const j=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const R=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let I;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")I=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)I=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)w=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${j.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const R=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=R}}try{const{data:x,error:g}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Vi(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:yr});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ro}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(Ve(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:yr});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ro}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ve(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ro}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Io(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Lc("You must provide either an email or phone number.")}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:yr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Io(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:CR})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ds;const{error:s}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ve(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Lc("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Zh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ai(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=tp()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(n){if(Ve(n))return eR(n)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ds;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Io(this.storage,this.storageKey));const{data:u,error:c}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Us});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ep(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ve(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ds;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fn())throw new $c("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $c(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $c("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Dw("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new $c("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let p=c+f;l&&(p=parseInt(l));const m=p-c;m*1e3<=Mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const w=p-f;c-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,c):c-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,c);const{data:v,error:x}=await this._getUser(i);if(x)throw x;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Xj(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=lR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Io(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Fn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ve(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:yr}),{data:p,error:m}=f;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Ro}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(s){if(Ve(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await fR(async s=>(s>0&&await dR(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Xh(i)&&Date.now()+o-r<Mo})}catch(r){if(this._debug(n,"error",r),Ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ai(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fo(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:tp()}else if(s&&!s.user&&!s.user){const o=await Ai(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Is(this.storage,this.storageKey+"-user"),await Fo(this.storage,this.storageKey,s)):s.user=tp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Zh;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Zh}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Xh(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ve(i)){const o={data:null,error:i};return Xh(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Fw(s);await Fo(this.storage,this.storageKey,i)}else{const s=Fw(n);await Fo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mo}ms, refresh threshold is ${Pm} ticks`),s<=Pm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof eS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Io(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?VR(t.webauthn.credential_response):KR(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:UR(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:zR(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ep(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+Jj>s)return r;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:w}=await this.getSession();if(w||!m.session)return{data:null,error:w};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=ep(r);n!=null&&n.allowExpired||wR(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=bR(s.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,oR(`${a}.${l}`)))throw new jm("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}}uu.nextInstanceID=0;const XR=uu;class eI extends XR{constructor(t){super(t)}}var tI=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class nI{constructor(t,n,r){var s,i,o;this.supabaseUrl=t,this.supabaseKey=n;const a=Hj(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:Lj,realtime:Mj,auth:Object.assign(Object.assign({},$j),{storageKey:l}),global:Nj},c=Wj(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=zj(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new ZO(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Rj(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new OO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return tI(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eI({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new mj(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rI=(e,t,n)=>new nI(e,t,n);function sI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}sI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iI="https://"+R1+".supabase.co",oI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",aI=iI,lI=oI,Ut=rI(aI,lI),Iy=E.createContext({session:null,setSession:()=>{},isLoading:!0}),uI=({children:e})=>{const[t,n]=E.useState(null),[r,s]=E.useState(!0);E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:a}})=>{n(a),s(!1)});const{data:{subscription:o}}=Ut.auth.onAuthStateChange((a,l)=>{n(l)});return()=>{console.log("AUTH_DEBUG: 5. Cleanup function running."),o.unsubscribe()}},[]);const i={session:t,setSession:n,isLoading:r};return k.jsx(Iy.Provider,{value:i,children:e})},bo=()=>E.useContext(Iy),cI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),[o,a]=E.useState(null),l=jr(),{setSession:u}=bo(),c=async f=>{f.preventDefault(),i(!0),a(null);try{const{data:{session:p},error:m}=await Ut.auth.signInWithPassword({email:e,password:n});if(m)a(m.message);else if(p){u(p);const w=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(w||"/categories",{replace:!0})}}catch(p){a(p.message||"An unexpected error occurred during login.")}finally{i(!1)}};return k.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:k.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),k.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:k.jsxs("div",{className:"max-w-md mx-auto",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),k.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),k.jsx("div",{children:o&&k.jsx("p",{className:"text-red-500",children:o})}),k.jsxs("div",{className:"divide-y divide-gray-200",children:[k.jsx("form",{onSubmit:c,children:k.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:f=>t(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),k.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),k.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),k.jsx("div",{className:"relative",children:k.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:s,children:s?"Logging in...":"Login"})})]})}),k.jsxs("p",{children:["Don't have an account? ",k.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),k.jsxs("p",{children:["Forgot your password? ",k.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},dI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),i(!0),a(null);try{const{error:c}=await Ut.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{i(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Sign Up"}),o&&k.jsx("p",{style:{color:"red"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",children:"Password:"}),k.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:s,children:s?"Signing up...":"Sign Up"})]})]})},fI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(!1),[s,i]=E.useState(null),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),r(!0),i(null),a(null);try{const{error:c}=await Ut.auth.updateUser({password:e});c?i(c.message):(a("Password updated successfully!"),t(""))}catch(c){i(c.message||"An unexpected error occurred")}finally{r(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Change Password"}),s&&k.jsx("p",{style:{color:"red"},children:s}),o&&k.jsx("p",{style:{color:"green"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),k.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},hI="auth_redirect_sankeertan",pI=()=>{const e=jr(),[t]=vO(),[n,r]=E.useState(!0),[s,i]=E.useState(null),{setSession:o}=E.useContext(Iy);return E.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(f,p,m)=>{r(!0),i(null);try{let w;if(p==="invite"||p==="signup"||p==="email_change"||p==="magiclink"){const v=m;if(!v){i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}w=await Ut.auth.verifyOtp({token:f,type:p,email:v})}else if(p==="recover"){e(`/reset-password?token=${f}`,{replace:!0});return}else if(p==="sms"){const v=m;if(!v){i("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}w=await Ut.auth.verifyOtp({token:f,type:"sms",phone:v})}else{i(`Unsupported authentication type: ${p}`),r(!1),e("/login",{replace:!0});return}if(w!=null&&w.error)i(w.error.message);else{const{data:{session:v}}=await Ut.auth.getSession();v&&o(v),localStorage.setItem(hI,"true"),e("/",{replace:!0})}}catch(w){i(w.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(i("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?k.jsx("div",{children:"Verifying your account..."}):s?k.jsxs("div",{children:["Error verifying account: ",s]}):null};var Iu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ks,Cg,Qx,gI=(Qx=class{constructor(){We(this,Ks,mI);We(this,Cg,!1)}setTimeoutProvider(e){$e(this,Ks,e)}setTimeout(e,t){return G(this,Ks).setTimeout(e,t)}clearTimeout(e){G(this,Ks).clearTimeout(e)}setInterval(e,t){return G(this,Ks).setInterval(e,t)}clearInterval(e){G(this,Ks).clearInterval(e)}},Ks=new WeakMap,Cg=new WeakMap,Qx),Ki=new gI;function yI(e){setTimeout(e,0)}var ho=typeof window>"u"||"Deno"in globalThis;function Tn(){}function vI(e,t){return typeof e=="function"?e(t):e}function Rm(e){return typeof e=="number"&&e>=0&&e!==1/0}function sS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ci(e,t){return typeof e=="function"?e(t):e}function er(e,t){return typeof e=="function"?e(t):e}function Hw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==Dy(o,t.options))return!1}else if(!du(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function qw(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(cu(t.options.mutationKey)!==cu(i))return!1}else if(!du(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Dy(e,t){return((t==null?void 0:t.queryKeyHashFn)||cu)(e)}function cu(e){return JSON.stringify(e,(t,n)=>Dm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function du(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>du(e[n],t[n])):!1}var wI=Object.prototype.hasOwnProperty;function iS(e,t){if(e===t)return e;const n=Gw(e)&&Gw(t);if(!n&&!(Dm(e)&&Dm(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:i[u],f=e[c],p=t[c];if(f===p){a[c]=f,(n?u<s:wI.call(e,c))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){a[c]=p;continue}const m=iS(f,p);a[c]=m,m===f&&l++}return s===o&&l===s?e:a}function Im(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Gw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Dm(e){if(!Qw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Qw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Qw(e){return Object.prototype.toString.call(e)==="[object Object]"}function bI(e){return new Promise(t=>{Ki.setTimeout(t,e)})}function Nm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?iS(e,t):t}function xI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function _I(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Ny=Symbol();function oS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ny?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function kI(e,t){return typeof e=="function"?e(...t):!!e}var Gi,Ws,da,Yx,SI=(Yx=class extends Iu{constructor(){super();We(this,Gi);We(this,Ws);We(this,da);$e(this,da,t=>{if(!ho&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Ws)||this.setEventListener(G(this,da))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Ws))==null||t.call(this),$e(this,Ws,void 0))}setEventListener(t){var n;$e(this,da,t),(n=G(this,Ws))==null||n.call(this),$e(this,Ws,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,Gi)!==t&&($e(this,Gi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,Gi)=="boolean"?G(this,Gi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Gi=new WeakMap,Ws=new WeakMap,da=new WeakMap,Yx),Ly=new SI;function Lm(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var EI=yI;function CI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=EI;const i=a=>{t?e.push(a):s(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var tn=CI(),fa,Hs,ha,Jx,TI=(Jx=class extends Iu{constructor(){super();We(this,fa,!0);We(this,Hs);We(this,ha);$e(this,ha,t=>{if(!ho&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Hs)||this.setEventListener(G(this,ha))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Hs))==null||t.call(this),$e(this,Hs,void 0))}setEventListener(t){var n;$e(this,ha,t),(n=G(this,Hs))==null||n.call(this),$e(this,Hs,t(this.setOnline.bind(this)))}setOnline(t){G(this,fa)!==t&&($e(this,fa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,fa)}},fa=new WeakMap,Hs=new WeakMap,ha=new WeakMap,Jx),Vd=new TI;function PI(e){return Math.min(1e3*2**e,3e4)}function aS(e){return(e??"online")==="online"?Vd.isOnline():!0}var $m=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function lS(e){let t=!1,n=0,r;const s=Lm(),i=()=>s.status!=="pending",o=v=>{var x;if(!i()){const g=new $m(v);p(g),(x=e.onCancel)==null||x.call(e,g)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>Ly.isFocused()&&(e.networkMode==="always"||Vd.isOnline())&&e.canRun(),c=()=>aS(e.networkMode)&&e.canRun(),f=v=>{i()||(r==null||r(),s.resolve(v))},p=v=>{i()||(r==null||r(),s.reject(v))},m=()=>new Promise(v=>{var x;r=g=>{(i()||u())&&v(g)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;r=void 0,i()||(v=e.onContinue)==null||v.call(e)}),w=()=>{if(i())return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var R;if(i())return;const y=e.retry??(ho?0:3),_=e.retryDelay??PI,T=typeof _=="function"?_(n,g):_,j=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!j){p(g);return}n++,(R=e.onFail)==null||R.call(e,n,g),bI(T).then(()=>u()?void 0:m()).then(()=>{t?p(g):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?w():m().then(w),s)}}var Qi,Zx,uS=(Zx=class{constructor(){We(this,Qi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rm(this.gcTime)&&$e(this,Qi,Ki.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ho?1/0:5*60*1e3))}clearGcTimeout(){G(this,Qi)&&(Ki.clearTimeout(G(this,Qi)),$e(this,Qi,void 0))}},Qi=new WeakMap,Zx),Yi,pa,Xn,Ji,Qt,vu,Zi,br,ns,Xx,AI=(Xx=class extends uS{constructor(t){super();We(this,br);We(this,Yi);We(this,pa);We(this,Xn);We(this,Ji);We(this,Qt);We(this,vu);We(this,Zi);$e(this,Zi,!1),$e(this,vu,t.defaultOptions),this.setOptions(t.options),this.observers=[],$e(this,Ji,t.client),$e(this,Xn,G(this,Ji).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,$e(this,Yi,Yw(this.options)),this.state=t.state??G(this,Yi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,Qt))==null?void 0:t.promise}setOptions(t){if(this.options={...G(this,vu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Yw(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),$e(this,Yi,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,Xn).remove(this)}setData(t,n){const r=Nm(this.state.data,t,this.options);return at(this,br,ns).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){at(this,br,ns).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=G(this,Qt))==null?void 0:r.promise;return(s=G(this,Qt))==null||s.cancel(t),n?n.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Yi))}isActive(){return this.observers.some(t=>er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ny||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ci(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!sS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,Qt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,Qt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,Xn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,Qt)&&(G(this,Zi)?G(this,Qt).cancel({revert:!0}):G(this,Qt).cancelRetry()),this.scheduleGc()),G(this,Xn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||at(this,br,ns).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,f,p,m,w,v,x,g,y,_;if(this.state.fetchStatus!=="idle"&&((l=G(this,Qt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,Qt))return G(this,Qt).continueRetry(),G(this,Qt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(j=>j.options.queryFn);T&&this.setOptions(T.options)}const r=new AbortController,s=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>($e(this,Zi,!0),r.signal)})},i=()=>{const T=oS(this.options,n),R=(()=>{const I={client:G(this,Ji),queryKey:this.queryKey,meta:this.meta};return s(I),I})();return $e(this,Zi,!1),this.options.persister?this.options.persister(T,R,this):T(R)},a=(()=>{const T={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:G(this,Ji),state:this.state,fetchFn:i};return s(T),T})();(u=this.options.behavior)==null||u.onFetch(a,this),$e(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&at(this,br,ns).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),$e(this,Qt,lS({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:T=>{T instanceof $m&&T.revert&&this.setState({...G(this,pa),fetchStatus:"idle"}),r.abort()},onFail:(T,j)=>{at(this,br,ns).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{at(this,br,ns).call(this,{type:"pause"})},onContinue:()=>{at(this,br,ns).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const T=await G(this,Qt).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(m=(p=G(this,Xn).config).onSuccess)==null||m.call(p,T,this),(v=(w=G(this,Xn).config).onSettled)==null||v.call(w,T,this.state.error,this),T}catch(T){if(T instanceof $m){if(T.silent)return G(this,Qt).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw at(this,br,ns).call(this,{type:"error",error:T}),(g=(x=G(this,Xn).config).onError)==null||g.call(x,T,this),(_=(y=G(this,Xn).config).onSettled)==null||_.call(y,this.state.data,T,this),T}finally{this.scheduleGc()}}},Yi=new WeakMap,pa=new WeakMap,Xn=new WeakMap,Ji=new WeakMap,Qt=new WeakMap,vu=new WeakMap,Zi=new WeakMap,br=new WeakSet,ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...cS(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return $e(this,pa,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,Xn).notify({query:this,type:"updated",action:t})})},Xx);function cS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Yw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var En,lt,wu,yn,Xi,ma,os,qs,bu,ga,ya,eo,to,Gs,va,dt,wl,Mm,Fm,Bm,Um,zm,Vm,Km,dS,e_,OI=(e_=class extends Iu{constructor(t,n){super();We(this,dt);We(this,En);We(this,lt);We(this,wu);We(this,yn);We(this,Xi);We(this,ma);We(this,os);We(this,qs);We(this,bu);We(this,ga);We(this,ya);We(this,eo);We(this,to);We(this,Gs);We(this,va,new Set);this.options=n,$e(this,En,t),$e(this,qs,null),$e(this,os,Lm()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,lt).addObserver(this),Jw(G(this,lt),this.options)?at(this,dt,wl).call(this):this.updateResult(),at(this,dt,Um).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wm(G(this,lt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wm(G(this,lt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,at(this,dt,zm).call(this),at(this,dt,Vm).call(this),G(this,lt).removeObserver(this)}setOptions(t){const n=this.options,r=G(this,lt);if(this.options=G(this,En).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof er(this.options.enabled,G(this,lt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");at(this,dt,Km).call(this),G(this,lt).setOptions(this.options),n._defaulted&&!Im(this.options,n)&&G(this,En).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,lt),observer:this});const s=this.hasListeners();s&&Zw(G(this,lt),r,this.options,n)&&at(this,dt,wl).call(this),this.updateResult(),s&&(G(this,lt)!==r||er(this.options.enabled,G(this,lt))!==er(n.enabled,G(this,lt))||ci(this.options.staleTime,G(this,lt))!==ci(n.staleTime,G(this,lt)))&&at(this,dt,Mm).call(this);const i=at(this,dt,Fm).call(this);s&&(G(this,lt)!==r||er(this.options.enabled,G(this,lt))!==er(n.enabled,G(this,lt))||i!==G(this,Gs))&&at(this,dt,Bm).call(this,i)}getOptimisticResult(t){const n=G(this,En).getQueryCache().build(G(this,En),t),r=this.createResult(n,t);return RI(this,r)&&($e(this,yn,r),$e(this,ma,this.options),$e(this,Xi,G(this,lt).state)),r}getCurrentResult(){return G(this,yn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&G(this,os).status==="pending"&&G(this,os).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){G(this,va).add(t)}getCurrentQuery(){return G(this,lt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=G(this,En).defaultQueryOptions(t),r=G(this,En).getQueryCache().build(G(this,En),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return at(this,dt,wl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,yn)))}createResult(t,n){var U;const r=G(this,lt),s=this.options,i=G(this,yn),o=G(this,Xi),a=G(this,ma),u=t!==r?t.state:G(this,wu),{state:c}=t;let f={...c},p=!1,m;if(n._optimisticResults){const K=this.hasListeners(),me=!K&&Jw(t,n),M=K&&Zw(t,r,n,s);(me||M)&&(f={...f,...cS(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:x}=f;m=f.data;let g=!1;if(n.placeholderData!==void 0&&m===void 0&&x==="pending"){let K;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(K=i.data,g=!0):K=typeof n.placeholderData=="function"?n.placeholderData((U=G(this,ya))==null?void 0:U.state.data,G(this,ya)):n.placeholderData,K!==void 0&&(x="success",m=Nm(i==null?void 0:i.data,K,n),p=!0)}if(n.select&&m!==void 0&&!g)if(i&&m===(o==null?void 0:o.data)&&n.select===G(this,bu))m=G(this,ga);else try{$e(this,bu,n.select),m=n.select(m),m=Nm(i==null?void 0:i.data,m,n),$e(this,ga,m),$e(this,qs,null)}catch(K){$e(this,qs,K)}G(this,qs)&&(w=G(this,qs),m=G(this,ga),v=Date.now(),x="error");const y=f.fetchStatus==="fetching",_=x==="pending",T=x==="error",j=_&&y,R=m!==void 0,$={status:x,fetchStatus:f.fetchStatus,isPending:_,isSuccess:x==="success",isError:T,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!_,isLoadingError:T&&!R,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&R,isStale:$y(t,n),refetch:this.refetch,promise:G(this,os),isEnabled:er(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const K=re=>{$.status==="error"?re.reject($.error):$.data!==void 0&&re.resolve($.data)},me=()=>{const re=$e(this,os,$.promise=Lm());K(re)},M=G(this,os);switch(M.status){case"pending":t.queryHash===r.queryHash&&K(M);break;case"fulfilled":($.status==="error"||$.data!==M.value)&&me();break;case"rejected":($.status!=="error"||$.error!==M.reason)&&me();break}}return $}updateResult(){const t=G(this,yn),n=this.createResult(G(this,lt),this.options);if($e(this,Xi,G(this,lt).state),$e(this,ma,this.options),G(this,Xi).data!==void 0&&$e(this,ya,G(this,lt)),Im(n,t))return;$e(this,yn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!G(this,va).size)return!0;const o=new Set(i??G(this,va));return this.options.throwOnError&&o.add("error"),Object.keys(G(this,yn)).some(a=>{const l=a;return G(this,yn)[l]!==t[l]&&o.has(l)})};at(this,dt,dS).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&at(this,dt,Um).call(this)}},En=new WeakMap,lt=new WeakMap,wu=new WeakMap,yn=new WeakMap,Xi=new WeakMap,ma=new WeakMap,os=new WeakMap,qs=new WeakMap,bu=new WeakMap,ga=new WeakMap,ya=new WeakMap,eo=new WeakMap,to=new WeakMap,Gs=new WeakMap,va=new WeakMap,dt=new WeakSet,wl=function(t){at(this,dt,Km).call(this);let n=G(this,lt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tn)),n},Mm=function(){at(this,dt,zm).call(this);const t=ci(this.options.staleTime,G(this,lt));if(ho||G(this,yn).isStale||!Rm(t))return;const r=sS(G(this,yn).dataUpdatedAt,t)+1;$e(this,eo,Ki.setTimeout(()=>{G(this,yn).isStale||this.updateResult()},r))},Fm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,lt)):this.options.refetchInterval)??!1},Bm=function(t){at(this,dt,Vm).call(this),$e(this,Gs,t),!(ho||er(this.options.enabled,G(this,lt))===!1||!Rm(G(this,Gs))||G(this,Gs)===0)&&$e(this,to,Ki.setInterval(()=>{(this.options.refetchIntervalInBackground||Ly.isFocused())&&at(this,dt,wl).call(this)},G(this,Gs)))},Um=function(){at(this,dt,Mm).call(this),at(this,dt,Bm).call(this,at(this,dt,Fm).call(this))},zm=function(){G(this,eo)&&(Ki.clearTimeout(G(this,eo)),$e(this,eo,void 0))},Vm=function(){G(this,to)&&(Ki.clearInterval(G(this,to)),$e(this,to,void 0))},Km=function(){const t=G(this,En).getQueryCache().build(G(this,En),this.options);if(t===G(this,lt))return;const n=G(this,lt);$e(this,lt,t),$e(this,wu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},dS=function(t){tn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(G(this,yn))}),G(this,En).getQueryCache().notify({query:G(this,lt),type:"observerResultsUpdated"})})},e_);function jI(e,t){return er(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jw(e,t){return jI(e,t)||e.state.data!==void 0&&Wm(e,t,t.refetchOnMount)}function Wm(e,t,n){if(er(t.enabled,e)!==!1&&ci(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&$y(e,t)}return!1}function Zw(e,t,n,r){return(e!==t||er(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&$y(e,n)}function $y(e,t){return er(t.enabled,e)!==!1&&e.isStaleByTime(ci(t.staleTime,e))}function RI(e,t){return!Im(e.getCurrentResult(),t)}function Xw(e){return{onFetch:(t,n)=>{var c,f,p,m,w;const r=t.options,s=(p=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=oS(t.options,t.fetchOptions),y=async(_,T,j)=>{if(v)return Promise.reject();if(T==null&&_.pages.length)return Promise.resolve(_);const I=(()=>{const me={client:t.client,queryKey:t.queryKey,pageParam:T,direction:j?"backward":"forward",meta:t.options.meta};return x(me),me})(),$=await g(I),{maxPages:U}=t.options,K=j?_I:xI;return{pages:K(_.pages,$,U),pageParams:K(_.pageParams,T,U)}};if(s&&i.length){const _=s==="backward",T=_?II:eb,j={pages:i,pageParams:o},R=T(r,j);a=await y(j,R,_)}else{const _=e??i.length;do{const T=l===0?o[0]??r.initialPageParam:eb(r,a);if(l>0&&T==null)break;a=await y(a,T),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function eb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function II(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var xu,Br,vn,no,Ur,Ns,t_,DI=(t_=class extends uS{constructor(t){super();We(this,Ur);We(this,xu);We(this,Br);We(this,vn);We(this,no);$e(this,xu,t.client),this.mutationId=t.mutationId,$e(this,vn,t.mutationCache),$e(this,Br,[]),this.state=t.state||NI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,Br).includes(t)||(G(this,Br).push(t),this.clearGcTimeout(),G(this,vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){$e(this,Br,G(this,Br).filter(n=>n!==t)),this.scheduleGc(),G(this,vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,Br).length||(this.state.status==="pending"?this.scheduleGc():G(this,vn).remove(this))}continue(){var t;return((t=G(this,no))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,f,p,m,w,v,x,g,y,_,T,j,R,I,$,U;const n=()=>{at(this,Ur,Ns).call(this,{type:"continue"})},r={client:G(this,xu),meta:this.options.meta,mutationKey:this.options.mutationKey};$e(this,no,lS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(K,me)=>{at(this,Ur,Ns).call(this,{type:"failed",failureCount:K,error:me})},onPause:()=>{at(this,Ur,Ns).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,vn).canRun(this)}));const s=this.state.status==="pending",i=!G(this,no).canStart();try{if(s)n();else{at(this,Ur,Ns).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=G(this,vn).config).onMutate)==null?void 0:a.call(o,t,this,r));const me=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));me!==this.state.context&&at(this,Ur,Ns).call(this,{type:"pending",context:me,variables:t,isPaused:i})}const K=await G(this,no).start();return await((f=(c=G(this,vn).config).onSuccess)==null?void 0:f.call(c,K,t,this.state.context,this,r)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,K,t,this.state.context,r)),await((v=(w=G(this,vn).config).onSettled)==null?void 0:v.call(w,K,null,this.state.variables,this.state.context,this,r)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,K,null,t,this.state.context,r)),at(this,Ur,Ns).call(this,{type:"success",data:K}),K}catch(K){try{throw await((_=(y=G(this,vn).config).onError)==null?void 0:_.call(y,K,t,this.state.context,this,r)),await((j=(T=this.options).onError)==null?void 0:j.call(T,K,t,this.state.context,r)),await((I=(R=G(this,vn).config).onSettled)==null?void 0:I.call(R,void 0,K,this.state.variables,this.state.context,this,r)),await((U=($=this.options).onSettled)==null?void 0:U.call($,void 0,K,t,this.state.context,r)),K}finally{at(this,Ur,Ns).call(this,{type:"error",error:K})}}finally{G(this,vn).runNext(this)}}},xu=new WeakMap,Br=new WeakMap,vn=new WeakMap,no=new WeakMap,Ur=new WeakSet,Ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tn.batch(()=>{G(this,Br).forEach(r=>{r.onMutationUpdate(t)}),G(this,vn).notify({mutation:this,type:"updated",action:t})})},t_);function NI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var as,xr,_u,n_,LI=(n_=class extends Iu{constructor(t={}){super();We(this,as);We(this,xr);We(this,_u);this.config=t,$e(this,as,new Set),$e(this,xr,new Map),$e(this,_u,0)}build(t,n,r){const s=new DI({client:t,mutationCache:this,mutationId:++gc(this,_u)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){G(this,as).add(t);const n=Mc(t);if(typeof n=="string"){const r=G(this,xr).get(n);r?r.push(t):G(this,xr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(G(this,as).delete(t)){const n=Mc(t);if(typeof n=="string"){const r=G(this,xr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&G(this,xr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Mc(t);if(typeof n=="string"){const r=G(this,xr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Mc(t);if(typeof n=="string"){const s=(r=G(this,xr).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tn.batch(()=>{G(this,as).forEach(t=>{this.notify({type:"removed",mutation:t})}),G(this,as).clear(),G(this,xr).clear()})}getAll(){return Array.from(G(this,as))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qw(n,r))}findAll(t={}){return this.getAll().filter(n=>qw(t,n))}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tn))))}},as=new WeakMap,xr=new WeakMap,_u=new WeakMap,n_);function Mc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var zr,r_,$I=(r_=class extends Iu{constructor(t={}){super();We(this,zr);this.config=t,$e(this,zr,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Dy(s,n);let o=this.get(i);return o||(o=new AI({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){G(this,zr).has(t.queryHash)||(G(this,zr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,zr).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,zr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,zr).get(t)}getAll(){return[...G(this,zr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Hw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Hw(t,r)):n}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zr=new WeakMap,r_),At,Qs,Ys,wa,ba,Js,xa,_a,s_,MI=(s_=class{constructor(e={}){We(this,At);We(this,Qs);We(this,Ys);We(this,wa);We(this,ba);We(this,Js);We(this,xa);We(this,_a);$e(this,At,e.queryCache||new $I),$e(this,Qs,e.mutationCache||new LI),$e(this,Ys,e.defaultOptions||{}),$e(this,wa,new Map),$e(this,ba,new Map),$e(this,Js,0)}mount(){gc(this,Js)._++,G(this,Js)===1&&($e(this,xa,Ly.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,At).onFocus())})),$e(this,_a,Vd.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,At).onOnline())})))}unmount(){var e,t;gc(this,Js)._--,G(this,Js)===0&&((e=G(this,xa))==null||e.call(this),$e(this,xa,void 0),(t=G(this,_a))==null||t.call(this),$e(this,_a,void 0))}isFetching(e){return G(this,At).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,Qs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,At).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=G(this,At).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ci(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return G(this,At).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=G(this,At).get(r.queryHash),i=s==null?void 0:s.state.data,o=vI(t,i);if(o!==void 0)return G(this,At).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return tn.batch(()=>G(this,At).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,At).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,At);tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,At);return tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=tn.batch(()=>G(this,At).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(e,t={}){return tn.batch(()=>(G(this,At).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=tn.batch(()=>G(this,At).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,At).build(this,t);return n.isStaleByTime(ci(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tn).catch(Tn)}fetchInfiniteQuery(e){return e.behavior=Xw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tn).catch(Tn)}ensureInfiniteQueryData(e){return e.behavior=Xw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vd.isOnline()?G(this,Qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,At)}getMutationCache(){return G(this,Qs)}getDefaultOptions(){return G(this,Ys)}setDefaultOptions(e){$e(this,Ys,e)}setQueryDefaults(e,t){G(this,wa).set(cu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,wa).values()],n={};return t.forEach(r=>{du(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){G(this,ba).set(cu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,ba).values()],n={};return t.forEach(r=>{du(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,Ys).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Dy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ny&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,Ys).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,At).clear(),G(this,Qs).clear()}},At=new WeakMap,Qs=new WeakMap,Ys=new WeakMap,wa=new WeakMap,ba=new WeakMap,Js=new WeakMap,xa=new WeakMap,_a=new WeakMap,s_),fS=E.createContext(void 0),Du=e=>{const t=E.useContext(fS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},FI=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),k.jsx(fS.Provider,{value:e,children:t})),hS=E.createContext(!1),BI=()=>E.useContext(hS);hS.Provider;function UI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var zI=E.createContext(UI()),VI=()=>E.useContext(zI),KI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},WI=e=>{E.useEffect(()=>{e.clearReset()},[e])},HI=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||kI(n,[e.error,r])),qI=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},GI=(e,t)=>e.isLoading&&e.isFetching&&!t,QI=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,tb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function YI(e,t,n){var f,p,m,w,v;const r=BI(),s=VI(),i=Du(),o=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",qI(o),KI(o,s),WI(s);const a=!i.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(x=>{const g=c?l.subscribe(tn.batchCalls(x)):Tn;return l.updateResult(),g},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o)},[o,l]),QI(o,u))throw tb(o,l,s);if(HI({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||w.call(m,o,u),o.experimental_prefetchInRender&&!ho&&GI(u,r)){const x=a?tb(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;x==null||x.catch(Tn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Tf(e,t){return YI(e,OI)}var pS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(b[C]=S[C])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,b=1,S=arguments.length;b<S;b++)for(var C in h=arguments[b])Object.prototype.hasOwnProperty.call(h,C)&&(d[C]=h[C]);return d}).apply(this,arguments)};function s(d,h,b){for(var S,C=0,O=h.length;C<O;C++)!S&&C in h||((S=S||Array.prototype.slice.call(h,0,C))[C]=h[C]);return d.concat(S||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jt,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(b){d[b]=h[b]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(d,h){return c.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(b){w(d,b,h[b])})}var m=Object.defineProperty;function w(d,h,b,S){m(d,h,l(b&&f(b,"get")&&typeof b.get=="function"?{get:b.get,set:b.set,configurable:!0}:{value:b,configurable:!0,writable:!0},S))}function v(d){return{from:function(h){return d.prototype=Object.create(h.prototype),w(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var x=Object.getOwnPropertyDescriptor,g=[].slice;function y(d,h,b){return g.call(d,h,b)}function _(d,h){return h(d)}function T(d){if(!d)throw new Error("Assertion Failed")}function j(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function R(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var b=[],S=0,C=h.length;S<C;++S){var O=R(d,h[S]);b.push(O)}return b}var D=h.indexOf(".");if(D!==-1){var B=d[h.substr(0,D)];return B==null?void 0:R(B,h.substr(D+1))}}function I(d,h,b){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){T(typeof b!="string"&&"length"in b);for(var S=0,C=h.length;S<C;++S)I(d,h[S],b[S])}else{var O,D,B=h.indexOf(".");B!==-1?(O=h.substr(0,B),(D=h.substr(B+1))===""?b===void 0?a(d)&&!isNaN(parseInt(O))?d.splice(O,1):delete d[O]:d[O]=b:I(B=!(B=d[O])||!f(d,O)?d[O]={}:B,D,b)):b===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=b}}function $(d){var h,b={};for(h in d)f(d,h)&&(b[h]=d[h]);return b}var U=[].concat;function K(d){return U.apply([],d)}var Be="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(K([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),me=new Set(Be.map(function(d){return i[d]})),M=null;function re(d){return M=new WeakMap,d=function h(b){if(!b||typeof b!="object")return b;var S=M.get(b);if(S)return S;if(a(b)){S=[],M.set(b,S);for(var C=0,O=b.length;C<O;++C)S.push(h(b[C]))}else if(me.has(b.constructor))S=b;else{var D,B=u(b);for(D in S=B===Object.prototype?{}:Object.create(B),M.set(b,S),b)f(b,D)&&(S[D]=h(b[D]))}return S}(d),M=null,d}var A={}.toString;function Y(d){return A.call(d).slice(8,-1)}var ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ae=typeof ve=="symbol"?function(d){var h;return d!=null&&(h=d[ve])&&h.apply(d)}:function(){return null};function ue(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var L={};function se(d){var h,b,S,C;if(arguments.length===1){if(a(d))return d.slice();if(this===L&&typeof d=="string")return[d];if(C=ae(d)){for(b=[];!(S=C.next()).done;)b.push(S.value);return b}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(b=new Array(h);h--;)b[h]=d[h];return b}for(h=arguments.length,b=new Array(h);h--;)b[h]=arguments[h];return b}var V=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ke=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ke),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function he(d,h){this.name=d,this.message=h}function ye(d,h){return d+". Errors: "+Object.keys(h).map(function(b){return h[b].toString()}).filter(function(b,S,C){return C.indexOf(b)===S}).join(`
`)}function ce(d,h,b,S){this.failures=h,this.failedKeys=S,this.successCount=b,this.message=ye(d,h)}function Re(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(b){return h[b]}),this.failuresByPos=h,this.message=ye(d,this.failures)}v(he).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(ce).from(he),v(Re).from(he);var Ue=Qn.reduce(function(d,h){return d[h]=h+"Error",d},{}),De=he,ge=Qn.reduce(function(d,h){var b=h+"Error";function S(C,O){this.name=b,C?typeof C=="string"?(this.message="".concat(C).concat(O?`
 `+O:""),this.inner=O||null):typeof C=="object"&&(this.message="".concat(C.name," ").concat(C.message),this.inner=C):(this.message=W[h]||b,this.inner=null)}return v(S).from(De),d[h]=S,d},{});ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError;var Je=ke.reduce(function(d,h){return d[h+"Error"]=ge[h],d},{}),tt=Qn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=ge[h]),d},{});function Ke(){}function Pt(d){return d}function P(d,h){return d==null||d===Pt?h:function(b){return h(d(b))}}function pe(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function de(d,h){return d===Ke?h:function(){var b=d.apply(this,arguments);b!==void 0&&(arguments[0]=b);var S=this.onsuccess,C=this.onerror;this.onsuccess=null,this.onerror=null;var O=h.apply(this,arguments);return S&&(this.onsuccess=this.onsuccess?pe(S,this.onsuccess):S),C&&(this.onerror=this.onerror?pe(C,this.onerror):C),O!==void 0?O:b}}function F(d,h){return d===Ke?h:function(){d.apply(this,arguments);var b=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?pe(b,this.onsuccess):b),S&&(this.onerror=this.onerror?pe(S,this.onerror):S)}}function N(d,h){return d===Ke?h:function(b){var S=d.apply(this,arguments);l(b,S);var C=this.onsuccess,O=this.onerror;return this.onsuccess=null,this.onerror=null,b=h.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?pe(C,this.onsuccess):C),O&&(this.onerror=this.onerror?pe(O,this.onerror):O),S===void 0?b===void 0?void 0:b:l(S,b)}}function ee(d,h){return d===Ke?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function we(d,h){return d===Ke?h:function(){var b=d.apply(this,arguments);if(b&&typeof b.then=="function"){for(var S=this,C=arguments.length,O=new Array(C);C--;)O[C]=arguments[C];return b.then(function(){return h.apply(S,O)})}return h.apply(this,arguments)}}tt.ModifyError=ce,tt.DexieError=he,tt.BulkError=Re;var be=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(d){be=d}var _e={},Ne=100,Be=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,u(h),d]}(),ke=Be[0],Qn=Be[1],Be=Be[2],Qn=Qn&&Qn.then,rt=ke&&ke.constructor,Ze=!!Be,Rt=function(d,h){hr.push([d,h]),Ie&&(queueMicrotask(eT),Ie=!1)},qn=!0,Ie=!0,ze=[],Xe=[],sn=Pt,Ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ke,pgp:!1,env:{},finalize:Ke},Le=Ht,hr=[],Gn=0,Es=[];function Te(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Le;if(typeof d!="function"){if(d!==_e)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pr(this,this._value))}this._state=null,this._value=null,++h.ref,function b(S,C){try{C(function(O){if(S._state===null){if(O===S)throw new TypeError("A promise cannot be resolved with itself.");var D=S._lib&&_o();O&&typeof O.then=="function"?b(S,function(B,H){O instanceof Te?O._then(B,H):O.then(B,H)}):(S._state=!0,S._value=O,Rv(S)),D&&ko()}},pr.bind(null,S))}catch(O){pr(S,O)}}(this,d)}var Jr={get:function(){var d=Le,h=Yu;function b(S,C){var O=this,D=!d.global&&(d!==Le||h!==Yu),B=D&&!Ts(),H=new Te(function(q,X){Wf(O,new Rr(Dv(S,d,D,B),Dv(C,d,D,B),q,X,d))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return b.prototype=_e,b},set:function(d){w(this,"then",d&&d.prototype===_e?Jr:{get:function(){return d},set:Jr.set})}};function Rr(d,h,b,S,C){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=b,this.reject=S,this.psd=C}function pr(d,h){var b,S;Xe.push(h),d._state===null&&(b=d._lib&&_o(),h=sn(h),d._state=!1,d._value=h,S=d,ze.some(function(C){return C._value===S._value})||ze.push(S),Rv(d),b&&ko())}function Rv(d){var h=d._listeners;d._listeners=[];for(var b=0,S=h.length;b<S;++b)Wf(d,h[b]);var C=d._PSD;--C.ref||C.finalize(),Gn===0&&(++Gn,Rt(function(){--Gn==0&&Hf()},[]))}function Wf(d,h){if(d._state!==null){var b=d._state?h.onFulfilled:h.onRejected;if(b===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,Rt(XC,[b,d,h])}else d._listeners.push(h)}function XC(d,h,b){try{var S,C=h._value;!h._state&&Xe.length&&(Xe=[]),S=be&&h._consoleTask?h._consoleTask.run(function(){return d(C)}):d(C),h._state||Xe.indexOf(C)!==-1||function(O){for(var D=ze.length;D;)if(ze[--D]._value===O._value)return ze.splice(D,1)}(h),b.resolve(S)}catch(O){b.reject(O)}finally{--Gn==0&&Hf(),--b.psd.ref||b.psd.finalize()}}function eT(){_i(Ht,function(){_o()&&ko()})}function _o(){var d=qn;return Ie=qn=!1,d}function ko(){var d,h,b;do for(;0<hr.length;)for(d=hr,hr=[],b=d.length,h=0;h<b;++h){var S=d[h];S[0].apply(null,S[1])}while(0<hr.length);Ie=qn=!0}function Hf(){var d=ze;ze=[],d.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)});for(var h=Es.slice(0),b=h.length;b;)h[--b]()}function qu(d){return new Te(_e,!1,d)}function wt(d,h){var b=Le;return function(){var S=_o(),C=Le;try{return Ps(b,!0),d.apply(this,arguments)}catch(O){h&&h(O)}finally{Ps(C,!1),S&&ko()}}}p(Te.prototype,{then:Jr,_then:function(d,h){Wf(this,new Rr(null,null,d,h,Le))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,b=arguments[1];return typeof h=="function"?this.then(null,function(S){return(S instanceof h?b:qu)(S)}):this.then(null,function(S){return(S&&S.name===h?b:qu)(S)})},finally:function(d){return this.then(function(h){return Te.resolve(d()).then(function(){return h})},function(h){return Te.resolve(d()).then(function(){return qu(h)})})},timeout:function(d,h){var b=this;return d<1/0?new Te(function(S,C){var O=setTimeout(function(){return C(new ge.Timeout(h))},d);b.then(S,C).finally(clearTimeout.bind(null,O))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Ht.env=Iv(),p(Te,{all:function(){var d=se.apply(null,arguments).map(Ju);return new Te(function(h,b){d.length===0&&h([]);var S=d.length;d.forEach(function(C,O){return Te.resolve(C).then(function(D){d[O]=D,--S||h(d)},b)})})},resolve:function(d){return d instanceof Te?d:d&&typeof d.then=="function"?new Te(function(h,b){d.then(h,b)}):new Te(_e,!0,d)},reject:qu,race:function(){var d=se.apply(null,arguments).map(Ju);return new Te(function(h,b){d.map(function(S){return Te.resolve(S).then(h,b)})})},PSD:{get:function(){return Le},set:function(d){return Le=d}},totalEchoes:{get:function(){return Yu}},newPSD:Cs,usePSD:_i,scheduler:{get:function(){return Rt},set:function(d){Rt=d}},rejectionMapper:{get:function(){return sn},set:function(d){sn=d}},follow:function(d,h){return new Te(function(b,S){return Cs(function(C,O){var D=Le;D.unhandleds=[],D.onunhandled=O,D.finalize=pe(function(){var B,H=this;B=function(){H.unhandleds.length===0?C():O(H.unhandleds[0])},Es.push(function q(){B(),Es.splice(Es.indexOf(q),1)}),++Gn,Rt(function(){--Gn==0&&Hf()},[])},D.finalize),d()},h,b,S)})}}),rt&&(rt.allSettled&&w(Te,"allSettled",function(){var d=se.apply(null,arguments).map(Ju);return new Te(function(h){d.length===0&&h([]);var b=d.length,S=new Array(b);d.forEach(function(C,O){return Te.resolve(C).then(function(D){return S[O]={status:"fulfilled",value:D}},function(D){return S[O]={status:"rejected",reason:D}}).then(function(){return--b||h(S)})})})}),rt.any&&typeof AggregateError<"u"&&w(Te,"any",function(){var d=se.apply(null,arguments).map(Ju);return new Te(function(h,b){d.length===0&&b(new AggregateError([]));var S=d.length,C=new Array(S);d.forEach(function(O,D){return Te.resolve(O).then(function(B){return h(B)},function(B){C[D]=B,--S||b(new AggregateError(C))})})})}),rt.withResolvers&&(Te.withResolvers=rt.withResolvers));var qt={awaits:0,echoes:0,id:0},tT=0,Gu=[],Qu=0,Yu=0,nT=0;function Cs(d,h,b,S){var C=Le,O=Object.create(C);return O.parent=C,O.ref=0,O.global=!1,O.id=++nT,Ht.env,O.env=Ze?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},h&&l(O,h),++C.ref,O.finalize=function(){--this.parent.ref||this.parent.finalize()},S=_i(O,d,b,S),O.ref===0&&O.finalize(),S}function So(){return qt.id||(qt.id=++tT),++qt.awaits,qt.echoes+=Ne,qt.id}function Ts(){return!!qt.awaits&&(--qt.awaits==0&&(qt.id=0),qt.echoes=qt.awaits*Ne,!0)}function Ju(d){return qt.echoes&&d&&d.constructor===rt?(So(),d.then(function(h){return Ts(),h},function(h){return Ts(),It(h)})):d}function rT(){var d=Gu[Gu.length-1];Gu.pop(),Ps(d,!1)}function Ps(d,h){var b,S=Le;(h?!qt.echoes||Qu++&&d===Le:!Qu||--Qu&&d===Le)||queueMicrotask(h?(function(C){++Yu,qt.echoes&&--qt.echoes!=0||(qt.echoes=qt.awaits=qt.id=0),Gu.push(Le),Ps(C,!0)}).bind(null,d):rT),d!==Le&&(Le=d,S===Ht&&(Ht.env=Iv()),Ze&&(b=Ht.env.Promise,h=d.env,(S.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),b.all=h.all,b.race=h.race,b.resolve=h.resolve,b.reject=h.reject,h.allSettled&&(b.allSettled=h.allSettled),h.any&&(b.any=h.any))))}function Iv(){var d=i.Promise;return Ze?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function _i(d,h,b,S,C){var O=Le;try{return Ps(d,!0),h(b,S,C)}finally{Ps(O,!1)}}function Dv(d,h,b,S){return typeof d!="function"?d:function(){var C=Le;b&&So(),Ps(h,!0);try{return d.apply(this,arguments)}finally{Ps(C,!1),S&&queueMicrotask(Ts)}}}function qf(d){Promise===rt&&qt.echoes===0?Qu===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Qn).indexOf("[native code]")===-1&&(So=Ts=Ke);var It=Te.reject,ki="",Zr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Nv="String expected.",Eo=[],Zu="__dbnames",Gf="readonly",Qf="readwrite";function Si(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var Lv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Xu(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=re(h))[d],h}}function $v(){throw ge.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ot(d,h){try{var b=Mv(d),S=Mv(h);if(b!==S)return b==="Array"?1:S==="Array"?-1:b==="binary"?1:S==="binary"?-1:b==="string"?1:S==="string"?-1:b==="Date"?1:S!=="Date"?NaN:-1;switch(b){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return function(C,O){for(var D=C.length,B=O.length,H=D<B?D:B,q=0;q<H;++q)if(C[q]!==O[q])return C[q]<O[q]?-1:1;return D===B?0:D<B?-1:1}(Fv(d),Fv(h));case"Array":return function(C,O){for(var D=C.length,B=O.length,H=D<B?D:B,q=0;q<H;++q){var X=ot(C[q],O[q]);if(X!==0)return X}return D===B?0:D<B?-1:1}(d,h)}}catch{}return NaN}function Mv(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=Y(d),d==="ArrayBuffer"?"binary":d)}function Fv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function ec(d,h,b){var S=d.schema.yProps;return S?(h&&0<b.numFailures&&(h=h.filter(function(C,O){return!b.failures[O]})),Promise.all(S.map(function(C){return C=C.updatesTable,h?d.db.table(C).where("k").anyOf(h).delete():d.db.table(C).clear()})).then(function(){return b})):b}var Wa=(Bv.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var b=h.add;if(a(b))return s(s([],a(d)?d:[],!0),b).sort();if(typeof b=="number")return(Number(d)||0)+b;if(typeof b=="bigint")try{return BigInt(d)+b}catch{return BigInt(0)+b}throw new TypeError("Invalid term ".concat(b))}if(h.remove!==void 0){var S=h.remove;if(a(S))return a(d)?d.filter(function(C){return!S.includes(C)}).sort():[];if(typeof S=="number")return Number(d)-S;if(typeof S=="bigint")try{return BigInt(d)-S}catch{return BigInt(0)-S}throw new TypeError("Invalid subtrahend ".concat(S))}return b=(b=h.replacePrefix)===null||b===void 0?void 0:b[0],b&&typeof d=="string"&&d.startsWith(b)?h.replacePrefix[1]+d.substring(b.length):d},Bv);function Bv(d){this["@@propmod"]=d}function Uv(d,h){for(var b=o(h),S=b.length,C=!1,O=0;O<S;++O){var D=b[O],B=h[D],H=R(d,D);B instanceof Wa?(I(d,D,B.execute(H)),C=!0):H!==B&&(I(d,D,B),C=!0)}return C}var zv=(pt.prototype._trans=function(d,h,b){var S=this._tx||Le.trans,C=this.name,O=be&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function D(q,X,z){if(!z.schema[C])throw new ge.NotFound("Table "+C+" not part of transaction");return h(z.idbtrans,z)}var B=_o();try{var H=S&&S.db._novip===this.db._novip?S===Le.trans?S._promise(d,D,b):Cs(function(){return S._promise(d,D,b)},{trans:S,transless:Le.transless||Le}):function q(X,z,ne,Q){if(X.idbdb&&(X._state.openComplete||Le.letThrough||X._vip)){var J=X._createTransaction(z,ne,X._dbSchema);try{J.create(),X._state.PR1398_maxLoop=3}catch(Z){return Z.name===Ue.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return q(X,z,ne,Q)})):It(Z)}return J._promise(z,function(Z,te){return Cs(function(){return Le.trans=J,Q(Z,te,J)})}).then(function(Z){if(z==="readwrite")try{J.idbtrans.commit()}catch{}return z==="readonly"?Z:J._completion.then(function(){return Z})})}if(X._state.openComplete)return It(new ge.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return It(new ge.DatabaseClosed);X.open().catch(Ke)}return X._state.dbReadyPromise.then(function(){return q(X,z,ne,Q)})}(this.db,d,[this.name],D);return O&&(H._consoleTask=O,H=H.catch(function(q){return console.trace(q),It(q)})),H}finally{B&&ko()}},pt.prototype.get=function(d,h){var b=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?It(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return b.core.get({trans:S,key:d}).then(function(C){return b.hook.reading.fire(C)})}).then(h)},pt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var b=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&h.every(function(q){return 0<=B.keyPath.indexOf(q)})){for(var H=0;H<h.length;++H)if(h.indexOf(B.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(B,H){return B.keyPath.length-H.keyPath.length})[0];if(b&&this.db._maxKey!==ki){var O=b.keyPath.slice(0,h.length);return this.where(O).equals(O.map(function(H){return d[H]}))}!b&&be&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var S=this.schema.idxByName;function C(B,H){return ot(B,H)===0}var D=h.reduce(function(z,H){var q=z[0],X=z[1],z=S[H],ne=d[H];return[q||z,q||!z?Si(X,z&&z.multi?function(Q){return Q=R(Q,H),a(Q)&&Q.some(function(J){return C(ne,J)})}:function(Q){return C(ne,R(Q,H))}):X]},[null,null]),O=D[0],D=D[1];return O?this.where(O.name).equals(d[O.keyPath]).filter(D):b?this.filter(D):this.where(h).equals("")},pt.prototype.filter=function(d){return this.toCollection().and(d)},pt.prototype.count=function(d){return this.toCollection().count(d)},pt.prototype.offset=function(d){return this.toCollection().offset(d)},pt.prototype.limit=function(d){return this.toCollection().limit(d)},pt.prototype.each=function(d){return this.toCollection().each(d)},pt.prototype.toArray=function(d){return this.toCollection().toArray(d)},pt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},pt.prototype.reverse=function(){return this.toCollection().reverse()},pt.prototype.mapToClass=function(d){var h,b=this.db,S=this.name;function C(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof $v&&(function(H,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function X(){this.constructor=H}n(H,q),H.prototype=q===null?Object.create(q):(X.prototype=q.prototype,new X)}(C,h=d),Object.defineProperty(C.prototype,"db",{get:function(){return b},enumerable:!1,configurable:!0}),C.prototype.table=function(){return S},d=C);for(var O=new Set,D=d.prototype;D;D=u(D))Object.getOwnPropertyNames(D).forEach(function(H){return O.add(H)});function B(H){if(!H)return H;var q,X=Object.create(d.prototype);for(q in H)if(!O.has(q))try{X[q]=H[q]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),d},pt.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},pt.prototype.add=function(d,h){var b=this,S=this.schema.primKey,C=S.auto,O=S.keyPath,D=d;return O&&C&&(D=Xu(O)(d)),this._trans("readwrite",function(B){return b.core.mutate({trans:B,type:"add",keys:h!=null?[h]:null,values:[D]})}).then(function(B){return B.numFailures?Te.reject(B.failures[0]):B.lastResult}).then(function(B){if(O)try{I(d,O,B)}catch{}return B})},pt.prototype.upsert=function(d,h){var b=this,S=this.schema.primKey.keyPath;return this._trans("readwrite",function(C){return b.core.get({trans:C,key:d}).then(function(O){var D=O??{};return Uv(D,h),S&&I(D,S,d),b.core.mutate({trans:C,type:"put",values:[D],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[h]}}).then(function(B){return B.numFailures?Te.reject(B.failures[0]):!!O})})})},pt.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=R(d,this.schema.primKey.keyPath),d===void 0?It(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},pt.prototype.put=function(d,h){var b=this,S=this.schema.primKey,C=S.auto,O=S.keyPath,D=d;return O&&C&&(D=Xu(O)(d)),this._trans("readwrite",function(B){return b.core.mutate({trans:B,type:"put",values:[D],keys:h!=null?[h]:null})}).then(function(B){return B.numFailures?Te.reject(B.failures[0]):B.lastResult}).then(function(B){if(O)try{I(d,O,B)}catch{}return B})},pt.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(b){return h.core.mutate({trans:b,type:"delete",keys:[d]}).then(function(S){return ec(h,[d],S)}).then(function(S){return S.numFailures?Te.reject(S.failures[0]):void 0})})},pt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:Lv}).then(function(b){return ec(d,null,b)})}).then(function(h){return h.numFailures?Te.reject(h.failures[0]):void 0})},pt.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(b){return h.core.getMany({keys:d,trans:b}).then(function(S){return S.map(function(C){return h.hook.reading.fire(C)})})})},pt.prototype.bulkAdd=function(d,h,b){var S=this,C=Array.isArray(h)?h:void 0,O=(b=b||(C?void 0:h))?b.allKeys:void 0;return this._trans("readwrite",function(D){var q=S.schema.primKey,B=q.auto,q=q.keyPath;if(q&&C)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(C&&C.length!==d.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var H=d.length,q=q&&B?d.map(Xu(q)):d;return S.core.mutate({trans:D,type:"add",keys:C,values:q,wantResults:O}).then(function(J){var z=J.numFailures,ne=J.results,Q=J.lastResult,J=J.failures;if(z===0)return O?ne:Q;throw new Re("".concat(S.name,".bulkAdd(): ").concat(z," of ").concat(H," operations failed"),J)})})},pt.prototype.bulkPut=function(d,h,b){var S=this,C=Array.isArray(h)?h:void 0,O=(b=b||(C?void 0:h))?b.allKeys:void 0;return this._trans("readwrite",function(D){var q=S.schema.primKey,B=q.auto,q=q.keyPath;if(q&&C)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(C&&C.length!==d.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var H=d.length,q=q&&B?d.map(Xu(q)):d;return S.core.mutate({trans:D,type:"put",keys:C,values:q,wantResults:O}).then(function(J){var z=J.numFailures,ne=J.results,Q=J.lastResult,J=J.failures;if(z===0)return O?ne:Q;throw new Re("".concat(S.name,".bulkPut(): ").concat(z," of ").concat(H," operations failed"),J)})})},pt.prototype.bulkUpdate=function(d){var h=this,b=this.core,S=d.map(function(D){return D.key}),C=d.map(function(D){return D.changes}),O=[];return this._trans("readwrite",function(D){return b.getMany({trans:D,keys:S,cache:"clone"}).then(function(B){var H=[],q=[];d.forEach(function(z,ne){var Q=z.key,J=z.changes,Z=B[ne];if(Z){for(var te=0,ie=Object.keys(J);te<ie.length;te++){var le=ie[te],fe=J[le];if(le===h.schema.primKey.keyPath){if(ot(fe,Q)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else I(Z,le,fe)}O.push(ne),H.push(Q),q.push(Z)}});var X=H.length;return b.mutate({trans:D,type:"put",keys:H,values:q,updates:{keys:S,changeSpecs:C}}).then(function(z){var ne=z.numFailures,Q=z.failures;if(ne===0)return X;for(var J=0,Z=Object.keys(Q);J<Z.length;J++){var te,ie=Z[J],le=O[Number(ie)];le!=null&&(te=Q[ie],delete Q[ie],Q[le]=te)}throw new Re("".concat(h.name,".bulkUpdate(): ").concat(ne," of ").concat(X," operations failed"),Q)})})})},pt.prototype.bulkDelete=function(d){var h=this,b=d.length;return this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"delete",keys:d}).then(function(C){return ec(h,d,C)})}).then(function(D){var C=D.numFailures,O=D.lastResult,D=D.failures;if(C===0)return O;throw new Re("".concat(h.name,".bulkDelete(): ").concat(C," of ").concat(b," operations failed"),D)})},pt);function pt(){}function Ha(d){function h(D,B){if(B){for(var H=arguments.length,q=new Array(H-1);--H;)q[H-1]=arguments[H];return b[D].subscribe.apply(null,q),d}if(typeof D=="string")return b[D]}var b={};h.addEventType=O;for(var S=1,C=arguments.length;S<C;++S)O(arguments[S]);return h;function O(D,B,H){if(typeof D!="object"){var q;B=B||ee;var X={subscribers:[],fire:H=H||Ke,subscribe:function(z){X.subscribers.indexOf(z)===-1&&(X.subscribers.push(z),X.fire=B(X.fire,z))},unsubscribe:function(z){X.subscribers=X.subscribers.filter(function(ne){return ne!==z}),X.fire=X.subscribers.reduce(B,H)}};return b[D]=h[D]=X}o(q=D).forEach(function(z){var ne=q[z];if(a(ne))O(z,q[z][0],q[z][1]);else{if(ne!=="asap")throw new ge.InvalidArgument("Invalid event config");var Q=O(z,Pt,function(){for(var J=arguments.length,Z=new Array(J);J--;)Z[J]=arguments[J];Q.subscribers.forEach(function(te){j(function(){te.apply(null,Z)})})})}})}}function qa(d,h){return v(h).from({prototype:d}),h}function Co(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Yf(d,h){d.filter=Si(d.filter,h)}function Jf(d,h,b){var S=d.replayFilter;d.replayFilter=S?function(){return Si(S(),h())}:h,d.justLimit=b&&!S}function tc(d,h){if(d.isPrimKey)return h.primaryKey;var b=h.getIndexByKeyPath(d.index);if(!b)throw new ge.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return b}function Vv(d,h,b){var S=tc(d,h.schema);return h.openCursor({trans:b,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:S,range:d.range}})}function nc(d,h,b,S){var C=d.replayFilter?Si(d.filter,d.replayFilter()):d.filter;if(d.or){var O={},D=function(B,H,q){var X,z;C&&!C(H,q,function(ne){return H.stop(ne)},function(ne){return H.fail(ne)})||((z=""+(X=H.primaryKey))=="[object ArrayBuffer]"&&(z=""+new Uint8Array(X)),f(O,z)||(O[z]=!0,h(B,H,q)))};return Promise.all([d.or._iterate(D,b),Kv(Vv(d,S,b),d.algorithm,D,!d.keysOnly&&d.valueMapper)])}return Kv(Vv(d,S,b),Si(d.algorithm,C),h,!d.keysOnly&&d.valueMapper)}function Kv(d,h,b,S){var C=wt(S?function(O,D,B){return b(S(O),D,B)}:b);return d.then(function(O){if(O)return O.start(function(){var D=function(){return O.continue()};h&&!h(O,function(B){return D=B},function(B){O.stop(B),D=Ke},function(B){O.fail(B),D=Ke})||C(O.value,O,function(B){return D=B}),D()})})}var sT=(ct.prototype._read=function(d,h){var b=this._ctx;return b.error?b.table._trans(null,It.bind(null,b.error)):b.table._trans("readonly",d).then(h)},ct.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,It.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ct.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=Si(h.algorithm,d)},ct.prototype._iterate=function(d,h){return nc(this._ctx,d,h,this._ctx.table.core)},ct.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),b=Object.create(this._ctx);return d&&l(b,d),h._ctx=b,h},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(d){var h=this._ctx;return this._read(function(b){return nc(h,d,b,h.table.core)})},ct.prototype.count=function(d){var h=this;return this._read(function(b){var S=h._ctx,C=S.table.core;if(Co(S,!0))return C.count({trans:b,query:{index:tc(S,C.schema),range:S.range}}).then(function(D){return Math.min(D,S.limit)});var O=0;return nc(S,function(){return++O,!1},b,C).then(function(){return O})}).then(d)},ct.prototype.sortBy=function(d,h){var b=d.split(".").reverse(),S=b[0],C=b.length-1;function O(H,q){return q?O(H[b[q]],q-1):H[S]}var D=this._ctx.dir==="next"?1:-1;function B(H,q){return ot(O(H,C),O(q,C))*D}return this.toArray(function(H){return H.sort(B)}).then(h)},ct.prototype.toArray=function(d){var h=this;return this._read(function(b){var S=h._ctx;if(S.dir==="next"&&Co(S,!0)&&0<S.limit){var C=S.valueMapper,O=tc(S,S.table.core.schema);return S.table.core.query({trans:b,limit:S.limit,values:!0,query:{index:O,range:S.range}}).then(function(B){return B=B.result,C?B.map(C):B})}var D=[];return nc(S,function(B){return D.push(B)},b,S.table.core).then(function(){return D})},d)},ct.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,Co(h)?Jf(h,function(){var b=d;return function(S,C){return b===0||(b===1?--b:C(function(){S.advance(b),b=0}),!1)}}):Jf(h,function(){var b=d;return function(){return--b<0}})),this},ct.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Jf(this._ctx,function(){var h=d;return function(b,S,C){return--h<=0&&S(C),0<=h}},!0),this},ct.prototype.until=function(d,h){return Yf(this._ctx,function(b,S,C){return!d(b.value)||(S(C),h)}),this},ct.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ct.prototype.last=function(d){return this.reverse().first(d)},ct.prototype.filter=function(d){var h;return Yf(this._ctx,function(b){return d(b.value)}),(h=this._ctx).isMatch=Si(h.isMatch,d),this},ct.prototype.and=function(d){return this.filter(d)},ct.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(b,S){d(S.key,S)})},ct.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ct.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(b,S){d(S.primaryKey,S)})},ct.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var b=[];return this.each(function(S,C){b.push(C.key)}).then(function(){return b}).then(d)},ct.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&Co(h,!0)&&0<h.limit)return this._read(function(S){var C=tc(h,h.table.core.schema);return h.table.core.query({trans:S,values:!1,limit:h.limit,query:{index:C,range:h.range}})}).then(function(S){return S.result}).then(d);h.keysOnly=!h.isMatch;var b=[];return this.each(function(S,C){b.push(C.primaryKey)}).then(function(){return b}).then(d)},ct.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ct.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ct.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ct.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Yf(this._ctx,function(C){var S=C.primaryKey.toString(),C=f(h,S);return h[S]=!0,!C}),this},ct.prototype.modify=function(d){var h=this,b=this._ctx;return this._write(function(S){var C=typeof d=="function"?d:function(Z){return Uv(Z,d)},O=b.table.core,q=O.schema.primaryKey,D=q.outbound,B=q.extractKey,H=200,q=h.db._options.modifyChunkSize;q&&(H=typeof q=="object"?q[O.name]||q["*"]||200:q);function X(Z,le){var ie=le.failures,le=le.numFailures;ne+=Z-le;for(var fe=0,xe=o(ie);fe<xe.length;fe++){var Ce=xe[fe];z.push(ie[Ce])}}var z=[],ne=0,Q=[],J=d===Wv;return h.clone().primaryKeys().then(function(Z){function te(le){var fe=Math.min(H,Z.length-le),xe=Z.slice(le,le+fe);return(J?Promise.resolve([]):O.getMany({trans:S,keys:xe,cache:"immutable"})).then(function(Ce){var Oe=[],Ee=[],Pe=D?[]:null,je=J?xe:[];if(!J)for(var Ae=0;Ae<fe;++Ae){var Me=Ce[Ae],Ye={value:re(Me),primKey:Z[le+Ae]};C.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?je.push(Z[le+Ae]):D||ot(B(Me),B(Ye.value))===0?(Ee.push(Ye.value),D&&Pe.push(Z[le+Ae])):(je.push(Z[le+Ae]),Oe.push(Ye.value)))}return Promise.resolve(0<Oe.length&&O.mutate({trans:S,type:"add",values:Oe}).then(function(et){for(var nt in et.failures)je.splice(parseInt(nt),1);X(Oe.length,et)})).then(function(){return(0<Ee.length||ie&&typeof d=="object")&&O.mutate({trans:S,type:"put",keys:Pe,values:Ee,criteria:ie,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<le}).then(function(et){return X(Ee.length,et)})}).then(function(){return(0<je.length||ie&&J)&&O.mutate({trans:S,type:"delete",keys:je,criteria:ie,isAdditionalChunk:0<le}).then(function(et){return ec(b.table,je,et)}).then(function(et){return X(je.length,et)})}).then(function(){return Z.length>le+fe&&te(le+H)})})}var ie=Co(b)&&b.limit===1/0&&(typeof d!="function"||J)&&{index:b.index,range:b.range};return te(0).then(function(){if(0<z.length)throw new ce("Error modifying one or more objects",z,ne,Q);return Z.length})})})},ct.prototype.delete=function(){var d=this._ctx,h=d.range;return!Co(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Wv):this._write(function(b){var S=d.table.core.schema.primaryKey,C=h;return d.table.core.count({trans:b,query:{index:S,range:C}}).then(function(O){return d.table.core.mutate({trans:b,type:"deleteRange",range:C}).then(function(H){var B=H.failures,H=H.numFailures;if(H)throw new ce("Could not delete some values",Object.keys(B).map(function(q){return B[q]}),O-H);return O-H})})})},ct);function ct(){}var Wv=function(d,h){return h.value=null};function iT(d,h){return d<h?-1:d===h?0:1}function oT(d,h){return h<d?-1:d===h?0:1}function $n(d,h,b){return d=d instanceof qv?new d.Collection(d):d,d._ctx.error=new(b||TypeError)(h),d}function To(d){return new d.Collection(d,function(){return Hv("")}).limit(0)}function rc(d,h,b,S){var C,O,D,B,H,q,X,z=b.length;if(!b.every(function(J){return typeof J=="string"}))return $n(d,Nv);function ne(J){C=J==="next"?function(te){return te.toUpperCase()}:function(te){return te.toLowerCase()},O=J==="next"?function(te){return te.toLowerCase()}:function(te){return te.toUpperCase()},D=J==="next"?iT:oT;var Z=b.map(function(te){return{lower:O(te),upper:C(te)}}).sort(function(te,ie){return D(te.lower,ie.lower)});B=Z.map(function(te){return te.upper}),H=Z.map(function(te){return te.lower}),X=(q=J)==="next"?"":S}ne("next"),d=new d.Collection(d,function(){return As(B[0],H[z-1]+S)}),d._ondirectionchange=function(J){ne(J)};var Q=0;return d._addAlgorithm(function(J,Z,te){var ie=J.key;if(typeof ie!="string")return!1;var le=O(ie);if(h(le,H,Q))return!0;for(var fe=null,xe=Q;xe<z;++xe){var Ce=function(Oe,Ee,Pe,je,Ae,Me){for(var Ye=Math.min(Oe.length,je.length),et=-1,nt=0;nt<Ye;++nt){var Mn=Ee[nt];if(Mn!==je[nt])return Ae(Oe[nt],Pe[nt])<0?Oe.substr(0,nt)+Pe[nt]+Pe.substr(nt+1):Ae(Oe[nt],je[nt])<0?Oe.substr(0,nt)+je[nt]+Pe.substr(nt+1):0<=et?Oe.substr(0,et)+Ee[et]+Pe.substr(et+1):null;Ae(Oe[nt],Mn)<0&&(et=nt)}return Ye<je.length&&Me==="next"?Oe+Pe.substr(Oe.length):Ye<Oe.length&&Me==="prev"?Oe.substr(0,Pe.length):et<0?null:Oe.substr(0,et)+je[et]+Pe.substr(et+1)}(ie,le,B[xe],H[xe],D,q);Ce===null&&fe===null?Q=xe+1:(fe===null||0<D(fe,Ce))&&(fe=Ce)}return Z(fe!==null?function(){J.continue(fe+X)}:te),!1}),d}function As(d,h,b,S){return{type:2,lower:d,upper:h,lowerOpen:b,upperOpen:S}}function Hv(d){return{type:1,lower:d,upper:d}}var qv=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(d,h,b,S){b=b!==!1,S=S===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(b||S)&&(!b||!S)?To(this):new this.Collection(this,function(){return As(d,h,!b,!S)})}catch{return $n(this,Zr)}},Gt.prototype.equals=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return Hv(d)})},Gt.prototype.above=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(d,void 0,!0)})},Gt.prototype.aboveOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(d,void 0,!1)})},Gt.prototype.below=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(void 0,d,!1,!0)})},Gt.prototype.belowOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(void 0,d)})},Gt.prototype.startsWith=function(d){return typeof d!="string"?$n(this,Nv):this.between(d,d+ki,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):rc(this,function(h,b){return h.indexOf(b[0])===0},[d],ki)},Gt.prototype.equalsIgnoreCase=function(d){return rc(this,function(h,b){return h===b[0]},[d],"")},Gt.prototype.anyOfIgnoreCase=function(){var d=se.apply(L,arguments);return d.length===0?To(this):rc(this,function(h,b){return b.indexOf(h)!==-1},d,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var d=se.apply(L,arguments);return d.length===0?To(this):rc(this,function(h,b){return b.some(function(S){return h.indexOf(S)===0})},d,ki)},Gt.prototype.anyOf=function(){var d=this,h=se.apply(L,arguments),b=this._cmp;try{h.sort(b)}catch{return $n(this,Zr)}if(h.length===0)return To(this);var S=new this.Collection(this,function(){return As(h[0],h[h.length-1])});S._ondirectionchange=function(O){b=O==="next"?d._ascending:d._descending,h.sort(b)};var C=0;return S._addAlgorithm(function(O,D,B){for(var H=O.key;0<b(H,h[C]);)if(++C===h.length)return D(B),!1;return b(H,h[C])===0||(D(function(){O.continue(h[C])}),!1)}),S},Gt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var d=se.apply(L,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return $n(this,Zr)}var h=d.reduce(function(b,S){return b?b.concat([[b[b.length-1][1],S]]):[[-1/0,S]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(ie,h){var b=this,S=this._cmp,C=this._ascending,O=this._descending,D=this._min,B=this._max;if(ie.length===0)return To(this);if(!ie.every(function(le){return le[0]!==void 0&&le[1]!==void 0&&C(le[0],le[1])<=0}))return $n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var H=!h||h.includeLowers!==!1,q=h&&h.includeUppers===!0,X,z=C;function ne(le,fe){return z(le[0],fe[0])}try{(X=ie.reduce(function(le,fe){for(var xe=0,Ce=le.length;xe<Ce;++xe){var Oe=le[xe];if(S(fe[0],Oe[1])<0&&0<S(fe[1],Oe[0])){Oe[0]=D(Oe[0],fe[0]),Oe[1]=B(Oe[1],fe[1]);break}}return xe===Ce&&le.push(fe),le},[])).sort(ne)}catch{return $n(this,Zr)}var Q=0,J=q?function(le){return 0<C(le,X[Q][1])}:function(le){return 0<=C(le,X[Q][1])},Z=H?function(le){return 0<O(le,X[Q][0])}:function(le){return 0<=O(le,X[Q][0])},te=J,ie=new this.Collection(this,function(){return As(X[0][0],X[X.length-1][1],!H,!q)});return ie._ondirectionchange=function(le){z=le==="next"?(te=J,C):(te=Z,O),X.sort(ne)},ie._addAlgorithm(function(le,fe,xe){for(var Ce,Oe=le.key;te(Oe);)if(++Q===X.length)return fe(xe),!1;return!J(Ce=Oe)&&!Z(Ce)||(b._cmp(Oe,X[Q][1])===0||b._cmp(Oe,X[Q][0])===0||fe(function(){z===C?le.continue(X[Q][0]):le.continue(X[Q][1])}),!1)}),ie},Gt.prototype.startsWithAnyOf=function(){var d=se.apply(L,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?To(this):this.inAnyRange(d.map(function(h){return[h,h+ki]})):$n(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Ir(d){return wt(function(h){return Ga(h),d(h.target.error),!1})}function Ga(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Qa="storagemutated",Zf="x-storagemutated-1",Os=Ha(null,Qa),aT=(Dr.prototype._lock=function(){return T(!Le.global),++this._reculock,this._reculock!==1||Le.global||(Le.lockOwnerFor=this),this},Dr.prototype._unlock=function(){if(T(!Le.global),--this._reculock==0)for(Le.global||(Le.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{_i(d[1],d[0])}catch{}}return this},Dr.prototype._locked=function(){return this._reculock&&Le.lockOwnerFor!==this},Dr.prototype.create=function(d){var h=this;if(!this.mode)return this;var b=this.db.idbdb,S=this.db._state.dbOpenError;if(T(!this.idbtrans),!d&&!b)switch(S&&S.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(S);case"MissingAPIError":throw new ge.MissingAPI(S.message,S);default:throw new ge.OpenFailed(S)}if(!this.active)throw new ge.TransactionInactive;return T(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||b).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=wt(function(C){Ga(C),h._reject(d.error)}),d.onabort=wt(function(C){Ga(C),h.active&&h._reject(new ge.Abort(d.error)),h.active=!1,h.on("abort").fire(C)}),d.oncomplete=wt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Os.storagemutated.fire(d.mutatedParts)}),this},Dr.prototype._promise=function(d,h,b){var S=this;if(d==="readwrite"&&this.mode!=="readwrite")return It(new ge.ReadOnly("Transaction is readonly"));if(!this.active)return It(new ge.TransactionInactive);if(this._locked())return new Te(function(O,D){S._blockedFuncs.push([function(){S._promise(d,h,b).then(O,D)},Le])});if(b)return Cs(function(){var O=new Te(function(D,B){S._lock();var H=h(D,B,S);H&&H.then&&H.then(D,B)});return O.finally(function(){return S._unlock()}),O._lib=!0,O});var C=new Te(function(O,D){var B=h(O,D,S);B&&B.then&&B.then(O,D)});return C._lib=!0,C},Dr.prototype._root=function(){return this.parent?this.parent._root():this},Dr.prototype.waitFor=function(d){var h,b=this._root(),S=Te.resolve(d);b._waitingFor?b._waitingFor=b._waitingFor.then(function(){return S}):(b._waitingFor=S,b._waitingQueue=[],h=b.idbtrans.objectStore(b.storeNames[0]),function O(){for(++b._spinCount;b._waitingQueue.length;)b._waitingQueue.shift()();b._waitingFor&&(h.get(-1/0).onsuccess=O)}());var C=b._waitingFor;return new Te(function(O,D){S.then(function(B){return b._waitingQueue.push(wt(O.bind(null,B)))},function(B){return b._waitingQueue.push(wt(D.bind(null,B)))}).finally(function(){b._waitingFor===C&&(b._waitingFor=null)})})},Dr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},Dr.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var b=this.schema[d];if(!b)throw new ge.NotFound("Table "+d+" not part of transaction");return b=new this.db.Table(d,b,this),b.core=this.db.core.table(d),h[d]=b},Dr);function Dr(){}function Xf(d,h,b,S,C,O,D,B){return{name:d,keyPath:h,unique:b,multi:S,auto:C,compound:O,src:(b&&!D?"&":"")+(S?"*":"")+(C?"++":"")+Gv(h),type:B}}function Gv(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function eh(d,h,b){return{name:d,primKey:h,indexes:b,mappedClass:null,idxByName:(S=function(C){return[C.name,C]},b.reduce(function(C,O,D){return D=S(O,D),D&&(C[D[0]]=D[1]),C},{}))};var S}var Ya=function(d){try{return d.only([[]]),Ya=function(){return[[]]},[[]]}catch{return Ya=function(){return ki},ki}};function th(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(b){return b[h]}:function(b){return R(b,h)}:function(b){return R(b,d)};var h}function Qv(d){return[].slice.call(d)}var lT=0;function Ja(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function uT(d,h,H){function S(te){if(te.type===3)return null;if(te.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=te.lower,J=te.upper,Z=te.lowerOpen,te=te.upperOpen;return Q===void 0?J===void 0?null:h.upperBound(J,!!te):J===void 0?h.lowerBound(Q,!!Z):h.bound(Q,J,!!Z,!!te)}function C(ne){var Q,J=ne.name;return{name:J,schema:ne,mutate:function(Z){var te=Z.trans,ie=Z.type,le=Z.keys,fe=Z.values,xe=Z.range;return new Promise(function(Ce,Oe){Ce=wt(Ce);var Ee=te.objectStore(J),Pe=Ee.keyPath==null,je=ie==="put"||ie==="add";if(!je&&ie!=="delete"&&ie!=="deleteRange")throw new Error("Invalid operation type: "+ie);var Ae,Me=(le||fe||{length:1}).length;if(le&&fe&&le.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(Me===0)return Ce({numFailures:0,failures:{},results:[],lastResult:void 0});function Ye(gn){++Mn,Ga(gn)}var et=[],nt=[],Mn=0;if(ie==="deleteRange"){if(xe.type===4)return Ce({numFailures:Mn,failures:nt,results:[],lastResult:void 0});xe.type===3?et.push(Ae=Ee.clear()):et.push(Ae=Ee.delete(S(xe)))}else{var Pe=je?Pe?[fe,le]:[fe,null]:[le,null],Qe=Pe[0],an=Pe[1];if(je)for(var ln=0;ln<Me;++ln)et.push(Ae=an&&an[ln]!==void 0?Ee[ie](Qe[ln],an[ln]):Ee[ie](Qe[ln])),Ae.onerror=Ye;else for(ln=0;ln<Me;++ln)et.push(Ae=Ee[ie](Qe[ln])),Ae.onerror=Ye}function mc(gn){gn=gn.target.result,et.forEach(function(Ti,wh){return Ti.error!=null&&(nt[wh]=Ti.error)}),Ce({numFailures:Mn,failures:nt,results:ie==="delete"?le:et.map(function(Ti){return Ti.result}),lastResult:gn})}Ae.onerror=function(gn){Ye(gn),mc(gn)},Ae.onsuccess=mc})},getMany:function(Z){var te=Z.trans,ie=Z.keys;return new Promise(function(le,fe){le=wt(le);for(var xe,Ce=te.objectStore(J),Oe=ie.length,Ee=new Array(Oe),Pe=0,je=0,Ae=function(et){et=et.target,Ee[et._pos]=et.result,++je===Pe&&le(Ee)},Me=Ir(fe),Ye=0;Ye<Oe;++Ye)ie[Ye]!=null&&((xe=Ce.get(ie[Ye]))._pos=Ye,xe.onsuccess=Ae,xe.onerror=Me,++Pe);Pe===0&&le(Ee)})},get:function(Z){var te=Z.trans,ie=Z.key;return new Promise(function(le,fe){le=wt(le);var xe=te.objectStore(J).get(ie);xe.onsuccess=function(Ce){return le(Ce.target.result)},xe.onerror=Ir(fe)})},query:(Q=q,function(Z){return new Promise(function(te,ie){te=wt(te);var le,fe,xe,Pe=Z.trans,Ce=Z.values,Oe=Z.limit,Ae=Z.query,Ee=Oe===1/0?void 0:Oe,je=Ae.index,Ae=Ae.range,Pe=Pe.objectStore(J),je=je.isPrimaryKey?Pe:Pe.index(je.name),Ae=S(Ae);if(Oe===0)return te({result:[]});Q?((Ee=Ce?je.getAll(Ae,Ee):je.getAllKeys(Ae,Ee)).onsuccess=function(Me){return te({result:Me.target.result})},Ee.onerror=Ir(ie)):(le=0,fe=!Ce&&"openKeyCursor"in je?je.openKeyCursor(Ae):je.openCursor(Ae),xe=[],fe.onsuccess=function(Me){var Ye=fe.result;return Ye?(xe.push(Ce?Ye.value:Ye.primaryKey),++le===Oe?te({result:xe}):void Ye.continue()):te({result:xe})},fe.onerror=Ir(ie))})}),openCursor:function(Z){var te=Z.trans,ie=Z.values,le=Z.query,fe=Z.reverse,xe=Z.unique;return new Promise(function(Ce,Oe){Ce=wt(Ce);var je=le.index,Ee=le.range,Pe=te.objectStore(J),Pe=je.isPrimaryKey?Pe:Pe.index(je.name),je=fe?xe?"prevunique":"prev":xe?"nextunique":"next",Ae=!ie&&"openKeyCursor"in Pe?Pe.openKeyCursor(S(Ee),je):Pe.openCursor(S(Ee),je);Ae.onerror=Ir(Oe),Ae.onsuccess=wt(function(Me){var Ye,et,nt,Mn,Qe=Ae.result;Qe?(Qe.___id=++lT,Qe.done=!1,Ye=Qe.continue.bind(Qe),et=(et=Qe.continuePrimaryKey)&&et.bind(Qe),nt=Qe.advance.bind(Qe),Mn=function(){throw new Error("Cursor not stopped")},Qe.trans=te,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=wt(Oe),Qe.next=function(){var an=this,ln=1;return this.start(function(){return ln--?an.continue():an.stop()}).then(function(){return an})},Qe.start=function(an){function ln(){if(Ae.result)try{an()}catch(gn){Qe.fail(gn)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var mc=new Promise(function(gn,Ti){gn=wt(gn),Ae.onerror=Ir(Ti),Qe.fail=Ti,Qe.stop=function(wh){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=Mn,gn(wh)}});return Ae.onsuccess=wt(function(gn){Ae.onsuccess=ln,ln()}),Qe.continue=Ye,Qe.continuePrimaryKey=et,Qe.advance=nt,ln(),mc},Ce(Qe)):Ce(null)},Oe)})},count:function(Z){var te=Z.query,ie=Z.trans,le=te.index,fe=te.range;return new Promise(function(xe,Ce){var Oe=ie.objectStore(J),Ee=le.isPrimaryKey?Oe:Oe.index(le.name),Oe=S(fe),Ee=Oe?Ee.count(Oe):Ee.count();Ee.onsuccess=wt(function(Pe){return xe(Pe.target.result)}),Ee.onerror=Ir(Ce)})}}}var O,D,B,X=(D=H,B=Qv((O=d).objectStoreNames),{schema:{name:O.name,tables:B.map(function(ne){return D.objectStore(ne)}).map(function(ne){var Q=ne.keyPath,te=ne.autoIncrement,J=a(Q),Z={},te={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:J,keyPath:Q,autoIncrement:te,unique:!0,extractKey:th(Q)},indexes:Qv(ne.indexNames).map(function(ie){return ne.index(ie)}).map(function(xe){var le=xe.name,fe=xe.unique,Ce=xe.multiEntry,xe=xe.keyPath,Ce={name:le,compound:a(xe),keyPath:xe,unique:fe,multiEntry:Ce,extractKey:th(xe)};return Z[Ja(xe)]=Ce}),getIndexByKeyPath:function(ie){return Z[Ja(ie)]}};return Z[":id"]=te.primaryKey,Q!=null&&(Z[Ja(Q)]=te.primaryKey),te})},hasGetAll:0<B.length&&"getAll"in D.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=X.schema,q=X.hasGetAll,X=H.tables.map(C),z={};return X.forEach(function(ne){return z[ne.name]=ne}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(ne){if(!z[ne])throw new Error("Table '".concat(ne,"' not found"));return z[ne]},MIN_KEY:-1/0,MAX_KEY:Ya(h),schema:H}}function cT(d,h,b,S){var C=b.IDBKeyRange;return b.indexedDB,{dbcore:(S=uT(h,C,S),d.dbcore.reduce(function(O,D){return D=D.create,r(r({},O),D(O))},S))}}function sc(d,S){var b=S.db,S=cT(d._middlewares,b,d._deps,S);d.core=S.dbcore,d.tables.forEach(function(C){var O=C.name;d.core.schema.tables.some(function(D){return D.name===O})&&(C.core=d.core.table(O),d[O]instanceof d.Table&&(d[O].core=C.core))})}function ic(d,h,b,S){b.forEach(function(C){var O=S[C];h.forEach(function(D){var B=function H(q,X){return x(q,X)||(q=u(q))&&H(q,X)}(D,C);(!B||"value"in B&&B.value===void 0)&&(D===d.Transaction.prototype||D instanceof d.Transaction?w(D,C,{get:function(){return this.table(C)},set:function(H){m(this,C,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):D[C]=new d.Table(C,O))})})}function nh(d,h){h.forEach(function(b){for(var S in b)b[S]instanceof d.Table&&delete b[S]})}function dT(d,h){return d._cfg.version-h._cfg.version}function fT(d,h,b,S){var C=d._dbSchema;b.objectStoreNames.contains("$meta")&&!C.$meta&&(C.$meta=eh("$meta",Jv("")[0],[]),d._storeNames.push("$meta"));var O=d._createTransaction("readwrite",d._storeNames,C);O.create(b),O._completion.catch(S);var D=O._reject.bind(O),B=Le.transless||Le;Cs(function(){return Le.trans=O,Le.transless=B,h!==0?(sc(d,b),q=h,((H=O).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(X){return X??q}):Te.resolve(q)).then(function(X){return ne=X,Q=O,J=b,Z=[],X=(z=d)._versions,te=z._dbSchema=ac(0,z.idbdb,J),(X=X.filter(function(ie){return ie._cfg.version>=ne})).length!==0?(X.forEach(function(ie){Z.push(function(){var le=te,fe=ie._cfg.dbschema;lc(z,le,J),lc(z,fe,J),te=z._dbSchema=fe;var xe=rh(le,fe);xe.add.forEach(function(je){sh(J,je[0],je[1].primKey,je[1].indexes)}),xe.change.forEach(function(je){if(je.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var Ae=J.objectStore(je.name);je.add.forEach(function(Me){return oc(Ae,Me)}),je.change.forEach(function(Me){Ae.deleteIndex(Me.name),oc(Ae,Me)}),je.del.forEach(function(Me){return Ae.deleteIndex(Me)})});var Ce=ie._cfg.contentUpgrade;if(Ce&&ie._cfg.version>ne){sc(z,J),Q._memoizedTables={};var Oe=$(fe);xe.del.forEach(function(je){Oe[je]=le[je]}),nh(z,[z.Transaction.prototype]),ic(z,[z.Transaction.prototype],o(Oe),Oe),Q.schema=Oe;var Ee,Pe=V(Ce);return Pe&&So(),xe=Te.follow(function(){var je;(Ee=Ce(Q))&&Pe&&(je=Ts.bind(null,null),Ee.then(je,je))}),Ee&&typeof Ee.then=="function"?Te.resolve(Ee):xe.then(function(){return Ee})}}),Z.push(function(le){var fe,xe,Ce=ie._cfg.dbschema;fe=Ce,xe=le,[].slice.call(xe.db.objectStoreNames).forEach(function(Oe){return fe[Oe]==null&&xe.db.deleteObjectStore(Oe)}),nh(z,[z.Transaction.prototype]),ic(z,[z.Transaction.prototype],z._storeNames,z._dbSchema),Q.schema=z._dbSchema}),Z.push(function(le){z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(z.idbdb.version/10)===ie._cfg.version?(z.idbdb.deleteObjectStore("$meta"),delete z._dbSchema.$meta,z._storeNames=z._storeNames.filter(function(fe){return fe!=="$meta"})):le.objectStore("$meta").put(ie._cfg.version,"version"))})}),function ie(){return Z.length?Te.resolve(Z.shift()(Q.idbtrans)).then(ie):Te.resolve()}().then(function(){Yv(te,J)})):Te.resolve();var z,ne,Q,J,Z,te}).catch(D)):(o(C).forEach(function(X){sh(b,X,C[X].primKey,C[X].indexes)}),sc(d,b),void Te.follow(function(){return d.on.populate.fire(O)}).catch(D));var H,q})}function hT(d,h){Yv(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var b=ac(0,d.idbdb,h);lc(d,d._dbSchema,h);for(var S=0,C=rh(b,d._dbSchema).change;S<C.length;S++){var O=function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=h.objectStore(D.name);D.add.forEach(function(H){be&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(H.src)),oc(B,H)})}(C[S]);if(typeof O=="object")return O.value}}function rh(d,h){var b,S={del:[],add:[],change:[]};for(b in d)h[b]||S.del.push(b);for(b in h){var C=d[b],O=h[b];if(C){var D={name:b,def:O,recreate:!1,del:[],add:[],change:[]};if(""+(C.primKey.keyPath||"")!=""+(O.primKey.keyPath||"")||C.primKey.auto!==O.primKey.auto)D.recreate=!0,S.change.push(D);else{var B=C.idxByName,H=O.idxByName,q=void 0;for(q in B)H[q]||D.del.push(q);for(q in H){var X=B[q],z=H[q];X?X.src!==z.src&&D.change.push(z):D.add.push(z)}(0<D.del.length||0<D.add.length||0<D.change.length)&&S.change.push(D)}}else S.add.push([b,O])}return S}function sh(d,h,b,S){var C=d.db.createObjectStore(h,b.keyPath?{keyPath:b.keyPath,autoIncrement:b.auto}:{autoIncrement:b.auto});return S.forEach(function(O){return oc(C,O)}),C}function Yv(d,h){o(d).forEach(function(b){h.db.objectStoreNames.contains(b)||(be&&console.debug("Dexie: Creating missing table",b),sh(h,b,d[b].primKey,d[b].indexes))})}function oc(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function ac(d,h,b){var S={};return y(h.objectStoreNames,0).forEach(function(C){for(var O=b.objectStore(C),D=Xf(Gv(q=O.keyPath),q||"",!0,!1,!!O.autoIncrement,q&&typeof q!="string",!0),B=[],H=0;H<O.indexNames.length;++H){var X=O.index(O.indexNames[H]),q=X.keyPath,X=Xf(X.name,q,!!X.unique,!!X.multiEntry,!1,q&&typeof q!="string",!1);B.push(X)}S[C]=eh(C,D,B)}),S}function lc(d,h,b){for(var S=b.db.objectStoreNames,C=0;C<S.length;++C){var O=S[C],D=b.objectStore(O);d._hasGetAll="getAll"in D;for(var B=0;B<D.indexNames.length;++B){var H=D.indexNames[B],q=D.index(H).keyPath,X=typeof q=="string"?q:"["+y(q).join("+")+"]";!h[O]||(q=h[O].idxByName[X])&&(q.name=H,delete h[O].idxByName[X],h[O].idxByName[H]=q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Jv(d){return d.split(",").map(function(h,b){var O=h.split(":"),S=(C=O[1])===null||C===void 0?void 0:C.trim(),C=(h=O[0].trim()).replace(/([&*]|\+\+)/g,""),O=/^\[/.test(C)?C.match(/^\[(.*)\]$/)[1].split("+"):C;return Xf(C,O||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(O),b===0,S)})}var pT=(Po.prototype._createTableSchema=eh,Po.prototype._parseIndexSyntax=Jv,Po.prototype._parseStoresSpec=function(d,h){var b=this;o(d).forEach(function(S){if(d[S]!==null){var C=b._parseIndexSyntax(d[S]),O=C.shift();if(!O)throw new ge.Schema("Invalid schema for table "+S+": "+d[S]);if(O.unique=!0,O.multi)throw new ge.Schema("Primary key cannot be multiEntry*");C.forEach(function(D){if(D.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),C=b._createTableSchema(S,O,C),h[S]=C}})},Po.prototype.stores=function(b){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,b):b;var b=h._versions,S={},C={};return b.forEach(function(O){l(S,O._cfg.storesSource),C=O._cfg.dbschema={},O._parseStoresSpec(S,C)}),h._dbSchema=C,nh(h,[h._allTables,h,h.Transaction.prototype]),ic(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(C),C),h._storeNames=o(C),this},Po.prototype.upgrade=function(d){return this._cfg.contentUpgrade=we(this._cfg.contentUpgrade||Ke,d),this},Po);function Po(){}function ih(d,h){var b=d._dbNamesDB;return b||(b=d._dbNamesDB=new Xr(Zu,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),b.table("dbnames")}function oh(d){return d&&typeof d.databases=="function"}function ah(d){return Cs(function(){return Le.letThrough=!0,d()})}function lh(d){return!("from"in d)}var on=function(d,h){if(!this){var b=new on;return d&&"d"in d&&l(b,d),b}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Za(d,h,b){var S=ot(h,b);if(!isNaN(S)){if(0<S)throw RangeError();if(lh(d))return l(d,{from:h,to:b,d:1});var C=d.l,S=d.r;if(ot(b,d.from)<0)return C?Za(C,h,b):d.l={from:h,to:b,d:1,l:null,r:null},Xv(d);if(0<ot(h,d.to))return S?Za(S,h,b):d.r={from:h,to:b,d:1,l:null,r:null},Xv(d);ot(h,d.from)<0&&(d.from=h,d.l=null,d.d=S?S.d+1:1),0<ot(b,d.to)&&(d.to=b,d.r=null,d.d=d.l?d.l.d+1:1),b=!d.r,C&&!d.l&&Xa(d,C),S&&b&&Xa(d,S)}}function Xa(d,h){lh(h)||function b(S,H){var O=H.from,D=H.to,B=H.l,H=H.r;Za(S,O,D),B&&b(S,B),H&&b(S,H)}(d,h)}function Zv(d,h){var b=uc(h),S=b.next();if(S.done)return!1;for(var C=S.value,O=uc(d),D=O.next(C.from),B=D.value;!S.done&&!D.done;){if(ot(B.from,C.to)<=0&&0<=ot(B.to,C.from))return!0;ot(C.from,B.from)<0?C=(S=b.next(B.from)).value:B=(D=O.next(C.from)).value}return!1}function uc(d){var h=lh(d)?null:{s:0,n:d};return{next:function(b){for(var S=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,S)for(;h.n.l&&ot(b,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!S||ot(b,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Xv(d){var h,b,S=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((b=d.l)===null||b===void 0?void 0:b.d)||0),C=1<S?"r":S<-1?"l":"";C&&(h=C=="r"?"l":"r",b=r({},d),S=d[C],d.from=S.from,d.to=S.to,d[C]=S[C],b[C]=S[h],(d[h]=b).d=e0(b)),d.d=e0(d)}function e0(b){var h=b.r,b=b.l;return(h?b?Math.max(h.d,b.d):h.d:b?b.d:0)+1}function cc(d,h){return o(h).forEach(function(b){d[b]?Xa(d[b],h[b]):d[b]=function S(C){var O,D,B={};for(O in C)f(C,O)&&(D=C[O],B[O]=!D||typeof D!="object"||me.has(D.constructor)?D:S(D));return B}(h[b])}),d}function uh(d,h){return d.all||h.all||Object.keys(d).some(function(b){return h[b]&&Zv(h[b],d[b])})}p(on.prototype,((Qn={add:function(d){return Xa(this,d),this},addKey:function(d){return Za(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(b){return Za(h,b,b)}),this},hasKey:function(d){var h=uc(this).next(d).value;return h&&ot(h.from,d)<=0&&0<=ot(h.to,d)}})[ve]=function(){return uc(this)},Qn));var Ei={},ch={},dh=!1;function dc(d){cc(ch,d),dh||(dh=!0,setTimeout(function(){dh=!1,fh(ch,!(ch={}))},0))}function fh(d,h){h===void 0&&(h=!1);var b=new Set;if(d.all)for(var S=0,C=Object.values(Ei);S<C.length;S++)t0(D=C[S],d,b,h);else for(var O in d){var D,B=/^idb\:\/\/(.*)\/(.*)\//.exec(O);B&&(O=B[1],B=B[2],(D=Ei["idb://".concat(O,"/").concat(B)])&&t0(D,d,b,h))}b.forEach(function(H){return H()})}function t0(d,h,b,S){for(var C=[],O=0,D=Object.entries(d.queries.query);O<D.length;O++){for(var B=D[O],H=B[0],q=[],X=0,z=B[1];X<z.length;X++){var ne=z[X];uh(h,ne.obsSet)?ne.subscribers.forEach(function(te){return b.add(te)}):S&&q.push(ne)}S&&C.push([H,q])}if(S)for(var Q=0,J=C;Q<J.length;Q++){var Z=J[Q],H=Z[0],q=Z[1];d.queries.query[H]=q}}function mT(d){var h=d._state,b=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?It(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var S=h.openCanceller,C=Math.round(10*d.verno),O=!1;function D(){if(h.openCanceller!==S)throw new ge.DatabaseClosed("db.open() was cancelled")}function B(){return new Te(function(ne,Q){if(D(),!b)throw new ge.MissingAPI;var J=d.name,Z=h.autoSchema||!C?b.open(J):b.open(J,C);if(!Z)throw new ge.MissingAPI;Z.onerror=Ir(Q),Z.onblocked=wt(d._fireOnBlocked),Z.onupgradeneeded=wt(function(te){var ie;X=Z.transaction,h.autoSchema&&!d._options.allowEmptyDB?(Z.onerror=Ga,X.abort(),Z.result.close(),(ie=b.deleteDatabase(J)).onsuccess=ie.onerror=wt(function(){Q(new ge.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(X.onerror=Ir(Q),te=te.oldVersion>Math.pow(2,62)?0:te.oldVersion,z=te<1,d.idbdb=Z.result,O&&hT(d,X),fT(d,te/10,X,Q))},Q),Z.onsuccess=wt(function(){X=null;var te,ie,le,fe,xe,Ce=d.idbdb=Z.result,Oe=y(Ce.objectStoreNames);if(0<Oe.length)try{var Ee=Ce.transaction((fe=Oe).length===1?fe[0]:fe,"readonly");if(h.autoSchema)ie=Ce,le=Ee,(te=d).verno=ie.version/10,le=te._dbSchema=ac(0,ie,le),te._storeNames=y(ie.objectStoreNames,0),ic(te,[te._allTables],o(le),le);else if(lc(d,d._dbSchema,Ee),((xe=rh(ac(0,(xe=d).idbdb,Ee),xe._dbSchema)).add.length||xe.change.some(function(Pe){return Pe.add.length||Pe.change.length}))&&!O)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ce.close(),C=Ce.version+1,O=!0,ne(B());sc(d,Ee)}catch{}Eo.push(d),Ce.onversionchange=wt(function(Pe){h.vcFired=!0,d.on("versionchange").fire(Pe)}),Ce.onclose=wt(function(){d.close({disableAutoOpen:!1})}),z&&(xe=d._deps,Ee=J,Ce=xe.indexedDB,xe=xe.IDBKeyRange,oh(Ce)||Ee===Zu||ih(Ce,xe).put({name:Ee}).catch(Ke)),ne()},Q)}).catch(function(ne){switch(ne==null?void 0:ne.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<C)return C=0,B()}return Te.reject(ne)})}var H,q=h.dbReadyResolve,X=null,z=!1;return Te.race([S,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ne){function Q(){return indexedDB.databases().finally(ne)}H=setInterval(Q,100),Q()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(B)]).then(function(){return D(),h.onReadyBeingFired=[],Te.resolve(ah(function(){return d.on.ready.fire(d.vip)})).then(function ne(){if(0<h.onReadyBeingFired.length){var Q=h.onReadyBeingFired.reduce(we,Ke);return h.onReadyBeingFired=[],Te.resolve(ah(function(){return Q(d.vip)})).then(ne)}})}).finally(function(){h.openCanceller===S&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(ne){h.dbOpenError=ne;try{X&&X.abort()}catch{}return S===h.openCanceller&&d._close(),It(ne)}).finally(function(){h.openComplete=!0,q()}).then(function(){var ne;return z&&(ne={},d.tables.forEach(function(Q){Q.schema.indexes.forEach(function(J){J.name&&(ne["idb://".concat(d.name,"/").concat(Q.name,"/").concat(J.name)]=new on(-1/0,[[[]]]))}),ne["idb://".concat(d.name,"/").concat(Q.name,"/")]=ne["idb://".concat(d.name,"/").concat(Q.name,"/:dels")]=new on(-1/0,[[[]]])}),Os(Qa).fire(ne),fh(ne,!0)),d})}function hh(d){function h(O){return d.next(O)}var b=C(h),S=C(function(O){return d.throw(O)});function C(O){return function(H){var B=O(H),H=B.value;return B.done?H:H&&typeof H.then=="function"?H.then(b,S):a(H)?Promise.all(H).then(b,S):b(H)}}return C(h)()}function fc(d,h,b){for(var S=a(d)?d.slice():[d],C=0;C<b;++C)S.push(h);return S}var gT={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var b=d.table(h),S=b.schema,C={},O=[];function D(z,ne,Q){var J=Ja(z),Z=C[J]=C[J]||[],te=z==null?0:typeof z=="string"?1:z.length,ie=0<ne,ie=r(r({},Q),{name:ie?"".concat(J,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:ie,keyTail:ne,keyLength:te,extractKey:th(z),unique:!ie&&Q.unique});return Z.push(ie),ie.isPrimaryKey||O.push(ie),1<te&&D(te===2?z[0]:z.slice(0,te-1),ne+1,Q),Z.sort(function(le,fe){return le.keyTail-fe.keyTail}),ie}h=D(S.primaryKey.keyPath,0,S.primaryKey),C[":id"]=[h];for(var B=0,H=S.indexes;B<H.length;B++){var q=H[B];D(q.keyPath,0,q)}function X(z){var ne,Q=z.query.index;return Q.isVirtual?r(r({},z),{query:{index:Q.lowLevelIndex,range:(ne=z.query.range,Q=Q.keyTail,{type:ne.type===1?2:ne.type,lower:fc(ne.lower,ne.lowerOpen?d.MAX_KEY:d.MIN_KEY,Q),lowerOpen:!0,upper:fc(ne.upper,ne.upperOpen?d.MIN_KEY:d.MAX_KEY,Q),upperOpen:!0})}}):z}return r(r({},b),{schema:r(r({},S),{primaryKey:h,indexes:O,getIndexByKeyPath:function(z){return(z=C[Ja(z)])&&z[0]}}),count:function(z){return b.count(X(z))},query:function(z){return b.query(X(z))},openCursor:function(z){var ne=z.query.index,Q=ne.keyTail,J=ne.isVirtual,Z=ne.keyLength;return J?b.openCursor(X(z)).then(function(ie){return ie&&te(ie)}):b.openCursor(z);function te(ie){return Object.create(ie,{continue:{value:function(le){le!=null?ie.continue(fc(le,z.reverse?d.MAX_KEY:d.MIN_KEY,Q)):z.unique?ie.continue(ie.key.slice(0,Z).concat(z.reverse?d.MIN_KEY:d.MAX_KEY,Q)):ie.continue()}},continuePrimaryKey:{value:function(le,fe){ie.continuePrimaryKey(fc(le,d.MAX_KEY,Q),fe)}},primaryKey:{get:function(){return ie.primaryKey}},key:{get:function(){var le=ie.key;return Z===1?le[0]:le.slice(0,Z)}},value:{get:function(){return ie.value}}})}}})}})}};function ph(d,h,b,S){return b=b||{},S=S||"",o(d).forEach(function(C){var O,D,B;f(h,C)?(O=d[C],D=h[C],typeof O=="object"&&typeof D=="object"&&O&&D?(B=Y(O))!==Y(D)?b[S+C]=h[C]:B==="Object"?ph(O,D,b,S+C+"."):O!==D&&(b[S+C]=h[C]):O!==D&&(b[S+C]=h[C])):b[S+C]=void 0}),o(h).forEach(function(C){f(d,C)||(b[S+C]=h[C])}),b}function mh(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var yT={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var b=d.table(h),S=b.schema.primaryKey;return r(r({},b),{mutate:function(C){var O=Le.trans,D=O.table(h).hook,B=D.deleting,H=D.creating,q=D.updating;switch(C.type){case"add":if(H.fire===Ke)break;return O._promise("readwrite",function(){return X(C)},!0);case"put":if(H.fire===Ke&&q.fire===Ke)break;return O._promise("readwrite",function(){return X(C)},!0);case"delete":if(B.fire===Ke)break;return O._promise("readwrite",function(){return X(C)},!0);case"deleteRange":if(B.fire===Ke)break;return O._promise("readwrite",function(){return function z(ne,Q,J){return b.query({trans:ne,values:!1,query:{index:S,range:Q},limit:J}).then(function(Z){var te=Z.result;return X({type:"delete",keys:te,trans:ne}).then(function(ie){return 0<ie.numFailures?Promise.reject(ie.failures[0]):te.length<J?{failures:[],numFailures:0,lastResult:void 0}:z(ne,r(r({},Q),{lower:te[te.length-1],lowerOpen:!0}),J)})})}(C.trans,C.range,1e4)},!0)}return b.mutate(C);function X(z){var ne,Q,J,Z=Le.trans,te=z.keys||mh(S,z);if(!te)throw new Error("Keys missing");return(z=z.type==="add"||z.type==="put"?r(r({},z),{keys:te}):r({},z)).type!=="delete"&&(z.values=s([],z.values)),z.keys&&(z.keys=s([],z.keys)),ne=b,J=te,((Q=z).type==="add"?Promise.resolve([]):ne.getMany({trans:Q.trans,keys:J,cache:"immutable"})).then(function(ie){var le=te.map(function(fe,xe){var Ce,Oe,Ee,Pe=ie[xe],je={onerror:null,onsuccess:null};return z.type==="delete"?B.fire.call(je,fe,Pe,Z):z.type==="add"||Pe===void 0?(Ce=H.fire.call(je,fe,z.values[xe],Z),fe==null&&Ce!=null&&(z.keys[xe]=fe=Ce,S.outbound||I(z.values[xe],S.keyPath,fe))):(Ce=ph(Pe,z.values[xe]),(Oe=q.fire.call(je,Ce,fe,Pe,Z))&&(Ee=z.values[xe],Object.keys(Oe).forEach(function(Ae){f(Ee,Ae)?Ee[Ae]=Oe[Ae]:I(Ee,Ae,Oe[Ae])}))),je});return b.mutate(z).then(function(fe){for(var xe=fe.failures,Ce=fe.results,Oe=fe.numFailures,fe=fe.lastResult,Ee=0;Ee<te.length;++Ee){var Pe=(Ce||te)[Ee],je=le[Ee];Pe==null?je.onerror&&je.onerror(xe[Ee]):je.onsuccess&&je.onsuccess(z.type==="put"&&ie[Ee]?z.values[Ee]:Pe)}return{failures:xe,results:Ce,numFailures:Oe,lastResult:fe}}).catch(function(fe){return le.forEach(function(xe){return xe.onerror&&xe.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function n0(d,h,b){try{if(!h||h.keys.length<d.length)return null;for(var S=[],C=0,O=0;C<h.keys.length&&O<d.length;++C)ot(h.keys[C],d[O])===0&&(S.push(b?re(h.values[C]):h.values[C]),++O);return S.length===d.length?S:null}catch{return null}}var vT={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var b=d.table(h);return r(r({},b),{getMany:function(S){if(!S.cache)return b.getMany(S);var C=n0(S.keys,S.trans._cache,S.cache==="clone");return C?Te.resolve(C):b.getMany(S).then(function(O){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?re(O):O},O})},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),b.mutate(S)}})}}}};function r0(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function s0(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var wT={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,b=new on(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(S,C,O){if(Le.subscr&&C!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Le.querier));return d.transaction(S,C,O)},table:function(S){var C=d.table(S),O=C.schema,D=O.primaryKey,z=O.indexes,B=D.extractKey,H=D.outbound,q=D.autoIncrement&&z.filter(function(Q){return Q.compound&&Q.keyPath.includes(D.keyPath)}),X=r(r({},C),{mutate:function(Q){function J(Ae){return Ae="idb://".concat(h,"/").concat(S,"/").concat(Ae),fe[Ae]||(fe[Ae]=new on)}var Z,te,ie,le=Q.trans,fe=Q.mutatedParts||(Q.mutatedParts={}),xe=J(""),Ce=J(":dels"),Oe=Q.type,je=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[mh(D,Q).filter(function(Ae){return Ae}),Q.values]:[],Ee=je[0],Pe=je[1],je=Q.trans._cache;return a(Ee)?(xe.addKeys(Ee),(je=Oe==="delete"||Ee.length===Pe.length?n0(Ee,je):null)||Ce.addKeys(Ee),(je||Pe)&&(Z=J,te=je,ie=Pe,O.indexes.forEach(function(Ae){var Me=Z(Ae.name||"");function Ye(nt){return nt!=null?Ae.extractKey(nt):null}function et(nt){return Ae.multiEntry&&a(nt)?nt.forEach(function(Mn){return Me.addKey(Mn)}):Me.addKey(nt)}(te||ie).forEach(function(nt,an){var Qe=te&&Ye(te[an]),an=ie&&Ye(ie[an]);ot(Qe,an)!==0&&(Qe!=null&&et(Qe),an!=null&&et(an))})}))):Ee?(Pe={from:(Pe=Ee.lower)!==null&&Pe!==void 0?Pe:d.MIN_KEY,to:(Pe=Ee.upper)!==null&&Pe!==void 0?Pe:d.MAX_KEY},Ce.add(Pe),xe.add(Pe)):(xe.add(b),Ce.add(b),O.indexes.forEach(function(Ae){return J(Ae.name).add(b)})),C.mutate(Q).then(function(Ae){return!Ee||Q.type!=="add"&&Q.type!=="put"||(xe.addKeys(Ae.results),q&&q.forEach(function(Me){for(var Ye=Q.values.map(function(Qe){return Me.extractKey(Qe)}),et=Me.keyPath.findIndex(function(Qe){return Qe===D.keyPath}),nt=0,Mn=Ae.results.length;nt<Mn;++nt)Ye[nt][et]=Ae.results[nt];J(Me.name).addKeys(Ye)})),le.mutatedParts=cc(le.mutatedParts||{},fe),Ae})}}),z=function(J){var Z=J.query,J=Z.index,Z=Z.range;return[J,new on((J=Z.lower)!==null&&J!==void 0?J:d.MIN_KEY,(Z=Z.upper)!==null&&Z!==void 0?Z:d.MAX_KEY)]},ne={get:function(Q){return[D,new on(Q.key)]},getMany:function(Q){return[D,new on().addKeys(Q.keys)]},count:z,query:z,openCursor:z};return o(ne).forEach(function(Q){X[Q]=function(J){var Z=Le.subscr,te=!!Z,ie=r0(Le,C)&&s0(Q,J)?J.obsSet={}:Z;if(te){var le=function(Pe){return Pe="idb://".concat(h,"/").concat(S,"/").concat(Pe),ie[Pe]||(ie[Pe]=new on)},fe=le(""),xe=le(":dels"),Z=ne[Q](J),te=Z[0],Z=Z[1];if((Q==="query"&&te.isPrimaryKey&&!J.values?xe:le(te.name||"")).add(Z),!te.isPrimaryKey){if(Q!=="count"){var Ce=Q==="query"&&H&&J.values&&C.query(r(r({},J),{values:!1}));return C[Q].apply(this,arguments).then(function(Pe){if(Q==="query"){if(H&&J.values)return Ce.then(function(Ye){return Ye=Ye.result,fe.addKeys(Ye),Pe});var je=J.values?Pe.result.map(B):Pe.result;(J.values?fe:xe).addKeys(je)}else if(Q==="openCursor"){var Ae=Pe,Me=J.values;return Ae&&Object.create(Ae,{key:{get:function(){return xe.addKey(Ae.primaryKey),Ae.key}},primaryKey:{get:function(){var Ye=Ae.primaryKey;return xe.addKey(Ye),Ye}},value:{get:function(){return Me&&fe.addKey(Ae.primaryKey),Ae.value}}})}return Pe})}xe.add(b)}}return C[Q].apply(this,arguments)}}),X}})}};function i0(d,h,b){if(b.numFailures===0)return h;if(h.type==="deleteRange")return null;var S=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return b.numFailures===S?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(C,O){return!(O in b.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(C,O){return!(O in b.failures)})),h)}function gh(d,h){return b=d,((S=h).lower===void 0||(S.lowerOpen?0<ot(b,S.lower):0<=ot(b,S.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?ot(d,h.upper)<0:ot(d,h.upper)<=0));var b,S}function o0(d,h,ne,S,C,O){if(!ne||ne.length===0)return d;var D=h.query.index,B=D.multiEntry,H=h.query.range,q=S.schema.primaryKey.extractKey,X=D.extractKey,z=(D.lowLevelIndex||D).extractKey,ne=ne.reduce(function(Q,J){var Z=Q,te=[];if(J.type==="add"||J.type==="put")for(var ie=new on,le=J.values.length-1;0<=le;--le){var fe,xe=J.values[le],Ce=q(xe);ie.hasKey(Ce)||(fe=X(xe),(B&&a(fe)?fe.some(function(Ae){return gh(Ae,H)}):gh(fe,H))&&(ie.addKey(Ce),te.push(xe)))}switch(J.type){case"add":var Oe=new on().addKeys(h.values?Q.map(function(Me){return q(Me)}):Q),Z=Q.concat(h.values?te.filter(function(Me){return Me=q(Me),!Oe.hasKey(Me)&&(Oe.addKey(Me),!0)}):te.map(function(Me){return q(Me)}).filter(function(Me){return!Oe.hasKey(Me)&&(Oe.addKey(Me),!0)}));break;case"put":var Ee=new on().addKeys(J.values.map(function(Me){return q(Me)}));Z=Q.filter(function(Me){return!Ee.hasKey(h.values?q(Me):Me)}).concat(h.values?te:te.map(function(Me){return q(Me)}));break;case"delete":var Pe=new on().addKeys(J.keys);Z=Q.filter(function(Me){return!Pe.hasKey(h.values?q(Me):Me)});break;case"deleteRange":var je=J.range;Z=Q.filter(function(Me){return!gh(q(Me),je)})}return Z},d);return ne===d?d:(ne.sort(function(Q,J){return ot(z(Q),z(J))||ot(q(Q),q(J))}),h.limit&&h.limit<1/0&&(ne.length>h.limit?ne.length=h.limit:d.length===h.limit&&ne.length<h.limit&&(C.dirty=!0)),O?Object.freeze(ne):ne)}function a0(d,h){return ot(d.lower,h.lower)===0&&ot(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function bT(d,h){return function(b,S,C,O){if(b===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((S=ot(b,S))===0){if(C&&O)return 0;if(C)return 1;if(O)return-1}return S}(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=function(b,S,C,O){if(b===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((S=ot(b,S))===0){if(C&&O)return 0;if(C)return-1;if(O)return 1}return S}(d.upper,h.upper,d.upperOpen,h.upperOpen)}function xT(d,h,b,S){d.subscribers.add(b),S.addEventListener("abort",function(){var C,O;d.subscribers.delete(b),d.subscribers.size===0&&(C=d,O=h,setTimeout(function(){C.subscribers.size===0&&ue(O,C)},3e3))})}var _T={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(b,S,C){var O,D,B=d.transaction(b,S,C);return S==="readwrite"&&(D=(O=new AbortController).signal,C=function(H){return function(){if(O.abort(),S==="readwrite"){for(var q=new Set,X=0,z=b;X<z.length;X++){var ne=z[X],Q=Ei["idb://".concat(h,"/").concat(ne)];if(Q){var J=d.table(ne),Z=Q.optimisticOps.filter(function(Me){return Me.trans===B});if(B._explicit&&H&&B.mutatedParts)for(var te=0,ie=Object.values(Q.queries.query);te<ie.length;te++)for(var le=0,fe=(Oe=ie[te]).slice();le<fe.length;le++)uh((Ee=fe[le]).obsSet,B.mutatedParts)&&(ue(Oe,Ee),Ee.subscribers.forEach(function(Me){return q.add(Me)}));else if(0<Z.length){Q.optimisticOps=Q.optimisticOps.filter(function(Me){return Me.trans!==B});for(var xe=0,Ce=Object.values(Q.queries.query);xe<Ce.length;xe++)for(var Oe,Ee,Pe,je=0,Ae=(Oe=Ce[xe]).slice();je<Ae.length;je++)(Ee=Ae[je]).res!=null&&B.mutatedParts&&(H&&!Ee.dirty?(Pe=Object.isFrozen(Ee.res),Pe=o0(Ee.res,Ee.req,Z,J,Ee,Pe),Ee.dirty?(ue(Oe,Ee),Ee.subscribers.forEach(function(Me){return q.add(Me)})):Pe!==Ee.res&&(Ee.res=Pe,Ee.promise=Te.resolve({result:Pe}))):(Ee.dirty&&ue(Oe,Ee),Ee.subscribers.forEach(function(Me){return q.add(Me)})))}}}q.forEach(function(Me){return Me()})}}},B.addEventListener("abort",C(!1),{signal:D}),B.addEventListener("error",C(!1),{signal:D}),B.addEventListener("complete",C(!0),{signal:D})),B},table:function(b){var S=d.table(b),C=S.schema.primaryKey;return r(r({},S),{mutate:function(O){var D=Le.trans;if(C.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return S.mutate(O);var B=Ei["idb://".concat(h,"/").concat(b)];return B?(D=S.mutate(O),O.type!=="add"&&O.type!=="put"||!(50<=O.values.length||mh(C,O).some(function(H){return H==null}))?(B.optimisticOps.push(O),O.mutatedParts&&dc(O.mutatedParts),D.then(function(H){0<H.numFailures&&(ue(B.optimisticOps,O),(H=i0(0,O,H))&&B.optimisticOps.push(H),O.mutatedParts&&dc(O.mutatedParts))}),D.catch(function(){ue(B.optimisticOps,O),O.mutatedParts&&dc(O.mutatedParts)})):D.then(function(H){var q=i0(0,r(r({},O),{values:O.values.map(function(X,z){var ne;return H.failures[z]?X:(X=(ne=C.keyPath)!==null&&ne!==void 0&&ne.includes(".")?re(X):r({},X),I(X,C.keyPath,H.results[z]),X)})}),H);B.optimisticOps.push(q),queueMicrotask(function(){return O.mutatedParts&&dc(O.mutatedParts)})}),D):S.mutate(O)},query:function(O){if(!r0(Le,S)||!s0("query",O))return S.query(O);var D=((q=Le.trans)===null||q===void 0?void 0:q.db._options.cache)==="immutable",z=Le,B=z.requery,H=z.signal,q=function(J,Z,te,ie){var le=Ei["idb://".concat(J,"/").concat(Z)];if(!le)return[];if(!(Z=le.queries[te]))return[null,!1,le,null];var fe=Z[(ie.query?ie.query.index.name:null)||""];if(!fe)return[null,!1,le,null];switch(te){case"query":var xe=fe.find(function(Ce){return Ce.req.limit===ie.limit&&Ce.req.values===ie.values&&a0(Ce.req.query.range,ie.query.range)});return xe?[xe,!0,le,fe]:[fe.find(function(Ce){return("limit"in Ce.req?Ce.req.limit:1/0)>=ie.limit&&(!ie.values||Ce.req.values)&&bT(Ce.req.query.range,ie.query.range)}),!1,le,fe];case"count":return xe=fe.find(function(Ce){return a0(Ce.req.query.range,ie.query.range)}),[xe,!!xe,le,fe]}}(h,b,"query",O),X=q[0],z=q[1],ne=q[2],Q=q[3];return X&&z?X.obsSet=O.obsSet:(z=S.query(O).then(function(J){var Z=J.result;if(X&&(X.res=Z),D){for(var te=0,ie=Z.length;te<ie;++te)Object.freeze(Z[te]);Object.freeze(Z)}else J.result=re(Z);return J}).catch(function(J){return Q&&X&&ue(Q,X),Promise.reject(J)}),X={obsSet:O.obsSet,promise:z,subscribers:new Set,type:"query",req:O,dirty:!1},Q?Q.push(X):(Q=[X],(ne=ne||(Ei["idb://".concat(h,"/").concat(b)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[O.query.index.name||""]=Q)),xT(X,Q,B,H),X.promise.then(function(J){return{result:o0(J.result,O,ne==null?void 0:ne.optimisticOps,S,X,D)}})}})}})}};function hc(d,h){return new Proxy(d,{get:function(b,S,C){return S==="db"?h:Reflect.get(b,S,C)}})}var Xr=(Dt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new ge.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,b=h.filter(function(S){return S._cfg.version===d})[0];return b||(b=new this.Version(d),h.push(b),h.sort(dT),b.stores({}),this._state.autoSchema=!1,b)},Dt.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Le.letThrough||this._vip)?d():new Te(function(b,S){if(h._state.openComplete)return S(new ge.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void S(new ge.DatabaseClosed);h.open().catch(Ke)}h._state.dbReadyPromise.then(b,S)}).then(d)},Dt.prototype.use=function(d){var h=d.stack,b=d.create,S=d.level,C=d.name;return C&&this.unuse({stack:h,name:C}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:b,level:S??10,name:C}),d.sort(function(O,D){return O.level-D.level}),this},Dt.prototype.unuse=function(d){var h=d.stack,b=d.name,S=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(C){return S?C.create!==S:!!b&&C.name!==b})),this},Dt.prototype.open=function(){var d=this;return _i(Ht,function(){return mT(d)})},Dt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Eo.indexOf(this);if(0<=h&&Eo.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Te(function(b){d.dbReadyResolve=b}),d.openCanceller=new Te(function(b,S){d.cancelOpen=S}))},Dt.prototype.close=function(b){var h=(b===void 0?{disableAutoOpen:!0}:b).disableAutoOpen,b=this._state;h?(b.isBeingOpened&&b.cancelOpen(new ge.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new ge.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},Dt.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var b=0<arguments.length&&typeof arguments[0]!="object",S=this._state;return new Te(function(C,O){function D(){h.close(d);var B=h._deps.indexedDB.deleteDatabase(h.name);B.onsuccess=wt(function(){var H,q,X;H=h._deps,q=h.name,X=H.indexedDB,H=H.IDBKeyRange,oh(X)||q===Zu||ih(X,H).delete(q).catch(Ke),C()}),B.onerror=Ir(O),B.onblocked=h._fireOnBlocked}if(b)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(D):D()})},Dt.prototype.backendDB=function(){return this.idbdb},Dt.prototype.isOpen=function(){return this.idbdb!==null},Dt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Dt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Dt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dt.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),Dt.prototype.transaction=function(){var d=(function(h,b,S){var C=arguments.length;if(C<2)throw new ge.InvalidArgument("Too few arguments");for(var O=new Array(C-1);--C;)O[C-1]=arguments[C];return S=O.pop(),[h,K(O),S]}).apply(this,arguments);return this._transaction.apply(this,d)},Dt.prototype._transaction=function(d,h,b){var S=this,C=Le.trans;C&&C.db===this&&d.indexOf("!")===-1||(C=null);var O,D,B=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(D=h.map(function(q){if(q=q instanceof S.Table?q.name:q,typeof q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return q}),d=="r"||d===Gf)O=Gf;else{if(d!="rw"&&d!=Qf)throw new ge.InvalidArgument("Invalid transaction mode: "+d);O=Qf}if(C){if(C.mode===Gf&&O===Qf){if(!B)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");C=null}C&&D.forEach(function(q){if(C&&C.storeNames.indexOf(q)===-1){if(!B)throw new ge.SubTransaction("Table "+q+" not included in parent transaction.");C=null}}),B&&C&&!C.active&&(C=null)}}catch(q){return C?C._promise(null,function(X,z){z(q)}):It(q)}var H=(function q(X,z,ne,Q,J){return Te.resolve().then(function(){var Z=Le.transless||Le,te=X._createTransaction(z,ne,X._dbSchema,Q);if(te.explicit=!0,Z={trans:te,transless:Z},Q)te.idbtrans=Q.idbtrans;else try{te.create(),te.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(fe){return fe.name===Ue.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return q(X,z,ne,null,J)})):It(fe)}var ie,le=V(J);return le&&So(),Z=Te.follow(function(){var fe;(ie=J.call(te,te))&&(le?(fe=Ts.bind(null,null),ie.then(fe,fe)):typeof ie.next=="function"&&typeof ie.throw=="function"&&(ie=hh(ie)))},Z),(ie&&typeof ie.then=="function"?Te.resolve(ie).then(function(fe){return te.active?fe:It(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return ie})).then(function(fe){return Q&&te._resolve(),te._completion.then(function(){return fe})}).catch(function(fe){return te._reject(fe),It(fe)})})}).bind(null,this,O,D,C,b);return C?C._promise(O,H,"lock"):Le.trans?_i(Le.transless,function(){return S._whenReady(H)}):this._whenReady(H)},Dt.prototype.table=function(d){if(!f(this._allTables,d))throw new ge.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Dt);function Dt(d,h){var b=this;this._middlewares={},this.verno=0;var S=Dt.dependencies;this._options=h=r({addons:Dt.addons,autoOpen:!0,indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},S=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var C,O,D,B,H,q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};q.dbReadyPromise=new Te(function(z){q.dbReadyResolve=z}),q.openCanceller=new Te(function(z,ne){q.cancelOpen=ne}),this._state=q,this.name=d,this.on=Ha(this,"populate","blocked","versionchange","close",{ready:[we,Ke]}),this.once=function(z,ne){var Q=function(){for(var J=[],Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];b.on(z).unsubscribe(Q),ne.apply(b,J)};return b.on(z,Q)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(z){return function(ne,Q){Dt.vip(function(){var J,Z=b._state;Z.openComplete?(Z.dbOpenError||Te.resolve().then(ne),Q&&z(ne)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(ne),Q&&z(ne)):(z(ne),J=b,Q||z(function te(){J.on.ready.unsubscribe(ne),J.on.ready.unsubscribe(te)}))})}}),this.Collection=(C=this,qa(sT.prototype,function(ie,te){this.db=C;var Q=Lv,J=null;if(te)try{Q=te()}catch(le){J=le}var Z=ie._ctx,te=Z.table,ie=te.hook.reading.fire;this._ctx={table:te,index:Z.index,isPrimKey:!Z.index||te.schema.primKey.keyPath&&Z.index===te.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:Z.or,valueMapper:ie!==Pt?ie:null}})),this.Table=(O=this,qa(zv.prototype,function(z,ne,Q){this.db=O,this._tx=Q,this.name=z,this.schema=ne,this.hook=O._allTables[z]?O._allTables[z].hook:Ha(null,{creating:[de,Ke],reading:[P,Pt],updating:[N,Ke],deleting:[F,Ke]})})),this.Transaction=(D=this,qa(aT.prototype,function(z,ne,Q,J,Z){var te=this;z!=="readonly"&&ne.forEach(function(ie){ie=(ie=Q[ie])===null||ie===void 0?void 0:ie.yProps,ie&&(ne=ne.concat(ie.map(function(le){return le.updatesTable})))}),this.db=D,this.mode=z,this.storeNames=ne,this.schema=Q,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=Ha(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(ie,le){te._resolve=ie,te._reject=le}),this._completion.then(function(){te.active=!1,te.on.complete.fire()},function(ie){var le=te.active;return te.active=!1,te.on.error.fire(ie),te.parent?te.parent._reject(ie):le&&te.idbtrans&&te.idbtrans.abort(),It(ie)})})),this.Version=(B=this,qa(pT.prototype,function(z){this.db=B,this._cfg={version:z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,qa(qv.prototype,function(z,ne,Q){if(this.db=H,this._ctx={table:z,index:ne===":id"?null:ne,or:Q},this._cmp=this._ascending=ot,this._descending=function(J,Z){return ot(Z,J)},this._max=function(J,Z){return 0<ot(J,Z)?J:Z},this._min=function(J,Z){return ot(J,Z)<0?J:Z},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(z){0<z.newVersion?console.warn("Another connection wants to upgrade database '".concat(b.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(b.name,"'. Closing db now to resume the delete request.")),b.close({disableAutoOpen:!1})}),this.on("blocked",function(z){!z.newVersion||z.newVersion<z.oldVersion?console.warn("Dexie.delete('".concat(b.name,"') was blocked")):console.warn("Upgrade '".concat(b.name,"' blocked by other connection holding version ").concat(z.oldVersion/10))}),this._maxKey=Ya(h.IDBKeyRange),this._createTransaction=function(z,ne,Q,J){return new b.Transaction(z,ne,Q,b._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(z){b.on("blocked").fire(z),Eo.filter(function(ne){return ne.name===b.name&&ne!==b&&!ne._state.vcFired}).map(function(ne){return ne.on("versionchange").fire(z)})},this.use(vT),this.use(_T),this.use(wT),this.use(gT),this.use(yT);var X=new Proxy(this,{get:function(z,ne,Q){if(ne==="_vip")return!0;if(ne==="table")return function(Z){return hc(b.table(Z),X)};var J=Reflect.get(z,ne,Q);return J instanceof zv?hc(J,X):ne==="tables"?J.map(function(Z){return hc(Z,X)}):ne==="_createTransaction"?function(){return hc(J.apply(this,arguments),X)}:J}});this.vip=X,S.forEach(function(z){return z(b)})}var pc,Qn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kT=(yh.prototype.subscribe=function(d,h,b){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:b})},yh.prototype[Qn]=function(){return this},yh);function yh(d){this._subscribe=d}try{pc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{pc={indexedDB:null,IDBKeyRange:null}}function l0(d){var h,b=!1,S=new kT(function(C){var O=V(d),D,B=!1,H={},q={},X={get closed(){return B},unsubscribe:function(){B||(B=!0,D&&D.abort(),z&&Os.storagemutated.unsubscribe(Q))}};C.start&&C.start(X);var z=!1,ne=function(){return qf(J)},Q=function(Z){cc(H,Z),uh(q,H)&&ne()},J=function(){var Z,te,ie;!B&&pc.indexedDB&&(H={},Z={},D&&D.abort(),D=new AbortController,ie=function(le){var fe=_o();try{O&&So();var xe=Cs(d,le);return xe=O?xe.finally(Ts):xe}finally{fe&&ko()}}(te={subscr:Z,signal:D.signal,requery:ne,querier:d,trans:null}),Promise.resolve(ie).then(function(le){b=!0,h=le,B||te.signal.aborted||(H={},function(fe){for(var xe in fe)if(f(fe,xe))return;return 1}(q=Z)||z||(Os(Qa,Q),z=!0),qf(function(){return!B&&C.next&&C.next(le)}))},function(le){b=!1,["DatabaseClosedError","AbortError"].includes(le==null?void 0:le.name)||B||qf(function(){B||C.error&&C.error(le)})}))};return setTimeout(ne,0),X});return S.hasValue=function(){return b},S.getValue=function(){return h},S}var Ci=Xr;function vh(d){var h=js;try{js=!0,Os.storagemutated.fire(d),fh(d,!0)}finally{js=h}}p(Ci,r(r({},tt),{delete:function(d){return new Ci(d,{addons:[]}).delete()},exists:function(d){return new Ci(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=Ci.dependencies,b=h.indexedDB,h=h.IDBKeyRange,(oh(b)?Promise.resolve(b.databases()).then(function(S){return S.map(function(C){return C.name}).filter(function(C){return C!==Zu})}):ih(b,h).toCollection().primaryKeys()).then(d)}catch{return It(new ge.MissingAPI)}var h,b},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Le.trans?_i(Le.transless,d):d()},vip:ah,async:function(d){return function(){try{var h=hh(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Te.resolve(h)}catch(b){return It(b)}}},spawn:function(d,h,b){try{var S=hh(d.apply(b,h||[]));return S&&typeof S.then=="function"?S:Te.resolve(S)}catch(C){return It(C)}},currentTransaction:{get:function(){return Le.trans||null}},waitFor:function(d,h){return h=Te.resolve(typeof d=="function"?Ci.ignoreTransaction(d):d).timeout(h||6e4),Le.trans?Le.trans.waitFor(h):h},Promise:Te,debug:{get:function(){return be},set:function(d){oe(d)}},derive:v,extend:l,props:p,override:_,Events:Ha,on:Os,liveQuery:l0,extendObservabilitySet:cc,getByKeyPath:R,setByKeyPath:I,delByKeyPath:function(d,h){typeof h=="string"?I(d,h,void 0):"length"in h&&[].map.call(h,function(b){I(d,b,void 0)})},shallowClone:$,deepClone:re,getObjectDiff:ph,cmp:ot,asap:j,minKey:-1/0,addons:[],connections:Eo,errnames:Ue,dependencies:pc,cache:Ei,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,b){return d+h/Math.pow(10,2*b)})})),Ci.maxKey=Ya(Ci.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Os(Qa,function(d){js||(d=new CustomEvent(Zf,{detail:d}),js=!0,dispatchEvent(d),js=!1)}),addEventListener(Zf,function(d){d=d.detail,js||vh(d)}));var Ao,js=!1,u0=function(){};return typeof BroadcastChannel<"u"&&((u0=function(){(Ao=new BroadcastChannel(Zf)).onmessage=function(d){return d.data&&vh(d.data)}})(),typeof Ao.unref=="function"&&Ao.unref(),Os(Qa,function(d){js||Ao.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Xr.disableBfCache&&d.persisted){be&&console.debug("Dexie: handling persisted pagehide"),Ao!=null&&Ao.close();for(var h=0,b=Eo;h<b.length;h++)b[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Xr.disableBfCache&&d.persisted&&(be&&console.debug("Dexie: handling persisted pageshow"),u0(),vh({all:new on(-1/0,[[]])}))})),Te.rejectionMapper=function(d,h){return!d||d instanceof he||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Je[d.name]?d:(h=new Je[d.name](h||d.message,d),"stack"in d&&w(h,"stack",{get:function(){return this.inner.stack}}),h)},oe(be),r(Xr,Object.freeze({__proto__:null,Dexie:Xr,liveQuery:l0,Entity:$v,cmp:ot,PropModification:Wa,replacePrefix:function(d,h){return new Wa({replacePrefix:[d,h]})},add:function(d){return new Wa({add:d})},remove:function(d){return new Wa({remove:d})},default:Xr,RangeSet:on,mergeRanges:Xa,rangesOverlap:Zv}),{default:Xr}),Xr})})(pS);var JI=pS.exports;const Hm=nf(JI),nb=Symbol.for("Dexie"),Kd=globalThis[nb]||(globalThis[nb]=Hm);if(Hm.semVer!==Kd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Hm.semVer} and ${Kd.semVer}`);const{liveQuery:cU,mergeRanges:dU,rangesOverlap:fU,RangeSet:hU,cmp:pU,Entity:mU,PropModification:gU,replacePrefix:yU,add:vU,remove:wU,DexieYProvider:bU}=Kd;class ZI extends Kd{constructor(){super("SankeertanDB");el(this,"categories");el(this,"songIndices");el(this,"songDetails");el(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId, categoryId"})}}const it=new ZI,rp=new Map;function XI(e){const t=[];return e.forEach(n=>{const r=n.id;n.books&&Array.isArray(n.books)&&n.books.forEach(s=>{const i={...s,categoryId:r};t.push(i)})}),t}async function eD(e){const t=XI(e);if(t.length===0){console.warn("No books found after transformation. Skipping 'books' table refresh.");return}try{await it.transaction("rw",it.books,async()=>{await it.books.clear(),await it.books.bulkPut(t)}),console.log(`Successfully saved ${t.length} books to the 'books' table.`)}catch(n){console.error("Error saving books to DB:",n)}}async function tD(){try{const e=await it.categories.toArray();return e.length>0?e:void 0}catch(e){console.error("Error retrieving categories from DB:",e);return}}async function nD(e){try{await it.categories.clear(),await it.categories.bulkAdd(e),await eD(e),console.log("Categories saved successfully.")}catch(t){console.error("Error saving categories to DB:",t)}}const Nu=async e=>{try{return await it.songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function rD(e){try{const t=await it.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${t} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function sD(e){try{return await it.songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function rb(e){const t=e.map(async s=>{const i=s.bookId,o=s.songCount||0,[a,l,u]=await Promise.all([Nu(i),sD(i),lD(i)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const f=c>0?l:0;return{bookId:i,status:{totalSongs:c,downloadedSongs:f,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(s=>{r[s.bookId]=s.status}),r}async function mS(e){try{const t=await it.songDetails.where("bookId").equals(e).delete(),n=await it.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${t}, Indices removed: ${n}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function My(e){try{const t=await it.songIndices.where("bookId").equals(e).sortBy("insertionId");return t.length>0?t:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function Fy(e,t){try{await it.songIndices.where("bookId").equals(e).delete();const n=t.map(r=>({...r,bookId:e,tags:r.tags||[]}));await it.songIndices.bulkAdd(n)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}async function Pf(e,t){try{const n=[e,t];return await it.songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function iD(e,t){try{const n=[e,t];return await it.songDetails.where("[bookId+songTitle]").equals(n).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const By=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function gS(e){const t=By(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await it.songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function oD(e,t){try{const n=[e,t];await it.songDetails.delete(n)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function aD(e,t,n,r){const{sourceRow:s,songTitle:i}=t,o=By(e,i);if(await Pf(e,i))return;const l=rp.get(o);if(l)return l;const u=String(s),c=Number(s),f=(async()=>{if(!e||!i||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${i}, Row: ${s}, User: ${n}`);try{const p=await r({bookId:e,sourceRow:u,songTitle:i,sessionuser:n});if(p.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[m,w,v,x]=p;await gS({bookId:e,songTitle:i,sourceRow:u,indexPosition:x,songData:m,metadata:w,sourceLanguage:v})}catch(p){throw console.error(`Failed to download and cache song ${i} in book ${e}:`,p),p}})();rp.set(o,f);try{await f}finally{rp.delete(o)}}async function lD(e){try{return await it.songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function uD(e){try{const t=it.songIndices.where("bookId").equals(e).sortBy("insertionId"),n=it.songDetails.where("bookId").equals(e).toArray(),[r,s]=await Promise.all([t,n]);return console.log(`Exported ${r.length} indices and ${s.length} song details for Book ID: ${e}`),{bookId:e,songIndices:r,songDetails:s}}catch(t){return console.error(`Error exporting full book structure for ${e} from Dexie:`,t),null}}async function cD(e){if(e.length===0){console.warn("Attempted to save empty song indices list. Aborting operation.");return}const t=e[0].bookId,n=e.map(r=>({...r,timestamp:Date.now()}));try{await it.transaction("rw",it.songIndices,async r=>{await it.songIndices.where("bookId").equals(t).delete(),await it.songIndices.bulkAdd(n),console.log(` Dexie Sync (saveBulkSongIndices): Atomic CLEAR and re-insertion successful. ${n.length} items saved.`)}).catch(r=>{throw console.error(" Critical Dexie Sync Failure: Transaction rolled back.",r),r})}catch(r){throw console.error(" Fatal Error during song indices synchronization:",r),r}}async function dD(e){const t=e.map(n=>({cacheId:By(n.bookId,n.songTitle),timestamp:Date.now(),...n}));try{await it.songDetails.bulkPut(t),console.log(`Dexie Bulk Save: Successfully inserted/updated ${t.length} song details.`)}catch(n){throw console.error("Error during Dexie bulkPut transaction:",n),n}}async function qm(e){const t=await it.books.get(e);if(t){let n=!1;(t.isFullBookDownloadable===!0||t.isFullBookDownloadable==="true")&&(n=!0);const r=t.Type==="book"?"book":"mini-book";return{isFullBookDownloadable:n,bookType:r}}return null}async function fD(){console.log("Fetching all indices for unique book ID calculation...");try{const t=(await it.songIndices.toArray()).map(n=>n.bookId);return[...new Set(t)]}catch(e){return console.error("Dexie Error: Failed to get unique book IDs via toArray().",e),[]}}async function yS(e){const n=(await it.songIndices.where("bookId").equals(e).and(i=>i.type==="song"||!i.type).toArray()).length;return n===0?!1:await it.songDetails.where("bookId").equals(e).count()===n&&n>0}async function hD(){console.log("Starting global download status check...");const t=(await fD()).map(async s=>{const i=await yS(s);return{bookId:s,isDownloaded:i}}),r=(await Promise.all(t)).filter(s=>s.isDownloaded).map(s=>s.bookId);return console.log(`Global status check complete. Found ${r.length} fully downloaded books.`),r}const vS=E.createContext({categories:[],isLoading:!1,isFetching:!1,error:null}),pD=async e=>{const t=new URL(`${vo}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const i=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(i)}`)}const r=await n.json();return Object.keys(r).filter(i=>i!=="books").map(i=>({name:i,bookCount:Array.isArray(r[i])?r[i].length:0,books:Array.isArray(r[i])?r[i].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],Type:o.Type,songCount:o["Song Count"],verseCount:o["Verse Count"],author:o.author,language:o.language,isFullBookDownloadable:o.isFullBookDownloadable==="true"||o.isFullBookDownloadable===!0,isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:i.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(i)}&font=lora`}))},mD=({children:e})=>{var m;const{session:t}=bo(),n=(m=t==null?void 0:t.user)==null?void 0:m.email,[r,s]=E.useState(void 0),[i,o]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const v=await tD();v&&s(v)}catch(v){console.error("Error retrieving categories data from IndexedDB:",v)}finally{o(!1)}})()},[]);const{isLoading:a,isFetching:l,error:u,data:c,isFetchedAfterMount:f}=Tf({queryKey:["categories",n],queryFn:()=>pD(n??null),staleTime:1/0,initialData:r,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1,enabled:!!n&&!i});E.useEffect(()=>{c&&!l&&nD(c).catch(w=>{console.error("Error during IndexedDB synchronization:",w)})},[c,l,f]);const p=i||a;return k.jsx(vS.Provider,{value:{categories:c??r??[],isLoading:p,isFetching:l,error:u},children:e})},Uy=()=>E.useContext(vS),sb=e=>{const[t,n]=E.useState(!1);return E.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),s=i=>n(i.matches);return n(r.matches),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e]),t};function gD(){var w;const{categories:e,isLoading:t,isFetching:n,error:r}=Uy(),s=jr(),[i,o]=E.useState([]);sb("(max-width: 600px) and (orientation: portrait)"),sb("(max-width: 900px) and (orientation: landscape)");const{session:a}=bo(),l=(w=a==null?void 0:a.user)==null?void 0:w.email,u=Du();if(E.useEffect(()=>{o((x=>{const g=[],y=360/x;for(let _=0;_<x;_++){const T=_*y;g.push(`hsl(${T}, 70%, 60%)`)}return g})(e.length))},[e.length]),t||n)return k.jsx("div",{children:"Loading categories..."});if(r instanceof Error)return k.jsxs("div",{children:["Error loading categories: ",r.message]});const c=async()=>{await it.categories.delete("1"),console.log("Categories & Books -> IndexedDB cache cleared. Data will be reloaded from the server."),u.invalidateQueries({queryKey:["categories",l]})},f=(v,x)=>{v.stopPropagation(),s(`/books/${x}`)},p={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea"},categoryGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"}};({...p.categoryGridBase});const m=e==null?void 0:e.filter(v=>{var x;return(x=v.books)==null?void 0:x.some(g=>g.Type==="book")});return k.jsxs("div",{style:p.container,children:[k.jsxs("h2",{style:p.heading,children:["Book Categories",k.jsx("button",{onClick:c,style:{marginRight:"10px"},title:"Reload",children:""})]}),k.jsx("div",{style:p.categoryGrid,children:m==null?void 0:m.map((v,x)=>k.jsxs("div",{onClick:g=>f(g,v.id),style:{...p.categoryItem,backgroundColor:x%2===0?"#f8f9fa":"#ffffff"},className:"category-item",children:[k.jsx("div",{style:{...p.categoryIcon,backgroundColor:i[x]||"#3498db"},children:""}),k.jsx("span",{style:p.categoryName,children:v.name})]},v.id))}),k.jsx("style",{children:`
          .category-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #3498db;
          }
        `})]})}const yD=E.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),zy=()=>E.useContext(yD);console.log("DownloadStatusProvider Function Running!");const ib={},wS=E.createContext(void 0),vD=({children:e,books:t})=>{const n=E.useMemo(()=>t.reduce((x,g)=>(x[g.bookId]={totalSongs:g.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},x),{}),[t]),[r,s]=E.useState(n),[i,o]=E.useState(!1);E.useEffect(()=>{if(!t||t.length===0){s({}),o(!0);return}(async()=>{try{const g=await rb(t),y={};for(const _ of t){const T=_.bookId,j=g[T]||{},R=await Nu(T);y[T]={totalSongs:_.songCount||j.totalSongs||0,downloadedSongs:j.downloadedSongs||0,isIndexDownloaded:R,downloadingSongs:{}}}s(y),o(!0)}catch(g){console.error("Failed to load or initialize download status:",g),s({}),o(!0)}})()},[t]);const a=E.useMemo(()=>t.map(x=>x.bookId).join(","),[t]);E.useEffect(()=>{if(!t||t.length===0){s(ib);return}(async()=>{try{const g=await rb(t);s(g)}catch(g){console.error("Failed to load initial download status from DB:",g),s(ib)}})()},[a,t]);const l=E.useCallback((x,g)=>{s(y=>({...y,[x]:{...y[x],totalSongs:g}}))},[]),u=E.useCallback((x,g)=>{s(y=>({...y,[x]:{...y[x],downloadedSongs:g}}))},[]),c=E.useCallback((x,g)=>{s(y=>({...y,[x]:{...y[x],isIndexDownloaded:g}}))},[]),f=E.useCallback((x,g)=>{s(y=>{var _;return{...y,[x]:{...y[x],downloadingSongs:{...(_=y[x])==null?void 0:_.downloadingSongs,[g]:!0}}}})},[]),p=E.useCallback((x,g)=>{s(y=>{const _=y[x];if(!_)return y;const T={..._.downloadingSongs};return delete T[g],{...y,[x]:{..._,downloadedSongs:(_.downloadedSongs||0)+1,downloadingSongs:T}}})},[]),m=E.useCallback((x,g,y)=>{s(_=>{const T=_[x]||{},j=T.downloadedSongs||0;return{..._,[x]:{...T,totalSongs:g,downloadedSongs:j,downloadingSongs:y}}})},[]),w=E.useCallback(x=>{s(g=>{const y=g[x];return y?{...g,[x]:{...y,downloadedSongs:y.totalSongs,downloadingSongs:{}}}:g})},[]),v={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:f,markSongAsDownloaded:p,updateIndexStatus:c,markBookDownloadStart:m,markBookDownloadComplete:w,isLoaded:i};return k.jsx(wS.Provider,{value:v,children:e})},Vy=()=>{const e=E.useContext(wS);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},wD=3e3,bD=1,xD=5,bS=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const s=new URL(vo);s.searchParams.append("mode","api"),s.searchParams.append("apiname","getsongtextforsong"),s.searchParams.append("book",e),s.searchParams.append("sourcerow",t),s.searchParams.append("songtitle",n),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString());if(!i.ok){const o=await i.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},_D=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:s,markBookDownloadStart:i,markBookDownloadComplete:o}=Vy(),a=E.useCallback(c=>{const f=r[c];if(!f)return!1;const p=f.downloadingSongs??{};return Object.keys(p).length>0},[r]),l=E.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=E.useCallback(async(c,f)=>{if(a(c))return 0;let p=[],m=0;if(await Nu(c)){const y=await My(c);y&&Array.isArray(y)&&(p=y.map(_=>({sourceRow:_.sourceRow,songTitle:_.songTitle,tags:_.tags})),m=p.length)}else try{const y=new URL(vo);y.searchParams.append("mode","api"),y.searchParams.append("apiname","getsongsforbook"),y.searchParams.append("book",c),f&&y.searchParams.append("sessionuser",f);const _=await fetch(y.toString());if(!_.ok){const R=await _.json();throw new Error(`Failed to fetch song indices: ${_.status} - ${JSON.stringify(R)}`)}const j=(await _.json()).map(R=>({...R,sourceRow:typeof R.sourceRow=="string"?parseInt(R.sourceRow,10):R.sourceRow,tags:R.tags??void 0}));p=j,m=p.length,await Fy(c,j)}catch{return 0}if(p.length===0)return 0;const w=[];for(const y of p)await Pf(c,y.songTitle)?s(c,y.songTitle):w.push(y);const v=w.slice(0,xD),x={};for(const y of v)x[y.songTitle]="pending";i(c,m,x);let g=0;for(const y of v)try{g>=bD&&(await new Promise(_=>setTimeout(_,wD)),g=0),await aD(c,y,f??null,bS),s(c,y.songTitle),g++}catch{}return m},[e,t,n,a,s,i]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},gr={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},Ky=()=>{const e=dr(),{categoryId:t,bookId:n,songTitle:r}=Au(),s=r?decodeURIComponent(r):"",[i,o]=He.useState(!1),a={...gr.link,color:i?"#0056b3":"#007bff",textDecoration:i?"underline":"none"},l=k.jsx(rr,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"});return e.pathname.startsWith("/books/")?k.jsxs("div",{style:gr.container,children:[l,k.jsx("span",{style:gr.separator,children:">"}),t]}):e.pathname.startsWith("/book/")?k.jsxs("div",{style:gr.container,children:[l,k.jsx("span",{style:gr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:gr.separator,children:">"}),n]}):e.pathname.startsWith("/details/book/")?k.jsxs("div",{style:gr.container,children:[l,k.jsx("span",{style:gr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:gr.separator,children:">"}),k.jsx(rr,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:n}),k.jsx("span",{style:gr.separator,children:">"}),k.jsx("span",{style:gr.currentPage,children:s})]}):null},xS=E.createContext({preferredLanguage:"devanagari",setPreferredLanguage:()=>{}}),_S=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=E.useState(t||"devanagari");return E.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),k.jsx(xS.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r},children:e})},Ua=()=>E.useContext(xS);async function kS(e,t){const n=[];let r=0;for(;r<e.length;){const s=e.slice(r,r+t),i=await Promise.all(s.map(o=>o()));n.push(...i),r+=t}return n}const ob=3,kD=10;async function SD(e,t,n,r,s){const i=n||new Set,o=r.filter(a=>a.type==="link"&&a.link).map(a=>{try{return JSON.parse(a.link).bookId}catch{return null}}).filter(a=>a!==null&&a!==e).filter((a,l,u)=>u.indexOf(a)===l);if(o.length>0){const a=o.slice(0,kD);console.log(`[RECURSION START] Found ${o.length} linked books in ${e}. Queuing ${a.length} for batched download...`);const l=a.filter(u=>!i.has(u)).map(u=>()=>s(u,t,n));l.length>0?(console.log(`[BATCH EXECUTION] Queued ${l.length} unique downloads with batch size ${ob}.`),await kS(l,ob),console.log(`[RECURSION COMPLETE] All batched linked books for ${e} have been processed.`)):console.log(`[RECURSION SKIP] All queued linked books in ${e} are already being processed or downloaded.`)}}function ED(e,t){return e.filter(s=>s.type==="link"&&s.link).map(s=>{try{return JSON.parse(s.link).bookId}catch(i){return console.error("Failed to parse link JSON:",s.link,i),null}}).filter(s=>s!==null).filter((s,i,o)=>s!==t&&o.indexOf(s)===i)}async function Gm(e,t,n=new Set,r){if(!e)return 0;if(n.has(e))return console.warn(`[SKIP] Book ${e} is already in the download chain. Skipping.`),0;const s=await qm(e);if(!s||!s.isFullBookDownloadable)return console.warn(`[SKIP] Book ${e} is not configured as full-book downloadable. Skipping.`),0;if(await yS(e))return console.log(`[SKIP] Book ${e} is already fully downloaded (from Dexie check). Skipping.`),0;n.add(e),console.log(`[DOWNLOAD START] Initiating bulk download for book ID: ${e}`);const i=new URL(vo);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getentirebookasjson"),i.searchParams.append("book",e),i.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`[FETCH] URL for ${e}: ${i.toString()}`);try{const o=await fetch(i.toString());if(!o.ok){let f={};try{f=await o.json()}catch{f={message:"No detailed error message, raw response status error."}}throw new Error(`Failed to fetch content for book ${e}: ${o.status} - ${JSON.stringify(f)}`)}const a=await o.json(),{songIndices:l,songDetails:u}=a;if(!u||u.length===0)return console.log(`[DOWNLOAD] No song details found for book: ${e}. Returning 0.`),0;await dD(u),await cD(l),console.log(`[DOWNLOAD SUCCESS] Data for ${e} saved to IndexedDB. Songs downloaded: ${u.length}`);const c=ED(l,e);if(c.length>0){console.log(`[RECURSION START] Found ${c.length} linked books in ${e}: ${c.join(", ")}. Initiating parallel download...`);const f=c.map(p=>Gm(p,t,n));await Promise.all(f),console.log(`[RECURSION COMPLETE] All linked books for ${e} have been processed.`)}return console.log(`[RECURSION CHECK] Checking for linked books in ${e}...`),await SD(e,t,n,l,Gm),u.length}catch(o){throw console.error(`[DOWNLOAD ERROR] Failed during processing for ${e}:`,o),o}finally{console.log(`[DOWNLOAD END] Finished processing book ID: ${e}.`)}}const SS=(e,t)=>{const n=Du(),[r,s]=E.useState({status:"idle",downloadedCount:null,error:null}),i=E.useCallback(async()=>{if(r.status!=="loading"){s({status:"loading",downloadedCount:null,error:null});try{const o=await Gm(e,t);return console.log("Bulk download successful. Invalidating React Query cache..."),await n.invalidateQueries({queryKey:EO(e)}),await n.invalidateQueries({queryKey:SO}),console.log("Cache invalidated and refetched successfully."),s({status:"success",downloadedCount:o,error:null}),o}catch(o){const a=o.message||"Bulk download failed.";return s({status:"error",downloadedCount:null,error:a}),0}}},[e,t,r.status,n]);return{...r,startBulkDownload:i,isDownloading:r.status==="loading"}},ES=He.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:s,isEffectivelyOffline:i,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:f,handleDeleteIndexClick:p,handleDeleteBookClick:m,DownloadNotAvailableIcon:w,DownloadIndexIcon:v,DownloadedIcon:x,DownloadBookIcon:g,DeleteIndexIcon:y,DeleteBookIcon:_}=e,{status:T,isDownloading:j,startBulkDownload:R}=SS(t.bookId,s),I=a(t.bookId),$=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,U=n.downloadedSongs||0,K=n.totalSongs||t.songCount||0,me=Math.max(Number(K),U),M=me>0?Math.floor(U/me*100):0,re=r[t.bookId]??!1,A=U===me&&me>0,Y=t.isFullBookDownloadable;return k.jsx("li",{onClick:ve=>u(ve,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:k.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[k.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),k.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${M}%`}}),k.jsx("span",{className:`relative z-20 px-2 ${M>25,"text-black-900"}`,children:I?k.jsxs("span",{className:"font-bold",children:[k.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),k.jsxs("span",{className:"text-green-700",children:["Downloading... (",$," remaining)"]})]}):k.jsx("span",{className:"text-black-900",children:t.bookName})})]}),k.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[k.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:k.jsxs("span",{children:["(",U,"/",me," downloaded)"]})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:re?k.jsxs("span",{className:"flex items-center text-green-500",children:[x," ",k.jsx("span",{className:"ml-1",children:"Index"})]}):k.jsx("button",{onClick:ve=>{ve.stopPropagation(),c(ve,t.bookId)},disabled:i||o||a(t.bookId)||re,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":k.jsxs(k.Fragment,{children:[v," ",k.jsx("span",{className:"ml-1",children:"Index"})]})})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:A?k.jsxs("span",{className:"flex items-center text-green-500",children:[x," ",k.jsx("span",{className:"ml-1",children:"Book"})]}):k.jsx(k.Fragment,{children:Y?k.jsx("button",{onClick:ve=>{ve.stopPropagation(),R()},disabled:i||o||a(t.bookId),className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:k.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[g," ",j?"Downloading (Fast)...":T==="success"?"Downloaded ":"Book"]})}):k.jsxs("span",{className:"flex items-center text-red-500 cursor-help",title:"Bulk download is restricted for this book.",children:[w,k.jsx("span",{className:"ml-1 text-sm font-medium",children:"Not Available"})]})})}),k.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[k.jsxs("button",{onClick:ve=>{ve.stopPropagation(),p(ve,t.bookId)},disabled:!re,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[y," ",k.jsx("span",{className:"ml-1",children:"Index"})]}),k.jsxs("button",{onClick:ve=>{ve.stopPropagation(),m(ve,t.bookId)},disabled:a(t.bookId)||M===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[_," ",k.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});ES.displayName="BookListItem";const CD=3;function TD(e,t){return t?t.filter(n=>n.type==="link"&&n.link).map(n=>{try{return JSON.parse(n.link).bookId}catch(r){return console.error("Error parsing link in song index:",r),null}}).filter(n=>n!==null&&n!==e).filter((n,r,s)=>s.indexOf(n)===r):[]}async function CS(e,t){if(t.has(e)){console.log(`[DELETION SKIP] Already processed ${e}.`);return}t.add(e),console.log(`[DELETION START] Analyzing dependencies for book: ${e}`);const n=await My(e),r=TD(e,n);if(r.length>0){console.log(`[RECURSION CHECK] Book ${e} links to ${r.length} unique books.`);const o=r,l=(await Promise.all(o.map(async u=>{const c=await qm(u);return{id:u,type:c?c.bookType:"mini-book"}}))).filter(u=>u.type==="mini-book").map(u=>u.id);if(l.length>0){const u=l.filter(c=>!t.has(c)).map(c=>()=>CS(c,t));u.length>0&&(console.log(`[BATCH EXECUTION] Queuing ${u.length} *mini-book* dependency deletions.`),await kS(u,CD),console.log(`[RECURSION COMPLETE] All mini-book dependencies for ${e} have been processed.`))}}const s=await qm(e);(s?s.bookType:"book")==="mini-book"?(await mS(e),console.log(`[DELETION SUCCESS] Successfully deleted mini-book ${e} and its dependencies.`)):console.log(`[CLEANUP COMPLETE] Book ${e} is type 'Book'. Only dependencies were deleted.`)}function PD(e,t){const n=E.useMemo(()=>((e==null?void 0:e.books)??[]).filter(a=>a.Type==="book"),[e==null?void 0:e.books]),[r,s]=E.useState(n);return E.useEffect(()=>{if(!t){s(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await Nu(u.bookId)})))).filter(u=>u.isCached);s(l)})()},[n,t]),E.useMemo(()=>t?r:n,[t,n,r])}function AD(){var he,ye;const{categoryId:e}=Au(),t=jr(),{categories:n,isLoading:r,isFetching:s,error:i}=Uy(),{isEffectivelyOffline:o}=zy(),a=E.useMemo(()=>{if(n&&e)return n.find(ce=>ce.id===e)},[n,e]),l=PD(a,o),{downloadAllSongsForBook:u,isDownloadingBook:c,isAnyBookDownloading:f}=_D(),[p,m]=E.useState(null),[w,v]=E.useState(!1),[x,g]=E.useState({});Du();const{preferredLanguage:y}=Ua(),{downloadStatus:_,isLoaded:T,updateDownloadProgress:j,updateDownloadedCount:R}=Vy(),{session:I}=bo(),$=(he=I==null?void 0:I.user)==null?void 0:he.email;E.useEffect(()=>{if(!l||l.length===0){g({});return}(async()=>{const Re=l.map(ge=>Nu(ge.bookId)),Ue=await Promise.all(Re),De={};l.forEach((ge,Je)=>{De[ge.bookId]=Ue[Je]}),g(De)})()},[l]);const U=E.useCallback(async(ce,Re)=>{let De;for(let ge=0;ge<1;ge++)try{const Je=new URL(vo);Je.searchParams.append("mode","api"),Je.searchParams.append("apiname","getsongsforbook"),Je.searchParams.append("book",ce),Je.searchParams.append("sessionuser",Re??"dummyfornow");const tt=await fetch(Je.toString());if(!tt.ok){const P=await tt.text();throw new Error(`Fetch failed (Status: ${tt.status}). Body: ${P}`)}const Pt=(await tt.json()).map(P=>({...P,sourceRow:typeof P.sourceRow=="string"?parseInt(P.sourceRow,10):P.sourceRow,tags:P.tags||null}));return await Fy(ce,Pt),Pt}catch(Je){if(De=Je,ge<0){const tt=Math.pow(2,ge)*1e3;console.log(`Retrying fetch in ${tt}ms...`),await new Promise(Ke=>setTimeout(Ke,tt))}}throw De},[]),K=E.useCallback(async(ce,Re)=>{ce.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] Confirm deletion of book index [${Re}]. Proceeding with deletion assuming user confirmed.`),await rD(Re),g(Ue=>({...Ue,[Re]:!1})),j(Re,0),R(Re,0)},[j,R]),me=E.useCallback(async(ce,Re)=>{ce.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] WARNING: This will permanently delete the ENTIRE book "${Re}". Proceeding with deletion assuming user confirmed.`);const Ue=new Set;try{await CS(Re,Ue),await mS(Re),j(Re,0),R(Re,0)}catch(De){console.error(`Failed to delete book ${Re} recursively:`,De)}},[j,R]),M=E.useCallback((ce,Re)=>{console.log(`categoryId:${e}, bookId:${Re}`),ce.stopPropagation(),t(`/book/${e}/${Re}`)},[e,t]),re=async()=>{var Re;v(!0);const ce=(Re=I==null?void 0:I.user)==null?void 0:Re.email;try{for(const De of l)console.log(`Downloading index for book: ${De.bookId}`),await U(De.bookId,ce);console.log("All song indices downloaded successfully.");const Ue=l.reduce((De,ge)=>(De[ge.bookId]=!0,De),{});g(Ue)}catch(Ue){console.error("Failed to download all indices:",Ue),g({})}finally{v(!1)}},A=E.useCallback(async(ce,Re)=>{var De;ce.stopPropagation(),m(Re);const Ue=(De=I==null?void 0:I.user)==null?void 0:De.email;try{await U(Re,Ue),console.log(`Index for Book ${Re} downloaded successfully and cached.`),g(ge=>({...ge,[Re]:!0}))}catch(ge){console.error(`Failed to download index for Book ${Re}:`,ge),g(Je=>({...Je,[Re]:!1}))}finally{m(null)}},[(ye=I==null?void 0:I.user)==null?void 0:ye.email,U]),Y=E.useCallback((ce,Re,Ue)=>{ce.stopPropagation(),u(Re,$)},[u,$]),ve=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),[]),ae=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),[]),ue=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),[]),L=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]}),[]),se=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),[]),V=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),[]),W=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]}),[]);return r||s?k.jsx("div",{children:"Loading books..."}):i instanceof Error?k.jsxs("div",{children:["Error loading books: ",i.message]}):T?k.jsxs(k.Fragment,{children:[k.jsx(Ky,{}),k.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner",children:[k.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Books in ",(a==null?void 0:a.name)||"Category"]}),l.length>0?k.jsx("ul",{className:"list-none p-0 space-y-3",children:l.map(ce=>k.jsx(ES,{book:ce,status:_[ce.bookId]||{},indexDownloadStatus:x,userEmail:$??null,isEffectivelyOffline:o,isAnyBookDownloading:f,isDownloadingBook:c,isDownloadingBookIndex:p,handleBookClick:M,handleDownloadBookIndexClick:A,handleDownloadBookClick:Y,handleDeleteIndexClick:K,handleDeleteBookClick:me,DownloadNotAvailableIcon:L,DownloadIndexIcon:ve,DownloadedIcon:se,DownloadBookIcon:ue,DeleteIndexIcon:W,DeleteBookIcon:V},ce.bookId))}):k.jsx("div",{className:"text-center py-10 text-gray-500 bg-white rounded-lg shadow-md",children:o?"No cached books found. Connect to the internet to download content.":"No books found in this category."})]}),k.jsx("div",{className:"mt-6 flex justify-end",children:k.jsxs("button",{onClick:re,disabled:w,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 flex items-center justify-center space-x-2 shadow-md ${w?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[w?k.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):ae,k.jsx("span",{children:w?"Downloading All Indices...":"Download All Indices"})]})})]}):k.jsx("div",{className:"flex justify-center items-center h-40",children:k.jsx("p",{children:"Loading download status..."})})}function OD(e){return[{pattern:/([])/g,replacement:"$1",name:"Palatal"},{pattern:/([])/g,replacement:"$1",name:"Retroflex"},{pattern:/([])/g,replacement:"$1",name:"Velar"},{pattern:/([])/g,replacement:"$1",name:"Dental"},{pattern:/([])/g,replacement:"$1",name:"Labial"},{pattern:/$/g,replacement:"",name:"Word-final"},{pattern://g,replacement:"",name:"Chandrabindu  "}].reduce((n,r)=>{const s=n.replace(r.pattern,(i,o)=>r.replacement.replace("$1",o));return s!==n?s:n},e)}function jD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};return e.replace(/\u0D30\u0D4D/g,"").replace(/[-]/g,n=>t[n]||n)}function RD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};let n=e;for(const r in t){const s=t[r];n=n.replace(new RegExp(r,"g"),s)}return n}function ID(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const Wd=(e,t,n)=>{if(n==="original"||t==="tamil"&&n==="tamil_superscripted")return e;let r=e,s=e;try{return t==="devanagari"?r=OD(r):(t==="tamil"||t==="tamil_superscripted")&&(r=r.normalize("NFC")),window.Sanscript&&(s=window.Sanscript.t(r,t==="devanagari"?"devanagari":"itrans",n),n==="malayalam"?s=jD(s):n==="itrans"?t==="tamil"&&(s=ID(s)):(n==="tamil"||n==="tamil_superscripted")&&(s=RD(s))),s}catch(i){return console.error(`Sanscript Transliteration Error for target: ${n}. Returning original text.`,i),e}},DD={color:"#059669",background:"#E6FFEE"},ND={color:"#EF4444",background:"#FEEEEE"},LD={color:"green"},$D={color:"black"},ab={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},MD={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},TS={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},FD={backgroundColor:"#f0f4f8"},BD={backgroundColor:"#f5f5f5",fontWeight:"bold",fontSize:"1.2em",padding:"15px 15px 5px 15px",cursor:"default",marginBottom:"10px",marginTop:"15px",borderBottom:"2px solid #ddd",boxShadow:"none"},lb={...TS,backgroundColor:"#eaf2ff",color:"#1e40af",fontWeight:"500",border:"1px solid #c3dafe"},UD=async(e,t)=>{if(!e)return[];const n=new URL(vo);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const i=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(i)}`)}const s=await r.json();return s.data||s},zD=(e,t)=>{const[n,r]=E.useState({});return E.useEffect(()=>{if(r({}),!e||!t||t.length===0)return;(async()=>{const i=t.map(async l=>{const u=await Pf(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(i)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n},VD=(e,t)=>{const n=t==="itrans"?e.songTitle:(()=>{if(window.Sanscript)try{return Wd(e.songTitle,"itrans",t)}catch(r){return console.error("Error during transliteration",r),e.songTitle}return e.songTitle})();return e.type==="link"?k.jsxs(k.Fragment,{children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"10px",minWidth:"20px"},children:[k.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"}),k.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"})]}),k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:n})]}):k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:n})},ub=e=>{if(e.type!=="link"||!e.link)return null;try{return JSON.parse(e.link).bookId||null}catch{return null}};function KD(){var re;const{categoryId:e,bookId:t}=Au(),n=jr(),{isEffectivelyOffline:r}=zy(),{session:s}=bo(),i=(re=s==null?void 0:s.user)==null?void 0:re.email,[o,a]=E.useState(null),{preferredLanguage:l}=Ua(),[,u]=E.useState({}),[c,f]=E.useState(!0),[p,m]=E.useState([]);E.useEffect(()=>{(async()=>{f(!0);try{const Y=await hD();m(Y)}catch(Y){console.error("Failed to fetch downloaded book IDs:",Y)}finally{f(!1)}})()},[]),E.useEffect(()=>{u({})},[l]);const{isLoading:w,error:v,data:x,isFetching:g}=Tf({queryKey:["songIndices",t,i],queryFn:async()=>{if(!t||!i)return[];const A=await My(t);return A&&A.length>0?A:UD(t,i)},staleTime:1/0,gcTime:0,networkMode:"always",refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!!t&&!!i}),y=x,{downloadStatus:_}=Vy(),T=zD(t,y);if(E.useEffect(()=>{t&&x&&!g&&Fy(t,x).catch(A=>{console.error("Error saving song indices data to IndexedDB:",A)})},[t,x,g]),E.useEffect(()=>{const A=sessionStorage.getItem("lastClickedSongIndex");A!==null&&(a(parseInt(A,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),w)return k.jsx("div",{style:MD,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(v instanceof Error)return k.jsxs("div",{children:["Error loading song indices: ",v.message]});const R=(A,Y,ve,ae)=>{switch(A.stopPropagation(),Y[ve].type){case"title":break;case"link":const L=Y[ve].link,se=JSON.parse(L),V=se.categoryId.trim(),W=se.bookId.trim(),he=`/book/${V}/${W}`;console.log(he),V&&W&&(sessionStorage.setItem("lastClickedSongIndex",ve.toString()),n(he));break;default:const ye=Y[ve].sourceRow,ce=Y[ve].songTitle;ae&&(sessionStorage.setItem("lastClickedSongIndex",ve.toString()),n(`/details/book/${e}/${ae}/${ye}/${encodeURIComponent(ce)}`,{state:{filteredSongIndices:Y,index:ve}}))}},I=A=>T[A]===!0,$=A=>p.includes(A),U=(y==null?void 0:y.filter(A=>r?I(A.songTitle):!0))??[],K=(A,Y)=>{if(A.type==="title")return BD;if(A.type==="link"){const ae=ub(A),ue=ae?$(ae):!1;return{...lb,...ue?DD:ND,...Y===o&&ab}}const ve=I(A.songTitle);return{...TS,...ve?LD:$D,...Y===o&&ab}},me=(A,Y)=>{Y!=="title"&&(A.currentTarget.style.backgroundColor=FD.backgroundColor)},M=(A,Y)=>{Y!=="title"&&(Y==="link"?A.currentTarget.style.backgroundColor=lb.backgroundColor:A.currentTarget.style.backgroundColor="")};return k.jsxs(k.Fragment,{children:[k.jsx(Ky,{}),k.jsxs("div",{children:[k.jsxs("h2",{children:["Song Indices for Book:"," ",`bookId: ${t} (${U.length} items)`]}),k.jsx("ul",{className:"list-none p-0 m-0",children:U==null?void 0:U.map((A,Y)=>{var ve;return ub(A),k.jsxs("li",{onClick:ae=>{A.type!=="title"&&R(ae,U,Y,t)},style:K(A,Y),onMouseEnter:ae=>me(ae,A.type),onMouseLeave:ae=>M(ae,A.type),className:`transition-all duration-150 ease-in-out ${A.type!=="title"?"hover:shadow-md":""}`,children:[VD(A,l),A.type==="song"&&k.jsx("span",{style:{marginLeft:"10px",color:"#EF4444"},children:t&&((ve=_[t])==null?void 0:ve.downloadingSongs[A.songTitle||""])&&"..downloading song.."}),A.type==="link"&&$(t)&&k.jsx("span",{style:{marginLeft:"10px",color:"orange",fontSize:"0.85em",fontWeight:"600"},children:"..downloading linked book.."})]},A.sourceRow)})})]})]})}const WD=e=>{const t=/([-])(?![])(?=[-])/g;return e.replace(t,"$1&shy;")},HD=e=>{const t=/<link\s+categoryId="([^"]+)"\s+bookId="([^"]+)"\s+sourceRow=(?:\"([^\"]+)\"|(\S+))\s+songTitle="([^"]+)">([\s\S]*?)<\/link>/gi;return e.replace(t,(n,r,s,i,o,a,l)=>{const u=i||o,c=r.replace(/"/g,"&quot;"),f=s.replace(/"/g,"&quot;"),p=u.replace(/"/g,"&quot;"),m=a.replace(/"/g,"&quot;");return`
      <a 
        href="#"
        class="text-indigo-600 hover:text-indigo-800 font-medium underline cursor-pointer transition-colors duration-150"
        onclick="event.preventDefault(); window.handleInternalNavigation(
          '${c}', 
          '${f}', 
          '${p}', 
          '${m}'
        );"
      >
        ${l}
      </a>
    `})},qD=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:s=[],striped:i=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c})=>{if(!Array.isArray(e)||e.length<1)return k.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[f,...p]=e,m=v=>{let x=String(v).replace(/ \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof v=="string"&&u!==c)try{const g=x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let y=Wd(g,c,u);(u.toLowerCase()==="devanagari"||u.toLowerCase()==="devanagari")&&(y=WD(y)),x=y}catch(g){return console.error("Error during transliteration:",g),{__html:x}}return x=x.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),x=HD(x),{__html:x}},w=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return k.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${w} ${t}`,children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsx("tr",{children:f.map((v,x)=>k.jsx("th",{className:`
         px-4 py-4 text-left text-${l} font-medium text-gray-700
         ${r.includes(x)?n:""}
         sticky top-0 bg-gray-100
        `,dangerouslySetInnerHTML:m(v)},`th-${x}`))})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((v,x)=>k.jsx("tr",{id:`trRowAsAnchor-${x}`,className:`
    ${i&&x%2===0?"bg-white":"bg-gray-100"}
    ${o?"hover:bg-indigo-50":""}
   `,children:v.map((g,y)=>k.jsx("td",{className:`
      px-4 py-3.5 text-${l} align-top
      ${s.includes(y)?"whitespace-normal break-all max-w-full":"whitespace-nowrap"}
      ${r.includes(y)?n:""}
     `,dangerouslySetInnerHTML:m(g)},`td-${x}-${y}`))},`row-${x}`))})]})})};function GD(e,t,n){return Math.max(t,Math.min(e,n))}const hn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function cb(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function db(e,t,n,r=.15){return r===0?GD(e,t,n):e<t?-cb(t-e,n-t,r)+t:e>n?+cb(e-n,n-t,r)+n:e}function QD(e,[t,n],[r,s]){const[[i,o],[a,l]]=e;return[db(t,i,o,r),db(n,a,l,s)]}function YD(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JD(e){var t=YD(e,"string");return typeof t=="symbol"?t:String(t)}function Cn(e,t,n){return t=JD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fb(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const PS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function hb(e){return e?e[0].toUpperCase()+e.slice(1):""}const ZD=["enter","leave"];function XD(e=!1,t){return e&&!ZD.includes(t)}function eN(e,t="",n=!1){const r=PS[e],s=r&&r[t]||t;return"on"+hb(e)+hb(s)+(XD(n,s)?"Capture":"")}const tN=["gotpointercapture","lostpointercapture"];function nN(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=tN.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function rN(e,t=""){const n=PS[e],r=n&&n[t]||t;return e+r}function Af(e){return"touches"in e}function AS(e){return Af(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function sN(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function iN(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function OS(e){return Af(e)?iN(e)[0]:e}function oN(e){return sN(e).map(t=>t.identifier)}function sp(e){const t=OS(e);return Af(e)?t.identifier:t.pointerId}function pb(e){const t=OS(e);return[t.clientX,t.clientY]}function aN(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i})}return t}function Hd(e,...t){return typeof e=="function"?e(...t):e}function lN(){}function uN(...e){return e.length===0?lN:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function mb(e,t){return Object.assign({},t,e||{})}const cN=32;class dN{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Hd(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let i=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,aN(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const R=n._delta.map(Math.abs);hn.addTo(n._distance,R)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[R,I]=f;p[0]=c[0]!==!1?R-c[0]:0,p[1]=c[1]!==!1?I-c[1]:0}else p[0]=c[0]!==!1?o-c[0]:0,p[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,w=n._active&&!n._blocked||n.active;w&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Hd(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,x]=n.offset,[[g,y],[_,T]]=n._bounds;n.overflow=[v<g?-1:v>y?1:0,x<_?-1:x>T?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const j=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=QD(n._bounds,n.offset,j),n.delta=hn.sub(n.offset,m),this.computeMovement(),w&&(!n.last||i>cN)){n.delta=hn.sub(n.offset,m);const R=n.delta.map(Math.abs);hn.addTo(n.distance,R),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[R[0]/i,R[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(Et(Et(Et({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function fN([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class hN extends dN{constructor(...t){super(...t),Cn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=hn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=hn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[AS(t)]:r.axisThreshold;n.axis=fN(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const pN=e=>e,gb=.15,jS={enabled(e=!0){return e},eventOptions(e,t,n){return Et(Et({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[gb,gb];case!1:return[0,0];default:return hn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return hn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||pN},threshold(e){return hn.toVector(e,0)}},mN=0,Lu=Et(Et({},jS),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=mN){return e},bounds(e={}){if(typeof e=="function")return i=>Lu.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),yb={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class gN extends hN{constructor(...t){super(...t),Cn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Lu.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=sp(t),r._pointerActive=!0,this.computeValues(pb(t)),this.computeInitial(),n.preventScrollAxis&&AS(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=sp(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const i=pb(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=hn.sub(i,n._values),this.computeValues(i)),hn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=sp(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,o]=n._distance;if(n.tap=i<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,p]=r.swipe.velocity,[m,w]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const x=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);x>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(c)>w&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,yN(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=yb[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,hn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in yb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function yN(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const $u=typeof window<"u"&&window.document&&window.document.createElement;function RS(){return $u&&"ontouchstart"in window}function vN(){return RS()||$u&&window.navigator.maxTouchPoints>1}function wN(){return $u&&"onpointerdown"in window}function bN(){return $u&&"exitPointerLock"in window.document}function xN(){try{return"constructor"in GestureEvent}catch{return!1}}const sr={isBrowser:$u,gesture:xN(),touch:RS(),touchscreen:vN(),pointer:wN(),pointerLock:bN()},_N=250,kN=180,SN=.5,EN=50,CN=250,TN=10,vb={mouse:0,touch:0,pen:8},PN=Et(Et({},Lu),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&sr.pointerLock,sr.touch&&n?"touch":this.pointerLock?"mouse":sr.pointer&&!s?"pointer":sr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?_N:void 0,!(!sr.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const i=hn.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:e=SN,distance:t=EN,duration:n=CN}={}){return{velocity:this.transform(hn.toVector(e)),distance:this.transform(hn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return kN;case!1:return 0;default:return e}},axisThreshold(e){return e?Et(Et({},vb),e):vb},keyboardDisplacement(e=TN){return e}});Et(Et({},jS),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!sr.touch&&sr.gesture)return"gesture";if(sr.touch&&r)return"touch";if(sr.touchscreen){if(sr.pointer)return"pointer";if(sr.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const a=mb(Hd(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=mb(Hd(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[s(),i()]:o=>[s(o),i(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",hn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});Et(Et({},Lu),{},{mouseOnly:(e=!0)=>e});Et(Et({},Lu),{},{mouseOnly:(e=!0)=>e});const IS=new Map,Qm=new Map;function AN(e){IS.set(e.key,e.engine),Qm.set(e.key,e.resolver)}const ON={key:"drag",engine:gN,resolver:PN};function jN(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function RN(e,t){if(e==null)return{};var n=jN(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const IN={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=sr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},DN=["target","eventOptions","window","enabled","transform"];function ad(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=ad(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function NN(e,t,n={}){const r=e,{target:s,eventOptions:i,window:o,enabled:a,transform:l}=r,u=RN(r,DN);if(n.shared=ad({target:s,eventOptions:i,window:o,enabled:a,transform:l},IN),t){const c=Qm.get(t);n[t]=ad(Et({shared:n.shared},u),c)}else for(const c in u){const f=Qm.get(c);f&&(n[c]=ad(Et({shared:n.shared},u[c]),f))}return n}class DS{constructor(t,n){Cn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,i){const o=this._listeners,a=rN(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Et(Et({},l),i);t.addEventListener(a,s,u);const c=()=>{t.removeEventListener(a,s,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class LN{constructor(){Cn(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class $N{constructor(t){Cn(this,"gestures",new Set),Cn(this,"_targetEventStore",new DS(this)),Cn(this,"gestureEventStores",{}),Cn(this,"gestureTimeoutStores",{}),Cn(this,"handlers",{}),Cn(this,"config",{}),Cn(this,"pointerIds",new Set),Cn(this,"touchIds",new Set),Cn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),MN(this,t)}setEventIds(t){if(Af(t))return this.touchIds=new Set(oN(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=NN(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=wb(r,a.eventOptions,!!s);if(a.enabled){const u=IS.get(o);new u(this,t,o).bind(l)}}const i=wb(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)i(o,"",a=>this.nativeHandlers[o](Et(Et({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const i in r)r[i]=uN(...r[i]);if(!s)return r;for(const i in r){const{device:o,capture:a,passive:l}=nN(i);this._targetEventStore.add(s,o,"",r[i],{capture:a,passive:l})}}}}function $o(e,t){e.gestures.add(t),e.gestureEventStores[t]=new DS(e,t),e.gestureTimeoutStores[t]=new LN}function MN(e,t){t.drag&&$o(e,"drag"),t.wheel&&$o(e,"wheel"),t.scroll&&$o(e,"scroll"),t.move&&$o(e,"move"),t.pinch&&$o(e,"pinch"),t.hover&&$o(e,"hover")}const wb=(e,t,n)=>(r,s,i,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let p=a?r:eN(r,s,c);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)};function FN(e,t={},n,r){const s=He.useMemo(()=>new $N(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),He.useEffect(s.effect.bind(s)),He.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function BN(e,t){return AN(ON),FN({drag:e},t||{},"drag")}const Wy=E.createContext({});function Hy(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const qy=typeof window<"u",NS=qy?E.useLayoutEffect:E.useEffect,Of=E.createContext(null);function Gy(e,t){e.indexOf(t)===-1&&e.push(t)}function Qy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ws=(e,t,n)=>n>t?t:n<e?e:n;let Yy=()=>{};const bs={},LS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function $S(e){return typeof e=="object"&&e!==null}const MS=e=>/^0[^.\s]+$/u.test(e);function Jy(e){let t;return()=>(t===void 0&&(t=e()),t)}const lr=e=>e,UN=(e,t)=>n=>t(e(n)),Mu=(...e)=>e.reduce(UN),fu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Zy{constructor(){this.subscriptions=[]}add(t){return Gy(this.subscriptions,t),()=>Qy(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qr=e=>e*1e3,or=e=>e/1e3;function FS(e,t){return t?e*(1e3/t):0}const BS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,zN=1e-7,VN=12;function KN(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=BS(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>zN&&++a<VN);return o}function Fu(e,t,n,r){if(e===t&&n===r)return lr;const s=i=>KN(i,0,1,e,n);return i=>i===0||i===1?i:BS(s(i),t,r)}const US=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zS=e=>t=>1-e(1-t),VS=Fu(.33,1.53,.69,.99),Xy=zS(VS),KS=US(Xy),WS=e=>(e*=2)<1?.5*Xy(e):.5*(2-Math.pow(2,-10*(e-1))),ev=e=>1-Math.sin(Math.acos(e)),HS=zS(ev),qS=US(ev),WN=Fu(.42,0,1,1),HN=Fu(0,0,.58,1),GS=Fu(.42,0,.58,1),qN=e=>Array.isArray(e)&&typeof e[0]!="number",QS=e=>Array.isArray(e)&&typeof e[0]=="number",GN={linear:lr,easeIn:WN,easeInOut:GS,easeOut:HN,circIn:ev,circInOut:qS,circOut:HS,backIn:Xy,backInOut:KS,backOut:VS,anticipate:WS},QN=e=>typeof e=="string",bb=e=>{if(QS(e)){Yy(e.length===4);const[t,n,r,s]=e;return Fu(t,n,r,s)}else if(QN(e))return GN[e];return e},Fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function YN(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,f=!1,p=!1)=>{const w=p&&s?n:r;return f&&o.add(c),w.has(c)||w.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const JN=40;function YS(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Fc.reduce((_,T)=>(_[T]=YN(i),_),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:p,render:m,postRender:w}=o,v=()=>{const _=bs.useManualTiming?s.timestamp:performance.now();n=!1,bs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,JN),1)),s.timestamp=_,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),f.process(s),p.process(s),m.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},x=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Fc.reduce((_,T)=>{const j=o[T];return _[T]=(R,I=!1,$=!1)=>(n||x(),j.schedule(R,I,$)),_},{}),cancel:_=>{for(let T=0;T<Fc.length;T++)o[Fc[T]].cancel(_)},state:s,steps:o}}const{schedule:xt,cancel:pi,state:en,steps:ip}=YS(typeof requestAnimationFrame<"u"?requestAnimationFrame:lr,!0);let ld;function ZN(){ld=void 0}const jn={now:()=>(ld===void 0&&jn.set(en.isProcessing||bs.useManualTiming?en.timestamp:performance.now()),ld),set:e=>{ld=e,queueMicrotask(ZN)}},JS=e=>t=>typeof t=="string"&&t.startsWith(e),tv=JS("--"),XN=JS("var(--"),nv=e=>XN(e)?eL.test(e.split("/*")[0].trim()):!1,eL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,za={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hu={...za,transform:e=>ws(0,1,e)},Bc={...za,default:1},Ll=e=>Math.round(e*1e5)/1e5,rv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tL(e){return e==null}const nL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sv=(e,t)=>n=>!!(typeof n=="string"&&nL.test(n)&&n.startsWith(e)||t&&!tL(n)&&Object.prototype.hasOwnProperty.call(n,t)),ZS=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(rv);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},rL=e=>ws(0,255,e),op={...za,transform:e=>Math.round(rL(e))},Wi={test:sv("rgb","red"),parse:ZS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+op.transform(e)+", "+op.transform(t)+", "+op.transform(n)+", "+Ll(hu.transform(r))+")"};function sL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ym={test:sv("#"),parse:sL,transform:Wi.transform},Bu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=Bu("deg"),Gr=Bu("%"),qe=Bu("px"),iL=Bu("vh"),oL=Bu("vw"),xb={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Zo={test:sv("hsl","hue"),parse:ZS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gr.transform(Ll(t))+", "+Gr.transform(Ll(n))+", "+Ll(hu.transform(r))+")"},Ft={test:e=>Wi.test(e)||Ym.test(e)||Zo.test(e),parse:e=>Wi.test(e)?Wi.parse(e):Zo.test(e)?Zo.parse(e):Ym.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Wi.transform(e):Zo.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},aL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lL(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(rv))==null?void 0:t.length)||0)+(((n=e.match(aL))==null?void 0:n.length)||0)>0}const XS="number",eE="color",uL="var",cL="var(",_b="${}",dL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(dL,l=>(Ft.test(l)?(r.color.push(i),s.push(eE),n.push(Ft.parse(l))):l.startsWith(cL)?(r.var.push(i),s.push(uL),n.push(l)):(r.number.push(i),s.push(XS),n.push(parseFloat(l))),++i,_b)).split(_b);return{values:n,split:a,indexes:r,types:s}}function tE(e){return pu(e).values}function nE(e){const{split:t,types:n}=pu(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===XS?i+=Ll(s[o]):a===eE?i+=Ft.transform(s[o]):i+=s[o]}return i}}const fL=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function hL(e){const t=tE(e);return nE(e)(t.map(fL))}const mi={test:lL,parse:tE,createTransformer:nE,getAnimatableNone:hL};function ap(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function pL({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=ap(l,a,e+1/3),i=ap(l,a,e),o=ap(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function qd(e,t){return n=>n>0?t:e}const St=(e,t,n)=>e+(t-e)*n,lp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},mL=[Ym,Wi,Zo],gL=e=>mL.find(t=>t.test(e));function kb(e){const t=gL(e);if(!t)return!1;let n=t.parse(e);return t===Zo&&(n=pL(n)),n}const Sb=(e,t)=>{const n=kb(e),r=kb(t);if(!n||!r)return qd(e,t);const s={...n};return i=>(s.red=lp(n.red,r.red,i),s.green=lp(n.green,r.green,i),s.blue=lp(n.blue,r.blue,i),s.alpha=St(n.alpha,r.alpha,i),Wi.transform(s))},Jm=new Set(["none","hidden"]);function yL(e,t){return Jm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function vL(e,t){return n=>St(e,t,n)}function iv(e){return typeof e=="number"?vL:typeof e=="string"?nv(e)?qd:Ft.test(e)?Sb:xL:Array.isArray(e)?rE:typeof e=="object"?Ft.test(e)?Sb:wL:qd}function rE(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>iv(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function wL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=iv(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function bL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const xL=(e,t)=>{const n=mi.createTransformer(t),r=pu(e),s=pu(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Jm.has(e)&&!s.values.length||Jm.has(t)&&!r.values.length?yL(e,t):Mu(rE(bL(r,s),s.values),n):qd(e,t)};function sE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?St(e,t,n):iv(e)(e,t)}const _L=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>xt.update(t,n),stop:()=>pi(t),now:()=>en.isProcessing?en.timestamp:jn.now()}},iE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gd=2e4;function ov(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Gd;)t+=n,r=e.next(t);return t>=Gd?1/0:t}function kL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(ov(r),Gd);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:or(s)}}const SL=5;function oE(e,t,n){const r=Math.max(t-SL,0);return FS(n-e(r),t-r)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},up=.001;function EL({duration:e=Ot.duration,bounce:t=Ot.bounce,velocity:n=Ot.velocity,mass:r=Ot.mass}){let s,i,o=1-t;o=ws(Ot.minDamping,Ot.maxDamping,o),e=ws(Ot.minDuration,Ot.maxDuration,or(e)),o<1?(s=u=>{const c=u*o,f=c*e,p=c-n,m=Zm(u,o),w=Math.exp(-f);return up-p/m*w},i=u=>{const f=u*o*e,p=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,w=Math.exp(-f),v=Zm(Math.pow(u,2),o);return(-s(u)+up>0?-1:1)*((p-m)*w)/v}):(s=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-up+c*f},i=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=TL(s,i,a);if(e=qr(e),isNaN(l))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const CL=12;function TL(e,t,n){let r=n;for(let s=1;s<CL;s++)r=r-e(r)/t(r);return r}function Zm(e,t){return e*Math.sqrt(1-t*t)}const PL=["duration","bounce"],AL=["stiffness","damping","mass"];function Eb(e,t){return t.some(n=>e[n]!==void 0)}function OL(e){let t={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...e};if(!Eb(e,AL)&&Eb(e,PL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ws(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ot.mass,stiffness:s,damping:i}}else{const n=EL(e);t={...t,...n,mass:Ot.mass},t.isResolvedFromDuration=!0}return t}function Qd(e=Ot.visualDuration,t=Ot.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:f,velocity:p,isResolvedFromDuration:m}=OL({...n,velocity:-or(n.velocity||0)}),w=p||0,v=u/(2*Math.sqrt(l*c)),x=o-i,g=or(Math.sqrt(l/c)),y=Math.abs(x)<5;r||(r=y?Ot.restSpeed.granular:Ot.restSpeed.default),s||(s=y?Ot.restDelta.granular:Ot.restDelta.default);let _;if(v<1){const j=Zm(g,v);_=R=>{const I=Math.exp(-v*g*R);return o-I*((w+v*g*x)/j*Math.sin(j*R)+x*Math.cos(j*R))}}else if(v===1)_=j=>o-Math.exp(-g*j)*(x+(w+g*x)*j);else{const j=g*Math.sqrt(v*v-1);_=R=>{const I=Math.exp(-v*g*R),$=Math.min(j*R,300);return o-I*((w+v*g*x)*Math.sinh($)+j*x*Math.cosh($))/j}}const T={calculatedDuration:m&&f||null,next:j=>{const R=_(j);if(m)a.done=j>=f;else{let I=j===0?w:0;v<1&&(I=j===0?qr(w):oE(_,j,R));const $=Math.abs(I)<=r,U=Math.abs(o-R)<=s;a.done=$&&U}return a.value=a.done?o:R,a},toString:()=>{const j=Math.min(ov(T),Gd),R=iE(I=>T.next(j*I).value,j,30);return j+"ms "+R},toTransition:()=>{}};return T}Qd.applyToOptions=e=>{const t=kL(e,100,Qd);return e.ease=t.ease,e.duration=qr(t.duration),e.type="keyframes",e};function Xm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],p={done:!1,value:f},m=$=>a!==void 0&&$<a||l!==void 0&&$>l,w=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let v=n*t;const x=f+v,g=o===void 0?x:o(x);g!==x&&(v=g-f);const y=$=>-v*Math.exp(-$/r),_=$=>g+y($),T=$=>{const U=y($),K=_($);p.done=Math.abs(U)<=u,p.value=p.done?g:K};let j,R;const I=$=>{m(p.value)&&(j=$,R=Qd({keyframes:[p.value,w(p.value)],velocity:oE(_,$,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return I(0),{calculatedDuration:null,next:$=>{let U=!1;return!R&&j===void 0&&(U=!0,T($),I($)),j!==void 0&&$>=j?R.next($-j):(!U&&T($),p)}}}function jL(e,t,n){const r=[],s=n||bs.mix||sE,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||lr:t;a=Mu(l,a)}r.push(a)}return r}function RL(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Yy(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=jL(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const p=fu(e[f],e[f+1],c);return a[f](p)};return n?c=>u(ws(e[0],e[i-1],c)):u}function IL(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=fu(0,t,r);e.push(St(n,1,s))}}function DL(e){const t=[0];return IL(t,e.length-1),t}function NL(e,t){return e.map(n=>n*t)}function LL(e,t){return e.map(()=>t||GS).splice(0,e.length-1)}function $l({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=qN(r)?r.map(bb):bb(r),i={done:!1,value:t[0]},o=NL(n&&n.length===t.length?n:DL(t),e),a=RL(o,t,{ease:Array.isArray(s)?s:LL(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const $L=e=>e!==null;function av(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter($L),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const ML={decay:Xm,inertia:Xm,tween:$l,keyframes:$l,spring:Qd};function aE(e){typeof e.type=="string"&&(e.type=ML[e.type])}class lv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const FL=e=>e/100;class uv extends lv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==jn.now()&&this.tick(jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;aE(t);const{type:n=$l,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||$l;l!==$l&&typeof a[0]!="number"&&(this.mixKeyframes=Mu(FL,sE(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=ov(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:p,repeatDelay:m,type:w,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,T=r;if(f){const $=Math.min(this.currentTime,s)/a;let U=Math.floor($),K=$%1;!K&&$>=1&&(K=1),K===1&&U--,U=Math.min(U,f+1),!!(U%2)&&(p==="reverse"?(K=1-K,m&&(K-=m/a)):p==="mirror"&&(T=o)),_=ws(0,1,K)*a}const j=y?{done:!1,value:c[0]}:T.next(_);i&&(j.value=i(j.value));let{done:R}=j;!y&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return I&&w!==Xm&&(j.value=av(c,this.options,x,this.speed)),v&&v(j.value),I&&this.finish(),j}then(t,n){return this.finished.then(t,n)}get duration(){return or(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(this.currentTime)}set time(t){var n;t=qr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(jn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=or(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=_L,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function BL(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Hi=e=>e*180/Math.PI,eg=e=>{const t=Hi(Math.atan2(e[1],e[0]));return tg(t)},UL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:eg,rotateZ:eg,skewX:e=>Hi(Math.atan(e[1])),skewY:e=>Hi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},tg=e=>(e=e%360,e<0&&(e+=360),e),Cb=eg,Tb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Pb=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),zL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Tb,scaleY:Pb,scale:e=>(Tb(e)+Pb(e))/2,rotateX:e=>tg(Hi(Math.atan2(e[6],e[5]))),rotateY:e=>tg(Hi(Math.atan2(-e[2],e[0]))),rotateZ:Cb,rotate:Cb,skewX:e=>Hi(Math.atan(e[4])),skewY:e=>Hi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ng(e){return e.includes("scale")?1:0}function rg(e,t){if(!e||e==="none")return ng(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=zL,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=UL,s=a}if(!s)return ng(t);const i=r[t],o=s[1].split(",").map(KL);return typeof i=="function"?i(o):o[i]}const VL=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return rg(n,t)};function KL(e){return parseFloat(e.trim())}const Va=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ka=new Set(Va),Ab=e=>e===za||e===qe,WL=new Set(["x","y","z"]),HL=Va.filter(e=>!WL.has(e));function qL(e){const t=[];return HL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const io={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>rg(t,"x"),y:(e,{transform:t})=>rg(t,"y")};io.translateX=io.x;io.translateY=io.y;const oo=new Set;let sg=!1,ig=!1,og=!1;function lE(){if(ig){const e=Array.from(oo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=qL(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ig=!1,sg=!1,oo.forEach(e=>e.complete(og)),oo.clear()}function uE(){oo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ig=!0)})}function GL(){og=!0,uE(),lE(),og=!1}class cv{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(oo.add(this),sg||(sg=!0,xt.read(uE),xt.resolveKeyframes(lE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}BL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),oo.delete(this)}cancel(){this.state==="scheduled"&&(oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QL=e=>e.startsWith("--");function YL(e,t,n){QL(t)?e.style.setProperty(t,n):e.style[t]=n}const JL=Jy(()=>window.ScrollTimeline!==void 0),ZL={};function XL(e,t){const n=Jy(e);return()=>ZL[t]??n()}const cE=XL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ob={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bl([0,.65,.55,1]),circOut:bl([.55,0,1,.45]),backIn:bl([.31,.01,.66,-.59]),backOut:bl([.33,1.53,.69,.99])};function dE(e,t){if(e)return typeof e=="function"?cE()?iE(e,t):"ease-out":QS(e)?bl(e):Array.isArray(e)?e.map(n=>dE(n,t)||Ob.easeOut):Ob[e]}function e$(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const f=dE(a,s);Array.isArray(f)&&(c.easing=f);const p={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(c,p)}function fE(e){return typeof e=="function"&&"applyToOptions"in e}function t$({type:e,...t}){return fE(e)&&cE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class n$ extends lv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Yy(typeof t.type!="string");const u=t$(t);this.animation=e$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=av(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):YL(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return or(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&JL()?(this.animation.timeline=t,lr):n(this)}}const hE={anticipate:WS,backInOut:KS,circInOut:qS};function r$(e){return e in hE}function s$(e){typeof e.ease=="string"&&r$(e.ease)&&(e.ease=hE[e.ease])}const jb=10;class i$ extends n${constructor(t){s$(t),aE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new uv({...o,autoplay:!1}),l=qr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-jb).value,a.sample(l).value,jb),a.stop()}}const Rb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url("));function o$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function a$(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Rb(s,t),a=Rb(i,t);return!o||!a?!1:o$(e)||(n==="spring"||fE(n))&&r}function ag(e){e.duration=0,e.type="keyframes"}const l$=new Set(["opacity","clipPath","filter","transform"]),u$=Jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function c$(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return u$()&&n&&l$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const d$=40;class f$ extends lv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...f}){var w;super(),this.stop=()=>{var v,x;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=jn.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...f},m=(c==null?void 0:c.KeyframeResolver)||cv;this.keyframeResolver=new m(a,(v,x,g)=>this.onKeyframesResolved(v,x,p,!g),l,u,c),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=jn.now(),a$(t,i,o,a)||((bs.instantAnimations||!l)&&(c==null||c(av(t,r,n))),t[0]=t[t.length-1],ag(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>d$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&c$(p)?new i$({...p,element:p.motionValue.owner.current}):new uv(p);m.finished.then(()=>this.notifyFinished()).catch(lr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),GL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const h$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function p$(e){const t=h$.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function pE(e,t,n=1){const[r,s]=p$(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return LS(o)?parseFloat(o):o}return nv(s)?pE(s,t,n+1):s}function dv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const mE=new Set(["width","height","top","left","right","bottom",...Va]),m$={test:e=>e==="auto",parse:e=>e},gE=e=>t=>t.test(e),yE=[za,qe,Gr,Ls,oL,iL,m$],Ib=e=>yE.find(gE(e));function g$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||MS(e):!0}const y$=new Set(["brightness","contrast","saturate","opacity"]);function v$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(rv)||[];if(!r)return e;const s=n.replace(r,"");let i=y$.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const w$=/\b([a-z-]*)\(.*?\)/gu,lg={...mi,getAnimatableNone:e=>{const t=e.match(w$);return t?t.map(v$).join(" "):e}},Db={...za,transform:Math.round},b$={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:Bc,scaleX:Bc,scaleY:Bc,scaleZ:Bc,skew:Ls,skewX:Ls,skewY:Ls,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:hu,originX:xb,originY:xb,originZ:qe},fv={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...b$,zIndex:Db,fillOpacity:hu,strokeOpacity:hu,numOctaves:Db},x$={...fv,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:lg,WebkitFilter:lg},vE=e=>x$[e];function wE(e,t){let n=vE(e);return n!==lg&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const _$=new Set(["auto","none","0"]);function k$(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!_$.has(i)&&pu(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=wE(n,s)}class S$ extends cv{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),nv(u))){const c=pE(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!mE.has(r)||t.length!==2)return;const[s,i]=t,o=Ib(s),a=Ib(i);if(o!==a)if(Ab(o)&&Ab(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else io[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||g$(t[s]))&&r.push(s);r.length&&k$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=io[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function E$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const bE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function xE(e){return $S(e)&&"offsetHeight"in e}const Nb=30,C$=e=>!isNaN(parseFloat(e));class T${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=jn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=jn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=C$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Zy);const r=this.events[t].add(n);return t==="change"?()=>{r(),xt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Nb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Nb);return FS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(e,t){return new T$(e,t)}const{schedule:hv}=YS(queueMicrotask,!1),vr={x:!1,y:!1};function _E(){return vr.x||vr.y}function P$(e){return e==="x"||e==="y"?vr[e]?null:(vr[e]=!0,()=>{vr[e]=!1}):vr.x||vr.y?null:(vr.x=vr.y=!0,()=>{vr.x=vr.y=!1})}function kE(e,t){const n=E$(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Lb(e){return!(e.pointerType==="touch"||_E())}function A$(e,t,n={}){const[r,s,i]=kE(e,n),o=a=>{if(!Lb(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=f=>{Lb(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const SE=(e,t)=>t?e===t?!0:SE(e,t.parentElement):!1,pv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,O$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function j$(e){return O$.has(e.tagName)||e.tabIndex!==-1}const ud=new WeakSet;function $b(e){return t=>{t.key==="Enter"&&e(t)}}function cp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const R$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=$b(()=>{if(ud.has(n))return;cp(n,"down");const s=$b(()=>{cp(n,"up")}),i=()=>cp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Mb(e){return pv(e)&&!_E()}function I$(e,t,n={}){const[r,s,i]=kE(e,n),o=a=>{const l=a.currentTarget;if(!Mb(a))return;ud.add(l);const u=t(l,a),c=(m,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),ud.has(l)&&ud.delete(l),Mb(m)&&typeof u=="function"&&u(m,{success:w})},f=m=>{c(m,l===window||l===document||n.useGlobalTarget||SE(l,m.target))},p=m=>{c(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),xE(a)&&(a.addEventListener("focus",u=>R$(u,s)),!j$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function EE(e){return $S(e)&&"ownerSVGElement"in e}function D$(e){return EE(e)&&e.tagName==="svg"}const pn=e=>!!(e&&e.getVelocity),N$=[...yE,Ft,mi],L$=e=>N$.find(gE(e)),mv=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Fb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $$(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Fb(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Fb(e[s],null)}}}}function M$(...e){return E.useCallback($$(...e),e)}class F$ extends E.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=xE(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B$({children:e,isPresent:t,anchorX:n,root:r}){const s=E.useId(),i=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=E.useContext(mv),l=M$(i,e==null?void 0:e.ref);return E.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:p,right:m}=o.current;if(t||!i.current||!u||!c)return;const w=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const x=r??document.head;return x.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{x.contains(v)&&x.removeChild(v)}},[t]),k.jsx(F$,{isPresent:t,childRef:i,sizeRef:o,children:E.cloneElement(e,{ref:l})})}const U$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=Hy(z$),c=E.useId();let f=!0,p=E.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const w of u.values())if(!w)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return i&&f&&(p={...p}),E.useMemo(()=>{u.forEach((m,w)=>u.set(w,!1))},[n]),E.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=k.jsx(B$,{isPresent:n,anchorX:a,root:l,children:e})),k.jsx(Of.Provider,{value:p,children:e})};function z$(){return new Map}function CE(e=!0){const t=E.useContext(Of);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=E.useId();E.useEffect(()=>{if(e)return s(i)},[e]);const o=E.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Uc=e=>e.key||"";function Bb(e){const t=[];return E.Children.forEach(e,n=>{E.isValidElement(n)&&t.push(n)}),t}const V$=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=CE(o),f=E.useMemo(()=>Bb(e),[e]),p=o&&!u?[]:f.map(Uc),m=E.useRef(!0),w=E.useRef(f),v=Hy(()=>new Map),[x,g]=E.useState(f),[y,_]=E.useState(f);NS(()=>{m.current=!1,w.current=f;for(let R=0;R<y.length;R++){const I=Uc(y[R]);p.includes(I)?v.delete(I):v.get(I)!==!0&&v.set(I,!1)}},[y,p.length,p.join("-")]);const T=[];if(f!==x){let R=[...f];for(let I=0;I<y.length;I++){const $=y[I],U=Uc($);p.includes(U)||(R.splice(I,0,$),T.push($))}return i==="wait"&&T.length&&(R=T),_(Bb(R)),g(f),null}const{forceRender:j}=E.useContext(Wy);return k.jsx(k.Fragment,{children:y.map(R=>{const I=Uc(R),$=o&&!u?!1:f===y||p.includes(I),U=()=>{if(v.has(I))v.set(I,!0);else return;let K=!0;v.forEach(me=>{me||(K=!1)}),K&&(j==null||j(),_(w.current),o&&(c==null||c()),r&&r())};return k.jsx(U$,{isPresent:$,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:$?void 0:U,anchorX:a,children:R},I)})})},TE=E.createContext({strict:!1}),Ub={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ra={};for(const e in Ub)Ra[e]={isEnabled:t=>Ub[e].some(n=>!!t[n])};function K$(e){for(const t in e)Ra[t]={...Ra[t],...e[t]}}const W$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||W$.has(e)}let PE=e=>!Yd(e);function H$(e){typeof e=="function"&&(PE=t=>t.startsWith("on")?!Yd(t):e(t))}try{H$(require("@emotion/is-prop-valid").default)}catch{}function q$(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(PE(s)||n===!0&&Yd(s)||!t&&!Yd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const jf=E.createContext({});function Rf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function mu(e){return typeof e=="string"||Array.isArray(e)}const gv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yv=["initial",...gv];function If(e){return Rf(e.animate)||yv.some(t=>mu(e[t]))}function AE(e){return!!(If(e)||e.variants)}function G$(e,t){if(If(e)){const{initial:n,animate:r}=e;return{initial:n===!1||mu(n)?n:void 0,animate:mu(r)?r:void 0}}return e.inherit!==!1?t:{}}function Q$(e){const{initial:t,animate:n}=G$(e,E.useContext(jf));return E.useMemo(()=>({initial:t,animate:n}),[zb(t),zb(n)])}function zb(e){return Array.isArray(e)?e.join(" "):e}const gu={};function Y$(e){for(const t in e)gu[t]=e[t],tv(t)&&(gu[t].isCSSVariable=!0)}function OE(e,{layout:t,layoutId:n}){return Ka.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!gu[e]||e==="opacity")}const J$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z$=Va.length;function X$(e,t,n){let r="",s=!0;for(let i=0;i<Z$;i++){const o=Va[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=bE(a,fv[o]);if(!l){s=!1;const c=J$[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function vv(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Ka.has(l)){o=!0;continue}else if(tv(l)){s[l]=u;continue}else{const c=bE(u,fv[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=X$(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const wv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function jE(e,t,n){for(const r in t)!pn(t[r])&&!OE(r,n)&&(e[r]=t[r])}function e3({transformTemplate:e},t){return E.useMemo(()=>{const n=wv();return vv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function t3(e,t){const n=e.style||{},r={};return jE(r,n,e),Object.assign(r,e3(e,t)),r}function n3(e,t){const n={},r=t3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const r3={offset:"stroke-dashoffset",array:"stroke-dasharray"},s3={offset:"strokeDashoffset",array:"strokeDasharray"};function i3(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?r3:s3;e[i.offset]=qe.transform(-r);const o=qe.transform(t),a=qe.transform(n);e[i.array]=`${o} ${a}`}function RE(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(vv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&i3(f,s,i,o,!1)}const IE=()=>({...wv(),attrs:{}}),DE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function o3(e,t,n,r){const s=E.useMemo(()=>{const i=IE();return RE(i,t,DE(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};jE(i,e.style,e),s.style={...i,...s.style}}return s}const a3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bv(e){return typeof e!="string"||e.includes("-")?!1:!!(a3.indexOf(e)>-1||/[A-Z]/u.test(e))}function l3(e,t,n,{latestValues:r},s,i=!1){const a=(bv(e)?o3:n3)(t,r,s,e),l=q$(t,typeof e=="string",i),u=e!==E.Fragment?{...l,...a,ref:n}:{},{children:c}=t,f=E.useMemo(()=>pn(c)?c.get():c,[c]);return E.createElement(e,{...u,children:f})}function Vb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function xv(e,t,n,r){if(typeof t=="function"){const[s,i]=Vb(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Vb(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function cd(e){return pn(e)?e.get():e}function u3({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:c3(n,r,s,e),renderState:t()}}function c3(e,t,n,r){const s={},i=r(e,{});for(const p in i)s[p]=cd(i[p]);let{initial:o,animate:a}=e;const l=If(e),u=AE(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!Rf(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const w=xv(e,p[m]);if(w){const{transitionEnd:v,transition:x,...g}=w;for(const y in g){let _=g[y];if(Array.isArray(_)){const T=c?_.length-1:0;_=_[T]}_!==null&&(s[y]=_)}for(const y in v)s[y]=v[y]}}}return s}const NE=e=>(t,n)=>{const r=E.useContext(jf),s=E.useContext(Of),i=()=>u3(e,t,r,s);return n?i():Hy(i)};function _v(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(pn(r[o])||t.style&&pn(t.style[o])||OE(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const d3=NE({scrapeMotionValuesFromProps:_v,createRenderState:wv});function LE(e,t,n){const r=_v(e,t,n);for(const s in e)if(pn(e[s])||pn(t[s])){const i=Va.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const f3=NE({scrapeMotionValuesFromProps:LE,createRenderState:IE}),h3=Symbol.for("motionComponentSymbol");function Xo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function p3(e,t,n){return E.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xo(n)&&(n.current=r))},[t])}const kv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),m3="framerAppearId",$E="data-"+kv(m3),ME=E.createContext({});function g3(e,t,n,r,s){var v,x;const{visualElement:i}=E.useContext(jf),o=E.useContext(TE),a=E.useContext(Of),l=E.useContext(mv).reducedMotion,u=E.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=E.useContext(ME);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&y3(u.current,n,s,f);const p=E.useRef(!1);E.useInsertionEffect(()=>{c&&p.current&&c.update(n,a)});const m=n[$E],w=E.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,m)));return NS(()=>{c&&(p.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),w.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(!w.current&&c.animationState&&c.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),w.current=!1),c.enteringChildren=void 0)}),c}function y3(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:FE(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Xo(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function FE(e){if(e)return e.options.allowProjection!==!1?e.projection:FE(e.parent)}function dp(e,{forwardMotionProps:t=!1}={},n,r){n&&K$(n);const s=bv(e)?f3:d3;function i(a,l){let u;const c={...E.useContext(mv),...a,layoutId:v3(a)},{isStatic:f}=c,p=Q$(a),m=s(a,f);if(!f&&qy){w3();const w=b3(c);u=w.MeasureLayout,p.visualElement=g3(e,m,c,r,w.ProjectionNode)}return k.jsxs(jf.Provider,{value:p,children:[u&&p.visualElement?k.jsx(u,{visualElement:p.visualElement,...c}):null,l3(e,a,p3(m,p.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=E.forwardRef(i);return o[h3]=e,o}function v3({layoutId:e}){const t=E.useContext(Wy).id;return t&&e!==void 0?t+"-"+e:e}function w3(e,t){E.useContext(TE).strict}function b3(e){const{drag:t,layout:n}=Ra;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function x3(e,t){if(typeof Proxy>"u")return dp;const n=new Map,r=(i,o)=>dp(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,dp(o,void 0,e,t)),n.get(o))})}function BE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function _3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function k3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function fp(e){return e===void 0||e===1}function ug({scale:e,scaleX:t,scaleY:n}){return!fp(e)||!fp(t)||!fp(n)}function Ni(e){return ug(e)||UE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function UE(e){return Kb(e.x)||Kb(e.y)}function Kb(e){return e&&e!=="0%"}function Jd(e,t,n){const r=e-n,s=t*r;return n+s}function Wb(e,t,n,r,s){return s!==void 0&&(e=Jd(e,s,r)),Jd(e,n,r)+t}function cg(e,t=0,n=1,r,s){e.min=Wb(e.min,t,n,r,s),e.max=Wb(e.max,t,n,r,s)}function zE(e,{x:t,y:n}){cg(e.x,t.translate,t.scale,t.originPoint),cg(e.y,n.translate,n.scale,n.originPoint)}const Hb=.999999999999,qb=1.0000000000001;function S3(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ta(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,zE(e,o)),r&&Ni(i.latestValues)&&ta(e,i.latestValues))}t.x<qb&&t.x>Hb&&(t.x=1),t.y<qb&&t.y>Hb&&(t.y=1)}function ea(e,t){e.min=e.min+t,e.max=e.max+t}function Gb(e,t,n,r,s=.5){const i=St(e.min,e.max,s);cg(e,t,n,i,r)}function ta(e,t){Gb(e.x,t.x,t.scaleX,t.scale,t.originX),Gb(e.y,t.y,t.scaleY,t.scale,t.originY)}function VE(e,t){return BE(k3(e.getBoundingClientRect(),t))}function E3(e,t,n){const r=VE(e,n),{scroll:s}=t;return s&&(ea(r.x,s.offset.x),ea(r.y,s.offset.y)),r}const Qb=()=>({translate:0,scale:1,origin:0,originPoint:0}),na=()=>({x:Qb(),y:Qb()}),Yb=()=>({min:0,max:0}),Nt=()=>({x:Yb(),y:Yb()}),dg={current:null},KE={current:!1};function C3(){if(KE.current=!0,!!qy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>dg.current=e.matches;e.addEventListener("change",t),t()}else dg.current=!1}const T3=new WeakMap;function P3(e,t,n){for(const r in t){const s=t[r],i=n[r];if(pn(s))e.addValue(r,s);else if(pn(i))e.addValue(r,ja(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,ja(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Jb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class A3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=jn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,xt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=If(n),this.isVariantNode=AE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&pn(m)&&m.set(l[p])}}mount(t){var n;this.current=t,T3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),KE.current||C3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ka.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ra){const n=Ra[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Jb.length;r++){const s=Jb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=P3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ja(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(LS(r)||MS(r))?r=parseFloat(r):!L$(r)&&mi.test(n)&&(r=wE(t,n)),this.setBaseTarget(t,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=xv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!pn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Zy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){hv.render(this.render)}}class WE extends A3{constructor(){super(...arguments),this.KeyframeResolver=S$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function HE(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function O3(e){return window.getComputedStyle(e)}class j3 extends WE{constructor(){super(...arguments),this.type="html",this.renderInstance=HE}readValueFromInstance(t,n){var r;if(Ka.has(n))return(r=this.projection)!=null&&r.isProjecting?ng(n):VL(t,n);{const s=O3(t),i=(tv(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return VE(t,n)}build(t,n,r){vv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return _v(t,n,r)}}const qE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function R3(e,t,n,r){HE(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(qE.has(s)?s:kv(s),t.attrs[s])}class I3 extends WE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ka.has(n)){const r=vE(n);return r&&r.default||0}return n=qE.has(n)?n:kv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return LE(t,n,r)}build(t,n,r){RE(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){R3(t,n,r,s)}mount(t){this.isSVGTag=DE(t.tagName),super.mount(t)}}const D3=(e,t)=>bv(e)?new I3(t):new j3(t,{allowProjection:e!==E.Fragment});function ca(e,t,n){const r=e.getProps();return xv(r,t,n!==void 0?n:r.custom,e)}const fg=e=>Array.isArray(e);function N3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ja(n))}function L3(e){return fg(e)?e[e.length-1]||0:e}function $3(e,t){const n=ca(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=L3(i[o]);N3(e,o,a)}}function M3(e){return!!(pn(e)&&e.add)}function hg(e,t){const n=e.getValue("willChange");if(M3(n))return n.add(t);if(!n&&bs.WillChange){const r=new bs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function GE(e){return e.props[$E]}const F3=e=>e!==null;function B3(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(F3),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const U3={type:"spring",stiffness:500,damping:25,restSpeed:10},z3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),V3={type:"keyframes",duration:.8},K3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},W3=(e,{keyframes:t})=>t.length>2?V3:Ka.has(e)?e.startsWith("scale")?z3(t[1]):U3:K3;function H3({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Sv=(e,t,n,r={},s,i)=>o=>{const a=dv(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-qr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};H3(a)||Object.assign(c,W3(e,c)),c.duration&&(c.duration=qr(c.duration)),c.repeatDelay&&(c.repeatDelay=qr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(ag(c),c.delay===0&&(f=!0)),(bs.instantAnimations||bs.skipAnimations)&&(f=!0,ag(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const p=B3(c.keyframes,a);if(p!==void 0){xt.update(()=>{c.onUpdate(p),c.onComplete()});return}}return a.isSync?new uv(c):new f$(c)};function q3({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function QE(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const f=e.getValue(c,e.latestValues[c]??null),p=a[c];if(p===void 0||u&&q3(u,c))continue;const m={delay:n,...dv(i||{},c)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===w&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=GE(e);if(g){const y=window.MotionHandoffAnimation(g,c,xt);y!==null&&(m.startTime=y,v=!0)}}hg(e,c),f.start(Sv(c,f,p,e.shouldReduceMotion&&mE.has(c)?{type:!1}:m,e,v));const x=f.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{xt.update(()=>{o&&$3(e,o)})}),l}function YE(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function pg(e,t,n={}){var l;const r=ca(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(QE(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:p}=s;return G3(e,t,u,c,f,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function G3(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(pg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+YE(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function Q3(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>pg(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=pg(e,t,n);else{const s=typeof t=="function"?ca(e,t,n.custom):t;r=Promise.all(QE(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function JE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Y3=yv.length;function ZE(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?ZE(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Y3;n++){const r=yv[n],s=e.props[r];(mu(s)||s===!1)&&(t[r]=s)}return t}const J3=[...gv].reverse(),Z3=gv.length;function X3(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Q3(e,n,r)))}function eM(e){let t=X3(e),n=Zb(),r=!0;const s=l=>(u,c)=>{var p;const f=ca(e,c,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:w,...v}=f;u={...u,...v,...w}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=ZE(e.parent)||{},f=[],p=new Set;let m={},w=1/0;for(let x=0;x<Z3;x++){const g=J3[x],y=n[g],_=u[g]!==void 0?u[g]:c[g],T=mu(_),j=g===l?y.isActive:null;j===!1&&(w=x);let R=_===c[g]&&_!==u[g]&&T;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),y.protectedKeys={...m},!y.isActive&&j===null||!_&&!y.prevProp||Rf(_)||typeof _=="boolean")continue;const I=tM(y.prevProp,_);let $=I||g===l&&y.isActive&&!R&&T||x>w&&T,U=!1;const K=Array.isArray(_)?_:[_];let me=K.reduce(s(g),{});j===!1&&(me={});const{prevResolvedValues:M={}}=y,re={...M,...me},A=ae=>{$=!0,p.has(ae)&&(U=!0,p.delete(ae)),y.needsAnimating[ae]=!0;const ue=e.getValue(ae);ue&&(ue.liveStyle=!1)};for(const ae in re){const ue=me[ae],L=M[ae];if(m.hasOwnProperty(ae))continue;let se=!1;fg(ue)&&fg(L)?se=!JE(ue,L):se=ue!==L,se?ue!=null?A(ae):p.add(ae):ue!==void 0&&p.has(ae)?A(ae):y.protectedKeys[ae]=!0}y.prevProp=_,y.prevResolvedValues=me,y.isActive&&(m={...m,...me}),r&&e.blockInitialAnimation&&($=!1);const Y=R&&I;$&&(!Y||U)&&f.push(...K.map(ae=>{const ue={type:g};if(typeof ae=="string"&&r&&!Y&&e.manuallyAnimateOnMount&&e.parent){const{parent:L}=e,se=ca(L,ae);if(L.enteringChildren&&se){const{delayChildren:V}=se.transition||{};ue.delay=YE(L.enteringChildren,e,V)}}return{animation:ae,options:ue}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const g=ca(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(x.transition=g.transition)}p.forEach(g=>{const y=e.getBaseTarget(g),_=e.getValue(g);_&&(_.liveStyle=!0),x[g]=y??null}),f.push({animation:x})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function a(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const p in n)n[p].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Zb(),r=!0}}}function tM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!JE(t,e):!1}function Oi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zb(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class bi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nM extends bi{constructor(t){super(t),t.animationState||(t.animationState=eM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Rf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let rM=0;class sM extends bi{constructor(){super(...arguments),this.id=rM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const iM={animation:{Feature:nM},exit:{Feature:sM}};function yu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Uu(e){return{point:{x:e.pageX,y:e.pageY}}}const oM=e=>t=>pv(t)&&e(t,Uu(t));function Ml(e,t,n,r){return yu(e,t,oM(n),r)}const XE=1e-4,aM=1-XE,lM=1+XE,eC=.01,uM=0-eC,cM=0+eC;function bn(e){return e.max-e.min}function dM(e,t,n){return Math.abs(e-t)<=n}function Xb(e,t,n,r=.5){e.origin=r,e.originPoint=St(t.min,t.max,e.origin),e.scale=bn(n)/bn(t),e.translate=St(n.min,n.max,e.origin)-e.originPoint,(e.scale>=aM&&e.scale<=lM||isNaN(e.scale))&&(e.scale=1),(e.translate>=uM&&e.translate<=cM||isNaN(e.translate))&&(e.translate=0)}function Fl(e,t,n,r){Xb(e.x,t.x,n.x,r?r.originX:void 0),Xb(e.y,t.y,n.y,r?r.originY:void 0)}function ex(e,t,n){e.min=n.min+t.min,e.max=e.min+bn(t)}function fM(e,t,n){ex(e.x,t.x,n.x),ex(e.y,t.y,n.y)}function tx(e,t,n){e.min=t.min-n.min,e.max=e.min+bn(t)}function Bl(e,t,n){tx(e.x,t.x,n.x),tx(e.y,t.y,n.y)}function Zn(e){return[e("x"),e("y")]}const tC=({current:e})=>e?e.ownerDocument.defaultView:null,nx=(e,t)=>Math.abs(e-t);function hM(e,t){const n=nx(e.x,t.x),r=nx(e.y,t.y);return Math.sqrt(n**2+r**2)}class nC{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=pp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,w=hM(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!w)return;const{point:v}=p,{timestamp:x}=en;this.history.push({...v,timestamp:x});const{onStart:g,onMove:y}=this.handlers;m||(g&&g(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=hp(m,this.transformPagePoint),xt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:w,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=pp(p.type==="pointercancel"?this.lastMoveEventInfo:hp(m,this.transformPagePoint),this.history);this.startEvent&&w&&w(p,g),v&&v(p,g)},!pv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=Uu(t),l=hp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=en;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(t,pp(l,this.history)),this.removeListeners=Mu(Ml(this.contextWindow,"pointermove",this.handlePointerMove),Ml(this.contextWindow,"pointerup",this.handlePointerUp),Ml(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function hp(e,t){return t?{point:t(e.point)}:e}function rx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pp({point:e},t){return{point:e,delta:rx(e,rC(t)),offset:rx(e,pM(t)),velocity:mM(t,.1)}}function pM(e){return e[0]}function rC(e){return e[e.length-1]}function mM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=rC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>qr(t)));)n--;if(!r)return{x:0,y:0};const i=or(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function gM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?St(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?St(n,e,r.max):Math.min(e,n)),e}function sx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function yM(e,{top:t,left:n,bottom:r,right:s}){return{x:sx(e.x,n,s),y:sx(e.y,t,r)}}function ix(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function vM(e,t){return{x:ix(e.x,t.x),y:ix(e.y,t.y)}}function wM(e,t){let n=.5;const r=bn(e),s=bn(t);return s>r?n=fu(t.min,t.max-r,e.min):r>s&&(n=fu(e.min,e.max-s,t.min)),ws(0,1,n)}function bM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const mg=.35;function xM(e=mg){return e===!1?e=0:e===!0&&(e=mg),{x:ox(e,"left","right"),y:ox(e,"top","bottom")}}function ox(e,t,n){return{min:ax(e,t),max:ax(e,n)}}function ax(e,t){return typeof e=="number"?e:e[t]||0}const _M=new WeakMap;class kM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Uu(f).point)},o=(f,p)=>{const{drag:m,dragPropagation:w,onDragStart:v}=this.getProps();if(m&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=P$(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Gr.test(y)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[g];T&&(y=bn(T)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&xt.postRender(()=>v(f,p)),hg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:w,onDirectionLock:v,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(w&&this.currentDirection===null){this.currentDirection=SM(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),x&&x(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Zn(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new nC(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:tC(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&xt.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!zc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=gM(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Xo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=yM(r.layoutBox,t):this.constraints=!1,this.elastic=xM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=bM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xo(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=E3(r,s.root,this.visualElement.getTransformPagePoint());let o=vM(s.layout.layoutBox,i);if(n){const a=n(_3(o));this.hasMutatedConstraints=!!a,a&&(o=BE(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Zn(c=>{if(!zc(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,w={type:"inertia",velocity:r?t[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(c,w)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return hg(this.visualElement,t),r.start(Sv(t,r,0,n,this.visualElement,!1))}stopAnimation(){Zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Zn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Zn(n=>{const{drag:r}=this.getProps();if(!zc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-St(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=wM({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(o=>{if(!zc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(St(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;_M.set(this.visualElement,this);const t=this.visualElement.current,n=Ml(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),xt.read(r);const o=yu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zn(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=mg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function zc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function SM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class EM extends bi{constructor(t){super(t),this.removeGroupControls=lr,this.removeListeners=lr,this.controls=new kM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const lx=e=>(t,n)=>{e&&xt.postRender(()=>e(t,n))};class CM extends bi{constructor(){super(...arguments),this.removePointerDownListener=lr}onPointerDown(t){this.session=new nC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lx(t),onStart:lx(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&xt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ml(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ux(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const dl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(qe.test(e))e=parseFloat(e);else return e;const n=ux(e,t.target.x),r=ux(e,t.target.y);return`${n}% ${r}%`}},TM={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mi.parse(e);if(s.length>5)return r;const i=mi.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=St(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let mp=!1;class PM extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;Y$(AM),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),mp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),dd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,mp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||xt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;mp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function sC(e){const[t,n]=CE(),r=E.useContext(Wy);return k.jsx(PM,{...e,layoutGroup:r,switchLayoutGroup:E.useContext(ME),isPresent:t,safeToRemove:n})}const AM={borderRadius:{...dl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dl,borderTopRightRadius:dl,borderBottomLeftRadius:dl,borderBottomRightRadius:dl,boxShadow:TM};function OM(e,t,n){const r=pn(e)?e:ja(e);return r.start(Sv("",r,t,n)),r.animation}const jM=(e,t)=>e.depth-t.depth;class RM{constructor(){this.children=[],this.isDirty=!1}add(t){Gy(this.children,t),this.isDirty=!0}remove(t){Qy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jM),this.isDirty=!1,this.children.forEach(t)}}function IM(e,t){const n=jn.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(pi(r),e(i-t))};return xt.setup(r,!0),()=>pi(r)}const iC=["TopLeft","TopRight","BottomLeft","BottomRight"],DM=iC.length,cx=e=>typeof e=="string"?parseFloat(e):e,dx=e=>typeof e=="number"||qe.test(e);function NM(e,t,n,r,s,i){s?(e.opacity=St(0,n.opacity??1,LM(r)),e.opacityExit=St(t.opacity??1,0,$M(r))):i&&(e.opacity=St(t.opacity??1,n.opacity??1,r));for(let o=0;o<DM;o++){const a=`border${iC[o]}Radius`;let l=fx(t,a),u=fx(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||dx(l)===dx(u)?(e[a]=Math.max(St(cx(l),cx(u),r),0),(Gr.test(u)||Gr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=St(t.rotate||0,n.rotate||0,r))}function fx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const LM=oC(0,.5,HS),$M=oC(.5,.95,lr);function oC(e,t,n){return r=>r<e?0:r>t?1:n(fu(e,t,r))}function hx(e,t){e.min=t.min,e.max=t.max}function Yn(e,t){hx(e.x,t.x),hx(e.y,t.y)}function px(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function mx(e,t,n,r,s){return e-=t,e=Jd(e,1/n,r),s!==void 0&&(e=Jd(e,1/s,r)),e}function MM(e,t=0,n=1,r=.5,s,i=e,o=e){if(Gr.test(t)&&(t=parseFloat(t),t=St(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=St(i.min,i.max,r);e===i&&(a-=t),e.min=mx(e.min,t,n,a,s),e.max=mx(e.max,t,n,a,s)}function gx(e,t,[n,r,s],i,o){MM(e,t[n],t[r],t[s],t.scale,i,o)}const FM=["x","scaleX","originX"],BM=["y","scaleY","originY"];function yx(e,t,n,r){gx(e.x,t,FM,n?n.x:void 0,r?r.x:void 0),gx(e.y,t,BM,n?n.y:void 0,r?r.y:void 0)}function vx(e){return e.translate===0&&e.scale===1}function aC(e){return vx(e.x)&&vx(e.y)}function wx(e,t){return e.min===t.min&&e.max===t.max}function UM(e,t){return wx(e.x,t.x)&&wx(e.y,t.y)}function bx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function lC(e,t){return bx(e.x,t.x)&&bx(e.y,t.y)}function xx(e){return bn(e.x)/bn(e.y)}function _x(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class zM{constructor(){this.members=[]}add(t){Gy(this.members,t),t.scheduleRender()}remove(t){if(Qy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VM(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:p,skewX:m,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const gp=["","X","Y","Z"],KM=1e3;let WM=0;function yp(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function uC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xt,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&uC(r)}function cC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=WM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(GM),this.nodes.forEach(ZM),this.nodes.forEach(XM),this.nodes.forEach(QM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new RM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Zy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=EE(o)&&!D$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,f=0;const p=()=>this.root.updateBlockedByResize=!1;xt.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,c&&c(),c=IM(p,250),dd.hasAnimatedSinceResize&&(dd.hasAnimatedSinceResize=!1,this.nodes.forEach(Ex)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||sF,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=u.getProps(),g=!this.targetLayout||!lC(this.targetLayout,m),y=!f&&p;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...dv(w,"layout"),onPlay:v,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(c,y)}else f||Ex(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Sx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(JM),this.nodes.forEach(HM),this.nodes.forEach(qM)):this.nodes.forEach(Sx),this.clearAllSnapshots();const a=jn.now();en.delta=ws(0,1e3/60,a-en.timestamp),en.timestamp=a,en.isProcessing=!0,ip.update.process(en),ip.preRender.process(en),ip.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YM),this.sharedNodes.forEach(tF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!aC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ni(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),iF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Nt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(oF))){const{scroll:c}=this.root;c&&(ea(a.x,c.offset.x),ea(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Nt();if(Yn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:p}=c;c!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Yn(a,o),ea(a.x,f.offset.x),ea(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Nt();Yn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ta(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ni(c.latestValues)&&ta(l,c.latestValues)}return Ni(this.latestValues)&&ta(l,this.latestValues),l}removeTransform(o){const a=Nt();Yn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ni(u.latestValues))continue;ug(u.latestValues)&&u.updateSnapshot();const c=Nt(),f=u.measurePageBox();Yn(c,f),yx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ni(this.latestValues)&&yx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),zE(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Bl(this.relativeTargetOrigin,this.target,m.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ug(this.parent.latestValues)||UE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===en.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Yn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;S3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Nt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(px(this.prevProjectionDelta.x,this.projectionDelta.x),px(this.prevProjectionDelta.y,this.projectionDelta.y)),Fl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!_x(this.projectionDelta.x,this.prevProjectionDelta.x)||!_x(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=na(),this.projectionDelta=na(),this.projectionDeltaWithTransform=na()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Nt(),m=l?l.source:void 0,w=this.layout?this.layout.source:void 0,v=m!==w,x=this.getStack(),g=!x||x.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(rF));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const j=T/1e3;Cx(f.x,o.x,j),Cx(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nF(this.relativeTarget,this.relativeTargetOrigin,p,j),_&&UM(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Nt()),Yn(_,this.relativeTarget)),v&&(this.animationValues=c,NM(c,u,this.latestValues,j,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xt.update(()=>{dd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ja(0)),this.currentAnimation=OM(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&dC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Nt();const f=bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Yn(a,l),ta(a,c),Fl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new zM),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&yp("z",o,u,this.animationValues);for(let c=0;c<gp.length;c++)yp(`rotate${gp[c]}`,o,u,this.animationValues),yp(`skew${gp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=cd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=cd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ni(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=VM(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const w in gu){if(c[w]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:g}=gu[w],y=f==="none"?c[w]:v(c[w],u);if(x){const _=x.length;for(let T=0;T<_;T++)o[x[T]]=y}else g?this.options.visualElement.renderState.vars[w]=y:o[w]=y}this.options.layoutId&&(o.pointerEvents=u===this?cd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(kx),this.root.sharedNodes.clear()}}}function HM(e){e.updateLayout()}function qM(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=bn(p);p.min=r[f].min,p.max=p.min+m}):dC(i,t.layoutBox,r)&&Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=bn(r[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=na();Fl(a,r,t.layoutBox);const l=na();o?Fl(l,e.applyTransform(s,!0),t.measuredBox):Fl(l,r,t.layoutBox);const u=!aC(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const w=Nt();Bl(w,t.layoutBox,p.layoutBox);const v=Nt();Bl(v,r,m.layoutBox),lC(w,v)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=w,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function GM(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function QM(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function YM(e){e.clearSnapshot()}function kx(e){e.clearMeasurements()}function Sx(e){e.isLayoutDirty=!1}function JM(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ex(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ZM(e){e.resolveTargetDelta()}function XM(e){e.calcProjection()}function eF(e){e.resetSkewAndRotation()}function tF(e){e.removeLeadSnapshot()}function Cx(e,t,n){e.translate=St(t.translate,0,n),e.scale=St(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Tx(e,t,n,r){e.min=St(t.min,n.min,r),e.max=St(t.max,n.max,r)}function nF(e,t,n,r){Tx(e.x,t.x,n.x,r),Tx(e.y,t.y,n.y,r)}function rF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sF={duration:.45,ease:[.4,0,.1,1]},Px=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ax=Px("applewebkit/")&&!Px("chrome/")?Math.round:lr;function Ox(e){e.min=Ax(e.min),e.max=Ax(e.max)}function iF(e){Ox(e.x),Ox(e.y)}function dC(e,t,n){return e==="position"||e==="preserve-aspect"&&!dM(xx(t),xx(n),.2)}function oF(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const aF=cC({attachResizeListener:(e,t)=>yu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vp={current:void 0},fC=cC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!vp.current){const e=new aF({});e.mount(window),e.setOptions({layoutScroll:!0}),vp.current=e}return vp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lF={pan:{Feature:CM},drag:{Feature:EM,ProjectionNode:fC,MeasureLayout:sC}};function jx(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&xt.postRender(()=>i(t,Uu(t)))}class uF extends bi{mount(){const{current:t}=this.node;t&&(this.unmount=A$(t,(n,r)=>(jx(this.node,r,"Start"),s=>jx(this.node,s,"End"))))}unmount(){}}class cF extends bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mu(yu(this.node.current,"focus",()=>this.onFocus()),yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Rx(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&xt.postRender(()=>i(t,Uu(t)))}class dF extends bi{mount(){const{current:t}=this.node;t&&(this.unmount=I$(t,(n,r)=>(Rx(this.node,r,"Start"),(s,{success:i})=>Rx(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gg=new WeakMap,wp=new WeakMap,fF=e=>{const t=gg.get(e.target);t&&t(e)},hF=e=>{e.forEach(fF)};function pF({root:e,...t}){const n=e||document;wp.has(n)||wp.set(n,{});const r=wp.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(hF,{root:e,...t})),r[s]}function mF(e,t,n){const r=pF(t);return gg.set(e,n),r.observe(e),()=>{gg.delete(e),r.unobserve(e)}}const gF={some:0,all:1};class yF extends bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:gF[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),p=u?c:f;p&&p(l)};return mF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(vF(t,n))&&this.startObserver()}unmount(){}}function vF({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const wF={inView:{Feature:yF},tap:{Feature:dF},focus:{Feature:cF},hover:{Feature:uF}},bF={layout:{ProjectionNode:fC,MeasureLayout:sC}},xF={...iM,...wF,...lF,...bF},_F=x3(xF,D3);let kF={data:""},SF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||kF},EF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,CF=/\/\*[^]*?\*\/|  +/g,Ix=/\n+/g,zs=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?zs(o,i):i+"{"+zs(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=zs(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zs.p?zs.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},es={},hC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+hC(e[n]);return t}return e},TF=(e,t,n,r,s)=>{let i=hC(e),o=es[i]||(es[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!es[o]){let l=i!==e?e:(u=>{let c,f,p=[{}];for(;c=EF.exec(u.replace(CF,""));)c[4]?p.shift():c[3]?(f=c[3].replace(Ix," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][c[1]]=c[2].replace(Ix," ").trim();return p[0]})(e);es[o]=zs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&es.g?es.g:null;return n&&(es.g=es[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(es[o],t,r,a),o},PF=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zs(a,""):a===!1?"":a}return r+s+(o??"")},"");function Df(e){let t=this||{},n=e.call?e(t.p):e;return TF(n.unshift?n.raw?PF(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,SF(t.target),t.g,t.o,t.k)}let pC,yg,vg;Df.bind({g:1});let xs=Df.bind({k:1});function AF(e,t,n,r){zs.p=t,pC=e,yg=n,vg=r}function xi(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:yg&&yg()},a),n.o=/ *go\d+/.test(l),a.className=Df.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),vg&&u[0]&&vg(a),pC(u,a)}return s}}var OF=e=>typeof e=="function",Zd=(e,t)=>OF(e)?e(t):e,jF=(()=>{let e=0;return()=>(++e).toString()})(),mC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),RF=20,Ev="default",gC=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return gC(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},fd=[],yC={toasts:[],pausedAt:void 0,settings:{toastLimit:RF}},Kr={},vC=(e,t=Ev)=>{Kr[t]=gC(Kr[t]||yC,e),fd.forEach(([n,r])=>{n===t&&r(Kr[t])})},wC=e=>Object.keys(Kr).forEach(t=>vC(e,t)),IF=e=>Object.keys(Kr).find(t=>Kr[t].toasts.some(n=>n.id===e)),Nf=(e=Ev)=>t=>{vC(t,e)},DF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},NF=(e={},t=Ev)=>{let[n,r]=E.useState(Kr[t]||yC),s=E.useRef(Kr[t]);E.useEffect(()=>(s.current!==Kr[t]&&r(Kr[t]),fd.push([t,r]),()=>{let o=fd.findIndex(([a])=>a===t);o>-1&&fd.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||DF[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},LF=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||jF()}),zu=e=>(t,n)=>{let r=LF(t,e,n);return Nf(r.toasterId||IF(r.id))({type:2,toast:r}),r.id},Kt=(e,t)=>zu("blank")(e,t);Kt.error=zu("error");Kt.success=zu("success");Kt.loading=zu("loading");Kt.custom=zu("custom");Kt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Nf(t)(n):wC(n)};Kt.dismissAll=e=>Kt.dismiss(void 0,e);Kt.remove=(e,t)=>{let n={type:4,toastId:e};t?Nf(t)(n):wC(n)};Kt.removeAll=e=>Kt.remove(void 0,e);Kt.promise=(e,t,n)=>{let r=Kt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?Zd(t.success,s):void 0;return i?Kt.success(i,{id:r,...n,...n==null?void 0:n.success}):Kt.dismiss(r),s}).catch(s=>{let i=t.error?Zd(t.error,s):void 0;i?Kt.error(i,{id:r,...n,...n==null?void 0:n.error}):Kt.dismiss(r)}),e};var $F=1e3,MF=(e,t="default")=>{let{toasts:n,pausedAt:r}=NF(e,t),s=E.useRef(new Map).current,i=E.useCallback((f,p=$F)=>{if(s.has(f))return;let m=setTimeout(()=>{s.delete(f),o({type:4,toastId:f})},p);s.set(f,m)},[]);E.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let w=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(w<0){m.visible&&Kt.dismiss(m.id);return}return setTimeout(()=>Kt.dismiss(m.id,t),w)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let o=E.useCallback(Nf(t),[t]),a=E.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=E.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),u=E.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=E.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:w=8,defaultPosition:v}=p||{},x=n.filter(_=>(_.position||v)===(f.position||v)&&_.height),g=x.findIndex(_=>_.id===f.id),y=x.filter((_,T)=>T<g&&_.visible).length;return x.filter(_=>_.visible).slice(...m?[y+1]:[0,y]).reduce((_,T)=>_+(T.height||0)+w,0)},[n]);return E.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=s.get(f.id);p&&(clearTimeout(p),s.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},FF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,BF=xs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,UF=xs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zF=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${BF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${UF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,VF=xs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,KF=xi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${VF} 1s linear infinite;
`,WF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,HF=xs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,qF=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${WF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${HF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,GF=xi("div")`
  position: absolute;
`,QF=xi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,YF=xs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,JF=xi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${YF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZF=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?E.createElement(JF,null,t):t:n==="blank"?null:E.createElement(QF,null,E.createElement(KF,{...r}),n!=="loading"&&E.createElement(GF,null,n==="error"?E.createElement(zF,{...r}):E.createElement(qF,{...r})))},XF=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,e4=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,t4="0%{opacity:0;} 100%{opacity:1;}",n4="0%{opacity:1;} 100%{opacity:0;}",r4=xi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,s4=xi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,i4=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=mC()?[t4,n4]:[XF(n),e4(n)];return{animation:t?`${xs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xs(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},o4=E.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?i4(e.position||t||"top-center",e.visible):{opacity:0},i=E.createElement(ZF,{toast:e}),o=E.createElement(s4,{...e.ariaProps},Zd(e.message,e));return E.createElement(r4,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):E.createElement(E.Fragment,null,i,o))});AF(E.createElement);var a4=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=E.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return E.createElement("div",{ref:i,className:t,style:n},s)},l4=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},u4=Df`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Vc=16,c4=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=MF(n,i);return E.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Vc,left:Vc,right:Vc,bottom:Vc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let f=c.position||t,p=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),m=l4(f,p);return E.createElement(a4,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?u4:"",style:m},c.type==="custom"?Zd(c.message,c):s?s(c):E.createElement(o4,{toast:c,position:f}))}))},ts=Kt;const bC=[{code:"original",name:"Original Script"},{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"itrans",name:"ITRANS"},{code:"iast",name:"IAST"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"}];function d4(){const{preferredLanguage:e,setPreferredLanguage:t}=Ua(),[n,r]=E.useState(e);E.useEffect(()=>{localStorage.setItem("preferredLanguage",n),t(n)},[n,t]);const s=i=>{r(i.target.value)};return k.jsxs("div",{children:[k.jsx("h2",{children:"Language Preferences"}),k.jsx("p",{children:"Choose the language for transliteration:"}),k.jsx("select",{value:n,onChange:s,children:bC.map(i=>k.jsx("option",{value:i.code,children:i.name},i.code))})]})}const f4=0,h4={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},fl={marginRight:"10px"},hl={opacity:.5,cursor:"not-allowed",color:"#888"},p4=async function(e){try{return await Ut.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},m4=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters for fetching song details.");const o=await iD(n,i);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await bS({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,f]=a;await gS({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:f,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${i}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function g4(){var Ze,Rt,qn;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=Au(),s=dr(),i=jr(),{session:o}=bo(),a=(Ze=o==null?void 0:o.user)==null?void 0:Ze.email,l=(Rt=s.state)==null?void 0:Rt.filteredSongIndices,u=(qn=s.state)==null?void 0:qn.index,c=Du(),f=E.useMemo(()=>decodeURIComponent(r||""),[r]),p=["songDetails",t,n,a,f],{preferredLanguage:m,setPreferredLanguage:w}=Ua(),v=E.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),x=E.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),g=E.useCallback(async(Ie,ze)=>{if(!Ie||!Ie.bookId||!Ie.songTitle){ze(!1);return}const Xe=await Pf(Ie.bookId,Ie.songTitle);ze(Xe)},[]),[y,_]=E.useState(!1),[T,j]=E.useState(!1);E.useEffect(()=>(window.handleInternalNavigation=(Ie,ze,Xe,sn)=>{const Ht=`/details/book/${Ie}/${ze}/${Xe}/${encodeURIComponent(sn)}`;i(Ht,{state:{filteredSongIndices:l||[],index:f4},replace:!1}),console.log(`Internal navigation triggered: ${Ht}`)},()=>{delete window.handleInternalNavigation}),[i,l,u]),E.useEffect(()=>{g(v,_),g(x,j)},[v,x,g]);const{isLoading:R,isFetching:I,error:$,data:U}=Tf({queryKey:p,queryFn:m4,staleTime:1/0,gcTime:0,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1});BN(({swipe:[Ie]})=>{Ie===1?(console.log("going to prev"),ge()):Ie===-1&&(console.log("going to next"),De())},{axis:"x",filterTaps:!0});const[K,me]=E.useState(!1),[M,re]=E.useState({x:0,y:0}),[A,Y]=E.useState(!1),ve=E.useRef(null),[ae,ue]=E.useState(""),[L,se]=E.useState(null),V=E.useRef(null),W=Ie=>{Ie.preventDefault();const ze=window.getSelection(),Xe=(ze==null?void 0:ze.toString().trim())??"";ze&&ze.rangeCount>0&&!ze.getRangeAt(0).collapsed?(ue(Xe),se(ze.getRangeAt(0)),Y(!0)):(ue(""),se(null),Y(!1)),re({x:Ie.clientX,y:Ie.clientY}),Y(!!ae),me(!0)};E.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),E.useEffect(()=>{const Ie=ze=>{ve.current&&!ve.current.contains(ze.target)&&me(!1)};return K?window.addEventListener("mousedown",Ie):window.removeEventListener("mousedown",Ie),()=>{window.removeEventListener("mousedown",Ie)}},[K]),E.useEffect(()=>{s.state||window.location.pathname.startsWith("/sankeertan")},[s,t]),E.useEffect(()=>{const Ie=ze=>{ve.current&&!ve.current.contains(ze.target)&&me(!1)};return K&&document.addEventListener("mousedown",Ie),()=>{document.removeEventListener("mousedown",Ie)}},[K]);const he=()=>{const Ie=window.location.href;navigator.clipboard.writeText(Ie).then(()=>{console.log("URL copied to clipboard:",Ie),ts.success("URL copied to clipboard!")}).catch(ze=>{console.error("Failed to copy URL: ",ze)})},ye=E.useRef(null);function ce(Ie){const sn=new DOMParser().parseFromString(Ie,"text/html").querySelectorAll("tr");let Ht="";return sn.forEach(Le=>{const hr=Le.querySelectorAll("td, th"),Gn=[];hr.forEach(Es=>{var pr;let Te=Es.innerHTML;Te=Te.replace(/<\/p>\s*<p>/gi,`
`),Te=Te.replace(/<p>|<\/p>/gi,""),Te=Te.replace(/<br\s*\/?>/gi,`
`);const Jr=document.createElement("div");Jr.innerHTML=Te;const Rr=((pr=Jr.textContent)==null?void 0:pr.trim())||"";Gn.push(Rr)}),Ht+=Gn.join(" | ")+`

`}),Ht.trim()}const Re=()=>{if(!L||L.collapsed){console.warn("No valid selection range to highlight.");return}const Ie=document.createElement("span");Ie.className="highlighted-text";try{L.surroundContents(Ie),console.log("Text highlighted successfully!")}catch(ze){console.error("Failed to highlight text:",ze)}se(null)},Ue=(Ie=!1)=>{if(ye.current){const ze=ye.current.innerHTML;let Xe="radhekrishna!!";Ie?Xe=ze:ze.includes("<table")?Xe=ce(ze):Xe=ye.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(Xe).then(()=>{console.log("Song content copied to clipboard:"),ts.success("Song content copied to clipboard!")}).catch(sn=>{console.error("Failed to copy song: ",sn)})}},De=()=>{if(l&&u!==void 0&&u<l.length-1){const Ie=u+1,ze=l[Ie];sessionStorage.setItem("lastClickedSongIndex",Ie.toString()),i(`/details/book/${e}/${t}/${ze.sourceRow}/${encodeURIComponent(ze.songTitle)}`,{state:{filteredSongIndices:l,index:Ie},replace:!0})}},ge=()=>{if(l&&u!==void 0&&u>0){const Ie=u-1,ze=l[Ie];sessionStorage.setItem("lastClickedSongIndex",Ie.toString()),i(`/details/book/${e}/${t}/${ze.sourceRow}/${encodeURIComponent(ze.songTitle)}`,{state:{filteredSongIndices:l,index:Ie},replace:!0})}},Je=u===0,tt=u===(l==null?void 0:l.length)-1,Ke=l&&l.length>0,Pt=async Ie=>{if(ae){const ze=await fetch(`${vo}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${ae}&sessionuser=${Ie}`);if(!ze.ok){const sn=await ze.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${ze.status} - ${JSON.stringify(sn)}`)}const Xe=await ze.json();ts.success(`Issue/Mistake is reported as ${Xe[1]}!!`)}else console.log("No text was selected.")},P=async()=>{t&&r?(await oD(t,f),ts.success("Local cache cleared. Reloading from server..."),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:p})):console.warn("Cannot reload song: bookId or songTitle is missing.")},pe=async Ie=>{switch(me(!1),Ie){case"broadcast":r&&_e();break;case"copyPageUrl":he();break;case"CopySongAsHtml":Ue(!0);break;case"CopySongAsText":Ue(!1);break;case"ReportMistake":Pt(a);break;case"Copy":if(ae)try{await navigator.clipboard.writeText(ae),ts.success("Text copied!")}catch(ze){console.error("Failed to copy text: ",ze),ts.error("Failed to copy text.")}break;case"Highlight":Re();break}},de=E.useMemo(()=>k.jsx(_F.div,{ref:ve,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:M.y,left:M.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:Ie=>Ie.stopPropagation(),children:k.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:A?k.jsxs(k.Fragment,{children:[k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>pe("Copy"),children:"Copy Selected"}),k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>pe("ReportMistake"),children:"Report Mistake"})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[k.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),bC.map(Ie=>k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:Ie.code===m?"bold":"normal",backgroundColor:Ie.code===m?"#f0f0f0":"transparent"},onClick:()=>Ne(Ie),children:Ie.name},Ie.code))]})})})},"context-menu"),[A,M,m]),[F,N]=E.useState(!1),[ee,we]=E.useState(null),[be,oe]=E.useState(!0),_e=E.useCallback(async()=>{if(F){console.warn("isBroadcasting already");return}if(!be){ts.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(ye.current){N(!0),we("broadcasting");try{const Ie=ye.current.innerHTML,ze=await p4(Ie);N(!1),we("success"),ts.success("Broadcast was successful!"),oe(!1),setTimeout(()=>we(null),2e3)}catch(Ie){console.error("Broadcast failed:",Ie),ts.error("Broadcast had errors!"),N(!1),we("error"),setTimeout(()=>we(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),we("failed"),N(!1)},[ye,F,be]);E.useEffect(()=>{oe(!0)},[U]),E.useEffect(()=>{U&&U.length>=3&&t&&f&&n&&(g(v,_),g(x,j))},[U,t,f,n,v,x,g]);const Ne=Ie=>{w(Ie.code),me(!1)},ke={backgroundColor:"green",color:"white"},Be={backgroundColor:"brown",color:"white"};if(R&&!U)return k.jsx("div",{style:h4,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if($)return k.jsxs("div",{children:["Error loading song details: ",$.message]});if(!U)return k.jsx("div",{children:"No song details available. Please try reloading."});const rt=document.getElementById("context-menu-root");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:V,children:[k.jsx(Ky,{}),k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[k.jsx("button",{onClick:ge,disabled:Je||!Ke,style:{...fl,...Je||!Ke?hl:{},...y?ke:Be},children:" Prev"}),k.jsx("button",{onClick:De,disabled:tt||!Ke,style:{...fl,...tt||!Ke?hl:{},...T?ke:Be,marginRight:0},children:"Next "})]})]}),k.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:W,children:[k.jsx("div",{ref:ye,children:U&&k.jsx(qD,{data:U[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[0,1,2,3,4],maxWidth:"max-w-6xl",preferredLanguage:m,sourceLanguage:U[2]})}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[k.jsxs("div",{children:[k.jsx("button",{onClick:ge,disabled:Je||!Ke,style:{...fl,...Je||!Ke?hl:{},...y?ke:Be},children:" Prev"}),k.jsx("button",{onClick:De,disabled:tt||!Ke,style:{...fl,...tt||!Ke?hl:{},...T?ke:Be,marginRight:0},children:"Next "})]}),k.jsxs("div",{children:[k.jsx("button",{onClick:P,disabled:I,style:{marginRight:"10px",backgroundColor:I?"#ccc":"#f0f0f0",color:I?"#666":"inherit",cursor:I?"not-allowed":"pointer"},title:"Reload from Server (Clears local cache)",children:I?k.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[k.jsxs("svg",{className:"animate-spin",style:{width:"16px",height:"16px",marginRight:"5px"},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),k.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Reloading..."]}):""}),k.jsx("button",{onClick:he,style:{marginRight:"10px"},title:"Copy URL",children:""}),k.jsx("button",{onClick:()=>Ue(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),k.jsx("button",{onClick:_e,disabled:!be,style:{...fl,...be?{}:hl},title:"Broadcast",children:""})]})]}),k.jsx("style",{children:`
     .highlighted-text {
      background-color: #ffeb3b; /* Yellow background */
      padding: 2px 4px;
      border-radius: 4px;
     }
     .animate-spin {
      animation: spin 1s linear infinite;
     }
     @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
     }
    `}),K&&rt&&X2.createPortal(k.jsx(V$,{children:de}),rt)]})]})}const y4=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:s,onConnectionStatusChange:i})=>{const o=E.useRef(null);return E.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, Listener skipping subscription setup."),i("DISCONNECTED");return}return o.current&&(Ut.removeChannel(o.current),o.current=null),i("CONNECTING"),o.current=Ut.channel(`broadcast:${e}`),o.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},a=>{a.new&&"content"in a.new&&r(a.new.content),a.new&&"scroll_position"in a.new&&a.new.scroll_position!==null&&n&&s(a.new.scroll_position)}).subscribe((a,l)=>{switch(a){case"SUBSCRIBED":i("CONNECTED");break;case"CHANNEL_ERROR":case"TIMED_OUT":case"CLOSED":i(a==="CLOSED"?"DISCONNECTED":"ERROR"),console.error(`Subscription issue for broadcast ${e}:`,l||a);break;case"CONNECTING":i("CONNECTING");break}}),()=>{o.current&&(Ut.removeChannel(o.current),o.current=null)}},[e,t==null?void 0:t.access_token,n,r,s,i]),null},v4=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}},w4=({broadcastId:e})=>{const[t,n]=E.useState(null),[r,s]=E.useState(null),i=E.useRef(null),[o,a]=E.useState(null),[l,u]=E.useState(!1),[c,f]=E.useState(!0),[p,m]=E.useState(!1),[w,v]=E.useState(null),[x,g]=E.useState("none"),[y,_]=E.useState(!1),[T,j]=E.useState("CONNECTING"),{preferredLanguage:R}=Ua(),I=E.useCallback(Y=>{j(Y),console.log(`Realtime Connection Status Updated: ${Y}`)},[]),$=E.useCallback(Y=>{const ae=Wd(Y??"","devanagari",R);n(ae)},[R]),U=E.useCallback(Y=>{l&&Y!==null&&s(`trRowAsAnchor-${Y}`)},[l]);E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:ve}})=>{a(ve)});const{data:Y}=Ut.auth.onAuthStateChange((ve,ae)=>{a(ae)});return()=>{Y.subscription.unsubscribe()}},[]);const K=E.useCallback(async()=>{p||f(!0),v(null);try{const{data:Y,error:ve}=await Ut.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(ve)console.error("Error fetching broadcast data:",ve),v(ve.message);else if(Y){const ae=Y.content??"";let ue=Wd(ae,"devanagari",R);n(ue),_(Y.is_broadcasting_scroll??!1),m(!0)}}finally{f(!1)}},[e,R,p]);E.useEffect(()=>{o&&e&&!p&&K()},[o,e,K,p]),E.useEffect(()=>{if(r&&i.current){const Y=r,ve=i.current.querySelector(`#${Y}`);ve&&ve.scrollIntoView({block:"start",behavior:"smooth"}),s(null)}},[r,i]);const me=E.useCallback(async Y=>{if(x==="leader"&&y){const{error:ve}=await Ut.from("sankeertan").update({scroll_position:Y}).eq("id",e);ve&&console.error("Error broadcasting scroll position:",ve)}},[x,y,e]);E.useEffect(()=>{if(x!=="leader"||!y||!i.current)return;const Y=i.current,ve=v4(me,200),ae=Y.querySelectorAll("tr[id^='trRowAsAnchor-']"),ue=new Set;let L=null;const se=he=>{he.forEach(Ue=>{Ue.isIntersecting?ue.add(Ue.target):ue.delete(Ue.target)});let ye=null,ce=1/0;const Re=Y.getBoundingClientRect().top;if(ue.forEach(Ue=>{if(typeof Ue.id!="string"||Ue.id==="")return;const ge=Ue.getBoundingClientRect().top-Re;ge>=0&&ge<ce&&(ce=ge,ye=Ue.id)}),ye){const De=ye.split("-").pop();if(De){const ge=parseInt(De);ye!==L&&(L=ye,ve(ge))}}},V={root:Y,rootMargin:"0px",threshold:.1},W=new IntersectionObserver(se,V);return ae.forEach(he=>{W.observe(he)}),()=>{W.disconnect()}},[x,y,me]);const M=async()=>{const Y=!y,{error:ve}=await Ut.from("sankeertan").update({is_broadcasting_scroll:Y}).eq("id",e);ve?console.error("Failed to update broadcast scroll status:",ve):_(Y)},re=Y=>{Y==="none"&&(_(!1),u(!1)),g(Y),Y==="follower"&&u(!0)},A=Y=>{switch(Y){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[k.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:i,children:[k.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",k.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:A(T),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${T}`}),k.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",T,")"]})]}),c&&!p?k.jsx("p",{children:"Loading content..."}):w?k.jsxs("p",{style:{color:"red"},children:["Error loading data: ",w]}):t&&k.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&x==="follower"&&k.jsx(y4,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:$,onScrollPositionUpdated:U,onConnectionStatusChange:I}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[k.jsx("button",{onClick:()=>re(x==="leader"?"none":"leader"),style:{backgroundColor:x==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x==="leader"?"Disengage (Leader)":"Become a Leader"}),x==="none"&&k.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),x==="leader"&&k.jsx("button",{onClick:M,style:{backgroundColor:y?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:y?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),k.jsx("button",{onClick:()=>re(x==="follower"?"none":"follower"),style:{backgroundColor:x==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})},Dx=(e,t)=>`${e.trim()}|${t.trim()}`;async function b4(){var a,l;console.log("[Dexie Load] Preparing availability check set...");const e=await it.songDetails.toCollection().primaryKeys(),t=new Set;for(const[u,c]of e)t.add(Dx(u,c));console.log(`[Dexie Load] Found ${t.size} available SongDetails.`);const n=await it.songIndices.toArray();let r=await it.categories.toArray();r.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(u=>setTimeout(u,500)),r=await it.categories.toArray(),r.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const s=new Map,i=new Map;for(const u of r){const c=(a=u.id)==null?void 0:a.trim();if(c&&i.set(c,u),Array.isArray(u.books))for(const f of u.books){const p=(l=f.bookId)==null?void 0:l.trim();if(p){const m={...f,bookId:p,bookName:f.bookName||"Unknown Book",categoryId:c,author:f.author||u.author,language:f.language||u.language,type:f.type||u.type,raagam:f.raagam||u.raagam,taaLam:f.taaLam||u.taaLam};s.set(p,m)}}}return console.log("Book Map Keys (Flattened):",Array.from(s.keys()).length),console.log("Category Map Keys:",Array.from(i.keys()).length),n.map((u,c)=>{var $,U;const f=($=u.bookId)==null?void 0:$.trim(),p=(U=u.songTitle)==null?void 0:U.trim(),m=s.get(f),w=m?i.get((m.categoryId??"").trim()):void 0;m||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${u.songTitle} | Index Book ID: '${f}'`);let v=!1;if(f&&p){const K=Dx(f,p);v=t.has(K)}const x=(m==null?void 0:m.bookName)||"Unknown Book",g=(w==null?void 0:w.name)||"Unknown Category",y=u.author||(m==null?void 0:m.author)||(w==null?void 0:w.author)||"Unknown Author",_=u.sourceLanguage||(m==null?void 0:m.language)||(w==null?void 0:w.language)||"Unknown Language",T=u.type||(m==null?void 0:m.type)||(w==null?void 0:w.type)||"Unknown Type",j=u.raagam||(m==null?void 0:m.raagam)||(w==null?void 0:w.raagam)||"Unknown Type",R=u.taaLam||(m==null?void 0:m.taaLam)||(w==null?void 0:w.taaLam)||"Unknown Type";return{uniqueSongId:`${u.bookId}-${u.songTitle}`,indexPositionForNavigation:c,isAvailable:v,bookId:u.bookId,categoryId:(w==null?void 0:w.id)||"unknown-category",title:u.songTitle,sourceRow:u.sourceRow,tags:u.tags||null,verseCount:u.verseCount||null,category:g,book:x,author:y,language:_,type:T,raagam:j,taaLam:R}})}const x4=["searchIndex","allSongs"],_4=()=>Tf({queryKey:x4,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await b4();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,networkMode:"always",refetchOnWindowFocus:!1}),k4=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const s=t[r];if(s&&s.length>0){const i=s.map(o=>o.value.toLowerCase());n=n.filter(o=>{var l;const a=(l=o[r])==null?void 0:l.toLowerCase();return i.includes(a)})}}),n},S4=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>r.title.toLowerCase().includes(n)||r.author.toLowerCase().includes(n)||r.book.toLowerCase().includes(n)||r.category.toLowerCase().includes(n)):e},ji=(e,t)=>{const n=new Set;return e.forEach(r=>{const s=r[t];Array.isArray(s)?s.forEach(i=>{typeof i=="string"&&n.add(i)}):typeof s=="string"&&n.add(s)}),Array.from(n).sort()},E4=()=>{const[e,t]=E.useState(""),[n,r]=E.useState({}),[s,i]=E.useState([]),[o,a]=E.useState([]),[l,u]=E.useState("cards"),[c,f]=E.useState([]),[p,m]=E.useState(!1),w=jr(),[v,x]=E.useState({category:!0,book:!0,title:!0,author:!0,language:!0,raagam:!0}),{data:g,isLoading:y,isError:_,error:T}=_4(),j=E.useMemo(()=>g||[],[g]);E.useEffect(()=>{if(!s||s.length===0)return;console.log("Final filteredSongs count:",s.length);const L=new Set,se=[];s.forEach((V,W)=>{const he=`${V.bookId}-${V.title}-${V.sourceRow}`;L.has(he)?se.push({key:he,song:V,position:W}):L.add(he)}),se.length>0?(console.error(" DUPLICATE KEY FOUND IN filteredSongs ARRAY:",se),console.log("Total unique keys:",L.size)):console.log(" Current filteredSongs array is free of key collisions.")},[s]),E.useEffect(()=>{if(j.length===0){i([]);return}let L=k4(j,n),se=S4(L,e);i(se)},[j,n,e]),E.useEffect(()=>{(()=>{let se=j;if(e){const W=e.toLowerCase();se=se.filter(he=>Object.values(he).filter(ce=>ce!==void 0).map(ce=>Array.isArray(ce)?ce.join(" "):String(ce)).join(" ").toLowerCase().includes(W))}Object.entries(n).forEach(([W,he])=>{he&&he.length>0&&(se=se.filter(ye=>{const ce=ye[W],Ue=Array.isArray(ce)?ce.map(De=>String(De).toLowerCase()):[String(ce).toLowerCase()];return he.every(De=>{const ge=De.value.toLowerCase(),Je=Ue.includes(ge);return De.isNot?!Je:Je})}))}),i(se);const V=se.map(W=>({indexPositionForNavigation:W.indexPositionForNavigation,sourceRow:W.sourceRow,songTitle:Array.isArray(W.title)?W.title.join(", "):W.title}));a(V)})()},[e,n,j]);const R=(L,se)=>{r(V=>{const W=V[L]||[],he=W.find(ye=>ye.value===se);if(he)if(he.isNot){const ye=W.filter(ce=>ce.value!==se);if(ye.length===0){const ce={...V};return delete ce[L],ce}return{...V,[L]:ye}}else return{...V,[L]:W.map(ye=>ye.value===se?{...ye,isNot:!0}:ye)};else return{...V,[L]:[...W,{value:se,isNot:!1}]}})},I=()=>{r({})},$=(L,se)=>{const V=Array.isArray(L.title)?L.title.join(", "):L.title;w(`/details/book/${L.category}/${L.bookId}/${L.sourceRow}/${encodeURIComponent(V)}`,{state:{filteredSongIndices:o,index:se}})},U=L=>{x(se=>({...se,[L]:!se[L]}))},K=ji(s,"author"),me=ji(s,"language");ji(s,"type");const M=ji(s,"raagam");ji(s,"taaLam");const re=ji(s,"book"),A=ji(s,"category"),Y={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set,raagam:new Set};e.length>0&&j.forEach(L=>{Object.entries(L).forEach(([se,V])=>{var W;Array.isArray(V)?V.forEach(he=>{var ye;typeof he=="string"&&he.toLowerCase().includes(e.toLowerCase())&&((ye=Y[se])==null||ye.add(he))}):typeof V=="string"&&V.toLowerCase().includes(e.toLowerCase())&&((W=Y[se])==null||W.add(V))})});const ve=(L,se)=>s.filter(V=>{const W=V[L];return Array.isArray(W)?W.includes(se):W===se}).length,ae=(L,se)=>{var W;const V=(W=n[L])==null?void 0:W.find(he=>he.value===se);return V?V.isNot?"bg-red-500 text-white":"bg-teal-500 text-white":"hover:bg-gray-600"};if(y)return k.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500",children:"Loading search index from Dexie... This may take a moment."});if(_)return k.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50",children:["Error loading search index: ",(T==null?void 0:T.message)||"Unknown error.",k.jsx("div",{className:"text-sm text-red-400 mt-2",children:"Falling back to no search capability."})]});const ue=L=>`${L.bookId}-${L.title}`;return k.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4 font-sans flex flex-col items-center",children:k.jsxs("div",{className:"w-full max-w-4xl bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8",children:[k.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-sky-500",children:"Progressive Search"}),k.jsx("div",{className:"mb-6 text-center",children:k.jsx("button",{onClick:()=>m(!p),className:"px-5 py-2 rounded-full font-semibold bg-gray-700 text-gray-400 hover:bg-gray-600 transition-colors text-sm",children:p?"Hide Debug Panel":"Show Debug Panel"})}),p&&k.jsxs("div",{className:"bg-gray-700 p-4 rounded-xl mb-6",children:[k.jsx("h2",{className:"text-xl font-bold text-gray-300 mb-2",children:"Debug Log (Local Storage)"}),k.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside",children:c.map((L,se)=>k.jsx("li",{className:"mb-1",children:L},se))})]}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-3 rounded-xl bg-gray-700 text-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-all",value:e,onChange:L=>t(L.target.value)}),e&&Object.values(Y).some(L=>L.size>0)&&k.jsx("div",{className:"absolute z-10 w-full mt-2 bg-gray-700 rounded-xl shadow-lg border border-gray-600 max-h-64 overflow-y-auto",children:Object.entries(Y).map(([L,se])=>se&&se.size>0&&k.jsxs("div",{className:"p-3",children:[k.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-1",children:L}),Array.from(se).map((V,W)=>k.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-teal-500 hover:text-white transition-colors",onClick:()=>{t(""),R(L,V)},children:V},W))]},L))})]}),Object.keys(n).some(L=>{const se=n[L];return se&&se.length>0})&&k.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[k.jsx("span",{className:"text-sm text-gray-400 mr-2",children:"Filters:"}),Object.entries(n).map(([L,se])=>se==null?void 0:se.map((V,W)=>k.jsxs("span",{className:`${V.isNot?"bg-red-500":"bg-teal-500"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-1`,children:[k.jsxs("span",{className:"font-semibold",children:[L,":"]})," ",V.value,k.jsx("button",{onClick:()=>R(L,V.value),className:"ml-1 text-white hover:text-gray-200 transition-colors",children:""})]},`${L}-${W}`))),k.jsx("button",{onClick:I,className:"text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:"Clear All Filters"})]}),y?k.jsx("div",{className:"text-center py-8",children:k.jsx("p",{className:"text-gray-400",children:"Loading songs from local storage..."})}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("category"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Category",k.jsx("span",{className:`transform transition-transform duration-300 ${v.category?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.category?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:A.map(L=>k.jsxs("button",{onClick:()=>R("category",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${ae("category",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ve("category",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("book"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Book",k.jsx("span",{className:`transform transition-transform duration-300 ${v.book?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.book?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:re.map(L=>k.jsxs("button",{onClick:()=>R("book",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${ae("book",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ve("book",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("author"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Author",k.jsx("span",{className:`transform transition-transform duration-300 ${v.author?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.author?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:K.map(L=>k.jsxs("button",{onClick:()=>R("author",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${ae("author",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ve("author",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("language"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Language",k.jsx("span",{className:`transform transition-transform duration-300 ${v.language?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.language?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:me.map(L=>k.jsxs("button",{onClick:()=>R("language",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${ae("language",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ve("language",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("raagam"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Raagam",k.jsx("span",{className:`transform transition-transform duration-300 ${v.raagam?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.raagam?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:M.map(L=>k.jsxs("button",{onClick:()=>R("raagam",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${ae("raagam",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ve("raagam",L)})]},L))})})]})]}),k.jsxs("div",{className:"mt-4",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("h2",{className:"text-xl font-bold",children:["Results (",s.length,")"]}),k.jsxs("div",{className:"flex gap-2 text-sm",children:[k.jsx("button",{onClick:()=>u("cards"),className:`px-3 py-1 rounded-full font-semibold transition-colors ${l==="cards"?"bg-sky-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Cards"}),k.jsx("button",{onClick:()=>u("grid"),className:`px-3 py-1 rounded-full font-semibold transition-colors ${l==="grid"?"bg-sky-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Table"})]})]}),s.length===0?k.jsx("p",{className:"text-gray-400 text-center py-8",children:"No songs match your search and filter criteria."}):k.jsx(k.Fragment,{children:l==="cards"?k.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map((L,se)=>{const V=ue(L);return k.jsxs("div",{onClick:()=>$(L,se),className:`bg-gray-700 p-4 rounded-xl shadow-md transition-transform hover:scale-105 cursor-pointer border-2 ${L.isAvailable?"border-teal-500":"border-red-500"}`,children:[k.jsx("h3",{className:"text-lg font-bold text-teal-400",children:L.title}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Author:"}),L.author]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Book:"}),L.book]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Category:"}),L.category]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Language:"}),L.language]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Type:"}),L.type]})]},V)})}):k.jsx("div",{className:"overflow-x-auto rounded-xl",children:k.jsxs("div",{className:"min-w-full",children:[k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2 p-4 text-sm font-semibold text-gray-400 uppercase tracking-wider bg-gray-700 border-b border-gray-600 rounded-t-xl",children:[k.jsx("span",{children:"Title"}),k.jsx("span",{className:"hidden md:block",children:"Author"}),k.jsx("span",{className:"hidden md:block",children:"Book"}),k.jsx("span",{className:"hidden md:block",children:"Category"}),k.jsx("span",{className:"hidden md:block",children:"Language"}),k.jsx("span",{className:"hidden md:block",children:"Type"})]}),k.jsx("div",{className:"bg-gray-700",children:s.map((L,se)=>{const V=ue(L);return k.jsxs("div",{onClick:()=>$(L,se),className:`grid grid-cols-2 md:grid-cols-6 gap-2 p-4 text-sm border-b transition-colors cursor-pointer hover:bg-gray-600 ${L.isAvailable?"border-teal-500":"border-gray-500"}`,children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Title:"}),k.jsx("span",{children:L.title})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Author:"}),k.jsx("span",{children:L.author})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Book:"}),k.jsx("span",{children:L.book})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Category:"}),k.jsx("span",{children:L.category})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Language:"}),k.jsx("span",{children:L.language})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Type:"}),k.jsx("span",{children:L.type})]})]},V)})})]})})})]})]})]})})},C4="thodaya-mangalam",T4=()=>{const[e,t]=E.useState(""),n=async()=>{t("Exporting...");try{const r=await uD(C4);if(!r){t("No data found for this book or download failed.");return}const s=r.songDetails.map(u=>u),i=r.songIndices.map(u=>{const{indexId:c,timestamp:f,...p}=u;return p}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:f,...p}=u;return p}),a={bookId:r.bookId,songIndices:i,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return k.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[k.jsx("div",{style:{marginTop:"20px"},children:k.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&k.jsxs("div",{style:{marginTop:"15px"},children:[k.jsx("h4",{children:"Exported JSON Structure:"}),k.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},P4=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],A4=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:s,isDownloading:i,startBulkDownload:o}=SS(e.bookId,t),a=()=>i?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${s} `:"Ready to Download";return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[k.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:i?"orange":n==="success"?"green":"gray"},children:a()}),k.jsx("button",{onClick:o,disabled:i,style:{padding:"5px 10px",backgroundColor:i?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:i?"Processing":"Bulk Download"})]})]})},O4=()=>{const e="test@example.com";return k.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[k.jsx("h2",{children:"Offline Content Manager"}),k.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),k.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:P4.map(t=>k.jsx(A4,{book:t,userEmail:e},t.bookId))})]})};function Kc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function o(u,c){if(!s[u]){if(!r[u]){var f=typeof Kc=="function"&&Kc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=s[u]={exports:{}};r[u][0].call(m.exports,function(w){var v=r[u][1][w];return o(v||w)},m,m.exports,n,r,s,i)}return s[u].exports}for(var a=typeof Kc=="function"&&Kc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,c,f,p,m,w,v,x=[],g=0,y=l.length,_=y,T=i.getTypeOf(l)!=="string";g<l.length;)_=y-g,f=T?(u=l[g++],c=g<y?l[g++]:0,g<y?l[g++]:0):(u=l.charCodeAt(g++),c=g<y?l.charCodeAt(g++):0,g<y?l.charCodeAt(g++):0),p=u>>2,m=(3&u)<<4|c>>4,w=1<_?(15&c)<<2|f>>6:64,v=2<_?63&f:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(w)+a.charAt(v));return x.join("")},s.decode=function(l){var u,c,f,p,m,w,v=0,x=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|_):new Array(0|_);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(p=a.indexOf(l.charAt(v++)))>>4,c=(15&p)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(w=a.indexOf(l.charAt(v++))),y[x++]=u,m!==64&&(y[x++]=c),w!==64&&(y[x++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,f,p,m,w){this.compressedSize=c,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=w}u.prototype={getContentWorker:function(){var c=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,p){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,c,f,p){var m=o,w=p+f;u^=-1;for(var v=p;v<w;v++)u=u>>>8^m[255&(u^c[v])];return-1^u}(0|l,a,a.length,0):function(u,c,f,p){var m=o,w=p+f;u^=-1;for(var v=p;v<w;v++)u=u>>>8^m[255&(u^c.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function c(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new c("Deflate",f)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(m,w){var v,x="";for(v=0;v<w;v++)x+=String.fromCharCode(255&m),m>>>=8;return x}function o(m,w,v,x,g,y){var _,T,j=m.file,R=m.compression,I=y!==u.utf8encode,$=a.transformTo("string",y(j.name)),U=a.transformTo("string",u.utf8encode(j.name)),K=j.comment,me=a.transformTo("string",y(K)),M=a.transformTo("string",u.utf8encode(K)),re=U.length!==j.name.length,A=M.length!==K.length,Y="",ve="",ae="",ue=j.dir,L=j.date,se={crc32:0,compressedSize:0,uncompressedSize:0};w&&!v||(se.crc32=m.crc32,se.compressedSize=m.compressedSize,se.uncompressedSize=m.uncompressedSize);var V=0;w&&(V|=8),I||!re&&!A||(V|=2048);var W=0,he=0;ue&&(W|=16),g==="UNIX"?(he=798,W|=function(ce,Re){var Ue=ce;return ce||(Ue=Re?16893:33204),(65535&Ue)<<16}(j.unixPermissions,ue)):(he=20,W|=function(ce){return 63&(ce||0)}(j.dosPermissions)),_=L.getUTCHours(),_<<=6,_|=L.getUTCMinutes(),_<<=5,_|=L.getUTCSeconds()/2,T=L.getUTCFullYear()-1980,T<<=4,T|=L.getUTCMonth()+1,T<<=5,T|=L.getUTCDate(),re&&(ve=i(1,1)+i(c($),4)+U,Y+="up"+i(ve.length,2)+ve),A&&(ae=i(1,1)+i(c(me),4)+M,Y+="uc"+i(ae.length,2)+ae);var ye="";return ye+=`
\0`,ye+=i(V,2),ye+=R.magic,ye+=i(_,2),ye+=i(T,2),ye+=i(se.crc32,4),ye+=i(se.compressedSize,4),ye+=i(se.uncompressedSize,4),ye+=i($.length,2),ye+=i(Y.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ye+$+Y,dirRecord:f.CENTRAL_FILE_HEADER+i(he,2)+ye+i(me.length,2)+"\0\0\0\0"+i(W,4)+i(x,4)+$+Y+me}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),f=n("../signature");function p(m,w,v,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=v,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var w=m.meta.percent||0,v=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(w+100*(v-x-1))/v:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var w=this.streamFiles&&!m.file.dir;if(w){var v=o(m,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var w=this.streamFiles&&!m.file.dir,v=o(m,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),w)this.push({data:function(x){return f.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var v=this.bytesWritten-m,x=function(g,y,_,T,j){var R=a.transformTo("string",j(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(y,4)+i(_,4)+i(R.length,2)+R}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var w=this;return m.on("data",function(v){w.processChunk(v)}),m.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),m.on("error",function(v){w.error(v)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var w=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<w.length;v++)try{w[v].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,w=0;w<m.length;w++)m[w].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var w=function(y,_){var T=y||_,j=i[T];if(!j)throw new Error(T+" is not a valid compression method !");return j}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},x=m.dir,g=m.date;m._compressWorker(w,v).withStreamInfo("file",{name:p,dir:x,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(p){return new o.Promise(function(m,w){var v=p.decompressed.getContentWorker().pipe(new u);v.on("error",function(x){w(x)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var w=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(v){var x=new l(m);return x.load(v),x}).then(function(v){var x=[o.Promise.resolve(v)],g=v.files;if(m.checkCRC32)for(var y=0;y<g.length;y++)x.push(f(g[y]));return o.Promise.all(x)}).then(function(v){for(var x=v.shift(),g=x.files,y=0;y<g.length;y++){var _=g[y],T=_.fileNameStr,j=i.resolve(_.fileNameStr);w.file(j,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(w.file(j).unsafeOriginalName=T)}return x.zipComment.length&&(w.comment=x.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,u){i.call(this,l),this._helper=a;var c=this;a.on("data",function(f,p){c.push(f)||c._helper.pause(),u&&u(p)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(j,R,I){var $,U=a.getTypeOf(R),K=a.extend(I||{},c);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(j=g(j)),K.createFolders&&($=x(j))&&y.call(this,$,!0);var me=U==="string"&&K.binary===!1&&K.base64===!1;I&&I.binary!==void 0||(K.binary=!me),(R instanceof f&&R.uncompressedSize===0||K.dir||!R||R.length===0)&&(K.base64=!1,K.binary=!0,R="",K.compression="STORE",U="string");var M=null;M=R instanceof f||R instanceof l?R:w.isNode&&w.isStream(R)?new v(j,R):a.prepareContent(j,R,K.binary,K.optimizedBinaryString,K.base64);var re=new p(j,M,K);this.files[j]=re}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),w=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),x=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var R=j.lastIndexOf("/");return 0<R?j.substring(0,R):""},g=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},y=function(j,R){return R=R!==void 0?R:c.createFolders,j=g(j),this.files[j]||i.call(this,j,null,{dir:!0,createFolders:R}),this.files[j]};function _(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var R,I,$;for(R in this.files)$=this.files[R],(I=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&j(I,$)},filter:function(j){var R=[];return this.forEach(function(I,$){j(I,$)&&R.push($)}),R},file:function(j,R,I){if(arguments.length!==1)return j=this.root+j,i.call(this,j,R,I),this;if(_(j)){var $=j;return this.filter(function(K,me){return!me.dir&&$.test(K)})}var U=this.files[this.root+j];return U&&!U.dir?U:null},folder:function(j){if(!j)return this;if(_(j))return this.filter(function(U,K){return K.dir&&j.test(U)});var R=this.root+j,I=y.call(this,R),$=this.clone();return $.root=I.name,$},remove:function(j){j=this.root+j;var R=this.files[j];if(R||(j.slice(-1)!=="/"&&(j+="/"),R=this.files[j]),R&&!R.dir)delete this.files[j];else for(var I=this.filter(function(U,K){return K.name.slice(0,j.length)===j}),$=0;$<I.length;$++)delete this.files[I[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var R,I={};try{if((I=a.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var $=I.comment||this.comment||"";R=m.generateWorker(this,I,$)}catch(U){(R=new l("error")).error(U)}return new u(R,I.type||"string",I.mimeType)},generateAsync:function(j,R){return this.generateInternalStream(j).accumulate(R)},generateNodeStream:function(j,R){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(R)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===c&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&c===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new c(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=i.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(w,v){return new c.Promise(function(x,g){var y=[],_=w._internalType,T=w._outputType,j=w._mimeType;w.on("data",function(R,I){y.push(R),v&&v(I)}).on("error",function(R){y=[],g(R)}).on("end",function(){try{var R=function(I,$,U){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",$),U);case"base64":return l.encode($);default:return i.transformTo(I,$)}}(T,function(I,$){var U,K=0,me=null,M=0;for(U=0;U<$.length;U++)M+=$[U].length;switch(I){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(me=new Uint8Array(M),U=0;U<$.length;U++)me.set($[U],K),K+=$[U].length;return me;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+I+"'")}}(_,y),j);x(R)}catch(I){g(I)}y=[]}).resume()})}function m(w,v,x){var g=v;switch(v){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=v,this._mimeType=x,i.checkSupport(g),this._worker=w.pipe(new o(g)),w.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(w){return p(this,w)},on:function(w,v){var x=this;return w==="data"?this._worker.on(w,function(g){v.call(x,g.data,g.meta)}):this._worker.on(w,function(){i.delay(v,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}s.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(w){var v,x,g,y,_,T=w.length,j=0;for(y=0;y<T;y++)(64512&(x=w.charCodeAt(y)))==55296&&y+1<T&&(64512&(g=w.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),y++),j+=x<128?1:x<2048?2:x<65536?3:4;for(v=o.uint8array?new Uint8Array(j):new Array(j),y=_=0;_<j;y++)(64512&(x=w.charCodeAt(y)))==55296&&y+1<T&&(64512&(g=w.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),y++),x<128?v[_++]=x:(x<2048?v[_++]=192|x>>>6:(x<65536?v[_++]=224|x>>>12:(v[_++]=240|x>>>18,v[_++]=128|x>>>12&63),v[_++]=128|x>>>6&63),v[_++]=128|63&x);return v}(m)},s.utf8decode=function(m){return o.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(w){var v,x,g,y,_=w.length,T=new Array(2*_);for(v=x=0;v<_;)if((g=w[v++])<128)T[x++]=g;else if(4<(y=u[g]))T[x++]=65533,v+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&v<_;)g=g<<6|63&w[v++],y--;1<y?T[x++]=65533:g<65536?T[x++]=g:(g-=65536,T[x++]=55296|g>>10&1023,T[x++]=56320|1023&g)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),i.applyFromCharCode(T)}(m=i.transformTo(o.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var w=i.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=w;(w=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),w.set(v,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var x=function(y,_){var T;for((_=_||y.length)>y.length&&(_=y.length),T=_-1;0<=T&&(192&y[T])==128;)T--;return T<0||T===0?_:T+u[y[T]]>_?T:_}(w),g=w;x!==w.length&&(o.uint8array?(g=w.subarray(0,x),this.leftOver=w.subarray(x,w.length)):(g=w.slice(0,x),this.leftOver=w.slice(x,w.length))),this.push({data:s.utf8decode(g),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:s.utf8encode(m.data),meta:m.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function c(v,x){for(var g=0;g<v.length;++g)x[g]=255&v.charCodeAt(g);return x}n("setimmediate"),s.newBlob=function(v,x){s.checkSupport("blob");try{return new Blob([v],{type:x})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(v),g.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,x,g){var y=[],_=0,T=v.length;if(T<=g)return String.fromCharCode.apply(null,v);for(;_<T;)x==="array"||x==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(_,Math.min(_+g,T)))):y.push(String.fromCharCode.apply(null,v.subarray(_,Math.min(_+g,T)))),_+=g;return y.join("")},stringifyByChar:function(v){for(var x="",g=0;g<v.length;g++)x+=String.fromCharCode(v[g]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var x=65536,g=s.getTypeOf(v),y=!0;if(g==="uint8array"?y=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<x;)try{return f.stringifyByChunk(v,g,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(v)}function m(v,x){for(var g=0;g<v.length;g++)x[g]=v[g];return x}s.applyFromCharCode=p;var w={};w.string={string:u,array:function(v){return c(v,new Array(v.length))},arraybuffer:function(v){return w.string.uint8array(v).buffer},uint8array:function(v){return c(v,new Uint8Array(v.length))},nodebuffer:function(v){return c(v,a.allocBuffer(v.length))}},w.array={string:p,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},w.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},w.uint8array={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},w.nodebuffer={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return w.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},s.transformTo=function(v,x){if(x=x||"",!v)return x;s.checkSupport(v);var g=s.getTypeOf(x);return w[g][v](x)},s.resolve=function(v){for(var x=v.split("/"),g=[],y=0;y<x.length;y++){var _=x[y];_==="."||_===""&&y!==0&&y!==x.length-1||(_===".."?g.pop():g.push(_))}return g.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var x,g,y="";for(g=0;g<(v||"").length;g++)y+="\\x"+((x=v.charCodeAt(g))<16?"0":"")+x.toString(16).toUpperCase();return y},s.delay=function(v,x,g){setImmediate(function(){v.apply(g||null,x||[])})},s.inherits=function(v,x){function g(){}g.prototype=x.prototype,v.prototype=new g},s.extend=function(){var v,x,g={};for(v=0;v<arguments.length;v++)for(x in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],x)&&g[x]===void 0&&(g[x]=arguments[v][x]);return g},s.prepareContent=function(v,x,g,y,_){return l.Promise.resolve(x).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new l.Promise(function(j,R){var I=new FileReader;I.onload=function($){j($.target.result)},I.onerror=function($){R($.target.error)},I.readAsArrayBuffer(T)}):T}).then(function(T){var j=s.getTypeOf(T);return j?(j==="arraybuffer"?T=s.transformTo("uint8array",T):j==="string"&&(_?T=o.decode(T):g&&y!==!0&&(T=function(R){return c(R,i.uint8array?new Uint8Array(R.length):new Array(R.length))}(T))),T):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var w=this.reader.readString(4)===p;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,w=this.zip64EndOfCentralSize-44;0<w;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var w=p-m;if(0<w)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),f=n("./support");function p(m,w){this.options=m,this.loadOptions=w}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var w,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(x){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===x)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var w=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(w),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var w,v,x,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)w=m.readInt(2),v=m.readInt(2),x=m.readData(v),this.extraFields[w]={id:w,length:v,value:x};m.setIndex(g)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var w=i(m.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:u.utf8decode(w.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var w=i(m.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:u.utf8decode(w.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,v,x){this.name=w,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=v,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var v=null,x="string";try{if(!w)throw new Error("No output type specified.");var g=(x=w.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),v=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(v=v.pipe(new l.Utf8EncodeWorker)),!y&&g&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(_){(v=new c("error")).error(_)}return new o(v,x,"")},async:function(w,v){return this.internalStream(w).accumulate(v)},nodeStream:function(w,v){return this.internalStream(w||"nodebuffer").toNodejsStream(v)},_compressWorker:function(w,v){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,w,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,c=new l(w),f=i.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){w(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(w,0)};else{var p=new i.MessageChannel;p.port1.onmessage=w,o=function(){p.port2.postMessage(0)}}var m=[];function w(){var v,x;a=!0;for(var g=m.length;g;){for(x=m,m=[],v=-1;++v<g;)x[v]();g=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&v(this,g)}function p(g,y,_){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(g,y,_){i(function(){var T;try{T=y(_)}catch(j){return a.reject(g,j)}T===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,T)})}function w(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function v(g,y){var _=!1;function T(I){_||(_=!0,a.reject(g,I))}function j(I){_||(_=!0,a.resolve(g,I))}var R=x(function(){y(j,T)});R.status==="error"&&T(R.value)}function x(g,y){var _={};try{_.value=g(y),_.status="success"}catch(T){_.status="error",_.value=T}return _}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(_){return y.resolve(g()).then(function(){return _})},function(_){return y.resolve(g()).then(function(){throw _})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,y){if(typeof g!="function"&&this.state===u||typeof y!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==c?m(_,this.state===u?g:y,this.outcome):this.queue.push(new p(_,g,y)),_},p.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},p.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},p.prototype.callRejected=function(g){a.reject(this.promise,g)},p.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,y){var _=x(w,y);if(_.status==="error")return a.reject(g,_.value);var T=_.value;if(T)v(g,T);else{g.state=u,g.outcome=y;for(var j=-1,R=g.queue.length;++j<R;)g.queue[j].callFulfilled(y)}return g},a.reject=function(g,y){g.state=l,g.outcome=y;for(var _=-1,T=g.queue.length;++_<T;)g.queue[_].callRejected(y);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var y=new this(o);return a.reject(y,g)},f.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=g.length,T=!1;if(!_)return this.resolve([]);for(var j=new Array(_),R=0,I=-1,$=new this(o);++I<_;)U(g[I],I);return $;function U(K,me){y.resolve(K).then(function(M){j[me]=M,++R!==_||T||(T=!0,a.resolve($,j))},function(M){T||(T=!0,a.reject($,M))})}},f.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=g.length,T=!1;if(!_)return this.resolve([]);for(var j=-1,R=new this(o);++j<_;)I=g[j],y.resolve(I).then(function($){T||(T=!0,a.resolve(R,$))},function($){T||(T=!0,a.reject(R,$))});var I;return R}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,f=0,p=-1,m=0,w=8;function v(g){if(!(this instanceof v))return new v(g);this.options=o.assign({level:p,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(_!==f)throw new Error(l[_]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var T;if(T=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(_=i.deflateSetDictionary(this.strm,T))!==f)throw new Error(l[_]);this._dict_set=!0}}function x(g,y){var _=new v(y);if(_.push(g,!0),_.err)throw _.msg||l[_.err];return _.result}v.prototype.push=function(g,y){var _,T,j=this.strm,R=this.options.chunkSize;if(this.ended)return!1;T=y===~~y?y:y===!0?4:0,typeof g=="string"?j.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?j.input=new Uint8Array(g):j.input=g,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(R),j.next_out=0,j.avail_out=R),(_=i.deflate(j,T))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(j.output,j.next_out))):this.onData(o.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&_!==1);return T===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):T!==2||(this.onEnd(f),!(j.avail_out=0))},v.prototype.onData=function(g){this.chunks.push(g)},v.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=v,s.deflate=x,s.deflateRaw=function(g,y){return(y=y||{}).raw=!0,x(g,y)},s.gzip=function(g,y){return(y=y||{}).gzip=!0,x(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||v&&v.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,x.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function w(v,x){var g=new m(x);if(g.push(v,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(v,x){var g,y,_,T,j,R,I=this.strm,$=this.options.chunkSize,U=this.options.dictionary,K=!1;if(this.ended)return!1;y=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?I.input=a.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8($),I.next_out=0,I.avail_out=$),(g=i.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&U&&(R=typeof U=="string"?a.string2buf(U):p.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,g=i.inflateSetDictionary(this.strm,R)),g===l.Z_BUF_ERROR&&K===!0&&(g=l.Z_OK,K=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&g!==l.Z_STREAM_END&&(I.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(I.output,I.next_out),T=I.next_out-_,j=a.buf2string(I.output,_),I.next_out=T,I.avail_out=$-T,T&&o.arraySet(I.output,I.output,_,T,0),this.onData(j)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(K=!0)}while((0<I.avail_in||I.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=m,s.inflate=w,s.inflateRaw=function(v,x){return(x=x||{}).raw=!0,w(v,x)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,f,p){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),p);else for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){var u,c,f,p,m,w;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(w=new Uint8Array(f),u=p=0,c=l.length;u<c;u++)m=l[u],w.set(m,p),p+=m.length;return w}},a={arraySet:function(l,u,c,f,p){for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var m="",w=0;w<p;w++)m+=String.fromCharCode(f[w]);return m}l[254]=l[254]=1,s.string2buf=function(f){var p,m,w,v,x,g=f.length,y=0;for(v=0;v<g;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(w=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),v++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new i.Buf8(y),v=x=0;x<y;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(w=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),v++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},s.buf2binstring=function(f){return c(f,f.length)},s.binstring2buf=function(f){for(var p=new i.Buf8(f.length),m=0,w=p.length;m<w;m++)p[m]=f.charCodeAt(m);return p},s.buf2string=function(f,p){var m,w,v,x,g=p||f.length,y=new Array(2*g);for(m=w=0;m<g;)if((v=f[m++])<128)y[w++]=v;else if(4<(x=l[v]))y[w++]=65533,m+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&m<g;)v=v<<6|63&f[m++],x--;1<x?y[w++]=65533:v<65536?y[w++]=v:(v-=65536,y[w++]=55296|v>>10&1023,y[w++]=56320|1023&v)}return c(y,w)},s.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var u=65535&i|0,c=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=i,f=u+l;o^=-1;for(var p=u;p<f;p++)o=o>>>8^c[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),f=0,p=4,m=0,w=-2,v=-1,x=4,g=2,y=8,_=9,T=286,j=30,R=19,I=2*T+1,$=15,U=3,K=258,me=K+U+1,M=42,re=113,A=1,Y=2,ve=3,ae=4;function ue(P,pe){return P.msg=c[pe],pe}function L(P){return(P<<1)-(4<P?9:0)}function se(P){for(var pe=P.length;0<=--pe;)P[pe]=0}function V(P){var pe=P.state,de=pe.pending;de>P.avail_out&&(de=P.avail_out),de!==0&&(o.arraySet(P.output,pe.pending_buf,pe.pending_out,de,P.next_out),P.next_out+=de,pe.pending_out+=de,P.total_out+=de,P.avail_out-=de,pe.pending-=de,pe.pending===0&&(pe.pending_out=0))}function W(P,pe){a._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,pe),P.block_start=P.strstart,V(P.strm)}function he(P,pe){P.pending_buf[P.pending++]=pe}function ye(P,pe){P.pending_buf[P.pending++]=pe>>>8&255,P.pending_buf[P.pending++]=255&pe}function ce(P,pe){var de,F,N=P.max_chain_length,ee=P.strstart,we=P.prev_length,be=P.nice_match,oe=P.strstart>P.w_size-me?P.strstart-(P.w_size-me):0,_e=P.window,Ne=P.w_mask,ke=P.prev,Be=P.strstart+K,rt=_e[ee+we-1],Ze=_e[ee+we];P.prev_length>=P.good_match&&(N>>=2),be>P.lookahead&&(be=P.lookahead);do if(_e[(de=pe)+we]===Ze&&_e[de+we-1]===rt&&_e[de]===_e[ee]&&_e[++de]===_e[ee+1]){ee+=2,de++;do;while(_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&_e[++ee]===_e[++de]&&ee<Be);if(F=K-(Be-ee),ee=Be-K,we<F){if(P.match_start=pe,be<=(we=F))break;rt=_e[ee+we-1],Ze=_e[ee+we]}}while((pe=ke[pe&Ne])>oe&&--N!=0);return we<=P.lookahead?we:P.lookahead}function Re(P){var pe,de,F,N,ee,we,be,oe,_e,Ne,ke=P.w_size;do{if(N=P.window_size-P.lookahead-P.strstart,P.strstart>=ke+(ke-me)){for(o.arraySet(P.window,P.window,ke,ke,0),P.match_start-=ke,P.strstart-=ke,P.block_start-=ke,pe=de=P.hash_size;F=P.head[--pe],P.head[pe]=ke<=F?F-ke:0,--de;);for(pe=de=ke;F=P.prev[--pe],P.prev[pe]=ke<=F?F-ke:0,--de;);N+=ke}if(P.strm.avail_in===0)break;if(we=P.strm,be=P.window,oe=P.strstart+P.lookahead,_e=N,Ne=void 0,Ne=we.avail_in,_e<Ne&&(Ne=_e),de=Ne===0?0:(we.avail_in-=Ne,o.arraySet(be,we.input,we.next_in,Ne,oe),we.state.wrap===1?we.adler=l(we.adler,be,Ne,oe):we.state.wrap===2&&(we.adler=u(we.adler,be,Ne,oe)),we.next_in+=Ne,we.total_in+=Ne,Ne),P.lookahead+=de,P.lookahead+P.insert>=U)for(ee=P.strstart-P.insert,P.ins_h=P.window[ee],P.ins_h=(P.ins_h<<P.hash_shift^P.window[ee+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[ee+U-1])&P.hash_mask,P.prev[ee&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=ee,ee++,P.insert--,!(P.lookahead+P.insert<U)););}while(P.lookahead<me&&P.strm.avail_in!==0)}function Ue(P,pe){for(var de,F;;){if(P.lookahead<me){if(Re(P),P.lookahead<me&&pe===f)return A;if(P.lookahead===0)break}if(de=0,P.lookahead>=U&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),de!==0&&P.strstart-de<=P.w_size-me&&(P.match_length=ce(P,de)),P.match_length>=U)if(F=a._tr_tally(P,P.strstart-P.match_start,P.match_length-U),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=U){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else F=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(F&&(W(P,!1),P.strm.avail_out===0))return A}return P.insert=P.strstart<U-1?P.strstart:U-1,pe===p?(W(P,!0),P.strm.avail_out===0?ve:ae):P.last_lit&&(W(P,!1),P.strm.avail_out===0)?A:Y}function De(P,pe){for(var de,F,N;;){if(P.lookahead<me){if(Re(P),P.lookahead<me&&pe===f)return A;if(P.lookahead===0)break}if(de=0,P.lookahead>=U&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=U-1,de!==0&&P.prev_length<P.max_lazy_match&&P.strstart-de<=P.w_size-me&&(P.match_length=ce(P,de),P.match_length<=5&&(P.strategy===1||P.match_length===U&&4096<P.strstart-P.match_start)&&(P.match_length=U-1)),P.prev_length>=U&&P.match_length<=P.prev_length){for(N=P.strstart+P.lookahead-U,F=a._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-U),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=U-1,P.strstart++,F&&(W(P,!1),P.strm.avail_out===0))return A}else if(P.match_available){if((F=a._tr_tally(P,0,P.window[P.strstart-1]))&&W(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return A}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(F=a._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<U-1?P.strstart:U-1,pe===p?(W(P,!0),P.strm.avail_out===0?ve:ae):P.last_lit&&(W(P,!1),P.strm.avail_out===0)?A:Y}function ge(P,pe,de,F,N){this.good_length=P,this.max_lazy=pe,this.nice_length=de,this.max_chain=F,this.func=N}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*j+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16($+1),this.heap=new o.Buf16(2*T+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*T+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function tt(P){var pe;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=g,(pe=P.state).pending=0,pe.pending_out=0,pe.wrap<0&&(pe.wrap=-pe.wrap),pe.status=pe.wrap?M:re,P.adler=pe.wrap===2?0:1,pe.last_flush=f,a._tr_init(pe),m):ue(P,w)}function Ke(P){var pe=tt(P);return pe===m&&function(de){de.window_size=2*de.w_size,se(de.head),de.max_lazy_match=i[de.level].max_lazy,de.good_match=i[de.level].good_length,de.nice_match=i[de.level].nice_length,de.max_chain_length=i[de.level].max_chain,de.strstart=0,de.block_start=0,de.lookahead=0,de.insert=0,de.match_length=de.prev_length=U-1,de.match_available=0,de.ins_h=0}(P.state),pe}function Pt(P,pe,de,F,N,ee){if(!P)return w;var we=1;if(pe===v&&(pe=6),F<0?(we=0,F=-F):15<F&&(we=2,F-=16),N<1||_<N||de!==y||F<8||15<F||pe<0||9<pe||ee<0||x<ee)return ue(P,w);F===8&&(F=9);var be=new Je;return(P.state=be).strm=P,be.wrap=we,be.gzhead=null,be.w_bits=F,be.w_size=1<<be.w_bits,be.w_mask=be.w_size-1,be.hash_bits=N+7,be.hash_size=1<<be.hash_bits,be.hash_mask=be.hash_size-1,be.hash_shift=~~((be.hash_bits+U-1)/U),be.window=new o.Buf8(2*be.w_size),be.head=new o.Buf16(be.hash_size),be.prev=new o.Buf16(be.w_size),be.lit_bufsize=1<<N+6,be.pending_buf_size=4*be.lit_bufsize,be.pending_buf=new o.Buf8(be.pending_buf_size),be.d_buf=1*be.lit_bufsize,be.l_buf=3*be.lit_bufsize,be.level=pe,be.strategy=ee,be.method=de,Ke(P)}i=[new ge(0,0,0,0,function(P,pe){var de=65535;for(de>P.pending_buf_size-5&&(de=P.pending_buf_size-5);;){if(P.lookahead<=1){if(Re(P),P.lookahead===0&&pe===f)return A;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var F=P.block_start+de;if((P.strstart===0||P.strstart>=F)&&(P.lookahead=P.strstart-F,P.strstart=F,W(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-me&&(W(P,!1),P.strm.avail_out===0))return A}return P.insert=0,pe===p?(W(P,!0),P.strm.avail_out===0?ve:ae):(P.strstart>P.block_start&&(W(P,!1),P.strm.avail_out),A)}),new ge(4,4,8,4,Ue),new ge(4,5,16,8,Ue),new ge(4,6,32,32,Ue),new ge(4,4,16,16,De),new ge(8,16,32,32,De),new ge(8,16,128,128,De),new ge(8,32,128,256,De),new ge(32,128,258,1024,De),new ge(32,258,258,4096,De)],s.deflateInit=function(P,pe){return Pt(P,pe,y,15,8,0)},s.deflateInit2=Pt,s.deflateReset=Ke,s.deflateResetKeep=tt,s.deflateSetHeader=function(P,pe){return P&&P.state?P.state.wrap!==2?w:(P.state.gzhead=pe,m):w},s.deflate=function(P,pe){var de,F,N,ee;if(!P||!P.state||5<pe||pe<0)return P?ue(P,w):w;if(F=P.state,!P.output||!P.input&&P.avail_in!==0||F.status===666&&pe!==p)return ue(P,P.avail_out===0?-5:w);if(F.strm=P,de=F.last_flush,F.last_flush=pe,F.status===M)if(F.wrap===2)P.adler=0,he(F,31),he(F,139),he(F,8),F.gzhead?(he(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),he(F,255&F.gzhead.time),he(F,F.gzhead.time>>8&255),he(F,F.gzhead.time>>16&255),he(F,F.gzhead.time>>24&255),he(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),he(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(he(F,255&F.gzhead.extra.length),he(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(P.adler=u(P.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(he(F,0),he(F,0),he(F,0),he(F,0),he(F,0),he(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),he(F,3),F.status=re);else{var we=y+(F.w_bits-8<<4)<<8;we|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(we|=32),we+=31-we%31,F.status=re,ye(F,we),F.strstart!==0&&(ye(F,P.adler>>>16),ye(F,65535&P.adler)),P.adler=1}if(F.status===69)if(F.gzhead.extra){for(N=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>N&&(P.adler=u(P.adler,F.pending_buf,F.pending-N,N)),V(P),N=F.pending,F.pending!==F.pending_buf_size));)he(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>N&&(P.adler=u(P.adler,F.pending_buf,F.pending-N,N)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){N=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>N&&(P.adler=u(P.adler,F.pending_buf,F.pending-N,N)),V(P),N=F.pending,F.pending===F.pending_buf_size)){ee=1;break}ee=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,he(F,ee)}while(ee!==0);F.gzhead.hcrc&&F.pending>N&&(P.adler=u(P.adler,F.pending_buf,F.pending-N,N)),ee===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){N=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>N&&(P.adler=u(P.adler,F.pending_buf,F.pending-N,N)),V(P),N=F.pending,F.pending===F.pending_buf_size)){ee=1;break}ee=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,he(F,ee)}while(ee!==0);F.gzhead.hcrc&&F.pending>N&&(P.adler=u(P.adler,F.pending_buf,F.pending-N,N)),ee===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&V(P),F.pending+2<=F.pending_buf_size&&(he(F,255&P.adler),he(F,P.adler>>8&255),P.adler=0,F.status=re)):F.status=re),F.pending!==0){if(V(P),P.avail_out===0)return F.last_flush=-1,m}else if(P.avail_in===0&&L(pe)<=L(de)&&pe!==p)return ue(P,-5);if(F.status===666&&P.avail_in!==0)return ue(P,-5);if(P.avail_in!==0||F.lookahead!==0||pe!==f&&F.status!==666){var be=F.strategy===2?function(oe,_e){for(var Ne;;){if(oe.lookahead===0&&(Re(oe),oe.lookahead===0)){if(_e===f)return A;break}if(oe.match_length=0,Ne=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,Ne&&(W(oe,!1),oe.strm.avail_out===0))return A}return oe.insert=0,_e===p?(W(oe,!0),oe.strm.avail_out===0?ve:ae):oe.last_lit&&(W(oe,!1),oe.strm.avail_out===0)?A:Y}(F,pe):F.strategy===3?function(oe,_e){for(var Ne,ke,Be,rt,Ze=oe.window;;){if(oe.lookahead<=K){if(Re(oe),oe.lookahead<=K&&_e===f)return A;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=U&&0<oe.strstart&&(ke=Ze[Be=oe.strstart-1])===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]){rt=oe.strstart+K;do;while(ke===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]&&ke===Ze[++Be]&&Be<rt);oe.match_length=K-(rt-Be),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=U?(Ne=a._tr_tally(oe,1,oe.match_length-U),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(Ne=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),Ne&&(W(oe,!1),oe.strm.avail_out===0))return A}return oe.insert=0,_e===p?(W(oe,!0),oe.strm.avail_out===0?ve:ae):oe.last_lit&&(W(oe,!1),oe.strm.avail_out===0)?A:Y}(F,pe):i[F.level].func(F,pe);if(be!==ve&&be!==ae||(F.status=666),be===A||be===ve)return P.avail_out===0&&(F.last_flush=-1),m;if(be===Y&&(pe===1?a._tr_align(F):pe!==5&&(a._tr_stored_block(F,0,0,!1),pe===3&&(se(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),V(P),P.avail_out===0))return F.last_flush=-1,m}return pe!==p?m:F.wrap<=0?1:(F.wrap===2?(he(F,255&P.adler),he(F,P.adler>>8&255),he(F,P.adler>>16&255),he(F,P.adler>>24&255),he(F,255&P.total_in),he(F,P.total_in>>8&255),he(F,P.total_in>>16&255),he(F,P.total_in>>24&255)):(ye(F,P.adler>>>16),ye(F,65535&P.adler)),V(P),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?m:1)},s.deflateEnd=function(P){var pe;return P&&P.state?(pe=P.state.status)!==M&&pe!==69&&pe!==73&&pe!==91&&pe!==103&&pe!==re&&pe!==666?ue(P,w):(P.state=null,pe===re?ue(P,-3):m):w},s.deflateSetDictionary=function(P,pe){var de,F,N,ee,we,be,oe,_e,Ne=pe.length;if(!P||!P.state||(ee=(de=P.state).wrap)===2||ee===1&&de.status!==M||de.lookahead)return w;for(ee===1&&(P.adler=l(P.adler,pe,Ne,0)),de.wrap=0,Ne>=de.w_size&&(ee===0&&(se(de.head),de.strstart=0,de.block_start=0,de.insert=0),_e=new o.Buf8(de.w_size),o.arraySet(_e,pe,Ne-de.w_size,de.w_size,0),pe=_e,Ne=de.w_size),we=P.avail_in,be=P.next_in,oe=P.input,P.avail_in=Ne,P.next_in=0,P.input=pe,Re(de);de.lookahead>=U;){for(F=de.strstart,N=de.lookahead-(U-1);de.ins_h=(de.ins_h<<de.hash_shift^de.window[F+U-1])&de.hash_mask,de.prev[F&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=F,F++,--N;);de.strstart=F,de.lookahead=U-1,Re(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=U-1,de.match_available=0,P.next_in=be,P.input=oe,P.avail_in=we,de.wrap=ee,m},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,u,c,f,p,m,w,v,x,g,y,_,T,j,R,I,$,U,K,me,M,re,A,Y;a=i.state,l=i.next_in,A=i.input,u=l+(i.avail_in-5),c=i.next_out,Y=i.output,f=c-(o-i.avail_out),p=c+(i.avail_out-257),m=a.dmax,w=a.wsize,v=a.whave,x=a.wnext,g=a.window,y=a.hold,_=a.bits,T=a.lencode,j=a.distcode,R=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{_<15&&(y+=A[l++]<<_,_+=8,y+=A[l++]<<_,_+=8),$=T[y&R];t:for(;;){if(y>>>=U=$>>>24,_-=U,(U=$>>>16&255)===0)Y[c++]=65535&$;else{if(!(16&U)){if(!(64&U)){$=T[(65535&$)+(y&(1<<U)-1)];continue t}if(32&U){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}K=65535&$,(U&=15)&&(_<U&&(y+=A[l++]<<_,_+=8),K+=y&(1<<U)-1,y>>>=U,_-=U),_<15&&(y+=A[l++]<<_,_+=8,y+=A[l++]<<_,_+=8),$=j[y&I];n:for(;;){if(y>>>=U=$>>>24,_-=U,!(16&(U=$>>>16&255))){if(!(64&U)){$=j[(65535&$)+(y&(1<<U)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(me=65535&$,_<(U&=15)&&(y+=A[l++]<<_,(_+=8)<U&&(y+=A[l++]<<_,_+=8)),m<(me+=y&(1<<U)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=U,_-=U,(U=c-f)<me){if(v<(U=me-U)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(re=g,(M=0)===x){if(M+=w-U,U<K){for(K-=U;Y[c++]=g[M++],--U;);M=c-me,re=Y}}else if(x<U){if(M+=w+x-U,(U-=x)<K){for(K-=U;Y[c++]=g[M++],--U;);if(M=0,x<K){for(K-=U=x;Y[c++]=g[M++],--U;);M=c-me,re=Y}}}else if(M+=x-U,U<K){for(K-=U;Y[c++]=g[M++],--U;);M=c-me,re=Y}for(;2<K;)Y[c++]=re[M++],Y[c++]=re[M++],Y[c++]=re[M++],K-=3;K&&(Y[c++]=re[M++],1<K&&(Y[c++]=re[M++]))}else{for(M=c-me;Y[c++]=Y[M++],Y[c++]=Y[M++],Y[c++]=Y[M++],2<(K-=3););K&&(Y[c++]=Y[M++],1<K&&(Y[c++]=Y[M++]))}break}}break}}while(l<u&&c<p);l-=K=_>>3,y&=(1<<(_-=K<<3))-1,i.next_in=l,i.next_out=c,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=c<p?p-c+257:257-(c-p),a.hold=y,a.bits=_}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,f=2,p=0,m=-2,w=1,v=852,x=592;function g(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(M){var re;return M&&M.state?(re=M.state,M.total_in=M.total_out=re.total=0,M.msg="",re.wrap&&(M.adler=1&re.wrap),re.mode=w,re.last=0,re.havedict=0,re.dmax=32768,re.head=null,re.hold=0,re.bits=0,re.lencode=re.lendyn=new i.Buf32(v),re.distcode=re.distdyn=new i.Buf32(x),re.sane=1,re.back=-1,p):m}function T(M){var re;return M&&M.state?((re=M.state).wsize=0,re.whave=0,re.wnext=0,_(M)):m}function j(M,re){var A,Y;return M&&M.state?(Y=M.state,re<0?(A=0,re=-re):(A=1+(re>>4),re<48&&(re&=15)),re&&(re<8||15<re)?m:(Y.window!==null&&Y.wbits!==re&&(Y.window=null),Y.wrap=A,Y.wbits=re,T(M))):m}function R(M,re){var A,Y;return M?(Y=new y,(M.state=Y).window=null,(A=j(M,re))!==p&&(M.state=null),A):m}var I,$,U=!0;function K(M){if(U){var re;for(I=new i.Buf32(512),$=new i.Buf32(32),re=0;re<144;)M.lens[re++]=8;for(;re<256;)M.lens[re++]=9;for(;re<280;)M.lens[re++]=7;for(;re<288;)M.lens[re++]=8;for(u(c,M.lens,0,288,I,0,M.work,{bits:9}),re=0;re<32;)M.lens[re++]=5;u(f,M.lens,0,32,$,0,M.work,{bits:5}),U=!1}M.lencode=I,M.lenbits=9,M.distcode=$,M.distbits=5}function me(M,re,A,Y){var ve,ae=M.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new i.Buf8(ae.wsize)),Y>=ae.wsize?(i.arraySet(ae.window,re,A-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(Y<(ve=ae.wsize-ae.wnext)&&(ve=Y),i.arraySet(ae.window,re,A-Y,ve,ae.wnext),(Y-=ve)?(i.arraySet(ae.window,re,A-Y,Y,0),ae.wnext=Y,ae.whave=ae.wsize):(ae.wnext+=ve,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=ve))),0}s.inflateReset=T,s.inflateReset2=j,s.inflateResetKeep=_,s.inflateInit=function(M){return R(M,15)},s.inflateInit2=R,s.inflate=function(M,re){var A,Y,ve,ae,ue,L,se,V,W,he,ye,ce,Re,Ue,De,ge,Je,tt,Ke,Pt,P,pe,de,F,N=0,ee=new i.Buf8(4),we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return m;(A=M.state).mode===12&&(A.mode=13),ue=M.next_out,ve=M.output,se=M.avail_out,ae=M.next_in,Y=M.input,L=M.avail_in,V=A.hold,W=A.bits,he=L,ye=se,pe=p;e:for(;;)switch(A.mode){case w:if(A.wrap===0){A.mode=13;break}for(;W<16;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(2&A.wrap&&V===35615){ee[A.check=0]=255&V,ee[1]=V>>>8&255,A.check=a(A.check,ee,2,0),W=V=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&V)<<8)+(V>>8))%31){M.msg="incorrect header check",A.mode=30;break}if((15&V)!=8){M.msg="unknown compression method",A.mode=30;break}if(W-=4,P=8+(15&(V>>>=4)),A.wbits===0)A.wbits=P;else if(P>A.wbits){M.msg="invalid window size",A.mode=30;break}A.dmax=1<<P,M.adler=A.check=1,A.mode=512&V?10:12,W=V=0;break;case 2:for(;W<16;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(A.flags=V,(255&A.flags)!=8){M.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){M.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=V>>8&1),512&A.flags&&(ee[0]=255&V,ee[1]=V>>>8&255,A.check=a(A.check,ee,2,0)),W=V=0,A.mode=3;case 3:for(;W<32;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}A.head&&(A.head.time=V),512&A.flags&&(ee[0]=255&V,ee[1]=V>>>8&255,ee[2]=V>>>16&255,ee[3]=V>>>24&255,A.check=a(A.check,ee,4,0)),W=V=0,A.mode=4;case 4:for(;W<16;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}A.head&&(A.head.xflags=255&V,A.head.os=V>>8),512&A.flags&&(ee[0]=255&V,ee[1]=V>>>8&255,A.check=a(A.check,ee,2,0)),W=V=0,A.mode=5;case 5:if(1024&A.flags){for(;W<16;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}A.length=V,A.head&&(A.head.extra_len=V),512&A.flags&&(ee[0]=255&V,ee[1]=V>>>8&255,A.check=a(A.check,ee,2,0)),W=V=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(L<(ce=A.length)&&(ce=L),ce&&(A.head&&(P=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),i.arraySet(A.head.extra,Y,ae,ce,P)),512&A.flags&&(A.check=a(A.check,Y,ce,ae)),L-=ce,ae+=ce,A.length-=ce),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(L===0)break e;for(ce=0;P=Y[ae+ce++],A.head&&P&&A.length<65536&&(A.head.name+=String.fromCharCode(P)),P&&ce<L;);if(512&A.flags&&(A.check=a(A.check,Y,ce,ae)),L-=ce,ae+=ce,P)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(L===0)break e;for(ce=0;P=Y[ae+ce++],A.head&&P&&A.length<65536&&(A.head.comment+=String.fromCharCode(P)),P&&ce<L;);if(512&A.flags&&(A.check=a(A.check,Y,ce,ae)),L-=ce,ae+=ce,P)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;W<16;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(V!==(65535&A.check)){M.msg="header crc mismatch",A.mode=30;break}W=V=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),M.adler=A.check=0,A.mode=12;break;case 10:for(;W<32;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}M.adler=A.check=g(V),W=V=0,A.mode=11;case 11:if(A.havedict===0)return M.next_out=ue,M.avail_out=se,M.next_in=ae,M.avail_in=L,A.hold=V,A.bits=W,2;M.adler=A.check=1,A.mode=12;case 12:if(re===5||re===6)break e;case 13:if(A.last){V>>>=7&W,W-=7&W,A.mode=27;break}for(;W<3;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}switch(A.last=1&V,W-=1,3&(V>>>=1)){case 0:A.mode=14;break;case 1:if(K(A),A.mode=20,re!==6)break;V>>>=2,W-=2;break e;case 2:A.mode=17;break;case 3:M.msg="invalid block type",A.mode=30}V>>>=2,W-=2;break;case 14:for(V>>>=7&W,W-=7&W;W<32;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if((65535&V)!=(V>>>16^65535)){M.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&V,W=V=0,A.mode=15,re===6)break e;case 15:A.mode=16;case 16:if(ce=A.length){if(L<ce&&(ce=L),se<ce&&(ce=se),ce===0)break e;i.arraySet(ve,Y,ae,ce,ue),L-=ce,ae+=ce,se-=ce,ue+=ce,A.length-=ce;break}A.mode=12;break;case 17:for(;W<14;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(A.nlen=257+(31&V),V>>>=5,W-=5,A.ndist=1+(31&V),V>>>=5,W-=5,A.ncode=4+(15&V),V>>>=4,W-=4,286<A.nlen||30<A.ndist){M.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;W<3;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}A.lens[we[A.have++]]=7&V,V>>>=3,W-=3}for(;A.have<19;)A.lens[we[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,de={bits:A.lenbits},pe=u(0,A.lens,0,19,A.lencode,0,A.work,de),A.lenbits=de.bits,pe){M.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;ge=(N=A.lencode[V&(1<<A.lenbits)-1])>>>16&255,Je=65535&N,!((De=N>>>24)<=W);){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(Je<16)V>>>=De,W-=De,A.lens[A.have++]=Je;else{if(Je===16){for(F=De+2;W<F;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(V>>>=De,W-=De,A.have===0){M.msg="invalid bit length repeat",A.mode=30;break}P=A.lens[A.have-1],ce=3+(3&V),V>>>=2,W-=2}else if(Je===17){for(F=De+3;W<F;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}W-=De,P=0,ce=3+(7&(V>>>=De)),V>>>=3,W-=3}else{for(F=De+7;W<F;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}W-=De,P=0,ce=11+(127&(V>>>=De)),V>>>=7,W-=7}if(A.have+ce>A.nlen+A.ndist){M.msg="invalid bit length repeat",A.mode=30;break}for(;ce--;)A.lens[A.have++]=P}}if(A.mode===30)break;if(A.lens[256]===0){M.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,de={bits:A.lenbits},pe=u(c,A.lens,0,A.nlen,A.lencode,0,A.work,de),A.lenbits=de.bits,pe){M.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,de={bits:A.distbits},pe=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,de),A.distbits=de.bits,pe){M.msg="invalid distances set",A.mode=30;break}if(A.mode=20,re===6)break e;case 20:A.mode=21;case 21:if(6<=L&&258<=se){M.next_out=ue,M.avail_out=se,M.next_in=ae,M.avail_in=L,A.hold=V,A.bits=W,l(M,ye),ue=M.next_out,ve=M.output,se=M.avail_out,ae=M.next_in,Y=M.input,L=M.avail_in,V=A.hold,W=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;ge=(N=A.lencode[V&(1<<A.lenbits)-1])>>>16&255,Je=65535&N,!((De=N>>>24)<=W);){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(ge&&!(240&ge)){for(tt=De,Ke=ge,Pt=Je;ge=(N=A.lencode[Pt+((V&(1<<tt+Ke)-1)>>tt)])>>>16&255,Je=65535&N,!(tt+(De=N>>>24)<=W);){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}V>>>=tt,W-=tt,A.back+=tt}if(V>>>=De,W-=De,A.back+=De,A.length=Je,ge===0){A.mode=26;break}if(32&ge){A.back=-1,A.mode=12;break}if(64&ge){M.msg="invalid literal/length code",A.mode=30;break}A.extra=15&ge,A.mode=22;case 22:if(A.extra){for(F=A.extra;W<F;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}A.length+=V&(1<<A.extra)-1,V>>>=A.extra,W-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;ge=(N=A.distcode[V&(1<<A.distbits)-1])>>>16&255,Je=65535&N,!((De=N>>>24)<=W);){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(!(240&ge)){for(tt=De,Ke=ge,Pt=Je;ge=(N=A.distcode[Pt+((V&(1<<tt+Ke)-1)>>tt)])>>>16&255,Je=65535&N,!(tt+(De=N>>>24)<=W);){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}V>>>=tt,W-=tt,A.back+=tt}if(V>>>=De,W-=De,A.back+=De,64&ge){M.msg="invalid distance code",A.mode=30;break}A.offset=Je,A.extra=15&ge,A.mode=24;case 24:if(A.extra){for(F=A.extra;W<F;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}A.offset+=V&(1<<A.extra)-1,V>>>=A.extra,W-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){M.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(se===0)break e;if(ce=ye-se,A.offset>ce){if((ce=A.offset-ce)>A.whave&&A.sane){M.msg="invalid distance too far back",A.mode=30;break}Re=ce>A.wnext?(ce-=A.wnext,A.wsize-ce):A.wnext-ce,ce>A.length&&(ce=A.length),Ue=A.window}else Ue=ve,Re=ue-A.offset,ce=A.length;for(se<ce&&(ce=se),se-=ce,A.length-=ce;ve[ue++]=Ue[Re++],--ce;);A.length===0&&(A.mode=21);break;case 26:if(se===0)break e;ve[ue++]=A.length,se--,A.mode=21;break;case 27:if(A.wrap){for(;W<32;){if(L===0)break e;L--,V|=Y[ae++]<<W,W+=8}if(ye-=se,M.total_out+=ye,A.total+=ye,ye&&(M.adler=A.check=A.flags?a(A.check,ve,ye,ue-ye):o(A.check,ve,ye,ue-ye)),ye=se,(A.flags?V:g(V))!==A.check){M.msg="incorrect data check",A.mode=30;break}W=V=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;W<32;){if(L===0)break e;L--,V+=Y[ae++]<<W,W+=8}if(V!==(4294967295&A.total)){M.msg="incorrect length check",A.mode=30;break}W=V=0}A.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return m}return M.next_out=ue,M.avail_out=se,M.next_in=ae,M.avail_in=L,A.hold=V,A.bits=W,(A.wsize||ye!==M.avail_out&&A.mode<30&&(A.mode<27||re!==4))&&me(M,M.output,M.next_out,ye-M.avail_out)?(A.mode=31,-4):(he-=M.avail_in,ye-=M.avail_out,M.total_in+=he,M.total_out+=ye,A.total+=ye,A.wrap&&ye&&(M.adler=A.check=A.flags?a(A.check,ve,ye,M.next_out-ye):o(A.check,ve,ye,M.next_out-ye)),M.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(he==0&&ye===0||re===4)&&pe===p&&(pe=-5),pe)},s.inflateEnd=function(M){if(!M||!M.state)return m;var re=M.state;return re.window&&(re.window=null),M.state=null,p},s.inflateGetHeader=function(M,re){var A;return M&&M.state&&2&(A=M.state).wrap?((A.head=re).done=!1,p):m},s.inflateSetDictionary=function(M,re){var A,Y=re.length;return M&&M.state?(A=M.state).wrap!==0&&A.mode!==11?m:A.mode===11&&o(1,re,Y,0)!==A.check?-3:me(M,re,Y,Y)?(A.mode=31,-4):(A.havedict=1,p):m},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,p,m,w,v,x,g){var y,_,T,j,R,I,$,U,K,me=g.bits,M=0,re=0,A=0,Y=0,ve=0,ae=0,ue=0,L=0,se=0,V=0,W=null,he=0,ye=new i.Buf16(16),ce=new i.Buf16(16),Re=null,Ue=0;for(M=0;M<=15;M++)ye[M]=0;for(re=0;re<m;re++)ye[f[p+re]]++;for(ve=me,Y=15;1<=Y&&ye[Y]===0;Y--);if(Y<ve&&(ve=Y),Y===0)return w[v++]=20971520,w[v++]=20971520,g.bits=1,0;for(A=1;A<Y&&ye[A]===0;A++);for(ve<A&&(ve=A),M=L=1;M<=15;M++)if(L<<=1,(L-=ye[M])<0)return-1;if(0<L&&(c===0||Y!==1))return-1;for(ce[1]=0,M=1;M<15;M++)ce[M+1]=ce[M]+ye[M];for(re=0;re<m;re++)f[p+re]!==0&&(x[ce[f[p+re]]++]=re);if(I=c===0?(W=Re=x,19):c===1?(W=o,he-=257,Re=a,Ue-=257,256):(W=l,Re=u,-1),M=A,R=v,ue=re=V=0,T=-1,j=(se=1<<(ae=ve))-1,c===1&&852<se||c===2&&592<se)return 1;for(;;){for($=M-ue,K=x[re]<I?(U=0,x[re]):x[re]>I?(U=Re[Ue+x[re]],W[he+x[re]]):(U=96,0),y=1<<M-ue,A=_=1<<ae;w[R+(V>>ue)+(_-=y)]=$<<24|U<<16|K|0,_!==0;);for(y=1<<M-1;V&y;)y>>=1;if(y!==0?(V&=y-1,V+=y):V=0,re++,--ye[M]==0){if(M===Y)break;M=f[p+x[re]]}if(ve<M&&(V&j)!==T){for(ue===0&&(ue=ve),R+=A,L=1<<(ae=M-ue);ae+ue<Y&&!((L-=ye[ae+ue])<=0);)ae++,L<<=1;if(se+=1<<ae,c===1&&852<se||c===2&&592<se)return 1;w[T=V&j]=ve<<24|ae<<16|R-v|0}}return V!==0&&(w[R+V]=M-ue<<24|64<<16|0),g.bits=ve,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(N){for(var ee=N.length;0<=--ee;)N[ee]=0}var u=0,c=29,f=256,p=f+1+c,m=30,w=19,v=2*p+1,x=15,g=16,y=7,_=256,T=16,j=17,R=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=new Array(2*(p+2));l(me);var M=new Array(2*m);l(M);var re=new Array(512);l(re);var A=new Array(256);l(A);var Y=new Array(c);l(Y);var ve,ae,ue,L=new Array(m);function se(N,ee,we,be,oe){this.static_tree=N,this.extra_bits=ee,this.extra_base=we,this.elems=be,this.max_length=oe,this.has_stree=N&&N.length}function V(N,ee){this.dyn_tree=N,this.max_code=0,this.stat_desc=ee}function W(N){return N<256?re[N]:re[256+(N>>>7)]}function he(N,ee){N.pending_buf[N.pending++]=255&ee,N.pending_buf[N.pending++]=ee>>>8&255}function ye(N,ee,we){N.bi_valid>g-we?(N.bi_buf|=ee<<N.bi_valid&65535,he(N,N.bi_buf),N.bi_buf=ee>>g-N.bi_valid,N.bi_valid+=we-g):(N.bi_buf|=ee<<N.bi_valid&65535,N.bi_valid+=we)}function ce(N,ee,we){ye(N,we[2*ee],we[2*ee+1])}function Re(N,ee){for(var we=0;we|=1&N,N>>>=1,we<<=1,0<--ee;);return we>>>1}function Ue(N,ee,we){var be,oe,_e=new Array(x+1),Ne=0;for(be=1;be<=x;be++)_e[be]=Ne=Ne+we[be-1]<<1;for(oe=0;oe<=ee;oe++){var ke=N[2*oe+1];ke!==0&&(N[2*oe]=Re(_e[ke]++,ke))}}function De(N){var ee;for(ee=0;ee<p;ee++)N.dyn_ltree[2*ee]=0;for(ee=0;ee<m;ee++)N.dyn_dtree[2*ee]=0;for(ee=0;ee<w;ee++)N.bl_tree[2*ee]=0;N.dyn_ltree[2*_]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function ge(N){8<N.bi_valid?he(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function Je(N,ee,we,be){var oe=2*ee,_e=2*we;return N[oe]<N[_e]||N[oe]===N[_e]&&be[ee]<=be[we]}function tt(N,ee,we){for(var be=N.heap[we],oe=we<<1;oe<=N.heap_len&&(oe<N.heap_len&&Je(ee,N.heap[oe+1],N.heap[oe],N.depth)&&oe++,!Je(ee,be,N.heap[oe],N.depth));)N.heap[we]=N.heap[oe],we=oe,oe<<=1;N.heap[we]=be}function Ke(N,ee,we){var be,oe,_e,Ne,ke=0;if(N.last_lit!==0)for(;be=N.pending_buf[N.d_buf+2*ke]<<8|N.pending_buf[N.d_buf+2*ke+1],oe=N.pending_buf[N.l_buf+ke],ke++,be===0?ce(N,oe,ee):(ce(N,(_e=A[oe])+f+1,ee),(Ne=I[_e])!==0&&ye(N,oe-=Y[_e],Ne),ce(N,_e=W(--be),we),(Ne=$[_e])!==0&&ye(N,be-=L[_e],Ne)),ke<N.last_lit;);ce(N,_,ee)}function Pt(N,ee){var we,be,oe,_e=ee.dyn_tree,Ne=ee.stat_desc.static_tree,ke=ee.stat_desc.has_stree,Be=ee.stat_desc.elems,rt=-1;for(N.heap_len=0,N.heap_max=v,we=0;we<Be;we++)_e[2*we]!==0?(N.heap[++N.heap_len]=rt=we,N.depth[we]=0):_e[2*we+1]=0;for(;N.heap_len<2;)_e[2*(oe=N.heap[++N.heap_len]=rt<2?++rt:0)]=1,N.depth[oe]=0,N.opt_len--,ke&&(N.static_len-=Ne[2*oe+1]);for(ee.max_code=rt,we=N.heap_len>>1;1<=we;we--)tt(N,_e,we);for(oe=Be;we=N.heap[1],N.heap[1]=N.heap[N.heap_len--],tt(N,_e,1),be=N.heap[1],N.heap[--N.heap_max]=we,N.heap[--N.heap_max]=be,_e[2*oe]=_e[2*we]+_e[2*be],N.depth[oe]=(N.depth[we]>=N.depth[be]?N.depth[we]:N.depth[be])+1,_e[2*we+1]=_e[2*be+1]=oe,N.heap[1]=oe++,tt(N,_e,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(Ze,Rt){var qn,Ie,ze,Xe,sn,Ht,Le=Rt.dyn_tree,hr=Rt.max_code,Gn=Rt.stat_desc.static_tree,Es=Rt.stat_desc.has_stree,Te=Rt.stat_desc.extra_bits,Jr=Rt.stat_desc.extra_base,Rr=Rt.stat_desc.max_length,pr=0;for(Xe=0;Xe<=x;Xe++)Ze.bl_count[Xe]=0;for(Le[2*Ze.heap[Ze.heap_max]+1]=0,qn=Ze.heap_max+1;qn<v;qn++)Rr<(Xe=Le[2*Le[2*(Ie=Ze.heap[qn])+1]+1]+1)&&(Xe=Rr,pr++),Le[2*Ie+1]=Xe,hr<Ie||(Ze.bl_count[Xe]++,sn=0,Jr<=Ie&&(sn=Te[Ie-Jr]),Ht=Le[2*Ie],Ze.opt_len+=Ht*(Xe+sn),Es&&(Ze.static_len+=Ht*(Gn[2*Ie+1]+sn)));if(pr!==0){do{for(Xe=Rr-1;Ze.bl_count[Xe]===0;)Xe--;Ze.bl_count[Xe]--,Ze.bl_count[Xe+1]+=2,Ze.bl_count[Rr]--,pr-=2}while(0<pr);for(Xe=Rr;Xe!==0;Xe--)for(Ie=Ze.bl_count[Xe];Ie!==0;)hr<(ze=Ze.heap[--qn])||(Le[2*ze+1]!==Xe&&(Ze.opt_len+=(Xe-Le[2*ze+1])*Le[2*ze],Le[2*ze+1]=Xe),Ie--)}}(N,ee),Ue(_e,rt,N.bl_count)}function P(N,ee,we){var be,oe,_e=-1,Ne=ee[1],ke=0,Be=7,rt=4;for(Ne===0&&(Be=138,rt=3),ee[2*(we+1)+1]=65535,be=0;be<=we;be++)oe=Ne,Ne=ee[2*(be+1)+1],++ke<Be&&oe===Ne||(ke<rt?N.bl_tree[2*oe]+=ke:oe!==0?(oe!==_e&&N.bl_tree[2*oe]++,N.bl_tree[2*T]++):ke<=10?N.bl_tree[2*j]++:N.bl_tree[2*R]++,_e=oe,rt=(ke=0)===Ne?(Be=138,3):oe===Ne?(Be=6,3):(Be=7,4))}function pe(N,ee,we){var be,oe,_e=-1,Ne=ee[1],ke=0,Be=7,rt=4;for(Ne===0&&(Be=138,rt=3),be=0;be<=we;be++)if(oe=Ne,Ne=ee[2*(be+1)+1],!(++ke<Be&&oe===Ne)){if(ke<rt)for(;ce(N,oe,N.bl_tree),--ke!=0;);else oe!==0?(oe!==_e&&(ce(N,oe,N.bl_tree),ke--),ce(N,T,N.bl_tree),ye(N,ke-3,2)):ke<=10?(ce(N,j,N.bl_tree),ye(N,ke-3,3)):(ce(N,R,N.bl_tree),ye(N,ke-11,7));_e=oe,rt=(ke=0)===Ne?(Be=138,3):oe===Ne?(Be=6,3):(Be=7,4)}}l(L);var de=!1;function F(N,ee,we,be){ye(N,(u<<1)+(be?1:0),3),function(oe,_e,Ne,ke){ge(oe),he(oe,Ne),he(oe,~Ne),i.arraySet(oe.pending_buf,oe.window,_e,Ne,oe.pending),oe.pending+=Ne}(N,ee,we)}s._tr_init=function(N){de||(function(){var ee,we,be,oe,_e,Ne=new Array(x+1);for(oe=be=0;oe<c-1;oe++)for(Y[oe]=be,ee=0;ee<1<<I[oe];ee++)A[be++]=oe;for(A[be-1]=oe,oe=_e=0;oe<16;oe++)for(L[oe]=_e,ee=0;ee<1<<$[oe];ee++)re[_e++]=oe;for(_e>>=7;oe<m;oe++)for(L[oe]=_e<<7,ee=0;ee<1<<$[oe]-7;ee++)re[256+_e++]=oe;for(we=0;we<=x;we++)Ne[we]=0;for(ee=0;ee<=143;)me[2*ee+1]=8,ee++,Ne[8]++;for(;ee<=255;)me[2*ee+1]=9,ee++,Ne[9]++;for(;ee<=279;)me[2*ee+1]=7,ee++,Ne[7]++;for(;ee<=287;)me[2*ee+1]=8,ee++,Ne[8]++;for(Ue(me,p+1,Ne),ee=0;ee<m;ee++)M[2*ee+1]=5,M[2*ee]=Re(ee,5);ve=new se(me,I,f+1,p,x),ae=new se(M,$,0,m,x),ue=new se(new Array(0),U,0,w,y)}(),de=!0),N.l_desc=new V(N.dyn_ltree,ve),N.d_desc=new V(N.dyn_dtree,ae),N.bl_desc=new V(N.bl_tree,ue),N.bi_buf=0,N.bi_valid=0,De(N)},s._tr_stored_block=F,s._tr_flush_block=function(N,ee,we,be){var oe,_e,Ne=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(ke){var Be,rt=4093624447;for(Be=0;Be<=31;Be++,rt>>>=1)if(1&rt&&ke.dyn_ltree[2*Be]!==0)return o;if(ke.dyn_ltree[18]!==0||ke.dyn_ltree[20]!==0||ke.dyn_ltree[26]!==0)return a;for(Be=32;Be<f;Be++)if(ke.dyn_ltree[2*Be]!==0)return a;return o}(N)),Pt(N,N.l_desc),Pt(N,N.d_desc),Ne=function(ke){var Be;for(P(ke,ke.dyn_ltree,ke.l_desc.max_code),P(ke,ke.dyn_dtree,ke.d_desc.max_code),Pt(ke,ke.bl_desc),Be=w-1;3<=Be&&ke.bl_tree[2*K[Be]+1]===0;Be--);return ke.opt_len+=3*(Be+1)+5+5+4,Be}(N),oe=N.opt_len+3+7>>>3,(_e=N.static_len+3+7>>>3)<=oe&&(oe=_e)):oe=_e=we+5,we+4<=oe&&ee!==-1?F(N,ee,we,be):N.strategy===4||_e===oe?(ye(N,2+(be?1:0),3),Ke(N,me,M)):(ye(N,4+(be?1:0),3),function(ke,Be,rt,Ze){var Rt;for(ye(ke,Be-257,5),ye(ke,rt-1,5),ye(ke,Ze-4,4),Rt=0;Rt<Ze;Rt++)ye(ke,ke.bl_tree[2*K[Rt]+1],3);pe(ke,ke.dyn_ltree,Be-1),pe(ke,ke.dyn_dtree,rt-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,Ne+1),Ke(N,N.dyn_ltree,N.dyn_dtree)),De(N),be&&ge(N)},s._tr_tally=function(N,ee,we){return N.pending_buf[N.d_buf+2*N.last_lit]=ee>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&ee,N.pending_buf[N.l_buf+N.last_lit]=255&we,N.last_lit++,ee===0?N.dyn_ltree[2*we]++:(N.matches++,ee--,N.dyn_ltree[2*(A[we]+f+1)]++,N.dyn_dtree[2*W(ee)]++),N.last_lit===N.lit_bufsize-1},s._tr_align=function(N){ye(N,2,3),ce(N,_,me),function(ee){ee.bi_valid===16?(he(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,u,c,f,p=1,m={},w=!1,v=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,l={}.toString.call(o.process)==="[object process]"?function(T){process.nextTick(function(){y(T)})}:function(){if(o.postMessage&&!o.importScripts){var T=!0,j=o.onmessage;return o.onmessage=function(){T=!1},o.postMessage("","*"),o.onmessage=j,T}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(T){o.postMessage(f+T,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(T){y(T.data)},function(T){c.port2.postMessage(T)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(T){var j=v.createElement("script");j.onreadystatechange=function(){y(T),j.onreadystatechange=null,u.removeChild(j),j=null},u.appendChild(j)}):function(T){setTimeout(y,0,T)},x.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var j=new Array(arguments.length-1),R=0;R<j.length;R++)j[R]=arguments[R+1];var I={callback:T,args:j};return m[p]=I,l(p),p++},x.clearImmediate=g}function g(T){delete m[T]}function y(T){if(w)setTimeout(y,0,T);else{var j=m[T];if(j){w=!0;try{(function(R){var I=R.callback,$=R.args;switch($.length){case 0:I();break;case 1:I($[0]);break;case 2:I($[0],$[1]);break;case 3:I($[0],$[1],$[2]);break;default:I.apply(a,$)}})(j)}finally{g(T),w=!1}}}}function _(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(f)===0&&y(+T.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xC);var j4=xC.exports;const Nx=nf(j4),R4=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState([]),s=E.useRef(null),i=E.useCallback(async u=>{if(!u||u.length===0){r(f=>[...f,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let f=0;f<u.length;f++){const p=u[f];if(p.type==="application/zip"||p.name.endsWith(".zip"))try{const m=await Nx.loadAsync(p),w=Object.values(m.files);for(const v of w)if(!v.dir&&v.name.endsWith(".json"))try{const x=await v.async("string"),g=JSON.parse(x),y=v.name.split("/").pop()||"unknown.json",_=y.replace(/\.json$/,"");localStorage.setItem(_,JSON.stringify(g)),c.push({success:!0,message:`Successfully extracted and stored "${y}" with key "${_}" from ZIP.`})}catch(x){const g=x instanceof Error?x.message:"Unknown error";c.push({success:!1,message:`Error processing file "${v.name}" from ZIP: ${g}`})}else v.dir||c.push({success:!1,message:`Skipped non-JSON file "${v.name}" from ZIP.`})}catch(m){const w=m instanceof Error?m.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${p.name}": ${w}`})}else if(p.type==="application/json"||p.name.endsWith(".json"))try{const m=new FileReader,w=await new Promise((y,_)=>{m.onload=()=>y(m.result),m.onerror=_,m.readAsText(p)}),v=JSON.parse(w),g=p.name.replace(/\.json$/,"");localStorage.setItem(g,JSON.stringify(v)),c.push({success:!0,message:`Successfully stored "${p.name}" with key "${g}".`})}catch(m){const w=m instanceof Error?m.message:"Unknown error";c.push({success:!1,message:`Error processing file "${p.name}": ${w}`})}else c.push({success:!1,message:`File "${p.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(f=>[...f,...c]),t(!1)}},[]),o=u=>{i(u.target.files),s.current&&(s.current.value="")},a=()=>{r([])},l=E.useCallback(async()=>{t(!0);try{debugger;const u=new Nx;let c=!1,f=null;const p=localStorage.getItem("sankeertan_categories_data");if(p)try{f=JSON.parse(p),u.file("sankeertan_categories_data.json",p),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),f=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const m={};for(let g=0;g<localStorage.length;g++){debugger;const y=localStorage.key(g);if(console.log(y),y!=="sb-"+R1+"-auth-token"&&y&&y!=="sankeertan_categories_data"){const _=localStorage.getItem(y);if(_)try{JSON.parse(_);let T=u;if(f&&Array.isArray(f.data))for(const j of f.data)for(const R of j.books){const I=R.bookId,$=`sankeertan_song_details-${I.toLowerCase().replace(/ /g,"-")}`,U=`sankeertan_song_indices-${I.toLowerCase().replace(/ /g,"-")}`;if(y.startsWith($)||y.startsWith(U)){if(!m[I]){const K=u.folder(I);K?m[I]=K:m[I]=u}T=m[I]||u;break}}T.file(`${y}.json`,_),c=!0}catch{console.warn(`Skipping key "${y}" as value is not valid JSON`)}}}if(!c){r(g=>[...g,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const w=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),v=URL.createObjectURL(w),x=document.createElement("a");x.href=v,x.download="sankeertan_localStorage_backup.zip",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),r(g=>[...g,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(f=>[...f,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return k.jsxs("div",{className:"p-4",children:[k.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:s}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),k.jsx("div",{className:"mb-4",children:k.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&k.jsx("div",{className:"mb-4 flex items-center gap-2",children:k.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&k.jsxs("div",{className:"mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>k.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?k.jsx("span",{style:{color:"green"},children:""}):k.jsx("span",{style:{color:"red"},children:""}),k.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),k.jsx("span",{children:u.message})]},c)),k.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),k.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),k.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},Lr=({children:e,session:t})=>{const n=dr();return t?k.jsx(k.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),k.jsx(C1,{to:"/login",replace:!0}))};function I4(){const{session:e}=bo(),{categories:t,isLoading:n}=Uy(),r=(t==null?void 0:t.flatMap(s=>s.books))||[];return n?k.jsx("div",{children:"Checking authentication..."}):k.jsx(_S,{children:k.jsx(vD,{books:r,children:k.jsxs(VA,{children:[k.jsx(dn,{path:"/login",element:k.jsx(cI,{})}),k.jsx(dn,{path:"/signup",element:k.jsx(dI,{})}),k.jsx(dn,{path:"/change-password",element:k.jsx(fI,{})}),k.jsx(dn,{path:"/auth/callback",element:k.jsx(pI,{})}),k.jsx(dn,{path:"/settings",element:k.jsx(Lr,{session:e,children:k.jsx(d4,{})})}),k.jsx(dn,{path:"/categories",element:k.jsx(Lr,{session:e,children:k.jsx(gD,{})})}),k.jsx(dn,{path:"/books/:categoryId",element:k.jsx(Lr,{session:e,children:k.jsx(AD,{})})}),k.jsx(dn,{path:"/book/:categoryId/:bookId",element:k.jsx(Lr,{session:e,children:k.jsx(KD,{})})}),k.jsx(dn,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(Lr,{session:e,children:k.jsx(g4,{})})}),k.jsx(dn,{path:"/sankeertan/:broadcastId",element:k.jsx(Lr,{session:e,children:k.jsx(w4,{broadcastId:1})})}),k.jsx(dn,{path:"/localstoragesync",element:k.jsx(Lr,{session:e,children:k.jsx(R4,{})})}),k.jsx(dn,{path:"/bulkDownloadTester",element:k.jsx(Lr,{session:e,children:k.jsx(T4,{})})}),k.jsx(dn,{path:"/offlineContentManager",element:k.jsx(Lr,{session:e,children:k.jsx(O4,{})})}),k.jsx(dn,{path:"/search",element:k.jsx(Lr,{session:e,children:k.jsx(E4,{})})}),k.jsx(dn,{path:"/",element:e?k.jsx(C1,{to:"/categories",replace:!0}):k.jsx("div",{children:"Welcome!"})})]})})})}const D4=E.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),N4=({children:e})=>{const[t,n]=E.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,s]=E.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[i,o]=E.useState(null),[a,l]=E.useState(!1),[u,c]=E.useState(null),{bookId:f}=Au(),p=E.useCallback(async w=>{l(!0),c(null),o(null),await new Promise(x=>setTimeout(x,500));const v=t.find(x=>x.id===w);o(v||null),l(!1)},[t,l,c,o]);E.useEffect(()=>{f&&p(f)},[f,p]);const m={books:t,categories:r,currentBook:i,loadBook:p,loading:a,error:u};return k.jsx(D4.Provider,{value:m,children:e})},L4=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var u;const[r,s]=E.useState(null),i=jr();E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:c}})=>{s(c)}),Ut.auth.onAuthStateChange((c,f)=>{s(f)})},[]);const o=async()=>{const{error:c}=await Ut.auth.signOut();c?(console.error("Error signing out:",c),alert("Error signing out. Please try again.")):i("/login")},{isOfflineMode:a,setIsOfflineMode:l}=zy();return k.jsx("div",{className:"relative inline-block text-left",children:r?k.jsxs("div",{children:[k.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((u=r.user)==null?void 0:u.email)||"User",k.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&k.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:k.jsxs("div",{className:"py-1",children:[k.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:a,onChange:c=>l(c.target.checked)}),k.jsx("span",{children:"Offline Mode"})]})}),k.jsx(rr,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),k.jsx(rr,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),k.jsx(rr,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),k.jsx(rr,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),k.jsx(rr,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),k.jsx("button",{onClick:o,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):k.jsx(rr,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var $4=Object.defineProperty,M4=(e,t,n)=>t in e?$4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bp=(e,t,n)=>(M4(e,typeof t!="symbol"?t+"":t,n),n);let F4=class{constructor(){bp(this,"current",this.detect()),bp(this,"handoffState","pending"),bp(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Qr=new F4;function Vu(e){var t;return Qr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function wg(e){var t,n;return Qr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function _C(e){var t,n;return(n=(t=wg(e))==null?void 0:t.activeElement)!=null?n:null}function B4(e){return _C(e)===e}function Lf(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ss(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Lf(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Ss();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function $f(){let[e]=E.useState(Ss);return E.useEffect(()=>()=>e.dispose(),[e]),e}let Nn=(e,t)=>{Qr.isServer?E.useEffect(e,t):E.useLayoutEffect(e,t)};function xo(e){let t=E.useRef(e);return Nn(()=>{t.current=e},[e]),t}let ht=function(e){let t=xo(e);return He.useCallback((...n)=>t.current(...n),[t])};function Ku(e){return E.useMemo(()=>e,Object.values(e))}let U4=E.createContext(void 0);function z4(){return E.useContext(U4)}function bg(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function _s(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_s),r}var Xd=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Xd||{}),ei=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ei||{});function fr(){let e=K4();return E.useCallback(t=>V4({mergeRefs:e,...t}),[e])}function V4({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??W4;let l=kC(t,e);if(i)return Wc(l,n,r,o,a);let u=s??0;if(u&2){let{static:c=!1,...f}=l;if(c)return Wc(f,n,r,o,a)}if(u&1){let{unmount:c=!0,...f}=l;return _s(c?0:1,{0(){return null},1(){return Wc({...f,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return Wc(l,n,r,o,a)}function Wc(e,t={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=xp(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[w,v]of Object.entries(t))typeof v=="boolean"&&(p=!0),v===!0&&m.push(w.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let w of m)f[`data-${w}`]=""}}if(Ul(i)&&(Object.keys(Li(l)).length>0||Object.keys(Li(f)).length>0))if(!E.isValidElement(c)||Array.isArray(c)&&c.length>1||q4(c)){if(Object.keys(Li(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Li(l)).concat(Object.keys(Li(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=c.props,m=p==null?void 0:p.className,w=typeof m=="function"?(...g)=>bg(m(...g),l.className):bg(m,l.className),v=w?{className:w}:{},x=kC(c.props,Li(xp(l,["ref"])));for(let g in f)g in x&&delete f[g];return E.cloneElement(c,Object.assign({},x,f,u,{ref:s(H4(c),u.ref)},v))}return E.createElement(i,Object.assign({},xp(l,["ref"]),!Ul(i)&&u,!Ul(i)&&f),c)}function K4(){let e=E.useRef([]),t=E.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function W4(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function kC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return t}function Ln(e){var t;return Object.assign(E.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Li(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function xp(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function H4(e){return He.version.split(".")[0]>="19"?e.props.ref:e.ref}function Ul(e){return e===E.Fragment||e===Symbol.for("react.fragment")}function q4(e){return Ul(e.type)}let G4="span";var ef=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ef||{});function Q4(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return fr()({ourProps:i,theirProps:s,slot:{},defaultTag:G4,name:"Hidden"})}let xg=Ln(Q4);function Y4(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function di(e){return Y4(e)&&"tagName"in e}function po(e){return di(e)&&"accessKey"in e}function ti(e){return di(e)&&"tabIndex"in e}function J4(e){return di(e)&&"style"in e}function Z4(e){return po(e)&&e.nodeName==="IFRAME"}function X4(e){return po(e)&&e.nodeName==="INPUT"}let SC=Symbol();function eB(e,t=!0){return Object.assign(e,{[SC]:t})}function Yr(...e){let t=E.useRef(e);E.useEffect(()=>{t.current=e},[e]);let n=ht(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[SC]))?void 0:n}let Cv=E.createContext(null);Cv.displayName="DescriptionContext";function EC(){let e=E.useContext(Cv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,EC),t}return e}function tB(){let[e,t]=E.useState([]);return[e.length>0?e.join(" "):void 0,E.useMemo(()=>function(n){let r=ht(i=>(t(o=>[...o,i]),()=>t(o=>{let a=o.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),s=E.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return He.createElement(Cv.Provider,{value:s},n.children)},[t])]}let nB="p";function rB(e,t){let n=E.useId(),r=z4(),{id:s=`headlessui-description-${n}`,...i}=e,o=EC(),a=Yr(t);Nn(()=>o.register(s),[s,o.register]);let l=Ku({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:s};return fr()({ourProps:u,theirProps:i,slot:l,defaultTag:nB,name:o.name||"Description"})}let sB=Ln(rB),iB=Object.assign(sB,{});var CC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(CC||{});let oB=E.createContext(()=>{});function aB({value:e,children:t}){return He.createElement(oB.Provider,{value:e},t)}let TC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var lB=Object.defineProperty,uB=(e,t,n)=>t in e?lB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cB=(e,t,n)=>(uB(e,t+"",n),n),PC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Jn=(e,t,n)=>(PC(e,t,"read from private field"),n?n.call(e):t.get(e)),_p=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Lx=(e,t,n,r)=>(PC(e,t,"write to private field"),t.set(e,n),n),$r,xl,_l;let dB=class{constructor(t){_p(this,$r,{}),_p(this,xl,new TC(()=>new Set)),_p(this,_l,new Set),cB(this,"disposables",Ss()),Lx(this,$r,t),Qr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Jn(this,$r)}subscribe(t,n){if(Qr.isServer)return()=>{};let r={selector:t,callback:n,current:t(Jn(this,$r))};return Jn(this,_l).add(r),this.disposables.add(()=>{Jn(this,_l).delete(r)})}on(t,n){return Qr.isServer?()=>{}:(Jn(this,xl).get(t).add(n),this.disposables.add(()=>{Jn(this,xl).get(t).delete(n)}))}send(t){let n=this.reduce(Jn(this,$r),t);if(n!==Jn(this,$r)){Lx(this,$r,n);for(let r of Jn(this,_l)){let s=r.selector(Jn(this,$r));AC(r.current,s)||(r.current=s,r.callback(s))}for(let r of Jn(this,xl).get(t.type))r(Jn(this,$r),t)}}};$r=new WeakMap,xl=new WeakMap,_l=new WeakMap;function AC(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:kp(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:kp(e.entries(),t.entries()):$x(e)&&$x(t)?kp(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function kp(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function $x(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var fB=Object.defineProperty,hB=(e,t,n)=>t in e?fB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mx=(e,t,n)=>(hB(e,typeof t!="symbol"?t+"":t,n),n),pB=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(pB||{});let mB={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},gB=class OC extends dB{constructor(){super(...arguments),Mx(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Mx(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new OC({stack:[]})}reduce(t,n){return _s(n.type,mB,t,n)}};const jC=new TC(()=>gB.new());var RC={exports:{}},IC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=E;function yB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vB=typeof Object.is=="function"?Object.is:yB,wB=Wu.useSyncExternalStore,bB=Wu.useRef,xB=Wu.useEffect,_B=Wu.useMemo,kB=Wu.useDebugValue;IC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=bB(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=_B(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),s!==void 0&&o.hasValue){var w=o.value;if(s(w,m))return f=w}return f=m}if(w=f,vB(c,m))return w;var v=r(m);return s!==void 0&&s(w,v)?(c=m,w):(c=m,f=v)}var u=!1,c,f,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,s]);var a=wB(e,i[0],i[1]);return xB(function(){o.hasValue=!0,o.value=a},[a]),kB(a),a};RC.exports=IC;var SB=RC.exports;function DC(e,t,n=AC){return SB.useSyncExternalStoreWithSelector(ht(r=>e.subscribe(EB,r)),ht(()=>e.state),ht(()=>e.state),ht(t),n)}function EB(e){return e}function Hu(e,t){let n=E.useId(),r=jC.get(t),[s,i]=DC(r,E.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Nn(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let _g=new Map,zl=new Map;function Fx(e){var t;let n=(t=zl.get(e))!=null?t:0;return zl.set(e,n+1),n!==0?()=>Bx(e):(_g.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Bx(e))}function Bx(e){var t;let n=(t=zl.get(e))!=null?t:1;if(n===1?zl.delete(e):zl.set(e,n-1),n!==1)return;let r=_g.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,_g.delete(e))}function CB(e,{allowed:t,disallowed:n}={}){let r=Hu(e,"inert-others");Nn(()=>{var s,i;if(!r)return;let o=Ss();for(let l of(s=n==null?void 0:n())!=null?s:[])l&&o.add(Fx(l));let a=(i=t==null?void 0:t())!=null?i:[];for(let l of a){if(!l)continue;let u=Vu(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let f of c.children)a.some(p=>f.contains(p))||o.add(Fx(f));c=c.parentElement}}return o.dispose},[r,t,n])}function TB(e,t,n){let r=xo(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});E.useEffect(()=>{if(!e)return;let s=t===null?null:po(t)?t:t.current;if(!s)return;let i=Ss();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let tf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),PB=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ls=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ls||{}),kg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(kg||{}),AB=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(AB||{});function OB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(tf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function jB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(PB)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var NC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(NC||{});function RB(e,t=0){var n;return e===((n=Vu(e))==null?void 0:n.body)?!1:_s(t,{0(){return e.matches(tf)},1(){let r=e;for(;r!==null;){if(r.matches(tf))return!0;r=r.parentElement}return!1}})}var IB=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(IB||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function hs(e){e==null||e.focus({preventScroll:!0})}let DB=["textarea","input"].join(",");function NB(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,DB))!=null?n:!1}function LB(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Vl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?wg(e[0]):document:wg(e),o=Array.isArray(e)?n?LB(e):e:t&64?jB(e):OB(e);s.length>0&&o.length>1&&(o=o.filter(m=>!s.some(w=>w!=null&&"current"in w?(w==null?void 0:w.current)===m:w===m))),r=r??(i==null?void 0:i.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,p;do{if(c>=f||c+f<=0)return 0;let m=l+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=o[m],p==null||p.focus(u),c+=a}while(p!==_C(p));return t&6&&NB(p)&&p.select(),2}function LC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function $B(){return/Android/gi.test(window.navigator.userAgent)}function Ux(){return LC()||$B()}function Hc(e,t,n,r){let s=xo(n);E.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function $C(e,t,n,r){let s=xo(n);E.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const zx=30;function MB(e,t,n){let r=xo(n),s=E.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(t);for(let f of c)if(f!==null&&(f.contains(u)||a.composed&&a.composedPath().includes(f)))return;return!RB(u,NC.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),i=E.useRef(null);Hc(e,"pointerdown",a=>{var l,u;Ux()||(i.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),Hc(e,"pointerup",a=>{if(Ux()||!i.current)return;let l=i.current;return i.current=null,s(a,()=>l)},!0);let o=E.useRef({x:0,y:0});Hc(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),Hc(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=zx||Math.abs(l.y-o.current.y)>=zx))return s(a,()=>ti(a.target)?a.target:null)},!0),$C(e,"blur",a=>s(a,()=>Z4(window.document.activeElement)?window.document.activeElement:null),!0)}function Tv(...e){return E.useMemo(()=>Vu(...e),[...e])}function MC(e,t,n,r){let s=xo(n);E.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function FB(e){return E.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function BB(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function UB(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function zB(){return LC()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Ss();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(ti(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);ti(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),ti(l.target)&&J4(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(ti(a.target)){if(X4(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function VB(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Vx(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let qi=BB(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ss(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Vx(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Vx(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[zB(),UB(),VB()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});qi.subscribe(()=>{let e=qi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&qi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&qi.dispatch("TEARDOWN",n)}});function KB(e,t,n=()=>({containers:[]})){let r=FB(qi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return Nn(()=>{if(!(!t||!e))return qi.dispatch("PUSH",t,n),()=>qi.dispatch("POP",t,n)},[e,t]),i}function WB(e,t,n=()=>[document.body]){let r=Hu(e,"scroll-lock");KB(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function HB(e=0){let[t,n]=E.useState(e),r=E.useCallback(l=>n(l),[]),s=E.useCallback(l=>n(u=>u|l),[]),i=E.useCallback(l=>(t&l)===l,[t]),o=E.useCallback(l=>n(u=>u&~l),[]),a=E.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var qB={},Kx,Wx;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Kx=process==null?void 0:qB)==null?void 0:Kx.NODE_ENV)==="test"&&typeof((Wx=Element==null?void 0:Element.prototype)==null?void 0:Wx.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var GB=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(GB||{});function QB(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function YB(e,t,n,r){let[s,i]=E.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=HB(e&&s?3:0),u=E.useRef(!1),c=E.useRef(!1),f=$f();return Nn(()=>{var p;if(e){if(n&&i(!0),!t){n&&a(3);return}return(p=r==null?void 0:r.start)==null||p.call(r,n),JB(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;c.current&&e5(t)||(u.current=!1,l(7),n||i(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function JB(e,{prepare:t,run:n,done:r,inFlight:s}){let i=Ss();return XB(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(ZB(e,r))})}),i.dispose}function ZB(e,t){var n,r;let s=Ss();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||t()}),s.dispose)}function XB(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function e5(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Pv(e,t){let n=E.useRef([]),r=ht(e);E.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let a=r(t,s);return n.current=t,a}},[r,...t])}let Mf=E.createContext(null);Mf.displayName="OpenClosedContext";var Er=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Er||{});function Ff(){return E.useContext(Mf)}function t5({value:e,children:t}){return He.createElement(Mf.Provider,{value:e},t)}function n5({children:e}){return He.createElement(Mf.Provider,{value:null},e)}function r5(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vs=[];r5(()=>{function e(t){if(!ti(t.target)||t.target===document.body||Vs[0]===t.target)return;let n=t.target;n=n.closest(tf),Vs.unshift(n??t.target),Vs=Vs.filter(r=>r!=null&&r.isConnected),Vs.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function FC(e){let t=ht(e),n=E.useRef(!1);E.useEffect(()=>(n.current=!1,()=>{n.current=!0,Lf(()=>{n.current&&t()})}),[t])}let BC=E.createContext(!1);function s5(){return E.useContext(BC)}function Hx(e){return He.createElement(BC.Provider,{value:e.force},e.children)}function i5(e){let t=s5(),n=E.useContext(zC),[r,s]=E.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Qr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return E.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),E.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let UC=E.Fragment,o5=Ln(function(e,t){let{ownerDocument:n=null,...r}=e,s=E.useRef(null),i=Yr(eB(p=>{s.current=p}),t),o=Tv(s.current),a=n??o,l=i5(a),u=E.useContext(Sg),c=$f(),f=fr();return FC(()=>{var p;l&&l.childNodes.length<=0&&((p=l.parentElement)==null||p.removeChild(l))}),l?xy.createPortal(He.createElement("div",{"data-headlessui-portal":"",ref:p=>{c.dispose(),u&&p&&c.add(u.register(p))}},f({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:UC,name:"Portal"})),l):null});function a5(e,t){let n=Yr(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=fr();return r?He.createElement(o5,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:UC,name:"Portal"})}let l5=E.Fragment,zC=E.createContext(null);function u5(e,t){let{target:n,...r}=e,s={ref:Yr(t)},i=fr();return He.createElement(zC.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:l5,name:"Popover.Group"}))}let Sg=E.createContext(null);function c5(){let e=E.useContext(Sg),t=E.useRef([]),n=ht(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ht(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=E.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,E.useMemo(()=>function({children:i}){return He.createElement(Sg.Provider,{value:s},i)},[s])]}let d5=Ln(a5),VC=Ln(u5),f5=Object.assign(d5,{Group:VC});function h5(e,t=typeof document<"u"?document.defaultView:null,n){let r=Hu(e,"escape");MC(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===CC.Escape&&n(s))})}function p5(){var e;let[t]=E.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=E.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Nn(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function m5({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ht(()=>{var s,i;let o=Vu(n),a=[];for(let l of e)l!==null&&(di(l)?a.push(l):"current"in l&&di(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(s=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&di(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:ht(s=>r().some(i=>i.contains(s)))}}let KC=E.createContext(null);function qx({children:e,node:t}){let[n,r]=E.useState(null),s=WC(t??n);return He.createElement(KC.Provider,{value:s},e,s===null&&He.createElement(xg,{features:ef.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=Vu(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&di(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function WC(e=null){var t;return(t=E.useContext(KC))!=null?t:e}function g5(){let e=typeof document>"u";return"useSyncExternalStore"in p0?(t=>t.useSyncExternalStore)(p0)(()=>()=>{},()=>!1,()=>!e):!1}function Bf(){let e=g5(),[t,n]=E.useState(Qr.isHandoffComplete);return t&&Qr.isHandoffComplete===!1&&n(!1),E.useEffect(()=>{t!==!0&&n(!0)},[t]),E.useEffect(()=>Qr.handoff(),[]),e?!1:t}function Av(){let e=E.useRef(!1);return Nn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var kl=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(kl||{});function y5(){let e=E.useRef(0);return $C(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function HC(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)di(n.current)&&t.add(n.current);return t}let v5="div";var Fi=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Fi||{});function w5(e,t){let n=E.useRef(null),r=Yr(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...l}=e;Bf()||(a=0);let u=Tv(n.current);k5(a,{ownerDocument:u});let c=S5(a,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:i});E5(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let f=y5(),p=ht(y=>{if(!po(n.current))return;let _=n.current;(T=>T())(()=>{_s(f.current,{[kl.Forwards]:()=>{Vl(_,ls.First,{skipElements:[y.relatedTarget,i]})},[kl.Backwards]:()=>{Vl(_,ls.Last,{skipElements:[y.relatedTarget,i]})}})})}),m=Hu(!!(a&2),"focus-trap#tab-lock"),w=$f(),v=E.useRef(!1),x={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,w.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){if(!(a&4))return;let _=HC(o);po(n.current)&&_.add(n.current);let T=y.relatedTarget;ti(T)&&T.dataset.headlessuiFocusGuard!=="true"&&(qC(_,T)||(v.current?Vl(n.current,_s(f.current,{[kl.Forwards]:()=>ls.Next,[kl.Backwards]:()=>ls.Previous})|ls.WrapAround,{relativeTo:y.target}):ti(y.target)&&hs(y.target)))}},g=fr();return He.createElement(He.Fragment,null,m&&He.createElement(xg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:ef.Focusable}),g({ourProps:x,theirProps:l,defaultTag:v5,name:"FocusTrap"}),m&&He.createElement(xg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:ef.Focusable}))}let b5=Ln(w5),x5=Object.assign(b5,{features:Fi});function _5(e=!0){let t=E.useRef(Vs.slice());return Pv(([n],[r])=>{r===!0&&n===!1&&Lf(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Vs.slice())},[e,Vs,t]),ht(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function k5(e,{ownerDocument:t}){let n=!!(e&8),r=_5(n);Pv(()=>{n||B4(t==null?void 0:t.body)&&hs(r())},[n]),FC(()=>{n&&hs(r())})}function S5(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=E.useRef(null),o=Hu(!!(e&1),"focus-trap#initial-focus"),a=Av();return Pv(()=>{if(e===0)return;if(!o){s!=null&&s.current&&hs(s.current);return}let l=n.current;l&&Lf(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){i.current=u;return}}else if(l.contains(u)){i.current=u;return}if(r!=null&&r.current)hs(r.current);else{if(e&16){if(Vl(l,ls.First|ls.AutoFocus)!==kg.Error)return}else if(Vl(l,ls.First)!==kg.Error)return;if(s!=null&&s.current&&(hs(s.current),(t==null?void 0:t.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[s,o,e]),i}function E5(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=Av(),o=!!(e&4);MC(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!i.current)return;let l=HC(r);po(n.current)&&l.add(n.current);let u=s.current;if(!u)return;let c=a.target;po(c)?qC(l,c)?(s.current=c,hs(c)):(a.preventDefault(),a.stopPropagation(),hs(u)):hs(s.current)},!0)}function qC(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function GC(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Ul((t=e.as)!=null?t:YC)||He.Children.count(e.children)===1}let Uf=E.createContext(null);Uf.displayName="TransitionContext";var C5=(e=>(e.Visible="visible",e.Hidden="hidden",e))(C5||{});function T5(){let e=E.useContext(Uf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function P5(){let e=E.useContext(zf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let zf=E.createContext(null);zf.displayName="NestingContext";function Vf(e){return"children"in e?Vf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function QC(e,t){let n=xo(e),r=E.useRef([]),s=Av(),i=$f(),o=ht((m,w=ei.Hidden)=>{let v=r.current.findIndex(({el:x})=>x===m);v!==-1&&(_s(w,{[ei.Unmount](){r.current.splice(v,1)},[ei.Hidden](){r.current[v].state="hidden"}}),i.microTask(()=>{var x;!Vf(r)&&s.current&&((x=n.current)==null||x.call(n))}))}),a=ht(m=>{let w=r.current.find(({el:v})=>v===m);return w?w.state!=="visible"&&(w.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,ei.Unmount)}),l=E.useRef([]),u=E.useRef(Promise.resolve()),c=E.useRef({enter:[],leave:[]}),f=ht((m,w,v)=>{l.current.splice(0),t&&(t.chains.current[w]=t.chains.current[w].filter(([x])=>x!==m)),t==null||t.chains.current[w].push([m,new Promise(x=>{l.current.push(x)})]),t==null||t.chains.current[w].push([m,new Promise(x=>{Promise.all(c.current[w].map(([g,y])=>y)).then(()=>x())})]),w==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(w)):v(w)}),p=ht((m,w,v)=>{Promise.all(c.current[w].splice(0).map(([x,g])=>g)).then(()=>{var x;(x=l.current.shift())==null||x()}).then(()=>v(w))});return E.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:p,wait:u,chains:c}),[a,o,r,f,p,c,u])}let YC=E.Fragment,JC=Xd.RenderStrategy;function A5(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:f,entered:p,leave:m,leaveFrom:w,leaveTo:v,...x}=e,[g,y]=E.useState(null),_=E.useRef(null),T=GC(e),j=Yr(...T?[_,t,y]:t===null?[]:[t]),R=(n=x.unmount)==null||n?ei.Unmount:ei.Hidden,{show:I,appear:$,initial:U}=T5(),[K,me]=E.useState(I?"visible":"hidden"),M=P5(),{register:re,unregister:A}=M;Nn(()=>re(_),[re,_]),Nn(()=>{if(R===ei.Hidden&&_.current){if(I&&K!=="visible"){me("visible");return}return _s(K,{hidden:()=>A(_),visible:()=>re(_)})}},[K,_,re,A,I,R]);let Y=Bf();Nn(()=>{if(T&&Y&&K==="visible"&&_.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[_,K,Y,T]);let ve=U&&!$,ae=$&&I&&U,ue=E.useRef(!1),L=QC(()=>{ue.current||(me("hidden"),A(_))},M),se=ht(Ue=>{ue.current=!0;let De=Ue?"enter":"leave";L.onStart(_,De,ge=>{ge==="enter"?i==null||i():ge==="leave"&&(a==null||a())})}),V=ht(Ue=>{let De=Ue?"enter":"leave";ue.current=!1,L.onStop(_,De,ge=>{ge==="enter"?o==null||o():ge==="leave"&&(l==null||l())}),De==="leave"&&!Vf(L)&&(me("hidden"),A(_))});E.useEffect(()=>{T&&s||(se(I),V(I))},[I,T,s]);let W=!(!s||!T||!Y||ve),[,he]=YB(W,g,I,{start:se,end:V}),ye=Li({ref:j,className:((r=bg(x.className,ae&&u,ae&&c,he.enter&&u,he.enter&&he.closed&&c,he.enter&&!he.closed&&f,he.leave&&m,he.leave&&!he.closed&&w,he.leave&&he.closed&&v,!he.transition&&I&&p))==null?void 0:r.trim())||void 0,...QB(he)}),ce=0;K==="visible"&&(ce|=Er.Open),K==="hidden"&&(ce|=Er.Closed),I&&K==="hidden"&&(ce|=Er.Opening),!I&&K==="visible"&&(ce|=Er.Closing);let Re=fr();return He.createElement(zf.Provider,{value:L},He.createElement(t5,{value:ce},Re({ourProps:ye,theirProps:x,defaultTag:YC,features:JC,visible:K==="visible",name:"Transition.Child"})))}function O5(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=E.useRef(null),a=GC(e),l=Yr(...a?[o,t]:t===null?[]:[t]);Bf();let u=Ff();if(n===void 0&&u!==null&&(n=(u&Er.Open)===Er.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,f]=E.useState(n?"visible":"hidden"),p=QC(()=>{n||f("hidden")}),[m,w]=E.useState(!0),v=E.useRef([n]);Nn(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),w(!1))},[v,n]);let x=E.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Nn(()=>{n?f("visible"):!Vf(p)&&o.current!==null&&f("hidden")},[n,p]);let g={unmount:s},y=ht(()=>{var j;m&&w(!1),(j=e.beforeEnter)==null||j.call(e)}),_=ht(()=>{var j;m&&w(!1),(j=e.beforeLeave)==null||j.call(e)}),T=fr();return He.createElement(zf.Provider,{value:p},He.createElement(Uf.Provider,{value:x},T({ourProps:{...g,as:E.Fragment,children:He.createElement(ZC,{ref:l,...g,...i,beforeEnter:y,beforeLeave:_})},theirProps:{},defaultTag:E.Fragment,features:JC,visible:c==="visible",name:"Transition"})))}function j5(e,t){let n=E.useContext(Uf)!==null,r=Ff()!==null;return He.createElement(He.Fragment,null,!n&&r?He.createElement(Eg,{ref:t,...e}):He.createElement(ZC,{ref:t,...e}))}let Eg=Ln(O5),ZC=Ln(A5),Ov=Ln(j5),hd=Object.assign(Eg,{Child:Ov,Root:Eg});var R5=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(R5||{}),I5=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(I5||{});let D5={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},jv=E.createContext(null);jv.displayName="DialogContext";function Kf(e){let t=E.useContext(jv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kf),n}return t}function N5(e,t){return _s(t.type,D5,e,t)}let Gx=Ln(function(e,t){let n=E.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...f}=e,p=E.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Ff();s===void 0&&m!==null&&(s=(m&Er.Open)===Er.Open);let w=E.useRef(null),v=Yr(w,t),x=Tv(w.current),g=s?0:1,[y,_]=E.useReducer(N5,{titleId:null,descriptionId:null,panelRef:E.createRef()}),T=ht(()=>i(!1)),j=ht(he=>_({type:0,id:he})),R=Bf()?g===0:!1,[I,$]=c5(),U={get current(){var he;return(he=y.panelRef.current)!=null?he:w.current}},K=WC(),{resolveContainers:me}=m5({mainTreeNode:K,portals:I,defaultContainers:[U]}),M=m!==null?(m&Er.Closing)===Er.Closing:!1;CB(u||M?!1:R,{allowed:ht(()=>{var he,ye;return[(ye=(he=w.current)==null?void 0:he.closest("[data-headlessui-portal]"))!=null?ye:null]}),disallowed:ht(()=>{var he;return[(he=K==null?void 0:K.closest("body > *:not(#headlessui-portal-root)"))!=null?he:null]})});let re=jC.get(null);Nn(()=>{if(R)return re.actions.push(r),()=>re.actions.pop(r)},[re,r,R]);let A=DC(re,E.useCallback(he=>re.selectors.isTop(he,r),[re,r]));MB(A,me,he=>{he.preventDefault(),T()}),h5(A,x==null?void 0:x.defaultView,he=>{he.preventDefault(),he.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),WB(u||M?!1:R,x,me),TB(R,w,T);let[Y,ve]=tB(),ae=E.useMemo(()=>[{dialogState:g,close:T,setTitleId:j,unmount:c},y],[g,T,j,c,y]),ue=Ku({open:g===0}),L={ref:v,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:g===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":Y,unmount:c},se=!p5(),V=Fi.None;R&&!u&&(V|=Fi.RestoreFocus,V|=Fi.TabLock,l&&(V|=Fi.AutoFocus),se&&(V|=Fi.InitialFocus));let W=fr();return He.createElement(n5,null,He.createElement(Hx,{force:!0},He.createElement(f5,null,He.createElement(jv.Provider,{value:ae},He.createElement(VC,{target:w},He.createElement(Hx,{force:!1},He.createElement(ve,{slot:ue},He.createElement($,null,He.createElement(x5,{initialFocus:o,initialFocusFallback:w,containers:me,features:V},He.createElement(aB,{value:T},W({ourProps:L,theirProps:f,slot:ue,defaultTag:L5,features:$5,visible:g===0,name:"Dialog"})))))))))))}),L5="div",$5=Xd.RenderStrategy|Xd.Static;function M5(e,t){let{transition:n=!1,open:r,...s}=e,i=Ff(),o=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?He.createElement(qx,null,He.createElement(hd,{show:r,transition:n,unmount:s.unmount},He.createElement(Gx,{ref:t,...s}))):He.createElement(qx,null,He.createElement(Gx,{ref:t,open:r,...s}))}let F5="div";function B5(e,t){let n=E.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:a},l]=Kf("Dialog.Panel"),u=Yr(t,l.panelRef),c=Ku({open:o===0}),f=ht(x=>{x.stopPropagation()}),p={ref:u,id:r,onClick:f},m=s?Ov:E.Fragment,w=s?{unmount:a}:{},v=fr();return He.createElement(m,{...w},v({ourProps:p,theirProps:i,slot:c,defaultTag:F5,name:"Dialog.Panel"}))}let U5="div";function z5(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=Kf("Dialog.Backdrop"),o=Ku({open:s===0}),a={ref:t,"aria-hidden":!0},l=n?Ov:E.Fragment,u=n?{unmount:i}:{},c=fr();return He.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:U5,name:"Dialog.Backdrop"}))}let V5="h2";function K5(e,t){let n=E.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=Kf("Dialog.Title"),a=Yr(t);E.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Ku({open:i===0}),u={ref:a,id:r};return fr()({ourProps:u,theirProps:s,slot:l,defaultTag:V5,name:"Dialog.Title"})}let W5=Ln(M5),H5=Ln(B5);Ln(z5);let q5=Ln(K5),Sp=Object.assign(W5,{Panel:H5,Title:q5,Description:iB});const G5=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r})=>{const[s,i]=E.useState(r),o=l=>{i(l.target.value)},a=()=>{n(s),t()};return k.jsx(hd,{appear:!0,show:e,as:E.Fragment,children:k.jsxs(Sp,{as:"div",className:"relative z-10",onClose:t,children:[k.jsxs(hd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})," "]}),k.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:k.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:k.jsx(hd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:k.jsxs(Sp.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[k.jsx(Sp.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),k.jsxs("div",{className:"mt-2",children:[k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"iast",checked:s==="iast",onChange:o,className:"mr-2"}),"IAST"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:s==="tamil_superscripted",onChange:o,className:"mr-2"}),"Tamil"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:s==="malayalam",onChange:o,className:"mr-2"}),"Malayalam"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:s==="devanagari",onChange:o,className:"mr-2"}),"Devanagari"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"itrans",checked:s==="itrans",onChange:o,className:"mr-2"}),"ITrans"]}),k.jsx("br",{})]}),k.jsxs("div",{className:"mt-4",children:[k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Save"})]})]})})})})]})})},Q5=()=>{const[e,t]=E.useState(navigator.onLine);E.useEffect(()=>{const f=()=>t(!0),p=()=>t(!1);return window.addEventListener("online",f),window.addEventListener("offline",p),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{console.log("Service Worker is active:",m.active)}),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[]);const{preferredLanguage:n,setPreferredLanguage:r}=Ua(),[s,i]=E.useState(!1),o=()=>i(!s),[a,l]=E.useState(!1),u=()=>l(!0),c=()=>l(!1);return k.jsx(uI,{children:k.jsxs("div",{className:"app-layout",children:[" ",k.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:k.jsx(L4,{toggleDropdown:o,isDropdownOpen:s,openLanguageSettings:u})}),k.jsx(G5,{isOpen:a,onClose:c,onLanguageSave:r,currentLanguage:n}),k.jsx(mD,{children:k.jsxs(N4,{children:[k.jsx(I4,{}),k.jsx(c4,{})]})})]})})};function Y5(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(f=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await Ma(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{i?i("/new-sankeertan/sw.js",f):s==null||s(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}Y5();const J5=new MI({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),Z5=Ep.createRoot(document.getElementById("root"));Z5.render(k.jsx(He.StrictMode,{children:k.jsx(FI,{client:J5,children:k.jsx(hO,{children:k.jsx(_S,{children:k.jsx(Q5,{})})})})}));
