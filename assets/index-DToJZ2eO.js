var jT=Object.defineProperty;var d0=e=>{throw TypeError(e)};var OT=(e,t,n)=>t in e?jT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var nl=(e,t,n)=>OT(e,typeof t!="symbol"?t+"":t,n),kh=(e,t,n)=>t.has(e)||d0("Cannot "+n);var q=(e,t,n)=>(kh(e,t,"read from private field"),n?n.call(e):t.get(e)),He=(e,t,n)=>t.has(e)?d0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),$e=(e,t,n,r)=>(kh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ot=(e,t,n)=>(kh(e,t,"access private method"),n);var vc=(e,t,n,r)=>({set _(s){$e(e,t,s,n)},get _(){return q(e,t,r)}});function RT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function IT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var a_={exports:{}},af={},l_={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=Symbol.for("react.element"),DT=Symbol.for("react.portal"),NT=Symbol.for("react.fragment"),LT=Symbol.for("react.strict_mode"),$T=Symbol.for("react.profiler"),MT=Symbol.for("react.provider"),FT=Symbol.for("react.context"),BT=Symbol.for("react.forward_ref"),UT=Symbol.for("react.suspense"),zT=Symbol.for("react.memo"),VT=Symbol.for("react.lazy"),f0=Symbol.iterator;function KT(e){return e===null||typeof e!="object"?null:(e=f0&&e[f0]||e["@@iterator"],typeof e=="function"?e:null)}var u_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c_=Object.assign,d_={};function Na(e,t,n){this.props=e,this.context=t,this.refs=d_,this.updater=n||u_}Na.prototype.isReactComponent={};Na.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Na.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function f_(){}f_.prototype=Na.prototype;function Ag(e,t,n){this.props=e,this.context=t,this.refs=d_,this.updater=n||u_}var jg=Ag.prototype=new f_;jg.constructor=Ag;c_(jg,Na.prototype);jg.isPureReactComponent=!0;var h0=Array.isArray,h_=Object.prototype.hasOwnProperty,Og={current:null},p_={key:!0,ref:!0,__self:!0,__source:!0};function m_(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)h_.call(t,r)&&!p_.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Cu,type:e,key:i,ref:o,props:s,_owner:Og.current}}function WT(e,t){return{$$typeof:Cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cu}function HT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var p0=/\/+/g;function Sh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HT(""+e.key):t.toString(36)}function Yc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Cu:case DT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Sh(o,0):r,h0(s)?(n="",e!=null&&(n=e.replace(p0,"$&/")+"/"),Yc(s,t,n,"",function(u){return u})):s!=null&&(Rg(s)&&(s=WT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(p0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",h0(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Sh(i,a);o+=Yc(i,t,n,l,s)}else if(l=KT(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Sh(i,a++),o+=Yc(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wc(e,t,n){if(e==null)return e;var r=[],s=0;return Yc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function qT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},Jc={transition:null},GT={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Jc,ReactCurrentOwner:Og};function g_(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:wc,forEach:function(e,t,n){wc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wc(e,function(){t++}),t},toArray:function(e){return wc(e,function(t){return t})||[]},only:function(e){if(!Rg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Na;st.Fragment=NT;st.Profiler=$T;st.PureComponent=Ag;st.StrictMode=LT;st.Suspense=UT;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GT;st.act=g_;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=c_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Og.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)h_.call(t,l)&&!p_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Cu,type:e.type,key:s,ref:i,props:r,_owner:o}};st.createContext=function(e){return e={$$typeof:FT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MT,_context:e},e.Consumer=e};st.createElement=m_;st.createFactory=function(e){var t=m_.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:BT,render:e}};st.isValidElement=Rg;st.lazy=function(e){return{$$typeof:VT,_payload:{_status:-1,_result:e},_init:qT}};st.memo=function(e,t){return{$$typeof:zT,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=Jc.transition;Jc.transition={};try{e()}finally{Jc.transition=t}};st.unstable_act=g_;st.useCallback=function(e,t){return _n.current.useCallback(e,t)};st.useContext=function(e){return _n.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};st.useEffect=function(e,t){return _n.current.useEffect(e,t)};st.useId=function(){return _n.current.useId()};st.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return _n.current.useMemo(e,t)};st.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};st.useRef=function(e){return _n.current.useRef(e)};st.useState=function(e){return _n.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return _n.current.useTransition()};st.version="18.3.1";l_.exports=st;var E=l_.exports;const ze=of(E),m0=RT({__proto__:null,default:ze},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT=E,YT=Symbol.for("react.element"),JT=Symbol.for("react.fragment"),ZT=Object.prototype.hasOwnProperty,XT=QT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eP={key:!0,ref:!0,__self:!0,__source:!0};function y_(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)ZT.call(t,r)&&!eP.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:YT,type:e,key:i,ref:o,props:s,_owner:XT.current}}af.Fragment=JT;af.jsx=y_;af.jsxs=y_;a_.exports=af;var k=a_.exports,Pp={},v_={exports:{}},Wn={},w_={exports:{}},b_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ae,re){var ge=ae.length;ae.push(re);e:for(;0<ge;){var N=ge-1>>>1,z=ae[N];if(0<s(z,re))ae[N]=re,ae[ge]=z,ge=N;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var re=ae[0],ge=ae.pop();if(ge!==re){ae[0]=ge;e:for(var N=0,z=ae.length,ue=z>>>1;N<ue;){var fe=2*(N+1)-1,ce=ae[fe],Ce=fe+1,De=ae[Ce];if(0>s(ce,ge))Ce<z&&0>s(De,ce)?(ae[N]=De,ae[Ce]=ge,N=Ce):(ae[N]=ce,ae[fe]=ge,N=fe);else if(Ce<z&&0>s(De,ge))ae[N]=De,ae[Ce]=ge,N=Ce;else break e}}return re}function s(ae,re){var ge=ae.sortIndex-re.sortIndex;return ge!==0?ge:ae.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,b=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ae){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=ae)r(u),re.sortIndex=re.expirationTime,t(l,re);else break;re=n(u)}}function C(ae){if(v=!1,w(ae),!b)if(n(l)!==null)b=!0,xe(O);else{var re=n(u);re!==null&&oe(C,re.startTime-ae)}}function O(ae,re){b=!1,v&&(v=!1,g($),$=-1),m=!0;var ge=p;try{for(w(re),f=n(l);f!==null&&(!(f.expirationTime>re)||ae&&!he());){var N=f.callback;if(typeof N=="function"){f.callback=null,p=f.priorityLevel;var z=N(f.expirationTime<=re);re=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),w(re)}else r(l);f=n(l)}if(f!==null)var ue=!0;else{var fe=n(u);fe!==null&&oe(C,fe.startTime-re),ue=!1}return ue}finally{f=null,p=ge,m=!1}}var I=!1,R=null,$=-1,F=5,V=-1;function he(){return!(e.unstable_now()-V<F)}function M(){if(R!==null){var ae=e.unstable_now();V=ae;var re=!0;try{re=R(!0,ae)}finally{re?ne():(I=!1,R=null)}}else I=!1}var ne;if(typeof y=="function")ne=function(){y(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,J=A.port2;A.port1.onmessage=M,ne=function(){J.postMessage(null)}}else ne=function(){_(M,0)};function xe(ae){R=ae,I||(I=!0,ne())}function oe(ae,re){$=_(function(){ae(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,xe(O))},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ae){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var ge=p;p=re;try{return ae()}finally{p=ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ae,re){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ge=p;p=ae;try{return re()}finally{p=ge}},e.unstable_scheduleCallback=function(ae,re,ge){var N=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?N+ge:N):ge=N,ae){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ge+z,ae={id:c++,callback:re,priorityLevel:ae,startTime:ge,expirationTime:z,sortIndex:-1},ge>N?(ae.sortIndex=ge,t(u,ae),n(l)===null&&ae===n(u)&&(v?(g($),$=-1):v=!0,oe(C,ge-N))):(ae.sortIndex=z,t(l,ae),b||m||(b=!0,xe(O))),ae},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(ae){var re=p;return function(){var ge=p;p=re;try{return ae.apply(this,arguments)}finally{p=ge}}}})(b_);w_.exports=b_;var tP=w_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP=E,Vn=tP;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x_=new Set,Hl={};function mo(e,t){Sa(e,t),Sa(e+"Capture",t)}function Sa(e,t){for(Hl[e]=t,e=0;e<t.length;e++)x_.add(t[e])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=Object.prototype.hasOwnProperty,rP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g0={},y0={};function sP(e){return Ap.call(y0,e)?!0:Ap.call(g0,e)?!1:rP.test(e)?y0[e]=!0:(g0[e]=!0,!1)}function iP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oP(e,t,n,r){if(t===null||typeof t>"u"||iP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kn(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ig=/[\-:]([a-z])/g;function Dg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ig,Dg);rn[t]=new kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ig,Dg);rn[t]=new kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ig,Dg);rn[t]=new kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new kn(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ng(e,t,n,r){var s=rn.hasOwnProperty(t)?rn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oP(t,n,s,r)&&(n=null),r||s===null?sP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ks=nP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),Uo=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Lg=Symbol.for("react.strict_mode"),jp=Symbol.for("react.profiler"),__=Symbol.for("react.provider"),k_=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Op=Symbol.for("react.suspense"),Rp=Symbol.for("react.suspense_list"),Mg=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),S_=Symbol.for("react.offscreen"),v0=Symbol.iterator;function rl(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Eh;function gl(e){if(Eh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Eh=t&&t[1]||""}return`
`+Eh+e}var Ch=!1;function Th(e,t){if(!e||Ch)return"";Ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ch=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gl(e):""}function aP(e){switch(e.tag){case 5:return gl(e.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 2:case 15:return e=Th(e.type,!1),e;case 11:return e=Th(e.type.render,!1),e;case 1:return e=Th(e.type,!0),e;default:return""}}function Ip(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zo:return"Fragment";case Uo:return"Portal";case jp:return"Profiler";case Lg:return"StrictMode";case Op:return"Suspense";case Rp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k_:return(e.displayName||"Context")+".Consumer";case __:return(e._context.displayName||"Context")+".Provider";case $g:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mg:return t=e.displayName||null,t!==null?t:Ip(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return Ip(e(t))}catch{}}return null}function lP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ip(t);case 8:return t===Lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function E_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uP(e){var t=E_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xc(e){e._valueTracker||(e._valueTracker=uP(e))}function C_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=E_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dp(e,t){var n=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function w0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function T_(e,t){t=t.checked,t!=null&&Ng(e,"checked",t,!1)}function Np(e,t){T_(e,t);var n=fi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lp(e,t.type,fi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function b0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lp(e,t,n){(t!=="number"||vd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yl=Array.isArray;function sa(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $p(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function x0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Se(92));if(yl(n)){if(1<n.length)throw Error(Se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fi(n)}}function P_(e,t){var n=fi(t.value),r=fi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _c,j_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_c=_c||document.createElement("div"),_c.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_c.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ql(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cP=["Webkit","ms","Moz","O"];Object.keys(Cl).forEach(function(e){cP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cl[t]=Cl[e]})});function O_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Cl.hasOwnProperty(e)&&Cl[e]?(""+t).trim():t+"px"}function R_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=O_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var dP=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(e,t){if(t){if(dP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function Bp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Up=null;function Fg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zp=null,ia=null,oa=null;function k0(e){if(e=Au(e)){if(typeof zp!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=ff(t),zp(e.stateNode,e.type,t))}}function I_(e){ia?oa?oa.push(e):oa=[e]:ia=e}function D_(){if(ia){var e=ia,t=oa;if(oa=ia=null,k0(e),t)for(e=0;e<t.length;e++)k0(t[e])}}function N_(e,t){return e(t)}function L_(){}var Ph=!1;function $_(e,t,n){if(Ph)return e(t,n);Ph=!0;try{return N_(e,t,n)}finally{Ph=!1,(ia!==null||oa!==null)&&(L_(),D_())}}function Gl(e,t){var n=e.stateNode;if(n===null)return null;var r=ff(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Se(231,t,typeof n));return n}var Vp=!1;if(ps)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Vp=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Vp=!1}function fP(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Tl=!1,wd=null,bd=!1,Kp=null,hP={onError:function(e){Tl=!0,wd=e}};function pP(e,t,n,r,s,i,o,a,l){Tl=!1,wd=null,fP.apply(hP,arguments)}function mP(e,t,n,r,s,i,o,a,l){if(pP.apply(this,arguments),Tl){if(Tl){var u=wd;Tl=!1,wd=null}else throw Error(Se(198));bd||(bd=!0,Kp=u)}}function go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function M_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S0(e){if(go(e)!==e)throw Error(Se(188))}function gP(e){var t=e.alternate;if(!t){if(t=go(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return S0(s),e;if(i===r)return S0(s),t;i=i.sibling}throw Error(Se(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?e:t}function F_(e){return e=gP(e),e!==null?B_(e):null}function B_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=B_(e);if(t!==null)return t;e=e.sibling}return null}var U_=Vn.unstable_scheduleCallback,E0=Vn.unstable_cancelCallback,yP=Vn.unstable_shouldYield,vP=Vn.unstable_requestPaint,Nt=Vn.unstable_now,wP=Vn.unstable_getCurrentPriorityLevel,Bg=Vn.unstable_ImmediatePriority,z_=Vn.unstable_UserBlockingPriority,xd=Vn.unstable_NormalPriority,bP=Vn.unstable_LowPriority,V_=Vn.unstable_IdlePriority,lf=null,Wr=null;function xP(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(lf,e,void 0,(e.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:SP,_P=Math.log,kP=Math.LN2;function SP(e){return e>>>=0,e===0?32:31-(_P(e)/kP|0)|0}var kc=64,Sc=4194304;function vl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=vl(a):(i&=o,i!==0&&(r=vl(i)))}else o=n&~s,o!==0?r=vl(o):i!==0&&(r=vl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tr(t),s=1<<n,r|=e[n],t&=~s;return r}function EP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=EP(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Wp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function K_(){var e=kc;return kc<<=1,!(kc&4194240)&&(kc=64),e}function Ah(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tr(t),e[t]=n}function TP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Tr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Ug(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var dt=0;function W_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var H_,zg,q_,G_,Q_,Hp=!1,Ec=[],ni=null,ri=null,si=null,Ql=new Map,Yl=new Map,Fs=[],PP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(t.pointerId)}}function il(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Au(t),t!==null&&zg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function AP(e,t,n,r,s){switch(t){case"focusin":return ni=il(ni,e,t,n,r,s),!0;case"dragenter":return ri=il(ri,e,t,n,r,s),!0;case"mouseover":return si=il(si,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ql.set(i,il(Ql.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yl.set(i,il(Yl.get(i)||null,e,t,n,r,s)),!0}return!1}function Y_(e){var t=Bi(e.target);if(t!==null){var n=go(t);if(n!==null){if(t=n.tag,t===13){if(t=M_(n),t!==null){e.blockedOn=t,Q_(e.priority,function(){q_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Up=r,n.target.dispatchEvent(r),Up=null}else return t=Au(n),t!==null&&zg(t),e.blockedOn=n,!1;t.shift()}return!0}function T0(e,t,n){Zc(e)&&n.delete(t)}function jP(){Hp=!1,ni!==null&&Zc(ni)&&(ni=null),ri!==null&&Zc(ri)&&(ri=null),si!==null&&Zc(si)&&(si=null),Ql.forEach(T0),Yl.forEach(T0)}function ol(e,t){e.blockedOn===t&&(e.blockedOn=null,Hp||(Hp=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,jP)))}function Jl(e){function t(s){return ol(s,e)}if(0<Ec.length){ol(Ec[0],e);for(var n=1;n<Ec.length;n++){var r=Ec[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ni!==null&&ol(ni,e),ri!==null&&ol(ri,e),si!==null&&ol(si,e),Ql.forEach(t),Yl.forEach(t),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)Y_(n),n.blockedOn===null&&Fs.shift()}var aa=ks.ReactCurrentBatchConfig,kd=!0;function OP(e,t,n,r){var s=dt,i=aa.transition;aa.transition=null;try{dt=1,Vg(e,t,n,r)}finally{dt=s,aa.transition=i}}function RP(e,t,n,r){var s=dt,i=aa.transition;aa.transition=null;try{dt=4,Vg(e,t,n,r)}finally{dt=s,aa.transition=i}}function Vg(e,t,n,r){if(kd){var s=qp(e,t,n,r);if(s===null)Fh(e,t,r,Sd,n),C0(e,r);else if(AP(s,e,t,n,r))r.stopPropagation();else if(C0(e,r),t&4&&-1<PP.indexOf(e)){for(;s!==null;){var i=Au(s);if(i!==null&&H_(i),i=qp(e,t,n,r),i===null&&Fh(e,t,r,Sd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fh(e,t,r,null,n)}}var Sd=null;function qp(e,t,n,r){if(Sd=null,e=Fg(r),e=Bi(e),e!==null)if(t=go(e),t===null)e=null;else if(n=t.tag,n===13){if(e=M_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sd=e,null}function J_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wP()){case Bg:return 1;case z_:return 4;case xd:case bP:return 16;case V_:return 536870912;default:return 16}default:return 16}}var Zs=null,Kg=null,Xc=null;function Z_(){if(Xc)return Xc;var e,t=Kg,n=t.length,r,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Xc=s.slice(e,1<r?1-r:void 0)}function ed(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cc(){return!0}function P0(){return!1}function Hn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cc:P0,this.isPropagationStopped=P0,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),t}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wg=Hn(La),Pu=Ct({},La,{view:0,detail:0}),IP=Hn(Pu),jh,Oh,al,uf=Ct({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==al&&(al&&e.type==="mousemove"?(jh=e.screenX-al.screenX,Oh=e.screenY-al.screenY):Oh=jh=0,al=e),jh)},movementY:function(e){return"movementY"in e?e.movementY:Oh}}),A0=Hn(uf),DP=Ct({},uf,{dataTransfer:0}),NP=Hn(DP),LP=Ct({},Pu,{relatedTarget:0}),Rh=Hn(LP),$P=Ct({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),MP=Hn($P),FP=Ct({},La,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BP=Hn(FP),UP=Ct({},La,{data:0}),j0=Hn(UP),zP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KP[e])?!!t[e]:!1}function Hg(){return WP}var HP=Ct({},Pu,{key:function(e){if(e.key){var t=zP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ed(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?VP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(e){return e.type==="keypress"?ed(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ed(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qP=Hn(HP),GP=Ct({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=Hn(GP),QP=Ct({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),YP=Hn(QP),JP=Ct({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZP=Hn(JP),XP=Ct({},uf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),e2=Hn(XP),t2=[9,13,27,32],qg=ps&&"CompositionEvent"in window,Pl=null;ps&&"documentMode"in document&&(Pl=document.documentMode);var n2=ps&&"TextEvent"in window&&!Pl,X_=ps&&(!qg||Pl&&8<Pl&&11>=Pl),R0=" ",I0=!1;function ek(e,t){switch(e){case"keyup":return t2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vo=!1;function r2(e,t){switch(e){case"compositionend":return tk(t);case"keypress":return t.which!==32?null:(I0=!0,R0);case"textInput":return e=t.data,e===R0&&I0?null:e;default:return null}}function s2(e,t){if(Vo)return e==="compositionend"||!qg&&ek(e,t)?(e=Z_(),Xc=Kg=Zs=null,Vo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return X_&&t.locale!=="ko"?null:t.data;default:return null}}var i2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!i2[e.type]:t==="textarea"}function nk(e,t,n,r){I_(r),t=Ed(t,"onChange"),0<t.length&&(n=new Wg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Al=null,Zl=null;function o2(e){hk(e,0)}function cf(e){var t=Ho(e);if(C_(t))return e}function a2(e,t){if(e==="change")return t}var rk=!1;if(ps){var Ih;if(ps){var Dh="oninput"in document;if(!Dh){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),Dh=typeof N0.oninput=="function"}Ih=Dh}else Ih=!1;rk=Ih&&(!document.documentMode||9<document.documentMode)}function L0(){Al&&(Al.detachEvent("onpropertychange",sk),Zl=Al=null)}function sk(e){if(e.propertyName==="value"&&cf(Zl)){var t=[];nk(t,Zl,e,Fg(e)),$_(o2,t)}}function l2(e,t,n){e==="focusin"?(L0(),Al=t,Zl=n,Al.attachEvent("onpropertychange",sk)):e==="focusout"&&L0()}function u2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cf(Zl)}function c2(e,t){if(e==="click")return cf(t)}function d2(e,t){if(e==="input"||e==="change")return cf(t)}function f2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ar=typeof Object.is=="function"?Object.is:f2;function Xl(e,t){if(Ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ap.call(t,s)||!Ar(e[s],t[s]))return!1}return!0}function $0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M0(e,t){var n=$0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$0(n)}}function ik(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ik(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ok(){for(var e=window,t=vd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vd(e.document)}return t}function Gg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function h2(e){var t=ok(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ik(n.ownerDocument.documentElement,n)){if(r!==null&&Gg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=M0(n,i);var o=M0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var p2=ps&&"documentMode"in document&&11>=document.documentMode,Ko=null,Gp=null,jl=null,Qp=!1;function F0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qp||Ko==null||Ko!==vd(r)||(r=Ko,"selectionStart"in r&&Gg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jl&&Xl(jl,r)||(jl=r,r=Ed(Gp,"onSelect"),0<r.length&&(t=new Wg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ko)))}function Tc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wo={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},Nh={},ak={};ps&&(ak=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function df(e){if(Nh[e])return Nh[e];if(!Wo[e])return e;var t=Wo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ak)return Nh[e]=t[n];return e}var lk=df("animationend"),uk=df("animationiteration"),ck=df("animationstart"),dk=df("transitionend"),fk=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){fk.set(e,t),mo(t,[e])}for(var Lh=0;Lh<B0.length;Lh++){var $h=B0[Lh],m2=$h.toLowerCase(),g2=$h[0].toUpperCase()+$h.slice(1);gi(m2,"on"+g2)}gi(lk,"onAnimationEnd");gi(uk,"onAnimationIteration");gi(ck,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(dk,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(wl));function U0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mP(r,t,void 0,e),e.currentTarget=null}function hk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;U0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;U0(s,a,u),i=l}}}if(bd)throw e=Kp,bd=!1,Kp=null,e}function gt(e,t){var n=t[em];n===void 0&&(n=t[em]=new Set);var r=e+"__bubble";n.has(r)||(pk(t,e,2,!1),n.add(r))}function Mh(e,t,n){var r=0;t&&(r|=4),pk(n,e,r,t)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[Pc]){e[Pc]=!0,x_.forEach(function(n){n!=="selectionchange"&&(y2.has(n)||Mh(n,!1,e),Mh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pc]||(t[Pc]=!0,Mh("selectionchange",!1,t))}}function pk(e,t,n,r){switch(J_(t)){case 1:var s=OP;break;case 4:s=RP;break;default:s=Vg}n=s.bind(null,t,n,e),s=void 0,!Vp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Fh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Bi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}$_(function(){var u=i,c=Fg(n),f=[];e:{var p=fk.get(e);if(p!==void 0){var m=Wg,b=e;switch(e){case"keypress":if(ed(n)===0)break e;case"keydown":case"keyup":m=qP;break;case"focusin":b="focus",m=Rh;break;case"focusout":b="blur",m=Rh;break;case"beforeblur":case"afterblur":m=Rh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=NP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=YP;break;case lk:case uk:case ck:m=MP;break;case dk:m=ZP;break;case"scroll":m=IP;break;case"wheel":m=e2;break;case"copy":case"cut":case"paste":m=BP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O0}var v=(t&4)!==0,_=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,w;y!==null;){w=y;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,g!==null&&(C=Gl(y,g),C!=null&&v.push(tu(y,C,w)))),_)break;y=y.return}0<v.length&&(p=new m(p,b,null,n,c),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Up&&(b=n.relatedTarget||n.fromElement)&&(Bi(b)||b[ms]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=u,b=b?Bi(b):null,b!==null&&(_=go(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(v=A0,C="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=O0,C="onPointerLeave",g="onPointerEnter",y="pointer"),_=m==null?p:Ho(m),w=b==null?p:Ho(b),p=new v(C,y+"leave",m,n,c),p.target=_,p.relatedTarget=w,C=null,Bi(c)===u&&(v=new v(g,y+"enter",b,n,c),v.target=w,v.relatedTarget=_,C=v),_=C,m&&b)t:{for(v=m,g=b,y=0,w=v;w;w=Oo(w))y++;for(w=0,C=g;C;C=Oo(C))w++;for(;0<y-w;)v=Oo(v),y--;for(;0<w-y;)g=Oo(g),w--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Oo(v),g=Oo(g)}v=null}else v=null;m!==null&&z0(f,p,m,v,!1),b!==null&&_!==null&&z0(f,_,b,v,!0)}}e:{if(p=u?Ho(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=a2;else if(D0(p))if(rk)O=d2;else{O=u2;var I=l2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=c2);if(O&&(O=O(e,u))){nk(f,O,n,c);break e}I&&I(e,p,u),e==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Lp(p,"number",p.value)}switch(I=u?Ho(u):window,e){case"focusin":(D0(I)||I.contentEditable==="true")&&(Ko=I,Gp=u,jl=null);break;case"focusout":jl=Gp=Ko=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,F0(f,n,c);break;case"selectionchange":if(p2)break;case"keydown":case"keyup":F0(f,n,c)}var R;if(qg)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Vo?ek(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(X_&&n.locale!=="ko"&&(Vo||$!=="onCompositionStart"?$==="onCompositionEnd"&&Vo&&(R=Z_()):(Zs=c,Kg="value"in Zs?Zs.value:Zs.textContent,Vo=!0)),I=Ed(u,$),0<I.length&&($=new j0($,e,null,n,c),f.push({event:$,listeners:I}),R?$.data=R:(R=tk(n),R!==null&&($.data=R)))),(R=n2?r2(e,n):s2(e,n))&&(u=Ed(u,"onBeforeInput"),0<u.length&&(c=new j0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=R))}hk(f,t)})}function tu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ed(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gl(e,n),i!=null&&r.unshift(tu(e,i,s)),i=Gl(e,t),i!=null&&r.push(tu(e,i,s))),e=e.return}return r}function Oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function z0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Gl(n,i),l!=null&&o.unshift(tu(n,l,a))):s||(l=Gl(n,i),l!=null&&o.push(tu(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var v2=/\r\n?/g,w2=/\u0000|\uFFFD/g;function V0(e){return(typeof e=="string"?e:""+e).replace(v2,`
`).replace(w2,"")}function Ac(e,t,n){if(t=V0(t),V0(e)!==t&&n)throw Error(Se(425))}function Cd(){}var Yp=null,Jp=null;function Zp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,b2=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,x2=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(e){return K0.resolve(null).then(e).catch(_2)}:Xp;function _2(e){setTimeout(function(){throw e})}function Bh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jl(t)}function ii(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function W0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Vr="__reactFiber$"+$a,nu="__reactProps$"+$a,ms="__reactContainer$"+$a,em="__reactEvents$"+$a,k2="__reactListeners$"+$a,S2="__reactHandles$"+$a;function Bi(e){var t=e[Vr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[Vr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=W0(e);e!==null;){if(n=e[Vr])return n;e=W0(e)}return t}e=n,n=e.parentNode}return null}function Au(e){return e=e[Vr]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ho(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function ff(e){return e[nu]||null}var tm=[],qo=-1;function yi(e){return{current:e}}function yt(e){0>qo||(e.current=tm[qo],tm[qo]=null,qo--)}function mt(e,t){qo++,tm[qo]=e.current,e.current=t}var hi={},mn=yi(hi),Rn=yi(!1),ao=hi;function Ea(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function In(e){return e=e.childContextTypes,e!=null}function Td(){yt(Rn),yt(mn)}function H0(e,t,n){if(mn.current!==hi)throw Error(Se(168));mt(mn,t),mt(Rn,n)}function mk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Se(108,lP(e)||"Unknown",s));return Ct({},n,r)}function Pd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,ao=mn.current,mt(mn,e),mt(Rn,Rn.current),!0}function q0(e,t,n){var r=e.stateNode;if(!r)throw Error(Se(169));n?(e=mk(e,t,ao),r.__reactInternalMemoizedMergedChildContext=e,yt(Rn),yt(mn),mt(mn,e)):yt(Rn),mt(Rn,n)}var is=null,hf=!1,Uh=!1;function gk(e){is===null?is=[e]:is.push(e)}function E2(e){hf=!0,gk(e)}function vi(){if(!Uh&&is!==null){Uh=!0;var e=0,t=dt;try{var n=is;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}is=null,hf=!1}catch(s){throw is!==null&&(is=is.slice(e+1)),U_(Bg,vi),s}finally{dt=t,Uh=!1}}return null}var Go=[],Qo=0,Ad=null,jd=0,tr=[],nr=0,lo=null,us=1,cs="";function Ri(e,t){Go[Qo++]=jd,Go[Qo++]=Ad,Ad=e,jd=t}function yk(e,t,n){tr[nr++]=us,tr[nr++]=cs,tr[nr++]=lo,lo=e;var r=us;e=cs;var s=32-Tr(r)-1;r&=~(1<<s),n+=1;var i=32-Tr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,us=1<<32-Tr(t)+s|n<<s|r,cs=i+e}else us=1<<i|n<<s|r,cs=e}function Qg(e){e.return!==null&&(Ri(e,1),yk(e,1,0))}function Yg(e){for(;e===Ad;)Ad=Go[--Qo],Go[Qo]=null,jd=Go[--Qo],Go[Qo]=null;for(;e===lo;)lo=tr[--nr],tr[nr]=null,cs=tr[--nr],tr[nr]=null,us=tr[--nr],tr[nr]=null}var zn=null,Un=null,wt=!1,Er=null;function vk(e,t){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function G0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zn=e,Un=ii(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zn=e,Un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lo!==null?{id:us,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zn=e,Un=null,!0):!1;default:return!1}}function nm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rm(e){if(wt){var t=Un;if(t){var n=t;if(!G0(e,t)){if(nm(e))throw Error(Se(418));t=ii(n.nextSibling);var r=zn;t&&G0(e,t)?vk(r,n):(e.flags=e.flags&-4097|2,wt=!1,zn=e)}}else{if(nm(e))throw Error(Se(418));e.flags=e.flags&-4097|2,wt=!1,zn=e}}}function Q0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zn=e}function jc(e){if(e!==zn)return!1;if(!wt)return Q0(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zp(e.type,e.memoizedProps)),t&&(t=Un)){if(nm(e))throw wk(),Error(Se(418));for(;t;)vk(e,t),t=ii(t.nextSibling)}if(Q0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Un=ii(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Un=null}}else Un=zn?ii(e.stateNode.nextSibling):null;return!0}function wk(){for(var e=Un;e;)e=ii(e.nextSibling)}function Ca(){Un=zn=null,wt=!1}function Jg(e){Er===null?Er=[e]:Er.push(e)}var C2=ks.ReactCurrentBatchConfig;function ll(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,e))}return e}function Oc(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y0(e){var t=e._init;return t(e._payload)}function bk(e){function t(g,y){if(e){var w=g.deletions;w===null?(g.deletions=[y],g.flags|=16):w.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=ui(g,y),g.index=0,g.sibling=null,g}function i(g,y,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<y?(g.flags|=2,y):w):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,w,C){return y===null||y.tag!==6?(y=Gh(w,g.mode,C),y.return=g,y):(y=s(y,w),y.return=g,y)}function l(g,y,w,C){var O=w.type;return O===zo?c(g,y,w.props.children,C,w.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$s&&Y0(O)===y.type)?(C=s(y,w.props),C.ref=ll(g,y,w),C.return=g,C):(C=ad(w.type,w.key,w.props,null,g.mode,C),C.ref=ll(g,y,w),C.return=g,C)}function u(g,y,w,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Qh(w,g.mode,C),y.return=g,y):(y=s(y,w.children||[]),y.return=g,y)}function c(g,y,w,C,O){return y===null||y.tag!==7?(y=so(w,g.mode,C,O),y.return=g,y):(y=s(y,w),y.return=g,y)}function f(g,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Gh(""+y,g.mode,w),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bc:return w=ad(y.type,y.key,y.props,null,g.mode,w),w.ref=ll(g,null,y),w.return=g,w;case Uo:return y=Qh(y,g.mode,w),y.return=g,y;case $s:var C=y._init;return f(g,C(y._payload),w)}if(yl(y)||rl(y))return y=so(y,g.mode,w,null),y.return=g,y;Oc(g,y)}return null}function p(g,y,w,C){var O=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(g,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bc:return w.key===O?l(g,y,w,C):null;case Uo:return w.key===O?u(g,y,w,C):null;case $s:return O=w._init,p(g,y,O(w._payload),C)}if(yl(w)||rl(w))return O!==null?null:c(g,y,w,C,null);Oc(g,w)}return null}function m(g,y,w,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(w)||null,a(y,g,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bc:return g=g.get(C.key===null?w:C.key)||null,l(y,g,C,O);case Uo:return g=g.get(C.key===null?w:C.key)||null,u(y,g,C,O);case $s:var I=C._init;return m(g,y,w,I(C._payload),O)}if(yl(C)||rl(C))return g=g.get(w)||null,c(y,g,C,O,null);Oc(y,C)}return null}function b(g,y,w,C){for(var O=null,I=null,R=y,$=y=0,F=null;R!==null&&$<w.length;$++){R.index>$?(F=R,R=null):F=R.sibling;var V=p(g,R,w[$],C);if(V===null){R===null&&(R=F);break}e&&R&&V.alternate===null&&t(g,R),y=i(V,y,$),I===null?O=V:I.sibling=V,I=V,R=F}if($===w.length)return n(g,R),wt&&Ri(g,$),O;if(R===null){for(;$<w.length;$++)R=f(g,w[$],C),R!==null&&(y=i(R,y,$),I===null?O=R:I.sibling=R,I=R);return wt&&Ri(g,$),O}for(R=r(g,R);$<w.length;$++)F=m(R,g,$,w[$],C),F!==null&&(e&&F.alternate!==null&&R.delete(F.key===null?$:F.key),y=i(F,y,$),I===null?O=F:I.sibling=F,I=F);return e&&R.forEach(function(he){return t(g,he)}),wt&&Ri(g,$),O}function v(g,y,w,C){var O=rl(w);if(typeof O!="function")throw Error(Se(150));if(w=O.call(w),w==null)throw Error(Se(151));for(var I=O=null,R=y,$=y=0,F=null,V=w.next();R!==null&&!V.done;$++,V=w.next()){R.index>$?(F=R,R=null):F=R.sibling;var he=p(g,R,V.value,C);if(he===null){R===null&&(R=F);break}e&&R&&he.alternate===null&&t(g,R),y=i(he,y,$),I===null?O=he:I.sibling=he,I=he,R=F}if(V.done)return n(g,R),wt&&Ri(g,$),O;if(R===null){for(;!V.done;$++,V=w.next())V=f(g,V.value,C),V!==null&&(y=i(V,y,$),I===null?O=V:I.sibling=V,I=V);return wt&&Ri(g,$),O}for(R=r(g,R);!V.done;$++,V=w.next())V=m(R,g,$,V.value,C),V!==null&&(e&&V.alternate!==null&&R.delete(V.key===null?$:V.key),y=i(V,y,$),I===null?O=V:I.sibling=V,I=V);return e&&R.forEach(function(M){return t(g,M)}),wt&&Ri(g,$),O}function _(g,y,w,C){if(typeof w=="object"&&w!==null&&w.type===zo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case bc:e:{for(var O=w.key,I=y;I!==null;){if(I.key===O){if(O=w.type,O===zo){if(I.tag===7){n(g,I.sibling),y=s(I,w.props.children),y.return=g,g=y;break e}}else if(I.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$s&&Y0(O)===I.type){n(g,I.sibling),y=s(I,w.props),y.ref=ll(g,I,w),y.return=g,g=y;break e}n(g,I);break}else t(g,I);I=I.sibling}w.type===zo?(y=so(w.props.children,g.mode,C,w.key),y.return=g,g=y):(C=ad(w.type,w.key,w.props,null,g.mode,C),C.ref=ll(g,y,w),C.return=g,g=C)}return o(g);case Uo:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(g,y.sibling),y=s(y,w.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Qh(w,g.mode,C),y.return=g,g=y}return o(g);case $s:return I=w._init,_(g,y,I(w._payload),C)}if(yl(w))return b(g,y,w,C);if(rl(w))return v(g,y,w,C);Oc(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,w),y.return=g,g=y):(n(g,y),y=Gh(w,g.mode,C),y.return=g,g=y),o(g)):n(g,y)}return _}var Ta=bk(!0),xk=bk(!1),Od=yi(null),Rd=null,Yo=null,Zg=null;function Xg(){Zg=Yo=Rd=null}function ey(e){var t=Od.current;yt(Od),e._currentValue=t}function sm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function la(e,t){Rd=e,Zg=Yo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jn=!0),e.firstContext=null)}function ur(e){var t=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:t,next:null},Yo===null){if(Rd===null)throw Error(Se(308));Yo=e,Rd.dependencies={lanes:0,firstContext:e}}else Yo=Yo.next=e;return t}var Ui=null;function ty(e){Ui===null?Ui=[e]:Ui.push(e)}function _k(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ty(t)):(n.next=s.next,s.next=n),t.interleaved=n,gs(e,r)}function gs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function ny(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,gs(e,n)}return s=r.interleaved,s===null?(t.next=t,ty(r)):(t.next=s.next,s.next=t),r.interleaved=t,gs(e,n)}function td(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ug(e,n)}}function J0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Id(e,t,n,r){var s=e.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,v=a;switch(p=t,m=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(m,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,p=typeof b=="function"?b.call(m,f,p):b,p==null)break e;f=Ct({},f,p);break e;case 2:Ms=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);co|=o,e.lanes=o,e.memoizedState=f}}function Z0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Se(191,s));s.call(r)}}}var ju={},Hr=yi(ju),ru=yi(ju),su=yi(ju);function zi(e){if(e===ju)throw Error(Se(174));return e}function ry(e,t){switch(mt(su,t),mt(ru,e),mt(Hr,ju),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mp(t,e)}yt(Hr),mt(Hr,t)}function Pa(){yt(Hr),yt(ru),yt(su)}function Sk(e){zi(su.current);var t=zi(Hr.current),n=Mp(t,e.type);t!==n&&(mt(ru,e),mt(Hr,n))}function sy(e){ru.current===e&&(yt(Hr),yt(ru))}var _t=yi(0);function Dd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zh=[];function iy(){for(var e=0;e<zh.length;e++)zh[e]._workInProgressVersionPrimary=null;zh.length=0}var nd=ks.ReactCurrentDispatcher,Vh=ks.ReactCurrentBatchConfig,uo=0,Et=null,Vt=null,Yt=null,Nd=!1,Ol=!1,iu=0,T2=0;function un(){throw Error(Se(321))}function oy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}function ay(e,t,n,r,s,i){if(uo=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nd.current=e===null||e.memoizedState===null?O2:R2,e=n(r,s),Ol){i=0;do{if(Ol=!1,iu=0,25<=i)throw Error(Se(301));i+=1,Yt=Vt=null,t.updateQueue=null,nd.current=I2,e=n(r,s)}while(Ol)}if(nd.current=Ld,t=Vt!==null&&Vt.next!==null,uo=0,Yt=Vt=Et=null,Nd=!1,t)throw Error(Se(300));return e}function ly(){var e=iu!==0;return iu=0,e}function Mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Et.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function cr(){if(Vt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Yt===null?Et.memoizedState:Yt.next;if(t!==null)Yt=t,Vt=e;else{if(e===null)throw Error(Se(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Yt===null?Et.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function ou(e,t){return typeof t=="function"?t(e):t}function Kh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=Vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((uo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Et.lanes|=c,co|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Ar(r,t.memoizedState)||(jn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Et.lanes|=i,co|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ar(i,t.memoizedState)||(jn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ek(){}function Ck(e,t){var n=Et,r=cr(),s=t(),i=!Ar(r.memoizedState,s);if(i&&(r.memoizedState=s,jn=!0),r=r.queue,uy(Ak.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,au(9,Pk.bind(null,n,r,s,t),void 0,null),Zt===null)throw Error(Se(349));uo&30||Tk(n,t,s)}return s}function Tk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pk(e,t,n,r){t.value=n,t.getSnapshot=r,jk(t)&&Ok(e)}function Ak(e,t,n){return n(function(){jk(t)&&Ok(e)})}function jk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ar(e,n)}catch{return!0}}function Ok(e){var t=gs(e,1);t!==null&&Pr(t,e,1,-1)}function X0(e){var t=Mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:e},t.queue=e,e=e.dispatch=j2.bind(null,Et,e),[t.memoizedState,e]}function au(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Rk(){return cr().memoizedState}function rd(e,t,n,r){var s=Mr();Et.flags|=e,s.memoizedState=au(1|t,n,void 0,r===void 0?null:r)}function pf(e,t,n,r){var s=cr();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var o=Vt.memoizedState;if(i=o.destroy,r!==null&&oy(r,o.deps)){s.memoizedState=au(t,n,i,r);return}}Et.flags|=e,s.memoizedState=au(1|t,n,i,r)}function ew(e,t){return rd(8390656,8,e,t)}function uy(e,t){return pf(2048,8,e,t)}function Ik(e,t){return pf(4,2,e,t)}function Dk(e,t){return pf(4,4,e,t)}function Nk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lk(e,t,n){return n=n!=null?n.concat([e]):null,pf(4,4,Nk.bind(null,t,e),n)}function cy(){}function $k(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mk(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fk(e,t,n){return uo&21?(Ar(n,t)||(n=K_(),Et.lanes|=n,co|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jn=!0),e.memoizedState=n)}function P2(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=Vh.transition;Vh.transition={};try{e(!1),t()}finally{dt=n,Vh.transition=r}}function Bk(){return cr().memoizedState}function A2(e,t,n){var r=li(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uk(e))zk(t,n);else if(n=_k(e,t,n,r),n!==null){var s=xn();Pr(n,e,r,s),Vk(n,t,r)}}function j2(e,t,n){var r=li(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uk(e))zk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ar(a,o)){var l=t.interleaved;l===null?(s.next=s,ty(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=_k(e,t,s,r),n!==null&&(s=xn(),Pr(n,e,r,s),Vk(n,t,r))}}function Uk(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function zk(e,t){Ol=Nd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ug(e,n)}}var Ld={readContext:ur,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},O2={readContext:ur,useCallback:function(e,t){return Mr().memoizedState=[e,t===void 0?null:t],e},useContext:ur,useEffect:ew,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rd(4194308,4,Nk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rd(4194308,4,e,t)},useInsertionEffect:function(e,t){return rd(4,2,e,t)},useMemo:function(e,t){var n=Mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=A2.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=Mr();return e={current:e},t.memoizedState=e},useState:X0,useDebugValue:cy,useDeferredValue:function(e){return Mr().memoizedState=e},useTransition:function(){var e=X0(!1),t=e[0];return e=P2.bind(null,e[1]),Mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,s=Mr();if(wt){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=t(),Zt===null)throw Error(Se(349));uo&30||Tk(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,ew(Ak.bind(null,r,i,e),[e]),r.flags|=2048,au(9,Pk.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Mr(),t=Zt.identifierPrefix;if(wt){var n=cs,r=us;n=(r&~(1<<32-Tr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=iu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=T2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},R2={readContext:ur,useCallback:$k,useContext:ur,useEffect:uy,useImperativeHandle:Lk,useInsertionEffect:Ik,useLayoutEffect:Dk,useMemo:Mk,useReducer:Kh,useRef:Rk,useState:function(){return Kh(ou)},useDebugValue:cy,useDeferredValue:function(e){var t=cr();return Fk(t,Vt.memoizedState,e)},useTransition:function(){var e=Kh(ou)[0],t=cr().memoizedState;return[e,t]},useMutableSource:Ek,useSyncExternalStore:Ck,useId:Bk,unstable_isNewReconciler:!1},I2={readContext:ur,useCallback:$k,useContext:ur,useEffect:uy,useImperativeHandle:Lk,useInsertionEffect:Ik,useLayoutEffect:Dk,useMemo:Mk,useReducer:Wh,useRef:Rk,useState:function(){return Wh(ou)},useDebugValue:cy,useDeferredValue:function(e){var t=cr();return Vt===null?t.memoizedState=e:Fk(t,Vt.memoizedState,e)},useTransition:function(){var e=Wh(ou)[0],t=cr().memoizedState;return[e,t]},useMutableSource:Ek,useSyncExternalStore:Ck,useId:Bk,unstable_isNewReconciler:!1};function br(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function im(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mf={isMounted:function(e){return(e=e._reactInternals)?go(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xn(),s=li(e),i=ds(r,s);i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Pr(t,e,s,r),td(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xn(),s=li(e),i=ds(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oi(e,i,s),t!==null&&(Pr(t,e,s,r),td(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xn(),r=li(e),s=ds(n,r);s.tag=2,t!=null&&(s.callback=t),t=oi(e,s,r),t!==null&&(Pr(t,e,r,n),td(t,e,r))}};function tw(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xl(n,r)||!Xl(s,i):!0}function Kk(e,t,n){var r=!1,s=hi,i=t.contextType;return typeof i=="object"&&i!==null?i=ur(i):(s=In(t)?ao:mn.current,r=t.contextTypes,i=(r=r!=null)?Ea(e,s):hi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function nw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mf.enqueueReplaceState(t,t.state,null)}function om(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ny(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ur(i):(i=In(t)?ao:mn.current,s.context=Ea(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(im(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mf.enqueueReplaceState(s,s.state,null),Id(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Aa(e,t){try{var n="",r=t;do n+=aP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Hh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function am(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var D2=typeof WeakMap=="function"?WeakMap:Map;function Wk(e,t,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Md||(Md=!0,ym=r),am(e,t)},n}function Hk(e,t,n){n=ds(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){am(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){am(e,t),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function rw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new D2;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=G2.bind(null,e,t,n),t.then(e,e))}function sw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iw(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ds(-1,1),t.tag=2,oi(n,t,1))),n.lanes|=1),e)}var N2=ks.ReactCurrentOwner,jn=!1;function wn(e,t,n,r){t.child=e===null?xk(t,null,n,r):Ta(t,e.child,n,r)}function ow(e,t,n,r,s){n=n.render;var i=t.ref;return la(t,s),r=ay(e,t,n,r,i,s),n=ly(),e!==null&&!jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(wt&&n&&Qg(t),t.flags|=1,wn(e,t,r,s),t.child)}function aw(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!vy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,qk(e,t,i,r,s)):(e=ad(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xl,n(o,r)&&e.ref===t.ref)return ys(e,t,s)}return t.flags|=1,e=ui(i,r),e.ref=t.ref,e.return=t,t.child=e}function qk(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Xl(i,r)&&e.ref===t.ref)if(jn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(jn=!0);else return t.lanes=e.lanes,ys(e,t,s)}return lm(e,t,n,r,s)}function Gk(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Zo,Bn),Bn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(Zo,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,mt(Zo,Bn),Bn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,mt(Zo,Bn),Bn|=r;return wn(e,t,s,n),t.child}function Qk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lm(e,t,n,r,s){var i=In(n)?ao:mn.current;return i=Ea(t,i),la(t,s),n=ay(e,t,n,r,i,s),r=ly(),e!==null&&!jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ys(e,t,s)):(wt&&r&&Qg(t),t.flags|=1,wn(e,t,n,s),t.child)}function lw(e,t,n,r,s){if(In(n)){var i=!0;Pd(t)}else i=!1;if(la(t,s),t.stateNode===null)sd(e,t),Kk(t,n,r),om(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ur(u):(u=In(n)?ao:mn.current,u=Ea(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&nw(t,o,r,u),Ms=!1;var p=t.memoizedState;o.state=p,Id(t,r,o,s),l=t.memoizedState,a!==r||p!==l||Rn.current||Ms?(typeof c=="function"&&(im(t,n,c,r),l=t.memoizedState),(a=Ms||tw(t,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,kk(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:br(t.type,a),o.props=u,f=t.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=In(n)?ao:mn.current,l=Ea(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&nw(t,o,r,l),Ms=!1,p=t.memoizedState,o.state=p,Id(t,r,o,s);var b=t.memoizedState;a!==f||p!==b||Rn.current||Ms?(typeof m=="function"&&(im(t,n,m,r),b=t.memoizedState),(u=Ms||tw(t,n,u,r,p,b,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return um(e,t,n,r,i,s)}function um(e,t,n,r,s,i){Qk(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&q0(t,n,!1),ys(e,t,i);r=t.stateNode,N2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ta(t,e.child,null,i),t.child=Ta(t,null,a,i)):wn(e,t,a,i),t.memoizedState=r.state,s&&q0(t,n,!0),t.child}function Yk(e){var t=e.stateNode;t.pendingContext?H0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&H0(e,t.context,!1),ry(e,t.containerInfo)}function uw(e,t,n,r,s){return Ca(),Jg(s),t.flags|=256,wn(e,t,n,r),t.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function dm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jk(e,t,n){var r=t.pendingProps,s=_t.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),mt(_t,s&1),e===null)return rm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vf(o,r,0,null),e=so(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=dm(n),t.memoizedState=cm,e):dy(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return L2(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ui(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ui(a,i):(i=so(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?dm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=cm,r}return i=e.child,e=i.sibling,r=ui(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function dy(e,t){return t=vf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rc(e,t,n,r){return r!==null&&Jg(r),Ta(t,e.child,null,n),e=dy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function L2(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Hh(Error(Se(422))),Rc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=vf({mode:"visible",children:r.children},s,0,null),i=so(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ta(t,e.child,null,o),t.child.memoizedState=dm(o),t.memoizedState=cm,i);if(!(t.mode&1))return Rc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Se(419)),r=Hh(i,r,void 0),Rc(e,t,o,r)}if(a=(o&e.childLanes)!==0,jn||a){if(r=Zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gs(e,s),Pr(r,e,s,-1))}return yy(),r=Hh(Error(Se(421))),Rc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Q2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Un=ii(s.nextSibling),zn=t,wt=!0,Er=null,e!==null&&(tr[nr++]=us,tr[nr++]=cs,tr[nr++]=lo,us=e.id,cs=e.overflow,lo=t),t=dy(t,r.children),t.flags|=4096,t)}function cw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sm(e.return,t,n)}function qh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zk(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wn(e,t,r.children,n),r=_t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cw(e,n,t);else if(e.tag===19)cw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mt(_t,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Dd(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Dd(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qh(t,!0,n,null,i);break;case"together":qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ys(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),co|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,n=ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $2(e,t,n){switch(t.tag){case 3:Yk(t),Ca();break;case 5:Sk(t);break;case 1:In(t.type)&&Pd(t);break;case 4:ry(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;mt(Od,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mt(_t,_t.current&1),t.flags|=128,null):n&t.child.childLanes?Jk(e,t,n):(mt(_t,_t.current&1),e=ys(e,t,n),e!==null?e.sibling:null);mt(_t,_t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Zk(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(_t,_t.current),r)break;return null;case 22:case 23:return t.lanes=0,Gk(e,t,n)}return ys(e,t,n)}var Xk,fm,e1,t1;Xk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fm=function(){};e1=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,zi(Hr.current);var i=null;switch(n){case"input":s=Dp(e,s),r=Dp(e,r),i=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),i=[];break;case"textarea":s=$p(e,s),r=$p(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cd)}Fp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gt("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};t1=function(e,t,n,r){n!==r&&(t.flags|=4)};function ul(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function M2(e,t,n){var r=t.pendingProps;switch(Yg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return In(t.type)&&Td(),cn(t),null;case 3:return r=t.stateNode,Pa(),yt(Rn),yt(mn),iy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(bm(Er),Er=null))),fm(e,t),cn(t),null;case 5:sy(t);var s=zi(su.current);if(n=t.type,e!==null&&t.stateNode!=null)e1(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Se(166));return cn(t),null}if(e=zi(Hr.current),jc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vr]=t,r[nu]=i,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<wl.length;s++)gt(wl[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":w0(r,i),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},gt("invalid",r);break;case"textarea":x0(r,i),gt("invalid",r)}Fp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ac(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ac(r.textContent,a,e),s=["children",""+a]):Hl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":xc(r),b0(r,i,!0);break;case"textarea":xc(r),_0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cd)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Vr]=t,e[nu]=r,Xk(e,t,!1,!1),t.stateNode=e;e:{switch(o=Bp(n,r),n){case"dialog":gt("cancel",e),gt("close",e),s=r;break;case"iframe":case"object":case"embed":gt("load",e),s=r;break;case"video":case"audio":for(s=0;s<wl.length;s++)gt(wl[s],e);s=r;break;case"source":gt("error",e),s=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),s=r;break;case"details":gt("toggle",e),s=r;break;case"input":w0(e,r),s=Dp(e,r),gt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),gt("invalid",e);break;case"textarea":x0(e,r),s=$p(e,r),gt("invalid",e);break;default:s=r}Fp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?R_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&j_(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ql(e,l):typeof l=="number"&&ql(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&gt("scroll",e):l!=null&&Ng(e,i,l,o))}switch(n){case"input":xc(e),b0(e,r,!1);break;case"textarea":xc(e),_0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?sa(e,!!r.multiple,i,!1):r.defaultValue!=null&&sa(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Cd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)t1(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Se(166));if(n=zi(su.current),zi(Hr.current),jc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vr]=t,(i=r.nodeValue!==n)&&(e=zn,e!==null))switch(e.tag){case 3:Ac(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ac(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=t,t.stateNode=r}return cn(t),null;case 13:if(yt(_t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&Un!==null&&t.mode&1&&!(t.flags&128))wk(),Ca(),t.flags|=98560,i=!1;else if(i=jc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Se(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Se(317));i[Vr]=t}else Ca(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),i=!1}else Er!==null&&(bm(Er),Er=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_t.current&1?Wt===0&&(Wt=3):yy())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Pa(),fm(e,t),e===null&&eu(t.stateNode.containerInfo),cn(t),null;case 10:return ey(t.type._context),cn(t),null;case 17:return In(t.type)&&Td(),cn(t),null;case 19:if(yt(_t),i=t.memoizedState,i===null)return cn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ul(i,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Dd(e),o!==null){for(t.flags|=128,ul(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mt(_t,_t.current&1|2),t.child}e=e.sibling}i.tail!==null&&Nt()>ja&&(t.flags|=128,r=!0,ul(i,!1),t.lanes=4194304)}else{if(!r)if(e=Dd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ul(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!wt)return cn(t),null}else 2*Nt()-i.renderingStartTime>ja&&n!==1073741824&&(t.flags|=128,r=!0,ul(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Nt(),t.sibling=null,n=_t.current,mt(_t,r?n&1|2:n&1),t):(cn(t),null);case 22:case 23:return gy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function F2(e,t){switch(Yg(t),t.tag){case 1:return In(t.type)&&Td(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pa(),yt(Rn),yt(mn),iy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sy(t),null;case 13:if(yt(_t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));Ca()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(_t),null;case 4:return Pa(),null;case 10:return ey(t.type._context),null;case 22:case 23:return gy(),null;case 24:return null;default:return null}}var Ic=!1,fn=!1,B2=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Jo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function hm(e,t,n){try{n()}catch(r){jt(e,t,r)}}var dw=!1;function U2(e,t){if(Yp=kd,e=ok(),Gg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===s&&(a=o),p===i&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jp={focusedElem:e,selectionRange:n},kd=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,_=b.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:br(t.type,v),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(C){jt(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return b=dw,dw=!1,b}function Rl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&hm(t,n,i)}s=s.next}while(s!==r)}}function gf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function n1(e){var t=e.alternate;t!==null&&(e.alternate=null,n1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vr],delete t[nu],delete t[em],delete t[k2],delete t[S2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r1(e){return e.tag===5||e.tag===3||e.tag===4}function fw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cd));else if(r!==4&&(e=e.child,e!==null))for(mm(e,t,n),e=e.sibling;e!==null;)mm(e,t,n),e=e.sibling}function gm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gm(e,t,n),e=e.sibling;e!==null;)gm(e,t,n),e=e.sibling}var Xt=null,kr=!1;function Rs(e,t,n){for(n=n.child;n!==null;)s1(e,t,n),n=n.sibling}function s1(e,t,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:fn||Jo(n,t);case 6:var r=Xt,s=kr;Xt=null,Rs(e,t,n),Xt=r,kr=s,Xt!==null&&(kr?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(kr?(e=Xt,n=n.stateNode,e.nodeType===8?Bh(e.parentNode,n):e.nodeType===1&&Bh(e,n),Jl(e)):Bh(Xt,n.stateNode));break;case 4:r=Xt,s=kr,Xt=n.stateNode.containerInfo,kr=!0,Rs(e,t,n),Xt=r,kr=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hm(n,t,o),s=s.next}while(s!==r)}Rs(e,t,n);break;case 1:if(!fn&&(Jo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,t,a)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,Rs(e,t,n),fn=r):Rs(e,t,n);break;default:Rs(e,t,n)}}function hw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new B2),t.forEach(function(r){var s=Y2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,kr=!1;break e;case 3:Xt=a.stateNode.containerInfo,kr=!0;break e;case 4:Xt=a.stateNode.containerInfo,kr=!0;break e}a=a.return}if(Xt===null)throw Error(Se(160));s1(i,o,s),Xt=null,kr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){jt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)i1(t,e),t=t.sibling}function i1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gr(t,e),Nr(e),r&4){try{Rl(3,e,e.return),gf(3,e)}catch(v){jt(e,e.return,v)}try{Rl(5,e,e.return)}catch(v){jt(e,e.return,v)}}break;case 1:gr(t,e),Nr(e),r&512&&n!==null&&Jo(n,n.return);break;case 5:if(gr(t,e),Nr(e),r&512&&n!==null&&Jo(n,n.return),e.flags&32){var s=e.stateNode;try{ql(s,"")}catch(v){jt(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&T_(s,i),Bp(a,o);var u=Bp(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?R_(s,f):c==="dangerouslySetInnerHTML"?j_(s,f):c==="children"?ql(s,f):Ng(s,c,f,u)}switch(a){case"input":Np(s,i);break;case"textarea":P_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?sa(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?sa(s,!!i.multiple,i.defaultValue,!0):sa(s,!!i.multiple,i.multiple?[]:"",!1))}s[nu]=i}catch(v){jt(e,e.return,v)}}break;case 6:if(gr(t,e),Nr(e),r&4){if(e.stateNode===null)throw Error(Se(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){jt(e,e.return,v)}}break;case 3:if(gr(t,e),Nr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jl(t.containerInfo)}catch(v){jt(e,e.return,v)}break;case 4:gr(t,e),Nr(e);break;case 13:gr(t,e),Nr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(py=Nt())),r&4&&hw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(u=fn)||c,gr(t,e),fn=u):gr(t,e),Nr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Be=e,c=e.child;c!==null;){for(f=Be=c;Be!==null;){switch(p=Be,m=p.child,p.tag){case 0:case 11:case 14:case 15:Rl(4,p,p.return);break;case 1:Jo(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){jt(r,n,v)}}break;case 5:Jo(p,p.return);break;case 22:if(p.memoizedState!==null){mw(f);continue}}m!==null?(m.return=p,Be=m):mw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=O_("display",o))}catch(v){jt(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gr(t,e),Nr(e),r&4&&hw(e);break;case 21:break;default:gr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(r1(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ql(s,""),r.flags&=-33);var i=fw(e);gm(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fw(e);mm(e,a,o);break;default:throw Error(Se(161))}}catch(l){jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function z2(e,t,n){Be=e,o1(e)}function o1(e,t,n){for(var r=(e.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ic;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||fn;a=Ic;var u=fn;if(Ic=o,(fn=l)&&!u)for(Be=s;Be!==null;)o=Be,l=o.child,o.tag===22&&o.memoizedState!==null?gw(s):l!==null?(l.return=o,Be=l):gw(s);for(;i!==null;)Be=i,o1(i),i=i.sibling;Be=s,Ic=a,fn=u}pw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):pw(e)}}function pw(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||gf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:br(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Z0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Z0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Jl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}fn||t.flags&512&&pm(t)}catch(p){jt(t,t.return,p)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function mw(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function gw(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gf(4,t)}catch(l){jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){jt(t,s,l)}}var i=t.return;try{pm(t)}catch(l){jt(t,i,l)}break;case 5:var o=t.return;try{pm(t)}catch(l){jt(t,o,l)}}}catch(l){jt(t,t.return,l)}if(t===e){Be=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Be=a;break}Be=t.return}}var V2=Math.ceil,$d=ks.ReactCurrentDispatcher,fy=ks.ReactCurrentOwner,ar=ks.ReactCurrentBatchConfig,lt=0,Zt=null,Bt=null,nn=0,Bn=0,Zo=yi(0),Wt=0,lu=null,co=0,yf=0,hy=0,Il=null,Pn=null,py=0,ja=1/0,rs=null,Md=!1,ym=null,ai=null,Dc=!1,Xs=null,Fd=0,Dl=0,vm=null,id=-1,od=0;function xn(){return lt&6?Nt():id!==-1?id:id=Nt()}function li(e){return e.mode&1?lt&2&&nn!==0?nn&-nn:C2.transition!==null?(od===0&&(od=K_()),od):(e=dt,e!==0||(e=window.event,e=e===void 0?16:J_(e.type)),e):1}function Pr(e,t,n,r){if(50<Dl)throw Dl=0,vm=null,Error(Se(185));Tu(e,n,r),(!(lt&2)||e!==Zt)&&(e===Zt&&(!(lt&2)&&(yf|=n),Wt===4&&Bs(e,nn)),Dn(e,r),n===1&&lt===0&&!(t.mode&1)&&(ja=Nt()+500,hf&&vi()))}function Dn(e,t){var n=e.callbackNode;CP(e,t);var r=_d(e,e===Zt?nn:0);if(r===0)n!==null&&E0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&E0(n),t===1)e.tag===0?E2(yw.bind(null,e)):gk(yw.bind(null,e)),x2(function(){!(lt&6)&&vi()}),n=null;else{switch(W_(r)){case 1:n=Bg;break;case 4:n=z_;break;case 16:n=xd;break;case 536870912:n=V_;break;default:n=xd}n=p1(n,a1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function a1(e,t){if(id=-1,od=0,lt&6)throw Error(Se(327));var n=e.callbackNode;if(ua()&&e.callbackNode!==n)return null;var r=_d(e,e===Zt?nn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Bd(e,r);else{t=r;var s=lt;lt|=2;var i=u1();(Zt!==e||nn!==t)&&(rs=null,ja=Nt()+500,ro(e,t));do try{H2();break}catch(a){l1(e,a)}while(!0);Xg(),$d.current=i,lt=s,Bt!==null?t=0:(Zt=null,nn=0,t=Wt)}if(t!==0){if(t===2&&(s=Wp(e),s!==0&&(r=s,t=wm(e,s))),t===1)throw n=lu,ro(e,0),Bs(e,r),Dn(e,Nt()),n;if(t===6)Bs(e,r);else{if(s=e.current.alternate,!(r&30)&&!K2(s)&&(t=Bd(e,r),t===2&&(i=Wp(e),i!==0&&(r=i,t=wm(e,i))),t===1))throw n=lu,ro(e,0),Bs(e,r),Dn(e,Nt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Se(345));case 2:Ii(e,Pn,rs);break;case 3:if(Bs(e,r),(r&130023424)===r&&(t=py+500-Nt(),10<t)){if(_d(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){xn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Xp(Ii.bind(null,e,Pn,rs),t);break}Ii(e,Pn,rs);break;case 4:if(Bs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Tr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V2(r/1960))-r,10<r){e.timeoutHandle=Xp(Ii.bind(null,e,Pn,rs),r);break}Ii(e,Pn,rs);break;case 5:Ii(e,Pn,rs);break;default:throw Error(Se(329))}}}return Dn(e,Nt()),e.callbackNode===n?a1.bind(null,e):null}function wm(e,t){var n=Il;return e.current.memoizedState.isDehydrated&&(ro(e,t).flags|=256),e=Bd(e,t),e!==2&&(t=Pn,Pn=n,t!==null&&bm(t)),e}function bm(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function K2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ar(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~hy,t&=~yf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tr(t),r=1<<n;e[n]=-1,t&=~r}}function yw(e){if(lt&6)throw Error(Se(327));ua();var t=_d(e,0);if(!(t&1))return Dn(e,Nt()),null;var n=Bd(e,t);if(e.tag!==0&&n===2){var r=Wp(e);r!==0&&(t=r,n=wm(e,r))}if(n===1)throw n=lu,ro(e,0),Bs(e,t),Dn(e,Nt()),n;if(n===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ii(e,Pn,rs),Dn(e,Nt()),null}function my(e,t){var n=lt;lt|=1;try{return e(t)}finally{lt=n,lt===0&&(ja=Nt()+500,hf&&vi())}}function fo(e){Xs!==null&&Xs.tag===0&&!(lt&6)&&ua();var t=lt;lt|=1;var n=ar.transition,r=dt;try{if(ar.transition=null,dt=1,e)return e()}finally{dt=r,ar.transition=n,lt=t,!(lt&6)&&vi()}}function gy(){Bn=Zo.current,yt(Zo)}function ro(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,b2(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(Yg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Td();break;case 3:Pa(),yt(Rn),yt(mn),iy();break;case 5:sy(r);break;case 4:Pa();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:ey(r.type._context);break;case 22:case 23:gy()}n=n.return}if(Zt=e,Bt=e=ui(e.current,null),nn=Bn=t,Wt=0,lu=null,hy=yf=co=0,Pn=Il=null,Ui!==null){for(t=0;t<Ui.length;t++)if(n=Ui[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ui=null}return e}function l1(e,t){do{var n=Bt;try{if(Xg(),nd.current=Ld,Nd){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nd=!1}if(uo=0,Yt=Vt=Et=null,Ol=!1,iu=0,fy.current=null,n===null||n.return===null){Wt=1,lu=t,Bt=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=sw(o);if(m!==null){m.flags&=-257,iw(m,o,a,i,t),m.mode&1&&rw(i,u,t),t=m,l=u;var b=t.updateQueue;if(b===null){var v=new Set;v.add(l),t.updateQueue=v}else b.add(l);break e}else{if(!(t&1)){rw(i,u,t),yy();break e}l=Error(Se(426))}}else if(wt&&a.mode&1){var _=sw(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),iw(_,o,a,i,t),Jg(Aa(l,a));break e}}i=l=Aa(l,a),Wt!==4&&(Wt=2),Il===null?Il=[i]:Il.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Wk(i,l,t);J0(i,g);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ai===null||!ai.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Hk(i,a,t);J0(i,C);break e}}i=i.return}while(i!==null)}d1(n)}catch(O){t=O,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function u1(){var e=$d.current;return $d.current=Ld,e===null?Ld:e}function yy(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Zt===null||!(co&268435455)&&!(yf&268435455)||Bs(Zt,nn)}function Bd(e,t){var n=lt;lt|=2;var r=u1();(Zt!==e||nn!==t)&&(rs=null,ro(e,t));do try{W2();break}catch(s){l1(e,s)}while(!0);if(Xg(),lt=n,$d.current=r,Bt!==null)throw Error(Se(261));return Zt=null,nn=0,Wt}function W2(){for(;Bt!==null;)c1(Bt)}function H2(){for(;Bt!==null&&!yP();)c1(Bt)}function c1(e){var t=h1(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?d1(e):Bt=t,fy.current=null}function d1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=F2(n,t),n!==null){n.flags&=32767,Bt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,Bt=null;return}}else if(n=M2(n,t,Bn),n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Wt===0&&(Wt=5)}function Ii(e,t,n){var r=dt,s=ar.transition;try{ar.transition=null,dt=1,q2(e,t,n,r)}finally{ar.transition=s,dt=r}return null}function q2(e,t,n,r){do ua();while(Xs!==null);if(lt&6)throw Error(Se(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(TP(e,i),e===Zt&&(Bt=Zt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dc||(Dc=!0,p1(xd,function(){return ua(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var o=dt;dt=1;var a=lt;lt|=4,fy.current=null,U2(e,n),i1(n,e),h2(Jp),kd=!!Yp,Jp=Yp=null,e.current=n,z2(n),vP(),lt=a,dt=o,ar.transition=i}else e.current=n;if(Dc&&(Dc=!1,Xs=e,Fd=s),i=e.pendingLanes,i===0&&(ai=null),xP(n.stateNode),Dn(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Md)throw Md=!1,e=ym,ym=null,e;return Fd&1&&e.tag!==0&&ua(),i=e.pendingLanes,i&1?e===vm?Dl++:(Dl=0,vm=e):Dl=0,vi(),null}function ua(){if(Xs!==null){var e=W_(Fd),t=ar.transition,n=dt;try{if(ar.transition=null,dt=16>e?16:e,Xs===null)var r=!1;else{if(e=Xs,Xs=null,Fd=0,lt&6)throw Error(Se(331));var s=lt;for(lt|=4,Be=e.current;Be!==null;){var i=Be,o=i.child;if(Be.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Be=u;Be!==null;){var c=Be;switch(c.tag){case 0:case 11:case 15:Rl(8,c,i)}var f=c.child;if(f!==null)f.return=c,Be=f;else for(;Be!==null;){c=Be;var p=c.sibling,m=c.return;if(n1(c),c===u){Be=null;break}if(p!==null){p.return=m,Be=p;break}Be=m}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}Be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Be=o;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rl(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Be=g;break e}Be=i.return}}var y=e.current;for(Be=y;Be!==null;){o=Be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Be=w;else e:for(o=y;Be!==null;){if(a=Be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gf(9,a)}}catch(O){jt(a,a.return,O)}if(a===o){Be=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Be=C;break e}Be=a.return}}if(lt=s,vi(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(lf,e)}catch{}r=!0}return r}finally{dt=n,ar.transition=t}}return!1}function vw(e,t,n){t=Aa(n,t),t=Wk(e,t,1),e=oi(e,t,1),t=xn(),e!==null&&(Tu(e,1,t),Dn(e,t))}function jt(e,t,n){if(e.tag===3)vw(e,e,n);else for(;t!==null;){if(t.tag===3){vw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){e=Aa(n,e),e=Hk(t,e,1),t=oi(t,e,1),e=xn(),t!==null&&(Tu(t,1,e),Dn(t,e));break}}t=t.return}}function G2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xn(),e.pingedLanes|=e.suspendedLanes&n,Zt===e&&(nn&n)===n&&(Wt===4||Wt===3&&(nn&130023424)===nn&&500>Nt()-py?ro(e,0):hy|=n),Dn(e,t)}function f1(e,t){t===0&&(e.mode&1?(t=Sc,Sc<<=1,!(Sc&130023424)&&(Sc=4194304)):t=1);var n=xn();e=gs(e,t),e!==null&&(Tu(e,t,n),Dn(e,n))}function Q2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),f1(e,n)}function Y2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(t),f1(e,n)}var h1;h1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rn.current)jn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return jn=!1,$2(e,t,n);jn=!!(e.flags&131072)}else jn=!1,wt&&t.flags&1048576&&yk(t,jd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sd(e,t),e=t.pendingProps;var s=Ea(t,mn.current);la(t,n),s=ay(null,t,r,e,s,n);var i=ly();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(i=!0,Pd(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ny(t),s.updater=mf,t.stateNode=s,s._reactInternals=t,om(t,r,e,n),t=um(null,t,r,!0,i,n)):(t.tag=0,wt&&i&&Qg(t),wn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Z2(r),e=br(r,e),s){case 0:t=lm(null,t,r,e,n);break e;case 1:t=lw(null,t,r,e,n);break e;case 11:t=ow(null,t,r,e,n);break e;case 14:t=aw(null,t,r,br(r.type,e),n);break e}throw Error(Se(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),lm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),lw(e,t,r,s,n);case 3:e:{if(Yk(t),e===null)throw Error(Se(387));r=t.pendingProps,i=t.memoizedState,s=i.element,kk(e,t),Id(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Aa(Error(Se(423)),t),t=uw(e,t,r,n,s);break e}else if(r!==s){s=Aa(Error(Se(424)),t),t=uw(e,t,r,n,s);break e}else for(Un=ii(t.stateNode.containerInfo.firstChild),zn=t,wt=!0,Er=null,n=xk(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===s){t=ys(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return Sk(t),e===null&&rm(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Zp(r,s)?o=null:i!==null&&Zp(r,i)&&(t.flags|=32),Qk(e,t),wn(e,t,o,n),t.child;case 6:return e===null&&rm(t),null;case 13:return Jk(e,t,n);case 4:return ry(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ta(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),ow(e,t,r,s,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,mt(Od,r._currentValue),r._currentValue=o,i!==null)if(Ar(i.value,o)){if(i.children===s.children&&!Rn.current){t=ys(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ds(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),sm(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sm(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,la(t,n),s=ur(s),r=r(s),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,s=br(r,t.pendingProps),s=br(r.type,s),aw(e,t,r,s,n);case 15:return qk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:br(r,s),sd(e,t),t.tag=1,In(r)?(e=!0,Pd(t)):e=!1,la(t,n),Kk(t,r,s),om(t,r,s,n),um(null,t,r,!0,e,n);case 19:return Zk(e,t,n);case 22:return Gk(e,t,n)}throw Error(Se(156,t.tag))};function p1(e,t){return U_(e,t)}function J2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,n,r){return new J2(e,t,n,r)}function vy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Z2(e){if(typeof e=="function")return vy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$g)return 11;if(e===Mg)return 14}return 2}function ui(e,t){var n=e.alternate;return n===null?(n=ir(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ad(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")vy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case zo:return so(n.children,s,i,t);case Lg:o=8,s|=8;break;case jp:return e=ir(12,n,t,s|2),e.elementType=jp,e.lanes=i,e;case Op:return e=ir(13,n,t,s),e.elementType=Op,e.lanes=i,e;case Rp:return e=ir(19,n,t,s),e.elementType=Rp,e.lanes=i,e;case S_:return vf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case __:o=10;break e;case k_:o=9;break e;case $g:o=11;break e;case Mg:o=14;break e;case $s:o=16,r=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=ir(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function so(e,t,n,r){return e=ir(7,e,r,t),e.lanes=n,e}function vf(e,t,n,r){return e=ir(22,e,r,t),e.elementType=S_,e.lanes=n,e.stateNode={isHidden:!1},e}function Gh(e,t,n){return e=ir(6,e,null,t),e.lanes=n,e}function Qh(e,t,n){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function X2(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wy(e,t,n,r,s,i,o,a,l){return e=new X2(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ir(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ny(i),e}function eA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function m1(e){if(!e)return hi;e=e._reactInternals;e:{if(go(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var n=e.type;if(In(n))return mk(e,n,t)}return t}function g1(e,t,n,r,s,i,o,a,l){return e=wy(n,r,!0,e,s,i,o,a,l),e.context=m1(null),n=e.current,r=xn(),s=li(n),i=ds(r,s),i.callback=t??null,oi(n,i,s),e.current.lanes=s,Tu(e,s,r),Dn(e,r),e}function wf(e,t,n,r){var s=t.current,i=xn(),o=li(s);return n=m1(n),t.context===null?t.context=n:t.pendingContext=n,t=ds(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=oi(s,t,o),e!==null&&(Pr(e,s,o,i),td(e,s,o)),o}function Ud(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ww(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function by(e,t){ww(e,t),(e=e.alternate)&&ww(e,t)}function tA(){return null}var y1=typeof reportError=="function"?reportError:function(e){console.error(e)};function xy(e){this._internalRoot=e}bf.prototype.render=xy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));wf(e,t,null,null)};bf.prototype.unmount=xy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fo(function(){wf(null,e,null,null)}),t[ms]=null}};function bf(e){this._internalRoot=e}bf.prototype.unstable_scheduleHydration=function(e){if(e){var t=G_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fs.length&&t!==0&&t<Fs[n].priority;n++);Fs.splice(n,0,e),n===0&&Y_(e)}};function _y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bw(){}function nA(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ud(o);i.call(u)}}var o=g1(t,r,e,0,null,!1,!1,"",bw);return e._reactRootContainer=o,e[ms]=o.current,eu(e.nodeType===8?e.parentNode:e),fo(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Ud(l);a.call(u)}}var l=wy(e,0,!1,null,null,!1,!1,"",bw);return e._reactRootContainer=l,e[ms]=l.current,eu(e.nodeType===8?e.parentNode:e),fo(function(){wf(t,l,n,r)}),l}function _f(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ud(o);a.call(l)}}wf(t,o,e,s)}else o=nA(n,t,e,s,r);return Ud(o)}H_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vl(t.pendingLanes);n!==0&&(Ug(t,n|1),Dn(t,Nt()),!(lt&6)&&(ja=Nt()+500,vi()))}break;case 13:fo(function(){var r=gs(e,1);if(r!==null){var s=xn();Pr(r,e,1,s)}}),by(e,1)}};zg=function(e){if(e.tag===13){var t=gs(e,134217728);if(t!==null){var n=xn();Pr(t,e,134217728,n)}by(e,134217728)}};q_=function(e){if(e.tag===13){var t=li(e),n=gs(e,t);if(n!==null){var r=xn();Pr(n,e,t,r)}by(e,t)}};G_=function(){return dt};Q_=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};zp=function(e,t,n){switch(t){case"input":if(Np(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ff(r);if(!s)throw Error(Se(90));C_(r),Np(r,s)}}}break;case"textarea":P_(e,n);break;case"select":t=n.value,t!=null&&sa(e,!!n.multiple,t,!1)}};N_=my;L_=fo;var rA={usingClientEntryPoint:!1,Events:[Au,Ho,ff,I_,D_,my]},cl={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sA={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F_(e),e===null?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||tA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{lf=Nc.inject(sA),Wr=Nc}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rA;Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_y(t))throw Error(Se(200));return eA(e,t,null,n)};Wn.createRoot=function(e,t){if(!_y(e))throw Error(Se(299));var n=!1,r="",s=y1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=wy(e,1,!1,null,null,n,!1,r,s),e[ms]=t.current,eu(e.nodeType===8?e.parentNode:e),new xy(t)};Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=F_(t),e=e===null?null:e.stateNode,e};Wn.flushSync=function(e){return fo(e)};Wn.hydrate=function(e,t,n){if(!xf(t))throw Error(Se(200));return _f(null,e,t,!0,n)};Wn.hydrateRoot=function(e,t,n){if(!_y(e))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=y1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=g1(t,null,e,1,n??null,s,!1,i,o),e[ms]=t.current,eu(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new bf(t)};Wn.render=function(e,t,n){if(!xf(t))throw Error(Se(200));return _f(null,e,t,!1,n)};Wn.unmountComponentAtNode=function(e){if(!xf(e))throw Error(Se(40));return e._reactRootContainer?(fo(function(){_f(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Wn.unstable_batchedUpdates=my;Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xf(n))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return _f(e,t,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function v1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v1)}catch(e){console.error(e)}}v1(),v_.exports=Wn;var ky=v_.exports;const iA=of(ky);var xw=ky;Pp.createRoot=xw.createRoot,Pp.hydrateRoot=xw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _w="popstate";function oA(e={}){function t(s,i){let{pathname:o="/",search:a="",hash:l=""}=yo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),xm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:uu(i))}function r(s,i){Kn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return lA(t,n,r,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aA(){return Math.random().toString(36).substring(2,10)}function kw(e,t){return{usr:e.state,key:e.key,idx:t}}function xm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yo(t):t,state:n,key:t&&t.key||r||aA()}}function uu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function yo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function lA(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let _=c(),g=_==null?null:_-u;u=_,l&&l({action:a,location:v.location,delta:g})}function p(_,g){a="PUSH";let y=xm(v.location,_,g);n&&n(y,_),u=c()+1;let w=kw(y,u),C=v.createHref(y);try{o.pushState(w,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function m(_,g){a="REPLACE";let y=xm(v.location,_,g);n&&n(y,_),u=c();let w=kw(y,u),C=v.createHref(y);o.replaceState(w,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function b(_){return uA(_)}let v={get action(){return a},get location(){return e(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_w,f),l=_,()=>{s.removeEventListener(_w,f),l=null}},createHref(_){return t(s,_)},createURL:b,encodeLocation(_){let g=b(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return v}function uA(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:uu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function w1(e,t,n="/"){return cA(e,t,n,!1)}function cA(e,t,n,r){let s=typeof t=="string"?yo(t):t,i=vs(s.pathname||"/",n);if(i==null)return null;let o=b1(e);dA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=_A(i);a=bA(o[l],u,r)}return a}function b1(e,t=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;xt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let f=fs([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),b1(o.children,t,p,f,l)),!(o.path==null&&!o.index)&&t.push({path:f,score:vA(f,o.index),routesMeta:p})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of x1(o.path))i(o,a,!0,u)}),t}function x1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=x1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function dA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var fA=/^:[\w-]+$/,hA=3,pA=2,mA=1,gA=10,yA=-2,Sw=e=>e==="*";function vA(e,t){let n=e.split("/"),r=n.length;return n.some(Sw)&&(r+=yA),t&&(r+=pA),n.filter(s=>!Sw(s)).reduce((s,i)=>s+(fA.test(i)?hA:i===""?mA:gA),r)}function wA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function bA(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=zd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=zd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:fs([i,f.pathname]),pathnameBase:CA(fs([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=fs([i,f.pathnameBase]))}return o}function zd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xA(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},p)=>{if(c==="*"){let b=a[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function xA(e,t=!1,n=!0){Kn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function _A(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function kA(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?yo(e):e;return{pathname:n?n.startsWith("/")?n:SA(n,t):t,search:TA(r),hash:PA(s)}}function SA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function EA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Sy(e){let t=EA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Ey(e,t,n,r=!1){let s;typeof e=="string"?s=yo(e):(s={...e},xt(!s.pathname||!s.pathname.includes("?"),Yh("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Yh("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Yh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=kA(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var fs=e=>e.join("/").replace(/\/\/+/g,"/"),CA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),TA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,PA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function AA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var _1=["POST","PUT","PATCH","DELETE"];new Set(_1);var jA=["GET",..._1];new Set(jA);var Ma=E.createContext(null);Ma.displayName="DataRouter";var kf=E.createContext(null);kf.displayName="DataRouterState";E.createContext(!1);var k1=E.createContext({isTransitioning:!1});k1.displayName="ViewTransition";var OA=E.createContext(new Map);OA.displayName="Fetchers";var RA=E.createContext(null);RA.displayName="Await";var jr=E.createContext(null);jr.displayName="Navigation";var Ou=E.createContext(null);Ou.displayName="Location";var Or=E.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var Cy=E.createContext(null);Cy.displayName="RouteError";function IA(e,{relative:t}={}){xt(Fa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=E.useContext(jr),{hash:s,pathname:i,search:o}=Iu(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:fs([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Fa(){return E.useContext(Ou)!=null}function dr(){return xt(Fa(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ou).location}var S1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function E1(e){E.useContext(jr).static||E.useLayoutEffect(e)}function fr(){let{isDataRoute:e}=E.useContext(Or);return e?HA():DA()}function DA(){xt(Fa(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext(Ma),{basename:t,navigator:n}=E.useContext(jr),{matches:r}=E.useContext(Or),{pathname:s}=dr(),i=JSON.stringify(Sy(r)),o=E.useRef(!1);return E1(()=>{o.current=!0}),E.useCallback((l,u={})=>{if(Kn(o.current,S1),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Ey(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:fs([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}E.createContext(null);function Ru(){let{matches:e}=E.useContext(Or),t=e[e.length-1];return t?t.params:{}}function Iu(e,{relative:t}={}){let{matches:n}=E.useContext(Or),{pathname:r}=dr(),s=JSON.stringify(Sy(n));return E.useMemo(()=>Ey(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function NA(e,t){return C1(e,t)}function C1(e,t,n,r,s){var y;xt(Fa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=E.useContext(jr),{matches:o}=E.useContext(Or),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let w=f&&f.path||"";T1(u,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=dr(),m;if(t){let w=typeof t=="string"?yo(t):t;xt(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=p;let b=m.pathname||"/",v=b;if(c!=="/"){let w=c.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=w1(e,{pathname:v});Kn(f||_!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Kn(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=BA(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:fs([c,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:fs([c,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,s);return t&&g?E.createElement(Ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function LA(){let e=WA(),t=AA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:i},"ErrorBoundary")," or"," ",E.createElement("code",{style:i},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:s},n):null,o)}var $A=E.createElement(LA,null),MA=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?E.createElement(Or.Provider,{value:this.props.routeContext},E.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FA({routeContext:e,match:t,children:n}){let r=E.useContext(Ma);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Or.Provider,{value:e},n)}function BA(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);xt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:f,errors:p}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,f)=>{let p,m=!1,b=null,v=null;n&&(p=o&&c.route.id?o[c.route.id]:void 0,b=c.route.errorElement||$A,a&&(l<0&&f===0?(T1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=c.route.hydrateFallbackElement||null)));let _=t.concat(i.slice(0,f+1)),g=()=>{let y;return p?y=b:m?y=v:c.route.Component?y=E.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,E.createElement(FA,{match:c,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?E.createElement(MA,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:g(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:r}):g()},null)}function Ty(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UA(e){let t=E.useContext(Ma);return xt(t,Ty(e)),t}function zA(e){let t=E.useContext(kf);return xt(t,Ty(e)),t}function VA(e){let t=E.useContext(Or);return xt(t,Ty(e)),t}function Py(e){let t=VA(e),n=t.matches[t.matches.length-1];return xt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function KA(){return Py("useRouteId")}function WA(){var r;let e=E.useContext(Cy),t=zA("useRouteError"),n=Py("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function HA(){let{router:e}=UA("useNavigate"),t=Py("useNavigate"),n=E.useRef(!1);return E1(()=>{n.current=!0}),E.useCallback(async(s,i={})=>{Kn(n.current,S1),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Ew={};function T1(e,t,n){!t&&!Ew[e]&&(Ew[e]=!0,Kn(!1,n))}E.memo(qA);function qA({routes:e,future:t,state:n,unstable_onError:r}){return C1(e,void 0,n,r,t)}function P1({to:e,replace:t,state:n,relative:r}){xt(Fa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(jr);Kn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=E.useContext(Or),{pathname:o}=dr(),a=fr(),l=Ey(e,Sy(i),o,r==="path"),u=JSON.stringify(l);return E.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function dn(e){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){xt(!Fa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=yo(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:p="default"}=n,m=E.useMemo(()=>{let b=vs(l,o);return b==null?null:{location:{pathname:b,search:u,hash:c,state:f,key:p},navigationType:r}},[o,l,u,c,f,p,r]);return Kn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:E.createElement(jr.Provider,{value:a},E.createElement(Ou.Provider,{children:t,value:m}))}function QA({children:e,location:t}){return NA(_m(e),t)}function _m(e,t=[]){let n=[];return E.Children.forEach(e,(r,s)=>{if(!E.isValidElement(r))return;let i=[...t,s];if(r.type===E.Fragment){n.push.apply(n,_m(r.props.children,i));return}xt(r.type===dn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_m(r.props.children,i)),n.push(o)}),n}var ld="get",ud="application/x-www-form-urlencoded";function Sf(e){return e!=null&&typeof e.tagName=="string"}function YA(e){return Sf(e)&&e.tagName.toLowerCase()==="button"}function JA(e){return Sf(e)&&e.tagName.toLowerCase()==="form"}function ZA(e){return Sf(e)&&e.tagName.toLowerCase()==="input"}function XA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ej(e,t){return e.button===0&&(!t||t==="_self")&&!XA(e)}function km(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function tj(e,t){let n=km(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Lc=null;function nj(){if(Lc===null)try{new FormData(document.createElement("form"),0),Lc=!1}catch{Lc=!0}return Lc}var rj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jh(e){return e!=null&&!rj.has(e)?(Kn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ud}"`),null):e}function sj(e,t){let n,r,s,i,o;if(JA(e)){let a=e.getAttribute("action");r=a?vs(a,t):null,n=e.getAttribute("method")||ld,s=Jh(e.getAttribute("enctype"))||ud,i=new FormData(e)}else if(YA(e)||ZA(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?vs(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ld,s=Jh(e.getAttribute("formenctype"))||Jh(a.getAttribute("enctype"))||ud,i=new FormData(a,e),!nj()){let{name:u,type:c,value:f}=e;if(c==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,f)}}else{if(Sf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ld,r=null,s=ud,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ay(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ij(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&vs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function oj(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aj(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function lj(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await oj(i,n);return o.links?o.links():[]}return[]}));return fj(r.flat(1).filter(aj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Cw(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function uj(e,t,{includeHydrateFallback:n}={}){return cj(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function cj(e){return[...new Set(e)]}function dj(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function fj(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(dj(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function A1(){let e=E.useContext(Ma);return Ay(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function hj(){let e=E.useContext(kf);return Ay(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var jy=E.createContext(void 0);jy.displayName="FrameworkContext";function j1(){let e=E.useContext(jy);return Ay(e,"You must render this element inside a <HydratedRouter> element"),e}function pj(e,t){let n=E.useContext(jy),[r,s]=E.useState(!1),[i,o]=E.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,p=E.useRef(null);E.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},_=new IntersectionObserver(v,{threshold:.5});return p.current&&_.observe(p.current),()=>{_.disconnect()}}},[e]),E.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{s(!0)},b=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:dl(a,m),onBlur:dl(l,b),onMouseEnter:dl(u,m),onMouseLeave:dl(c,b),onTouchStart:dl(f,m)}]:[!1,p,{}]}function dl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mj({page:e,...t}){let{router:n}=A1(),r=E.useMemo(()=>w1(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?E.createElement(yj,{page:e,matches:r,...t}):null}function gj(e){let{manifest:t,routeModules:n}=j1(),[r,s]=E.useState([]);return E.useEffect(()=>{let i=!1;return lj(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function yj({page:e,matches:t,...n}){let r=dr(),{manifest:s,routeModules:i}=j1(),{basename:o}=A1(),{loaderData:a,matches:l}=hj(),u=E.useMemo(()=>Cw(e,t,l,s,r,"data"),[e,t,l,s,r]),c=E.useMemo(()=>Cw(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=E.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let b=new Set,v=!1;if(t.forEach(g=>{var w;let y=s.routes[g.route.id];!y||!y.hasLoader||(!u.some(C=>C.route.id===g.route.id)&&g.route.id in a&&((w=i[g.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?v=!0:b.add(g.route.id))}),b.size===0)return[];let _=ij(e,o,"data");return v&&b.size>0&&_.searchParams.set("_routes",t.filter(g=>b.has(g.route.id)).map(g=>g.route.id).join(",")),[_.pathname+_.search]},[o,a,r,s,u,t,e,i]),p=E.useMemo(()=>uj(c,s),[c,s]),m=gj(c);return E.createElement(E.Fragment,null,f.map(b=>E.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),p.map(b=>E.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),m.map(({key:b,link:v})=>E.createElement("link",{key:b,nonce:n.nonce,...v})))}function vj(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var O1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{O1&&(window.__reactRouterVersion="7.9.3")}catch{}function wj({basename:e,children:t,window:n}){let r=E.useRef();r.current==null&&(r.current=oA({window:n,v5Compat:!0}));let s=r.current,[i,o]=E.useState({action:s.action,location:s.location}),a=E.useCallback(l=>{E.startTransition(()=>o(l))},[o]);return E.useLayoutEffect(()=>s.listen(a),[s,a]),E.createElement(GA,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var R1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rr=E.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...p},m){let{basename:b}=E.useContext(jr),v=typeof u=="string"&&R1.test(u),_,g=!1;if(typeof u=="string"&&v&&(_=u,O1))try{let F=new URL(window.location.href),V=u.startsWith("//")?new URL(F.protocol+u):new URL(u),he=vs(V.pathname,b);V.origin===F.origin&&he!=null?u=he+V.search+V.hash:g=!0}catch{Kn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=IA(u,{relative:s}),[w,C,O]=pj(r,p),I=kj(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function R(F){t&&t(F),F.defaultPrevented||I(F)}let $=E.createElement("a",{...p,...O,href:_||y,onClick:g||i?t:R,ref:vj(m,C),target:l,"data-discover":!v&&n==="render"?"true":void 0});return w&&!v?E.createElement(E.Fragment,null,$,E.createElement(mj,{page:y})):$});rr.displayName="Link";var bj=E.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let f=Iu(o,{relative:u.relative}),p=dr(),m=E.useContext(kf),{navigator:b,basename:v}=E.useContext(jr),_=m!=null&&Aj(f)&&a===!0,g=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,y=p.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,g=g.toLowerCase()),w&&v&&(w=vs(w,v)||w);const C=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let O=y===g||!s&&y.startsWith(g)&&y.charAt(C)==="/",I=w!=null&&(w===g||!s&&w.startsWith(g)&&w.charAt(g.length)==="/"),R={isActive:O,isPending:I,isTransitioning:_},$=O?t:void 0,F;typeof r=="function"?F=r(R):F=[r,O?"active":null,I?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(R):i;return E.createElement(rr,{...u,"aria-current":$,className:F,ref:c,style:V,to:o,viewTransition:a},typeof l=="function"?l(R):l)});bj.displayName="NavLink";var xj=E.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=ld,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...p},m)=>{let b=Tj(),v=Pj(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&R1.test(a),y=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,O=(C==null?void 0:C.getAttribute("formmethod"))||o;b(C||w.currentTarget,{fetcherKey:t,method:O,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:f})};return E.createElement("form",{ref:m,method:_,action:v,onSubmit:r?l:y,...p,"data-discover":!g&&e==="render"?"true":void 0})});xj.displayName="Form";function _j(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I1(e){let t=E.useContext(Ma);return xt(t,_j(e)),t}function kj(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=fr(),l=dr(),u=Iu(e,{relative:i});return E.useCallback(c=>{if(ej(c,t)){c.preventDefault();let f=n!==void 0?n:uu(l)===uu(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}function Sj(e){Kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=E.useRef(km(e)),n=E.useRef(!1),r=dr(),s=E.useMemo(()=>tj(r.search,n.current?null:t.current),[r.search]),i=fr(),o=E.useCallback((a,l)=>{const u=km(typeof a=="function"?a(new URLSearchParams(s)):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var Ej=0,Cj=()=>`__${String(++Ej)}__`;function Tj(){let{router:e}=I1("useSubmit"),{basename:t}=E.useContext(jr),n=KA();return E.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=sj(r,t);if(s.navigate===!1){let c=s.fetcherKey||Cj();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function Pj(e,{relative:t}={}){let{basename:n}=E.useContext(jr),r=E.useContext(Or);xt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Iu(e||".",{relative:t})},o=dr();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:fs([n,i.pathname])),uu(i)}function Aj(e,{relative:t}={}){let n=E.useContext(k1);xt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=I1("useViewTransitionState"),s=Iu(e,{relative:t});if(!n.isTransitioning)return!1;let i=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zd(s.pathname,o)!=null||zd(s.pathname,i)!=null}const vo="https://script.google.com/macros/s/AKfycbwK_bVmMH5GGvoAUuVrgCYF6I5S6oTIC7zEgDwuCxhjTwYf1UBFmXzJuD6XACkB8xr_8w/exec",D1="radtpoqypgqetijvopho",jj=["searchIndex","allSongs"],Oj=e=>["book-download-status",e],Rj="modulepreload",Ij=function(e){return"/new-sankeertan/"+e},Tw={},Ba=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Ij(l),l in Tw)return;Tw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Rj,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Dj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ba(async()=>{const{default:r}=await Promise.resolve().then(()=>Ua);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Oy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Pw extends Oy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Aw extends Oy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jw extends Oy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sm||(Sm={}));var Nj=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Lj{constructor(t,{headers:n={},customFetch:r,region:s=Sm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Dj(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Nj(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const f=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let p;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(u["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(u["Content-Type"]="application/json",p=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Pw(g)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new Aw(m);if(!m.ok)throw new jw(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield m.json():v==="application/octet-stream"?_=yield m.blob():v==="text/event-stream"?_=m:v==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Pw(i)}:{data:null,error:i,response:i instanceof jw||i instanceof Aw?i.context:void 0}}})}}var An={},Ry={},Ef={},Du={},Cf={},Tf={},$j=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oa=$j();const Mj=Oa.fetch,N1=Oa.fetch.bind(Oa),L1=Oa.Headers,Fj=Oa.Request,Bj=Oa.Response,Ua=Object.freeze(Object.defineProperty({__proto__:null,Headers:L1,Request:Fj,Response:Bj,default:N1,fetch:Mj},Symbol.toStringTag,{value:"Module"})),Uj=IT(Ua);var Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});let zj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Pf.default=zj;var $1=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tf,"__esModule",{value:!0});const Vj=$1(Uj),Kj=$1(Pf);let Wj=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Vj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,f=null,p=null,m=i.status,b=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const _=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,b="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const _=await i.text();try{c=JSON.parse(_),Array.isArray(c)&&i.status===404&&(f=[],c=null,m=200,b="OK")}catch{i.status===404&&_===""?(m=204,b="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,b="OK"),c&&this.shouldThrowOnError)throw new Kj.default(c)}return{error:c,data:f,count:p,status:m,statusText:b}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Tf.default=Wj;var Hj=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});const qj=Hj(Tf);let Gj=class extends qj.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Cf.default=Gj;var Qj=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Du,"__esModule",{value:!0});const Yj=Qj(Cf);let Jj=class extends Yj.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Du.default=Jj;var Zj=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});const fl=Zj(Du);let Xj=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new fl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new fl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new fl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new fl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new fl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ef.default=Xj;var M1=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ry,"__esModule",{value:!0});const eO=M1(Ef),tO=M1(Du);let nO=class F1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new eO.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new F1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new tO.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Ry.default=nO;var za=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const B1=za(Ry);An.PostgrestClient=B1.default;const U1=za(Ef);An.PostgrestQueryBuilder=U1.default;const z1=za(Du);An.PostgrestFilterBuilder=z1.default;const V1=za(Cf);An.PostgrestTransformBuilder=V1.default;const K1=za(Tf);An.PostgrestBuilder=K1.default;const W1=za(Pf);An.PostgrestError=W1.default;var rO=An.default={PostgrestClient:B1.default,PostgrestQueryBuilder:U1.default,PostgrestFilterBuilder:z1.default,PostgrestTransformBuilder:V1.default,PostgrestBuilder:K1.default,PostgrestError:W1.default};const{PostgrestClient:sO,PostgrestQueryBuilder:cU,PostgrestFilterBuilder:dU,PostgrestTransformBuilder:fU,PostgrestBuilder:hU,PostgrestError:pU}=rO;class iO{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const oO="2.74.0",aO=`realtime-js/${oO}`,lO="1.0.0",Em=1e4,uO=1e3,cO=100;var Nl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Nl||(Nl={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var Sr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Sr||(Sr={}));var Cm;(function(e){e.websocket="websocket"})(Cm||(Cm={}));var $i;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})($i||($i={}));class dO{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class H1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pt||(pt={}));const Ow=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=fO(o,e,t,s),i),{}):{}},fO=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?q1(i,o):Tm(o)},q1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return gO(t,n)}switch(e){case pt.bool:return hO(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return pO(t);case pt.json:case pt.jsonb:return mO(t);case pt.timestamp:return yO(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return Tm(t);default:return Tm(t)}},Tm=e=>e,hO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},gO=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>q1(t,a))}return e},yO=e=>typeof e=="string"?e.replace(" ","T"):e,G1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zh{constructor(t,n,r={},s=Em){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rw||(Rw={}));class Ll{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ll.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ll.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ll.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const p=c.map(_=>_.presence_ref),m=f.map(_=>_.presence_ref),b=c.filter(_=>m.indexOf(_.presence_ref)<0),v=f.filter(_=>p.indexOf(_.presence_ref)<0);b.length>0&&(a[u]=b),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(m=>m.presence_ref),p=c.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Iw||(Iw={}));var $l;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($l||($l={}));var ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class Iy{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zh(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new H1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ll(this),this.broadcastEndpointURL=G1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[$l.PRESENCE]&&this.bindings[$l.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ss.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ss.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket.setAuth(),m===void 0){t==null||t(ss.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(b=v==null?void 0:v.length)!==null&&b!==void 0?b:0,g=[];for(let y=0;y<_;y++){const w=v[y],{filter:{event:C,schema:O,table:I,filter:R}}=w,$=m&&m[y];if($&&$.event===C&&$.schema===O&&$.table===I&&$.filter===R)g.push(Object.assign(Object.assign({},w),{id:$.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ss.SUBSCRIBED);return}}).receive("error",m=>{this.state=zt.errored,t==null||t(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===zt.joined&&t===$l.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Zh(this,Sr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Zh(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>cO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Sr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var b,v,_;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((_=(v=m.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var b,v,_,g,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,O=(b=m.filter)===null||b===void 0?void 0:b.event;return C&&((v=n.ids)===null||v===void 0?void 0:v.includes(C))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return C==="*"||C===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:v,table:_,commit_timestamp:g,type:y,errors:w}=b;p=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:g,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(b))}m.callback(p,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Iy.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Sr.close,{},t)}_onError(t){this._on(Sr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ow(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ow(t.columns,t.old_record)),n}}const Xh=()=>{},$c={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vO=[1e3,2e3,5e3,1e4],wO=1e4,bO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xO{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Em,this.transport=null,this.heartbeatIntervalMs=$c.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xh,this.ref=0,this.reconnectTimer=null,this.logger=Xh,this.conn=null,this.sendBuffer=[],this.serializer=new dO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ba(async()=>{const{default:a}=await Promise.resolve().then(()=>Ua);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Cm.websocket}`,this.httpEndpoint=G1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lO}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nl.connecting:return $i.Connecting;case Nl.open:return $i.Open;case Nl.closing:return $i.Closing;default:return $i.Closed}}isConnected(){return this.connectionState()===$i.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Iy(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(uO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$c.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Sr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([bO],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:aO};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Sr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new H1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$c.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Em,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:$c.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Xh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>vO[f-1]||wO,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Dy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class _O extends Dy{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pm extends Dy{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var kO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Q1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ba(async()=>{const{default:r}=await Promise.resolve().then(()=>Ua);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},SO=()=>kO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ba(()=>Promise.resolve().then(()=>Ua),void 0)).Response:Response}),Am=e=>{if(Array.isArray(e))return e.map(n=>Am(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Am(r)}),t},EO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wo=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const ep=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CO=(e,t,n)=>wo(void 0,void 0,void 0,function*(){const r=yield SO();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new _O(ep(s),i,o))}).catch(s=>{t(new Pm(ep(s),s))}):t(new Pm(ep(e),e))}),TO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(EO(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Nu(e,t,n,r,s,i){return wo(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,TO(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>CO(l,a,r))})})}function Vd(e,t,n,r){return wo(this,void 0,void 0,function*(){return Nu(e,"GET",t,n,r)})}function Fr(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Nu(e,"POST",t,r,s,n)})}function jm(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Nu(e,"PUT",t,r,s,n)})}function PO(e,t,n,r){return wo(this,void 0,void 0,function*(){return Nu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Y1(e,t,n,r,s){return wo(this,void 0,void 0,function*(){return Nu(e,"DELETE",t,r,s,n)})}var AO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class jO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return AO(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var OO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class RO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new jO(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return OO(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}var Sn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const IO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class DO{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Q1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Sn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Dw),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?jm:Fr)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Sn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Dw.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield jm(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Sn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Dy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Sn(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Sn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Sn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Sn(this,void 0,void 0,function*(){try{const s=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>Vd(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new RO(l,this.shouldThrowOnError)}info(t){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Vd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Am(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}exists(t){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield PO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r)&&r instanceof Pm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Sn(this,void 0,void 0,function*(){try{return{data:yield Y1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Sn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},IO),n),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Sn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const NO="2.74.0",LO={"X-Client-Info":`storage-js/${NO}`};var Ro=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class $O{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LO),n),this.fetch=Q1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ro(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}createBucket(t){return Ro(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Ro(this,void 0,void 0,function*(){try{return{data:yield jm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield Y1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}class MO extends $O{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new DO(this.url,this.headers,t,this.fetch)}}const FO="2.74.0";let bl="";typeof Deno<"u"?bl="deno":typeof document<"u"?bl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bl="react-native":bl="node";const BO={"X-Client-Info":`supabase-js-${bl}/${FO}`},UO={headers:BO},zO={schema:"public"},VO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KO={};var WO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const HO=e=>{let t;return e?t=e:typeof fetch>"u"?t=N1:t=fetch,(...n)=>t(...n)},qO=()=>typeof Headers>"u"?L1:Headers,GO=(e,t,n)=>{const r=HO(n),s=qO();return(i,o)=>WO(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var QO=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function YO(e){return e.endsWith("/")?e:e+"/"}function JO(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>QO(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function ZO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(YO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const J1="2.74.0",Fo=30*1e3,Om=3,tp=Om*Fo,XO="http://localhost:9999",eR="supabase.auth.token",tR={"X-Client-Info":`gotrue-js/${J1}`},Rm="X-Supabase-Api-Version",Z1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rR=10*60*1e3;class cu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class sR extends cu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iR(e){return We(e)&&e.name==="AuthApiError"}class Mi extends cu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class wi extends cu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ds extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oR(e){return We(e)&&e.name==="AuthSessionMissingError"}class Io extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mc extends wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fc extends wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aR(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}class Nw extends wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Im extends wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function np(e){return We(e)&&e.name==="AuthRetryableFetchError"}class Lw extends wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Dm extends wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$w=` 	
\r=`.split(""),lR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$w.length;t+=1)e[$w[t].charCodeAt(0)]=-2;for(let t=0;t<Kd.length;t+=1)e[Kd[t].charCodeAt(0)]=t;return e})();function Mw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Kd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Kd[r]),t.queuedBits-=6}}function X1(e,t,n){const r=lR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Fw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{dR(o,r,n)};for(let o=0;o<e.length;o+=1)X1(e.charCodeAt(o),s,i);return t.join("")}function uR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function cR(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}uR(r,t)}}function dR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ca(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)X1(e.charCodeAt(s),n,r);return new Uint8Array(t)}function fR(e){const t=[];return cR(e,n=>t.push(n)),new Uint8Array(t)}function Vi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Mw(s,n,r)),Mw(null,n,r),t.join("")}function hR(e){return Math.round(Date.now()/1e3)+e}function pR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fn=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},eS=()=>{if(!Fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function mR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const tS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ba(async()=>{const{default:r}=await Promise.resolve().then(()=>Ua);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},gR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ai=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Is=async(e,t)=>{await e.removeItem(t)};class Af{constructor(){this.promise=new Af.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Af.promiseConstructor=Promise;function rp(e){const t=e.split(".");if(t.length!==3)throw new Dm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!nR.test(t[r]))throw new Dm("JWT not in base64url format");return{header:JSON.parse(Fw(t[0])),payload:JSON.parse(Fw(t[1])),signature:ca(t[2]),raw:{header:t[0],payload:t[1]}}}async function yR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function vR(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function wR(e){return("0"+e.toString(16)).substr(-2)}function bR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,wR).join("")}async function xR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function _R(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await xR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Do(e,t,n=!1){const r=bR();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Bo(e,`${t}-code-verifier`,s);const i=await _R(r);return[i,r===i?"plain":"s256"]}const kR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SR(e){const t=e.headers.get(Rm);if(!t||!t.match(kR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ER(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function CR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function No(e){if(!TR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bw(e){return JSON.parse(JSON.stringify(e))}var PR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Di=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),AR=[502,503,504];async function Uw(e){var t;if(!gR(e))throw new Im(Di(e),0);if(AR.includes(e.status))throw new Im(Di(e),e.status);let n;try{n=await e.json()}catch(i){throw new Mi(Di(i),i)}let r;const s=SR(e);if(s&&s.getTime()>=Z1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Lw(Di(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ds}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Lw(Di(n),e.status,n.weak_password.reasons);throw new sR(Di(n),e.status||500,r)}const jR=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ge(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Rm]||(i[Rm]=Z1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await OR(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function OR(e,t,n,r,s,i){const o=jR(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Im(Di(l),0)}if(a.ok||await Uw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Uw(l)}}function vr(e){var t;let n=null;DR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=hR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function zw(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function RR(e){return{data:e,error:null}}function IR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=PR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Vw(e){return e}function DR(e){return e.access_token&&e.refresh_token&&e.expires_in}const ip=["global","local","others"];var NR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class LR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=tS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ip[0]){if(ip.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ip.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=NR(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:IR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);u[`${_}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(We(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){No(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){No(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Us})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){No(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){No(t.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){No(t.userId),No(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);u[`${_}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(We(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}}function Kw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Lo={debug:!!(globalThis&&eS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class $R extends nS{}async function MR(e,t,n){Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new $R(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Lo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function FR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rS(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function BR(e){return parseInt(e,16)}function UR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function zR(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:f,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=rS(e.address),b=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",_=`${b} wants you to sign in with your Ethereum account:
${m}

${v}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}g+=y}return`${_}
${g}`}class $t extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Wd extends $t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function VR({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(iS(o)){if(i.rp.id!==o)return new $t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function KR({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(iS(r)){if(n.rpId!==r)return new $t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var sS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class WR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const HR=new WR;function qR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=sS(e,["challenge","user","excludeCredentials"]),i=ca(t).buffer,o=Object.assign(Object.assign({},n),{id:ca(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ca(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function GR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=sS(e,["challenge","allowCredentials"]),s=ca(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ca(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function QR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Vi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Vi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function YR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Vi(new Uint8Array(s.authenticatorData)),clientDataJSON:Vi(new Uint8Array(s.clientDataJSON)),signature:Vi(new Uint8Array(s.signature)),userHandle:s.userHandle?Vi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function iS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ww(){var e,t;return!!(Fn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function JR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wd("Browser returned unexpected credential type",t)}:{data:null,error:new Wd("Empty credential response",t)}}catch(t){return{data:null,error:VR({error:t,options:e})}}}async function ZR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wd("Browser returned unexpected credential type",t)}:{data:null,error:new Wd("Empty credential response",t)}}catch(t){return{data:null,error:KR({error:t,options:e})}}}const XR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},eI={userVerification:"preferred",hints:["security-key"]};function Hd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Hd(a,o):r[i]=Hd(o)}else r[i]=o}return r}function tI(e,t){return Hd(XR,e,t||{})}function nI(e,t){return Hd(eI,e,t||{})}class rI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??HR.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=tI(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:f}=await JR({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=nI(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:f}=await ZR(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new Mi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new cu("rpId is required for WebAuthn authentication")};try{if(!Ww())return{data:null,error:new Mi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new Mi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new cu("rpId is required for WebAuthn registration")};try{if(!Ww())return{data:null,error:new Mi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new Mi("Unexpected error in register",o)}}}}FR();const sI={url:XO,storageKey:eR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hw(e,t,n){return await n()}const $o={};class du{get jwks(){var t,n;return(n=(t=$o[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){$o[this.storageKey]=Object.assign(Object.assign({},$o[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=$o[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){$o[this.storageKey]=Object.assign(Object.assign({},$o[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=du.nextInstanceID,du.nextInstanceID+=1,this.instanceID>0&&Fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},sI),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new LR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tS(s.fetch),this.lock=s.lock||Hw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Fn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=MR:this.lock=Hw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rI(this)},this.persistSession?(s.storage?this.storage=s.storage:eS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),Fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${J1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=mR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),aR(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?{error:n}:{error:new Mi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:vr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:f,options:p}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Do(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:b},xform:vr})}else if("phone"in t){const{phone:c,password:f,options:p}=t;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:vr})}else throw new Mc("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zw})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zw})}else throw new Mc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Io}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,c,f,p;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:v,wallet:_,statement:g,options:y}=t;let w;if(Fn())if(typeof _=="object")w=_;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")w=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const C=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),O=await w.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=rS(O[0]);let R=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const F=await w.request({method:"eth_chainId"});R=BR(F)}const $={domain:C.host,address:I,statement:g,uri:C.href,version:"1",chainId:R,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=zR($),b=await w.request({method:"personal_sign",params:[UR(m),I]})}try{const{data:v,error:_}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:vr});if(_)throw _;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Io}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:_})}catch(v){if(We(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,f,p,m;let b,v;if("message"in t)b=t.message,v=t.signature;else{const{chain:_,wallet:g,statement:y,options:w}=t;let C;if(Fn())if(typeof g=="object")C=g;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))C=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const O=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const I=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),y?{statement:y}:null));let R;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")R=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)R=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)b=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),v=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${O.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(c=w==null?void 0:w.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const I=await C.signMessage(new TextEncoder().encode(b),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:_,error:g}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Vi(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:vr});if(g)throw g;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Io}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:g})}catch(_){if(We(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:vr});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Io}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(We(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Io}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Do(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Mc("You must provide either an email or phone number.")}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:vr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(We(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Do(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:RR})}catch(i){if(We(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ds;const{error:s}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Mc("You must provide either an email or phone number and a type")}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<tp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ai(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=sp()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(n){if(We(n))return oR(n)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ds;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Do(this.storage,this.storageKey));const{data:u,error:c}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Us});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=rp(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(We(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ds;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fn())throw new Fc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Nw("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Fc("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let p=c+f;l&&(p=parseInt(l));const m=p-c;m*1e3<=Fo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const b=p-f;c-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,c):c-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,c);const{data:v,error:_}=await this._getUser(i);if(_)throw _;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(We(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(iR(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=pR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Do(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(We(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Fn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(We(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:vr}),{data:p,error:m}=f;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Io}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(s){if(We(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vR(async s=>(s>0&&await yR(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&np(i)&&Date.now()+o-r<Fo})}catch(r){if(this._debug(n,"error",r),We(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ai(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Bo(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:sp()}else if(s&&!s.user&&!s.user){const o=await Ai(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Is(this.storage,this.storageKey+"-user"),await Bo(this.storage,this.storageKey,s)):s.user=sp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<tp;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${tp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),np(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Af;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),We(i)){const o={data:null,error:i};return np(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Bo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Bw(s);await Bo(this.storage,this.storageKey,i)}else{const s=Bw(n);await Bo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Fo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fo}ms, refresh threshold is ${Om} ticks`),s<=Om&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Do(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?QR(t.webauthn.credential_response):YR(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:qR(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:GR(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=rp(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+rR>s)return r;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:b}=await this.getSession();if(b||!m.session)return{data:null,error:b};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=rp(r);n!=null&&n.allowExpired||ER(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=CR(s.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,fR(`${a}.${l}`)))throw new Dm("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}}du.nextInstanceID=0;const iI=du;class oI extends iI{constructor(t){super(t)}}var aI=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class lI{constructor(t,n,r){var s,i,o;this.supabaseUrl=t,this.supabaseKey=n;const a=ZO(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:zO,realtime:KO,auth:Object.assign(Object.assign({},VO),{storageKey:l}),global:UO},c=JO(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=GO(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new sO(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new MO(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Lj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return aI(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oI({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new xO(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uI=(e,t,n)=>new lI(e,t,n);function cI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}cI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dI="https://"+D1+".supabase.co",fI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",hI=dI,pI=fI,Ut=uI(hI,pI),Ny=E.createContext({session:null,setSession:()=>{},isLoading:!0}),mI=({children:e})=>{const[t,n]=E.useState(null),[r,s]=E.useState(!0);E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:a}})=>{n(a),s(!1)});const{data:{subscription:o}}=Ut.auth.onAuthStateChange((a,l)=>{n(l)});return()=>{console.log("AUTH_DEBUG: 5. Cleanup function running."),o.unsubscribe()}},[]);const i={session:t,setSession:n,isLoading:r};return k.jsx(Ny.Provider,{value:i,children:e})},bo=()=>E.useContext(Ny),gI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),[o,a]=E.useState(null),l=fr(),{setSession:u}=bo(),c=async f=>{f.preventDefault(),i(!0),a(null);try{const{data:{session:p},error:m}=await Ut.auth.signInWithPassword({email:e,password:n});if(m)a(m.message);else if(p){u(p);const b=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(b||"/categories",{replace:!0})}}catch(p){a(p.message||"An unexpected error occurred during login.")}finally{i(!1)}};return k.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:k.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),k.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:k.jsxs("div",{className:"max-w-md mx-auto",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),k.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),k.jsx("div",{children:o&&k.jsx("p",{className:"text-red-500",children:o})}),k.jsxs("div",{className:"divide-y divide-gray-200",children:[k.jsx("form",{onSubmit:c,children:k.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:f=>t(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),k.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),k.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),k.jsx("div",{className:"relative",children:k.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:s,children:s?"Logging in...":"Login"})})]})}),k.jsxs("p",{children:["Don't have an account? ",k.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),k.jsxs("p",{children:["Forgot your password? ",k.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},yI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),i(!0),a(null);try{const{error:c}=await Ut.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{i(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Sign Up"}),o&&k.jsx("p",{style:{color:"red"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",children:"Password:"}),k.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:s,children:s?"Signing up...":"Sign Up"})]})]})},vI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(!1),[s,i]=E.useState(null),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),r(!0),i(null),a(null);try{const{error:c}=await Ut.auth.updateUser({password:e});c?i(c.message):(a("Password updated successfully!"),t(""))}catch(c){i(c.message||"An unexpected error occurred")}finally{r(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Change Password"}),s&&k.jsx("p",{style:{color:"red"},children:s}),o&&k.jsx("p",{style:{color:"green"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),k.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},wI="auth_redirect_sankeertan",bI=()=>{const e=fr(),[t]=Sj(),[n,r]=E.useState(!0),[s,i]=E.useState(null),{setSession:o}=E.useContext(Ny);return E.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(f,p,m)=>{r(!0),i(null);try{let b;if(p==="invite"||p==="signup"||p==="email_change"||p==="magiclink"){const v=m;if(!v){i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}b=await Ut.auth.verifyOtp({token:f,type:p,email:v})}else if(p==="recover"){e(`/reset-password?token=${f}`,{replace:!0});return}else if(p==="sms"){const v=m;if(!v){i("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}b=await Ut.auth.verifyOtp({token:f,type:"sms",phone:v})}else{i(`Unsupported authentication type: ${p}`),r(!1),e("/login",{replace:!0});return}if(b!=null&&b.error)i(b.error.message);else{const{data:{session:v}}=await Ut.auth.getSession();v&&o(v),localStorage.setItem(wI,"true"),e("/",{replace:!0})}}catch(b){i(b.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(i("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(i("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?k.jsx("div",{children:"Verifying your account..."}):s?k.jsxs("div",{children:["Error verifying account: ",s]}):null};var Lu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ks,Pg,Jx,_I=(Jx=class{constructor(){He(this,Ks,xI);He(this,Pg,!1)}setTimeoutProvider(e){$e(this,Ks,e)}setTimeout(e,t){return q(this,Ks).setTimeout(e,t)}clearTimeout(e){q(this,Ks).clearTimeout(e)}setInterval(e,t){return q(this,Ks).setInterval(e,t)}clearInterval(e){q(this,Ks).clearInterval(e)}},Ks=new WeakMap,Pg=new WeakMap,Jx),Ki=new _I;function kI(e){setTimeout(e,0)}var ho=typeof window>"u"||"Deno"in globalThis;function Tn(){}function SI(e,t){return typeof e=="function"?e(t):e}function Nm(e){return typeof e=="number"&&e>=0&&e!==1/0}function oS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ci(e,t){return typeof e=="function"?e(t):e}function er(e,t){return typeof e=="function"?e(t):e}function qw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==Ly(o,t.options))return!1}else if(!hu(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function Gw(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(fu(t.options.mutationKey)!==fu(i))return!1}else if(!hu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Ly(e,t){return((t==null?void 0:t.queryKeyHashFn)||fu)(e)}function fu(e){return JSON.stringify(e,(t,n)=>$m(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function hu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>hu(e[n],t[n])):!1}var EI=Object.prototype.hasOwnProperty;function aS(e,t){if(e===t)return e;const n=Qw(e)&&Qw(t);if(!n&&!($m(e)&&$m(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:i[u],f=e[c],p=t[c];if(f===p){a[c]=f,(n?u<s:EI.call(e,c))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){a[c]=p;continue}const m=aS(f,p);a[c]=m,m===f&&l++}return s===o&&l===s?e:a}function Lm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Qw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $m(e){if(!Yw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Yw(e){return Object.prototype.toString.call(e)==="[object Object]"}function CI(e){return new Promise(t=>{Ki.setTimeout(t,e)})}function Mm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?aS(e,t):t}function TI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function PI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var $y=Symbol();function lS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===$y?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function AI(e,t){return typeof e=="function"?e(...t):!!e}var Gi,Ws,fa,Zx,jI=(Zx=class extends Lu{constructor(){super();He(this,Gi);He(this,Ws);He(this,fa);$e(this,fa,t=>{if(!ho&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,Ws)||this.setEventListener(q(this,fa))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Ws))==null||t.call(this),$e(this,Ws,void 0))}setEventListener(t){var n;$e(this,fa,t),(n=q(this,Ws))==null||n.call(this),$e(this,Ws,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){q(this,Gi)!==t&&($e(this,Gi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof q(this,Gi)=="boolean"?q(this,Gi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Gi=new WeakMap,Ws=new WeakMap,fa=new WeakMap,Zx),My=new jI;function Fm(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var OI=kI;function RI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=OI;const i=a=>{t?e.push(a):s(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var tn=RI(),ha,Hs,pa,Xx,II=(Xx=class extends Lu{constructor(){super();He(this,ha,!0);He(this,Hs);He(this,pa);$e(this,pa,t=>{if(!ho&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,Hs)||this.setEventListener(q(this,pa))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Hs))==null||t.call(this),$e(this,Hs,void 0))}setEventListener(t){var n;$e(this,pa,t),(n=q(this,Hs))==null||n.call(this),$e(this,Hs,t(this.setOnline.bind(this)))}setOnline(t){q(this,ha)!==t&&($e(this,ha,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return q(this,ha)}},ha=new WeakMap,Hs=new WeakMap,pa=new WeakMap,Xx),qd=new II;function DI(e){return Math.min(1e3*2**e,3e4)}function uS(e){return(e??"online")==="online"?qd.isOnline():!0}var Bm=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function cS(e){let t=!1,n=0,r;const s=Fm(),i=()=>s.status!=="pending",o=v=>{var _;if(!i()){const g=new Bm(v);p(g),(_=e.onCancel)==null||_.call(e,g)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>My.isFocused()&&(e.networkMode==="always"||qd.isOnline())&&e.canRun(),c=()=>uS(e.networkMode)&&e.canRun(),f=v=>{i()||(r==null||r(),s.resolve(v))},p=v=>{i()||(r==null||r(),s.reject(v))},m=()=>new Promise(v=>{var _;r=g=>{(i()||u())&&v(g)},(_=e.onPause)==null||_.call(e)}).then(()=>{var v;r=void 0,i()||(v=e.onContinue)==null||v.call(e)}),b=()=>{if(i())return;let v;const _=n===0?e.initialPromise:void 0;try{v=_??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var I;if(i())return;const y=e.retry??(ho?0:3),w=e.retryDelay??DI,C=typeof w=="function"?w(n,g):w,O=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!O){p(g);return}n++,(I=e.onFail)==null||I.call(e,n,g),CI(C).then(()=>u()?void 0:m()).then(()=>{t?p(g):b()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?b():m().then(b),s)}}var Qi,e_,dS=(e_=class{constructor(){He(this,Qi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nm(this.gcTime)&&$e(this,Qi,Ki.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ho?1/0:5*60*1e3))}clearGcTimeout(){q(this,Qi)&&(Ki.clearTimeout(q(this,Qi)),$e(this,Qi,void 0))}},Qi=new WeakMap,e_),Yi,ma,Xn,Ji,Qt,xu,Zi,xr,ns,t_,NI=(t_=class extends dS{constructor(t){super();He(this,xr);He(this,Yi);He(this,ma);He(this,Xn);He(this,Ji);He(this,Qt);He(this,xu);He(this,Zi);$e(this,Zi,!1),$e(this,xu,t.defaultOptions),this.setOptions(t.options),this.observers=[],$e(this,Ji,t.client),$e(this,Xn,q(this,Ji).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,$e(this,Yi,Jw(this.options)),this.state=t.state??q(this,Yi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,Qt))==null?void 0:t.promise}setOptions(t){if(this.options={...q(this,xu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Jw(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),$e(this,Yi,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Xn).remove(this)}setData(t,n){const r=Mm(this.state.data,t,this.options);return ot(this,xr,ns).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ot(this,xr,ns).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=q(this,Qt))==null?void 0:r.promise;return(s=q(this,Qt))==null||s.cancel(t),n?n.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,Yi))}isActive(){return this.observers.some(t=>er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$y||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ci(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!oS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,Qt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,Qt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,Xn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(q(this,Qt)&&(q(this,Zi)?q(this,Qt).cancel({revert:!0}):q(this,Qt).cancelRetry()),this.scheduleGc()),q(this,Xn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ot(this,xr,ns).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,f,p,m,b,v,_,g,y,w;if(this.state.fetchStatus!=="idle"&&((l=q(this,Qt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,Qt))return q(this,Qt).continueRetry(),q(this,Qt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(O=>O.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>($e(this,Zi,!0),r.signal)})},i=()=>{const C=lS(this.options,n),I=(()=>{const R={client:q(this,Ji),queryKey:this.queryKey,meta:this.meta};return s(R),R})();return $e(this,Zi,!1),this.options.persister?this.options.persister(C,I,this):C(I)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,Ji),state:this.state,fetchFn:i};return s(C),C})();(u=this.options.behavior)==null||u.onFetch(a,this),$e(this,ma,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&ot(this,xr,ns).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),$e(this,Qt,cS({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof Bm&&C.revert&&this.setState({...q(this,ma),fetchStatus:"idle"}),r.abort()},onFail:(C,O)=>{ot(this,xr,ns).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{ot(this,xr,ns).call(this,{type:"pause"})},onContinue:()=>{ot(this,xr,ns).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await q(this,Qt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(m=(p=q(this,Xn).config).onSuccess)==null||m.call(p,C,this),(v=(b=q(this,Xn).config).onSettled)==null||v.call(b,C,this.state.error,this),C}catch(C){if(C instanceof Bm){if(C.silent)return q(this,Qt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw ot(this,xr,ns).call(this,{type:"error",error:C}),(g=(_=q(this,Xn).config).onError)==null||g.call(_,C,this),(w=(y=q(this,Xn).config).onSettled)==null||w.call(y,this.state.data,C,this),C}finally{this.scheduleGc()}}},Yi=new WeakMap,ma=new WeakMap,Xn=new WeakMap,Ji=new WeakMap,Qt=new WeakMap,xu=new WeakMap,Zi=new WeakMap,xr=new WeakSet,ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fS(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return $e(this,ma,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,Xn).notify({query:this,type:"updated",action:t})})},t_);function fS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Jw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var En,at,_u,yn,Xi,ga,os,qs,ku,ya,va,eo,to,Gs,wa,ct,xl,Um,zm,Vm,Km,Wm,Hm,qm,hS,n_,LI=(n_=class extends Lu{constructor(t,n){super();He(this,ct);He(this,En);He(this,at);He(this,_u);He(this,yn);He(this,Xi);He(this,ga);He(this,os);He(this,qs);He(this,ku);He(this,ya);He(this,va);He(this,eo);He(this,to);He(this,Gs);He(this,wa,new Set);this.options=n,$e(this,En,t),$e(this,qs,null),$e(this,os,Fm()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,at).addObserver(this),Zw(q(this,at),this.options)?ot(this,ct,xl).call(this):this.updateResult(),ot(this,ct,Km).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gm(q(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gm(q(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ot(this,ct,Wm).call(this),ot(this,ct,Hm).call(this),q(this,at).removeObserver(this)}setOptions(t){const n=this.options,r=q(this,at);if(this.options=q(this,En).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof er(this.options.enabled,q(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ot(this,ct,qm).call(this),q(this,at).setOptions(this.options),n._defaulted&&!Lm(this.options,n)&&q(this,En).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,at),observer:this});const s=this.hasListeners();s&&Xw(q(this,at),r,this.options,n)&&ot(this,ct,xl).call(this),this.updateResult(),s&&(q(this,at)!==r||er(this.options.enabled,q(this,at))!==er(n.enabled,q(this,at))||ci(this.options.staleTime,q(this,at))!==ci(n.staleTime,q(this,at)))&&ot(this,ct,Um).call(this);const i=ot(this,ct,zm).call(this);s&&(q(this,at)!==r||er(this.options.enabled,q(this,at))!==er(n.enabled,q(this,at))||i!==q(this,Gs))&&ot(this,ct,Vm).call(this,i)}getOptimisticResult(t){const n=q(this,En).getQueryCache().build(q(this,En),t),r=this.createResult(n,t);return MI(this,r)&&($e(this,yn,r),$e(this,ga,this.options),$e(this,Xi,q(this,at).state)),r}getCurrentResult(){return q(this,yn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&q(this,os).status==="pending"&&q(this,os).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){q(this,wa).add(t)}getCurrentQuery(){return q(this,at)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=q(this,En).defaultQueryOptions(t),r=q(this,En).getQueryCache().build(q(this,En),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ot(this,ct,xl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,yn)))}createResult(t,n){var F;const r=q(this,at),s=this.options,i=q(this,yn),o=q(this,Xi),a=q(this,ga),u=t!==r?t.state:q(this,_u),{state:c}=t;let f={...c},p=!1,m;if(n._optimisticResults){const V=this.hasListeners(),he=!V&&Zw(t,n),M=V&&Xw(t,r,n,s);(he||M)&&(f={...f,...fS(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:v,status:_}=f;m=f.data;let g=!1;if(n.placeholderData!==void 0&&m===void 0&&_==="pending"){let V;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(V=i.data,g=!0):V=typeof n.placeholderData=="function"?n.placeholderData((F=q(this,va))==null?void 0:F.state.data,q(this,va)):n.placeholderData,V!==void 0&&(_="success",m=Mm(i==null?void 0:i.data,V,n),p=!0)}if(n.select&&m!==void 0&&!g)if(i&&m===(o==null?void 0:o.data)&&n.select===q(this,ku))m=q(this,ya);else try{$e(this,ku,n.select),m=n.select(m),m=Mm(i==null?void 0:i.data,m,n),$e(this,ya,m),$e(this,qs,null)}catch(V){$e(this,qs,V)}q(this,qs)&&(b=q(this,qs),m=q(this,ya),v=Date.now(),_="error");const y=f.fetchStatus==="fetching",w=_==="pending",C=_==="error",O=w&&y,I=m!==void 0,$={status:_,fetchStatus:f.fetchStatus,isPending:w,isSuccess:_==="success",isError:C,isInitialLoading:O,isLoading:O,data:m,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:C&&!I,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&I,isStale:Fy(t,n),refetch:this.refetch,promise:q(this,os),isEnabled:er(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const V=ne=>{$.status==="error"?ne.reject($.error):$.data!==void 0&&ne.resolve($.data)},he=()=>{const ne=$e(this,os,$.promise=Fm());V(ne)},M=q(this,os);switch(M.status){case"pending":t.queryHash===r.queryHash&&V(M);break;case"fulfilled":($.status==="error"||$.data!==M.value)&&he();break;case"rejected":($.status!=="error"||$.error!==M.reason)&&he();break}}return $}updateResult(){const t=q(this,yn),n=this.createResult(q(this,at),this.options);if($e(this,Xi,q(this,at).state),$e(this,ga,this.options),q(this,Xi).data!==void 0&&$e(this,va,q(this,at)),Lm(n,t))return;$e(this,yn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!q(this,wa).size)return!0;const o=new Set(i??q(this,wa));return this.options.throwOnError&&o.add("error"),Object.keys(q(this,yn)).some(a=>{const l=a;return q(this,yn)[l]!==t[l]&&o.has(l)})};ot(this,ct,hS).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ot(this,ct,Km).call(this)}},En=new WeakMap,at=new WeakMap,_u=new WeakMap,yn=new WeakMap,Xi=new WeakMap,ga=new WeakMap,os=new WeakMap,qs=new WeakMap,ku=new WeakMap,ya=new WeakMap,va=new WeakMap,eo=new WeakMap,to=new WeakMap,Gs=new WeakMap,wa=new WeakMap,ct=new WeakSet,xl=function(t){ot(this,ct,qm).call(this);let n=q(this,at).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tn)),n},Um=function(){ot(this,ct,Wm).call(this);const t=ci(this.options.staleTime,q(this,at));if(ho||q(this,yn).isStale||!Nm(t))return;const r=oS(q(this,yn).dataUpdatedAt,t)+1;$e(this,eo,Ki.setTimeout(()=>{q(this,yn).isStale||this.updateResult()},r))},zm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,at)):this.options.refetchInterval)??!1},Vm=function(t){ot(this,ct,Hm).call(this),$e(this,Gs,t),!(ho||er(this.options.enabled,q(this,at))===!1||!Nm(q(this,Gs))||q(this,Gs)===0)&&$e(this,to,Ki.setInterval(()=>{(this.options.refetchIntervalInBackground||My.isFocused())&&ot(this,ct,xl).call(this)},q(this,Gs)))},Km=function(){ot(this,ct,Um).call(this),ot(this,ct,Vm).call(this,ot(this,ct,zm).call(this))},Wm=function(){q(this,eo)&&(Ki.clearTimeout(q(this,eo)),$e(this,eo,void 0))},Hm=function(){q(this,to)&&(Ki.clearInterval(q(this,to)),$e(this,to,void 0))},qm=function(){const t=q(this,En).getQueryCache().build(q(this,En),this.options);if(t===q(this,at))return;const n=q(this,at);$e(this,at,t),$e(this,_u,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},hS=function(t){tn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(q(this,yn))}),q(this,En).getQueryCache().notify({query:q(this,at),type:"observerResultsUpdated"})})},n_);function $I(e,t){return er(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Zw(e,t){return $I(e,t)||e.state.data!==void 0&&Gm(e,t,t.refetchOnMount)}function Gm(e,t,n){if(er(t.enabled,e)!==!1&&ci(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Fy(e,t)}return!1}function Xw(e,t,n,r){return(e!==t||er(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Fy(e,n)}function Fy(e,t){return er(t.enabled,e)!==!1&&e.isStaleByTime(ci(t.staleTime,e))}function MI(e,t){return!Lm(e.getCurrentResult(),t)}function eb(e){return{onFetch:(t,n)=>{var c,f,p,m,b;const r=t.options,s=(p=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const _=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=lS(t.options,t.fetchOptions),y=async(w,C,O)=>{if(v)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const R=(()=>{const he={client:t.client,queryKey:t.queryKey,pageParam:C,direction:O?"backward":"forward",meta:t.options.meta};return _(he),he})(),$=await g(R),{maxPages:F}=t.options,V=O?PI:TI;return{pages:V(w.pages,$,F),pageParams:V(w.pageParams,C,F)}};if(s&&i.length){const w=s==="backward",C=w?FI:tb,O={pages:i,pageParams:o},I=C(r,O);a=await y(O,I,w)}else{const w=e??i.length;do{const C=l===0?o[0]??r.initialPageParam:tb(r,a);if(l>0&&C==null)break;a=await y(a,C),l++}while(l<w)}return a};t.options.persister?t.fetchFn=()=>{var v,_;return(_=(v=t.options).persister)==null?void 0:_.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function tb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function FI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Su,Br,vn,no,Ur,Ns,r_,BI=(r_=class extends dS{constructor(t){super();He(this,Ur);He(this,Su);He(this,Br);He(this,vn);He(this,no);$e(this,Su,t.client),this.mutationId=t.mutationId,$e(this,vn,t.mutationCache),$e(this,Br,[]),this.state=t.state||UI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,Br).includes(t)||(q(this,Br).push(t),this.clearGcTimeout(),q(this,vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){$e(this,Br,q(this,Br).filter(n=>n!==t)),this.scheduleGc(),q(this,vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,Br).length||(this.state.status==="pending"?this.scheduleGc():q(this,vn).remove(this))}continue(){var t;return((t=q(this,no))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,f,p,m,b,v,_,g,y,w,C,O,I,R,$,F;const n=()=>{ot(this,Ur,Ns).call(this,{type:"continue"})},r={client:q(this,Su),meta:this.options.meta,mutationKey:this.options.mutationKey};$e(this,no,cS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(V,he)=>{ot(this,Ur,Ns).call(this,{type:"failed",failureCount:V,error:he})},onPause:()=>{ot(this,Ur,Ns).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,vn).canRun(this)}));const s=this.state.status==="pending",i=!q(this,no).canStart();try{if(s)n();else{ot(this,Ur,Ns).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=q(this,vn).config).onMutate)==null?void 0:a.call(o,t,this,r));const he=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));he!==this.state.context&&ot(this,Ur,Ns).call(this,{type:"pending",context:he,variables:t,isPaused:i})}const V=await q(this,no).start();return await((f=(c=q(this,vn).config).onSuccess)==null?void 0:f.call(c,V,t,this.state.context,this,r)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,V,t,this.state.context,r)),await((v=(b=q(this,vn).config).onSettled)==null?void 0:v.call(b,V,null,this.state.variables,this.state.context,this,r)),await((g=(_=this.options).onSettled)==null?void 0:g.call(_,V,null,t,this.state.context,r)),ot(this,Ur,Ns).call(this,{type:"success",data:V}),V}catch(V){try{throw await((w=(y=q(this,vn).config).onError)==null?void 0:w.call(y,V,t,this.state.context,this,r)),await((O=(C=this.options).onError)==null?void 0:O.call(C,V,t,this.state.context,r)),await((R=(I=q(this,vn).config).onSettled)==null?void 0:R.call(I,void 0,V,this.state.variables,this.state.context,this,r)),await((F=($=this.options).onSettled)==null?void 0:F.call($,void 0,V,t,this.state.context,r)),V}finally{ot(this,Ur,Ns).call(this,{type:"error",error:V})}}finally{q(this,vn).runNext(this)}}},Su=new WeakMap,Br=new WeakMap,vn=new WeakMap,no=new WeakMap,Ur=new WeakSet,Ns=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tn.batch(()=>{q(this,Br).forEach(r=>{r.onMutationUpdate(t)}),q(this,vn).notify({mutation:this,type:"updated",action:t})})},r_);function UI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var as,_r,Eu,s_,zI=(s_=class extends Lu{constructor(t={}){super();He(this,as);He(this,_r);He(this,Eu);this.config=t,$e(this,as,new Set),$e(this,_r,new Map),$e(this,Eu,0)}build(t,n,r){const s=new BI({client:t,mutationCache:this,mutationId:++vc(this,Eu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){q(this,as).add(t);const n=Bc(t);if(typeof n=="string"){const r=q(this,_r).get(n);r?r.push(t):q(this,_r).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,as).delete(t)){const n=Bc(t);if(typeof n=="string"){const r=q(this,_r).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&q(this,_r).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Bc(t);if(typeof n=="string"){const r=q(this,_r).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Bc(t);if(typeof n=="string"){const s=(r=q(this,_r).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tn.batch(()=>{q(this,as).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,as).clear(),q(this,_r).clear()})}getAll(){return Array.from(q(this,as))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Gw(n,r))}findAll(t={}){return this.getAll().filter(n=>Gw(t,n))}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tn))))}},as=new WeakMap,_r=new WeakMap,Eu=new WeakMap,s_);function Bc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var zr,i_,VI=(i_=class extends Lu{constructor(t={}){super();He(this,zr);this.config=t,$e(this,zr,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Ly(s,n);let o=this.get(i);return o||(o=new NI({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){q(this,zr).has(t.queryHash)||(q(this,zr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=q(this,zr).get(t.queryHash);n&&(t.destroy(),n===t&&q(this,zr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,zr).get(t)}getAll(){return[...q(this,zr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>qw(t,r)):n}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zr=new WeakMap,i_),Pt,Qs,Ys,ba,xa,Js,_a,ka,o_,KI=(o_=class{constructor(e={}){He(this,Pt);He(this,Qs);He(this,Ys);He(this,ba);He(this,xa);He(this,Js);He(this,_a);He(this,ka);$e(this,Pt,e.queryCache||new VI),$e(this,Qs,e.mutationCache||new zI),$e(this,Ys,e.defaultOptions||{}),$e(this,ba,new Map),$e(this,xa,new Map),$e(this,Js,0)}mount(){vc(this,Js)._++,q(this,Js)===1&&($e(this,_a,My.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Pt).onFocus())})),$e(this,ka,qd.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Pt).onOnline())})))}unmount(){var e,t;vc(this,Js)._--,q(this,Js)===0&&((e=q(this,_a))==null||e.call(this),$e(this,_a,void 0),(t=q(this,ka))==null||t.call(this),$e(this,ka,void 0))}isFetching(e){return q(this,Pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,Qs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,Pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=q(this,Pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ci(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return q(this,Pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=q(this,Pt).get(r.queryHash),i=s==null?void 0:s.state.data,o=SI(t,i);if(o!==void 0)return q(this,Pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return tn.batch(()=>q(this,Pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,Pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=q(this,Pt);tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=q(this,Pt);return tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=tn.batch(()=>q(this,Pt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(e,t={}){return tn.batch(()=>(q(this,Pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=tn.batch(()=>q(this,Pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=q(this,Pt).build(this,t);return n.isStaleByTime(ci(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tn).catch(Tn)}fetchInfiniteQuery(e){return e.behavior=eb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tn).catch(Tn)}ensureInfiniteQueryData(e){return e.behavior=eb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qd.isOnline()?q(this,Qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Pt)}getMutationCache(){return q(this,Qs)}getDefaultOptions(){return q(this,Ys)}setDefaultOptions(e){$e(this,Ys,e)}setQueryDefaults(e,t){q(this,ba).set(fu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,ba).values()],n={};return t.forEach(r=>{hu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){q(this,xa).set(fu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,xa).values()],n={};return t.forEach(r=>{hu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,Ys).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ly(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===$y&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,Ys).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,Pt).clear(),q(this,Qs).clear()}},Pt=new WeakMap,Qs=new WeakMap,Ys=new WeakMap,ba=new WeakMap,xa=new WeakMap,Js=new WeakMap,_a=new WeakMap,ka=new WeakMap,o_),pS=E.createContext(void 0),$u=e=>{const t=E.useContext(pS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},WI=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),k.jsx(pS.Provider,{value:e,children:t})),mS=E.createContext(!1),HI=()=>E.useContext(mS);mS.Provider;function qI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var GI=E.createContext(qI()),QI=()=>E.useContext(GI),YI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},JI=e=>{E.useEffect(()=>{e.clearReset()},[e])},ZI=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||AI(n,[e.error,r])),XI=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},eD=(e,t)=>e.isLoading&&e.isFetching&&!t,tD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,nb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function nD(e,t,n){var f,p,m,b,v;const r=HI(),s=QI(),i=$u(),o=i.defaultQueryOptions(e);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",XI(o),YI(o,s),JI(s);const a=!i.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new t(i,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(_=>{const g=c?l.subscribe(tn.batchCalls(_)):Tn;return l.updateResult(),g},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o)},[o,l]),tD(o,u))throw nb(o,l,s);if(ZI({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||b.call(m,o,u),o.experimental_prefetchInRender&&!ho&&eD(u,r)){const _=a?nb(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;_==null||_.catch(Tn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function jf(e,t){return nD(e,LI)}var gS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,S){x.__proto__=S}||function(x,S){for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(x[T]=S[T])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,x=1,S=arguments.length;x<S;x++)for(var T in h=arguments[x])Object.prototype.hasOwnProperty.call(h,T)&&(d[T]=h[T]);return d}).apply(this,arguments)};function s(d,h,x){for(var S,T=0,j=h.length;T<j;T++)!S&&T in h||((S=S||Array.prototype.slice.call(h,0,T))[T]=h[T]);return d.concat(S||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jt,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(x){d[x]=h[x]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(d,h){return c.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(x){b(d,x,h[x])})}var m=Object.defineProperty;function b(d,h,x,S){m(d,h,l(x&&f(x,"get")&&typeof x.get=="function"?{get:x.get,set:x.set,configurable:!0}:{value:x,configurable:!0,writable:!0},S))}function v(d){return{from:function(h){return d.prototype=Object.create(h.prototype),b(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var _=Object.getOwnPropertyDescriptor,g=[].slice;function y(d,h,x){return g.call(d,h,x)}function w(d,h){return h(d)}function C(d){if(!d)throw new Error("Assertion Failed")}function O(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function I(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var x=[],S=0,T=h.length;S<T;++S){var j=I(d,h[S]);x.push(j)}return x}var D=h.indexOf(".");if(D!==-1){var U=d[h.substr(0,D)];return U==null?void 0:I(U,h.substr(D+1))}}function R(d,h,x){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){C(typeof x!="string"&&"length"in x);for(var S=0,T=h.length;S<T;++S)R(d,h[S],x[S])}else{var j,D,U=h.indexOf(".");U!==-1?(j=h.substr(0,U),(D=h.substr(U+1))===""?x===void 0?a(d)&&!isNaN(parseInt(j))?d.splice(j,1):delete d[j]:d[j]=x:R(U=!(U=d[j])||!f(d,j)?d[j]={}:U,D,x)):x===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=x}}function $(d){var h,x={};for(h in d)f(d,h)&&(x[h]=d[h]);return x}var F=[].concat;function V(d){return F.apply([],d)}var Ue="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(V([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),he=new Set(Ue.map(function(d){return i[d]})),M=null;function ne(d){return M=new WeakMap,d=function h(x){if(!x||typeof x!="object")return x;var S=M.get(x);if(S)return S;if(a(x)){S=[],M.set(x,S);for(var T=0,j=x.length;T<j;++T)S.push(h(x[T]))}else if(he.has(x.constructor))S=x;else{var D,U=u(x);for(D in S=U===Object.prototype?{}:Object.create(U),M.set(x,S),x)f(x,D)&&(S[D]=h(x[D]))}return S}(d),M=null,d}var A={}.toString;function J(d){return A.call(d).slice(8,-1)}var xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",oe=typeof xe=="symbol"?function(d){var h;return d!=null&&(h=d[xe])&&h.apply(d)}:function(){return null};function ae(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var re={};function ge(d){var h,x,S,T;if(arguments.length===1){if(a(d))return d.slice();if(this===re&&typeof d=="string")return[d];if(T=oe(d)){for(x=[];!(S=T.next()).done;)x.push(S.value);return x}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(x=new Array(h);h--;)x[h]=d[h];return x}for(h=arguments.length,x=new Array(h);h--;)x[h]=arguments[h];return x}var N=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ke=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ke),z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ue(d,h){this.name=d,this.message=h}function fe(d,h){return d+". Errors: "+Object.keys(h).map(function(x){return h[x].toString()}).filter(function(x,S,T){return T.indexOf(x)===S}).join(`
`)}function ce(d,h,x,S){this.failures=h,this.failedKeys=S,this.successCount=x,this.message=fe(d,h)}function Ce(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(x){return h[x]}),this.failuresByPos=h,this.message=fe(d,this.failures)}v(ue).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(ce).from(ue),v(Ce).from(ue);var De=Qn.reduce(function(d,h){return d[h]=h+"Error",d},{}),Me=ue,ye=Qn.reduce(function(d,h){var x=h+"Error";function S(T,j){this.name=x,T?typeof T=="string"?(this.message="".concat(T).concat(j?`
 `+j:""),this.inner=j||null):typeof T=="object"&&(this.message="".concat(T.name," ").concat(T.message),this.inner=T):(this.message=z[h]||x,this.inner=null)}return v(S).from(Me),d[h]=S,d},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var Qe=ke.reduce(function(d,h){return d[h+"Error"]=ye[h],d},{}),Ze=Qn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=ye[h]),d},{});function Ve(){}function Tt(d){return d}function P(d,h){return d==null||d===Tt?h:function(x){return h(d(x))}}function me(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function de(d,h){return d===Ve?h:function(){var x=d.apply(this,arguments);x!==void 0&&(arguments[0]=x);var S=this.onsuccess,T=this.onerror;this.onsuccess=null,this.onerror=null;var j=h.apply(this,arguments);return S&&(this.onsuccess=this.onsuccess?me(S,this.onsuccess):S),T&&(this.onerror=this.onerror?me(T,this.onerror):T),j!==void 0?j:x}}function B(d,h){return d===Ve?h:function(){d.apply(this,arguments);var x=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?me(x,this.onsuccess):x),S&&(this.onerror=this.onerror?me(S,this.onerror):S)}}function L(d,h){return d===Ve?h:function(x){var S=d.apply(this,arguments);l(x,S);var T=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,x=h.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?me(T,this.onsuccess):T),j&&(this.onerror=this.onerror?me(j,this.onerror):j),S===void 0?x===void 0?void 0:x:l(S,x)}}function X(d,h){return d===Ve?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function ve(d,h){return d===Ve?h:function(){var x=d.apply(this,arguments);if(x&&typeof x.then=="function"){for(var S=this,T=arguments.length,j=new Array(T);T--;)j[T]=arguments[T];return x.then(function(){return h.apply(S,j)})}return h.apply(this,arguments)}}Ze.ModifyError=ce,Ze.DexieError=ue,Ze.BulkError=Ce;var we=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ie(d){we=d}var _e={},Ne=100,Ue=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,u(h),d]}(),ke=Ue[0],Qn=Ue[1],Ue=Ue[2],Qn=Qn&&Qn.then,rt=ke&&ke.constructor,Xe=!!Ue,Ot=function(d,h){pr.push([d,h]),Ie&&(queueMicrotask(oT),Ie=!1)},qn=!0,Ie=!0,Ke=[],et=[],sn=Tt,Ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ve,pgp:!1,env:{},finalize:Ve},Le=Ht,pr=[],Gn=0,Es=[];function Pe(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Le;if(typeof d!="function"){if(d!==_e)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&mr(this,this._value))}this._state=null,this._value=null,++h.ref,function x(S,T){try{T(function(j){if(S._state===null){if(j===S)throw new TypeError("A promise cannot be resolved with itself.");var D=S._lib&&ko();j&&typeof j.then=="function"?x(S,function(U,W){j instanceof Pe?j._then(U,W):j.then(U,W)}):(S._state=!0,S._value=j,Iv(S)),D&&So()}},mr.bind(null,S))}catch(j){mr(S,j)}}(this,d)}var Jr={get:function(){var d=Le,h=Zu;function x(S,T){var j=this,D=!d.global&&(d!==Le||h!==Zu),U=D&&!Ts(),W=new Pe(function(H,Z){Gf(j,new Rr(Nv(S,d,D,U),Nv(T,d,D,U),H,Z,d))});return this._consoleTask&&(W._consoleTask=this._consoleTask),W}return x.prototype=_e,x},set:function(d){b(this,"then",d&&d.prototype===_e?Jr:{get:function(){return d},set:Jr.set})}};function Rr(d,h,x,S,T){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=x,this.reject=S,this.psd=T}function mr(d,h){var x,S;et.push(h),d._state===null&&(x=d._lib&&ko(),h=sn(h),d._state=!1,d._value=h,S=d,Ke.some(function(T){return T._value===S._value})||Ke.push(S),Iv(d),x&&So())}function Iv(d){var h=d._listeners;d._listeners=[];for(var x=0,S=h.length;x<S;++x)Gf(d,h[x]);var T=d._PSD;--T.ref||T.finalize(),Gn===0&&(++Gn,Ot(function(){--Gn==0&&Qf()},[]))}function Gf(d,h){if(d._state!==null){var x=d._state?h.onFulfilled:h.onRejected;if(x===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,Ot(iT,[x,d,h])}else d._listeners.push(h)}function iT(d,h,x){try{var S,T=h._value;!h._state&&et.length&&(et=[]),S=we&&h._consoleTask?h._consoleTask.run(function(){return d(T)}):d(T),h._state||et.indexOf(T)!==-1||function(j){for(var D=Ke.length;D;)if(Ke[--D]._value===j._value)return Ke.splice(D,1)}(h),x.resolve(S)}catch(j){x.reject(j)}finally{--Gn==0&&Qf(),--x.psd.ref||x.psd.finalize()}}function oT(){_i(Ht,function(){ko()&&So()})}function ko(){var d=qn;return Ie=qn=!1,d}function So(){var d,h,x;do for(;0<pr.length;)for(d=pr,pr=[],x=d.length,h=0;h<x;++h){var S=d[h];S[0].apply(null,S[1])}while(0<pr.length);Ie=qn=!0}function Qf(){var d=Ke;Ke=[],d.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)});for(var h=Es.slice(0),x=h.length;x;)h[--x]()}function Qu(d){return new Pe(_e,!1,d)}function vt(d,h){var x=Le;return function(){var S=ko(),T=Le;try{return Ps(x,!0),d.apply(this,arguments)}catch(j){h&&h(j)}finally{Ps(T,!1),S&&So()}}}p(Pe.prototype,{then:Jr,_then:function(d,h){Gf(this,new Rr(null,null,d,h,Le))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,x=arguments[1];return typeof h=="function"?this.then(null,function(S){return(S instanceof h?x:Qu)(S)}):this.then(null,function(S){return(S&&S.name===h?x:Qu)(S)})},finally:function(d){return this.then(function(h){return Pe.resolve(d()).then(function(){return h})},function(h){return Pe.resolve(d()).then(function(){return Qu(h)})})},timeout:function(d,h){var x=this;return d<1/0?new Pe(function(S,T){var j=setTimeout(function(){return T(new ye.Timeout(h))},d);x.then(S,T).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(Pe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ht.env=Dv(),p(Pe,{all:function(){var d=ge.apply(null,arguments).map(Xu);return new Pe(function(h,x){d.length===0&&h([]);var S=d.length;d.forEach(function(T,j){return Pe.resolve(T).then(function(D){d[j]=D,--S||h(d)},x)})})},resolve:function(d){return d instanceof Pe?d:d&&typeof d.then=="function"?new Pe(function(h,x){d.then(h,x)}):new Pe(_e,!0,d)},reject:Qu,race:function(){var d=ge.apply(null,arguments).map(Xu);return new Pe(function(h,x){d.map(function(S){return Pe.resolve(S).then(h,x)})})},PSD:{get:function(){return Le},set:function(d){return Le=d}},totalEchoes:{get:function(){return Zu}},newPSD:Cs,usePSD:_i,scheduler:{get:function(){return Ot},set:function(d){Ot=d}},rejectionMapper:{get:function(){return sn},set:function(d){sn=d}},follow:function(d,h){return new Pe(function(x,S){return Cs(function(T,j){var D=Le;D.unhandleds=[],D.onunhandled=j,D.finalize=me(function(){var U,W=this;U=function(){W.unhandleds.length===0?T():j(W.unhandleds[0])},Es.push(function H(){U(),Es.splice(Es.indexOf(H),1)}),++Gn,Ot(function(){--Gn==0&&Qf()},[])},D.finalize),d()},h,x,S)})}}),rt&&(rt.allSettled&&b(Pe,"allSettled",function(){var d=ge.apply(null,arguments).map(Xu);return new Pe(function(h){d.length===0&&h([]);var x=d.length,S=new Array(x);d.forEach(function(T,j){return Pe.resolve(T).then(function(D){return S[j]={status:"fulfilled",value:D}},function(D){return S[j]={status:"rejected",reason:D}}).then(function(){return--x||h(S)})})})}),rt.any&&typeof AggregateError<"u"&&b(Pe,"any",function(){var d=ge.apply(null,arguments).map(Xu);return new Pe(function(h,x){d.length===0&&x(new AggregateError([]));var S=d.length,T=new Array(S);d.forEach(function(j,D){return Pe.resolve(j).then(function(U){return h(U)},function(U){T[D]=U,--S||x(new AggregateError(T))})})})}),rt.withResolvers&&(Pe.withResolvers=rt.withResolvers));var qt={awaits:0,echoes:0,id:0},aT=0,Yu=[],Ju=0,Zu=0,lT=0;function Cs(d,h,x,S){var T=Le,j=Object.create(T);return j.parent=T,j.ref=0,j.global=!1,j.id=++lT,Ht.env,j.env=Xe?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,allSettled:Pe.allSettled,any:Pe.any,resolve:Pe.resolve,reject:Pe.reject}:{},h&&l(j,h),++T.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},S=_i(j,d,x,S),j.ref===0&&j.finalize(),S}function Eo(){return qt.id||(qt.id=++aT),++qt.awaits,qt.echoes+=Ne,qt.id}function Ts(){return!!qt.awaits&&(--qt.awaits==0&&(qt.id=0),qt.echoes=qt.awaits*Ne,!0)}function Xu(d){return qt.echoes&&d&&d.constructor===rt?(Eo(),d.then(function(h){return Ts(),h},function(h){return Ts(),Rt(h)})):d}function uT(){var d=Yu[Yu.length-1];Yu.pop(),Ps(d,!1)}function Ps(d,h){var x,S=Le;(h?!qt.echoes||Ju++&&d===Le:!Ju||--Ju&&d===Le)||queueMicrotask(h?(function(T){++Zu,qt.echoes&&--qt.echoes!=0||(qt.echoes=qt.awaits=qt.id=0),Yu.push(Le),Ps(T,!0)}).bind(null,d):uT),d!==Le&&(Le=d,S===Ht&&(Ht.env=Dv()),Xe&&(x=Ht.env.Promise,h=d.env,(S.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),x.all=h.all,x.race=h.race,x.resolve=h.resolve,x.reject=h.reject,h.allSettled&&(x.allSettled=h.allSettled),h.any&&(x.any=h.any))))}function Dv(){var d=i.Promise;return Xe?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function _i(d,h,x,S,T){var j=Le;try{return Ps(d,!0),h(x,S,T)}finally{Ps(j,!1)}}function Nv(d,h,x,S){return typeof d!="function"?d:function(){var T=Le;x&&Eo(),Ps(h,!0);try{return d.apply(this,arguments)}finally{Ps(T,!1),S&&queueMicrotask(Ts)}}}function Yf(d){Promise===rt&&qt.echoes===0?Ju===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Qn).indexOf("[native code]")===-1&&(Eo=Ts=Ve);var Rt=Pe.reject,ki="",Zr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Lv="String expected.",Co=[],ec="__dbnames",Jf="readonly",Zf="readwrite";function Si(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var $v={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tc(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=ne(h))[d],h}}function Mv(){throw ye.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function it(d,h){try{var x=Fv(d),S=Fv(h);if(x!==S)return x==="Array"?1:S==="Array"?-1:x==="binary"?1:S==="binary"?-1:x==="string"?1:S==="string"?-1:x==="Date"?1:S!=="Date"?NaN:-1;switch(x){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return function(T,j){for(var D=T.length,U=j.length,W=D<U?D:U,H=0;H<W;++H)if(T[H]!==j[H])return T[H]<j[H]?-1:1;return D===U?0:D<U?-1:1}(Bv(d),Bv(h));case"Array":return function(T,j){for(var D=T.length,U=j.length,W=D<U?D:U,H=0;H<W;++H){var Z=it(T[H],j[H]);if(Z!==0)return Z}return D===U?0:D<U?-1:1}(d,h)}}catch{}return NaN}function Fv(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=J(d),d==="ArrayBuffer"?"binary":d)}function Bv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function nc(d,h,x){var S=d.schema.yProps;return S?(h&&0<x.numFailures&&(h=h.filter(function(T,j){return!x.failures[j]})),Promise.all(S.map(function(T){return T=T.updatesTable,h?d.db.table(T).where("k").anyOf(h).delete():d.db.table(T).clear()})).then(function(){return x})):x}var qa=(Uv.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var x=h.add;if(a(x))return s(s([],a(d)?d:[],!0),x).sort();if(typeof x=="number")return(Number(d)||0)+x;if(typeof x=="bigint")try{return BigInt(d)+x}catch{return BigInt(0)+x}throw new TypeError("Invalid term ".concat(x))}if(h.remove!==void 0){var S=h.remove;if(a(S))return a(d)?d.filter(function(T){return!S.includes(T)}).sort():[];if(typeof S=="number")return Number(d)-S;if(typeof S=="bigint")try{return BigInt(d)-S}catch{return BigInt(0)-S}throw new TypeError("Invalid subtrahend ".concat(S))}return x=(x=h.replacePrefix)===null||x===void 0?void 0:x[0],x&&typeof d=="string"&&d.startsWith(x)?h.replacePrefix[1]+d.substring(x.length):d},Uv);function Uv(d){this["@@propmod"]=d}function zv(d,h){for(var x=o(h),S=x.length,T=!1,j=0;j<S;++j){var D=x[j],U=h[D],W=I(d,D);U instanceof qa?(R(d,D,U.execute(W)),T=!0):W!==U&&(R(d,D,U),T=!0)}return T}var Vv=(ht.prototype._trans=function(d,h,x){var S=this._tx||Le.trans,T=this.name,j=we&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function D(H,Z,K){if(!K.schema[T])throw new ye.NotFound("Table "+T+" not part of transaction");return h(K.idbtrans,K)}var U=ko();try{var W=S&&S.db._novip===this.db._novip?S===Le.trans?S._promise(d,D,x):Cs(function(){return S._promise(d,D,x)},{trans:S,transless:Le.transless||Le}):function H(Z,K,te,G){if(Z.idbdb&&(Z._state.openComplete||Le.letThrough||Z._vip)){var Q=Z._createTransaction(K,te,Z._dbSchema);try{Q.create(),Z._state.PR1398_maxLoop=3}catch(Y){return Y.name===De.InvalidState&&Z.isOpen()&&0<--Z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Z.close({disableAutoOpen:!1}),Z.open().then(function(){return H(Z,K,te,G)})):Rt(Y)}return Q._promise(K,function(Y,ee){return Cs(function(){return Le.trans=Q,G(Y,ee,Q)})}).then(function(Y){if(K==="readwrite")try{Q.idbtrans.commit()}catch{}return K==="readonly"?Y:Q._completion.then(function(){return Y})})}if(Z._state.openComplete)return Rt(new ye.DatabaseClosed(Z._state.dbOpenError));if(!Z._state.isBeingOpened){if(!Z._state.autoOpen)return Rt(new ye.DatabaseClosed);Z.open().catch(Ve)}return Z._state.dbReadyPromise.then(function(){return H(Z,K,te,G)})}(this.db,d,[this.name],D);return j&&(W._consoleTask=j,W=W.catch(function(H){return console.trace(H),Rt(H)})),W}finally{U&&So()}},ht.prototype.get=function(d,h){var x=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Rt(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return x.core.get({trans:S,key:d}).then(function(T){return x.hook.reading.fire(T)})}).then(h)},ht.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var x=this.schema.indexes.concat(this.schema.primKey).filter(function(U){if(U.compound&&h.every(function(H){return 0<=U.keyPath.indexOf(H)})){for(var W=0;W<h.length;++W)if(h.indexOf(U.keyPath[W])===-1)return!1;return!0}return!1}).sort(function(U,W){return U.keyPath.length-W.keyPath.length})[0];if(x&&this.db._maxKey!==ki){var j=x.keyPath.slice(0,h.length);return this.where(j).equals(j.map(function(W){return d[W]}))}!x&&we&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var S=this.schema.idxByName;function T(U,W){return it(U,W)===0}var D=h.reduce(function(K,W){var H=K[0],Z=K[1],K=S[W],te=d[W];return[H||K,H||!K?Si(Z,K&&K.multi?function(G){return G=I(G,W),a(G)&&G.some(function(Q){return T(te,Q)})}:function(G){return T(te,I(G,W))}):Z]},[null,null]),j=D[0],D=D[1];return j?this.where(j.name).equals(d[j.keyPath]).filter(D):x?this.filter(D):this.where(h).equals("")},ht.prototype.filter=function(d){return this.toCollection().and(d)},ht.prototype.count=function(d){return this.toCollection().count(d)},ht.prototype.offset=function(d){return this.toCollection().offset(d)},ht.prototype.limit=function(d){return this.toCollection().limit(d)},ht.prototype.each=function(d){return this.toCollection().each(d)},ht.prototype.toArray=function(d){return this.toCollection().toArray(d)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(d){var h,x=this.db,S=this.name;function T(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Mv&&(function(W,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function Z(){this.constructor=W}n(W,H),W.prototype=H===null?Object.create(H):(Z.prototype=H.prototype,new Z)}(T,h=d),Object.defineProperty(T.prototype,"db",{get:function(){return x},enumerable:!1,configurable:!0}),T.prototype.table=function(){return S},d=T);for(var j=new Set,D=d.prototype;D;D=u(D))Object.getOwnPropertyNames(D).forEach(function(W){return j.add(W)});function U(W){if(!W)return W;var H,Z=Object.create(d.prototype);for(H in W)if(!j.has(H))try{Z[H]=W[H]}catch{}return Z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=U,this.hook("reading",U),d},ht.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},ht.prototype.add=function(d,h){var x=this,S=this.schema.primKey,T=S.auto,j=S.keyPath,D=d;return j&&T&&(D=tc(j)(d)),this._trans("readwrite",function(U){return x.core.mutate({trans:U,type:"add",keys:h!=null?[h]:null,values:[D]})}).then(function(U){return U.numFailures?Pe.reject(U.failures[0]):U.lastResult}).then(function(U){if(j)try{R(d,j,U)}catch{}return U})},ht.prototype.upsert=function(d,h){var x=this,S=this.schema.primKey.keyPath;return this._trans("readwrite",function(T){return x.core.get({trans:T,key:d}).then(function(j){var D=j??{};return zv(D,h),S&&R(D,S,d),x.core.mutate({trans:T,type:"put",values:[D],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[h]}}).then(function(U){return U.numFailures?Pe.reject(U.failures[0]):!!j})})})},ht.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=I(d,this.schema.primKey.keyPath),d===void 0?Rt(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},ht.prototype.put=function(d,h){var x=this,S=this.schema.primKey,T=S.auto,j=S.keyPath,D=d;return j&&T&&(D=tc(j)(d)),this._trans("readwrite",function(U){return x.core.mutate({trans:U,type:"put",values:[D],keys:h!=null?[h]:null})}).then(function(U){return U.numFailures?Pe.reject(U.failures[0]):U.lastResult}).then(function(U){if(j)try{R(d,j,U)}catch{}return U})},ht.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(x){return h.core.mutate({trans:x,type:"delete",keys:[d]}).then(function(S){return nc(h,[d],S)}).then(function(S){return S.numFailures?Pe.reject(S.failures[0]):void 0})})},ht.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:$v}).then(function(x){return nc(d,null,x)})}).then(function(h){return h.numFailures?Pe.reject(h.failures[0]):void 0})},ht.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(x){return h.core.getMany({keys:d,trans:x}).then(function(S){return S.map(function(T){return h.hook.reading.fire(T)})})})},ht.prototype.bulkAdd=function(d,h,x){var S=this,T=Array.isArray(h)?h:void 0,j=(x=x||(T?void 0:h))?x.allKeys:void 0;return this._trans("readwrite",function(D){var H=S.schema.primKey,U=H.auto,H=H.keyPath;if(H&&T)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var W=d.length,H=H&&U?d.map(tc(H)):d;return S.core.mutate({trans:D,type:"add",keys:T,values:H,wantResults:j}).then(function(Q){var K=Q.numFailures,te=Q.results,G=Q.lastResult,Q=Q.failures;if(K===0)return j?te:G;throw new Ce("".concat(S.name,".bulkAdd(): ").concat(K," of ").concat(W," operations failed"),Q)})})},ht.prototype.bulkPut=function(d,h,x){var S=this,T=Array.isArray(h)?h:void 0,j=(x=x||(T?void 0:h))?x.allKeys:void 0;return this._trans("readwrite",function(D){var H=S.schema.primKey,U=H.auto,H=H.keyPath;if(H&&T)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(T&&T.length!==d.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var W=d.length,H=H&&U?d.map(tc(H)):d;return S.core.mutate({trans:D,type:"put",keys:T,values:H,wantResults:j}).then(function(Q){var K=Q.numFailures,te=Q.results,G=Q.lastResult,Q=Q.failures;if(K===0)return j?te:G;throw new Ce("".concat(S.name,".bulkPut(): ").concat(K," of ").concat(W," operations failed"),Q)})})},ht.prototype.bulkUpdate=function(d){var h=this,x=this.core,S=d.map(function(D){return D.key}),T=d.map(function(D){return D.changes}),j=[];return this._trans("readwrite",function(D){return x.getMany({trans:D,keys:S,cache:"clone"}).then(function(U){var W=[],H=[];d.forEach(function(K,te){var G=K.key,Q=K.changes,Y=U[te];if(Y){for(var ee=0,se=Object.keys(Q);ee<se.length;ee++){var le=se[ee],pe=Q[le];if(le===h.schema.primKey.keyPath){if(it(pe,G)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else R(Y,le,pe)}j.push(te),W.push(G),H.push(Y)}});var Z=W.length;return x.mutate({trans:D,type:"put",keys:W,values:H,updates:{keys:S,changeSpecs:T}}).then(function(K){var te=K.numFailures,G=K.failures;if(te===0)return Z;for(var Q=0,Y=Object.keys(G);Q<Y.length;Q++){var ee,se=Y[Q],le=j[Number(se)];le!=null&&(ee=G[se],delete G[se],G[le]=ee)}throw new Ce("".concat(h.name,".bulkUpdate(): ").concat(te," of ").concat(Z," operations failed"),G)})})})},ht.prototype.bulkDelete=function(d){var h=this,x=d.length;return this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"delete",keys:d}).then(function(T){return nc(h,d,T)})}).then(function(D){var T=D.numFailures,j=D.lastResult,D=D.failures;if(T===0)return j;throw new Ce("".concat(h.name,".bulkDelete(): ").concat(T," of ").concat(x," operations failed"),D)})},ht);function ht(){}function Ga(d){function h(D,U){if(U){for(var W=arguments.length,H=new Array(W-1);--W;)H[W-1]=arguments[W];return x[D].subscribe.apply(null,H),d}if(typeof D=="string")return x[D]}var x={};h.addEventType=j;for(var S=1,T=arguments.length;S<T;++S)j(arguments[S]);return h;function j(D,U,W){if(typeof D!="object"){var H;U=U||X;var Z={subscribers:[],fire:W=W||Ve,subscribe:function(K){Z.subscribers.indexOf(K)===-1&&(Z.subscribers.push(K),Z.fire=U(Z.fire,K))},unsubscribe:function(K){Z.subscribers=Z.subscribers.filter(function(te){return te!==K}),Z.fire=Z.subscribers.reduce(U,W)}};return x[D]=h[D]=Z}o(H=D).forEach(function(K){var te=H[K];if(a(te))j(K,H[K][0],H[K][1]);else{if(te!=="asap")throw new ye.InvalidArgument("Invalid event config");var G=j(K,Tt,function(){for(var Q=arguments.length,Y=new Array(Q);Q--;)Y[Q]=arguments[Q];G.subscribers.forEach(function(ee){O(function(){ee.apply(null,Y)})})})}})}}function Qa(d,h){return v(h).from({prototype:d}),h}function To(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Xf(d,h){d.filter=Si(d.filter,h)}function eh(d,h,x){var S=d.replayFilter;d.replayFilter=S?function(){return Si(S(),h())}:h,d.justLimit=x&&!S}function rc(d,h){if(d.isPrimKey)return h.primaryKey;var x=h.getIndexByKeyPath(d.index);if(!x)throw new ye.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return x}function Kv(d,h,x){var S=rc(d,h.schema);return h.openCursor({trans:x,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:S,range:d.range}})}function sc(d,h,x,S){var T=d.replayFilter?Si(d.filter,d.replayFilter()):d.filter;if(d.or){var j={},D=function(U,W,H){var Z,K;T&&!T(W,H,function(te){return W.stop(te)},function(te){return W.fail(te)})||((K=""+(Z=W.primaryKey))=="[object ArrayBuffer]"&&(K=""+new Uint8Array(Z)),f(j,K)||(j[K]=!0,h(U,W,H)))};return Promise.all([d.or._iterate(D,x),Wv(Kv(d,S,x),d.algorithm,D,!d.keysOnly&&d.valueMapper)])}return Wv(Kv(d,S,x),Si(d.algorithm,T),h,!d.keysOnly&&d.valueMapper)}function Wv(d,h,x,S){var T=vt(S?function(j,D,U){return x(S(j),D,U)}:x);return d.then(function(j){if(j)return j.start(function(){var D=function(){return j.continue()};h&&!h(j,function(U){return D=U},function(U){j.stop(U),D=Ve},function(U){j.fail(U),D=Ve})||T(j.value,j,function(U){return D=U}),D()})})}var cT=(ut.prototype._read=function(d,h){var x=this._ctx;return x.error?x.table._trans(null,Rt.bind(null,x.error)):x.table._trans("readonly",d).then(h)},ut.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Rt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ut.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=Si(h.algorithm,d)},ut.prototype._iterate=function(d,h){return sc(this._ctx,d,h,this._ctx.table.core)},ut.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),x=Object.create(this._ctx);return d&&l(x,d),h._ctx=x,h},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(d){var h=this._ctx;return this._read(function(x){return sc(h,d,x,h.table.core)})},ut.prototype.count=function(d){var h=this;return this._read(function(x){var S=h._ctx,T=S.table.core;if(To(S,!0))return T.count({trans:x,query:{index:rc(S,T.schema),range:S.range}}).then(function(D){return Math.min(D,S.limit)});var j=0;return sc(S,function(){return++j,!1},x,T).then(function(){return j})}).then(d)},ut.prototype.sortBy=function(d,h){var x=d.split(".").reverse(),S=x[0],T=x.length-1;function j(W,H){return H?j(W[x[H]],H-1):W[S]}var D=this._ctx.dir==="next"?1:-1;function U(W,H){return it(j(W,T),j(H,T))*D}return this.toArray(function(W){return W.sort(U)}).then(h)},ut.prototype.toArray=function(d){var h=this;return this._read(function(x){var S=h._ctx;if(S.dir==="next"&&To(S,!0)&&0<S.limit){var T=S.valueMapper,j=rc(S,S.table.core.schema);return S.table.core.query({trans:x,limit:S.limit,values:!0,query:{index:j,range:S.range}}).then(function(U){return U=U.result,T?U.map(T):U})}var D=[];return sc(S,function(U){return D.push(U)},x,S.table.core).then(function(){return D})},d)},ut.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,To(h)?eh(h,function(){var x=d;return function(S,T){return x===0||(x===1?--x:T(function(){S.advance(x),x=0}),!1)}}):eh(h,function(){var x=d;return function(){return--x<0}})),this},ut.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),eh(this._ctx,function(){var h=d;return function(x,S,T){return--h<=0&&S(T),0<=h}},!0),this},ut.prototype.until=function(d,h){return Xf(this._ctx,function(x,S,T){return!d(x.value)||(S(T),h)}),this},ut.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ut.prototype.last=function(d){return this.reverse().first(d)},ut.prototype.filter=function(d){var h;return Xf(this._ctx,function(x){return d(x.value)}),(h=this._ctx).isMatch=Si(h.isMatch,d),this},ut.prototype.and=function(d){return this.filter(d)},ut.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(x,S){d(S.key,S)})},ut.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ut.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(x,S){d(S.primaryKey,S)})},ut.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var x=[];return this.each(function(S,T){x.push(T.key)}).then(function(){return x}).then(d)},ut.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&To(h,!0)&&0<h.limit)return this._read(function(S){var T=rc(h,h.table.core.schema);return h.table.core.query({trans:S,values:!1,limit:h.limit,query:{index:T,range:h.range}})}).then(function(S){return S.result}).then(d);h.keysOnly=!h.isMatch;var x=[];return this.each(function(S,T){x.push(T.primaryKey)}).then(function(){return x}).then(d)},ut.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ut.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ut.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ut.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Xf(this._ctx,function(T){var S=T.primaryKey.toString(),T=f(h,S);return h[S]=!0,!T}),this},ut.prototype.modify=function(d){var h=this,x=this._ctx;return this._write(function(S){var T=typeof d=="function"?d:function(Y){return zv(Y,d)},j=x.table.core,H=j.schema.primaryKey,D=H.outbound,U=H.extractKey,W=200,H=h.db._options.modifyChunkSize;H&&(W=typeof H=="object"?H[j.name]||H["*"]||200:H);function Z(Y,le){var se=le.failures,le=le.numFailures;te+=Y-le;for(var pe=0,be=o(se);pe<be.length;pe++){var Te=be[pe];K.push(se[Te])}}var K=[],te=0,G=[],Q=d===Hv;return h.clone().primaryKeys().then(function(Y){function ee(le){var pe=Math.min(W,Y.length-le),be=Y.slice(le,le+pe);return(Q?Promise.resolve([]):j.getMany({trans:S,keys:be,cache:"immutable"})).then(function(Te){var Oe=[],Ee=[],Ae=D?[]:null,Re=Q?be:[];if(!Q)for(var je=0;je<pe;++je){var Fe=Te[je],Je={value:ne(Fe),primKey:Y[le+je]};T.call(Je,Je.value,Je)!==!1&&(Je.value==null?Re.push(Y[le+je]):D||it(U(Fe),U(Je.value))===0?(Ee.push(Je.value),D&&Ae.push(Y[le+je])):(Re.push(Y[le+je]),Oe.push(Je.value)))}return Promise.resolve(0<Oe.length&&j.mutate({trans:S,type:"add",values:Oe}).then(function(tt){for(var nt in tt.failures)Re.splice(parseInt(nt),1);Z(Oe.length,tt)})).then(function(){return(0<Ee.length||se&&typeof d=="object")&&j.mutate({trans:S,type:"put",keys:Ae,values:Ee,criteria:se,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<le}).then(function(tt){return Z(Ee.length,tt)})}).then(function(){return(0<Re.length||se&&Q)&&j.mutate({trans:S,type:"delete",keys:Re,criteria:se,isAdditionalChunk:0<le}).then(function(tt){return nc(x.table,Re,tt)}).then(function(tt){return Z(Re.length,tt)})}).then(function(){return Y.length>le+pe&&ee(le+W)})})}var se=To(x)&&x.limit===1/0&&(typeof d!="function"||Q)&&{index:x.index,range:x.range};return ee(0).then(function(){if(0<K.length)throw new ce("Error modifying one or more objects",K,te,G);return Y.length})})})},ut.prototype.delete=function(){var d=this._ctx,h=d.range;return!To(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Hv):this._write(function(x){var S=d.table.core.schema.primaryKey,T=h;return d.table.core.count({trans:x,query:{index:S,range:T}}).then(function(j){return d.table.core.mutate({trans:x,type:"deleteRange",range:T}).then(function(W){var U=W.failures,W=W.numFailures;if(W)throw new ce("Could not delete some values",Object.keys(U).map(function(H){return U[H]}),j-W);return j-W})})})},ut);function ut(){}var Hv=function(d,h){return h.value=null};function dT(d,h){return d<h?-1:d===h?0:1}function fT(d,h){return h<d?-1:d===h?0:1}function $n(d,h,x){return d=d instanceof Gv?new d.Collection(d):d,d._ctx.error=new(x||TypeError)(h),d}function Po(d){return new d.Collection(d,function(){return qv("")}).limit(0)}function ic(d,h,x,S){var T,j,D,U,W,H,Z,K=x.length;if(!x.every(function(Q){return typeof Q=="string"}))return $n(d,Lv);function te(Q){T=Q==="next"?function(ee){return ee.toUpperCase()}:function(ee){return ee.toLowerCase()},j=Q==="next"?function(ee){return ee.toLowerCase()}:function(ee){return ee.toUpperCase()},D=Q==="next"?dT:fT;var Y=x.map(function(ee){return{lower:j(ee),upper:T(ee)}}).sort(function(ee,se){return D(ee.lower,se.lower)});U=Y.map(function(ee){return ee.upper}),W=Y.map(function(ee){return ee.lower}),Z=(H=Q)==="next"?"":S}te("next"),d=new d.Collection(d,function(){return As(U[0],W[K-1]+S)}),d._ondirectionchange=function(Q){te(Q)};var G=0;return d._addAlgorithm(function(Q,Y,ee){var se=Q.key;if(typeof se!="string")return!1;var le=j(se);if(h(le,W,G))return!0;for(var pe=null,be=G;be<K;++be){var Te=function(Oe,Ee,Ae,Re,je,Fe){for(var Je=Math.min(Oe.length,Re.length),tt=-1,nt=0;nt<Je;++nt){var Mn=Ee[nt];if(Mn!==Re[nt])return je(Oe[nt],Ae[nt])<0?Oe.substr(0,nt)+Ae[nt]+Ae.substr(nt+1):je(Oe[nt],Re[nt])<0?Oe.substr(0,nt)+Re[nt]+Ae.substr(nt+1):0<=tt?Oe.substr(0,tt)+Ee[tt]+Ae.substr(tt+1):null;je(Oe[nt],Mn)<0&&(tt=nt)}return Je<Re.length&&Fe==="next"?Oe+Ae.substr(Oe.length):Je<Oe.length&&Fe==="prev"?Oe.substr(0,Ae.length):tt<0?null:Oe.substr(0,tt)+Re[tt]+Ae.substr(tt+1)}(se,le,U[be],W[be],D,H);Te===null&&pe===null?G=be+1:(pe===null||0<D(pe,Te))&&(pe=Te)}return Y(pe!==null?function(){Q.continue(pe+Z)}:ee),!1}),d}function As(d,h,x,S){return{type:2,lower:d,upper:h,lowerOpen:x,upperOpen:S}}function qv(d){return{type:1,lower:d,upper:d}}var Gv=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(d,h,x,S){x=x!==!1,S=S===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(x||S)&&(!x||!S)?Po(this):new this.Collection(this,function(){return As(d,h,!x,!S)})}catch{return $n(this,Zr)}},Gt.prototype.equals=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return qv(d)})},Gt.prototype.above=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(d,void 0,!0)})},Gt.prototype.aboveOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(d,void 0,!1)})},Gt.prototype.below=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(void 0,d,!1,!0)})},Gt.prototype.belowOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return As(void 0,d)})},Gt.prototype.startsWith=function(d){return typeof d!="string"?$n(this,Lv):this.between(d,d+ki,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):ic(this,function(h,x){return h.indexOf(x[0])===0},[d],ki)},Gt.prototype.equalsIgnoreCase=function(d){return ic(this,function(h,x){return h===x[0]},[d],"")},Gt.prototype.anyOfIgnoreCase=function(){var d=ge.apply(re,arguments);return d.length===0?Po(this):ic(this,function(h,x){return x.indexOf(h)!==-1},d,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var d=ge.apply(re,arguments);return d.length===0?Po(this):ic(this,function(h,x){return x.some(function(S){return h.indexOf(S)===0})},d,ki)},Gt.prototype.anyOf=function(){var d=this,h=ge.apply(re,arguments),x=this._cmp;try{h.sort(x)}catch{return $n(this,Zr)}if(h.length===0)return Po(this);var S=new this.Collection(this,function(){return As(h[0],h[h.length-1])});S._ondirectionchange=function(j){x=j==="next"?d._ascending:d._descending,h.sort(x)};var T=0;return S._addAlgorithm(function(j,D,U){for(var W=j.key;0<x(W,h[T]);)if(++T===h.length)return D(U),!1;return x(W,h[T])===0||(D(function(){j.continue(h[T])}),!1)}),S},Gt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var d=ge.apply(re,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return $n(this,Zr)}var h=d.reduce(function(x,S){return x?x.concat([[x[x.length-1][1],S]]):[[-1/0,S]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(se,h){var x=this,S=this._cmp,T=this._ascending,j=this._descending,D=this._min,U=this._max;if(se.length===0)return Po(this);if(!se.every(function(le){return le[0]!==void 0&&le[1]!==void 0&&T(le[0],le[1])<=0}))return $n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var W=!h||h.includeLowers!==!1,H=h&&h.includeUppers===!0,Z,K=T;function te(le,pe){return K(le[0],pe[0])}try{(Z=se.reduce(function(le,pe){for(var be=0,Te=le.length;be<Te;++be){var Oe=le[be];if(S(pe[0],Oe[1])<0&&0<S(pe[1],Oe[0])){Oe[0]=D(Oe[0],pe[0]),Oe[1]=U(Oe[1],pe[1]);break}}return be===Te&&le.push(pe),le},[])).sort(te)}catch{return $n(this,Zr)}var G=0,Q=H?function(le){return 0<T(le,Z[G][1])}:function(le){return 0<=T(le,Z[G][1])},Y=W?function(le){return 0<j(le,Z[G][0])}:function(le){return 0<=j(le,Z[G][0])},ee=Q,se=new this.Collection(this,function(){return As(Z[0][0],Z[Z.length-1][1],!W,!H)});return se._ondirectionchange=function(le){K=le==="next"?(ee=Q,T):(ee=Y,j),Z.sort(te)},se._addAlgorithm(function(le,pe,be){for(var Te,Oe=le.key;ee(Oe);)if(++G===Z.length)return pe(be),!1;return!Q(Te=Oe)&&!Y(Te)||(x._cmp(Oe,Z[G][1])===0||x._cmp(Oe,Z[G][0])===0||pe(function(){K===T?le.continue(Z[G][0]):le.continue(Z[G][1])}),!1)}),se},Gt.prototype.startsWithAnyOf=function(){var d=ge.apply(re,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?Po(this):this.inAnyRange(d.map(function(h){return[h,h+ki]})):$n(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Ir(d){return vt(function(h){return Ya(h),d(h.target.error),!1})}function Ya(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Ja="storagemutated",th="x-storagemutated-1",js=Ga(null,Ja),hT=(Dr.prototype._lock=function(){return C(!Le.global),++this._reculock,this._reculock!==1||Le.global||(Le.lockOwnerFor=this),this},Dr.prototype._unlock=function(){if(C(!Le.global),--this._reculock==0)for(Le.global||(Le.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{_i(d[1],d[0])}catch{}}return this},Dr.prototype._locked=function(){return this._reculock&&Le.lockOwnerFor!==this},Dr.prototype.create=function(d){var h=this;if(!this.mode)return this;var x=this.db.idbdb,S=this.db._state.dbOpenError;if(C(!this.idbtrans),!d&&!x)switch(S&&S.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(S);case"MissingAPIError":throw new ye.MissingAPI(S.message,S);default:throw new ye.OpenFailed(S)}if(!this.active)throw new ye.TransactionInactive;return C(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||x).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(T){Ya(T),h._reject(d.error)}),d.onabort=vt(function(T){Ya(T),h.active&&h._reject(new ye.Abort(d.error)),h.active=!1,h.on("abort").fire(T)}),d.oncomplete=vt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&js.storagemutated.fire(d.mutatedParts)}),this},Dr.prototype._promise=function(d,h,x){var S=this;if(d==="readwrite"&&this.mode!=="readwrite")return Rt(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new ye.TransactionInactive);if(this._locked())return new Pe(function(j,D){S._blockedFuncs.push([function(){S._promise(d,h,x).then(j,D)},Le])});if(x)return Cs(function(){var j=new Pe(function(D,U){S._lock();var W=h(D,U,S);W&&W.then&&W.then(D,U)});return j.finally(function(){return S._unlock()}),j._lib=!0,j});var T=new Pe(function(j,D){var U=h(j,D,S);U&&U.then&&U.then(j,D)});return T._lib=!0,T},Dr.prototype._root=function(){return this.parent?this.parent._root():this},Dr.prototype.waitFor=function(d){var h,x=this._root(),S=Pe.resolve(d);x._waitingFor?x._waitingFor=x._waitingFor.then(function(){return S}):(x._waitingFor=S,x._waitingQueue=[],h=x.idbtrans.objectStore(x.storeNames[0]),function j(){for(++x._spinCount;x._waitingQueue.length;)x._waitingQueue.shift()();x._waitingFor&&(h.get(-1/0).onsuccess=j)}());var T=x._waitingFor;return new Pe(function(j,D){S.then(function(U){return x._waitingQueue.push(vt(j.bind(null,U)))},function(U){return x._waitingQueue.push(vt(D.bind(null,U)))}).finally(function(){x._waitingFor===T&&(x._waitingFor=null)})})},Dr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},Dr.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var x=this.schema[d];if(!x)throw new ye.NotFound("Table "+d+" not part of transaction");return x=new this.db.Table(d,x,this),x.core=this.db.core.table(d),h[d]=x},Dr);function Dr(){}function nh(d,h,x,S,T,j,D,U){return{name:d,keyPath:h,unique:x,multi:S,auto:T,compound:j,src:(x&&!D?"&":"")+(S?"*":"")+(T?"++":"")+Qv(h),type:U}}function Qv(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function rh(d,h,x){return{name:d,primKey:h,indexes:x,mappedClass:null,idxByName:(S=function(T){return[T.name,T]},x.reduce(function(T,j,D){return D=S(j,D),D&&(T[D[0]]=D[1]),T},{}))};var S}var Za=function(d){try{return d.only([[]]),Za=function(){return[[]]},[[]]}catch{return Za=function(){return ki},ki}};function sh(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(x){return x[h]}:function(x){return I(x,h)}:function(x){return I(x,d)};var h}function Yv(d){return[].slice.call(d)}var pT=0;function Xa(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function mT(d,h,W){function S(ee){if(ee.type===3)return null;if(ee.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var G=ee.lower,Q=ee.upper,Y=ee.lowerOpen,ee=ee.upperOpen;return G===void 0?Q===void 0?null:h.upperBound(Q,!!ee):Q===void 0?h.lowerBound(G,!!Y):h.bound(G,Q,!!Y,!!ee)}function T(te){var G,Q=te.name;return{name:Q,schema:te,mutate:function(Y){var ee=Y.trans,se=Y.type,le=Y.keys,pe=Y.values,be=Y.range;return new Promise(function(Te,Oe){Te=vt(Te);var Ee=ee.objectStore(Q),Ae=Ee.keyPath==null,Re=se==="put"||se==="add";if(!Re&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var je,Fe=(le||pe||{length:1}).length;if(le&&pe&&le.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Te({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(gn){++Mn,Ya(gn)}var tt=[],nt=[],Mn=0;if(se==="deleteRange"){if(be.type===4)return Te({numFailures:Mn,failures:nt,results:[],lastResult:void 0});be.type===3?tt.push(je=Ee.clear()):tt.push(je=Ee.delete(S(be)))}else{var Ae=Re?Ae?[pe,le]:[pe,null]:[le,null],Ye=Ae[0],an=Ae[1];if(Re)for(var ln=0;ln<Fe;++ln)tt.push(je=an&&an[ln]!==void 0?Ee[se](Ye[ln],an[ln]):Ee[se](Ye[ln])),je.onerror=Je;else for(ln=0;ln<Fe;++ln)tt.push(je=Ee[se](Ye[ln])),je.onerror=Je}function yc(gn){gn=gn.target.result,tt.forEach(function(Ti,_h){return Ti.error!=null&&(nt[_h]=Ti.error)}),Te({numFailures:Mn,failures:nt,results:se==="delete"?le:tt.map(function(Ti){return Ti.result}),lastResult:gn})}je.onerror=function(gn){Je(gn),yc(gn)},je.onsuccess=yc})},getMany:function(Y){var ee=Y.trans,se=Y.keys;return new Promise(function(le,pe){le=vt(le);for(var be,Te=ee.objectStore(Q),Oe=se.length,Ee=new Array(Oe),Ae=0,Re=0,je=function(tt){tt=tt.target,Ee[tt._pos]=tt.result,++Re===Ae&&le(Ee)},Fe=Ir(pe),Je=0;Je<Oe;++Je)se[Je]!=null&&((be=Te.get(se[Je]))._pos=Je,be.onsuccess=je,be.onerror=Fe,++Ae);Ae===0&&le(Ee)})},get:function(Y){var ee=Y.trans,se=Y.key;return new Promise(function(le,pe){le=vt(le);var be=ee.objectStore(Q).get(se);be.onsuccess=function(Te){return le(Te.target.result)},be.onerror=Ir(pe)})},query:(G=H,function(Y){return new Promise(function(ee,se){ee=vt(ee);var le,pe,be,Ae=Y.trans,Te=Y.values,Oe=Y.limit,je=Y.query,Ee=Oe===1/0?void 0:Oe,Re=je.index,je=je.range,Ae=Ae.objectStore(Q),Re=Re.isPrimaryKey?Ae:Ae.index(Re.name),je=S(je);if(Oe===0)return ee({result:[]});G?((Ee=Te?Re.getAll(je,Ee):Re.getAllKeys(je,Ee)).onsuccess=function(Fe){return ee({result:Fe.target.result})},Ee.onerror=Ir(se)):(le=0,pe=!Te&&"openKeyCursor"in Re?Re.openKeyCursor(je):Re.openCursor(je),be=[],pe.onsuccess=function(Fe){var Je=pe.result;return Je?(be.push(Te?Je.value:Je.primaryKey),++le===Oe?ee({result:be}):void Je.continue()):ee({result:be})},pe.onerror=Ir(se))})}),openCursor:function(Y){var ee=Y.trans,se=Y.values,le=Y.query,pe=Y.reverse,be=Y.unique;return new Promise(function(Te,Oe){Te=vt(Te);var Re=le.index,Ee=le.range,Ae=ee.objectStore(Q),Ae=Re.isPrimaryKey?Ae:Ae.index(Re.name),Re=pe?be?"prevunique":"prev":be?"nextunique":"next",je=!se&&"openKeyCursor"in Ae?Ae.openKeyCursor(S(Ee),Re):Ae.openCursor(S(Ee),Re);je.onerror=Ir(Oe),je.onsuccess=vt(function(Fe){var Je,tt,nt,Mn,Ye=je.result;Ye?(Ye.___id=++pT,Ye.done=!1,Je=Ye.continue.bind(Ye),tt=(tt=Ye.continuePrimaryKey)&&tt.bind(Ye),nt=Ye.advance.bind(Ye),Mn=function(){throw new Error("Cursor not stopped")},Ye.trans=ee,Ye.stop=Ye.continue=Ye.continuePrimaryKey=Ye.advance=function(){throw new Error("Cursor not started")},Ye.fail=vt(Oe),Ye.next=function(){var an=this,ln=1;return this.start(function(){return ln--?an.continue():an.stop()}).then(function(){return an})},Ye.start=function(an){function ln(){if(je.result)try{an()}catch(gn){Ye.fail(gn)}else Ye.done=!0,Ye.start=function(){throw new Error("Cursor behind last entry")},Ye.stop()}var yc=new Promise(function(gn,Ti){gn=vt(gn),je.onerror=Ir(Ti),Ye.fail=Ti,Ye.stop=function(_h){Ye.stop=Ye.continue=Ye.continuePrimaryKey=Ye.advance=Mn,gn(_h)}});return je.onsuccess=vt(function(gn){je.onsuccess=ln,ln()}),Ye.continue=Je,Ye.continuePrimaryKey=tt,Ye.advance=nt,ln(),yc},Te(Ye)):Te(null)},Oe)})},count:function(Y){var ee=Y.query,se=Y.trans,le=ee.index,pe=ee.range;return new Promise(function(be,Te){var Oe=se.objectStore(Q),Ee=le.isPrimaryKey?Oe:Oe.index(le.name),Oe=S(pe),Ee=Oe?Ee.count(Oe):Ee.count();Ee.onsuccess=vt(function(Ae){return be(Ae.target.result)}),Ee.onerror=Ir(Te)})}}}var j,D,U,Z=(D=W,U=Yv((j=d).objectStoreNames),{schema:{name:j.name,tables:U.map(function(te){return D.objectStore(te)}).map(function(te){var G=te.keyPath,ee=te.autoIncrement,Q=a(G),Y={},ee={name:te.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:G==null,compound:Q,keyPath:G,autoIncrement:ee,unique:!0,extractKey:sh(G)},indexes:Yv(te.indexNames).map(function(se){return te.index(se)}).map(function(be){var le=be.name,pe=be.unique,Te=be.multiEntry,be=be.keyPath,Te={name:le,compound:a(be),keyPath:be,unique:pe,multiEntry:Te,extractKey:sh(be)};return Y[Xa(be)]=Te}),getIndexByKeyPath:function(se){return Y[Xa(se)]}};return Y[":id"]=ee.primaryKey,G!=null&&(Y[Xa(G)]=ee.primaryKey),ee})},hasGetAll:0<U.length&&"getAll"in D.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),W=Z.schema,H=Z.hasGetAll,Z=W.tables.map(T),K={};return Z.forEach(function(te){return K[te.name]=te}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(te){if(!K[te])throw new Error("Table '".concat(te,"' not found"));return K[te]},MIN_KEY:-1/0,MAX_KEY:Za(h),schema:W}}function gT(d,h,x,S){var T=x.IDBKeyRange;return x.indexedDB,{dbcore:(S=mT(h,T,S),d.dbcore.reduce(function(j,D){return D=D.create,r(r({},j),D(j))},S))}}function oc(d,S){var x=S.db,S=gT(d._middlewares,x,d._deps,S);d.core=S.dbcore,d.tables.forEach(function(T){var j=T.name;d.core.schema.tables.some(function(D){return D.name===j})&&(T.core=d.core.table(j),d[j]instanceof d.Table&&(d[j].core=T.core))})}function ac(d,h,x,S){x.forEach(function(T){var j=S[T];h.forEach(function(D){var U=function W(H,Z){return _(H,Z)||(H=u(H))&&W(H,Z)}(D,T);(!U||"value"in U&&U.value===void 0)&&(D===d.Transaction.prototype||D instanceof d.Transaction?b(D,T,{get:function(){return this.table(T)},set:function(W){m(this,T,{value:W,writable:!0,configurable:!0,enumerable:!0})}}):D[T]=new d.Table(T,j))})})}function ih(d,h){h.forEach(function(x){for(var S in x)x[S]instanceof d.Table&&delete x[S]})}function yT(d,h){return d._cfg.version-h._cfg.version}function vT(d,h,x,S){var T=d._dbSchema;x.objectStoreNames.contains("$meta")&&!T.$meta&&(T.$meta=rh("$meta",Zv("")[0],[]),d._storeNames.push("$meta"));var j=d._createTransaction("readwrite",d._storeNames,T);j.create(x),j._completion.catch(S);var D=j._reject.bind(j),U=Le.transless||Le;Cs(function(){return Le.trans=j,Le.transless=U,h!==0?(oc(d,x),H=h,((W=j).storeNames.includes("$meta")?W.table("$meta").get("version").then(function(Z){return Z??H}):Pe.resolve(H)).then(function(Z){return te=Z,G=j,Q=x,Y=[],Z=(K=d)._versions,ee=K._dbSchema=uc(0,K.idbdb,Q),(Z=Z.filter(function(se){return se._cfg.version>=te})).length!==0?(Z.forEach(function(se){Y.push(function(){var le=ee,pe=se._cfg.dbschema;cc(K,le,Q),cc(K,pe,Q),ee=K._dbSchema=pe;var be=oh(le,pe);be.add.forEach(function(Re){ah(Q,Re[0],Re[1].primKey,Re[1].indexes)}),be.change.forEach(function(Re){if(Re.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var je=Q.objectStore(Re.name);Re.add.forEach(function(Fe){return lc(je,Fe)}),Re.change.forEach(function(Fe){je.deleteIndex(Fe.name),lc(je,Fe)}),Re.del.forEach(function(Fe){return je.deleteIndex(Fe)})});var Te=se._cfg.contentUpgrade;if(Te&&se._cfg.version>te){oc(K,Q),G._memoizedTables={};var Oe=$(pe);be.del.forEach(function(Re){Oe[Re]=le[Re]}),ih(K,[K.Transaction.prototype]),ac(K,[K.Transaction.prototype],o(Oe),Oe),G.schema=Oe;var Ee,Ae=N(Te);return Ae&&Eo(),be=Pe.follow(function(){var Re;(Ee=Te(G))&&Ae&&(Re=Ts.bind(null,null),Ee.then(Re,Re))}),Ee&&typeof Ee.then=="function"?Pe.resolve(Ee):be.then(function(){return Ee})}}),Y.push(function(le){var pe,be,Te=se._cfg.dbschema;pe=Te,be=le,[].slice.call(be.db.objectStoreNames).forEach(function(Oe){return pe[Oe]==null&&be.db.deleteObjectStore(Oe)}),ih(K,[K.Transaction.prototype]),ac(K,[K.Transaction.prototype],K._storeNames,K._dbSchema),G.schema=K._dbSchema}),Y.push(function(le){K.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(K.idbdb.version/10)===se._cfg.version?(K.idbdb.deleteObjectStore("$meta"),delete K._dbSchema.$meta,K._storeNames=K._storeNames.filter(function(pe){return pe!=="$meta"})):le.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return Y.length?Pe.resolve(Y.shift()(G.idbtrans)).then(se):Pe.resolve()}().then(function(){Jv(ee,Q)})):Pe.resolve();var K,te,G,Q,Y,ee}).catch(D)):(o(T).forEach(function(Z){ah(x,Z,T[Z].primKey,T[Z].indexes)}),oc(d,x),void Pe.follow(function(){return d.on.populate.fire(j)}).catch(D));var W,H})}function wT(d,h){Jv(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var x=uc(0,d.idbdb,h);cc(d,d._dbSchema,h);for(var S=0,T=oh(x,d._dbSchema).change;S<T.length;S++){var j=function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var U=h.objectStore(D.name);D.add.forEach(function(W){we&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(W.src)),lc(U,W)})}(T[S]);if(typeof j=="object")return j.value}}function oh(d,h){var x,S={del:[],add:[],change:[]};for(x in d)h[x]||S.del.push(x);for(x in h){var T=d[x],j=h[x];if(T){var D={name:x,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(T.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||T.primKey.auto!==j.primKey.auto)D.recreate=!0,S.change.push(D);else{var U=T.idxByName,W=j.idxByName,H=void 0;for(H in U)W[H]||D.del.push(H);for(H in W){var Z=U[H],K=W[H];Z?Z.src!==K.src&&D.change.push(K):D.add.push(K)}(0<D.del.length||0<D.add.length||0<D.change.length)&&S.change.push(D)}}else S.add.push([x,j])}return S}function ah(d,h,x,S){var T=d.db.createObjectStore(h,x.keyPath?{keyPath:x.keyPath,autoIncrement:x.auto}:{autoIncrement:x.auto});return S.forEach(function(j){return lc(T,j)}),T}function Jv(d,h){o(d).forEach(function(x){h.db.objectStoreNames.contains(x)||(we&&console.debug("Dexie: Creating missing table",x),ah(h,x,d[x].primKey,d[x].indexes))})}function lc(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function uc(d,h,x){var S={};return y(h.objectStoreNames,0).forEach(function(T){for(var j=x.objectStore(T),D=nh(Qv(H=j.keyPath),H||"",!0,!1,!!j.autoIncrement,H&&typeof H!="string",!0),U=[],W=0;W<j.indexNames.length;++W){var Z=j.index(j.indexNames[W]),H=Z.keyPath,Z=nh(Z.name,H,!!Z.unique,!!Z.multiEntry,!1,H&&typeof H!="string",!1);U.push(Z)}S[T]=rh(T,D,U)}),S}function cc(d,h,x){for(var S=x.db.objectStoreNames,T=0;T<S.length;++T){var j=S[T],D=x.objectStore(j);d._hasGetAll="getAll"in D;for(var U=0;U<D.indexNames.length;++U){var W=D.indexNames[U],H=D.index(W).keyPath,Z=typeof H=="string"?H:"["+y(H).join("+")+"]";!h[j]||(H=h[j].idxByName[Z])&&(H.name=W,delete h[j].idxByName[Z],h[j].idxByName[W]=H)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Zv(d){return d.split(",").map(function(h,x){var j=h.split(":"),S=(T=j[1])===null||T===void 0?void 0:T.trim(),T=(h=j[0].trim()).replace(/([&*]|\+\+)/g,""),j=/^\[/.test(T)?T.match(/^\[(.*)\]$/)[1].split("+"):T;return nh(T,j||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(j),x===0,S)})}var bT=(Ao.prototype._createTableSchema=rh,Ao.prototype._parseIndexSyntax=Zv,Ao.prototype._parseStoresSpec=function(d,h){var x=this;o(d).forEach(function(S){if(d[S]!==null){var T=x._parseIndexSyntax(d[S]),j=T.shift();if(!j)throw new ye.Schema("Invalid schema for table "+S+": "+d[S]);if(j.unique=!0,j.multi)throw new ye.Schema("Primary key cannot be multiEntry*");T.forEach(function(D){if(D.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),T=x._createTableSchema(S,j,T),h[S]=T}})},Ao.prototype.stores=function(x){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,x):x;var x=h._versions,S={},T={};return x.forEach(function(j){l(S,j._cfg.storesSource),T=j._cfg.dbschema={},j._parseStoresSpec(S,T)}),h._dbSchema=T,ih(h,[h._allTables,h,h.Transaction.prototype]),ac(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(T),T),h._storeNames=o(T),this},Ao.prototype.upgrade=function(d){return this._cfg.contentUpgrade=ve(this._cfg.contentUpgrade||Ve,d),this},Ao);function Ao(){}function lh(d,h){var x=d._dbNamesDB;return x||(x=d._dbNamesDB=new Xr(ec,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),x.table("dbnames")}function uh(d){return d&&typeof d.databases=="function"}function ch(d){return Cs(function(){return Le.letThrough=!0,d()})}function dh(d){return!("from"in d)}var on=function(d,h){if(!this){var x=new on;return d&&"d"in d&&l(x,d),x}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function el(d,h,x){var S=it(h,x);if(!isNaN(S)){if(0<S)throw RangeError();if(dh(d))return l(d,{from:h,to:x,d:1});var T=d.l,S=d.r;if(it(x,d.from)<0)return T?el(T,h,x):d.l={from:h,to:x,d:1,l:null,r:null},e0(d);if(0<it(h,d.to))return S?el(S,h,x):d.r={from:h,to:x,d:1,l:null,r:null},e0(d);it(h,d.from)<0&&(d.from=h,d.l=null,d.d=S?S.d+1:1),0<it(x,d.to)&&(d.to=x,d.r=null,d.d=d.l?d.l.d+1:1),x=!d.r,T&&!d.l&&tl(d,T),S&&x&&tl(d,S)}}function tl(d,h){dh(h)||function x(S,W){var j=W.from,D=W.to,U=W.l,W=W.r;el(S,j,D),U&&x(S,U),W&&x(S,W)}(d,h)}function Xv(d,h){var x=dc(h),S=x.next();if(S.done)return!1;for(var T=S.value,j=dc(d),D=j.next(T.from),U=D.value;!S.done&&!D.done;){if(it(U.from,T.to)<=0&&0<=it(U.to,T.from))return!0;it(T.from,U.from)<0?T=(S=x.next(U.from)).value:U=(D=j.next(T.from)).value}return!1}function dc(d){var h=dh(d)?null:{s:0,n:d};return{next:function(x){for(var S=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,S)for(;h.n.l&&it(x,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!S||it(x,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function e0(d){var h,x,S=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((x=d.l)===null||x===void 0?void 0:x.d)||0),T=1<S?"r":S<-1?"l":"";T&&(h=T=="r"?"l":"r",x=r({},d),S=d[T],d.from=S.from,d.to=S.to,d[T]=S[T],x[T]=S[h],(d[h]=x).d=t0(x)),d.d=t0(d)}function t0(x){var h=x.r,x=x.l;return(h?x?Math.max(h.d,x.d):h.d:x?x.d:0)+1}function fc(d,h){return o(h).forEach(function(x){d[x]?tl(d[x],h[x]):d[x]=function S(T){var j,D,U={};for(j in T)f(T,j)&&(D=T[j],U[j]=!D||typeof D!="object"||he.has(D.constructor)?D:S(D));return U}(h[x])}),d}function fh(d,h){return d.all||h.all||Object.keys(d).some(function(x){return h[x]&&Xv(h[x],d[x])})}p(on.prototype,((Qn={add:function(d){return tl(this,d),this},addKey:function(d){return el(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(x){return el(h,x,x)}),this},hasKey:function(d){var h=dc(this).next(d).value;return h&&it(h.from,d)<=0&&0<=it(h.to,d)}})[xe]=function(){return dc(this)},Qn));var Ei={},hh={},ph=!1;function hc(d){fc(hh,d),ph||(ph=!0,setTimeout(function(){ph=!1,mh(hh,!(hh={}))},0))}function mh(d,h){h===void 0&&(h=!1);var x=new Set;if(d.all)for(var S=0,T=Object.values(Ei);S<T.length;S++)n0(D=T[S],d,x,h);else for(var j in d){var D,U=/^idb\:\/\/(.*)\/(.*)\//.exec(j);U&&(j=U[1],U=U[2],(D=Ei["idb://".concat(j,"/").concat(U)])&&n0(D,d,x,h))}x.forEach(function(W){return W()})}function n0(d,h,x,S){for(var T=[],j=0,D=Object.entries(d.queries.query);j<D.length;j++){for(var U=D[j],W=U[0],H=[],Z=0,K=U[1];Z<K.length;Z++){var te=K[Z];fh(h,te.obsSet)?te.subscribers.forEach(function(ee){return x.add(ee)}):S&&H.push(te)}S&&T.push([W,H])}if(S)for(var G=0,Q=T;G<Q.length;G++){var Y=Q[G],W=Y[0],H=Y[1];d.queries.query[W]=H}}function xT(d){var h=d._state,x=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Rt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var S=h.openCanceller,T=Math.round(10*d.verno),j=!1;function D(){if(h.openCanceller!==S)throw new ye.DatabaseClosed("db.open() was cancelled")}function U(){return new Pe(function(te,G){if(D(),!x)throw new ye.MissingAPI;var Q=d.name,Y=h.autoSchema||!T?x.open(Q):x.open(Q,T);if(!Y)throw new ye.MissingAPI;Y.onerror=Ir(G),Y.onblocked=vt(d._fireOnBlocked),Y.onupgradeneeded=vt(function(ee){var se;Z=Y.transaction,h.autoSchema&&!d._options.allowEmptyDB?(Y.onerror=Ya,Z.abort(),Y.result.close(),(se=x.deleteDatabase(Q)).onsuccess=se.onerror=vt(function(){G(new ye.NoSuchDatabase("Database ".concat(Q," doesnt exist")))})):(Z.onerror=Ir(G),ee=ee.oldVersion>Math.pow(2,62)?0:ee.oldVersion,K=ee<1,d.idbdb=Y.result,j&&wT(d,Z),vT(d,ee/10,Z,G))},G),Y.onsuccess=vt(function(){Z=null;var ee,se,le,pe,be,Te=d.idbdb=Y.result,Oe=y(Te.objectStoreNames);if(0<Oe.length)try{var Ee=Te.transaction((pe=Oe).length===1?pe[0]:pe,"readonly");if(h.autoSchema)se=Te,le=Ee,(ee=d).verno=se.version/10,le=ee._dbSchema=uc(0,se,le),ee._storeNames=y(se.objectStoreNames,0),ac(ee,[ee._allTables],o(le),le);else if(cc(d,d._dbSchema,Ee),((be=oh(uc(0,(be=d).idbdb,Ee),be._dbSchema)).add.length||be.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),T=Te.version+1,j=!0,te(U());oc(d,Ee)}catch{}Co.push(d),Te.onversionchange=vt(function(Ae){h.vcFired=!0,d.on("versionchange").fire(Ae)}),Te.onclose=vt(function(){d.close({disableAutoOpen:!1})}),K&&(be=d._deps,Ee=Q,Te=be.indexedDB,be=be.IDBKeyRange,uh(Te)||Ee===ec||lh(Te,be).put({name:Ee}).catch(Ve)),te()},G)}).catch(function(te){switch(te==null?void 0:te.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),U();break;case"VersionError":if(0<T)return T=0,U()}return Pe.reject(te)})}var W,H=h.dbReadyResolve,Z=null,K=!1;return Pe.race([S,(typeof navigator>"u"?Pe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(te){function G(){return indexedDB.databases().finally(te)}W=setInterval(G,100),G()}).finally(function(){return clearInterval(W)}):Promise.resolve()).then(U)]).then(function(){return D(),h.onReadyBeingFired=[],Pe.resolve(ch(function(){return d.on.ready.fire(d.vip)})).then(function te(){if(0<h.onReadyBeingFired.length){var G=h.onReadyBeingFired.reduce(ve,Ve);return h.onReadyBeingFired=[],Pe.resolve(ch(function(){return G(d.vip)})).then(te)}})}).finally(function(){h.openCanceller===S&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(te){h.dbOpenError=te;try{Z&&Z.abort()}catch{}return S===h.openCanceller&&d._close(),Rt(te)}).finally(function(){h.openComplete=!0,H()}).then(function(){var te;return K&&(te={},d.tables.forEach(function(G){G.schema.indexes.forEach(function(Q){Q.name&&(te["idb://".concat(d.name,"/").concat(G.name,"/").concat(Q.name)]=new on(-1/0,[[[]]]))}),te["idb://".concat(d.name,"/").concat(G.name,"/")]=te["idb://".concat(d.name,"/").concat(G.name,"/:dels")]=new on(-1/0,[[[]]])}),js(Ja).fire(te),mh(te,!0)),d})}function gh(d){function h(j){return d.next(j)}var x=T(h),S=T(function(j){return d.throw(j)});function T(j){return function(W){var U=j(W),W=U.value;return U.done?W:W&&typeof W.then=="function"?W.then(x,S):a(W)?Promise.all(W).then(x,S):x(W)}}return T(h)()}function pc(d,h,x){for(var S=a(d)?d.slice():[d],T=0;T<x;++T)S.push(h);return S}var _T={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var x=d.table(h),S=x.schema,T={},j=[];function D(K,te,G){var Q=Xa(K),Y=T[Q]=T[Q]||[],ee=K==null?0:typeof K=="string"?1:K.length,se=0<te,se=r(r({},G),{name:se?"".concat(Q,"(virtual-from:").concat(G.name,")"):G.name,lowLevelIndex:G,isVirtual:se,keyTail:te,keyLength:ee,extractKey:sh(K),unique:!se&&G.unique});return Y.push(se),se.isPrimaryKey||j.push(se),1<ee&&D(ee===2?K[0]:K.slice(0,ee-1),te+1,G),Y.sort(function(le,pe){return le.keyTail-pe.keyTail}),se}h=D(S.primaryKey.keyPath,0,S.primaryKey),T[":id"]=[h];for(var U=0,W=S.indexes;U<W.length;U++){var H=W[U];D(H.keyPath,0,H)}function Z(K){var te,G=K.query.index;return G.isVirtual?r(r({},K),{query:{index:G.lowLevelIndex,range:(te=K.query.range,G=G.keyTail,{type:te.type===1?2:te.type,lower:pc(te.lower,te.lowerOpen?d.MAX_KEY:d.MIN_KEY,G),lowerOpen:!0,upper:pc(te.upper,te.upperOpen?d.MIN_KEY:d.MAX_KEY,G),upperOpen:!0})}}):K}return r(r({},x),{schema:r(r({},S),{primaryKey:h,indexes:j,getIndexByKeyPath:function(K){return(K=T[Xa(K)])&&K[0]}}),count:function(K){return x.count(Z(K))},query:function(K){return x.query(Z(K))},openCursor:function(K){var te=K.query.index,G=te.keyTail,Q=te.isVirtual,Y=te.keyLength;return Q?x.openCursor(Z(K)).then(function(se){return se&&ee(se)}):x.openCursor(K);function ee(se){return Object.create(se,{continue:{value:function(le){le!=null?se.continue(pc(le,K.reverse?d.MAX_KEY:d.MIN_KEY,G)):K.unique?se.continue(se.key.slice(0,Y).concat(K.reverse?d.MIN_KEY:d.MAX_KEY,G)):se.continue()}},continuePrimaryKey:{value:function(le,pe){se.continuePrimaryKey(pc(le,d.MAX_KEY,G),pe)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var le=se.key;return Y===1?le[0]:le.slice(0,Y)}},value:{get:function(){return se.value}}})}}})}})}};function yh(d,h,x,S){return x=x||{},S=S||"",o(d).forEach(function(T){var j,D,U;f(h,T)?(j=d[T],D=h[T],typeof j=="object"&&typeof D=="object"&&j&&D?(U=J(j))!==J(D)?x[S+T]=h[T]:U==="Object"?yh(j,D,x,S+T+"."):j!==D&&(x[S+T]=h[T]):j!==D&&(x[S+T]=h[T])):x[S+T]=void 0}),o(h).forEach(function(T){f(d,T)||(x[S+T]=h[T])}),x}function vh(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var kT={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var x=d.table(h),S=x.schema.primaryKey;return r(r({},x),{mutate:function(T){var j=Le.trans,D=j.table(h).hook,U=D.deleting,W=D.creating,H=D.updating;switch(T.type){case"add":if(W.fire===Ve)break;return j._promise("readwrite",function(){return Z(T)},!0);case"put":if(W.fire===Ve&&H.fire===Ve)break;return j._promise("readwrite",function(){return Z(T)},!0);case"delete":if(U.fire===Ve)break;return j._promise("readwrite",function(){return Z(T)},!0);case"deleteRange":if(U.fire===Ve)break;return j._promise("readwrite",function(){return function K(te,G,Q){return x.query({trans:te,values:!1,query:{index:S,range:G},limit:Q}).then(function(Y){var ee=Y.result;return Z({type:"delete",keys:ee,trans:te}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):ee.length<Q?{failures:[],numFailures:0,lastResult:void 0}:K(te,r(r({},G),{lower:ee[ee.length-1],lowerOpen:!0}),Q)})})}(T.trans,T.range,1e4)},!0)}return x.mutate(T);function Z(K){var te,G,Q,Y=Le.trans,ee=K.keys||vh(S,K);if(!ee)throw new Error("Keys missing");return(K=K.type==="add"||K.type==="put"?r(r({},K),{keys:ee}):r({},K)).type!=="delete"&&(K.values=s([],K.values)),K.keys&&(K.keys=s([],K.keys)),te=x,Q=ee,((G=K).type==="add"?Promise.resolve([]):te.getMany({trans:G.trans,keys:Q,cache:"immutable"})).then(function(se){var le=ee.map(function(pe,be){var Te,Oe,Ee,Ae=se[be],Re={onerror:null,onsuccess:null};return K.type==="delete"?U.fire.call(Re,pe,Ae,Y):K.type==="add"||Ae===void 0?(Te=W.fire.call(Re,pe,K.values[be],Y),pe==null&&Te!=null&&(K.keys[be]=pe=Te,S.outbound||R(K.values[be],S.keyPath,pe))):(Te=yh(Ae,K.values[be]),(Oe=H.fire.call(Re,Te,pe,Ae,Y))&&(Ee=K.values[be],Object.keys(Oe).forEach(function(je){f(Ee,je)?Ee[je]=Oe[je]:R(Ee,je,Oe[je])}))),Re});return x.mutate(K).then(function(pe){for(var be=pe.failures,Te=pe.results,Oe=pe.numFailures,pe=pe.lastResult,Ee=0;Ee<ee.length;++Ee){var Ae=(Te||ee)[Ee],Re=le[Ee];Ae==null?Re.onerror&&Re.onerror(be[Ee]):Re.onsuccess&&Re.onsuccess(K.type==="put"&&se[Ee]?K.values[Ee]:Ae)}return{failures:be,results:Te,numFailures:Oe,lastResult:pe}}).catch(function(pe){return le.forEach(function(be){return be.onerror&&be.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function r0(d,h,x){try{if(!h||h.keys.length<d.length)return null;for(var S=[],T=0,j=0;T<h.keys.length&&j<d.length;++T)it(h.keys[T],d[j])===0&&(S.push(x?ne(h.values[T]):h.values[T]),++j);return S.length===d.length?S:null}catch{return null}}var ST={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var x=d.table(h);return r(r({},x),{getMany:function(S){if(!S.cache)return x.getMany(S);var T=r0(S.keys,S.trans._cache,S.cache==="clone");return T?Pe.resolve(T):x.getMany(S).then(function(j){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?ne(j):j},j})},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),x.mutate(S)}})}}}};function s0(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function i0(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ET={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,x=new on(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(S,T,j){if(Le.subscr&&T!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Le.querier));return d.transaction(S,T,j)},table:function(S){var T=d.table(S),j=T.schema,D=j.primaryKey,K=j.indexes,U=D.extractKey,W=D.outbound,H=D.autoIncrement&&K.filter(function(G){return G.compound&&G.keyPath.includes(D.keyPath)}),Z=r(r({},T),{mutate:function(G){function Q(je){return je="idb://".concat(h,"/").concat(S,"/").concat(je),pe[je]||(pe[je]=new on)}var Y,ee,se,le=G.trans,pe=G.mutatedParts||(G.mutatedParts={}),be=Q(""),Te=Q(":dels"),Oe=G.type,Re=G.type==="deleteRange"?[G.range]:G.type==="delete"?[G.keys]:G.values.length<50?[vh(D,G).filter(function(je){return je}),G.values]:[],Ee=Re[0],Ae=Re[1],Re=G.trans._cache;return a(Ee)?(be.addKeys(Ee),(Re=Oe==="delete"||Ee.length===Ae.length?r0(Ee,Re):null)||Te.addKeys(Ee),(Re||Ae)&&(Y=Q,ee=Re,se=Ae,j.indexes.forEach(function(je){var Fe=Y(je.name||"");function Je(nt){return nt!=null?je.extractKey(nt):null}function tt(nt){return je.multiEntry&&a(nt)?nt.forEach(function(Mn){return Fe.addKey(Mn)}):Fe.addKey(nt)}(ee||se).forEach(function(nt,an){var Ye=ee&&Je(ee[an]),an=se&&Je(se[an]);it(Ye,an)!==0&&(Ye!=null&&tt(Ye),an!=null&&tt(an))})}))):Ee?(Ae={from:(Ae=Ee.lower)!==null&&Ae!==void 0?Ae:d.MIN_KEY,to:(Ae=Ee.upper)!==null&&Ae!==void 0?Ae:d.MAX_KEY},Te.add(Ae),be.add(Ae)):(be.add(x),Te.add(x),j.indexes.forEach(function(je){return Q(je.name).add(x)})),T.mutate(G).then(function(je){return!Ee||G.type!=="add"&&G.type!=="put"||(be.addKeys(je.results),H&&H.forEach(function(Fe){for(var Je=G.values.map(function(Ye){return Fe.extractKey(Ye)}),tt=Fe.keyPath.findIndex(function(Ye){return Ye===D.keyPath}),nt=0,Mn=je.results.length;nt<Mn;++nt)Je[nt][tt]=je.results[nt];Q(Fe.name).addKeys(Je)})),le.mutatedParts=fc(le.mutatedParts||{},pe),je})}}),K=function(Q){var Y=Q.query,Q=Y.index,Y=Y.range;return[Q,new on((Q=Y.lower)!==null&&Q!==void 0?Q:d.MIN_KEY,(Y=Y.upper)!==null&&Y!==void 0?Y:d.MAX_KEY)]},te={get:function(G){return[D,new on(G.key)]},getMany:function(G){return[D,new on().addKeys(G.keys)]},count:K,query:K,openCursor:K};return o(te).forEach(function(G){Z[G]=function(Q){var Y=Le.subscr,ee=!!Y,se=s0(Le,T)&&i0(G,Q)?Q.obsSet={}:Y;if(ee){var le=function(Ae){return Ae="idb://".concat(h,"/").concat(S,"/").concat(Ae),se[Ae]||(se[Ae]=new on)},pe=le(""),be=le(":dels"),Y=te[G](Q),ee=Y[0],Y=Y[1];if((G==="query"&&ee.isPrimaryKey&&!Q.values?be:le(ee.name||"")).add(Y),!ee.isPrimaryKey){if(G!=="count"){var Te=G==="query"&&W&&Q.values&&T.query(r(r({},Q),{values:!1}));return T[G].apply(this,arguments).then(function(Ae){if(G==="query"){if(W&&Q.values)return Te.then(function(Je){return Je=Je.result,pe.addKeys(Je),Ae});var Re=Q.values?Ae.result.map(U):Ae.result;(Q.values?pe:be).addKeys(Re)}else if(G==="openCursor"){var je=Ae,Fe=Q.values;return je&&Object.create(je,{key:{get:function(){return be.addKey(je.primaryKey),je.key}},primaryKey:{get:function(){var Je=je.primaryKey;return be.addKey(Je),Je}},value:{get:function(){return Fe&&pe.addKey(je.primaryKey),je.value}}})}return Ae})}be.add(x)}}return T[G].apply(this,arguments)}}),Z}})}};function o0(d,h,x){if(x.numFailures===0)return h;if(h.type==="deleteRange")return null;var S=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return x.numFailures===S?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(T,j){return!(j in x.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(T,j){return!(j in x.failures)})),h)}function wh(d,h){return x=d,((S=h).lower===void 0||(S.lowerOpen?0<it(x,S.lower):0<=it(x,S.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?it(d,h.upper)<0:it(d,h.upper)<=0));var x,S}function a0(d,h,te,S,T,j){if(!te||te.length===0)return d;var D=h.query.index,U=D.multiEntry,W=h.query.range,H=S.schema.primaryKey.extractKey,Z=D.extractKey,K=(D.lowLevelIndex||D).extractKey,te=te.reduce(function(G,Q){var Y=G,ee=[];if(Q.type==="add"||Q.type==="put")for(var se=new on,le=Q.values.length-1;0<=le;--le){var pe,be=Q.values[le],Te=H(be);se.hasKey(Te)||(pe=Z(be),(U&&a(pe)?pe.some(function(je){return wh(je,W)}):wh(pe,W))&&(se.addKey(Te),ee.push(be)))}switch(Q.type){case"add":var Oe=new on().addKeys(h.values?G.map(function(Fe){return H(Fe)}):G),Y=G.concat(h.values?ee.filter(function(Fe){return Fe=H(Fe),!Oe.hasKey(Fe)&&(Oe.addKey(Fe),!0)}):ee.map(function(Fe){return H(Fe)}).filter(function(Fe){return!Oe.hasKey(Fe)&&(Oe.addKey(Fe),!0)}));break;case"put":var Ee=new on().addKeys(Q.values.map(function(Fe){return H(Fe)}));Y=G.filter(function(Fe){return!Ee.hasKey(h.values?H(Fe):Fe)}).concat(h.values?ee:ee.map(function(Fe){return H(Fe)}));break;case"delete":var Ae=new on().addKeys(Q.keys);Y=G.filter(function(Fe){return!Ae.hasKey(h.values?H(Fe):Fe)});break;case"deleteRange":var Re=Q.range;Y=G.filter(function(Fe){return!wh(H(Fe),Re)})}return Y},d);return te===d?d:(te.sort(function(G,Q){return it(K(G),K(Q))||it(H(G),H(Q))}),h.limit&&h.limit<1/0&&(te.length>h.limit?te.length=h.limit:d.length===h.limit&&te.length<h.limit&&(T.dirty=!0)),j?Object.freeze(te):te)}function l0(d,h){return it(d.lower,h.lower)===0&&it(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function CT(d,h){return function(x,S,T,j){if(x===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((S=it(x,S))===0){if(T&&j)return 0;if(T)return 1;if(j)return-1}return S}(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=function(x,S,T,j){if(x===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((S=it(x,S))===0){if(T&&j)return 0;if(T)return-1;if(j)return 1}return S}(d.upper,h.upper,d.upperOpen,h.upperOpen)}function TT(d,h,x,S){d.subscribers.add(x),S.addEventListener("abort",function(){var T,j;d.subscribers.delete(x),d.subscribers.size===0&&(T=d,j=h,setTimeout(function(){T.subscribers.size===0&&ae(j,T)},3e3))})}var PT={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(x,S,T){var j,D,U=d.transaction(x,S,T);return S==="readwrite"&&(D=(j=new AbortController).signal,T=function(W){return function(){if(j.abort(),S==="readwrite"){for(var H=new Set,Z=0,K=x;Z<K.length;Z++){var te=K[Z],G=Ei["idb://".concat(h,"/").concat(te)];if(G){var Q=d.table(te),Y=G.optimisticOps.filter(function(Fe){return Fe.trans===U});if(U._explicit&&W&&U.mutatedParts)for(var ee=0,se=Object.values(G.queries.query);ee<se.length;ee++)for(var le=0,pe=(Oe=se[ee]).slice();le<pe.length;le++)fh((Ee=pe[le]).obsSet,U.mutatedParts)&&(ae(Oe,Ee),Ee.subscribers.forEach(function(Fe){return H.add(Fe)}));else if(0<Y.length){G.optimisticOps=G.optimisticOps.filter(function(Fe){return Fe.trans!==U});for(var be=0,Te=Object.values(G.queries.query);be<Te.length;be++)for(var Oe,Ee,Ae,Re=0,je=(Oe=Te[be]).slice();Re<je.length;Re++)(Ee=je[Re]).res!=null&&U.mutatedParts&&(W&&!Ee.dirty?(Ae=Object.isFrozen(Ee.res),Ae=a0(Ee.res,Ee.req,Y,Q,Ee,Ae),Ee.dirty?(ae(Oe,Ee),Ee.subscribers.forEach(function(Fe){return H.add(Fe)})):Ae!==Ee.res&&(Ee.res=Ae,Ee.promise=Pe.resolve({result:Ae}))):(Ee.dirty&&ae(Oe,Ee),Ee.subscribers.forEach(function(Fe){return H.add(Fe)})))}}}H.forEach(function(Fe){return Fe()})}}},U.addEventListener("abort",T(!1),{signal:D}),U.addEventListener("error",T(!1),{signal:D}),U.addEventListener("complete",T(!0),{signal:D})),U},table:function(x){var S=d.table(x),T=S.schema.primaryKey;return r(r({},S),{mutate:function(j){var D=Le.trans;if(T.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return S.mutate(j);var U=Ei["idb://".concat(h,"/").concat(x)];return U?(D=S.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||vh(T,j).some(function(W){return W==null}))?(U.optimisticOps.push(j),j.mutatedParts&&hc(j.mutatedParts),D.then(function(W){0<W.numFailures&&(ae(U.optimisticOps,j),(W=o0(0,j,W))&&U.optimisticOps.push(W),j.mutatedParts&&hc(j.mutatedParts))}),D.catch(function(){ae(U.optimisticOps,j),j.mutatedParts&&hc(j.mutatedParts)})):D.then(function(W){var H=o0(0,r(r({},j),{values:j.values.map(function(Z,K){var te;return W.failures[K]?Z:(Z=(te=T.keyPath)!==null&&te!==void 0&&te.includes(".")?ne(Z):r({},Z),R(Z,T.keyPath,W.results[K]),Z)})}),W);U.optimisticOps.push(H),queueMicrotask(function(){return j.mutatedParts&&hc(j.mutatedParts)})}),D):S.mutate(j)},query:function(j){if(!s0(Le,S)||!i0("query",j))return S.query(j);var D=((H=Le.trans)===null||H===void 0?void 0:H.db._options.cache)==="immutable",K=Le,U=K.requery,W=K.signal,H=function(Q,Y,ee,se){var le=Ei["idb://".concat(Q,"/").concat(Y)];if(!le)return[];if(!(Y=le.queries[ee]))return[null,!1,le,null];var pe=Y[(se.query?se.query.index.name:null)||""];if(!pe)return[null,!1,le,null];switch(ee){case"query":var be=pe.find(function(Te){return Te.req.limit===se.limit&&Te.req.values===se.values&&l0(Te.req.query.range,se.query.range)});return be?[be,!0,le,pe]:[pe.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=se.limit&&(!se.values||Te.req.values)&&CT(Te.req.query.range,se.query.range)}),!1,le,pe];case"count":return be=pe.find(function(Te){return l0(Te.req.query.range,se.query.range)}),[be,!!be,le,pe]}}(h,x,"query",j),Z=H[0],K=H[1],te=H[2],G=H[3];return Z&&K?Z.obsSet=j.obsSet:(K=S.query(j).then(function(Q){var Y=Q.result;if(Z&&(Z.res=Y),D){for(var ee=0,se=Y.length;ee<se;++ee)Object.freeze(Y[ee]);Object.freeze(Y)}else Q.result=ne(Y);return Q}).catch(function(Q){return G&&Z&&ae(G,Z),Promise.reject(Q)}),Z={obsSet:j.obsSet,promise:K,subscribers:new Set,type:"query",req:j,dirty:!1},G?G.push(Z):(G=[Z],(te=te||(Ei["idb://".concat(h,"/").concat(x)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=G)),TT(Z,G,U,W),Z.promise.then(function(Q){return{result:a0(Q.result,j,te==null?void 0:te.optimisticOps,S,Z,D)}})}})}})}};function mc(d,h){return new Proxy(d,{get:function(x,S,T){return S==="db"?h:Reflect.get(x,S,T)}})}var Xr=(It.prototype.version=function(d){if(isNaN(d)||d<.1)throw new ye.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,x=h.filter(function(S){return S._cfg.version===d})[0];return x||(x=new this.Version(d),h.push(x),h.sort(yT),x.stores({}),this._state.autoSchema=!1,x)},It.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Le.letThrough||this._vip)?d():new Pe(function(x,S){if(h._state.openComplete)return S(new ye.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void S(new ye.DatabaseClosed);h.open().catch(Ve)}h._state.dbReadyPromise.then(x,S)}).then(d)},It.prototype.use=function(d){var h=d.stack,x=d.create,S=d.level,T=d.name;return T&&this.unuse({stack:h,name:T}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:x,level:S??10,name:T}),d.sort(function(j,D){return j.level-D.level}),this},It.prototype.unuse=function(d){var h=d.stack,x=d.name,S=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(T){return S?T.create!==S:!!x&&T.name!==x})),this},It.prototype.open=function(){var d=this;return _i(Ht,function(){return xT(d)})},It.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Co.indexOf(this);if(0<=h&&Co.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Pe(function(x){d.dbReadyResolve=x}),d.openCanceller=new Pe(function(x,S){d.cancelOpen=S}))},It.prototype.close=function(x){var h=(x===void 0?{disableAutoOpen:!0}:x).disableAutoOpen,x=this._state;h?(x.isBeingOpened&&x.cancelOpen(new ye.DatabaseClosed),this._close(),x.autoOpen=!1,x.dbOpenError=new ye.DatabaseClosed):(this._close(),x.autoOpen=this._options.autoOpen||x.isBeingOpened,x.openComplete=!1,x.dbOpenError=null)},It.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var x=0<arguments.length&&typeof arguments[0]!="object",S=this._state;return new Pe(function(T,j){function D(){h.close(d);var U=h._deps.indexedDB.deleteDatabase(h.name);U.onsuccess=vt(function(){var W,H,Z;W=h._deps,H=h.name,Z=W.indexedDB,W=W.IDBKeyRange,uh(Z)||H===ec||lh(Z,W).delete(H).catch(Ve),T()}),U.onerror=Ir(j),U.onblocked=h._fireOnBlocked}if(x)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(D):D()})},It.prototype.backendDB=function(){return this.idbdb},It.prototype.isOpen=function(){return this.idbdb!==null},It.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},It.prototype.hasFailed=function(){return this._state.dbOpenError!==null},It.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(It.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),It.prototype.transaction=function(){var d=(function(h,x,S){var T=arguments.length;if(T<2)throw new ye.InvalidArgument("Too few arguments");for(var j=new Array(T-1);--T;)j[T-1]=arguments[T];return S=j.pop(),[h,V(j),S]}).apply(this,arguments);return this._transaction.apply(this,d)},It.prototype._transaction=function(d,h,x){var S=this,T=Le.trans;T&&T.db===this&&d.indexOf("!")===-1||(T=null);var j,D,U=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(D=h.map(function(H){if(H=H instanceof S.Table?H.name:H,typeof H!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return H}),d=="r"||d===Jf)j=Jf;else{if(d!="rw"&&d!=Zf)throw new ye.InvalidArgument("Invalid transaction mode: "+d);j=Zf}if(T){if(T.mode===Jf&&j===Zf){if(!U)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");T=null}T&&D.forEach(function(H){if(T&&T.storeNames.indexOf(H)===-1){if(!U)throw new ye.SubTransaction("Table "+H+" not included in parent transaction.");T=null}}),U&&T&&!T.active&&(T=null)}}catch(H){return T?T._promise(null,function(Z,K){K(H)}):Rt(H)}var W=(function H(Z,K,te,G,Q){return Pe.resolve().then(function(){var Y=Le.transless||Le,ee=Z._createTransaction(K,te,Z._dbSchema,G);if(ee.explicit=!0,Y={trans:ee,transless:Y},G)ee.idbtrans=G.idbtrans;else try{ee.create(),ee.idbtrans._explicit=!0,Z._state.PR1398_maxLoop=3}catch(pe){return pe.name===De.InvalidState&&Z.isOpen()&&0<--Z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Z.close({disableAutoOpen:!1}),Z.open().then(function(){return H(Z,K,te,null,Q)})):Rt(pe)}var se,le=N(Q);return le&&Eo(),Y=Pe.follow(function(){var pe;(se=Q.call(ee,ee))&&(le?(pe=Ts.bind(null,null),se.then(pe,pe)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=gh(se)))},Y),(se&&typeof se.then=="function"?Pe.resolve(se).then(function(pe){return ee.active?pe:Rt(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Y.then(function(){return se})).then(function(pe){return G&&ee._resolve(),ee._completion.then(function(){return pe})}).catch(function(pe){return ee._reject(pe),Rt(pe)})})}).bind(null,this,j,D,T,x);return T?T._promise(j,W,"lock"):Le.trans?_i(Le.transless,function(){return S._whenReady(W)}):this._whenReady(W)},It.prototype.table=function(d){if(!f(this._allTables,d))throw new ye.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},It);function It(d,h){var x=this;this._middlewares={},this.verno=0;var S=It.dependencies;this._options=h=r({addons:It.addons,autoOpen:!0,indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},S=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var T,j,D,U,W,H={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ve,dbReadyPromise:null,cancelOpen:Ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};H.dbReadyPromise=new Pe(function(K){H.dbReadyResolve=K}),H.openCanceller=new Pe(function(K,te){H.cancelOpen=te}),this._state=H,this.name=d,this.on=Ga(this,"populate","blocked","versionchange","close",{ready:[ve,Ve]}),this.once=function(K,te){var G=function(){for(var Q=[],Y=0;Y<arguments.length;Y++)Q[Y]=arguments[Y];x.on(K).unsubscribe(G),te.apply(x,Q)};return x.on(K,G)},this.on.ready.subscribe=w(this.on.ready.subscribe,function(K){return function(te,G){It.vip(function(){var Q,Y=x._state;Y.openComplete?(Y.dbOpenError||Pe.resolve().then(te),G&&K(te)):Y.onReadyBeingFired?(Y.onReadyBeingFired.push(te),G&&K(te)):(K(te),Q=x,G||K(function ee(){Q.on.ready.unsubscribe(te),Q.on.ready.unsubscribe(ee)}))})}}),this.Collection=(T=this,Qa(cT.prototype,function(se,ee){this.db=T;var G=$v,Q=null;if(ee)try{G=ee()}catch(le){Q=le}var Y=se._ctx,ee=Y.table,se=ee.hook.reading.fire;this._ctx={table:ee,index:Y.index,isPrimKey:!Y.index||ee.schema.primKey.keyPath&&Y.index===ee.schema.primKey.name,range:G,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Q,or:Y.or,valueMapper:se!==Tt?se:null}})),this.Table=(j=this,Qa(Vv.prototype,function(K,te,G){this.db=j,this._tx=G,this.name=K,this.schema=te,this.hook=j._allTables[K]?j._allTables[K].hook:Ga(null,{creating:[de,Ve],reading:[P,Tt],updating:[L,Ve],deleting:[B,Ve]})})),this.Transaction=(D=this,Qa(hT.prototype,function(K,te,G,Q,Y){var ee=this;K!=="readonly"&&te.forEach(function(se){se=(se=G[se])===null||se===void 0?void 0:se.yProps,se&&(te=te.concat(se.map(function(le){return le.updatesTable})))}),this.db=D,this.mode=K,this.storeNames=te,this.schema=G,this.chromeTransactionDurability=Q,this.idbtrans=null,this.on=Ga(this,"complete","error","abort"),this.parent=Y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(se,le){ee._resolve=se,ee._reject=le}),this._completion.then(function(){ee.active=!1,ee.on.complete.fire()},function(se){var le=ee.active;return ee.active=!1,ee.on.error.fire(se),ee.parent?ee.parent._reject(se):le&&ee.idbtrans&&ee.idbtrans.abort(),Rt(se)})})),this.Version=(U=this,Qa(bT.prototype,function(K){this.db=U,this._cfg={version:K,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(W=this,Qa(Gv.prototype,function(K,te,G){if(this.db=W,this._ctx={table:K,index:te===":id"?null:te,or:G},this._cmp=this._ascending=it,this._descending=function(Q,Y){return it(Y,Q)},this._max=function(Q,Y){return 0<it(Q,Y)?Q:Y},this._min=function(Q,Y){return it(Q,Y)<0?Q:Y},this._IDBKeyRange=W._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(K){0<K.newVersion?console.warn("Another connection wants to upgrade database '".concat(x.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(x.name,"'. Closing db now to resume the delete request.")),x.close({disableAutoOpen:!1})}),this.on("blocked",function(K){!K.newVersion||K.newVersion<K.oldVersion?console.warn("Dexie.delete('".concat(x.name,"') was blocked")):console.warn("Upgrade '".concat(x.name,"' blocked by other connection holding version ").concat(K.oldVersion/10))}),this._maxKey=Za(h.IDBKeyRange),this._createTransaction=function(K,te,G,Q){return new x.Transaction(K,te,G,x._options.chromeTransactionDurability,Q)},this._fireOnBlocked=function(K){x.on("blocked").fire(K),Co.filter(function(te){return te.name===x.name&&te!==x&&!te._state.vcFired}).map(function(te){return te.on("versionchange").fire(K)})},this.use(ST),this.use(PT),this.use(ET),this.use(_T),this.use(kT);var Z=new Proxy(this,{get:function(K,te,G){if(te==="_vip")return!0;if(te==="table")return function(Y){return mc(x.table(Y),Z)};var Q=Reflect.get(K,te,G);return Q instanceof Vv?mc(Q,Z):te==="tables"?Q.map(function(Y){return mc(Y,Z)}):te==="_createTransaction"?function(){return mc(Q.apply(this,arguments),Z)}:Q}});this.vip=Z,S.forEach(function(K){return K(x)})}var gc,Qn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",AT=(bh.prototype.subscribe=function(d,h,x){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:x})},bh.prototype[Qn]=function(){return this},bh);function bh(d){this._subscribe=d}try{gc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{gc={indexedDB:null,IDBKeyRange:null}}function u0(d){var h,x=!1,S=new AT(function(T){var j=N(d),D,U=!1,W={},H={},Z={get closed(){return U},unsubscribe:function(){U||(U=!0,D&&D.abort(),K&&js.storagemutated.unsubscribe(G))}};T.start&&T.start(Z);var K=!1,te=function(){return Yf(Q)},G=function(Y){fc(W,Y),fh(H,W)&&te()},Q=function(){var Y,ee,se;!U&&gc.indexedDB&&(W={},Y={},D&&D.abort(),D=new AbortController,se=function(le){var pe=ko();try{j&&Eo();var be=Cs(d,le);return be=j?be.finally(Ts):be}finally{pe&&So()}}(ee={subscr:Y,signal:D.signal,requery:te,querier:d,trans:null}),Promise.resolve(se).then(function(le){x=!0,h=le,U||ee.signal.aborted||(W={},function(pe){for(var be in pe)if(f(pe,be))return;return 1}(H=Y)||K||(js(Ja,G),K=!0),Yf(function(){return!U&&T.next&&T.next(le)}))},function(le){x=!1,["DatabaseClosedError","AbortError"].includes(le==null?void 0:le.name)||U||Yf(function(){U||T.error&&T.error(le)})}))};return setTimeout(te,0),Z});return S.hasValue=function(){return x},S.getValue=function(){return h},S}var Ci=Xr;function xh(d){var h=Os;try{Os=!0,js.storagemutated.fire(d),mh(d,!0)}finally{Os=h}}p(Ci,r(r({},Ze),{delete:function(d){return new Ci(d,{addons:[]}).delete()},exists:function(d){return new Ci(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=Ci.dependencies,x=h.indexedDB,h=h.IDBKeyRange,(uh(x)?Promise.resolve(x.databases()).then(function(S){return S.map(function(T){return T.name}).filter(function(T){return T!==ec})}):lh(x,h).toCollection().primaryKeys()).then(d)}catch{return Rt(new ye.MissingAPI)}var h,x},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Le.trans?_i(Le.transless,d):d()},vip:ch,async:function(d){return function(){try{var h=gh(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Pe.resolve(h)}catch(x){return Rt(x)}}},spawn:function(d,h,x){try{var S=gh(d.apply(x,h||[]));return S&&typeof S.then=="function"?S:Pe.resolve(S)}catch(T){return Rt(T)}},currentTransaction:{get:function(){return Le.trans||null}},waitFor:function(d,h){return h=Pe.resolve(typeof d=="function"?Ci.ignoreTransaction(d):d).timeout(h||6e4),Le.trans?Le.trans.waitFor(h):h},Promise:Pe,debug:{get:function(){return we},set:function(d){ie(d)}},derive:v,extend:l,props:p,override:w,Events:Ga,on:js,liveQuery:u0,extendObservabilitySet:fc,getByKeyPath:I,setByKeyPath:R,delByKeyPath:function(d,h){typeof h=="string"?R(d,h,void 0):"length"in h&&[].map.call(h,function(x){R(d,x,void 0)})},shallowClone:$,deepClone:ne,getObjectDiff:yh,cmp:it,asap:O,minKey:-1/0,addons:[],connections:Co,errnames:De,dependencies:gc,cache:Ei,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,x){return d+h/Math.pow(10,2*x)})})),Ci.maxKey=Za(Ci.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(js(Ja,function(d){Os||(d=new CustomEvent(th,{detail:d}),Os=!0,dispatchEvent(d),Os=!1)}),addEventListener(th,function(d){d=d.detail,Os||xh(d)}));var jo,Os=!1,c0=function(){};return typeof BroadcastChannel<"u"&&((c0=function(){(jo=new BroadcastChannel(th)).onmessage=function(d){return d.data&&xh(d.data)}})(),typeof jo.unref=="function"&&jo.unref(),js(Ja,function(d){Os||jo.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Xr.disableBfCache&&d.persisted){we&&console.debug("Dexie: handling persisted pagehide"),jo!=null&&jo.close();for(var h=0,x=Co;h<x.length;h++)x[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Xr.disableBfCache&&d.persisted&&(we&&console.debug("Dexie: handling persisted pageshow"),c0(),xh({all:new on(-1/0,[[]])}))})),Pe.rejectionMapper=function(d,h){return!d||d instanceof ue||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Qe[d.name]?d:(h=new Qe[d.name](h||d.message,d),"stack"in d&&b(h,"stack",{get:function(){return this.inner.stack}}),h)},ie(we),r(Xr,Object.freeze({__proto__:null,Dexie:Xr,liveQuery:u0,Entity:Mv,cmp:it,PropModification:qa,replacePrefix:function(d,h){return new qa({replacePrefix:[d,h]})},add:function(d){return new qa({add:d})},remove:function(d){return new qa({remove:d})},default:Xr,RangeSet:on,mergeRanges:tl,rangesOverlap:Xv}),{default:Xr}),Xr})})(gS);var rD=gS.exports;const Qm=of(rD),rb=Symbol.for("Dexie"),Ra=globalThis[rb]||(globalThis[rb]=Qm);if(Qm.semVer!==Ra.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qm.semVer} and ${Ra.semVer}`);const{liveQuery:mU,mergeRanges:gU,rangesOverlap:yU,RangeSet:vU,cmp:wU,Entity:bU,PropModification:xU,replacePrefix:_U,add:kU,remove:SU,DexieYProvider:EU}=Ra;function sD(e,t,n){var r,s;typeof e=="function"?(r=t||[],s=n):(r=[],s=t);var i=ze.useRef({hasResult:!1,result:s,error:null}),o=ze.useReducer(function(u){return u+1},0);o[0];var a=o[1],l=ze.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")i.current.result=u.getValue(),i.current.hasResult=!0;else{var c=u.subscribe(function(f){i.current.result=f,i.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(ze.useDebugValue(i.current.result),ze.useEffect(function(){var u=l.subscribe(function(c){var f=i.current;(f.error!==null||f.result!==c)&&(f.error=null,f.result=c,f.hasResult=!0,a())},function(c){var f=i.current;f.error!==c&&(f.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),i.current.error)throw i.current.error;return i.current.result}function iD(e,t,n){return sD(function(){return Ra.liveQuery(e)},[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(e){var t=Ra.DexieYProvider;t&&t.release(e)});class yS extends Ra{constructor(){super("SankeertanDB");nl(this,"categories");nl(this,"songIndices");nl(this,"songDetails");nl(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId, categoryId"})}}let cd=null;function Lt(){return cd===null&&(cd=new yS,console.log("Database initialized or re-initialized.")),cd}cd=new yS;async function By(e){try{const n=await Lt().songIndices.where("bookId").equals(e).sortBy("insertionId");return n.length>0?n:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function Uy(e,t){try{const n=Lt();await n.songIndices.where("bookId").equals(e).delete();const r=t.map(s=>({...s,bookId:e,tags:s.tags||[]}));await n.songIndices.bulkAdd(r)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}const Va=async e=>{try{return await Lt().songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function oD(e){try{const n=await Lt().songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${n} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function aD(e){try{return await Lt().songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function Of(e,t){try{const n=[e,t];return await Lt().songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function lD(e,t){try{const n=Lt(),r=[e,t];return await n.songDetails.where("[bookId+songTitle]").equals(r).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const vS=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function wS(e){const t=vS(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await Lt().songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function uD(e,t){try{const n=Lt(),r=[e,t];await n.songDetails.delete(r)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function bS(e){try{return await Lt().songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function xS(e){try{const t=Lt(),n=await t.songDetails.where("bookId").equals(e).delete(),r=await t.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${n}, Indices removed: ${r}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function cD(e){try{await Lt().songDetails.bulkPut(e)}catch(t){throw console.error("Error bulk saving song details:",t),t}}async function dD(e){try{await Lt().songIndices.bulkPut(e)}catch(t){throw console.error("Error bulk saving song indices:",t),t}}function fD(e){const t=[];return e.forEach(n=>{const r=n.id;n.books&&Array.isArray(n.books)&&n.books.forEach(s=>{const i={...s,categoryId:r};t.push(i)})}),t}async function hD(e){const t=Lt(),n=fD(e);if(n.length===0){console.warn("No books found after transformation. Skipping 'books' table refresh.");return}try{await t.transaction("rw",t.books,async()=>{await t.books.clear(),await t.books.bulkPut(n)}),console.log(`Successfully saved ${n.length} books to the 'books' table.`)}catch(r){console.error("Error saving books to DB:",r)}}async function Gd(e){try{return await Lt().books.get(e)}catch(t){console.error(`Error retrieving metadata for book ${e}:`,t);return}}async function _S(e){try{const t=await Gd(e);if(!t)return!1;const n=Number(t.songCount)||0;if(n===0)return!1;const[r,s]=await Promise.all([Va(e),bS(e)]);return r&&s>=n}catch(t){return console.error(`Error checking download status for book ${e}:`,t),!1}}async function pD(){try{const n=(await Lt().books.toArray()).map(async s=>({bookId:s.bookId,isDownloaded:await _S(s.bookId)}));return(await Promise.all(n)).filter(s=>s.isDownloaded).map(s=>s.bookId)}catch(e){return console.error("Error getting all fully downloaded book IDs:",e),[]}}async function mD(e){try{const t=Lt(),n=await t.songIndices.where("bookId").equals(e).toArray(),r=await t.songDetails.where("bookId").equals(e).toArray();return!n.length&&!r.length?null:{bookId:e,songIndices:n,songDetails:r}}catch(t){return console.error(`Error exporting full book structure for ${e}:`,t),null}}async function gD(e){try{const t=Lt();await t.categories.clear(),await t.categories.bulkAdd(e),await hD(e),console.log("Categories saved successfully.")}catch(t){console.error("Error saving categories to DB:",t)}}const op=new Map;async function yD(e,t,n,r){const{sourceRow:s,songTitle:i}=t,o=vS(e,i);if(await Of(e,i))return;const l=op.get(o);if(l)return l;const u=String(s),c=Number(s),f=(async()=>{if(!e||!i||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${i}, Row: ${s}, User: ${n}`);try{const p=await r({bookId:e,sourceRow:u,songTitle:i,sessionuser:n});if(p.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[m,b,v,_]=p;await wS({bookId:e,songTitle:i,sourceRow:u,indexPosition:_,songData:m,metadata:b,sourceLanguage:v})}catch(p){throw console.error(`Failed to download and cache song ${i} in book ${e}:`,p),p}})();op.set(o,f);try{await f}finally{op.delete(o)}}async function sb(e){const t=e.map(async s=>{const i=s.bookId,o=s.songCount||0,[a,l,u]=await Promise.all([Va(i),bS(i),aD(i)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const f=c>0?l:0;return{bookId:i,status:{totalSongs:c,downloadedSongs:f,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(s=>{r[s.bookId]=s.status}),r}const vD=async e=>{const t=new URL(`${vo}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const i=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(i)}`)}const r=await n.json();return Object.keys(r).filter(i=>i!=="books").map(i=>({name:i,bookCount:Array.isArray(r[i])?r[i].length:0,books:Array.isArray(r[i])?r[i].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],Type:o.Type,songCount:o["Song Count"],verseCount:o["Verse Count"],author:o.author,language:o.language,isFullBookDownloadable:o.isFullBookDownloadable==="true"||o.isFullBookDownloadable===!0,isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:i.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(i)}&font=lora`}))},kS=E.createContext({categories:[],isLoading:!1,isFetching:!1,error:null}),wD=Lt(),bD=({children:e})=>{var l;const{session:t}=bo(),n=(l=t==null?void 0:t.user)==null?void 0:l.email,r=iD(()=>wD.categories.toArray()),{isLoading:s,isFetching:i,error:o,data:a}=jf({queryKey:["categories",n],queryFn:()=>vD(n??null),enabled:!!n,networkMode:"always"});return E.useEffect(()=>{a&&gD(a).catch(u=>console.error("Failed to sync categories to Dexie:",u))},[a]),k.jsx(kS.Provider,{value:{categories:r??[],isLoading:r===void 0||((r==null?void 0:r.length)??0)===0&&s,isFetching:i,error:o},children:e})},zy=()=>E.useContext(kS),ib=e=>{const[t,n]=E.useState(!1);return E.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),s=i=>n(i.matches);return n(r.matches),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e]),t},SS=()=>{const e=fr();return{handleSignOut:async()=>{const{error:n}=await Ut.auth.signOut();n?console.error("Error signing out:",n):(console.log("User signed out successfully. Navigating to /login."),e("/login"))}}},ob=Lt();function xD(){var $;const[e,t]=E.useState(!1),{categories:n,isLoading:r,isFetching:s,error:i}=zy(),o=fr(),[a,l]=E.useState([]),u=ib("(max-width: 600px) and (orientation: portrait)"),c=ib("(max-width: 900px) and (orientation: landscape)"),{session:f}=bo(),p=($=f==null?void 0:f.user)==null?void 0:$.email,{handleSignOut:m}=SS(),b=$u();E.useEffect(()=>{l((V=>{const he=[],M=360/V;for(let ne=0;ne<V;ne++){const A=ne*M;he.push(`hsl(${A}, 70%, 60%)`)}return he})(n.length))},[n.length]);const v=async()=>{await ob.categories.delete("1"),console.log("Categories & Books -> IndexedDB cache cleared. Data will be reloaded from the server."),b.invalidateQueries({queryKey:["categories",p]})},_=E.useCallback(async()=>{t(!1);try{console.warn("[DB ACTION] Attempting to delete entire database..."),await ob.delete(),await m()}catch(F){console.error("[DB ERROR] Could not delete the database:",F)}},[v]),g=E.useCallback(F=>{F.stopPropagation(),t(!0)},[]);if(r||s)return k.jsx("div",{children:"Loading categories..."});if(i instanceof Error)return k.jsxs("div",{children:["Error loading categories: ",i.message]});const y=(F,V)=>{F.stopPropagation(),o(`/books/${V}`)},w={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea",display:"flex",justifyContent:"space-between",alignItems:"center"},categoryGrid:{display:"grid",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"},actionButton:{border:"none",background:"none",cursor:"pointer",fontSize:"1.5rem",padding:"5px",borderRadius:"5px",transition:"background-color 0.2s",color:"#666",lineHeight:"1.5rem"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"30px",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",maxWidth:"400px",textAlign:"center"},buttonGroup:{display:"flex",justifyContent:"space-around",marginTop:"20px"}};let C;u?C="repeat(2, 1fr)":c?C="repeat(3, 1fr)":C="repeat(auto-fill, minmax(280px, 1fr))";const O={...w.categoryGrid,gridTemplateColumns:C},I=n==null?void 0:n.filter(F=>{var V;return(V=F.books)==null?void 0:V.some(he=>he.Type==="book")}),R=()=>e?k.jsx("div",{style:w.modalOverlay,children:k.jsxs("div",{style:w.modalContent,children:[k.jsx("h3",{className:"text-xl font-bold mb-3 text-red-600",children:" Confirm Permanent Deletion"}),k.jsx("p",{className:"text-gray-700",children:"Are you absolutely sure you want to delete **ALL** stored data (Categories, Books, Songs)? This action cannot be undone."}),k.jsxs("div",{style:w.buttonGroup,children:[k.jsx("button",{onClick:_,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Yes, Delete Everything"}),k.jsx("button",{onClick:()=>t(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition duration-150",children:"Cancel"})]})]})}):null;return k.jsxs("div",{style:w.container,children:[k.jsxs("h2",{style:w.heading,children:[k.jsx("span",{style:{marginRight:"auto"},children:"Book Categories"}),k.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[k.jsx("button",{onClick:v,style:{...w.actionButton,color:"#3498db",marginRight:"10px"},title:"Reload",children:""}),k.jsx("button",{onClick:g,style:{...w.actionButton,color:"#e74c3c"},title:"Delete ALL Data",children:""})]})]}),k.jsx("div",{style:O,children:I==null?void 0:I.map((F,V)=>k.jsxs("div",{onClick:he=>y(he,F.id),style:{...w.categoryItem,backgroundColor:V%2===0?"#f8f9fa":"#ffffff",borderLeft:`5px solid ${a[V]||"#3498db"}`},className:"category-item",children:[k.jsx("div",{style:{...w.categoryIcon,backgroundColor:a[V]||"#3498db"},children:""}),k.jsx("span",{style:w.categoryName,children:F.name})]},F.id))}),k.jsx("style",{children:`
                    .category-item:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                        border-color: #3498db;
                    }
                `}),k.jsx(R,{})]})}const _D=E.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),Vy=()=>E.useContext(_D);console.log("DownloadStatusProvider Function Running!");const ab={},ES=E.createContext(void 0),kD=({children:e,books:t})=>{const n=E.useMemo(()=>t.reduce((_,g)=>(_[g.bookId]={totalSongs:g.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},_),{}),[t]),[r,s]=E.useState(n),[i,o]=E.useState(!1);E.useEffect(()=>{if(!t||t.length===0){s({}),o(!0);return}(async()=>{try{const g=await sb(t),y={};for(const w of t){const C=w.bookId,O=g[C]||{},I=await Va(C);y[C]={totalSongs:w.songCount||O.totalSongs||0,downloadedSongs:O.downloadedSongs||0,isIndexDownloaded:I,downloadingSongs:{}}}s(y),o(!0)}catch(g){console.error("Failed to load or initialize download status:",g),s({}),o(!0)}})()},[t]);const a=E.useMemo(()=>t.map(_=>_.bookId).join(","),[t]);E.useEffect(()=>{if(!t||t.length===0){s(ab);return}(async()=>{try{const g=await sb(t);s(g)}catch(g){console.error("Failed to load initial download status from DB:",g),s(ab)}})()},[a,t]);const l=E.useCallback((_,g)=>{s(y=>({...y,[_]:{...y[_],totalSongs:g}}))},[]),u=E.useCallback((_,g)=>{s(y=>({...y,[_]:{...y[_],downloadedSongs:g}}))},[]),c=E.useCallback((_,g)=>{s(y=>({...y,[_]:{...y[_],isIndexDownloaded:g}}))},[]),f=E.useCallback((_,g)=>{s(y=>{var w;return{...y,[_]:{...y[_],downloadingSongs:{...(w=y[_])==null?void 0:w.downloadingSongs,[g]:!0}}}})},[]),p=E.useCallback((_,g)=>{s(y=>{const w=y[_];if(!w)return y;const C={...w.downloadingSongs};return delete C[g],{...y,[_]:{...w,downloadedSongs:(w.downloadedSongs||0)+1,downloadingSongs:C}}})},[]),m=E.useCallback((_,g,y)=>{s(w=>{const C=w[_]||{},O=C.downloadedSongs||0;return{...w,[_]:{...C,totalSongs:g,downloadedSongs:O,downloadingSongs:y}}})},[]),b=E.useCallback(_=>{s(g=>{const y=g[_];return y?{...g,[_]:{...y,downloadedSongs:y.totalSongs,downloadingSongs:{}}}:g})},[]),v={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:f,markSongAsDownloaded:p,updateIndexStatus:c,markBookDownloadStart:m,markBookDownloadComplete:b,isLoaded:i};return k.jsx(ES.Provider,{value:v,children:e})},Ky=()=>{const e=E.useContext(ES);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},SD=3e3,ED=1,CD=5,CS=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const s=new URL(vo);s.searchParams.append("mode","api"),s.searchParams.append("apiname","getsongtextforsong"),s.searchParams.append("book",e),s.searchParams.append("sourcerow",t),s.searchParams.append("songtitle",n),r&&s.searchParams.append("sessionuser",r);const i=await fetch(s.toString());if(!i.ok){const o=await i.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${i.status} - ${JSON.stringify(o)}`)}return await i.json()},TD=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:s,markBookDownloadStart:i,markBookDownloadComplete:o}=Ky(),a=E.useCallback(c=>{const f=r[c];if(!f)return!1;const p=f.downloadingSongs??{};return Object.keys(p).length>0},[r]),l=E.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=E.useCallback(async(c,f)=>{if(a(c))return 0;let p=[],m=0;if(await Va(c)){const y=await By(c);y&&Array.isArray(y)&&(p=y.map(w=>({sourceRow:w.sourceRow,songTitle:w.songTitle,tags:w.tags})),m=p.length)}else try{const y=new URL(vo);y.searchParams.append("mode","api"),y.searchParams.append("apiname","getsongsforbook"),y.searchParams.append("book",c),f&&y.searchParams.append("sessionuser",f);const w=await fetch(y.toString());if(!w.ok){const I=await w.json();throw new Error(`Failed to fetch song indices: ${w.status} - ${JSON.stringify(I)}`)}const O=(await w.json()).map(I=>({...I,sourceRow:typeof I.sourceRow=="string"?parseInt(I.sourceRow,10):I.sourceRow,tags:I.tags??void 0}));p=O,m=p.length,await Uy(c,O)}catch{return 0}if(p.length===0)return 0;const b=[];for(const y of p)await Of(c,y.songTitle)?s(c,y.songTitle):b.push(y);const v=b.slice(0,CD),_={};for(const y of v)_[y.songTitle]="pending";i(c,m,_);let g=0;for(const y of v)try{g>=ED&&(await new Promise(w=>setTimeout(w,SD)),g=0),await yD(c,y,f??null,CS),s(c,y.songTitle),g++}catch{}return m},[e,t,n,a,s,i]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},yr={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},Wy=()=>{const e=dr(),{categoryId:t,bookId:n,songTitle:r}=Ru(),s=r?decodeURIComponent(r):"",[i,o]=ze.useState(!1),a={...yr.link,color:i?"#0056b3":"#007bff",textDecoration:i?"underline":"none"},l=k.jsx(rr,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"});return e.pathname.startsWith("/books/")?k.jsxs("div",{style:yr.container,children:[l,k.jsx("span",{style:yr.separator,children:">"}),t]}):e.pathname.startsWith("/book/")?k.jsxs("div",{style:yr.container,children:[l,k.jsx("span",{style:yr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:yr.separator,children:">"}),n]}):e.pathname.startsWith("/details/book/")?k.jsxs("div",{style:yr.container,children:[l,k.jsx("span",{style:yr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:yr.separator,children:">"}),k.jsx(rr,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:n}),k.jsx("span",{style:yr.separator,children:">"}),k.jsx("span",{style:yr.currentPage,children:s})]}):null},TS=E.createContext({preferredLanguage:"devanagari",setPreferredLanguage:()=>{}}),PS=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=E.useState(t||"devanagari");return E.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),k.jsx(TS.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r},children:e})},xo=()=>E.useContext(TS);async function AS(e,t){const n=[];let r=0;for(;r<e.length;){const s=e.slice(r,r+t),i=await Promise.all(s.map(o=>o()));n.push(...i),r+=t}return n}const lb=3,PD=10;async function AD(e,t,n,r,s){const i=n||new Set,o=r.filter(a=>a.type==="link"&&a.link).map(a=>{try{return JSON.parse(a.link).bookId}catch{return null}}).filter(a=>a!==null&&a!==e).filter((a,l,u)=>u.indexOf(a)===l);if(o.length>0){const a=o.slice(0,PD);console.log(`[RECURSION START] Found ${o.length} linked books in ${e}. Queuing ${a.length} for batched download...`);const l=a.filter(u=>!i.has(u)).map(u=>()=>s(u,t,n));l.length>0?(console.log(`[BATCH EXECUTION] Queued ${l.length} unique downloads with batch size ${lb}.`),await AS(l,lb),console.log(`[RECURSION COMPLETE] All batched linked books for ${e} have been processed.`)):console.log(`[RECURSION SKIP] All queued linked books in ${e} are already being processed or downloaded.`)}}function jD(e,t){return e.filter(s=>s.type==="link"&&s.link).map(s=>{try{return JSON.parse(s.link).bookId}catch(i){return console.error("Failed to parse link JSON:",s.link,i),null}}).filter(s=>s!==null).filter((s,i,o)=>s!==t&&o.indexOf(s)===i)}async function Ym(e,t,n=new Set,r){if(!e)return 0;if(n.has(e))return console.warn(`[SKIP] Book ${e} is already in the download chain. Skipping.`),0;const s=await Gd(e);if(!s||!s.isFullBookDownloadable)return console.warn(`[SKIP] Book ${e} is not configured as full-book downloadable. Skipping.`),0;if(await _S(e))return console.log(`[SKIP] Book ${e} is already fully downloaded (from Dexie check). Skipping.`),0;n.add(e),console.log(`[DOWNLOAD START] Initiating bulk download for book ID: ${e}`);const i=new URL(vo);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getentirebookasjson"),i.searchParams.append("book",e),i.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`[FETCH] URL for ${e}: ${i.toString()}`);try{const o=await fetch(i.toString());if(!o.ok){let f={};try{f=await o.json()}catch{f={message:"No detailed error message, raw response status error."}}throw new Error(`Failed to fetch content for book ${e}: ${o.status} - ${JSON.stringify(f)}`)}const a=await o.json(),{songIndices:l,songDetails:u}=a;if(!u||u.length===0)return console.log(`[DOWNLOAD] No song details found for book: ${e}. Returning 0.`),0;await cD(u),await dD(l),console.log(`[DOWNLOAD SUCCESS] Data for ${e} saved to IndexedDB. Songs downloaded: ${u.length}`);const c=jD(l,e);if(c.length>0){console.log(`[RECURSION START] Found ${c.length} linked books in ${e}: ${c.join(", ")}. Initiating parallel download...`);const f=c.map(p=>Ym(p,t,n));await Promise.all(f),console.log(`[RECURSION COMPLETE] All linked books for ${e} have been processed.`)}return console.log(`[RECURSION CHECK] Checking for linked books in ${e}...`),await AD(e,t,n,l,Ym),u.length}catch(o){throw console.error(`[DOWNLOAD ERROR] Failed during processing for ${e}:`,o),o}finally{console.log(`[DOWNLOAD END] Finished processing book ID: ${e}.`)}}const jS=(e,t)=>{const n=$u(),[r,s]=E.useState({status:"idle",downloadedCount:null,error:null}),i=E.useCallback(async()=>{if(r.status!=="loading"){s({status:"loading",downloadedCount:null,error:null});try{const o=await Ym(e,t);return console.log("Bulk download successful. Invalidating React Query cache..."),await n.invalidateQueries({queryKey:Oj(e)}),await n.invalidateQueries({queryKey:jj}),console.log("Cache invalidated and refetched successfully."),s({status:"success",downloadedCount:o,error:null}),o}catch(o){const a=o.message||"Bulk download failed.";return s({status:"error",downloadedCount:null,error:a}),0}}},[e,t,r.status,n]);return{...r,startBulkDownload:i,isDownloading:r.status==="loading"}},OS=ze.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:s,isEffectivelyOffline:i,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:f,handleDeleteIndexClick:p,handleDeleteBookClick:m,DownloadNotAvailableIcon:b,DownloadIndexIcon:v,DownloadedIcon:_,DownloadBookIcon:g,DeleteIndexIcon:y,DeleteBookIcon:w}=e,{status:C,isDownloading:O,startBulkDownload:I}=jS(t.bookId,s),R=a(t.bookId),$=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,F=n.downloadedSongs||0,V=n.totalSongs||t.songCount||0,he=Math.max(Number(V),F),M=he>0?Math.floor(F/he*100):0,ne=r[t.bookId]??!1,A=F===he&&he>0,J=t.isFullBookDownloadable;return k.jsx("li",{onClick:xe=>u(xe,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:k.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[k.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),k.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${M}%`}}),k.jsx("span",{className:`relative z-20 px-2 ${M>25,"text-black-900"}`,children:R?k.jsxs("span",{className:"font-bold",children:[k.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),k.jsxs("span",{className:"text-green-700",children:["Downloading... (",$," remaining)"]})]}):k.jsx("span",{className:"text-black-900",children:t.bookName})})]}),k.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[k.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:k.jsxs("span",{children:["(",F,"/",he," downloaded)"]})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:ne?k.jsxs("span",{className:"flex items-center text-green-500",children:[_," ",k.jsx("span",{className:"ml-1",children:"Index"})]}):k.jsx("button",{onClick:xe=>{xe.stopPropagation(),c(xe,t.bookId)},disabled:i||o||a(t.bookId)||ne,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":k.jsxs(k.Fragment,{children:[v," ",k.jsx("span",{className:"ml-1",children:"Index"})]})})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:A?k.jsxs("span",{className:"flex items-center text-green-500",children:[_," ",k.jsx("span",{className:"ml-1",children:"Book"})]}):k.jsx(k.Fragment,{children:J?k.jsx("button",{onClick:xe=>{xe.stopPropagation(),I()},disabled:i||o||a(t.bookId),className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:k.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[g," ",O?"Downloading (Fast)...":C==="success"?"Downloaded ":"Book"]})}):k.jsxs("span",{className:"flex items-center text-red-500 cursor-help",title:"Bulk download is restricted for this book.",children:[b,k.jsx("span",{className:"ml-1 text-sm font-medium",children:"Not Available"})]})})}),k.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[k.jsxs("button",{onClick:xe=>{xe.stopPropagation(),p(xe,t.bookId)},disabled:!ne,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[y," ",k.jsx("span",{className:"ml-1",children:"Index"})]}),k.jsxs("button",{onClick:xe=>{xe.stopPropagation(),m(xe,t.bookId)},disabled:a(t.bookId)||M===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[w," ",k.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});OS.displayName="BookListItem";const OD=3;function RD(e,t){return t?t.filter(n=>n.type==="link"&&n.link).map(n=>{try{return JSON.parse(n.link).bookId}catch(r){return console.error("Error parsing link in song index:",r),null}}).filter(n=>n!==null&&n!==e).filter((n,r,s)=>s.indexOf(n)===r):[]}async function RS(e,t){if(t.has(e)){console.log(`[DELETION SKIP] Already processed ${e}.`);return}t.add(e),console.log(`[DELETION START] Analyzing dependencies for book: ${e}`);const n=await By(e),r=RD(e,n);if(r.length>0){console.log(`[RECURSION CHECK] Book ${e} links to ${r.length} unique books.`);const o=r,l=(await Promise.all(o.map(async u=>{const c=await Gd(u);return{id:u,type:c&&c.Type?c.Type:"mini-book"}}))).filter(u=>u.type==="mini-book").map(u=>u.id);if(l.length>0){const u=l.filter(c=>!t.has(c)).map(c=>()=>RS(c,t));u.length>0&&(console.log(`[BATCH EXECUTION] Queuing ${u.length} *mini-book* dependency deletions.`),await AS(u,OD),console.log(`[RECURSION COMPLETE] All mini-book dependencies for ${e} have been processed.`))}}const s=await Gd(e);(s&&s.Type?s.Type:"book")==="mini-book"?(await xS(e),console.log(`[DELETION SUCCESS] Successfully deleted mini-book ${e} and its dependencies.`)):console.log(`[CLEANUP COMPLETE] Book ${e} is type 'Book'. Only dependencies were deleted.`)}function ID(e,t){const n=E.useMemo(()=>((e==null?void 0:e.books)??[]).filter(a=>a.Type==="book"),[e==null?void 0:e.books]),[r,s]=E.useState(n);return E.useEffect(()=>{if(!t){s(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await Va(u.bookId)})))).filter(u=>u.isCached);s(l)})()},[n,t]),E.useMemo(()=>t?r:n,[t,n,r])}function DD(){var ue,fe;const{categoryId:e}=Ru(),t=fr(),{categories:n,isLoading:r,isFetching:s,error:i}=zy(),{isEffectivelyOffline:o}=Vy(),a=E.useMemo(()=>{if(n&&e)return n.find(ce=>ce.id===e)},[n,e]),l=ID(a,o),{downloadAllSongsForBook:u,isDownloadingBook:c,isAnyBookDownloading:f}=TD(),[p,m]=E.useState(null),[b,v]=E.useState(!1),[_,g]=E.useState({});$u();const{preferredLanguage:y}=xo(),{downloadStatus:w,isLoaded:C,updateDownloadProgress:O,updateDownloadedCount:I}=Ky(),{session:R}=bo(),$=(ue=R==null?void 0:R.user)==null?void 0:ue.email;E.useEffect(()=>{if(!l||l.length===0){g({});return}(async()=>{const Ce=l.map(ye=>Va(ye.bookId)),De=await Promise.all(Ce),Me={};l.forEach((ye,Qe)=>{Me[ye.bookId]=De[Qe]}),g(Me)})()},[l]);const F=E.useCallback(async(ce,Ce)=>{let Me;for(let ye=0;ye<1;ye++)try{const Qe=new URL(vo);Qe.searchParams.append("mode","api"),Qe.searchParams.append("apiname","getsongsforbook"),Qe.searchParams.append("book",ce),Qe.searchParams.append("sessionuser",Ce??"dummyfornow");const Ze=await fetch(Qe.toString());if(!Ze.ok){const P=await Ze.text();throw new Error(`Fetch failed (Status: ${Ze.status}). Body: ${P}`)}const Tt=(await Ze.json()).map(P=>({...P,sourceRow:typeof P.sourceRow=="string"?parseInt(P.sourceRow,10):P.sourceRow,tags:P.tags||null}));return await Uy(ce,Tt),Tt}catch(Qe){if(Me=Qe,ye<0){const Ze=Math.pow(2,ye)*1e3;console.log(`Retrying fetch in ${Ze}ms...`),await new Promise(Ve=>setTimeout(Ve,Ze))}}throw Me},[]),V=E.useCallback(async(ce,Ce)=>{ce.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] Confirm deletion of book index [${Ce}]. Proceeding with deletion assuming user confirmed.`),await oD(Ce),g(De=>({...De,[Ce]:!1})),O(Ce,0),I(Ce,0)},[O,I]),he=E.useCallback(async(ce,Ce)=>{ce.stopPropagation(),console.warn(`[ACTION REQUIRED: Custom Modal] WARNING: This will permanently delete the ENTIRE book "${Ce}". Proceeding with deletion assuming user confirmed.`);const De=new Set;try{await RS(Ce,De),await xS(Ce),O(Ce,0),I(Ce,0)}catch(Me){console.error(`Failed to delete book ${Ce} recursively:`,Me)}},[O,I]),M=E.useCallback((ce,Ce)=>{console.log(`categoryId:${e}, bookId:${Ce}`),ce.stopPropagation(),t(`/book/${e}/${Ce}`)},[e,t]),ne=async()=>{var Ce;v(!0);const ce=(Ce=R==null?void 0:R.user)==null?void 0:Ce.email;try{for(const Me of l)console.log(`Downloading index for book: ${Me.bookId}`),await F(Me.bookId,ce);console.log("All song indices downloaded successfully.");const De=l.reduce((Me,ye)=>(Me[ye.bookId]=!0,Me),{});g(De)}catch(De){console.error("Failed to download all indices:",De),g({})}finally{v(!1)}},A=E.useCallback(async(ce,Ce)=>{var Me;ce.stopPropagation(),m(Ce);const De=(Me=R==null?void 0:R.user)==null?void 0:Me.email;try{await F(Ce,De),console.log(`Index for Book ${Ce} downloaded successfully and cached.`),g(ye=>({...ye,[Ce]:!0}))}catch(ye){console.error(`Failed to download index for Book ${Ce}:`,ye),g(Qe=>({...Qe,[Ce]:!1}))}finally{m(null)}},[(fe=R==null?void 0:R.user)==null?void 0:fe.email,F]),J=E.useCallback((ce,Ce,De)=>{ce.stopPropagation(),u(Ce,$)},[u,$]),xe=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),[]),oe=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),[]),ae=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),[]),re=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]}),[]),ge=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),[]),N=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),[]),z=E.useMemo(()=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]}),[]);return r||s?k.jsx("div",{children:"Loading books..."}):i instanceof Error?k.jsxs("div",{children:["Error loading books: ",i.message]}):C?k.jsxs(k.Fragment,{children:[k.jsx(Wy,{}),k.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner",children:[k.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Books in ",(a==null?void 0:a.name)||"Category"]}),l.length>0?k.jsx("ul",{className:"list-none p-0 space-y-3",children:l.map(ce=>k.jsx(OS,{book:ce,status:w[ce.bookId]||{},indexDownloadStatus:_,userEmail:$??null,isEffectivelyOffline:o,isAnyBookDownloading:f,isDownloadingBook:c,isDownloadingBookIndex:p,handleBookClick:M,handleDownloadBookIndexClick:A,handleDownloadBookClick:J,handleDeleteIndexClick:V,handleDeleteBookClick:he,DownloadNotAvailableIcon:re,DownloadIndexIcon:xe,DownloadedIcon:ge,DownloadBookIcon:ae,DeleteIndexIcon:z,DeleteBookIcon:N},ce.bookId))}):k.jsx("div",{className:"text-center py-10 text-gray-500 bg-white rounded-lg shadow-md",children:o?"No cached books found. Connect to the internet to download content.":"No books found in this category."})]}),k.jsx("div",{className:"mt-6 flex justify-end",children:k.jsxs("button",{onClick:ne,disabled:b,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 flex items-center justify-center space-x-2 shadow-md ${b?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[b?k.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):oe,k.jsx("span",{children:b?"Downloading All Indices...":"Download All Indices"})]})})]}):k.jsx("div",{className:"flex justify-center items-center h-40",children:k.jsx("p",{children:"Loading download status..."})})}function ND(e){return[{pattern:/([])/g,replacement:"$1",name:"Palatal"},{pattern:/([])/g,replacement:"$1",name:"Retroflex"},{pattern:/([])/g,replacement:"$1",name:"Velar"},{pattern:/([])/g,replacement:"$1",name:"Dental"},{pattern:/([])/g,replacement:"$1",name:"Labial"},{pattern:/$/g,replacement:"",name:"Word-final"},{pattern://g,replacement:"",name:"Chandrabindu  "}].reduce((n,r)=>{const s=n.replace(r.pattern,(i,o)=>r.replacement.replace("$1",o));return s!==n?s:n},e)}function LD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};return e.replace(/\u0D30\u0D4D/g,"").replace(/[-]/g,n=>t[n]||n)}function $D(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};let n=e;for(const r in t){const s=t[r];n=n.replace(new RegExp(r,"g"),s)}return n}function MD(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const pu=(e,t,n)=>{if(n==="original"||t==="tamil"&&n==="tamil_superscripted")return e;let r=e,s=e;try{return t==="devanagari"?r=ND(r):(t==="tamil"||t==="tamil_superscripted")&&(r=r.normalize("NFC")),window.Sanscript&&(s=window.Sanscript.t(r,t==="devanagari"?"devanagari":"itrans",n),n==="malayalam"?s=LD(s):n==="itrans"?t==="tamil"&&(s=MD(s)):(n==="tamil"||n==="tamil_superscripted")&&(s=$D(s))),s}catch(i){return console.error(`Sanscript Transliteration Error for target: ${n}. Returning original text.`,i),e}},FD={color:"#059669",background:"#E6FFEE"},BD={color:"#EF4444",background:"#FEEEEE"},UD={color:"green"},zD={color:"black"},ub={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},VD={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},IS={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},KD={backgroundColor:"#f0f4f8"},WD={backgroundColor:"#f5f5f5",fontWeight:"bold",fontSize:"1.2em",padding:"15px 15px 5px 15px",cursor:"default",marginBottom:"10px",marginTop:"15px",borderBottom:"2px solid #ddd",boxShadow:"none"},cb={...IS,backgroundColor:"#eaf2ff",color:"#1e40af",fontWeight:"500",border:"1px solid #c3dafe"},HD=async(e,t)=>{if(!e)return[];const n=new URL(vo);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const i=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(i)}`)}const s=await r.json();return s.data||s},qD=(e,t)=>{const[n,r]=E.useState({});return E.useEffect(()=>{if(r({}),!e||!t||t.length===0)return;(async()=>{const i=t.map(async l=>{const u=await Of(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(i)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n},GD=(e,t)=>{const n=t==="itrans"?e.songTitle:(()=>{if(window.Sanscript)try{return pu(e.songTitle,"itrans",t)}catch(r){return console.error("Error during transliteration",r),e.songTitle}return e.songTitle})();return e.type==="link"?k.jsxs(k.Fragment,{children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"10px",minWidth:"20px"},children:[k.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"}),k.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"})]}),k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:n})]}):k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:n})},db=e=>{if(e.type!=="link"||!e.link)return null;try{return JSON.parse(e.link).bookId||null}catch{return null}};function QD(){var ne;const{categoryId:e,bookId:t}=Ru(),n=fr(),{isEffectivelyOffline:r}=Vy(),{session:s}=bo(),i=(ne=s==null?void 0:s.user)==null?void 0:ne.email,[o,a]=E.useState(null),{preferredLanguage:l}=xo(),[,u]=E.useState({}),[c,f]=E.useState(!0),[p,m]=E.useState([]);E.useEffect(()=>{(async()=>{f(!0);try{const J=await pD();m(J)}catch(J){console.error("Failed to fetch downloaded book IDs:",J)}finally{f(!1)}})()},[]),E.useEffect(()=>{u({})},[l]);const{isLoading:b,error:v,data:_,isFetching:g}=jf({queryKey:["songIndices",t,i],queryFn:async()=>{if(!t||!i)return[];const A=await By(t);return A&&A.length>0?A:HD(t,i)},staleTime:1/0,gcTime:0,networkMode:"always",refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!!t&&!!i}),y=_,{downloadStatus:w}=Ky(),C=qD(t,y);if(E.useEffect(()=>{t&&_&&!g&&Uy(t,_).catch(A=>{console.error("Error saving song indices data to IndexedDB:",A)})},[t,_,g]),E.useEffect(()=>{const A=sessionStorage.getItem("lastClickedSongIndex");A!==null&&(a(parseInt(A,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),b)return k.jsx("div",{style:VD,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(v instanceof Error)return k.jsxs("div",{children:["Error loading song indices: ",v.message]});const I=(A,J,xe,oe)=>{switch(A.stopPropagation(),J[xe].type){case"title":break;case"link":const re=J[xe].link,ge=JSON.parse(re),N=ge.categoryId.trim(),z=ge.bookId.trim(),ue=`/book/${N}/${z}`;console.log(ue),N&&z&&(sessionStorage.setItem("lastClickedSongIndex",xe.toString()),n(ue));break;default:const fe=J[xe].sourceRow,ce=J[xe].songTitle;oe&&(sessionStorage.setItem("lastClickedSongIndex",xe.toString()),n(`/details/book/${e}/${oe}/${fe}/${encodeURIComponent(ce)}`,{state:{filteredSongIndices:J,index:xe}}))}},R=A=>C[A]===!0,$=A=>p.includes(A),F=(y==null?void 0:y.filter(A=>r?R(A.songTitle):!0))??[],V=(A,J)=>{if(A.type==="title")return WD;if(A.type==="link"){const oe=db(A),ae=oe?$(oe):!1;return{...cb,...ae?FD:BD,...J===o&&ub}}const xe=R(A.songTitle);return{...IS,...xe?UD:zD,...J===o&&ub}},he=(A,J)=>{J!=="title"&&(A.currentTarget.style.backgroundColor=KD.backgroundColor)},M=(A,J)=>{J!=="title"&&(J==="link"?A.currentTarget.style.backgroundColor=cb.backgroundColor:A.currentTarget.style.backgroundColor="")};return k.jsxs(k.Fragment,{children:[k.jsx(Wy,{}),k.jsxs("div",{children:[k.jsxs("h2",{children:["Song Indices for Book:"," ",`bookId: ${t} (${F.length} items)`]}),k.jsx("ul",{className:"list-none p-0 m-0",children:F==null?void 0:F.map((A,J)=>{var xe;return db(A),k.jsxs("li",{onClick:oe=>{A.type!=="title"&&I(oe,F,J,t)},style:V(A,J),onMouseEnter:oe=>he(oe,A.type),onMouseLeave:oe=>M(oe,A.type),className:`transition-all duration-150 ease-in-out ${A.type!=="title"?"hover:shadow-md":""}`,children:[GD(A,l),A.type==="song"&&k.jsx("span",{style:{marginLeft:"10px",color:"#EF4444"},children:t&&((xe=w[t])==null?void 0:xe.downloadingSongs[A.songTitle||""])&&"..downloading song.."}),A.type==="link"&&$(t)&&k.jsx("span",{style:{marginLeft:"10px",color:"orange",fontSize:"0.85em",fontWeight:"600"},children:"..downloading linked book.."})]},A.sourceRow)})})]})]})}const YD=e=>{const t=/([-])(?![])(?=[-])/g;return e.replace(t,"$1&shy;")},JD=e=>{const t=/<link\s+categoryId="([^"]+)"\s+bookId="([^"]+)"\s+sourceRow=(?:\"([^\"]+)\"|(\S+))\s+songTitle="([^"]+)">([\s\S]*?)<\/link>/gi;return e.replace(t,(n,r,s,i,o,a,l)=>{const u=i||o,c=r.replace(/"/g,"&quot;"),f=s.replace(/"/g,"&quot;"),p=u.replace(/"/g,"&quot;"),m=a.replace(/"/g,"&quot;");return`
      <a 
        href="#"
        class="text-indigo-600 hover:text-indigo-800 font-medium underline cursor-pointer transition-colors duration-150"
        onclick="event.preventDefault(); window.handleInternalNavigation(
          '${c}', 
          '${f}', 
          '${p}', 
          '${m}'
        );"
      >
        ${l}
      </a>
    `})},ZD=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:s=[],striped:i=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c})=>{if(!Array.isArray(e)||e.length<1)return k.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[f,...p]=e,m=v=>{let _=String(v).replace(/ \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof v=="string"&&u!==c)try{const g=_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let y=pu(g,c,u);(u.toLowerCase()==="devanagari"||u.toLowerCase()==="devanagari")&&(y=YD(y)),_=y}catch(g){return console.error("Error during transliteration:",g),{__html:_}}return _=_.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),_=JD(_),{__html:_}},b=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return k.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${b} ${t}`,children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsx("tr",{children:f.map((v,_)=>k.jsx("th",{className:`
         px-4 py-4 text-left text-${l} font-medium text-gray-700
         ${r.includes(_)?n:""}
         sticky top-0 bg-gray-100
        `,dangerouslySetInnerHTML:m(v)},`th-${_}`))})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((v,_)=>k.jsx("tr",{id:`trRowAsAnchor-${_}`,className:`
    ${i&&_%2===0?"bg-white":"bg-gray-100"}
    ${o?"hover:bg-indigo-50":""}
   `,children:v.map((g,y)=>k.jsx("td",{className:`
      px-4 py-3.5 text-${l} align-top
      ${s.includes(y)?"whitespace-normal break-all max-w-full":"whitespace-nowrap"}
      ${r.includes(y)?n:""}
     `,dangerouslySetInnerHTML:m(g)},`td-${_}-${y}`))},`row-${_}`))})]})})};function XD(e,t,n){return Math.max(t,Math.min(e,n))}const hn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function fb(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function hb(e,t,n,r=.15){return r===0?XD(e,t,n):e<t?-fb(t-e,n-t,r)+t:e>n?+fb(e-n,n-t,r)+n:e}function eN(e,[t,n],[r,s]){const[[i,o],[a,l]]=e;return[hb(t,i,o,r),hb(n,a,l,s)]}function tN(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nN(e){var t=tN(e,"string");return typeof t=="symbol"?t:String(t)}function Cn(e,t,n){return t=nN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pb(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const DS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function mb(e){return e?e[0].toUpperCase()+e.slice(1):""}const rN=["enter","leave"];function sN(e=!1,t){return e&&!rN.includes(t)}function iN(e,t="",n=!1){const r=DS[e],s=r&&r[t]||t;return"on"+mb(e)+mb(s)+(sN(n,s)?"Capture":"")}const oN=["gotpointercapture","lostpointercapture"];function aN(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=oN.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function lN(e,t=""){const n=DS[e],r=n&&n[t]||t;return e+r}function Rf(e){return"touches"in e}function NS(e){return Rf(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function uN(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function cN(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function LS(e){return Rf(e)?cN(e)[0]:e}function dN(e){return uN(e).map(t=>t.identifier)}function ap(e){const t=LS(e);return Rf(e)?t.identifier:t.pointerId}function gb(e){const t=LS(e);return[t.clientX,t.clientY]}function fN(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:i})}return t}function Qd(e,...t){return typeof e=="function"?e(...t):e}function hN(){}function pN(...e){return e.length===0?hN:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function yb(e,t){return Object.assign({},t,e||{})}const mN=32;class gN{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Qd(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let i=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,fN(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const I=n._delta.map(Math.abs);hn.addTo(n._distance,I)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[I,R]=f;p[0]=c[0]!==!1?I-c[0]:0,p[1]=c[1]!==!1?R-c[1]:0}else p[0]=c[0]!==!1?o-c[0]:0,p[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,b=n._active&&!n._blocked||n.active;b&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Qd(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,_]=n.offset,[[g,y],[w,C]]=n._bounds;n.overflow=[v<g?-1:v>y?1:0,_<w?-1:_>C?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const O=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=eN(n._bounds,n.offset,O),n.delta=hn.sub(n.offset,m),this.computeMovement(),b&&(!n.last||i>mN)){n.delta=hn.sub(n.offset,m);const I=n.delta.map(Math.abs);hn.addTo(n.distance,I),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[I[0]/i,I[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(St(St(St({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function yN([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class vN extends gN{constructor(...t){super(...t),Cn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=hn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=hn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[NS(t)]:r.axisThreshold;n.axis=yN(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const wN=e=>e,vb=.15,$S={enabled(e=!0){return e},eventOptions(e,t,n){return St(St({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[vb,vb];case!1:return[0,0];default:return hn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return hn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||wN},threshold(e){return hn.toVector(e,0)}},bN=0,Mu=St(St({},$S),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=bN){return e},bounds(e={}){if(typeof e=="function")return i=>Mu.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),wb={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class xN extends vN{constructor(...t){super(...t),Cn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Mu.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=ap(t),r._pointerActive=!0,this.computeValues(gb(t)),this.computeInitial(),n.preventScrollAxis&&NS(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=ap(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const i=gb(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=hn.sub(i,n._values),this.computeValues(i)),hn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=ap(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,o]=n._distance;if(n.tap=i<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,p]=r.swipe.velocity,[m,b]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const _=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);_>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(c)>b&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,_N(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=wb[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,hn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in wb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function _N(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Fu=typeof window<"u"&&window.document&&window.document.createElement;function MS(){return Fu&&"ontouchstart"in window}function kN(){return MS()||Fu&&window.navigator.maxTouchPoints>1}function SN(){return Fu&&"onpointerdown"in window}function EN(){return Fu&&"exitPointerLock"in window.document}function CN(){try{return"constructor"in GestureEvent}catch{return!1}}const sr={isBrowser:Fu,gesture:CN(),touch:MS(),touchscreen:kN(),pointer:SN(),pointerLock:EN()},TN=250,PN=180,AN=.5,jN=50,ON=250,RN=10,bb={mouse:0,touch:0,pen:8},IN=St(St({},Mu),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&sr.pointerLock,sr.touch&&n?"touch":this.pointerLock?"mouse":sr.pointer&&!s?"pointer":sr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?TN:void 0,!(!sr.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const i=hn.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:e=AN,distance:t=jN,duration:n=ON}={}){return{velocity:this.transform(hn.toVector(e)),distance:this.transform(hn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return PN;case!1:return 0;default:return e}},axisThreshold(e){return e?St(St({},bb),e):bb},keyboardDisplacement(e=RN){return e}});St(St({},$S),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!sr.touch&&sr.gesture)return"gesture";if(sr.touch&&r)return"touch";if(sr.touchscreen){if(sr.pointer)return"pointer";if(sr.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const a=yb(Qd(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=yb(Qd(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[s(),i()]:o=>[s(o),i(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",hn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});St(St({},Mu),{},{mouseOnly:(e=!0)=>e});St(St({},Mu),{},{mouseOnly:(e=!0)=>e});const FS=new Map,Jm=new Map;function DN(e){FS.set(e.key,e.engine),Jm.set(e.key,e.resolver)}const NN={key:"drag",engine:xN,resolver:IN};function LN(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $N(e,t){if(e==null)return{};var n=LN(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const MN={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=sr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},FN=["target","eventOptions","window","enabled","transform"];function dd(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=dd(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function BN(e,t,n={}){const r=e,{target:s,eventOptions:i,window:o,enabled:a,transform:l}=r,u=$N(r,FN);if(n.shared=dd({target:s,eventOptions:i,window:o,enabled:a,transform:l},MN),t){const c=Jm.get(t);n[t]=dd(St({shared:n.shared},u),c)}else for(const c in u){const f=Jm.get(c);f&&(n[c]=dd(St({shared:n.shared},u[c]),f))}return n}class BS{constructor(t,n){Cn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,i){const o=this._listeners,a=lN(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=St(St({},l),i);t.addEventListener(a,s,u);const c=()=>{t.removeEventListener(a,s,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class UN{constructor(){Cn(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class zN{constructor(t){Cn(this,"gestures",new Set),Cn(this,"_targetEventStore",new BS(this)),Cn(this,"gestureEventStores",{}),Cn(this,"gestureTimeoutStores",{}),Cn(this,"handlers",{}),Cn(this,"config",{}),Cn(this,"pointerIds",new Set),Cn(this,"touchIds",new Set),Cn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),VN(this,t)}setEventIds(t){if(Rf(t))return this.touchIds=new Set(dN(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=BN(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=xb(r,a.eventOptions,!!s);if(a.enabled){const u=FS.get(o);new u(this,t,o).bind(l)}}const i=xb(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)i(o,"",a=>this.nativeHandlers[o](St(St({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const i in r)r[i]=pN(...r[i]);if(!s)return r;for(const i in r){const{device:o,capture:a,passive:l}=aN(i);this._targetEventStore.add(s,o,"",r[i],{capture:a,passive:l})}}}}function Mo(e,t){e.gestures.add(t),e.gestureEventStores[t]=new BS(e,t),e.gestureTimeoutStores[t]=new UN}function VN(e,t){t.drag&&Mo(e,"drag"),t.wheel&&Mo(e,"wheel"),t.scroll&&Mo(e,"scroll"),t.move&&Mo(e,"move"),t.pinch&&Mo(e,"pinch"),t.hover&&Mo(e,"hover")}const xb=(e,t,n)=>(r,s,i,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let p=a?r:iN(r,s,c);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)};function KN(e,t={},n,r){const s=ze.useMemo(()=>new zN(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),ze.useEffect(s.effect.bind(s)),ze.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function WN(e,t){return DN(NN),KN({drag:e},t||{},"drag")}const Hy=E.createContext({});function qy(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const Gy=typeof window<"u",US=Gy?E.useLayoutEffect:E.useEffect,If=E.createContext(null);function Qy(e,t){e.indexOf(t)===-1&&e.push(t)}function Yy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ws=(e,t,n)=>n>t?t:n<e?e:n;let Jy=()=>{};const bs={},zS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function VS(e){return typeof e=="object"&&e!==null}const KS=e=>/^0[^.\s]+$/u.test(e);function Zy(e){let t;return()=>(t===void 0&&(t=e()),t)}const lr=e=>e,HN=(e,t)=>n=>t(e(n)),Bu=(...e)=>e.reduce(HN),mu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Xy{constructor(){this.subscriptions=[]}add(t){return Qy(this.subscriptions,t),()=>Yy(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qr=e=>e*1e3,or=e=>e/1e3;function WS(e,t){return t?e*(1e3/t):0}const HS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,qN=1e-7,GN=12;function QN(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=HS(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>qN&&++a<GN);return o}function Uu(e,t,n,r){if(e===t&&n===r)return lr;const s=i=>QN(i,0,1,e,n);return i=>i===0||i===1?i:HS(s(i),t,r)}const qS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,GS=e=>t=>1-e(1-t),QS=Uu(.33,1.53,.69,.99),ev=GS(QS),YS=qS(ev),JS=e=>(e*=2)<1?.5*ev(e):.5*(2-Math.pow(2,-10*(e-1))),tv=e=>1-Math.sin(Math.acos(e)),ZS=GS(tv),XS=qS(tv),YN=Uu(.42,0,1,1),JN=Uu(0,0,.58,1),eE=Uu(.42,0,.58,1),ZN=e=>Array.isArray(e)&&typeof e[0]!="number",tE=e=>Array.isArray(e)&&typeof e[0]=="number",XN={linear:lr,easeIn:YN,easeInOut:eE,easeOut:JN,circIn:tv,circInOut:XS,circOut:ZS,backIn:ev,backInOut:YS,backOut:QS,anticipate:JS},eL=e=>typeof e=="string",_b=e=>{if(tE(e)){Jy(e.length===4);const[t,n,r,s]=e;return Uu(t,n,r,s)}else if(eL(e))return XN[e];return e},Uc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tL(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,f=!1,p=!1)=>{const b=p&&s?n:r;return f&&o.add(c),b.has(c)||b.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const nL=40;function nE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Uc.reduce((w,C)=>(w[C]=tL(i),w),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:p,render:m,postRender:b}=o,v=()=>{const w=bs.useManualTiming?s.timestamp:performance.now();n=!1,bs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,nL),1)),s.timestamp=w,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),f.process(s),p.process(s),m.process(s),b.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(v))},_=()=>{n=!0,r=!0,s.isProcessing||e(v)};return{schedule:Uc.reduce((w,C)=>{const O=o[C];return w[C]=(I,R=!1,$=!1)=>(n||_(),O.schedule(I,R,$)),w},{}),cancel:w=>{for(let C=0;C<Uc.length;C++)o[Uc[C]].cancel(w)},state:s,steps:o}}const{schedule:bt,cancel:pi,state:en,steps:lp}=nE(typeof requestAnimationFrame<"u"?requestAnimationFrame:lr,!0);let fd;function rL(){fd=void 0}const On={now:()=>(fd===void 0&&On.set(en.isProcessing||bs.useManualTiming?en.timestamp:performance.now()),fd),set:e=>{fd=e,queueMicrotask(rL)}},rE=e=>t=>typeof t=="string"&&t.startsWith(e),nv=rE("--"),sL=rE("var(--"),rv=e=>sL(e)?iL.test(e.split("/*")[0].trim()):!1,iL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ka={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},gu={...Ka,transform:e=>ws(0,1,e)},zc={...Ka,default:1},Ml=e=>Math.round(e*1e5)/1e5,sv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oL(e){return e==null}const aL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,iv=(e,t)=>n=>!!(typeof n=="string"&&aL.test(n)&&n.startsWith(e)||t&&!oL(n)&&Object.prototype.hasOwnProperty.call(n,t)),sE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(sv);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},lL=e=>ws(0,255,e),up={...Ka,transform:e=>Math.round(lL(e))},Wi={test:iv("rgb","red"),parse:sE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+up.transform(e)+", "+up.transform(t)+", "+up.transform(n)+", "+Ml(gu.transform(r))+")"};function uL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Zm={test:iv("#"),parse:uL,transform:Wi.transform},zu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=zu("deg"),Gr=zu("%"),qe=zu("px"),cL=zu("vh"),dL=zu("vw"),kb={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Xo={test:iv("hsl","hue"),parse:sE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gr.transform(Ml(t))+", "+Gr.transform(Ml(n))+", "+Ml(gu.transform(r))+")"},Ft={test:e=>Wi.test(e)||Zm.test(e)||Xo.test(e),parse:e=>Wi.test(e)?Wi.parse(e):Xo.test(e)?Xo.parse(e):Zm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Wi.transform(e):Xo.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},fL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hL(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(sv))==null?void 0:t.length)||0)+(((n=e.match(fL))==null?void 0:n.length)||0)>0}const iE="number",oE="color",pL="var",mL="var(",Sb="${}",gL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(gL,l=>(Ft.test(l)?(r.color.push(i),s.push(oE),n.push(Ft.parse(l))):l.startsWith(mL)?(r.var.push(i),s.push(pL),n.push(l)):(r.number.push(i),s.push(iE),n.push(parseFloat(l))),++i,Sb)).split(Sb);return{values:n,split:a,indexes:r,types:s}}function aE(e){return yu(e).values}function lE(e){const{split:t,types:n}=yu(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===iE?i+=Ml(s[o]):a===oE?i+=Ft.transform(s[o]):i+=s[o]}return i}}const yL=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function vL(e){const t=aE(e);return lE(e)(t.map(yL))}const mi={test:hL,parse:aE,createTransformer:lE,getAnimatableNone:vL};function cp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function wL({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=cp(l,a,e+1/3),i=cp(l,a,e),o=cp(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Yd(e,t){return n=>n>0?t:e}const kt=(e,t,n)=>e+(t-e)*n,dp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},bL=[Zm,Wi,Xo],xL=e=>bL.find(t=>t.test(e));function Eb(e){const t=xL(e);if(!t)return!1;let n=t.parse(e);return t===Xo&&(n=wL(n)),n}const Cb=(e,t)=>{const n=Eb(e),r=Eb(t);if(!n||!r)return Yd(e,t);const s={...n};return i=>(s.red=dp(n.red,r.red,i),s.green=dp(n.green,r.green,i),s.blue=dp(n.blue,r.blue,i),s.alpha=kt(n.alpha,r.alpha,i),Wi.transform(s))},Xm=new Set(["none","hidden"]);function _L(e,t){return Xm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function kL(e,t){return n=>kt(e,t,n)}function ov(e){return typeof e=="number"?kL:typeof e=="string"?rv(e)?Yd:Ft.test(e)?Cb:CL:Array.isArray(e)?uE:typeof e=="object"?Ft.test(e)?Cb:SL:Yd}function uE(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>ov(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function SL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=ov(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function EL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const CL=(e,t)=>{const n=mi.createTransformer(t),r=yu(e),s=yu(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Xm.has(e)&&!s.values.length||Xm.has(t)&&!r.values.length?_L(e,t):Bu(uE(EL(r,s),s.values),n):Yd(e,t)};function cE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?kt(e,t,n):ov(e)(e,t)}const TL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bt.update(t,n),stop:()=>pi(t),now:()=>en.isProcessing?en.timestamp:On.now()}},dE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Jd=2e4;function av(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Jd;)t+=n,r=e.next(t);return t>=Jd?1/0:t}function PL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(av(r),Jd);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:or(s)}}const AL=5;function fE(e,t,n){const r=Math.max(t-AL,0);return WS(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fp=.001;function jL({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let s,i,o=1-t;o=ws(At.minDamping,At.maxDamping,o),e=ws(At.minDuration,At.maxDuration,or(e)),o<1?(s=u=>{const c=u*o,f=c*e,p=c-n,m=eg(u,o),b=Math.exp(-f);return fp-p/m*b},i=u=>{const f=u*o*e,p=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,b=Math.exp(-f),v=eg(Math.pow(u,2),o);return(-s(u)+fp>0?-1:1)*((p-m)*b)/v}):(s=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-fp+c*f},i=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=RL(s,i,a);if(e=qr(e),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const OL=12;function RL(e,t,n){let r=n;for(let s=1;s<OL;s++)r=r-e(r)/t(r);return r}function eg(e,t){return e*Math.sqrt(1-t*t)}const IL=["duration","bounce"],DL=["stiffness","damping","mass"];function Tb(e,t){return t.some(n=>e[n]!==void 0)}function NL(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!Tb(e,DL)&&Tb(e,IL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ws(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:At.mass,stiffness:s,damping:i}}else{const n=jL(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function Zd(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:f,velocity:p,isResolvedFromDuration:m}=NL({...n,velocity:-or(n.velocity||0)}),b=p||0,v=u/(2*Math.sqrt(l*c)),_=o-i,g=or(Math.sqrt(l/c)),y=Math.abs(_)<5;r||(r=y?At.restSpeed.granular:At.restSpeed.default),s||(s=y?At.restDelta.granular:At.restDelta.default);let w;if(v<1){const O=eg(g,v);w=I=>{const R=Math.exp(-v*g*I);return o-R*((b+v*g*_)/O*Math.sin(O*I)+_*Math.cos(O*I))}}else if(v===1)w=O=>o-Math.exp(-g*O)*(_+(b+g*_)*O);else{const O=g*Math.sqrt(v*v-1);w=I=>{const R=Math.exp(-v*g*I),$=Math.min(O*I,300);return o-R*((b+v*g*_)*Math.sinh($)+O*_*Math.cosh($))/O}}const C={calculatedDuration:m&&f||null,next:O=>{const I=w(O);if(m)a.done=O>=f;else{let R=O===0?b:0;v<1&&(R=O===0?qr(b):fE(w,O,I));const $=Math.abs(R)<=r,F=Math.abs(o-I)<=s;a.done=$&&F}return a.value=a.done?o:I,a},toString:()=>{const O=Math.min(av(C),Jd),I=dE(R=>C.next(O*R).value,O,30);return O+"ms "+I},toTransition:()=>{}};return C}Zd.applyToOptions=e=>{const t=PL(e,100,Zd);return e.ease=t.ease,e.duration=qr(t.duration),e.type="keyframes",e};function tg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],p={done:!1,value:f},m=$=>a!==void 0&&$<a||l!==void 0&&$>l,b=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let v=n*t;const _=f+v,g=o===void 0?_:o(_);g!==_&&(v=g-f);const y=$=>-v*Math.exp(-$/r),w=$=>g+y($),C=$=>{const F=y($),V=w($);p.done=Math.abs(F)<=u,p.value=p.done?g:V};let O,I;const R=$=>{m(p.value)&&(O=$,I=Zd({keyframes:[p.value,b(p.value)],velocity:fE(w,$,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return R(0),{calculatedDuration:null,next:$=>{let F=!1;return!I&&O===void 0&&(F=!0,C($),R($)),O!==void 0&&$>=O?I.next($-O):(!F&&C($),p)}}}function LL(e,t,n){const r=[],s=n||bs.mix||cE,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||lr:t;a=Bu(l,a)}r.push(a)}return r}function $L(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Jy(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=LL(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const p=mu(e[f],e[f+1],c);return a[f](p)};return n?c=>u(ws(e[0],e[i-1],c)):u}function ML(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=mu(0,t,r);e.push(kt(n,1,s))}}function FL(e){const t=[0];return ML(t,e.length-1),t}function BL(e,t){return e.map(n=>n*t)}function UL(e,t){return e.map(()=>t||eE).splice(0,e.length-1)}function Fl({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=ZN(r)?r.map(_b):_b(r),i={done:!1,value:t[0]},o=BL(n&&n.length===t.length?n:FL(t),e),a=$L(o,t,{ease:Array.isArray(s)?s:UL(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const zL=e=>e!==null;function lv(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(zL),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const VL={decay:tg,inertia:tg,tween:Fl,keyframes:Fl,spring:Zd};function hE(e){typeof e.type=="string"&&(e.type=VL[e.type])}class uv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const KL=e=>e/100;class cv extends uv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;hE(t);const{type:n=Fl,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||Fl;l!==Fl&&typeof a[0]!="number"&&(this.mixKeyframes=Bu(KL,cE(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=av(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:p,repeatDelay:m,type:b,onUpdate:v,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,C=r;if(f){const $=Math.min(this.currentTime,s)/a;let F=Math.floor($),V=$%1;!V&&$>=1&&(V=1),V===1&&F--,F=Math.min(F,f+1),!!(F%2)&&(p==="reverse"?(V=1-V,m&&(V-=m/a)):p==="mirror"&&(C=o)),w=ws(0,1,V)*a}const O=y?{done:!1,value:c[0]}:C.next(w);i&&(O.value=i(O.value));let{done:I}=O;!y&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return R&&b!==tg&&(O.value=lv(c,this.options,_,this.speed)),v&&v(O.value),R&&this.finish(),O}then(t,n){return this.finished.then(t,n)}get duration(){return or(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(this.currentTime)}set time(t){var n;t=qr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(On.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=or(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=TL,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function WL(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Hi=e=>e*180/Math.PI,ng=e=>{const t=Hi(Math.atan2(e[1],e[0]));return rg(t)},HL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ng,rotateZ:ng,skewX:e=>Hi(Math.atan(e[1])),skewY:e=>Hi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rg=e=>(e=e%360,e<0&&(e+=360),e),Pb=ng,Ab=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),jb=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),qL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ab,scaleY:jb,scale:e=>(Ab(e)+jb(e))/2,rotateX:e=>rg(Hi(Math.atan2(e[6],e[5]))),rotateY:e=>rg(Hi(Math.atan2(-e[2],e[0]))),rotateZ:Pb,rotate:Pb,skewX:e=>Hi(Math.atan(e[4])),skewY:e=>Hi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function sg(e){return e.includes("scale")?1:0}function ig(e,t){if(!e||e==="none")return sg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=qL,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=HL,s=a}if(!s)return sg(t);const i=r[t],o=s[1].split(",").map(QL);return typeof i=="function"?i(o):o[i]}const GL=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ig(n,t)};function QL(e){return parseFloat(e.trim())}const Wa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ha=new Set(Wa),Ob=e=>e===Ka||e===qe,YL=new Set(["x","y","z"]),JL=Wa.filter(e=>!YL.has(e));function ZL(e){const t=[];return JL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const io={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ig(t,"x"),y:(e,{transform:t})=>ig(t,"y")};io.translateX=io.x;io.translateY=io.y;const oo=new Set;let og=!1,ag=!1,lg=!1;function pE(){if(ag){const e=Array.from(oo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=ZL(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ag=!1,og=!1,oo.forEach(e=>e.complete(lg)),oo.clear()}function mE(){oo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ag=!0)})}function XL(){lg=!0,mE(),pE(),lg=!1}class dv{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(oo.add(this),og||(og=!0,bt.read(mE),bt.resolveKeyframes(pE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}WL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),oo.delete(this)}cancel(){this.state==="scheduled"&&(oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const e$=e=>e.startsWith("--");function t$(e,t,n){e$(t)?e.style.setProperty(t,n):e.style[t]=n}const n$=Zy(()=>window.ScrollTimeline!==void 0),r$={};function s$(e,t){const n=Zy(e);return()=>r$[t]??n()}const gE=s$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_l=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Rb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_l([0,.65,.55,1]),circOut:_l([.55,0,1,.45]),backIn:_l([.31,.01,.66,-.59]),backOut:_l([.33,1.53,.69,.99])};function yE(e,t){if(e)return typeof e=="function"?gE()?dE(e,t):"ease-out":tE(e)?_l(e):Array.isArray(e)?e.map(n=>yE(n,t)||Rb.easeOut):Rb[e]}function i$(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const f=yE(a,s);Array.isArray(f)&&(c.easing=f);const p={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(c,p)}function vE(e){return typeof e=="function"&&"applyToOptions"in e}function o$({type:e,...t}){return vE(e)&&gE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class a$ extends uv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Jy(typeof t.type!="string");const u=o$(t);this.animation=i$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=lv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):t$(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return or(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&n$()?(this.animation.timeline=t,lr):n(this)}}const wE={anticipate:JS,backInOut:YS,circInOut:XS};function l$(e){return e in wE}function u$(e){typeof e.ease=="string"&&l$(e.ease)&&(e.ease=wE[e.ease])}const Ib=10;class c$ extends a${constructor(t){u$(t),hE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new cv({...o,autoplay:!1}),l=qr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Ib).value,a.sample(l).value,Ib),a.stop()}}const Db=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url("));function d$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function f$(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Db(s,t),a=Db(i,t);return!o||!a?!1:d$(e)||(n==="spring"||vE(n))&&r}function ug(e){e.duration=0,e.type="keyframes"}const h$=new Set(["opacity","clipPath","filter","transform"]),p$=Zy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function m$(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return p$()&&n&&h$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const g$=40;class y$ extends uv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...f}){var b;super(),this.stop=()=>{var v,_;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=On.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...f},m=(c==null?void 0:c.KeyframeResolver)||dv;this.keyframeResolver=new m(a,(v,_,g)=>this.onKeyframesResolved(v,_,p,!g),l,u,c),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=On.now(),f$(t,i,o,a)||((bs.instantAnimations||!l)&&(c==null||c(lv(t,r,n))),t[0]=t[t.length-1],ug(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>g$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&m$(p)?new c$({...p,element:p.motionValue.owner.current}):new cv(p);m.finished.then(()=>this.notifyFinished()).catch(lr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),XL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const v$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function w$(e){const t=v$.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function bE(e,t,n=1){const[r,s]=w$(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return zS(o)?parseFloat(o):o}return rv(s)?bE(s,t,n+1):s}function fv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const xE=new Set(["width","height","top","left","right","bottom",...Wa]),b$={test:e=>e==="auto",parse:e=>e},_E=e=>t=>t.test(e),kE=[Ka,qe,Gr,Ls,dL,cL,b$],Nb=e=>kE.find(_E(e));function x$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||KS(e):!0}const _$=new Set(["brightness","contrast","saturate","opacity"]);function k$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(sv)||[];if(!r)return e;const s=n.replace(r,"");let i=_$.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const S$=/\b([a-z-]*)\(.*?\)/gu,cg={...mi,getAnimatableNone:e=>{const t=e.match(S$);return t?t.map(k$).join(" "):e}},Lb={...Ka,transform:Math.round},E$={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:zc,scaleX:zc,scaleY:zc,scaleZ:zc,skew:Ls,skewX:Ls,skewY:Ls,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:gu,originX:kb,originY:kb,originZ:qe},hv={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...E$,zIndex:Lb,fillOpacity:gu,strokeOpacity:gu,numOctaves:Lb},C$={...hv,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:cg,WebkitFilter:cg},SE=e=>C$[e];function EE(e,t){let n=SE(e);return n!==cg&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const T$=new Set(["auto","none","0"]);function P$(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!T$.has(i)&&yu(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=EE(n,s)}class A$ extends dv{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),rv(u))){const c=bE(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!xE.has(r)||t.length!==2)return;const[s,i]=t,o=Nb(s),a=Nb(i);if(o!==a)if(Ob(o)&&Ob(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else io[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||x$(t[s]))&&r.push(s);r.length&&P$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=io[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function j$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const CE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function TE(e){return VS(e)&&"offsetHeight"in e}const $b=30,O$=e=>!isNaN(parseFloat(e));class R${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=On.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=On.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=O$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Xy);const r=this.events[t].add(n);return t==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>$b)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$b);return WS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ia(e,t){return new R$(e,t)}const{schedule:pv}=nE(queueMicrotask,!1),wr={x:!1,y:!1};function PE(){return wr.x||wr.y}function I$(e){return e==="x"||e==="y"?wr[e]?null:(wr[e]=!0,()=>{wr[e]=!1}):wr.x||wr.y?null:(wr.x=wr.y=!0,()=>{wr.x=wr.y=!1})}function AE(e,t){const n=j$(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Mb(e){return!(e.pointerType==="touch"||PE())}function D$(e,t,n={}){const[r,s,i]=AE(e,n),o=a=>{if(!Mb(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=f=>{Mb(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const jE=(e,t)=>t?e===t?!0:jE(e,t.parentElement):!1,mv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,N$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L$(e){return N$.has(e.tagName)||e.tabIndex!==-1}const hd=new WeakSet;function Fb(e){return t=>{t.key==="Enter"&&e(t)}}function hp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const $$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Fb(()=>{if(hd.has(n))return;hp(n,"down");const s=Fb(()=>{hp(n,"up")}),i=()=>hp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Bb(e){return mv(e)&&!PE()}function M$(e,t,n={}){const[r,s,i]=AE(e,n),o=a=>{const l=a.currentTarget;if(!Bb(a))return;hd.add(l);const u=t(l,a),c=(m,b)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),hd.has(l)&&hd.delete(l),Bb(m)&&typeof u=="function"&&u(m,{success:b})},f=m=>{c(m,l===window||l===document||n.useGlobalTarget||jE(l,m.target))},p=m=>{c(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),TE(a)&&(a.addEventListener("focus",u=>$$(u,s)),!L$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function OE(e){return VS(e)&&"ownerSVGElement"in e}function F$(e){return OE(e)&&e.tagName==="svg"}const pn=e=>!!(e&&e.getVelocity),B$=[...kE,Ft,mi],U$=e=>B$.find(_E(e)),gv=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Ub(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function z$(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Ub(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Ub(e[s],null)}}}}function V$(...e){return E.useCallback(z$(...e),e)}class K$ extends E.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=TE(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W$({children:e,isPresent:t,anchorX:n,root:r}){const s=E.useId(),i=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=E.useContext(gv),l=V$(i,e==null?void 0:e.ref);return E.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:p,right:m}=o.current;if(t||!i.current||!u||!c)return;const b=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const _=r??document.head;return _.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${b}px !important;
            top: ${f}px !important;
          }
        `),()=>{_.contains(v)&&_.removeChild(v)}},[t]),k.jsx(K$,{isPresent:t,childRef:i,sizeRef:o,children:E.cloneElement(e,{ref:l})})}const H$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const u=qy(q$),c=E.useId();let f=!0,p=E.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const b of u.values())if(!b)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return i&&f&&(p={...p}),E.useMemo(()=>{u.forEach((m,b)=>u.set(b,!1))},[n]),E.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=k.jsx(W$,{isPresent:n,anchorX:a,root:l,children:e})),k.jsx(If.Provider,{value:p,children:e})};function q$(){return new Map}function RE(e=!0){const t=E.useContext(If);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=E.useId();E.useEffect(()=>{if(e)return s(i)},[e]);const o=E.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Vc=e=>e.key||"";function zb(e){const t=[];return E.Children.forEach(e,n=>{E.isValidElement(n)&&t.push(n)}),t}const G$=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=RE(o),f=E.useMemo(()=>zb(e),[e]),p=o&&!u?[]:f.map(Vc),m=E.useRef(!0),b=E.useRef(f),v=qy(()=>new Map),[_,g]=E.useState(f),[y,w]=E.useState(f);US(()=>{m.current=!1,b.current=f;for(let I=0;I<y.length;I++){const R=Vc(y[I]);p.includes(R)?v.delete(R):v.get(R)!==!0&&v.set(R,!1)}},[y,p.length,p.join("-")]);const C=[];if(f!==_){let I=[...f];for(let R=0;R<y.length;R++){const $=y[R],F=Vc($);p.includes(F)||(I.splice(R,0,$),C.push($))}return i==="wait"&&C.length&&(I=C),w(zb(I)),g(f),null}const{forceRender:O}=E.useContext(Hy);return k.jsx(k.Fragment,{children:y.map(I=>{const R=Vc(I),$=o&&!u?!1:f===y||p.includes(R),F=()=>{if(v.has(R))v.set(R,!0);else return;let V=!0;v.forEach(he=>{he||(V=!1)}),V&&(O==null||O(),w(b.current),o&&(c==null||c()),r&&r())};return k.jsx(H$,{isPresent:$,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:$?void 0:F,anchorX:a,children:I},R)})})},IE=E.createContext({strict:!1}),Vb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const e in Vb)Da[e]={isEnabled:t=>Vb[e].some(n=>!!t[n])};function Q$(e){for(const t in e)Da[t]={...Da[t],...e[t]}}const Y$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y$.has(e)}let DE=e=>!Xd(e);function J$(e){typeof e=="function"&&(DE=t=>t.startsWith("on")?!Xd(t):e(t))}try{J$(require("@emotion/is-prop-valid").default)}catch{}function Z$(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(DE(s)||n===!0&&Xd(s)||!t&&!Xd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Df=E.createContext({});function Nf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function vu(e){return typeof e=="string"||Array.isArray(e)}const yv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vv=["initial",...yv];function Lf(e){return Nf(e.animate)||vv.some(t=>vu(e[t]))}function NE(e){return!!(Lf(e)||e.variants)}function X$(e,t){if(Lf(e)){const{initial:n,animate:r}=e;return{initial:n===!1||vu(n)?n:void 0,animate:vu(r)?r:void 0}}return e.inherit!==!1?t:{}}function e3(e){const{initial:t,animate:n}=X$(e,E.useContext(Df));return E.useMemo(()=>({initial:t,animate:n}),[Kb(t),Kb(n)])}function Kb(e){return Array.isArray(e)?e.join(" "):e}const wu={};function t3(e){for(const t in e)wu[t]=e[t],nv(t)&&(wu[t].isCSSVariable=!0)}function LE(e,{layout:t,layoutId:n}){return Ha.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!wu[e]||e==="opacity")}const n3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r3=Wa.length;function s3(e,t,n){let r="",s=!0;for(let i=0;i<r3;i++){const o=Wa[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=CE(a,hv[o]);if(!l){s=!1;const c=n3[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function wv(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Ha.has(l)){o=!0;continue}else if(nv(l)){s[l]=u;continue}else{const c=CE(u,hv[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=s3(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const bv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $E(e,t,n){for(const r in t)!pn(t[r])&&!LE(r,n)&&(e[r]=t[r])}function i3({transformTemplate:e},t){return E.useMemo(()=>{const n=bv();return wv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function o3(e,t){const n=e.style||{},r={};return $E(r,n,e),Object.assign(r,i3(e,t)),r}function a3(e,t){const n={},r=o3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const l3={offset:"stroke-dashoffset",array:"stroke-dasharray"},u3={offset:"strokeDashoffset",array:"strokeDasharray"};function c3(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?l3:u3;e[i.offset]=qe.transform(-r);const o=qe.transform(t),a=qe.transform(n);e[i.array]=`${o} ${a}`}function ME(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(wv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&c3(f,s,i,o,!1)}const FE=()=>({...bv(),attrs:{}}),BE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function d3(e,t,n,r){const s=E.useMemo(()=>{const i=FE();return ME(i,t,BE(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};$E(i,e.style,e),s.style={...i,...s.style}}return s}const f3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xv(e){return typeof e!="string"||e.includes("-")?!1:!!(f3.indexOf(e)>-1||/[A-Z]/u.test(e))}function h3(e,t,n,{latestValues:r},s,i=!1){const a=(xv(e)?d3:a3)(t,r,s,e),l=Z$(t,typeof e=="string",i),u=e!==E.Fragment?{...l,...a,ref:n}:{},{children:c}=t,f=E.useMemo(()=>pn(c)?c.get():c,[c]);return E.createElement(e,{...u,children:f})}function Wb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function _v(e,t,n,r){if(typeof t=="function"){const[s,i]=Wb(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Wb(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function pd(e){return pn(e)?e.get():e}function p3({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:m3(n,r,s,e),renderState:t()}}function m3(e,t,n,r){const s={},i=r(e,{});for(const p in i)s[p]=pd(i[p]);let{initial:o,animate:a}=e;const l=Lf(e),u=NE(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!Nf(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const b=_v(e,p[m]);if(b){const{transitionEnd:v,transition:_,...g}=b;for(const y in g){let w=g[y];if(Array.isArray(w)){const C=c?w.length-1:0;w=w[C]}w!==null&&(s[y]=w)}for(const y in v)s[y]=v[y]}}}return s}const UE=e=>(t,n)=>{const r=E.useContext(Df),s=E.useContext(If),i=()=>p3(e,t,r,s);return n?i():qy(i)};function kv(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(pn(r[o])||t.style&&pn(t.style[o])||LE(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const g3=UE({scrapeMotionValuesFromProps:kv,createRenderState:bv});function zE(e,t,n){const r=kv(e,t,n);for(const s in e)if(pn(e[s])||pn(t[s])){const i=Wa.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const y3=UE({scrapeMotionValuesFromProps:zE,createRenderState:FE}),v3=Symbol.for("motionComponentSymbol");function ea(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function w3(e,t,n){return E.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ea(n)&&(n.current=r))},[t])}const Sv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b3="framerAppearId",VE="data-"+Sv(b3),KE=E.createContext({});function x3(e,t,n,r,s){var v,_;const{visualElement:i}=E.useContext(Df),o=E.useContext(IE),a=E.useContext(If),l=E.useContext(gv).reducedMotion,u=E.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=E.useContext(KE);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&_3(u.current,n,s,f);const p=E.useRef(!1);E.useInsertionEffect(()=>{c&&p.current&&c.update(n,a)});const m=n[VE],b=E.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,m)));return US(()=>{c&&(p.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),b.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(!b.current&&c.animationState&&c.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),b.current=!1),c.enteringChildren=void 0)}),c}function _3(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:WE(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ea(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function WE(e){if(e)return e.options.allowProjection!==!1?e.projection:WE(e.parent)}function pp(e,{forwardMotionProps:t=!1}={},n,r){n&&Q$(n);const s=xv(e)?y3:g3;function i(a,l){let u;const c={...E.useContext(gv),...a,layoutId:k3(a)},{isStatic:f}=c,p=e3(a),m=s(a,f);if(!f&&Gy){S3();const b=E3(c);u=b.MeasureLayout,p.visualElement=x3(e,m,c,r,b.ProjectionNode)}return k.jsxs(Df.Provider,{value:p,children:[u&&p.visualElement?k.jsx(u,{visualElement:p.visualElement,...c}):null,h3(e,a,w3(m,p.visualElement,l),m,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=E.forwardRef(i);return o[v3]=e,o}function k3({layoutId:e}){const t=E.useContext(Hy).id;return t&&e!==void 0?t+"-"+e:e}function S3(e,t){E.useContext(IE).strict}function E3(e){const{drag:t,layout:n}=Da;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function C3(e,t){if(typeof Proxy>"u")return pp;const n=new Map,r=(i,o)=>pp(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,pp(o,void 0,e,t)),n.get(o))})}function HE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function T3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function P3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mp(e){return e===void 0||e===1}function dg({scale:e,scaleX:t,scaleY:n}){return!mp(e)||!mp(t)||!mp(n)}function Ni(e){return dg(e)||qE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function qE(e){return Hb(e.x)||Hb(e.y)}function Hb(e){return e&&e!=="0%"}function ef(e,t,n){const r=e-n,s=t*r;return n+s}function qb(e,t,n,r,s){return s!==void 0&&(e=ef(e,s,r)),ef(e,n,r)+t}function fg(e,t=0,n=1,r,s){e.min=qb(e.min,t,n,r,s),e.max=qb(e.max,t,n,r,s)}function GE(e,{x:t,y:n}){fg(e.x,t.translate,t.scale,t.originPoint),fg(e.y,n.translate,n.scale,n.originPoint)}const Gb=.999999999999,Qb=1.0000000000001;function A3(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&na(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,GE(e,o)),r&&Ni(i.latestValues)&&na(e,i.latestValues))}t.x<Qb&&t.x>Gb&&(t.x=1),t.y<Qb&&t.y>Gb&&(t.y=1)}function ta(e,t){e.min=e.min+t,e.max=e.max+t}function Yb(e,t,n,r,s=.5){const i=kt(e.min,e.max,s);fg(e,t,n,i,r)}function na(e,t){Yb(e.x,t.x,t.scaleX,t.scale,t.originX),Yb(e.y,t.y,t.scaleY,t.scale,t.originY)}function QE(e,t){return HE(P3(e.getBoundingClientRect(),t))}function j3(e,t,n){const r=QE(e,n),{scroll:s}=t;return s&&(ta(r.x,s.offset.x),ta(r.y,s.offset.y)),r}const Jb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ra=()=>({x:Jb(),y:Jb()}),Zb=()=>({min:0,max:0}),Dt=()=>({x:Zb(),y:Zb()}),hg={current:null},YE={current:!1};function O3(){if(YE.current=!0,!!Gy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>hg.current=e.matches;e.addEventListener("change",t),t()}else hg.current=!1}const R3=new WeakMap;function I3(e,t,n){for(const r in t){const s=t[r],i=n[r];if(pn(s))e.addValue(r,s);else if(pn(i))e.addValue(r,Ia(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,Ia(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Xb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=On.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,bt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Lf(n),this.isVariantNode=NE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&pn(m)&&m.set(l[p])}}mount(t){var n;this.current=t,R3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),YE.current||O3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ha.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Da){const n=Da[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Xb.length;r++){const s=Xb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=I3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ia(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(zS(r)||KS(r))?r=parseFloat(r):!U$(r)&&mi.test(n)&&(r=EE(t,n)),this.setBaseTarget(t,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=_v(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!pn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Xy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){pv.render(this.render)}}class JE extends D3{constructor(){super(...arguments),this.KeyframeResolver=A$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ZE(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function N3(e){return window.getComputedStyle(e)}class L3 extends JE{constructor(){super(...arguments),this.type="html",this.renderInstance=ZE}readValueFromInstance(t,n){var r;if(Ha.has(n))return(r=this.projection)!=null&&r.isProjecting?sg(n):GL(t,n);{const s=N3(t),i=(nv(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return QE(t,n)}build(t,n,r){wv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return kv(t,n,r)}}const XE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $3(e,t,n,r){ZE(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(XE.has(s)?s:Sv(s),t.attrs[s])}class M3 extends JE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ha.has(n)){const r=SE(n);return r&&r.default||0}return n=XE.has(n)?n:Sv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return zE(t,n,r)}build(t,n,r){ME(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){$3(t,n,r,s)}mount(t){this.isSVGTag=BE(t.tagName),super.mount(t)}}const F3=(e,t)=>xv(e)?new M3(t):new L3(t,{allowProjection:e!==E.Fragment});function da(e,t,n){const r=e.getProps();return _v(r,t,n!==void 0?n:r.custom,e)}const pg=e=>Array.isArray(e);function B3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ia(n))}function U3(e){return pg(e)?e[e.length-1]||0:e}function z3(e,t){const n=da(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=U3(i[o]);B3(e,o,a)}}function V3(e){return!!(pn(e)&&e.add)}function mg(e,t){const n=e.getValue("willChange");if(V3(n))return n.add(t);if(!n&&bs.WillChange){const r=new bs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function eC(e){return e.props[VE]}const K3=e=>e!==null;function W3(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(K3),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const H3={type:"spring",stiffness:500,damping:25,restSpeed:10},q3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),G3={type:"keyframes",duration:.8},Q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y3=(e,{keyframes:t})=>t.length>2?G3:Ha.has(e)?e.startsWith("scale")?q3(t[1]):H3:Q3;function J3({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Ev=(e,t,n,r={},s,i)=>o=>{const a=fv(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-qr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};J3(a)||Object.assign(c,Y3(e,c)),c.duration&&(c.duration=qr(c.duration)),c.repeatDelay&&(c.repeatDelay=qr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(ug(c),c.delay===0&&(f=!0)),(bs.instantAnimations||bs.skipAnimations)&&(f=!0,ug(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const p=W3(c.keyframes,a);if(p!==void 0){bt.update(()=>{c.onUpdate(p),c.onComplete()});return}}return a.isSync?new cv(c):new y$(c)};function Z3({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function tC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const f=e.getValue(c,e.latestValues[c]??null),p=a[c];if(p===void 0||u&&Z3(u,c))continue;const m={delay:n,...fv(i||{},c)},b=f.get();if(b!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===b&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=eC(e);if(g){const y=window.MotionHandoffAnimation(g,c,bt);y!==null&&(m.startTime=y,v=!0)}}mg(e,c),f.start(Ev(c,f,p,e.shouldReduceMotion&&xE.has(c)?{type:!1}:m,e,v));const _=f.animation;_&&l.push(_)}return o&&Promise.all(l).then(()=>{bt.update(()=>{o&&z3(e,o)})}),l}function nC(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function gg(e,t,n={}){var l;const r=da(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(tC(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:p}=s;return X3(e,t,u,c,f,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function X3(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(gg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+nC(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function eM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>gg(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=gg(e,t,n);else{const s=typeof t=="function"?da(e,t,n.custom):t;r=Promise.all(tC(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function rC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const tM=vv.length;function sC(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?sC(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<tM;n++){const r=vv[n],s=e.props[r];(vu(s)||s===!1)&&(t[r]=s)}return t}const nM=[...yv].reverse(),rM=yv.length;function sM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eM(e,n,r)))}function iM(e){let t=sM(e),n=ex(),r=!0;const s=l=>(u,c)=>{var p;const f=da(e,c,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:b,...v}=f;u={...u,...v,...b}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=sC(e.parent)||{},f=[],p=new Set;let m={},b=1/0;for(let _=0;_<rM;_++){const g=nM[_],y=n[g],w=u[g]!==void 0?u[g]:c[g],C=vu(w),O=g===l?y.isActive:null;O===!1&&(b=_);let I=w===c[g]&&w!==u[g]&&C;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),y.protectedKeys={...m},!y.isActive&&O===null||!w&&!y.prevProp||Nf(w)||typeof w=="boolean")continue;const R=oM(y.prevProp,w);let $=R||g===l&&y.isActive&&!I&&C||_>b&&C,F=!1;const V=Array.isArray(w)?w:[w];let he=V.reduce(s(g),{});O===!1&&(he={});const{prevResolvedValues:M={}}=y,ne={...M,...he},A=oe=>{$=!0,p.has(oe)&&(F=!0,p.delete(oe)),y.needsAnimating[oe]=!0;const ae=e.getValue(oe);ae&&(ae.liveStyle=!1)};for(const oe in ne){const ae=he[oe],re=M[oe];if(m.hasOwnProperty(oe))continue;let ge=!1;pg(ae)&&pg(re)?ge=!rC(ae,re):ge=ae!==re,ge?ae!=null?A(oe):p.add(oe):ae!==void 0&&p.has(oe)?A(oe):y.protectedKeys[oe]=!0}y.prevProp=w,y.prevResolvedValues=he,y.isActive&&(m={...m,...he}),r&&e.blockInitialAnimation&&($=!1);const J=I&&R;$&&(!J||F)&&f.push(...V.map(oe=>{const ae={type:g};if(typeof oe=="string"&&r&&!J&&e.manuallyAnimateOnMount&&e.parent){const{parent:re}=e,ge=da(re,oe);if(re.enteringChildren&&ge){const{delayChildren:N}=ge.transition||{};ae.delay=nC(re.enteringChildren,e,N)}}return{animation:oe,options:ae}}))}if(p.size){const _={};if(typeof u.initial!="boolean"){const g=da(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(_.transition=g.transition)}p.forEach(g=>{const y=e.getBaseTarget(g),w=e.getValue(g);w&&(w.liveStyle=!0),_[g]=y??null}),f.push({animation:_})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function a(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const p in n)n[p].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=ex(),r=!0}}}function oM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!rC(t,e):!1}function ji(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ex(){return{animate:ji(!0),whileInView:ji(),whileHover:ji(),whileTap:ji(),whileDrag:ji(),whileFocus:ji(),exit:ji()}}class bi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aM extends bi{constructor(t){super(t),t.animationState||(t.animationState=iM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Nf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lM=0;class uM extends bi{constructor(){super(...arguments),this.id=lM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const cM={animation:{Feature:aM},exit:{Feature:uM}};function bu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Vu(e){return{point:{x:e.pageX,y:e.pageY}}}const dM=e=>t=>mv(t)&&e(t,Vu(t));function Bl(e,t,n,r){return bu(e,t,dM(n),r)}const iC=1e-4,fM=1-iC,hM=1+iC,oC=.01,pM=0-oC,mM=0+oC;function bn(e){return e.max-e.min}function gM(e,t,n){return Math.abs(e-t)<=n}function tx(e,t,n,r=.5){e.origin=r,e.originPoint=kt(t.min,t.max,e.origin),e.scale=bn(n)/bn(t),e.translate=kt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fM&&e.scale<=hM||isNaN(e.scale))&&(e.scale=1),(e.translate>=pM&&e.translate<=mM||isNaN(e.translate))&&(e.translate=0)}function Ul(e,t,n,r){tx(e.x,t.x,n.x,r?r.originX:void 0),tx(e.y,t.y,n.y,r?r.originY:void 0)}function nx(e,t,n){e.min=n.min+t.min,e.max=e.min+bn(t)}function yM(e,t,n){nx(e.x,t.x,n.x),nx(e.y,t.y,n.y)}function rx(e,t,n){e.min=t.min-n.min,e.max=e.min+bn(t)}function zl(e,t,n){rx(e.x,t.x,n.x),rx(e.y,t.y,n.y)}function Zn(e){return[e("x"),e("y")]}const aC=({current:e})=>e?e.ownerDocument.defaultView:null,sx=(e,t)=>Math.abs(e-t);function vM(e,t){const n=sx(e.x,t.x),r=sx(e.y,t.y);return Math.sqrt(n**2+r**2)}class lC{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=yp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,b=vM(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!b)return;const{point:v}=p,{timestamp:_}=en;this.history.push({...v,timestamp:_});const{onStart:g,onMove:y}=this.handlers;m||(g&&g(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=gp(m,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:b,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=yp(p.type==="pointercancel"?this.lastMoveEventInfo:gp(m,this.transformPagePoint),this.history);this.startEvent&&b&&b(p,g),v&&v(p,g)},!mv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=Vu(t),l=gp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=en;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(t,yp(l,this.history)),this.removeListeners=Bu(Bl(this.contextWindow,"pointermove",this.handlePointerMove),Bl(this.contextWindow,"pointerup",this.handlePointerUp),Bl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function gp(e,t){return t?{point:t(e.point)}:e}function ix(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yp({point:e},t){return{point:e,delta:ix(e,uC(t)),offset:ix(e,wM(t)),velocity:bM(t,.1)}}function wM(e){return e[0]}function uC(e){return e[e.length-1]}function bM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=uC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>qr(t)));)n--;if(!r)return{x:0,y:0};const i=or(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?kt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?kt(n,e,r.max):Math.min(e,n)),e}function ox(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _M(e,{top:t,left:n,bottom:r,right:s}){return{x:ox(e.x,n,s),y:ox(e.y,t,r)}}function ax(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function kM(e,t){return{x:ax(e.x,t.x),y:ax(e.y,t.y)}}function SM(e,t){let n=.5;const r=bn(e),s=bn(t);return s>r?n=mu(t.min,t.max-r,e.min):r>s&&(n=mu(e.min,e.max-s,t.min)),ws(0,1,n)}function EM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const yg=.35;function CM(e=yg){return e===!1?e=0:e===!0&&(e=yg),{x:lx(e,"left","right"),y:lx(e,"top","bottom")}}function lx(e,t,n){return{min:ux(e,t),max:ux(e,n)}}function ux(e,t){return typeof e=="number"?e:e[t]||0}const TM=new WeakMap;class PM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vu(f).point)},o=(f,p)=>{const{drag:m,dragPropagation:b,onDragStart:v}=this.getProps();if(m&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=I$(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Gr.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[g];C&&(y=bn(C)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&bt.postRender(()=>v(f,p)),mg(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:b,onDirectionLock:v,onDrag:_}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(b&&this.currentDirection===null){this.currentDirection=AM(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),_&&_(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Zn(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new lC(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:aC(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&bt.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Kc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=xM(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&ea(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=_M(r.layoutBox,t):this.constraints=!1,this.elastic=CM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=EM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ea(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=j3(r,s.root,this.visualElement.getTransformPagePoint());let o=kM(s.layout.layoutBox,i);if(n){const a=n(T3(o));this.hasMutatedConstraints=!!a,a&&(o=HE(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Zn(c=>{if(!Kc(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,b={type:"inertia",velocity:r?t[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(c,b)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return mg(this.visualElement,t),r.start(Ev(t,r,0,n,this.visualElement,!1))}stopAnimation(){Zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Zn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Zn(n=>{const{drag:r}=this.getProps();if(!Kc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ea(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=SM({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(o=>{if(!Kc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(kt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;TM.set(this.visualElement,this);const t=this.visualElement.current,n=Bl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ea(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bt.read(r);const o=bu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zn(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=yg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Kc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function AM(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jM extends bi{constructor(t){super(t),this.removeGroupControls=lr,this.removeListeners=lr,this.controls=new PM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const cx=e=>(t,n)=>{e&&bt.postRender(()=>e(t,n))};class OM extends bi{constructor(){super(...arguments),this.removePointerDownListener=lr}onPointerDown(t){this.session=new lC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:cx(t),onStart:cx(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&bt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const md={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const hl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(qe.test(e))e=parseFloat(e);else return e;const n=dx(e,t.target.x),r=dx(e,t.target.y);return`${n}% ${r}%`}},RM={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mi.parse(e);if(s.length>5)return r;const i=mi.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=kt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let vp=!1;class IM extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;t3(DM),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),vp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),md.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,vp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||bt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;vp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cC(e){const[t,n]=RE(),r=E.useContext(Hy);return k.jsx(IM,{...e,layoutGroup:r,switchLayoutGroup:E.useContext(KE),isPresent:t,safeToRemove:n})}const DM={borderRadius:{...hl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hl,borderTopRightRadius:hl,borderBottomLeftRadius:hl,borderBottomRightRadius:hl,boxShadow:RM};function NM(e,t,n){const r=pn(e)?e:Ia(e);return r.start(Ev("",r,t,n)),r.animation}const LM=(e,t)=>e.depth-t.depth;class $M{constructor(){this.children=[],this.isDirty=!1}add(t){Qy(this.children,t),this.isDirty=!0}remove(t){Yy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LM),this.isDirty=!1,this.children.forEach(t)}}function MM(e,t){const n=On.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(pi(r),e(i-t))};return bt.setup(r,!0),()=>pi(r)}const dC=["TopLeft","TopRight","BottomLeft","BottomRight"],FM=dC.length,fx=e=>typeof e=="string"?parseFloat(e):e,hx=e=>typeof e=="number"||qe.test(e);function BM(e,t,n,r,s,i){s?(e.opacity=kt(0,n.opacity??1,UM(r)),e.opacityExit=kt(t.opacity??1,0,zM(r))):i&&(e.opacity=kt(t.opacity??1,n.opacity??1,r));for(let o=0;o<FM;o++){const a=`border${dC[o]}Radius`;let l=px(t,a),u=px(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||hx(l)===hx(u)?(e[a]=Math.max(kt(fx(l),fx(u),r),0),(Gr.test(u)||Gr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=kt(t.rotate||0,n.rotate||0,r))}function px(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const UM=fC(0,.5,ZS),zM=fC(.5,.95,lr);function fC(e,t,n){return r=>r<e?0:r>t?1:n(mu(e,t,r))}function mx(e,t){e.min=t.min,e.max=t.max}function Yn(e,t){mx(e.x,t.x),mx(e.y,t.y)}function gx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function yx(e,t,n,r,s){return e-=t,e=ef(e,1/n,r),s!==void 0&&(e=ef(e,1/s,r)),e}function VM(e,t=0,n=1,r=.5,s,i=e,o=e){if(Gr.test(t)&&(t=parseFloat(t),t=kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=kt(i.min,i.max,r);e===i&&(a-=t),e.min=yx(e.min,t,n,a,s),e.max=yx(e.max,t,n,a,s)}function vx(e,t,[n,r,s],i,o){VM(e,t[n],t[r],t[s],t.scale,i,o)}const KM=["x","scaleX","originX"],WM=["y","scaleY","originY"];function wx(e,t,n,r){vx(e.x,t,KM,n?n.x:void 0,r?r.x:void 0),vx(e.y,t,WM,n?n.y:void 0,r?r.y:void 0)}function bx(e){return e.translate===0&&e.scale===1}function hC(e){return bx(e.x)&&bx(e.y)}function xx(e,t){return e.min===t.min&&e.max===t.max}function HM(e,t){return xx(e.x,t.x)&&xx(e.y,t.y)}function _x(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pC(e,t){return _x(e.x,t.x)&&_x(e.y,t.y)}function kx(e){return bn(e.x)/bn(e.y)}function Sx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class qM{constructor(){this.members=[]}add(t){Qy(this.members,t),t.scheduleRender()}remove(t){if(Yy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GM(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:p,skewX:m,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),b&&(r+=`skewY(${b}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const wp=["","X","Y","Z"],QM=1e3;let YM=0;function bp(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function mC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=eC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&mC(r)}function gC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=YM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XM),this.nodes.forEach(rF),this.nodes.forEach(sF),this.nodes.forEach(eF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $M)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=OE(o)&&!F$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,f=0;const p=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,c&&c(),c=MM(p,250),md.hasAnimatedSinceResize&&(md.hasAnimatedSinceResize=!1,this.nodes.forEach(Tx)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||uF,{onLayoutAnimationStart:v,onLayoutAnimationComplete:_}=u.getProps(),g=!this.targetLayout||!pC(this.targetLayout,m),y=!f&&p;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...fv(b,"layout"),onPlay:v,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,y)}else f||Tx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ex);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Cx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nF),this.nodes.forEach(JM),this.nodes.forEach(ZM)):this.nodes.forEach(Cx),this.clearAllSnapshots();const a=On.now();en.delta=ws(0,1e3/60,a-en.timestamp),en.timestamp=a,en.isProcessing=!0,lp.update.process(en),lp.preRender.process(en),lp.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tF),this.sharedNodes.forEach(oF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!hC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ni(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),cF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Dt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(dF))){const{scroll:c}=this.root;c&&(ta(a.x,c.offset.x),ta(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Dt();if(Yn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:p}=c;c!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Yn(a,o),ta(a.x,f.offset.x),ta(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Dt();Yn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&na(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ni(c.latestValues)&&na(l,c.latestValues)}return Ni(this.latestValues)&&na(l,this.latestValues),l}removeTransform(o){const a=Dt();Yn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ni(u.latestValues))continue;dg(u.latestValues)&&u.updateSnapshot();const c=Dt(),f=u.measurePageBox();Yn(c,f),wx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ni(this.latestValues)&&wx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),zl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),GE(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),zl(this.relativeTargetOrigin,this.target,m.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dg(this.parent.latestValues)||qE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===en.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Yn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;A3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gx(this.prevProjectionDelta.x,this.projectionDelta.x),gx(this.prevProjectionDelta.y,this.projectionDelta.y)),Ul(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!Sx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Sx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ra(),this.projectionDelta=ra(),this.projectionDeltaWithTransform=ra()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=ra();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Dt(),m=l?l.source:void 0,b=this.layout?this.layout.source:void 0,v=m!==b,_=this.getStack(),g=!_||_.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(lF));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const O=C/1e3;Px(f.x,o.x,O),Px(f.y,o.y,O),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aF(this.relativeTarget,this.relativeTargetOrigin,p,O),w&&HM(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Dt()),Yn(w,this.relativeTarget)),v&&(this.animationValues=c,BM(c,u,this.latestValues,O,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{md.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ia(0)),this.currentAnimation=NM(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&yC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dt();const f=bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Yn(a,l),na(a,c),Ul(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qM),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&bp("z",o,u,this.animationValues);for(let c=0;c<wp.length;c++)bp(`rotate${wp[c]}`,o,u,this.animationValues),bp(`skew${wp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=pd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=pd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ni(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=GM(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const b in wu){if(c[b]===void 0)continue;const{correct:v,applyTo:_,isCSSVariable:g}=wu[b],y=f==="none"?c[b]:v(c[b],u);if(_){const w=_.length;for(let C=0;C<w;C++)o[_[C]]=y}else g?this.options.visualElement.renderState.vars[b]=y:o[b]=y}this.options.layoutId&&(o.pointerEvents=u===this?pd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Ex),this.root.sharedNodes.clear()}}}function JM(e){e.updateLayout()}function ZM(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=bn(p);p.min=r[f].min,p.max=p.min+m}):yC(i,t.layoutBox,r)&&Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=bn(r[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=ra();Ul(a,r,t.layoutBox);const l=ra();o?Ul(l,e.applyTransform(s,!0),t.measuredBox):Ul(l,r,t.layoutBox);const u=!hC(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const b=Dt();zl(b,t.layoutBox,p.layoutBox);const v=Dt();zl(v,r,m.layoutBox),pC(b,v)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=b,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function XM(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tF(e){e.clearSnapshot()}function Ex(e){e.clearMeasurements()}function Cx(e){e.isLayoutDirty=!1}function nF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Tx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rF(e){e.resolveTargetDelta()}function sF(e){e.calcProjection()}function iF(e){e.resetSkewAndRotation()}function oF(e){e.removeLeadSnapshot()}function Px(e,t,n){e.translate=kt(t.translate,0,n),e.scale=kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ax(e,t,n,r){e.min=kt(t.min,n.min,r),e.max=kt(t.max,n.max,r)}function aF(e,t,n,r){Ax(e.x,t.x,n.x,r),Ax(e.y,t.y,n.y,r)}function lF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uF={duration:.45,ease:[.4,0,.1,1]},jx=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ox=jx("applewebkit/")&&!jx("chrome/")?Math.round:lr;function Rx(e){e.min=Ox(e.min),e.max=Ox(e.max)}function cF(e){Rx(e.x),Rx(e.y)}function yC(e,t,n){return e==="position"||e==="preserve-aspect"&&!gM(kx(t),kx(n),.2)}function dF(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const fF=gC({attachResizeListener:(e,t)=>bu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xp={current:void 0},vC=gC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xp.current){const e=new fF({});e.mount(window),e.setOptions({layoutScroll:!0}),xp.current=e}return xp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),hF={pan:{Feature:OM},drag:{Feature:jM,ProjectionNode:vC,MeasureLayout:cC}};function Ix(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&bt.postRender(()=>i(t,Vu(t)))}class pF extends bi{mount(){const{current:t}=this.node;t&&(this.unmount=D$(t,(n,r)=>(Ix(this.node,r,"Start"),s=>Ix(this.node,s,"End"))))}unmount(){}}class mF extends bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bu(bu(this.node.current,"focus",()=>this.onFocus()),bu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Dx(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&bt.postRender(()=>i(t,Vu(t)))}class gF extends bi{mount(){const{current:t}=this.node;t&&(this.unmount=M$(t,(n,r)=>(Dx(this.node,r,"Start"),(s,{success:i})=>Dx(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vg=new WeakMap,_p=new WeakMap,yF=e=>{const t=vg.get(e.target);t&&t(e)},vF=e=>{e.forEach(yF)};function wF({root:e,...t}){const n=e||document;_p.has(n)||_p.set(n,{});const r=_p.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(vF,{root:e,...t})),r[s]}function bF(e,t,n){const r=wF(t);return vg.set(e,n),r.observe(e),()=>{vg.delete(e),r.unobserve(e)}}const xF={some:0,all:1};class _F extends bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:xF[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),p=u?c:f;p&&p(l)};return bF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(kF(t,n))&&this.startObserver()}unmount(){}}function kF({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SF={inView:{Feature:_F},tap:{Feature:gF},focus:{Feature:mF},hover:{Feature:pF}},EF={layout:{ProjectionNode:vC,MeasureLayout:cC}},CF={...cM,...SF,...hF,...EF},TF=C3(CF,F3);let PF={data:""},AF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||PF},jF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,OF=/\/\*[^]*?\*\/|  +/g,Nx=/\n+/g,zs=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?zs(o,i):i+"{"+zs(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=zs(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zs.p?zs.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},es={},wC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+wC(e[n]);return t}return e},RF=(e,t,n,r,s)=>{let i=wC(e),o=es[i]||(es[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!es[o]){let l=i!==e?e:(u=>{let c,f,p=[{}];for(;c=jF.exec(u.replace(OF,""));)c[4]?p.shift():c[3]?(f=c[3].replace(Nx," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][c[1]]=c[2].replace(Nx," ").trim();return p[0]})(e);es[o]=zs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&es.g?es.g:null;return n&&(es.g=es[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(es[o],t,r,a),o},IF=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zs(a,""):a===!1?"":a}return r+s+(o??"")},"");function $f(e){let t=this||{},n=e.call?e(t.p):e;return RF(n.unshift?n.raw?IF(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,AF(t.target),t.g,t.o,t.k)}let bC,wg,bg;$f.bind({g:1});let xs=$f.bind({k:1});function DF(e,t,n,r){zs.p=t,bC=e,wg=n,bg=r}function xi(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:wg&&wg()},a),n.o=/ *go\d+/.test(l),a.className=$f.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),bg&&u[0]&&bg(a),bC(u,a)}return s}}var NF=e=>typeof e=="function",tf=(e,t)=>NF(e)?e(t):e,LF=(()=>{let e=0;return()=>(++e).toString()})(),xC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),$F=20,Cv="default",_C=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return _C(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},gd=[],kC={toasts:[],pausedAt:void 0,settings:{toastLimit:$F}},Kr={},SC=(e,t=Cv)=>{Kr[t]=_C(Kr[t]||kC,e),gd.forEach(([n,r])=>{n===t&&r(Kr[t])})},EC=e=>Object.keys(Kr).forEach(t=>SC(e,t)),MF=e=>Object.keys(Kr).find(t=>Kr[t].toasts.some(n=>n.id===e)),Mf=(e=Cv)=>t=>{SC(t,e)},FF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},BF=(e={},t=Cv)=>{let[n,r]=E.useState(Kr[t]||kC),s=E.useRef(Kr[t]);E.useEffect(()=>(s.current!==Kr[t]&&r(Kr[t]),gd.push([t,r]),()=>{let o=gd.findIndex(([a])=>a===t);o>-1&&gd.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||FF[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},UF=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||LF()}),Ku=e=>(t,n)=>{let r=UF(t,e,n);return Mf(r.toasterId||MF(r.id))({type:2,toast:r}),r.id},Kt=(e,t)=>Ku("blank")(e,t);Kt.error=Ku("error");Kt.success=Ku("success");Kt.loading=Ku("loading");Kt.custom=Ku("custom");Kt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Mf(t)(n):EC(n)};Kt.dismissAll=e=>Kt.dismiss(void 0,e);Kt.remove=(e,t)=>{let n={type:4,toastId:e};t?Mf(t)(n):EC(n)};Kt.removeAll=e=>Kt.remove(void 0,e);Kt.promise=(e,t,n)=>{let r=Kt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?tf(t.success,s):void 0;return i?Kt.success(i,{id:r,...n,...n==null?void 0:n.success}):Kt.dismiss(r),s}).catch(s=>{let i=t.error?tf(t.error,s):void 0;i?Kt.error(i,{id:r,...n,...n==null?void 0:n.error}):Kt.dismiss(r)}),e};var zF=1e3,VF=(e,t="default")=>{let{toasts:n,pausedAt:r}=BF(e,t),s=E.useRef(new Map).current,i=E.useCallback((f,p=zF)=>{if(s.has(f))return;let m=setTimeout(()=>{s.delete(f),o({type:4,toastId:f})},p);s.set(f,m)},[]);E.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let b=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(b<0){m.visible&&Kt.dismiss(m.id);return}return setTimeout(()=>Kt.dismiss(m.id,t),b)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let o=E.useCallback(Mf(t),[t]),a=E.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=E.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),u=E.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=E.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:b=8,defaultPosition:v}=p||{},_=n.filter(w=>(w.position||v)===(f.position||v)&&w.height),g=_.findIndex(w=>w.id===f.id),y=_.filter((w,C)=>C<g&&w.visible).length;return _.filter(w=>w.visible).slice(...m?[y+1]:[0,y]).reduce((w,C)=>w+(C.height||0)+b,0)},[n]);return E.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=s.get(f.id);p&&(clearTimeout(p),s.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},KF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,WF=xs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HF=xs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qF=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${KF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${WF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${HF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,GF=xs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,QF=xi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${GF} 1s linear infinite;
`,YF=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,JF=xs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ZF=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${JF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,XF=xi("div")`
  position: absolute;
`,e4=xi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,t4=xs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,n4=xi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${t4} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,r4=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?E.createElement(n4,null,t):t:n==="blank"?null:E.createElement(e4,null,E.createElement(QF,{...r}),n!=="loading"&&E.createElement(XF,null,n==="error"?E.createElement(qF,{...r}):E.createElement(ZF,{...r})))},s4=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,i4=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,o4="0%{opacity:0;} 100%{opacity:1;}",a4="0%{opacity:1;} 100%{opacity:0;}",l4=xi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,u4=xi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,c4=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=xC()?[o4,a4]:[s4(n),i4(n)];return{animation:t?`${xs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xs(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},d4=E.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?c4(e.position||t||"top-center",e.visible):{opacity:0},i=E.createElement(r4,{toast:e}),o=E.createElement(u4,{...e.ariaProps},tf(e.message,e));return E.createElement(l4,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):E.createElement(E.Fragment,null,i,o))});DF(E.createElement);var f4=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=E.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return E.createElement("div",{ref:i,className:t,style:n},s)},h4=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},p4=$f`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wc=16,m4=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=VF(n,i);return E.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Wc,left:Wc,right:Wc,bottom:Wc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let f=c.position||t,p=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),m=h4(f,p);return E.createElement(f4,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?p4:"",style:m},c.type==="custom"?tf(c.message,c):s?s(c):E.createElement(d4,{toast:c,position:f}))}))},ts=Kt;const CC=[{code:"original",name:"Original Script"},{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"itrans",name:"ITRANS"},{code:"iast",name:"IAST"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"}];function g4(){const{preferredLanguage:e,setPreferredLanguage:t}=xo(),[n,r]=E.useState(e);E.useEffect(()=>{localStorage.setItem("preferredLanguage",n),t(n)},[n,t]);const s=i=>{r(i.target.value)};return k.jsxs("div",{children:[k.jsx("h2",{children:"Language Preferences"}),k.jsx("p",{children:"Choose the language for transliteration:"}),k.jsx("select",{value:n,onChange:s,children:CC.map(i=>k.jsx("option",{value:i.code,children:i.name},i.code))})]})}const y4=0,v4={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},pl={marginRight:"10px"},ml={opacity:.5,cursor:"not-allowed",color:"#888"},w4=async function(e){try{return await Ut.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},b4=async e=>{const t=e.queryKey,n=t[1],r=t[2],s=t[3],i=t[4];if(!n||!r||!i)throw new Error("Missing query parameters for fetching song details.");const o=await lD(n,i);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await CS({bookId:n,sourceRow:r,songTitle:i,sessionuser:s});if(a&&a.length===3){const[l,u,c,f]=a;await wS({bookId:n,songTitle:i,sourceRow:r.toString(),indexPosition:f,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${i}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function x4(){var Xe,Ot,qn;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=Ru(),s=dr(),i=fr(),{session:o}=bo(),a=(Xe=o==null?void 0:o.user)==null?void 0:Xe.email,l=(Ot=s.state)==null?void 0:Ot.filteredSongIndices,u=(qn=s.state)==null?void 0:qn.index,c=$u(),f=E.useMemo(()=>decodeURIComponent(r||""),[r]),p=["songDetails",t,n,a,f],{preferredLanguage:m,setPreferredLanguage:b}=xo(),v=E.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),_=E.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),g=E.useCallback(async(Ie,Ke)=>{if(!Ie||!Ie.bookId||!Ie.songTitle){Ke(!1);return}const et=await Of(Ie.bookId,Ie.songTitle);Ke(et)},[]),[y,w]=E.useState(!1),[C,O]=E.useState(!1);E.useEffect(()=>(window.handleInternalNavigation=(Ie,Ke,et,sn)=>{const Ht=`/details/book/${Ie}/${Ke}/${et}/${encodeURIComponent(sn)}`;i(Ht,{state:{filteredSongIndices:l||[],index:y4},replace:!1}),console.log(`Internal navigation triggered: ${Ht}`)},()=>{delete window.handleInternalNavigation}),[i,l,u]),E.useEffect(()=>{g(v,w),g(_,O)},[v,_,g]);const{isLoading:I,isFetching:R,error:$,data:F}=jf({queryKey:p,queryFn:b4,staleTime:1/0,gcTime:0,refetchOnMount:!1,networkMode:"always",refetchOnWindowFocus:!1});WN(({swipe:[Ie]})=>{Ie===1?(console.log("going to prev"),ye()):Ie===-1&&(console.log("going to next"),Me())},{axis:"x",filterTaps:!0});const[V,he]=E.useState(!1),[M,ne]=E.useState({x:0,y:0}),[A,J]=E.useState(!1),xe=E.useRef(null),[oe,ae]=E.useState(""),[re,ge]=E.useState(null),N=E.useRef(null),z=Ie=>{Ie.preventDefault();const Ke=window.getSelection(),et=(Ke==null?void 0:Ke.toString().trim())??"";Ke&&Ke.rangeCount>0&&!Ke.getRangeAt(0).collapsed?(ae(et),ge(Ke.getRangeAt(0)),J(!0)):(ae(""),ge(null),J(!1)),ne({x:Ie.clientX,y:Ie.clientY}),J(!!oe),he(!0)};E.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),E.useEffect(()=>{const Ie=Ke=>{xe.current&&!xe.current.contains(Ke.target)&&he(!1)};return V?window.addEventListener("mousedown",Ie):window.removeEventListener("mousedown",Ie),()=>{window.removeEventListener("mousedown",Ie)}},[V]),E.useEffect(()=>{s.state||window.location.pathname.startsWith("/sankeertan")},[s,t]),E.useEffect(()=>{const Ie=Ke=>{xe.current&&!xe.current.contains(Ke.target)&&he(!1)};return V&&document.addEventListener("mousedown",Ie),()=>{document.removeEventListener("mousedown",Ie)}},[V]);const ue=()=>{const Ie=window.location.href;navigator.clipboard.writeText(Ie).then(()=>{console.log("URL copied to clipboard:",Ie),ts.success("URL copied to clipboard!")}).catch(Ke=>{console.error("Failed to copy URL: ",Ke)})},fe=E.useRef(null);function ce(Ie){const sn=new DOMParser().parseFromString(Ie,"text/html").querySelectorAll("tr");let Ht="";return sn.forEach(Le=>{const pr=Le.querySelectorAll("td, th"),Gn=[];pr.forEach(Es=>{var mr;let Pe=Es.innerHTML;Pe=Pe.replace(/<\/p>\s*<p>/gi,`
`),Pe=Pe.replace(/<p>|<\/p>/gi,""),Pe=Pe.replace(/<br\s*\/?>/gi,`
`);const Jr=document.createElement("div");Jr.innerHTML=Pe;const Rr=((mr=Jr.textContent)==null?void 0:mr.trim())||"";Gn.push(Rr)}),Ht+=Gn.join(" | ")+`

`}),Ht.trim()}const Ce=()=>{if(!re||re.collapsed){console.warn("No valid selection range to highlight.");return}const Ie=document.createElement("span");Ie.className="highlighted-text";try{re.surroundContents(Ie),console.log("Text highlighted successfully!")}catch(Ke){console.error("Failed to highlight text:",Ke)}ge(null)},De=(Ie=!1)=>{if(fe.current){const Ke=fe.current.innerHTML;let et="radhekrishna!!";Ie?et=Ke:Ke.includes("<table")?et=ce(Ke):et=fe.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(et).then(()=>{console.log("Song content copied to clipboard:"),ts.success("Song content copied to clipboard!")}).catch(sn=>{console.error("Failed to copy song: ",sn)})}},Me=()=>{if(l&&u!==void 0&&u<l.length-1){const Ie=u+1,Ke=l[Ie];sessionStorage.setItem("lastClickedSongIndex",Ie.toString()),i(`/details/book/${e}/${t}/${Ke.sourceRow}/${encodeURIComponent(Ke.songTitle)}`,{state:{filteredSongIndices:l,index:Ie},replace:!0})}},ye=()=>{if(l&&u!==void 0&&u>0){const Ie=u-1,Ke=l[Ie];sessionStorage.setItem("lastClickedSongIndex",Ie.toString()),i(`/details/book/${e}/${t}/${Ke.sourceRow}/${encodeURIComponent(Ke.songTitle)}`,{state:{filteredSongIndices:l,index:Ie},replace:!0})}},Qe=u===0,Ze=u===(l==null?void 0:l.length)-1,Ve=l&&l.length>0,Tt=async Ie=>{if(oe){const Ke=await fetch(`${vo}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${oe}&sessionuser=${Ie}`);if(!Ke.ok){const sn=await Ke.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${Ke.status} - ${JSON.stringify(sn)}`)}const et=await Ke.json();ts.success(`Issue/Mistake is reported as ${et[1]}!!`)}else console.log("No text was selected.")},P=async()=>{t&&r?(await uD(t,f),ts.success("Local cache cleared. Reloading from server..."),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:p})):console.warn("Cannot reload song: bookId or songTitle is missing.")},me=async Ie=>{switch(he(!1),Ie){case"broadcast":r&&_e();break;case"copyPageUrl":ue();break;case"CopySongAsHtml":De(!0);break;case"CopySongAsText":De(!1);break;case"ReportMistake":Tt(a);break;case"Copy":if(oe)try{await navigator.clipboard.writeText(oe),ts.success("Text copied!")}catch(Ke){console.error("Failed to copy text: ",Ke),ts.error("Failed to copy text.")}break;case"Highlight":Ce();break}},de=E.useMemo(()=>k.jsx(TF.div,{ref:xe,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:M.y,left:M.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:Ie=>Ie.stopPropagation(),children:k.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:A?k.jsxs(k.Fragment,{children:[k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>me("Copy"),children:"Copy Selected"}),k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>me("ReportMistake"),children:"Report Mistake"})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[k.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),CC.map(Ie=>k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:Ie.code===m?"bold":"normal",backgroundColor:Ie.code===m?"#f0f0f0":"transparent"},onClick:()=>Ne(Ie),children:Ie.name},Ie.code))]})})})},"context-menu"),[A,M,m]),[B,L]=E.useState(!1),[X,ve]=E.useState(null),[we,ie]=E.useState(!0),_e=E.useCallback(async()=>{if(B){console.warn("isBroadcasting already");return}if(!we){ts.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(fe.current){L(!0),ve("broadcasting");try{const Ie=fe.current.innerHTML,Ke=await w4(Ie);L(!1),ve("success"),ts.success("Broadcast was successful!"),ie(!1),setTimeout(()=>ve(null),2e3)}catch(Ie){console.error("Broadcast failed:",Ie),ts.error("Broadcast had errors!"),L(!1),ve("error"),setTimeout(()=>ve(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),ve("failed"),L(!1)},[fe,B,we]);E.useEffect(()=>{ie(!0)},[F]),E.useEffect(()=>{F&&F.length>=3&&t&&f&&n&&(g(v,w),g(_,O))},[F,t,f,n,v,_,g]);const Ne=Ie=>{b(Ie.code),he(!1)},ke={backgroundColor:"green",color:"white"},Ue={backgroundColor:"brown",color:"white"};if(I&&!F)return k.jsx("div",{style:v4,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if($)return k.jsxs("div",{children:["Error loading song details: ",$.message]});if(!F)return k.jsx("div",{children:"No song details available. Please try reloading."});const rt=document.getElementById("context-menu-root");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:N,children:[k.jsx(Wy,{}),k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[k.jsx("button",{onClick:ye,disabled:Qe||!Ve,style:{...pl,...Qe||!Ve?ml:{},...y?ke:Ue},children:" Prev"}),k.jsx("button",{onClick:Me,disabled:Ze||!Ve,style:{...pl,...Ze||!Ve?ml:{},...C?ke:Ue,marginRight:0},children:"Next "})]})]}),k.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:z,children:[k.jsx("div",{ref:fe,children:F&&k.jsx(ZD,{data:F[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[0,1,2,3,4],maxWidth:"max-w-6xl",preferredLanguage:m,sourceLanguage:F[2]})}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[k.jsxs("div",{children:[k.jsx("button",{onClick:ye,disabled:Qe||!Ve,style:{...pl,...Qe||!Ve?ml:{},...y?ke:Ue},children:" Prev"}),k.jsx("button",{onClick:Me,disabled:Ze||!Ve,style:{...pl,...Ze||!Ve?ml:{},...C?ke:Ue,marginRight:0},children:"Next "})]}),k.jsxs("div",{children:[k.jsx("button",{onClick:P,disabled:R,style:{marginRight:"10px",backgroundColor:R?"#ccc":"#f0f0f0",color:R?"#666":"inherit",cursor:R?"not-allowed":"pointer"},title:"Reload from Server (Clears local cache)",children:R?k.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[k.jsxs("svg",{className:"animate-spin",style:{width:"16px",height:"16px",marginRight:"5px"},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),k.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Reloading..."]}):""}),k.jsx("button",{onClick:ue,style:{marginRight:"10px"},title:"Copy URL",children:""}),k.jsx("button",{onClick:()=>De(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),k.jsx("button",{onClick:_e,disabled:!we,style:{...pl,...we?{}:ml},title:"Broadcast",children:""})]})]}),k.jsx("style",{children:`
     .highlighted-text {
      background-color: #ffeb3b; /* Yellow background */
      padding: 2px 4px;
      border-radius: 4px;
     }
     .animate-spin {
      animation: spin 1s linear infinite;
     }
     @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
     }
    `}),V&&rt&&iA.createPortal(k.jsx(G$,{children:de}),rt)]})]})}const _4=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:s,onConnectionStatusChange:i})=>{const o=E.useRef(null);return E.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, Listener skipping subscription setup."),i("DISCONNECTED");return}return o.current&&(Ut.removeChannel(o.current),o.current=null),i("CONNECTING"),o.current=Ut.channel(`broadcast:${e}`),o.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},a=>{a.new&&"content"in a.new&&r(a.new.content),a.new&&"scroll_position"in a.new&&a.new.scroll_position!==null&&n&&s(a.new.scroll_position)}).subscribe((a,l)=>{switch(a){case"SUBSCRIBED":i("CONNECTED");break;case"CHANNEL_ERROR":case"TIMED_OUT":case"CLOSED":i(a==="CLOSED"?"DISCONNECTED":"ERROR"),console.error(`Subscription issue for broadcast ${e}:`,l||a);break;case"CONNECTING":i("CONNECTING");break}}),()=>{o.current&&(Ut.removeChannel(o.current),o.current=null)}},[e,t==null?void 0:t.access_token,n,r,s,i]),null},k4=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,r)},t)}},S4=({broadcastId:e})=>{const[t,n]=E.useState(null),[r,s]=E.useState(null),i=E.useRef(null),[o,a]=E.useState(null),[l,u]=E.useState(!1),[c,f]=E.useState(!0),[p,m]=E.useState(!1),[b,v]=E.useState(null),[_,g]=E.useState("none"),[y,w]=E.useState(!1),[C,O]=E.useState("CONNECTING"),{preferredLanguage:I}=xo(),R=E.useCallback(J=>{O(J),console.log(`Realtime Connection Status Updated: ${J}`)},[]),$=E.useCallback(J=>{const oe=pu(J??"","devanagari",I);n(oe)},[I]),F=E.useCallback(J=>{l&&J!==null&&s(`trRowAsAnchor-${J}`)},[l]);E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:xe}})=>{a(xe)});const{data:J}=Ut.auth.onAuthStateChange((xe,oe)=>{a(oe)});return()=>{J.subscription.unsubscribe()}},[]);const V=E.useCallback(async()=>{p||f(!0),v(null);try{const{data:J,error:xe}=await Ut.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(xe)console.error("Error fetching broadcast data:",xe),v(xe.message);else if(J){const oe=J.content??"";let ae=pu(oe,"devanagari",I);n(ae),w(J.is_broadcasting_scroll??!1),m(!0)}}finally{f(!1)}},[e,I,p]);E.useEffect(()=>{o&&e&&!p&&V()},[o,e,V,p]),E.useEffect(()=>{if(r&&i.current){const J=r,xe=i.current.querySelector(`#${J}`);xe&&xe.scrollIntoView({block:"start",behavior:"smooth"}),s(null)}},[r,i]);const he=E.useCallback(async J=>{if(_==="leader"&&y){const{error:xe}=await Ut.from("sankeertan").update({scroll_position:J}).eq("id",e);xe&&console.error("Error broadcasting scroll position:",xe)}},[_,y,e]);E.useEffect(()=>{if(_!=="leader"||!y||!i.current)return;const J=i.current,xe=k4(he,200),oe=J.querySelectorAll("tr[id^='trRowAsAnchor-']"),ae=new Set;let re=null;const ge=ue=>{ue.forEach(De=>{De.isIntersecting?ae.add(De.target):ae.delete(De.target)});let fe=null,ce=1/0;const Ce=J.getBoundingClientRect().top;if(ae.forEach(De=>{if(typeof De.id!="string"||De.id==="")return;const ye=De.getBoundingClientRect().top-Ce;ye>=0&&ye<ce&&(ce=ye,fe=De.id)}),fe){const Me=fe.split("-").pop();if(Me){const ye=parseInt(Me);fe!==re&&(re=fe,xe(ye))}}},N={root:J,rootMargin:"0px",threshold:.1},z=new IntersectionObserver(ge,N);return oe.forEach(ue=>{z.observe(ue)}),()=>{z.disconnect()}},[_,y,he]);const M=async()=>{const J=!y,{error:xe}=await Ut.from("sankeertan").update({is_broadcasting_scroll:J}).eq("id",e);xe?console.error("Failed to update broadcast scroll status:",xe):w(J)},ne=J=>{J==="none"&&(w(!1),u(!1)),g(J),J==="follower"&&u(!0)},A=J=>{switch(J){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[k.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:i,children:[k.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",k.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:A(C),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${C}`}),k.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",C,")"]})]}),c&&!p?k.jsx("p",{children:"Loading content..."}):b?k.jsxs("p",{style:{color:"red"},children:["Error loading data: ",b]}):t&&k.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&_==="follower"&&k.jsx(_4,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:$,onScrollPositionUpdated:F,onConnectionStatusChange:R}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[k.jsx("button",{onClick:()=>ne(_==="leader"?"none":"leader"),style:{backgroundColor:_==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:_==="leader"?"Disengage (Leader)":"Become a Leader"}),_==="none"&&k.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),_==="leader"&&k.jsx("button",{onClick:M,style:{backgroundColor:y?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:y?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),k.jsx("button",{onClick:()=>ne(_==="follower"?"none":"follower"),style:{backgroundColor:_==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:_==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})},Hc=Lt(),Lx=(e,t)=>`${e.trim()}|${t.trim()}`;async function E4(){var a,l;console.log("[Dexie Load] Preparing availability check set...");const e=await Hc.songDetails.toCollection().primaryKeys(),t=new Set;for(const[u,c]of e)t.add(Lx(u,c));console.log(`[Dexie Load] Found ${t.size} available SongDetails.`);const n=await Hc.songIndices.toArray();let r=await Hc.categories.toArray();r.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(u=>setTimeout(u,500)),r=await Hc.categories.toArray(),r.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const s=new Map,i=new Map;for(const u of r){const c=(a=u.id)==null?void 0:a.trim();if(c&&i.set(c,u),Array.isArray(u.books))for(const f of u.books){const p=(l=f.bookId)==null?void 0:l.trim();if(p){const m={...f,bookId:p,bookName:f.bookName||"Unknown Book",categoryId:c,author:f.author||u.author,language:f.language||u.language,type:f.type||u.type,raagam:f.raagam||u.raagam,taaLam:f.taaLam||u.taaLam};s.set(p,m)}}}return console.log("Book Map Keys (Flattened):",Array.from(s.keys()).length),console.log("Category Map Keys:",Array.from(i.keys()).length),n.map((u,c)=>{var $,F;const f=($=u.bookId)==null?void 0:$.trim(),p=(F=u.songTitle)==null?void 0:F.trim(),m=s.get(f),b=m?i.get((m.categoryId??"").trim()):void 0;m||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${u.songTitle} | Index Book ID: '${f}'`);let v=!1;if(f&&p){const V=Lx(f,p);v=t.has(V)}const _=(m==null?void 0:m.bookName)||"Unknown Book",g=(b==null?void 0:b.name)||"Unknown Category",y=u.author||(m==null?void 0:m.author)||(b==null?void 0:b.author)||"Unknown Author",w=u.sourceLanguage||(m==null?void 0:m.language)||(b==null?void 0:b.language)||"Unknown Language",C=u.type||(m==null?void 0:m.type)||(b==null?void 0:b.type)||"Unknown Type",O=u.raagam||(m==null?void 0:m.raagam)||(b==null?void 0:b.raagam)||"Unknown Type",I=u.taaLam||(m==null?void 0:m.taaLam)||(b==null?void 0:b.taaLam)||"Unknown Type";return{uniqueSongId:`${u.bookId}-${u.songTitle}`,indexPositionForNavigation:c,isAvailable:v,bookId:u.bookId,categoryId:(b==null?void 0:b.id)||"unknown-category",title:u.songTitle,sourceRow:u.sourceRow,tags:u.tags||null,verseCount:u.verseCount||null,category:g,book:_,author:y,language:w,type:C,raagam:O,taaLam:I}})}const C4=["searchIndex","allSongs"],T4=()=>jf({queryKey:C4,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await E4();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,networkMode:"always",refetchOnWindowFocus:!1}),P4=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const s=t[r];if(s&&s.length>0){const i=s.map(o=>o.value.toLowerCase());n=n.filter(o=>{var l;const a=(l=o[r])==null?void 0:l.toLowerCase();return i.includes(a)})}}),n},A4=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>r.title.toLowerCase().includes(n)||r.author.toLowerCase().includes(n)||r.book.toLowerCase().includes(n)||r.category.toLowerCase().includes(n)):e},Oi=(e,t)=>{const n=new Set;return e.forEach(r=>{const s=r[t];Array.isArray(s)?s.forEach(i=>{typeof i=="string"&&n.add(i)}):typeof s=="string"&&n.add(s)}),Array.from(n).sort()},j4=()=>{const[e,t]=E.useState(""),[n,r]=E.useState({}),[s,i]=E.useState([]),[o,a]=E.useState([]),[l,u]=E.useState("cards"),[c,f]=E.useState([]),[p,m]=E.useState(!1),b=fr(),[v,_]=E.useState({category:!0,book:!0,title:!0,author:!0,language:!0,raagam:!0}),{preferredLanguage:g}=xo(),y=(N,z="itrans")=>{const ue=Array.isArray(N)?N.join(", "):N;return pu(ue,z,g)},{data:w,isLoading:C,isError:O,error:I}=T4(),R=E.useMemo(()=>w||[],[w]);E.useEffect(()=>{if(!s||s.length===0)return;console.log("Final filteredSongs count:",s.length);const N=new Set,z=[];s.forEach((ue,fe)=>{const ce=`${ue.bookId}-${ue.title}-${ue.sourceRow}`;N.has(ce)?z.push({key:ce,song:ue,position:fe}):N.add(ce)}),z.length>0?(console.error(" DUPLICATE KEY FOUND IN filteredSongs ARRAY:",z),console.log("Total unique keys:",N.size)):console.log(" Current filteredSongs array is free of key collisions.")},[s]),E.useEffect(()=>{if(R.length===0){i([]);return}let N=P4(R,n),z=A4(N,e);i(z)},[R,n,e]),E.useEffect(()=>{(()=>{let z=R;if(e){const fe=e.toLowerCase();z=z.filter(ce=>Object.values(ce).filter(De=>De!==void 0).map(De=>Array.isArray(De)?De.join(" "):String(De)).join(" ").toLowerCase().includes(fe))}Object.entries(n).forEach(([fe,ce])=>{ce&&ce.length>0&&(z=z.filter(Ce=>{const De=Ce[fe],ye=Array.isArray(De)?De.map(Qe=>String(Qe).toLowerCase()):[String(De).toLowerCase()];return ce.every(Qe=>{const Ze=Qe.value.toLowerCase(),Ve=ye.includes(Ze);return Qe.isNot?!Ve:Ve})}))}),i(z);const ue=z.map(fe=>({indexPositionForNavigation:fe.indexPositionForNavigation,sourceRow:fe.sourceRow,songTitle:Array.isArray(fe.title)?fe.title.join(", "):fe.title}));a(ue)})()},[e,n,R]);const $=(N,z)=>{r(ue=>{const fe=ue[N]||[],ce=fe.find(Ce=>Ce.value===z);if(ce)if(ce.isNot){const Ce=fe.filter(De=>De.value!==z);if(Ce.length===0){const De={...ue};return delete De[N],De}return{...ue,[N]:Ce}}else return{...ue,[N]:fe.map(Ce=>Ce.value===z?{...Ce,isNot:!0}:Ce)};else return{...ue,[N]:[...fe,{value:z,isNot:!1}]}})},F=()=>{r({})},V=(N,z)=>{const ue=Array.isArray(N.title)?N.title.join(", "):N.title;b(`/details/book/${N.category}/${N.bookId}/${N.sourceRow}/${encodeURIComponent(ue)}`,{state:{filteredSongIndices:o,index:z}})},he=N=>{_(z=>({...z,[N]:!z[N]}))},M=Oi(s,"author"),ne=Oi(s,"language");Oi(s,"type");const A=Oi(s,"raagam");Oi(s,"taaLam");const J=Oi(s,"book"),xe=Oi(s,"category"),oe={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set,raagam:new Set};e.length>0&&R.forEach(N=>{Object.entries(N).forEach(([z,ue])=>{var fe;Array.isArray(ue)?ue.forEach(ce=>{var Ce;typeof ce=="string"&&ce.toLowerCase().includes(e.toLowerCase())&&((Ce=oe[z])==null||Ce.add(ce))}):typeof ue=="string"&&ue.toLowerCase().includes(e.toLowerCase())&&((fe=oe[z])==null||fe.add(ue))})});const ae=(N,z)=>s.filter(ue=>{const fe=ue[N];return Array.isArray(fe)?fe.includes(z):fe===z}).length,re=(N,z)=>{var fe;const ue=(fe=n[N])==null?void 0:fe.find(ce=>ce.value===z);return ue?ue.isNot?"bg-red-500 text-white":"bg-teal-500 text-white":"hover:bg-gray-600"};if(C)return k.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500",children:"Loading search index from Dexie... This may take a moment."});if(O)return k.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50",children:["Error loading search index: ",(I==null?void 0:I.message)||"Unknown error.",k.jsx("div",{className:"text-sm text-red-400 mt-2",children:"Falling back to no search capability."})]});const ge=N=>`${N.bookId}-${N.title}`;return k.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4 font-sans flex flex-col items-center",children:k.jsxs("div",{className:"w-full max-w-4xl bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8",children:[k.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-sky-500",children:"Progressive Search"}),k.jsx("div",{className:"mb-6 text-center",children:k.jsx("button",{onClick:()=>m(!p),className:"px-5 py-2 rounded-full font-semibold bg-gray-700 text-gray-400 hover:bg-gray-600 transition-colors text-sm",children:p?"Hide Debug Panel":"Show Debug Panel"})}),p&&k.jsxs("div",{className:"bg-gray-700 p-4 rounded-xl mb-6",children:[k.jsx("h2",{className:"text-xl font-bold text-gray-300 mb-2",children:"Debug Log (Local Storage)"}),k.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside",children:c.map((N,z)=>k.jsx("li",{className:"mb-1",children:N},z))})]}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-3 rounded-xl bg-gray-700 text-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-all",value:e,onChange:N=>t(N.target.value)}),e&&Object.values(oe).some(N=>N.size>0)&&k.jsx("div",{className:"absolute z-10 w-full mt-2 bg-gray-700 rounded-xl shadow-lg border border-gray-600 max-h-64 overflow-y-auto",children:Object.entries(oe).map(([N,z])=>z&&z.size>0&&k.jsxs("div",{className:"p-3",children:[k.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-1",children:N}),Array.from(z).map((ue,fe)=>k.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-teal-500 hover:text-white transition-colors",onClick:()=>{t(""),$(N,ue)},children:ue},fe))]},N))})]}),Object.keys(n).some(N=>{const z=n[N];return z&&z.length>0})&&k.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[k.jsx("span",{className:"text-sm text-gray-400 mr-2",children:"Filters:"}),Object.entries(n).map(([N,z])=>z==null?void 0:z.map((ue,fe)=>k.jsxs("span",{className:`${ue.isNot?"bg-red-500":"bg-teal-500"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-1`,children:[k.jsxs("span",{className:"font-semibold",children:[N,":"]})," ",ue.value,k.jsx("button",{onClick:()=>$(N,ue.value),className:"ml-1 text-white hover:text-gray-200 transition-colors",children:""})]},`${N}-${fe}`))),k.jsx("button",{onClick:F,className:"text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:"Clear All Filters"})]}),C?k.jsx("div",{className:"text-center py-8",children:k.jsx("p",{className:"text-gray-400",children:"Loading songs from local storage..."})}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>he("category"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Category",k.jsx("span",{className:`transform transition-transform duration-300 ${v.category?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.category?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:xe.map(N=>k.jsxs("button",{onClick:()=>$("category",N),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${re("category",N)}`,children:[k.jsx("span",{children:N}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ae("category",N)})]},N))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>he("book"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Book",k.jsx("span",{className:`transform transition-transform duration-300 ${v.book?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.book?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:J.map(N=>k.jsxs("button",{onClick:()=>$("book",N),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${re("book",N)}`,children:[k.jsx("span",{children:N}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ae("book",N)})]},N))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>he("author"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Author",k.jsx("span",{className:`transform transition-transform duration-300 ${v.author?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.author?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:M.map(N=>k.jsxs("button",{onClick:()=>$("author",N),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${re("author",N)}`,children:[k.jsx("span",{children:N}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ae("author",N)})]},N))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>he("language"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Language",k.jsx("span",{className:`transform transition-transform duration-300 ${v.language?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.language?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:ne.map(N=>k.jsxs("button",{onClick:()=>$("language",N),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${re("language",N)}`,children:[k.jsx("span",{children:N}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ae("language",N)})]},N))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>he("raagam"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Raagam",k.jsx("span",{className:`transform transition-transform duration-300 ${v.raagam?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.raagam?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:A.map(N=>k.jsxs("button",{onClick:()=>$("raagam",N),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${re("raagam",N)}`,children:[k.jsx("span",{children:N}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:ae("raagam",N)})]},N))})})]})]}),k.jsxs("div",{className:"mt-4",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("h2",{className:"text-xl font-bold",children:["Results (",s.length,")"]}),k.jsxs("div",{className:"flex gap-2 text-sm",children:[k.jsx("button",{onClick:()=>u("cards"),className:`px-3 py-1 rounded-full font-semibold transition-colors ${l==="cards"?"bg-sky-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Cards"}),k.jsx("button",{onClick:()=>u("grid"),className:`px-3 py-1 rounded-full font-semibold transition-colors ${l==="grid"?"bg-sky-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Table"})]})]}),s.length===0?k.jsx("p",{className:"text-gray-400 text-center py-8",children:"No songs match your search and filter criteria."}):k.jsx(k.Fragment,{children:l==="cards"?k.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map((N,z)=>{const ue=ge(N);return k.jsxs("div",{onClick:()=>V(N,z),className:`bg-gray-700 p-4 rounded-xl shadow-md transition-transform hover:scale-105 cursor-pointer border-2 ${N.isAvailable?"border-teal-500":"border-red-500"}`,children:[k.jsx("h3",{className:"text-lg font-bold text-teal-400",children:y(N.title,N.language)}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Author:"}),N.author]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Book:"}),N.book]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Category:"}),N.category]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Language:"}),N.language]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Type:"}),N.type]})]},ue)})}):k.jsx("div",{className:"overflow-x-auto rounded-xl",children:k.jsxs("div",{className:"min-w-full",children:[k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2 p-4 text-sm font-semibold text-gray-400 uppercase tracking-wider bg-gray-700 border-b border-gray-600 rounded-t-xl",children:[k.jsx("span",{children:"Title"}),k.jsx("span",{className:"hidden md:block",children:"Author"}),k.jsx("span",{className:"hidden md:block",children:"Book"}),k.jsx("span",{className:"hidden md:block",children:"Category"}),k.jsx("span",{className:"hidden md:block",children:"Language"}),k.jsx("span",{className:"hidden md:block",children:"Type"})]}),k.jsx("div",{className:"bg-gray-700",children:s.map((N,z)=>{const ue=ge(N);return k.jsxs("div",{onClick:()=>V(N,z),className:`grid grid-cols-2 md:grid-cols-6 gap-2 p-4 text-sm border-b transition-colors cursor-pointer hover:bg-gray-600 ${N.isAvailable?"border-teal-500":"border-red-500"}`,children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Title:"}),k.jsx("span",{children:y(N.title,N.language)})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Author:"}),k.jsx("span",{children:N.author})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Book:"}),k.jsx("span",{children:N.book})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Category:"}),k.jsx("span",{children:N.category})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Language:"}),k.jsx("span",{children:N.language})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Type:"}),k.jsx("span",{children:N.type})]})]},ue)})})]})})})]})]})]})})},O4="thodaya-mangalam",R4=()=>{const[e,t]=E.useState(""),n=async()=>{t("Exporting...");try{const r=await mD(O4);if(!r){t("No data found for this book or download failed.");return}const s=r.songDetails.map(u=>u),i=r.songIndices.map(u=>{const{indexId:c,timestamp:f,...p}=u;return p}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:f,...p}=u;return p}),a={bookId:r.bookId,songIndices:i,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return k.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[k.jsx("div",{style:{marginTop:"20px"},children:k.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&k.jsxs("div",{style:{marginTop:"15px"},children:[k.jsx("h4",{children:"Exported JSON Structure:"}),k.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},I4=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],D4=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:s,isDownloading:i,startBulkDownload:o}=jS(e.bookId,t),a=()=>i?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${s} `:"Ready to Download";return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[k.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:i?"orange":n==="success"?"green":"gray"},children:a()}),k.jsx("button",{onClick:o,disabled:i,style:{padding:"5px 10px",backgroundColor:i?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:i?"Processing":"Bulk Download"})]})]})},N4=()=>{const e="test@example.com";return k.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[k.jsx("h2",{children:"Offline Content Manager"}),k.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),k.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:I4.map(t=>k.jsx(D4,{book:t,userEmail:e},t.bookId))})]})};function qc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var TC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function o(u,c){if(!s[u]){if(!r[u]){var f=typeof qc=="function"&&qc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=s[u]={exports:{}};r[u][0].call(m.exports,function(b){var v=r[u][1][b];return o(v||b)},m,m.exports,n,r,s,i)}return s[u].exports}for(var a=typeof qc=="function"&&qc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,c,f,p,m,b,v,_=[],g=0,y=l.length,w=y,C=i.getTypeOf(l)!=="string";g<l.length;)w=y-g,f=C?(u=l[g++],c=g<y?l[g++]:0,g<y?l[g++]:0):(u=l.charCodeAt(g++),c=g<y?l.charCodeAt(g++):0,g<y?l.charCodeAt(g++):0),p=u>>2,m=(3&u)<<4|c>>4,b=1<w?(15&c)<<2|f>>6:64,v=2<w?63&f:64,_.push(a.charAt(p)+a.charAt(m)+a.charAt(b)+a.charAt(v));return _.join("")},s.decode=function(l){var u,c,f,p,m,b,v=0,_=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|w):new Array(0|w);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(p=a.indexOf(l.charAt(v++)))>>4,c=(15&p)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(b=a.indexOf(l.charAt(v++))),y[_++]=u,m!==64&&(y[_++]=c),b!==64&&(y[_++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,f,p,m,b){this.compressedSize=c,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=b}u.prototype={getContentWorker:function(){var c=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,p){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,c,f,p){var m=o,b=p+f;u^=-1;for(var v=p;v<b;v++)u=u>>>8^m[255&(u^c[v])];return-1^u}(0|l,a,a.length,0):function(u,c,f,p){var m=o,b=p+f;u^=-1;for(var v=p;v<b;v++)u=u>>>8^m[255&(u^c.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function c(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new c("Deflate",f)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(m,b){var v,_="";for(v=0;v<b;v++)_+=String.fromCharCode(255&m),m>>>=8;return _}function o(m,b,v,_,g,y){var w,C,O=m.file,I=m.compression,R=y!==u.utf8encode,$=a.transformTo("string",y(O.name)),F=a.transformTo("string",u.utf8encode(O.name)),V=O.comment,he=a.transformTo("string",y(V)),M=a.transformTo("string",u.utf8encode(V)),ne=F.length!==O.name.length,A=M.length!==V.length,J="",xe="",oe="",ae=O.dir,re=O.date,ge={crc32:0,compressedSize:0,uncompressedSize:0};b&&!v||(ge.crc32=m.crc32,ge.compressedSize=m.compressedSize,ge.uncompressedSize=m.uncompressedSize);var N=0;b&&(N|=8),R||!ne&&!A||(N|=2048);var z=0,ue=0;ae&&(z|=16),g==="UNIX"?(ue=798,z|=function(ce,Ce){var De=ce;return ce||(De=Ce?16893:33204),(65535&De)<<16}(O.unixPermissions,ae)):(ue=20,z|=function(ce){return 63&(ce||0)}(O.dosPermissions)),w=re.getUTCHours(),w<<=6,w|=re.getUTCMinutes(),w<<=5,w|=re.getUTCSeconds()/2,C=re.getUTCFullYear()-1980,C<<=4,C|=re.getUTCMonth()+1,C<<=5,C|=re.getUTCDate(),ne&&(xe=i(1,1)+i(c($),4)+F,J+="up"+i(xe.length,2)+xe),A&&(oe=i(1,1)+i(c(he),4)+M,J+="uc"+i(oe.length,2)+oe);var fe="";return fe+=`
\0`,fe+=i(N,2),fe+=I.magic,fe+=i(w,2),fe+=i(C,2),fe+=i(ge.crc32,4),fe+=i(ge.compressedSize,4),fe+=i(ge.uncompressedSize,4),fe+=i($.length,2),fe+=i(J.length,2),{fileRecord:f.LOCAL_FILE_HEADER+fe+$+J,dirRecord:f.CENTRAL_FILE_HEADER+i(ue,2)+fe+i(he.length,2)+"\0\0\0\0"+i(z,4)+i(_,4)+$+J+he}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),f=n("../signature");function p(m,b,v,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=v,this.encodeFileName=_,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var b=m.meta.percent||0,v=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(b+100*(v-_-1))/v:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var b=this.streamFiles&&!m.file.dir;if(b){var v=o(m,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var b=this.streamFiles&&!m.file.dir,v=o(m,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),b)this.push({data:function(_){return f.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v=this.bytesWritten-m,_=function(g,y,w,C,O){var I=a.transformTo("string",O(C));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(y,4)+i(w,4)+i(I.length,2)+I}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var b=this;return m.on("data",function(v){b.processChunk(v)}),m.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),m.on("error",function(v){b.error(v)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var b=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<b.length;v++)try{b[v].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,b=0;b<m.length;b++)m[b].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var b=function(y,w){var C=y||w,O=i[C];if(!O)throw new Error(C+" is not a valid compression method !");return O}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},_=m.dir,g=m.date;m._compressWorker(b,v).withStreamInfo("file",{name:p,dir:_,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(p){return new o.Promise(function(m,b){var v=p.decompressed.getContentWorker().pipe(new u);v.on("error",function(_){b(_)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var b=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(v){var _=new l(m);return _.load(v),_}).then(function(v){var _=[o.Promise.resolve(v)],g=v.files;if(m.checkCRC32)for(var y=0;y<g.length;y++)_.push(f(g[y]));return o.Promise.all(_)}).then(function(v){for(var _=v.shift(),g=_.files,y=0;y<g.length;y++){var w=g[y],C=w.fileNameStr,O=i.resolve(w.fileNameStr);b.file(O,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:m.createFolders}),w.dir||(b.file(O).unsafeOriginalName=C)}return _.zipComment.length&&(b.comment=_.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,u){i.call(this,l),this._helper=a;var c=this;a.on("data",function(f,p){c.push(f)||c._helper.pause(),u&&u(p)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(O,I,R){var $,F=a.getTypeOf(I),V=a.extend(R||{},c);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(O=g(O)),V.createFolders&&($=_(O))&&y.call(this,$,!0);var he=F==="string"&&V.binary===!1&&V.base64===!1;R&&R.binary!==void 0||(V.binary=!he),(I instanceof f&&I.uncompressedSize===0||V.dir||!I||I.length===0)&&(V.base64=!1,V.binary=!0,I="",V.compression="STORE",F="string");var M=null;M=I instanceof f||I instanceof l?I:b.isNode&&b.isStream(I)?new v(O,I):a.prepareContent(O,I,V.binary,V.optimizedBinaryString,V.base64);var ne=new p(O,M,V);this.files[O]=ne}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),b=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),_=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var I=O.lastIndexOf("/");return 0<I?O.substring(0,I):""},g=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},y=function(O,I){return I=I!==void 0?I:c.createFolders,O=g(O),this.files[O]||i.call(this,O,null,{dir:!0,createFolders:I}),this.files[O]};function w(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var I,R,$;for(I in this.files)$=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&O(R,$)},filter:function(O){var I=[];return this.forEach(function(R,$){O(R,$)&&I.push($)}),I},file:function(O,I,R){if(arguments.length!==1)return O=this.root+O,i.call(this,O,I,R),this;if(w(O)){var $=O;return this.filter(function(V,he){return!he.dir&&$.test(V)})}var F=this.files[this.root+O];return F&&!F.dir?F:null},folder:function(O){if(!O)return this;if(w(O))return this.filter(function(F,V){return V.dir&&O.test(F)});var I=this.root+O,R=y.call(this,I),$=this.clone();return $.root=R.name,$},remove:function(O){O=this.root+O;var I=this.files[O];if(I||(O.slice(-1)!=="/"&&(O+="/"),I=this.files[O]),I&&!I.dir)delete this.files[O];else for(var R=this.filter(function(F,V){return V.name.slice(0,O.length)===O}),$=0;$<R.length;$++)delete this.files[R[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var I,R={};try{if((R=a.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var $=R.comment||this.comment||"";I=m.generateWorker(this,R,$)}catch(F){(I=new l("error")).error(F)}return new u(I,R.type||"string",R.mimeType)},generateAsync:function(O,I){return this.generateInternalStream(O).accumulate(I)},generateNodeStream:function(O,I){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===c&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&c===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new c(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=i.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(b,v){return new c.Promise(function(_,g){var y=[],w=b._internalType,C=b._outputType,O=b._mimeType;b.on("data",function(I,R){y.push(I),v&&v(R)}).on("error",function(I){y=[],g(I)}).on("end",function(){try{var I=function(R,$,F){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",$),F);case"base64":return l.encode($);default:return i.transformTo(R,$)}}(C,function(R,$){var F,V=0,he=null,M=0;for(F=0;F<$.length;F++)M+=$[F].length;switch(R){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(he=new Uint8Array(M),F=0;F<$.length;F++)he.set($[F],V),V+=$[F].length;return he;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+R+"'")}}(w,y),O);_(I)}catch(R){g(R)}y=[]}).resume()})}function m(b,v,_){var g=v;switch(v){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=v,this._mimeType=_,i.checkSupport(g),this._worker=b.pipe(new o(g)),b.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(b){return p(this,b)},on:function(b,v){var _=this;return b==="data"?this._worker.on(b,function(g){v.call(_,g.data,g.meta)}):this._worker.on(b,function(){i.delay(v,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}s.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(b){var v,_,g,y,w,C=b.length,O=0;for(y=0;y<C;y++)(64512&(_=b.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=b.charCodeAt(y+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),y++),O+=_<128?1:_<2048?2:_<65536?3:4;for(v=o.uint8array?new Uint8Array(O):new Array(O),y=w=0;w<O;y++)(64512&(_=b.charCodeAt(y)))==55296&&y+1<C&&(64512&(g=b.charCodeAt(y+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),y++),_<128?v[w++]=_:(_<2048?v[w++]=192|_>>>6:(_<65536?v[w++]=224|_>>>12:(v[w++]=240|_>>>18,v[w++]=128|_>>>12&63),v[w++]=128|_>>>6&63),v[w++]=128|63&_);return v}(m)},s.utf8decode=function(m){return o.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(b){var v,_,g,y,w=b.length,C=new Array(2*w);for(v=_=0;v<w;)if((g=b[v++])<128)C[_++]=g;else if(4<(y=u[g]))C[_++]=65533,v+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&v<w;)g=g<<6|63&b[v++],y--;1<y?C[_++]=65533:g<65536?C[_++]=g:(g-=65536,C[_++]=55296|g>>10&1023,C[_++]=56320|1023&g)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(m=i.transformTo(o.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var b=i.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=b;(b=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var _=function(y,w){var C;for((w=w||y.length)>y.length&&(w=y.length),C=w-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?w:C+u[y[C]]>w?C:w}(b),g=b;_!==b.length&&(o.uint8array?(g=b.subarray(0,_),this.leftOver=b.subarray(_,b.length)):(g=b.slice(0,_),this.leftOver=b.slice(_,b.length))),this.push({data:s.utf8decode(g),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:s.utf8encode(m.data),meta:m.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function c(v,_){for(var g=0;g<v.length;++g)_[g]=255&v.charCodeAt(g);return _}n("setimmediate"),s.newBlob=function(v,_){s.checkSupport("blob");try{return new Blob([v],{type:_})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(v),g.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,_,g){var y=[],w=0,C=v.length;if(C<=g)return String.fromCharCode.apply(null,v);for(;w<C;)_==="array"||_==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(w,Math.min(w+g,C)))):y.push(String.fromCharCode.apply(null,v.subarray(w,Math.min(w+g,C)))),w+=g;return y.join("")},stringifyByChar:function(v){for(var _="",g=0;g<v.length;g++)_+=String.fromCharCode(v[g]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var _=65536,g=s.getTypeOf(v),y=!0;if(g==="uint8array"?y=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<_;)try{return f.stringifyByChunk(v,g,_)}catch{_=Math.floor(_/2)}return f.stringifyByChar(v)}function m(v,_){for(var g=0;g<v.length;g++)_[g]=v[g];return _}s.applyFromCharCode=p;var b={};b.string={string:u,array:function(v){return c(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return c(v,new Uint8Array(v.length))},nodebuffer:function(v){return c(v,a.allocBuffer(v.length))}},b.array={string:p,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},b.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},b.nodebuffer={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},s.transformTo=function(v,_){if(_=_||"",!v)return _;s.checkSupport(v);var g=s.getTypeOf(_);return b[g][v](_)},s.resolve=function(v){for(var _=v.split("/"),g=[],y=0;y<_.length;y++){var w=_[y];w==="."||w===""&&y!==0&&y!==_.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var _,g,y="";for(g=0;g<(v||"").length;g++)y+="\\x"+((_=v.charCodeAt(g))<16?"0":"")+_.toString(16).toUpperCase();return y},s.delay=function(v,_,g){setImmediate(function(){v.apply(g||null,_||[])})},s.inherits=function(v,_){function g(){}g.prototype=_.prototype,v.prototype=new g},s.extend=function(){var v,_,g={};for(v=0;v<arguments.length;v++)for(_ in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],_)&&g[_]===void 0&&(g[_]=arguments[v][_]);return g},s.prepareContent=function(v,_,g,y,w){return l.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(O,I){var R=new FileReader;R.onload=function($){O($.target.result)},R.onerror=function($){I($.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var O=s.getTypeOf(C);return O?(O==="arraybuffer"?C=s.transformTo("uint8array",C):O==="string"&&(w?C=o.decode(C):g&&y!==!0&&(C=function(I){return c(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var b=this.reader.readString(4)===p;return this.reader.setIndex(m),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,b=this.zip64EndOfCentralSize-44;0<b;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var b=p-m;if(0<b)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),f=n("./support");function p(m,b){this.options=m,this.loadOptions=b}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var b,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(_){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===_)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var b=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(b),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var b,v,_,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)b=m.readInt(2),v=m.readInt(2),_=m.readData(v),this.extraFields[b]={id:b,length:v,value:_};m.setIndex(g)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var b=i(m.value);return b.readInt(1)!==1||l(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var b=i(m.value);return b.readInt(1)!==1||l(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(b,v,_){this.name=b,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=v,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");i.prototype={internalStream:function(b){var v=null,_="string";try{if(!b)throw new Error("No output type specified.");var g=(_=b.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),v=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(v=v.pipe(new l.Utf8EncodeWorker)),!y&&g&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(w){(v=new c("error")).error(w)}return new o(v,_,"")},async:function(b,v){return this.internalStream(b).accumulate(v)},nodeStream:function(b,v){return this.internalStream(b||"nodebuffer").toNodejsStream(v)},_compressWorker:function(b,v){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(_,b,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,c=new l(b),f=i.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){b(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(b,0)};else{var p=new i.MessageChannel;p.port1.onmessage=b,o=function(){p.port2.postMessage(0)}}var m=[];function b(){var v,_;a=!0;for(var g=m.length;g;){for(_=m,m=[],v=-1;++v<g;)_[v]();g=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&v(this,g)}function p(g,y,w){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function m(g,y,w){i(function(){var C;try{C=y(w)}catch(O){return a.reject(g,O)}C===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,C)})}function b(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function v(g,y){var w=!1;function C(R){w||(w=!0,a.reject(g,R))}function O(R){w||(w=!0,a.resolve(g,R))}var I=_(function(){y(O,C)});I.status==="error"&&C(I.value)}function _(g,y){var w={};try{w.value=g(y),w.status="success"}catch(C){w.status="error",w.value=C}return w}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(g()).then(function(){return w})},function(w){return y.resolve(g()).then(function(){throw w})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,y){if(typeof g!="function"&&this.state===u||typeof y!="function"&&this.state===l)return this;var w=new this.constructor(o);return this.state!==c?m(w,this.state===u?g:y,this.outcome):this.queue.push(new p(w,g,y)),w},p.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},p.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},p.prototype.callRejected=function(g){a.reject(this.promise,g)},p.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,y){var w=_(b,y);if(w.status==="error")return a.reject(g,w.value);var C=w.value;if(C)v(g,C);else{g.state=u,g.outcome=y;for(var O=-1,I=g.queue.length;++O<I;)g.queue[O].callFulfilled(y)}return g},a.reject=function(g,y){g.state=l,g.outcome=y;for(var w=-1,C=g.queue.length;++w<C;)g.queue[w].callRejected(y);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var y=new this(o);return a.reject(y,g)},f.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,C=!1;if(!w)return this.resolve([]);for(var O=new Array(w),I=0,R=-1,$=new this(o);++R<w;)F(g[R],R);return $;function F(V,he){y.resolve(V).then(function(M){O[he]=M,++I!==w||C||(C=!0,a.resolve($,O))},function(M){C||(C=!0,a.reject($,M))})}},f.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,C=!1;if(!w)return this.resolve([]);for(var O=-1,I=new this(o);++O<w;)R=g[O],y.resolve(R).then(function($){C||(C=!0,a.resolve(I,$))},function($){C||(C=!0,a.reject(I,$))});var R;return I}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,f=0,p=-1,m=0,b=8;function v(g){if(!(this instanceof v))return new v(g);this.options=o.assign({level:p,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==f)throw new Error(l[w]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=i.deflateSetDictionary(this.strm,C))!==f)throw new Error(l[w]);this._dict_set=!0}}function _(g,y){var w=new v(y);if(w.push(g,!0),w.err)throw w.msg||l[w.err];return w.result}v.prototype.push=function(g,y){var w,C,O=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof g=="string"?O.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?O.input=new Uint8Array(g):O.input=g,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(I),O.next_out=0,O.avail_out=I),(w=i.deflate(O,C))!==1&&w!==f)return this.onEnd(w),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&w!==1);return C===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===f):C!==2||(this.onEnd(f),!(O.avail_out=0))},v.prototype.onData=function(g){this.chunks.push(g)},v.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=v,s.deflate=_,s.deflateRaw=function(g,y){return(y=y||{}).raw=!0,_(g,y)},s.gzip=function(g,y){return(y=y||{}).gzip=!0,_(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||v&&v.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,_.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function b(v,_){var g=new m(_);if(g.push(v,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(v,_){var g,y,w,C,O,I,R=this.strm,$=this.options.chunkSize,F=this.options.dictionary,V=!1;if(this.ended)return!1;y=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?R.input=a.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?R.input=new Uint8Array(v):R.input=v,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8($),R.next_out=0,R.avail_out=$),(g=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(I=typeof F=="string"?a.string2buf(F):p.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,g=i.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&V===!0&&(g=l.Z_OK,V=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&g!==l.Z_STREAM_END&&(R.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(R.output,R.next_out),C=R.next_out-w,O=a.buf2string(R.output,w),R.next_out=C,R.avail_out=$-C,C&&o.arraySet(R.output,R.output,w,C,0),this.onData(O)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(V=!0)}while((0<R.avail_in||R.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=m,s.inflate=b,s.inflateRaw=function(v,_){return(_=_||{}).raw=!0,b(v,_)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,f,p){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),p);else for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){var u,c,f,p,m,b;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(b=new Uint8Array(f),u=p=0,c=l.length;u<c;u++)m=l[u],b.set(m,p),p+=m.length;return b}},a={arraySet:function(l,u,c,f,p){for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var m="",b=0;b<p;b++)m+=String.fromCharCode(f[b]);return m}l[254]=l[254]=1,s.string2buf=function(f){var p,m,b,v,_,g=f.length,y=0;for(v=0;v<g;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(b=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new i.Buf8(y),v=_=0;_<y;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(b=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),m<128?p[_++]=m:(m<2048?p[_++]=192|m>>>6:(m<65536?p[_++]=224|m>>>12:(p[_++]=240|m>>>18,p[_++]=128|m>>>12&63),p[_++]=128|m>>>6&63),p[_++]=128|63&m);return p},s.buf2binstring=function(f){return c(f,f.length)},s.binstring2buf=function(f){for(var p=new i.Buf8(f.length),m=0,b=p.length;m<b;m++)p[m]=f.charCodeAt(m);return p},s.buf2string=function(f,p){var m,b,v,_,g=p||f.length,y=new Array(2*g);for(m=b=0;m<g;)if((v=f[m++])<128)y[b++]=v;else if(4<(_=l[v]))y[b++]=65533,m+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&m<g;)v=v<<6|63&f[m++],_--;1<_?y[b++]=65533:v<65536?y[b++]=v:(v-=65536,y[b++]=55296|v>>10&1023,y[b++]=56320|1023&v)}return c(y,b)},s.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var u=65535&i|0,c=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=i,f=u+l;o^=-1;for(var p=u;p<f;p++)o=o>>>8^c[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),f=0,p=4,m=0,b=-2,v=-1,_=4,g=2,y=8,w=9,C=286,O=30,I=19,R=2*C+1,$=15,F=3,V=258,he=V+F+1,M=42,ne=113,A=1,J=2,xe=3,oe=4;function ae(P,me){return P.msg=c[me],me}function re(P){return(P<<1)-(4<P?9:0)}function ge(P){for(var me=P.length;0<=--me;)P[me]=0}function N(P){var me=P.state,de=me.pending;de>P.avail_out&&(de=P.avail_out),de!==0&&(o.arraySet(P.output,me.pending_buf,me.pending_out,de,P.next_out),P.next_out+=de,me.pending_out+=de,P.total_out+=de,P.avail_out-=de,me.pending-=de,me.pending===0&&(me.pending_out=0))}function z(P,me){a._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,me),P.block_start=P.strstart,N(P.strm)}function ue(P,me){P.pending_buf[P.pending++]=me}function fe(P,me){P.pending_buf[P.pending++]=me>>>8&255,P.pending_buf[P.pending++]=255&me}function ce(P,me){var de,B,L=P.max_chain_length,X=P.strstart,ve=P.prev_length,we=P.nice_match,ie=P.strstart>P.w_size-he?P.strstart-(P.w_size-he):0,_e=P.window,Ne=P.w_mask,ke=P.prev,Ue=P.strstart+V,rt=_e[X+ve-1],Xe=_e[X+ve];P.prev_length>=P.good_match&&(L>>=2),we>P.lookahead&&(we=P.lookahead);do if(_e[(de=me)+ve]===Xe&&_e[de+ve-1]===rt&&_e[de]===_e[X]&&_e[++de]===_e[X+1]){X+=2,de++;do;while(_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&_e[++X]===_e[++de]&&X<Ue);if(B=V-(Ue-X),X=Ue-V,ve<B){if(P.match_start=me,we<=(ve=B))break;rt=_e[X+ve-1],Xe=_e[X+ve]}}while((me=ke[me&Ne])>ie&&--L!=0);return ve<=P.lookahead?ve:P.lookahead}function Ce(P){var me,de,B,L,X,ve,we,ie,_e,Ne,ke=P.w_size;do{if(L=P.window_size-P.lookahead-P.strstart,P.strstart>=ke+(ke-he)){for(o.arraySet(P.window,P.window,ke,ke,0),P.match_start-=ke,P.strstart-=ke,P.block_start-=ke,me=de=P.hash_size;B=P.head[--me],P.head[me]=ke<=B?B-ke:0,--de;);for(me=de=ke;B=P.prev[--me],P.prev[me]=ke<=B?B-ke:0,--de;);L+=ke}if(P.strm.avail_in===0)break;if(ve=P.strm,we=P.window,ie=P.strstart+P.lookahead,_e=L,Ne=void 0,Ne=ve.avail_in,_e<Ne&&(Ne=_e),de=Ne===0?0:(ve.avail_in-=Ne,o.arraySet(we,ve.input,ve.next_in,Ne,ie),ve.state.wrap===1?ve.adler=l(ve.adler,we,Ne,ie):ve.state.wrap===2&&(ve.adler=u(ve.adler,we,Ne,ie)),ve.next_in+=Ne,ve.total_in+=Ne,Ne),P.lookahead+=de,P.lookahead+P.insert>=F)for(X=P.strstart-P.insert,P.ins_h=P.window[X],P.ins_h=(P.ins_h<<P.hash_shift^P.window[X+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[X+F-1])&P.hash_mask,P.prev[X&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=X,X++,P.insert--,!(P.lookahead+P.insert<F)););}while(P.lookahead<he&&P.strm.avail_in!==0)}function De(P,me){for(var de,B;;){if(P.lookahead<he){if(Ce(P),P.lookahead<he&&me===f)return A;if(P.lookahead===0)break}if(de=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),de!==0&&P.strstart-de<=P.w_size-he&&(P.match_length=ce(P,de)),P.match_length>=F)if(B=a._tr_tally(P,P.strstart-P.match_start,P.match_length-F),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=F){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else B=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(B&&(z(P,!1),P.strm.avail_out===0))return A}return P.insert=P.strstart<F-1?P.strstart:F-1,me===p?(z(P,!0),P.strm.avail_out===0?xe:oe):P.last_lit&&(z(P,!1),P.strm.avail_out===0)?A:J}function Me(P,me){for(var de,B,L;;){if(P.lookahead<he){if(Ce(P),P.lookahead<he&&me===f)return A;if(P.lookahead===0)break}if(de=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=F-1,de!==0&&P.prev_length<P.max_lazy_match&&P.strstart-de<=P.w_size-he&&(P.match_length=ce(P,de),P.match_length<=5&&(P.strategy===1||P.match_length===F&&4096<P.strstart-P.match_start)&&(P.match_length=F-1)),P.prev_length>=F&&P.match_length<=P.prev_length){for(L=P.strstart+P.lookahead-F,B=a._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-F),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=L&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,de=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=F-1,P.strstart++,B&&(z(P,!1),P.strm.avail_out===0))return A}else if(P.match_available){if((B=a._tr_tally(P,0,P.window[P.strstart-1]))&&z(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return A}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(B=a._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<F-1?P.strstart:F-1,me===p?(z(P,!0),P.strm.avail_out===0?xe:oe):P.last_lit&&(z(P,!1),P.strm.avail_out===0)?A:J}function ye(P,me,de,B,L){this.good_length=P,this.max_lazy=me,this.nice_length=de,this.max_chain=B,this.func=L}function Qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*O+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16($+1),this.heap=new o.Buf16(2*C+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ze(P){var me;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=g,(me=P.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?M:ne,P.adler=me.wrap===2?0:1,me.last_flush=f,a._tr_init(me),m):ae(P,b)}function Ve(P){var me=Ze(P);return me===m&&function(de){de.window_size=2*de.w_size,ge(de.head),de.max_lazy_match=i[de.level].max_lazy,de.good_match=i[de.level].good_length,de.nice_match=i[de.level].nice_length,de.max_chain_length=i[de.level].max_chain,de.strstart=0,de.block_start=0,de.lookahead=0,de.insert=0,de.match_length=de.prev_length=F-1,de.match_available=0,de.ins_h=0}(P.state),me}function Tt(P,me,de,B,L,X){if(!P)return b;var ve=1;if(me===v&&(me=6),B<0?(ve=0,B=-B):15<B&&(ve=2,B-=16),L<1||w<L||de!==y||B<8||15<B||me<0||9<me||X<0||_<X)return ae(P,b);B===8&&(B=9);var we=new Qe;return(P.state=we).strm=P,we.wrap=ve,we.gzhead=null,we.w_bits=B,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=L+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+F-1)/F),we.window=new o.Buf8(2*we.w_size),we.head=new o.Buf16(we.hash_size),we.prev=new o.Buf16(we.w_size),we.lit_bufsize=1<<L+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new o.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=me,we.strategy=X,we.method=de,Ve(P)}i=[new ye(0,0,0,0,function(P,me){var de=65535;for(de>P.pending_buf_size-5&&(de=P.pending_buf_size-5);;){if(P.lookahead<=1){if(Ce(P),P.lookahead===0&&me===f)return A;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var B=P.block_start+de;if((P.strstart===0||P.strstart>=B)&&(P.lookahead=P.strstart-B,P.strstart=B,z(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-he&&(z(P,!1),P.strm.avail_out===0))return A}return P.insert=0,me===p?(z(P,!0),P.strm.avail_out===0?xe:oe):(P.strstart>P.block_start&&(z(P,!1),P.strm.avail_out),A)}),new ye(4,4,8,4,De),new ye(4,5,16,8,De),new ye(4,6,32,32,De),new ye(4,4,16,16,Me),new ye(8,16,32,32,Me),new ye(8,16,128,128,Me),new ye(8,32,128,256,Me),new ye(32,128,258,1024,Me),new ye(32,258,258,4096,Me)],s.deflateInit=function(P,me){return Tt(P,me,y,15,8,0)},s.deflateInit2=Tt,s.deflateReset=Ve,s.deflateResetKeep=Ze,s.deflateSetHeader=function(P,me){return P&&P.state?P.state.wrap!==2?b:(P.state.gzhead=me,m):b},s.deflate=function(P,me){var de,B,L,X;if(!P||!P.state||5<me||me<0)return P?ae(P,b):b;if(B=P.state,!P.output||!P.input&&P.avail_in!==0||B.status===666&&me!==p)return ae(P,P.avail_out===0?-5:b);if(B.strm=P,de=B.last_flush,B.last_flush=me,B.status===M)if(B.wrap===2)P.adler=0,ue(B,31),ue(B,139),ue(B,8),B.gzhead?(ue(B,(B.gzhead.text?1:0)+(B.gzhead.hcrc?2:0)+(B.gzhead.extra?4:0)+(B.gzhead.name?8:0)+(B.gzhead.comment?16:0)),ue(B,255&B.gzhead.time),ue(B,B.gzhead.time>>8&255),ue(B,B.gzhead.time>>16&255),ue(B,B.gzhead.time>>24&255),ue(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),ue(B,255&B.gzhead.os),B.gzhead.extra&&B.gzhead.extra.length&&(ue(B,255&B.gzhead.extra.length),ue(B,B.gzhead.extra.length>>8&255)),B.gzhead.hcrc&&(P.adler=u(P.adler,B.pending_buf,B.pending,0)),B.gzindex=0,B.status=69):(ue(B,0),ue(B,0),ue(B,0),ue(B,0),ue(B,0),ue(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),ue(B,3),B.status=ne);else{var ve=y+(B.w_bits-8<<4)<<8;ve|=(2<=B.strategy||B.level<2?0:B.level<6?1:B.level===6?2:3)<<6,B.strstart!==0&&(ve|=32),ve+=31-ve%31,B.status=ne,fe(B,ve),B.strstart!==0&&(fe(B,P.adler>>>16),fe(B,65535&P.adler)),P.adler=1}if(B.status===69)if(B.gzhead.extra){for(L=B.pending;B.gzindex<(65535&B.gzhead.extra.length)&&(B.pending!==B.pending_buf_size||(B.gzhead.hcrc&&B.pending>L&&(P.adler=u(P.adler,B.pending_buf,B.pending-L,L)),N(P),L=B.pending,B.pending!==B.pending_buf_size));)ue(B,255&B.gzhead.extra[B.gzindex]),B.gzindex++;B.gzhead.hcrc&&B.pending>L&&(P.adler=u(P.adler,B.pending_buf,B.pending-L,L)),B.gzindex===B.gzhead.extra.length&&(B.gzindex=0,B.status=73)}else B.status=73;if(B.status===73)if(B.gzhead.name){L=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>L&&(P.adler=u(P.adler,B.pending_buf,B.pending-L,L)),N(P),L=B.pending,B.pending===B.pending_buf_size)){X=1;break}X=B.gzindex<B.gzhead.name.length?255&B.gzhead.name.charCodeAt(B.gzindex++):0,ue(B,X)}while(X!==0);B.gzhead.hcrc&&B.pending>L&&(P.adler=u(P.adler,B.pending_buf,B.pending-L,L)),X===0&&(B.gzindex=0,B.status=91)}else B.status=91;if(B.status===91)if(B.gzhead.comment){L=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>L&&(P.adler=u(P.adler,B.pending_buf,B.pending-L,L)),N(P),L=B.pending,B.pending===B.pending_buf_size)){X=1;break}X=B.gzindex<B.gzhead.comment.length?255&B.gzhead.comment.charCodeAt(B.gzindex++):0,ue(B,X)}while(X!==0);B.gzhead.hcrc&&B.pending>L&&(P.adler=u(P.adler,B.pending_buf,B.pending-L,L)),X===0&&(B.status=103)}else B.status=103;if(B.status===103&&(B.gzhead.hcrc?(B.pending+2>B.pending_buf_size&&N(P),B.pending+2<=B.pending_buf_size&&(ue(B,255&P.adler),ue(B,P.adler>>8&255),P.adler=0,B.status=ne)):B.status=ne),B.pending!==0){if(N(P),P.avail_out===0)return B.last_flush=-1,m}else if(P.avail_in===0&&re(me)<=re(de)&&me!==p)return ae(P,-5);if(B.status===666&&P.avail_in!==0)return ae(P,-5);if(P.avail_in!==0||B.lookahead!==0||me!==f&&B.status!==666){var we=B.strategy===2?function(ie,_e){for(var Ne;;){if(ie.lookahead===0&&(Ce(ie),ie.lookahead===0)){if(_e===f)return A;break}if(ie.match_length=0,Ne=a._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,Ne&&(z(ie,!1),ie.strm.avail_out===0))return A}return ie.insert=0,_e===p?(z(ie,!0),ie.strm.avail_out===0?xe:oe):ie.last_lit&&(z(ie,!1),ie.strm.avail_out===0)?A:J}(B,me):B.strategy===3?function(ie,_e){for(var Ne,ke,Ue,rt,Xe=ie.window;;){if(ie.lookahead<=V){if(Ce(ie),ie.lookahead<=V&&_e===f)return A;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=F&&0<ie.strstart&&(ke=Xe[Ue=ie.strstart-1])===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]){rt=ie.strstart+V;do;while(ke===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]&&ke===Xe[++Ue]&&Ue<rt);ie.match_length=V-(rt-Ue),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=F?(Ne=a._tr_tally(ie,1,ie.match_length-F),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(Ne=a._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),Ne&&(z(ie,!1),ie.strm.avail_out===0))return A}return ie.insert=0,_e===p?(z(ie,!0),ie.strm.avail_out===0?xe:oe):ie.last_lit&&(z(ie,!1),ie.strm.avail_out===0)?A:J}(B,me):i[B.level].func(B,me);if(we!==xe&&we!==oe||(B.status=666),we===A||we===xe)return P.avail_out===0&&(B.last_flush=-1),m;if(we===J&&(me===1?a._tr_align(B):me!==5&&(a._tr_stored_block(B,0,0,!1),me===3&&(ge(B.head),B.lookahead===0&&(B.strstart=0,B.block_start=0,B.insert=0))),N(P),P.avail_out===0))return B.last_flush=-1,m}return me!==p?m:B.wrap<=0?1:(B.wrap===2?(ue(B,255&P.adler),ue(B,P.adler>>8&255),ue(B,P.adler>>16&255),ue(B,P.adler>>24&255),ue(B,255&P.total_in),ue(B,P.total_in>>8&255),ue(B,P.total_in>>16&255),ue(B,P.total_in>>24&255)):(fe(B,P.adler>>>16),fe(B,65535&P.adler)),N(P),0<B.wrap&&(B.wrap=-B.wrap),B.pending!==0?m:1)},s.deflateEnd=function(P){var me;return P&&P.state?(me=P.state.status)!==M&&me!==69&&me!==73&&me!==91&&me!==103&&me!==ne&&me!==666?ae(P,b):(P.state=null,me===ne?ae(P,-3):m):b},s.deflateSetDictionary=function(P,me){var de,B,L,X,ve,we,ie,_e,Ne=me.length;if(!P||!P.state||(X=(de=P.state).wrap)===2||X===1&&de.status!==M||de.lookahead)return b;for(X===1&&(P.adler=l(P.adler,me,Ne,0)),de.wrap=0,Ne>=de.w_size&&(X===0&&(ge(de.head),de.strstart=0,de.block_start=0,de.insert=0),_e=new o.Buf8(de.w_size),o.arraySet(_e,me,Ne-de.w_size,de.w_size,0),me=_e,Ne=de.w_size),ve=P.avail_in,we=P.next_in,ie=P.input,P.avail_in=Ne,P.next_in=0,P.input=me,Ce(de);de.lookahead>=F;){for(B=de.strstart,L=de.lookahead-(F-1);de.ins_h=(de.ins_h<<de.hash_shift^de.window[B+F-1])&de.hash_mask,de.prev[B&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=B,B++,--L;);de.strstart=B,de.lookahead=F-1,Ce(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=F-1,de.match_available=0,P.next_in=we,P.input=ie,P.avail_in=ve,de.wrap=X,m},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,u,c,f,p,m,b,v,_,g,y,w,C,O,I,R,$,F,V,he,M,ne,A,J;a=i.state,l=i.next_in,A=i.input,u=l+(i.avail_in-5),c=i.next_out,J=i.output,f=c-(o-i.avail_out),p=c+(i.avail_out-257),m=a.dmax,b=a.wsize,v=a.whave,_=a.wnext,g=a.window,y=a.hold,w=a.bits,C=a.lencode,O=a.distcode,I=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{w<15&&(y+=A[l++]<<w,w+=8,y+=A[l++]<<w,w+=8),$=C[y&I];t:for(;;){if(y>>>=F=$>>>24,w-=F,(F=$>>>16&255)===0)J[c++]=65535&$;else{if(!(16&F)){if(!(64&F)){$=C[(65535&$)+(y&(1<<F)-1)];continue t}if(32&F){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}V=65535&$,(F&=15)&&(w<F&&(y+=A[l++]<<w,w+=8),V+=y&(1<<F)-1,y>>>=F,w-=F),w<15&&(y+=A[l++]<<w,w+=8,y+=A[l++]<<w,w+=8),$=O[y&R];n:for(;;){if(y>>>=F=$>>>24,w-=F,!(16&(F=$>>>16&255))){if(!(64&F)){$=O[(65535&$)+(y&(1<<F)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(he=65535&$,w<(F&=15)&&(y+=A[l++]<<w,(w+=8)<F&&(y+=A[l++]<<w,w+=8)),m<(he+=y&(1<<F)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=F,w-=F,(F=c-f)<he){if(v<(F=he-F)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(ne=g,(M=0)===_){if(M+=b-F,F<V){for(V-=F;J[c++]=g[M++],--F;);M=c-he,ne=J}}else if(_<F){if(M+=b+_-F,(F-=_)<V){for(V-=F;J[c++]=g[M++],--F;);if(M=0,_<V){for(V-=F=_;J[c++]=g[M++],--F;);M=c-he,ne=J}}}else if(M+=_-F,F<V){for(V-=F;J[c++]=g[M++],--F;);M=c-he,ne=J}for(;2<V;)J[c++]=ne[M++],J[c++]=ne[M++],J[c++]=ne[M++],V-=3;V&&(J[c++]=ne[M++],1<V&&(J[c++]=ne[M++]))}else{for(M=c-he;J[c++]=J[M++],J[c++]=J[M++],J[c++]=J[M++],2<(V-=3););V&&(J[c++]=J[M++],1<V&&(J[c++]=J[M++]))}break}}break}}while(l<u&&c<p);l-=V=w>>3,y&=(1<<(w-=V<<3))-1,i.next_in=l,i.next_out=c,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=c<p?p-c+257:257-(c-p),a.hold=y,a.bits=w}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,f=2,p=0,m=-2,b=1,v=852,_=592;function g(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(M){var ne;return M&&M.state?(ne=M.state,M.total_in=M.total_out=ne.total=0,M.msg="",ne.wrap&&(M.adler=1&ne.wrap),ne.mode=b,ne.last=0,ne.havedict=0,ne.dmax=32768,ne.head=null,ne.hold=0,ne.bits=0,ne.lencode=ne.lendyn=new i.Buf32(v),ne.distcode=ne.distdyn=new i.Buf32(_),ne.sane=1,ne.back=-1,p):m}function C(M){var ne;return M&&M.state?((ne=M.state).wsize=0,ne.whave=0,ne.wnext=0,w(M)):m}function O(M,ne){var A,J;return M&&M.state?(J=M.state,ne<0?(A=0,ne=-ne):(A=1+(ne>>4),ne<48&&(ne&=15)),ne&&(ne<8||15<ne)?m:(J.window!==null&&J.wbits!==ne&&(J.window=null),J.wrap=A,J.wbits=ne,C(M))):m}function I(M,ne){var A,J;return M?(J=new y,(M.state=J).window=null,(A=O(M,ne))!==p&&(M.state=null),A):m}var R,$,F=!0;function V(M){if(F){var ne;for(R=new i.Buf32(512),$=new i.Buf32(32),ne=0;ne<144;)M.lens[ne++]=8;for(;ne<256;)M.lens[ne++]=9;for(;ne<280;)M.lens[ne++]=7;for(;ne<288;)M.lens[ne++]=8;for(u(c,M.lens,0,288,R,0,M.work,{bits:9}),ne=0;ne<32;)M.lens[ne++]=5;u(f,M.lens,0,32,$,0,M.work,{bits:5}),F=!1}M.lencode=R,M.lenbits=9,M.distcode=$,M.distbits=5}function he(M,ne,A,J){var xe,oe=M.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new i.Buf8(oe.wsize)),J>=oe.wsize?(i.arraySet(oe.window,ne,A-oe.wsize,oe.wsize,0),oe.wnext=0,oe.whave=oe.wsize):(J<(xe=oe.wsize-oe.wnext)&&(xe=J),i.arraySet(oe.window,ne,A-J,xe,oe.wnext),(J-=xe)?(i.arraySet(oe.window,ne,A-J,J,0),oe.wnext=J,oe.whave=oe.wsize):(oe.wnext+=xe,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=xe))),0}s.inflateReset=C,s.inflateReset2=O,s.inflateResetKeep=w,s.inflateInit=function(M){return I(M,15)},s.inflateInit2=I,s.inflate=function(M,ne){var A,J,xe,oe,ae,re,ge,N,z,ue,fe,ce,Ce,De,Me,ye,Qe,Ze,Ve,Tt,P,me,de,B,L=0,X=new i.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return m;(A=M.state).mode===12&&(A.mode=13),ae=M.next_out,xe=M.output,ge=M.avail_out,oe=M.next_in,J=M.input,re=M.avail_in,N=A.hold,z=A.bits,ue=re,fe=ge,me=p;e:for(;;)switch(A.mode){case b:if(A.wrap===0){A.mode=13;break}for(;z<16;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(2&A.wrap&&N===35615){X[A.check=0]=255&N,X[1]=N>>>8&255,A.check=a(A.check,X,2,0),z=N=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&N)<<8)+(N>>8))%31){M.msg="incorrect header check",A.mode=30;break}if((15&N)!=8){M.msg="unknown compression method",A.mode=30;break}if(z-=4,P=8+(15&(N>>>=4)),A.wbits===0)A.wbits=P;else if(P>A.wbits){M.msg="invalid window size",A.mode=30;break}A.dmax=1<<P,M.adler=A.check=1,A.mode=512&N?10:12,z=N=0;break;case 2:for(;z<16;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(A.flags=N,(255&A.flags)!=8){M.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){M.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=N>>8&1),512&A.flags&&(X[0]=255&N,X[1]=N>>>8&255,A.check=a(A.check,X,2,0)),z=N=0,A.mode=3;case 3:for(;z<32;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}A.head&&(A.head.time=N),512&A.flags&&(X[0]=255&N,X[1]=N>>>8&255,X[2]=N>>>16&255,X[3]=N>>>24&255,A.check=a(A.check,X,4,0)),z=N=0,A.mode=4;case 4:for(;z<16;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}A.head&&(A.head.xflags=255&N,A.head.os=N>>8),512&A.flags&&(X[0]=255&N,X[1]=N>>>8&255,A.check=a(A.check,X,2,0)),z=N=0,A.mode=5;case 5:if(1024&A.flags){for(;z<16;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}A.length=N,A.head&&(A.head.extra_len=N),512&A.flags&&(X[0]=255&N,X[1]=N>>>8&255,A.check=a(A.check,X,2,0)),z=N=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(re<(ce=A.length)&&(ce=re),ce&&(A.head&&(P=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),i.arraySet(A.head.extra,J,oe,ce,P)),512&A.flags&&(A.check=a(A.check,J,ce,oe)),re-=ce,oe+=ce,A.length-=ce),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(re===0)break e;for(ce=0;P=J[oe+ce++],A.head&&P&&A.length<65536&&(A.head.name+=String.fromCharCode(P)),P&&ce<re;);if(512&A.flags&&(A.check=a(A.check,J,ce,oe)),re-=ce,oe+=ce,P)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(re===0)break e;for(ce=0;P=J[oe+ce++],A.head&&P&&A.length<65536&&(A.head.comment+=String.fromCharCode(P)),P&&ce<re;);if(512&A.flags&&(A.check=a(A.check,J,ce,oe)),re-=ce,oe+=ce,P)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;z<16;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(N!==(65535&A.check)){M.msg="header crc mismatch",A.mode=30;break}z=N=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),M.adler=A.check=0,A.mode=12;break;case 10:for(;z<32;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}M.adler=A.check=g(N),z=N=0,A.mode=11;case 11:if(A.havedict===0)return M.next_out=ae,M.avail_out=ge,M.next_in=oe,M.avail_in=re,A.hold=N,A.bits=z,2;M.adler=A.check=1,A.mode=12;case 12:if(ne===5||ne===6)break e;case 13:if(A.last){N>>>=7&z,z-=7&z,A.mode=27;break}for(;z<3;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}switch(A.last=1&N,z-=1,3&(N>>>=1)){case 0:A.mode=14;break;case 1:if(V(A),A.mode=20,ne!==6)break;N>>>=2,z-=2;break e;case 2:A.mode=17;break;case 3:M.msg="invalid block type",A.mode=30}N>>>=2,z-=2;break;case 14:for(N>>>=7&z,z-=7&z;z<32;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if((65535&N)!=(N>>>16^65535)){M.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&N,z=N=0,A.mode=15,ne===6)break e;case 15:A.mode=16;case 16:if(ce=A.length){if(re<ce&&(ce=re),ge<ce&&(ce=ge),ce===0)break e;i.arraySet(xe,J,oe,ce,ae),re-=ce,oe+=ce,ge-=ce,ae+=ce,A.length-=ce;break}A.mode=12;break;case 17:for(;z<14;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(A.nlen=257+(31&N),N>>>=5,z-=5,A.ndist=1+(31&N),N>>>=5,z-=5,A.ncode=4+(15&N),N>>>=4,z-=4,286<A.nlen||30<A.ndist){M.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;z<3;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}A.lens[ve[A.have++]]=7&N,N>>>=3,z-=3}for(;A.have<19;)A.lens[ve[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,de={bits:A.lenbits},me=u(0,A.lens,0,19,A.lencode,0,A.work,de),A.lenbits=de.bits,me){M.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;ye=(L=A.lencode[N&(1<<A.lenbits)-1])>>>16&255,Qe=65535&L,!((Me=L>>>24)<=z);){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(Qe<16)N>>>=Me,z-=Me,A.lens[A.have++]=Qe;else{if(Qe===16){for(B=Me+2;z<B;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(N>>>=Me,z-=Me,A.have===0){M.msg="invalid bit length repeat",A.mode=30;break}P=A.lens[A.have-1],ce=3+(3&N),N>>>=2,z-=2}else if(Qe===17){for(B=Me+3;z<B;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}z-=Me,P=0,ce=3+(7&(N>>>=Me)),N>>>=3,z-=3}else{for(B=Me+7;z<B;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}z-=Me,P=0,ce=11+(127&(N>>>=Me)),N>>>=7,z-=7}if(A.have+ce>A.nlen+A.ndist){M.msg="invalid bit length repeat",A.mode=30;break}for(;ce--;)A.lens[A.have++]=P}}if(A.mode===30)break;if(A.lens[256]===0){M.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,de={bits:A.lenbits},me=u(c,A.lens,0,A.nlen,A.lencode,0,A.work,de),A.lenbits=de.bits,me){M.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,de={bits:A.distbits},me=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,de),A.distbits=de.bits,me){M.msg="invalid distances set",A.mode=30;break}if(A.mode=20,ne===6)break e;case 20:A.mode=21;case 21:if(6<=re&&258<=ge){M.next_out=ae,M.avail_out=ge,M.next_in=oe,M.avail_in=re,A.hold=N,A.bits=z,l(M,fe),ae=M.next_out,xe=M.output,ge=M.avail_out,oe=M.next_in,J=M.input,re=M.avail_in,N=A.hold,z=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;ye=(L=A.lencode[N&(1<<A.lenbits)-1])>>>16&255,Qe=65535&L,!((Me=L>>>24)<=z);){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(ye&&!(240&ye)){for(Ze=Me,Ve=ye,Tt=Qe;ye=(L=A.lencode[Tt+((N&(1<<Ze+Ve)-1)>>Ze)])>>>16&255,Qe=65535&L,!(Ze+(Me=L>>>24)<=z);){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}N>>>=Ze,z-=Ze,A.back+=Ze}if(N>>>=Me,z-=Me,A.back+=Me,A.length=Qe,ye===0){A.mode=26;break}if(32&ye){A.back=-1,A.mode=12;break}if(64&ye){M.msg="invalid literal/length code",A.mode=30;break}A.extra=15&ye,A.mode=22;case 22:if(A.extra){for(B=A.extra;z<B;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}A.length+=N&(1<<A.extra)-1,N>>>=A.extra,z-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;ye=(L=A.distcode[N&(1<<A.distbits)-1])>>>16&255,Qe=65535&L,!((Me=L>>>24)<=z);){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(!(240&ye)){for(Ze=Me,Ve=ye,Tt=Qe;ye=(L=A.distcode[Tt+((N&(1<<Ze+Ve)-1)>>Ze)])>>>16&255,Qe=65535&L,!(Ze+(Me=L>>>24)<=z);){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}N>>>=Ze,z-=Ze,A.back+=Ze}if(N>>>=Me,z-=Me,A.back+=Me,64&ye){M.msg="invalid distance code",A.mode=30;break}A.offset=Qe,A.extra=15&ye,A.mode=24;case 24:if(A.extra){for(B=A.extra;z<B;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}A.offset+=N&(1<<A.extra)-1,N>>>=A.extra,z-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){M.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(ge===0)break e;if(ce=fe-ge,A.offset>ce){if((ce=A.offset-ce)>A.whave&&A.sane){M.msg="invalid distance too far back",A.mode=30;break}Ce=ce>A.wnext?(ce-=A.wnext,A.wsize-ce):A.wnext-ce,ce>A.length&&(ce=A.length),De=A.window}else De=xe,Ce=ae-A.offset,ce=A.length;for(ge<ce&&(ce=ge),ge-=ce,A.length-=ce;xe[ae++]=De[Ce++],--ce;);A.length===0&&(A.mode=21);break;case 26:if(ge===0)break e;xe[ae++]=A.length,ge--,A.mode=21;break;case 27:if(A.wrap){for(;z<32;){if(re===0)break e;re--,N|=J[oe++]<<z,z+=8}if(fe-=ge,M.total_out+=fe,A.total+=fe,fe&&(M.adler=A.check=A.flags?a(A.check,xe,fe,ae-fe):o(A.check,xe,fe,ae-fe)),fe=ge,(A.flags?N:g(N))!==A.check){M.msg="incorrect data check",A.mode=30;break}z=N=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;z<32;){if(re===0)break e;re--,N+=J[oe++]<<z,z+=8}if(N!==(4294967295&A.total)){M.msg="incorrect length check",A.mode=30;break}z=N=0}A.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return m}return M.next_out=ae,M.avail_out=ge,M.next_in=oe,M.avail_in=re,A.hold=N,A.bits=z,(A.wsize||fe!==M.avail_out&&A.mode<30&&(A.mode<27||ne!==4))&&he(M,M.output,M.next_out,fe-M.avail_out)?(A.mode=31,-4):(ue-=M.avail_in,fe-=M.avail_out,M.total_in+=ue,M.total_out+=fe,A.total+=fe,A.wrap&&fe&&(M.adler=A.check=A.flags?a(A.check,xe,fe,M.next_out-fe):o(A.check,xe,fe,M.next_out-fe)),M.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(ue==0&&fe===0||ne===4)&&me===p&&(me=-5),me)},s.inflateEnd=function(M){if(!M||!M.state)return m;var ne=M.state;return ne.window&&(ne.window=null),M.state=null,p},s.inflateGetHeader=function(M,ne){var A;return M&&M.state&&2&(A=M.state).wrap?((A.head=ne).done=!1,p):m},s.inflateSetDictionary=function(M,ne){var A,J=ne.length;return M&&M.state?(A=M.state).wrap!==0&&A.mode!==11?m:A.mode===11&&o(1,ne,J,0)!==A.check?-3:he(M,ne,J,J)?(A.mode=31,-4):(A.havedict=1,p):m},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,p,m,b,v,_,g){var y,w,C,O,I,R,$,F,V,he=g.bits,M=0,ne=0,A=0,J=0,xe=0,oe=0,ae=0,re=0,ge=0,N=0,z=null,ue=0,fe=new i.Buf16(16),ce=new i.Buf16(16),Ce=null,De=0;for(M=0;M<=15;M++)fe[M]=0;for(ne=0;ne<m;ne++)fe[f[p+ne]]++;for(xe=he,J=15;1<=J&&fe[J]===0;J--);if(J<xe&&(xe=J),J===0)return b[v++]=20971520,b[v++]=20971520,g.bits=1,0;for(A=1;A<J&&fe[A]===0;A++);for(xe<A&&(xe=A),M=re=1;M<=15;M++)if(re<<=1,(re-=fe[M])<0)return-1;if(0<re&&(c===0||J!==1))return-1;for(ce[1]=0,M=1;M<15;M++)ce[M+1]=ce[M]+fe[M];for(ne=0;ne<m;ne++)f[p+ne]!==0&&(_[ce[f[p+ne]]++]=ne);if(R=c===0?(z=Ce=_,19):c===1?(z=o,ue-=257,Ce=a,De-=257,256):(z=l,Ce=u,-1),M=A,I=v,ae=ne=N=0,C=-1,O=(ge=1<<(oe=xe))-1,c===1&&852<ge||c===2&&592<ge)return 1;for(;;){for($=M-ae,V=_[ne]<R?(F=0,_[ne]):_[ne]>R?(F=Ce[De+_[ne]],z[ue+_[ne]]):(F=96,0),y=1<<M-ae,A=w=1<<oe;b[I+(N>>ae)+(w-=y)]=$<<24|F<<16|V|0,w!==0;);for(y=1<<M-1;N&y;)y>>=1;if(y!==0?(N&=y-1,N+=y):N=0,ne++,--fe[M]==0){if(M===J)break;M=f[p+_[ne]]}if(xe<M&&(N&O)!==C){for(ae===0&&(ae=xe),I+=A,re=1<<(oe=M-ae);oe+ae<J&&!((re-=fe[oe+ae])<=0);)oe++,re<<=1;if(ge+=1<<oe,c===1&&852<ge||c===2&&592<ge)return 1;b[C=N&O]=xe<<24|oe<<16|I-v|0}}return N!==0&&(b[I+N]=M-ae<<24|64<<16|0),g.bits=xe,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(L){for(var X=L.length;0<=--X;)L[X]=0}var u=0,c=29,f=256,p=f+1+c,m=30,b=19,v=2*p+1,_=15,g=16,y=7,w=256,C=16,O=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=new Array(2*(p+2));l(he);var M=new Array(2*m);l(M);var ne=new Array(512);l(ne);var A=new Array(256);l(A);var J=new Array(c);l(J);var xe,oe,ae,re=new Array(m);function ge(L,X,ve,we,ie){this.static_tree=L,this.extra_bits=X,this.extra_base=ve,this.elems=we,this.max_length=ie,this.has_stree=L&&L.length}function N(L,X){this.dyn_tree=L,this.max_code=0,this.stat_desc=X}function z(L){return L<256?ne[L]:ne[256+(L>>>7)]}function ue(L,X){L.pending_buf[L.pending++]=255&X,L.pending_buf[L.pending++]=X>>>8&255}function fe(L,X,ve){L.bi_valid>g-ve?(L.bi_buf|=X<<L.bi_valid&65535,ue(L,L.bi_buf),L.bi_buf=X>>g-L.bi_valid,L.bi_valid+=ve-g):(L.bi_buf|=X<<L.bi_valid&65535,L.bi_valid+=ve)}function ce(L,X,ve){fe(L,ve[2*X],ve[2*X+1])}function Ce(L,X){for(var ve=0;ve|=1&L,L>>>=1,ve<<=1,0<--X;);return ve>>>1}function De(L,X,ve){var we,ie,_e=new Array(_+1),Ne=0;for(we=1;we<=_;we++)_e[we]=Ne=Ne+ve[we-1]<<1;for(ie=0;ie<=X;ie++){var ke=L[2*ie+1];ke!==0&&(L[2*ie]=Ce(_e[ke]++,ke))}}function Me(L){var X;for(X=0;X<p;X++)L.dyn_ltree[2*X]=0;for(X=0;X<m;X++)L.dyn_dtree[2*X]=0;for(X=0;X<b;X++)L.bl_tree[2*X]=0;L.dyn_ltree[2*w]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function ye(L){8<L.bi_valid?ue(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Qe(L,X,ve,we){var ie=2*X,_e=2*ve;return L[ie]<L[_e]||L[ie]===L[_e]&&we[X]<=we[ve]}function Ze(L,X,ve){for(var we=L.heap[ve],ie=ve<<1;ie<=L.heap_len&&(ie<L.heap_len&&Qe(X,L.heap[ie+1],L.heap[ie],L.depth)&&ie++,!Qe(X,we,L.heap[ie],L.depth));)L.heap[ve]=L.heap[ie],ve=ie,ie<<=1;L.heap[ve]=we}function Ve(L,X,ve){var we,ie,_e,Ne,ke=0;if(L.last_lit!==0)for(;we=L.pending_buf[L.d_buf+2*ke]<<8|L.pending_buf[L.d_buf+2*ke+1],ie=L.pending_buf[L.l_buf+ke],ke++,we===0?ce(L,ie,X):(ce(L,(_e=A[ie])+f+1,X),(Ne=R[_e])!==0&&fe(L,ie-=J[_e],Ne),ce(L,_e=z(--we),ve),(Ne=$[_e])!==0&&fe(L,we-=re[_e],Ne)),ke<L.last_lit;);ce(L,w,X)}function Tt(L,X){var ve,we,ie,_e=X.dyn_tree,Ne=X.stat_desc.static_tree,ke=X.stat_desc.has_stree,Ue=X.stat_desc.elems,rt=-1;for(L.heap_len=0,L.heap_max=v,ve=0;ve<Ue;ve++)_e[2*ve]!==0?(L.heap[++L.heap_len]=rt=ve,L.depth[ve]=0):_e[2*ve+1]=0;for(;L.heap_len<2;)_e[2*(ie=L.heap[++L.heap_len]=rt<2?++rt:0)]=1,L.depth[ie]=0,L.opt_len--,ke&&(L.static_len-=Ne[2*ie+1]);for(X.max_code=rt,ve=L.heap_len>>1;1<=ve;ve--)Ze(L,_e,ve);for(ie=Ue;ve=L.heap[1],L.heap[1]=L.heap[L.heap_len--],Ze(L,_e,1),we=L.heap[1],L.heap[--L.heap_max]=ve,L.heap[--L.heap_max]=we,_e[2*ie]=_e[2*ve]+_e[2*we],L.depth[ie]=(L.depth[ve]>=L.depth[we]?L.depth[ve]:L.depth[we])+1,_e[2*ve+1]=_e[2*we+1]=ie,L.heap[1]=ie++,Ze(L,_e,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Xe,Ot){var qn,Ie,Ke,et,sn,Ht,Le=Ot.dyn_tree,pr=Ot.max_code,Gn=Ot.stat_desc.static_tree,Es=Ot.stat_desc.has_stree,Pe=Ot.stat_desc.extra_bits,Jr=Ot.stat_desc.extra_base,Rr=Ot.stat_desc.max_length,mr=0;for(et=0;et<=_;et++)Xe.bl_count[et]=0;for(Le[2*Xe.heap[Xe.heap_max]+1]=0,qn=Xe.heap_max+1;qn<v;qn++)Rr<(et=Le[2*Le[2*(Ie=Xe.heap[qn])+1]+1]+1)&&(et=Rr,mr++),Le[2*Ie+1]=et,pr<Ie||(Xe.bl_count[et]++,sn=0,Jr<=Ie&&(sn=Pe[Ie-Jr]),Ht=Le[2*Ie],Xe.opt_len+=Ht*(et+sn),Es&&(Xe.static_len+=Ht*(Gn[2*Ie+1]+sn)));if(mr!==0){do{for(et=Rr-1;Xe.bl_count[et]===0;)et--;Xe.bl_count[et]--,Xe.bl_count[et+1]+=2,Xe.bl_count[Rr]--,mr-=2}while(0<mr);for(et=Rr;et!==0;et--)for(Ie=Xe.bl_count[et];Ie!==0;)pr<(Ke=Xe.heap[--qn])||(Le[2*Ke+1]!==et&&(Xe.opt_len+=(et-Le[2*Ke+1])*Le[2*Ke],Le[2*Ke+1]=et),Ie--)}}(L,X),De(_e,rt,L.bl_count)}function P(L,X,ve){var we,ie,_e=-1,Ne=X[1],ke=0,Ue=7,rt=4;for(Ne===0&&(Ue=138,rt=3),X[2*(ve+1)+1]=65535,we=0;we<=ve;we++)ie=Ne,Ne=X[2*(we+1)+1],++ke<Ue&&ie===Ne||(ke<rt?L.bl_tree[2*ie]+=ke:ie!==0?(ie!==_e&&L.bl_tree[2*ie]++,L.bl_tree[2*C]++):ke<=10?L.bl_tree[2*O]++:L.bl_tree[2*I]++,_e=ie,rt=(ke=0)===Ne?(Ue=138,3):ie===Ne?(Ue=6,3):(Ue=7,4))}function me(L,X,ve){var we,ie,_e=-1,Ne=X[1],ke=0,Ue=7,rt=4;for(Ne===0&&(Ue=138,rt=3),we=0;we<=ve;we++)if(ie=Ne,Ne=X[2*(we+1)+1],!(++ke<Ue&&ie===Ne)){if(ke<rt)for(;ce(L,ie,L.bl_tree),--ke!=0;);else ie!==0?(ie!==_e&&(ce(L,ie,L.bl_tree),ke--),ce(L,C,L.bl_tree),fe(L,ke-3,2)):ke<=10?(ce(L,O,L.bl_tree),fe(L,ke-3,3)):(ce(L,I,L.bl_tree),fe(L,ke-11,7));_e=ie,rt=(ke=0)===Ne?(Ue=138,3):ie===Ne?(Ue=6,3):(Ue=7,4)}}l(re);var de=!1;function B(L,X,ve,we){fe(L,(u<<1)+(we?1:0),3),function(ie,_e,Ne,ke){ye(ie),ue(ie,Ne),ue(ie,~Ne),i.arraySet(ie.pending_buf,ie.window,_e,Ne,ie.pending),ie.pending+=Ne}(L,X,ve)}s._tr_init=function(L){de||(function(){var X,ve,we,ie,_e,Ne=new Array(_+1);for(ie=we=0;ie<c-1;ie++)for(J[ie]=we,X=0;X<1<<R[ie];X++)A[we++]=ie;for(A[we-1]=ie,ie=_e=0;ie<16;ie++)for(re[ie]=_e,X=0;X<1<<$[ie];X++)ne[_e++]=ie;for(_e>>=7;ie<m;ie++)for(re[ie]=_e<<7,X=0;X<1<<$[ie]-7;X++)ne[256+_e++]=ie;for(ve=0;ve<=_;ve++)Ne[ve]=0;for(X=0;X<=143;)he[2*X+1]=8,X++,Ne[8]++;for(;X<=255;)he[2*X+1]=9,X++,Ne[9]++;for(;X<=279;)he[2*X+1]=7,X++,Ne[7]++;for(;X<=287;)he[2*X+1]=8,X++,Ne[8]++;for(De(he,p+1,Ne),X=0;X<m;X++)M[2*X+1]=5,M[2*X]=Ce(X,5);xe=new ge(he,R,f+1,p,_),oe=new ge(M,$,0,m,_),ae=new ge(new Array(0),F,0,b,y)}(),de=!0),L.l_desc=new N(L.dyn_ltree,xe),L.d_desc=new N(L.dyn_dtree,oe),L.bl_desc=new N(L.bl_tree,ae),L.bi_buf=0,L.bi_valid=0,Me(L)},s._tr_stored_block=B,s._tr_flush_block=function(L,X,ve,we){var ie,_e,Ne=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(ke){var Ue,rt=4093624447;for(Ue=0;Ue<=31;Ue++,rt>>>=1)if(1&rt&&ke.dyn_ltree[2*Ue]!==0)return o;if(ke.dyn_ltree[18]!==0||ke.dyn_ltree[20]!==0||ke.dyn_ltree[26]!==0)return a;for(Ue=32;Ue<f;Ue++)if(ke.dyn_ltree[2*Ue]!==0)return a;return o}(L)),Tt(L,L.l_desc),Tt(L,L.d_desc),Ne=function(ke){var Ue;for(P(ke,ke.dyn_ltree,ke.l_desc.max_code),P(ke,ke.dyn_dtree,ke.d_desc.max_code),Tt(ke,ke.bl_desc),Ue=b-1;3<=Ue&&ke.bl_tree[2*V[Ue]+1]===0;Ue--);return ke.opt_len+=3*(Ue+1)+5+5+4,Ue}(L),ie=L.opt_len+3+7>>>3,(_e=L.static_len+3+7>>>3)<=ie&&(ie=_e)):ie=_e=ve+5,ve+4<=ie&&X!==-1?B(L,X,ve,we):L.strategy===4||_e===ie?(fe(L,2+(we?1:0),3),Ve(L,he,M)):(fe(L,4+(we?1:0),3),function(ke,Ue,rt,Xe){var Ot;for(fe(ke,Ue-257,5),fe(ke,rt-1,5),fe(ke,Xe-4,4),Ot=0;Ot<Xe;Ot++)fe(ke,ke.bl_tree[2*V[Ot]+1],3);me(ke,ke.dyn_ltree,Ue-1),me(ke,ke.dyn_dtree,rt-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Ne+1),Ve(L,L.dyn_ltree,L.dyn_dtree)),Me(L),we&&ye(L)},s._tr_tally=function(L,X,ve){return L.pending_buf[L.d_buf+2*L.last_lit]=X>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&X,L.pending_buf[L.l_buf+L.last_lit]=255&ve,L.last_lit++,X===0?L.dyn_ltree[2*ve]++:(L.matches++,X--,L.dyn_ltree[2*(A[ve]+f+1)]++,L.dyn_dtree[2*z(X)]++),L.last_lit===L.lit_bufsize-1},s._tr_align=function(L){fe(L,2,3),ce(L,w,he),function(X){X.bi_valid===16?(ue(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,u,c,f,p=1,m={},b=!1,v=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){y(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,O=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=O,C}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(C){o.postMessage(f+C,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){c.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(C){var O=v.createElement("script");O.onreadystatechange=function(){y(C),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):function(C){setTimeout(y,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var O=new Array(arguments.length-1),I=0;I<O.length;I++)O[I]=arguments[I+1];var R={callback:C,args:O};return m[p]=R,l(p),p++},_.clearImmediate=g}function g(C){delete m[C]}function y(C){if(b)setTimeout(y,0,C);else{var O=m[C];if(O){b=!0;try{(function(I){var R=I.callback,$=I.args;switch($.length){case 0:R();break;case 1:R($[0]);break;case 2:R($[0],$[1]);break;case 3:R($[0],$[1],$[2]);break;default:R.apply(a,$)}})(O)}finally{g(C),b=!1}}}}function w(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(f)===0&&y(+C.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(TC);var L4=TC.exports;const $x=of(L4),$4=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState([]),s=E.useRef(null),i=E.useCallback(async u=>{if(!u||u.length===0){r(f=>[...f,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let f=0;f<u.length;f++){const p=u[f];if(p.type==="application/zip"||p.name.endsWith(".zip"))try{const m=await $x.loadAsync(p),b=Object.values(m.files);for(const v of b)if(!v.dir&&v.name.endsWith(".json"))try{const _=await v.async("string"),g=JSON.parse(_),y=v.name.split("/").pop()||"unknown.json",w=y.replace(/\.json$/,"");localStorage.setItem(w,JSON.stringify(g)),c.push({success:!0,message:`Successfully extracted and stored "${y}" with key "${w}" from ZIP.`})}catch(_){const g=_ instanceof Error?_.message:"Unknown error";c.push({success:!1,message:`Error processing file "${v.name}" from ZIP: ${g}`})}else v.dir||c.push({success:!1,message:`Skipped non-JSON file "${v.name}" from ZIP.`})}catch(m){const b=m instanceof Error?m.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${p.name}": ${b}`})}else if(p.type==="application/json"||p.name.endsWith(".json"))try{const m=new FileReader,b=await new Promise((y,w)=>{m.onload=()=>y(m.result),m.onerror=w,m.readAsText(p)}),v=JSON.parse(b),g=p.name.replace(/\.json$/,"");localStorage.setItem(g,JSON.stringify(v)),c.push({success:!0,message:`Successfully stored "${p.name}" with key "${g}".`})}catch(m){const b=m instanceof Error?m.message:"Unknown error";c.push({success:!1,message:`Error processing file "${p.name}": ${b}`})}else c.push({success:!1,message:`File "${p.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(f=>[...f,...c]),t(!1)}},[]),o=u=>{i(u.target.files),s.current&&(s.current.value="")},a=()=>{r([])},l=E.useCallback(async()=>{t(!0);try{debugger;const u=new $x;let c=!1,f=null;const p=localStorage.getItem("sankeertan_categories_data");if(p)try{f=JSON.parse(p),u.file("sankeertan_categories_data.json",p),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),f=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const m={};for(let g=0;g<localStorage.length;g++){debugger;const y=localStorage.key(g);if(console.log(y),y!=="sb-"+D1+"-auth-token"&&y&&y!=="sankeertan_categories_data"){const w=localStorage.getItem(y);if(w)try{JSON.parse(w);let C=u;if(f&&Array.isArray(f.data))for(const O of f.data)for(const I of O.books){const R=I.bookId,$=`sankeertan_song_details-${R.toLowerCase().replace(/ /g,"-")}`,F=`sankeertan_song_indices-${R.toLowerCase().replace(/ /g,"-")}`;if(y.startsWith($)||y.startsWith(F)){if(!m[R]){const V=u.folder(R);V?m[R]=V:m[R]=u}C=m[R]||u;break}}C.file(`${y}.json`,w),c=!0}catch{console.warn(`Skipping key "${y}" as value is not valid JSON`)}}}if(!c){r(g=>[...g,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const b=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),v=URL.createObjectURL(b),_=document.createElement("a");_.href=v,_.download="sankeertan_localStorage_backup.zip",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(v),r(g=>[...g,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(f=>[...f,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return k.jsxs("div",{className:"p-4",children:[k.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:s}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),k.jsx("div",{className:"mb-4",children:k.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&k.jsx("div",{className:"mb-4 flex items-center gap-2",children:k.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&k.jsxs("div",{className:"mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>k.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?k.jsx("span",{style:{color:"green"},children:""}):k.jsx("span",{style:{color:"red"},children:""}),k.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),k.jsx("span",{children:u.message})]},c)),k.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),k.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),k.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},Lr=({children:e,session:t})=>{const n=dr();return t?k.jsx(k.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),k.jsx(P1,{to:"/login",replace:!0}))};function M4(){const{session:e}=bo(),{categories:t,isLoading:n}=zy(),r=(t==null?void 0:t.flatMap(s=>s.books))||[];return n?k.jsx("div",{children:"Checking authentication..."}):k.jsx(PS,{children:k.jsx(kD,{books:r,children:k.jsxs(QA,{children:[k.jsx(dn,{path:"/login",element:k.jsx(gI,{})}),k.jsx(dn,{path:"/signup",element:k.jsx(yI,{})}),k.jsx(dn,{path:"/change-password",element:k.jsx(vI,{})}),k.jsx(dn,{path:"/auth/callback",element:k.jsx(bI,{})}),k.jsx(dn,{path:"/settings",element:k.jsx(Lr,{session:e,children:k.jsx(g4,{})})}),k.jsx(dn,{path:"/categories",element:k.jsx(Lr,{session:e,children:k.jsx(xD,{})})}),k.jsx(dn,{path:"/books/:categoryId",element:k.jsx(Lr,{session:e,children:k.jsx(DD,{})})}),k.jsx(dn,{path:"/book/:categoryId/:bookId",element:k.jsx(Lr,{session:e,children:k.jsx(QD,{})})}),k.jsx(dn,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(Lr,{session:e,children:k.jsx(x4,{})})}),k.jsx(dn,{path:"/sankeertan/:broadcastId",element:k.jsx(Lr,{session:e,children:k.jsx(S4,{broadcastId:1})})}),k.jsx(dn,{path:"/localstoragesync",element:k.jsx(Lr,{session:e,children:k.jsx($4,{})})}),k.jsx(dn,{path:"/bulkDownloadTester",element:k.jsx(Lr,{session:e,children:k.jsx(R4,{})})}),k.jsx(dn,{path:"/offlineContentManager",element:k.jsx(Lr,{session:e,children:k.jsx(N4,{})})}),k.jsx(dn,{path:"/search",element:k.jsx(Lr,{session:e,children:k.jsx(j4,{})})}),k.jsx(dn,{path:"/",element:e?k.jsx(P1,{to:"/categories",replace:!0}):k.jsx("div",{children:"Welcome!"})})]})})})}const F4=E.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),B4=({children:e})=>{const[t,n]=E.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,s]=E.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[i,o]=E.useState(null),[a,l]=E.useState(!1),[u,c]=E.useState(null),{bookId:f}=Ru(),p=E.useCallback(async b=>{l(!0),c(null),o(null),await new Promise(_=>setTimeout(_,500));const v=t.find(_=>_.id===b);o(v||null),l(!1)},[t,l,c,o]);E.useEffect(()=>{f&&p(f)},[f,p]);const m={books:t,categories:r,currentBook:i,loadBook:p,loading:a,error:u};return k.jsx(F4.Provider,{value:m,children:e})},U4=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var l;const[r,s]=E.useState(null);fr(),E.useEffect(()=>{Ut.auth.getSession().then(({data:{session:u}})=>{s(u)}),Ut.auth.onAuthStateChange((u,c)=>{s(c)})},[]);const{handleSignOut:i}=SS(),{isOfflineMode:o,setIsOfflineMode:a}=Vy();return k.jsx("div",{className:"relative inline-block text-left",children:r?k.jsxs("div",{children:[k.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((l=r.user)==null?void 0:l.email)||"User",k.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&k.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:k.jsxs("div",{className:"py-1",children:[k.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:o,onChange:u=>a(u.target.checked)}),k.jsx("span",{children:"Offline Mode"})]})}),k.jsx(rr,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),k.jsx(rr,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),k.jsx(rr,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),k.jsx(rr,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),k.jsx(rr,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),k.jsx("button",{onClick:i,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):k.jsx(rr,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var z4=Object.defineProperty,V4=(e,t,n)=>t in e?z4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kp=(e,t,n)=>(V4(e,typeof t!="symbol"?t+"":t,n),n);let K4=class{constructor(){kp(this,"current",this.detect()),kp(this,"handoffState","pending"),kp(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Qr=new K4;function Wu(e){var t;return Qr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function xg(e){var t,n;return Qr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function PC(e){var t,n;return(n=(t=xg(e))==null?void 0:t.activeElement)!=null?n:null}function W4(e){return PC(e)===e}function Ff(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ss(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ff(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Ss();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function Bf(){let[e]=E.useState(Ss);return E.useEffect(()=>()=>e.dispose(),[e]),e}let Nn=(e,t)=>{Qr.isServer?E.useEffect(e,t):E.useLayoutEffect(e,t)};function _o(e){let t=E.useRef(e);return Nn(()=>{t.current=e},[e]),t}let ft=function(e){let t=_o(e);return ze.useCallback((...n)=>t.current(...n),[t])};function Hu(e){return E.useMemo(()=>e,Object.values(e))}let H4=E.createContext(void 0);function q4(){return E.useContext(H4)}function _g(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function _s(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_s),r}var nf=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(nf||{}),ei=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ei||{});function hr(){let e=Q4();return E.useCallback(t=>G4({mergeRefs:e,...t}),[e])}function G4({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??Y4;let l=AC(t,e);if(i)return Gc(l,n,r,o,a);let u=s??0;if(u&2){let{static:c=!1,...f}=l;if(c)return Gc(f,n,r,o,a)}if(u&1){let{unmount:c=!0,...f}=l;return _s(c?0:1,{0(){return null},1(){return Gc({...f,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return Gc(l,n,r,o,a)}function Gc(e,t={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=Sp(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[b,v]of Object.entries(t))typeof v=="boolean"&&(p=!0),v===!0&&m.push(b.replace(/([A-Z])/g,_=>`-${_.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let b of m)f[`data-${b}`]=""}}if(Vl(i)&&(Object.keys(Li(l)).length>0||Object.keys(Li(f)).length>0))if(!E.isValidElement(c)||Array.isArray(c)&&c.length>1||Z4(c)){if(Object.keys(Li(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Li(l)).concat(Object.keys(Li(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=c.props,m=p==null?void 0:p.className,b=typeof m=="function"?(...g)=>_g(m(...g),l.className):_g(m,l.className),v=b?{className:b}:{},_=AC(c.props,Li(Sp(l,["ref"])));for(let g in f)g in _&&delete f[g];return E.cloneElement(c,Object.assign({},_,f,u,{ref:s(J4(c),u.ref)},v))}return E.createElement(i,Object.assign({},Sp(l,["ref"]),!Vl(i)&&u,!Vl(i)&&f),c)}function Q4(){let e=E.useRef([]),t=E.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function Y4(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function AC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return t}function Ln(e){var t;return Object.assign(E.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Li(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Sp(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function J4(e){return ze.version.split(".")[0]>="19"?e.props.ref:e.ref}function Vl(e){return e===E.Fragment||e===Symbol.for("react.fragment")}function Z4(e){return Vl(e.type)}let X4="span";var rf=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(rf||{});function eB(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return hr()({ourProps:i,theirProps:s,slot:{},defaultTag:X4,name:"Hidden"})}let kg=Ln(eB);function tB(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function di(e){return tB(e)&&"tagName"in e}function po(e){return di(e)&&"accessKey"in e}function ti(e){return di(e)&&"tabIndex"in e}function nB(e){return di(e)&&"style"in e}function rB(e){return po(e)&&e.nodeName==="IFRAME"}function sB(e){return po(e)&&e.nodeName==="INPUT"}let jC=Symbol();function iB(e,t=!0){return Object.assign(e,{[jC]:t})}function Yr(...e){let t=E.useRef(e);E.useEffect(()=>{t.current=e},[e]);let n=ft(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[jC]))?void 0:n}let Tv=E.createContext(null);Tv.displayName="DescriptionContext";function OC(){let e=E.useContext(Tv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,OC),t}return e}function oB(){let[e,t]=E.useState([]);return[e.length>0?e.join(" "):void 0,E.useMemo(()=>function(n){let r=ft(i=>(t(o=>[...o,i]),()=>t(o=>{let a=o.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),s=E.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ze.createElement(Tv.Provider,{value:s},n.children)},[t])]}let aB="p";function lB(e,t){let n=E.useId(),r=q4(),{id:s=`headlessui-description-${n}`,...i}=e,o=OC(),a=Yr(t);Nn(()=>o.register(s),[s,o.register]);let l=Hu({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:s};return hr()({ourProps:u,theirProps:i,slot:l,defaultTag:aB,name:o.name||"Description"})}let uB=Ln(lB),cB=Object.assign(uB,{});var RC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(RC||{});let dB=E.createContext(()=>{});function fB({value:e,children:t}){return ze.createElement(dB.Provider,{value:e},t)}let IC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var hB=Object.defineProperty,pB=(e,t,n)=>t in e?hB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mB=(e,t,n)=>(pB(e,t+"",n),n),DC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Jn=(e,t,n)=>(DC(e,t,"read from private field"),n?n.call(e):t.get(e)),Ep=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Mx=(e,t,n,r)=>(DC(e,t,"write to private field"),t.set(e,n),n),$r,kl,Sl;let gB=class{constructor(t){Ep(this,$r,{}),Ep(this,kl,new IC(()=>new Set)),Ep(this,Sl,new Set),mB(this,"disposables",Ss()),Mx(this,$r,t),Qr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Jn(this,$r)}subscribe(t,n){if(Qr.isServer)return()=>{};let r={selector:t,callback:n,current:t(Jn(this,$r))};return Jn(this,Sl).add(r),this.disposables.add(()=>{Jn(this,Sl).delete(r)})}on(t,n){return Qr.isServer?()=>{}:(Jn(this,kl).get(t).add(n),this.disposables.add(()=>{Jn(this,kl).get(t).delete(n)}))}send(t){let n=this.reduce(Jn(this,$r),t);if(n!==Jn(this,$r)){Mx(this,$r,n);for(let r of Jn(this,Sl)){let s=r.selector(Jn(this,$r));NC(r.current,s)||(r.current=s,r.callback(s))}for(let r of Jn(this,kl).get(t.type))r(Jn(this,$r),t)}}};$r=new WeakMap,kl=new WeakMap,Sl=new WeakMap;function NC(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Cp(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Cp(e.entries(),t.entries()):Fx(e)&&Fx(t)?Cp(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Cp(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Fx(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var yB=Object.defineProperty,vB=(e,t,n)=>t in e?yB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bx=(e,t,n)=>(vB(e,typeof t!="symbol"?t+"":t,n),n),wB=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(wB||{});let bB={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},xB=class LC extends gB{constructor(){super(...arguments),Bx(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Bx(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new LC({stack:[]})}reduce(t,n){return _s(n.type,bB,t,n)}};const $C=new IC(()=>xB.new());var MC={exports:{}},FC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=E;function _B(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kB=typeof Object.is=="function"?Object.is:_B,SB=qu.useSyncExternalStore,EB=qu.useRef,CB=qu.useEffect,TB=qu.useMemo,PB=qu.useDebugValue;FC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=EB(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=TB(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),s!==void 0&&o.hasValue){var b=o.value;if(s(b,m))return f=b}return f=m}if(b=f,kB(c,m))return b;var v=r(m);return s!==void 0&&s(b,v)?(c=m,b):(c=m,f=v)}var u=!1,c,f,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,s]);var a=SB(e,i[0],i[1]);return CB(function(){o.hasValue=!0,o.value=a},[a]),PB(a),a};MC.exports=FC;var AB=MC.exports;function BC(e,t,n=NC){return AB.useSyncExternalStoreWithSelector(ft(r=>e.subscribe(jB,r)),ft(()=>e.state),ft(()=>e.state),ft(t),n)}function jB(e){return e}function Gu(e,t){let n=E.useId(),r=$C.get(t),[s,i]=BC(r,E.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Nn(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let Sg=new Map,Kl=new Map;function Ux(e){var t;let n=(t=Kl.get(e))!=null?t:0;return Kl.set(e,n+1),n!==0?()=>zx(e):(Sg.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>zx(e))}function zx(e){var t;let n=(t=Kl.get(e))!=null?t:1;if(n===1?Kl.delete(e):Kl.set(e,n-1),n!==1)return;let r=Sg.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Sg.delete(e))}function OB(e,{allowed:t,disallowed:n}={}){let r=Gu(e,"inert-others");Nn(()=>{var s,i;if(!r)return;let o=Ss();for(let l of(s=n==null?void 0:n())!=null?s:[])l&&o.add(Ux(l));let a=(i=t==null?void 0:t())!=null?i:[];for(let l of a){if(!l)continue;let u=Wu(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let f of c.children)a.some(p=>f.contains(p))||o.add(Ux(f));c=c.parentElement}}return o.dispose},[r,t,n])}function RB(e,t,n){let r=_o(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});E.useEffect(()=>{if(!e)return;let s=t===null?null:po(t)?t:t.current;if(!s)return;let i=Ss();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let sf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),IB=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ls=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ls||{}),Eg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Eg||{}),DB=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(DB||{});function NB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(sf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function LB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(IB)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var UC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(UC||{});function $B(e,t=0){var n;return e===((n=Wu(e))==null?void 0:n.body)?!1:_s(t,{0(){return e.matches(sf)},1(){let r=e;for(;r!==null;){if(r.matches(sf))return!0;r=r.parentElement}return!1}})}var MB=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(MB||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function hs(e){e==null||e.focus({preventScroll:!0})}let FB=["textarea","input"].join(",");function BB(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,FB))!=null?n:!1}function UB(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Wl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?xg(e[0]):document:xg(e),o=Array.isArray(e)?n?UB(e):e:t&64?LB(e):NB(e);s.length>0&&o.length>1&&(o=o.filter(m=>!s.some(b=>b!=null&&"current"in b?(b==null?void 0:b.current)===m:b===m))),r=r??(i==null?void 0:i.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,p;do{if(c>=f||c+f<=0)return 0;let m=l+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=o[m],p==null||p.focus(u),c+=a}while(p!==PC(p));return t&6&&BB(p)&&p.select(),2}function zC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function zB(){return/Android/gi.test(window.navigator.userAgent)}function Vx(){return zC()||zB()}function Qc(e,t,n,r){let s=_o(n);E.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function VC(e,t,n,r){let s=_o(n);E.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Kx=30;function VB(e,t,n){let r=_o(n),s=E.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(t);for(let f of c)if(f!==null&&(f.contains(u)||a.composed&&a.composedPath().includes(f)))return;return!$B(u,UC.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),i=E.useRef(null);Qc(e,"pointerdown",a=>{var l,u;Vx()||(i.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),Qc(e,"pointerup",a=>{if(Vx()||!i.current)return;let l=i.current;return i.current=null,s(a,()=>l)},!0);let o=E.useRef({x:0,y:0});Qc(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),Qc(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=Kx||Math.abs(l.y-o.current.y)>=Kx))return s(a,()=>ti(a.target)?a.target:null)},!0),VC(e,"blur",a=>s(a,()=>rB(window.document.activeElement)?window.document.activeElement:null),!0)}function Pv(...e){return E.useMemo(()=>Wu(...e),[...e])}function KC(e,t,n,r){let s=_o(n);E.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function KB(e){return E.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function WB(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function HB(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function qB(){return zC()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Ss();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(ti(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);ti(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),ti(l.target)&&nB(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(ti(a.target)){if(sB(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function GB(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Wx(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let qi=WB(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ss(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Wx(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Wx(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[qB(),HB(),GB()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});qi.subscribe(()=>{let e=qi.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&qi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&qi.dispatch("TEARDOWN",n)}});function QB(e,t,n=()=>({containers:[]})){let r=KB(qi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return Nn(()=>{if(!(!t||!e))return qi.dispatch("PUSH",t,n),()=>qi.dispatch("POP",t,n)},[e,t]),i}function YB(e,t,n=()=>[document.body]){let r=Gu(e,"scroll-lock");QB(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function JB(e=0){let[t,n]=E.useState(e),r=E.useCallback(l=>n(l),[]),s=E.useCallback(l=>n(u=>u|l),[]),i=E.useCallback(l=>(t&l)===l,[t]),o=E.useCallback(l=>n(u=>u&~l),[]),a=E.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var ZB={},Hx,qx;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Hx=process==null?void 0:ZB)==null?void 0:Hx.NODE_ENV)==="test"&&typeof((qx=Element==null?void 0:Element.prototype)==null?void 0:qx.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var XB=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(XB||{});function e5(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function t5(e,t,n,r){let[s,i]=E.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=JB(e&&s?3:0),u=E.useRef(!1),c=E.useRef(!1),f=Bf();return Nn(()=>{var p;if(e){if(n&&i(!0),!t){n&&a(3);return}return(p=r==null?void 0:r.start)==null||p.call(r,n),n5(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;c.current&&i5(t)||(u.current=!1,l(7),n||i(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function n5(e,{prepare:t,run:n,done:r,inFlight:s}){let i=Ss();return s5(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(r5(e,r))})}),i.dispose}function r5(e,t){var n,r;let s=Ss();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||t()}),s.dispose)}function s5(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function i5(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Av(e,t){let n=E.useRef([]),r=ft(e);E.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let a=r(t,s);return n.current=t,a}},[r,...t])}let Uf=E.createContext(null);Uf.displayName="OpenClosedContext";var Cr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Cr||{});function zf(){return E.useContext(Uf)}function o5({value:e,children:t}){return ze.createElement(Uf.Provider,{value:e},t)}function a5({children:e}){return ze.createElement(Uf.Provider,{value:null},e)}function l5(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vs=[];l5(()=>{function e(t){if(!ti(t.target)||t.target===document.body||Vs[0]===t.target)return;let n=t.target;n=n.closest(sf),Vs.unshift(n??t.target),Vs=Vs.filter(r=>r!=null&&r.isConnected),Vs.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function WC(e){let t=ft(e),n=E.useRef(!1);E.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ff(()=>{n.current&&t()})}),[t])}let HC=E.createContext(!1);function u5(){return E.useContext(HC)}function Gx(e){return ze.createElement(HC.Provider,{value:e.force},e.children)}function c5(e){let t=u5(),n=E.useContext(GC),[r,s]=E.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Qr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return E.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),E.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let qC=E.Fragment,d5=Ln(function(e,t){let{ownerDocument:n=null,...r}=e,s=E.useRef(null),i=Yr(iB(p=>{s.current=p}),t),o=Pv(s.current),a=n??o,l=c5(a),u=E.useContext(Cg),c=Bf(),f=hr();return WC(()=>{var p;l&&l.childNodes.length<=0&&((p=l.parentElement)==null||p.removeChild(l))}),l?ky.createPortal(ze.createElement("div",{"data-headlessui-portal":"",ref:p=>{c.dispose(),u&&p&&c.add(u.register(p))}},f({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:qC,name:"Portal"})),l):null});function f5(e,t){let n=Yr(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=hr();return r?ze.createElement(d5,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:qC,name:"Portal"})}let h5=E.Fragment,GC=E.createContext(null);function p5(e,t){let{target:n,...r}=e,s={ref:Yr(t)},i=hr();return ze.createElement(GC.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:h5,name:"Popover.Group"}))}let Cg=E.createContext(null);function m5(){let e=E.useContext(Cg),t=E.useRef([]),n=ft(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ft(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=E.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,E.useMemo(()=>function({children:i}){return ze.createElement(Cg.Provider,{value:s},i)},[s])]}let g5=Ln(f5),QC=Ln(p5),y5=Object.assign(g5,{Group:QC});function v5(e,t=typeof document<"u"?document.defaultView:null,n){let r=Gu(e,"escape");KC(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===RC.Escape&&n(s))})}function w5(){var e;let[t]=E.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=E.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Nn(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function b5({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ft(()=>{var s,i;let o=Wu(n),a=[];for(let l of e)l!==null&&(di(l)?a.push(l):"current"in l&&di(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(s=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&di(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:ft(s=>r().some(i=>i.contains(s)))}}let YC=E.createContext(null);function Qx({children:e,node:t}){let[n,r]=E.useState(null),s=JC(t??n);return ze.createElement(YC.Provider,{value:s},e,s===null&&ze.createElement(kg,{features:rf.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=Wu(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&di(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function JC(e=null){var t;return(t=E.useContext(YC))!=null?t:e}function x5(){let e=typeof document>"u";return"useSyncExternalStore"in m0?(t=>t.useSyncExternalStore)(m0)(()=>()=>{},()=>!1,()=>!e):!1}function Vf(){let e=x5(),[t,n]=E.useState(Qr.isHandoffComplete);return t&&Qr.isHandoffComplete===!1&&n(!1),E.useEffect(()=>{t!==!0&&n(!0)},[t]),E.useEffect(()=>Qr.handoff(),[]),e?!1:t}function jv(){let e=E.useRef(!1);return Nn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var El=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(El||{});function _5(){let e=E.useRef(0);return VC(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function ZC(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)di(n.current)&&t.add(n.current);return t}let k5="div";var Fi=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Fi||{});function S5(e,t){let n=E.useRef(null),r=Yr(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...l}=e;Vf()||(a=0);let u=Pv(n.current);P5(a,{ownerDocument:u});let c=A5(a,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:i});j5(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let f=_5(),p=ft(y=>{if(!po(n.current))return;let w=n.current;(C=>C())(()=>{_s(f.current,{[El.Forwards]:()=>{Wl(w,ls.First,{skipElements:[y.relatedTarget,i]})},[El.Backwards]:()=>{Wl(w,ls.Last,{skipElements:[y.relatedTarget,i]})}})})}),m=Gu(!!(a&2),"focus-trap#tab-lock"),b=Bf(),v=E.useRef(!1),_={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,b.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){if(!(a&4))return;let w=ZC(o);po(n.current)&&w.add(n.current);let C=y.relatedTarget;ti(C)&&C.dataset.headlessuiFocusGuard!=="true"&&(XC(w,C)||(v.current?Wl(n.current,_s(f.current,{[El.Forwards]:()=>ls.Next,[El.Backwards]:()=>ls.Previous})|ls.WrapAround,{relativeTo:y.target}):ti(y.target)&&hs(y.target)))}},g=hr();return ze.createElement(ze.Fragment,null,m&&ze.createElement(kg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:rf.Focusable}),g({ourProps:_,theirProps:l,defaultTag:k5,name:"FocusTrap"}),m&&ze.createElement(kg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:rf.Focusable}))}let E5=Ln(S5),C5=Object.assign(E5,{features:Fi});function T5(e=!0){let t=E.useRef(Vs.slice());return Av(([n],[r])=>{r===!0&&n===!1&&Ff(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Vs.slice())},[e,Vs,t]),ft(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function P5(e,{ownerDocument:t}){let n=!!(e&8),r=T5(n);Av(()=>{n||W4(t==null?void 0:t.body)&&hs(r())},[n]),WC(()=>{n&&hs(r())})}function A5(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=E.useRef(null),o=Gu(!!(e&1),"focus-trap#initial-focus"),a=jv();return Av(()=>{if(e===0)return;if(!o){s!=null&&s.current&&hs(s.current);return}let l=n.current;l&&Ff(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){i.current=u;return}}else if(l.contains(u)){i.current=u;return}if(r!=null&&r.current)hs(r.current);else{if(e&16){if(Wl(l,ls.First|ls.AutoFocus)!==Eg.Error)return}else if(Wl(l,ls.First)!==Eg.Error)return;if(s!=null&&s.current&&(hs(s.current),(t==null?void 0:t.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[s,o,e]),i}function j5(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=jv(),o=!!(e&4);KC(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!i.current)return;let l=ZC(r);po(n.current)&&l.add(n.current);let u=s.current;if(!u)return;let c=a.target;po(c)?XC(l,c)?(s.current=c,hs(c)):(a.preventDefault(),a.stopPropagation(),hs(u)):hs(s.current)},!0)}function XC(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function eT(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Vl((t=e.as)!=null?t:nT)||ze.Children.count(e.children)===1}let Kf=E.createContext(null);Kf.displayName="TransitionContext";var O5=(e=>(e.Visible="visible",e.Hidden="hidden",e))(O5||{});function R5(){let e=E.useContext(Kf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function I5(){let e=E.useContext(Wf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Wf=E.createContext(null);Wf.displayName="NestingContext";function Hf(e){return"children"in e?Hf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function tT(e,t){let n=_o(e),r=E.useRef([]),s=jv(),i=Bf(),o=ft((m,b=ei.Hidden)=>{let v=r.current.findIndex(({el:_})=>_===m);v!==-1&&(_s(b,{[ei.Unmount](){r.current.splice(v,1)},[ei.Hidden](){r.current[v].state="hidden"}}),i.microTask(()=>{var _;!Hf(r)&&s.current&&((_=n.current)==null||_.call(n))}))}),a=ft(m=>{let b=r.current.find(({el:v})=>v===m);return b?b.state!=="visible"&&(b.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,ei.Unmount)}),l=E.useRef([]),u=E.useRef(Promise.resolve()),c=E.useRef({enter:[],leave:[]}),f=ft((m,b,v)=>{l.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([_])=>_!==m)),t==null||t.chains.current[b].push([m,new Promise(_=>{l.current.push(_)})]),t==null||t.chains.current[b].push([m,new Promise(_=>{Promise.all(c.current[b].map(([g,y])=>y)).then(()=>_())})]),b==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(b)):v(b)}),p=ft((m,b,v)=>{Promise.all(c.current[b].splice(0).map(([_,g])=>g)).then(()=>{var _;(_=l.current.shift())==null||_()}).then(()=>v(b))});return E.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:p,wait:u,chains:c}),[a,o,r,f,p,c,u])}let nT=E.Fragment,rT=nf.RenderStrategy;function D5(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:f,entered:p,leave:m,leaveFrom:b,leaveTo:v,..._}=e,[g,y]=E.useState(null),w=E.useRef(null),C=eT(e),O=Yr(...C?[w,t,y]:t===null?[]:[t]),I=(n=_.unmount)==null||n?ei.Unmount:ei.Hidden,{show:R,appear:$,initial:F}=R5(),[V,he]=E.useState(R?"visible":"hidden"),M=I5(),{register:ne,unregister:A}=M;Nn(()=>ne(w),[ne,w]),Nn(()=>{if(I===ei.Hidden&&w.current){if(R&&V!=="visible"){he("visible");return}return _s(V,{hidden:()=>A(w),visible:()=>ne(w)})}},[V,w,ne,A,R,I]);let J=Vf();Nn(()=>{if(C&&J&&V==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,V,J,C]);let xe=F&&!$,oe=$&&R&&F,ae=E.useRef(!1),re=tT(()=>{ae.current||(he("hidden"),A(w))},M),ge=ft(De=>{ae.current=!0;let Me=De?"enter":"leave";re.onStart(w,Me,ye=>{ye==="enter"?i==null||i():ye==="leave"&&(a==null||a())})}),N=ft(De=>{let Me=De?"enter":"leave";ae.current=!1,re.onStop(w,Me,ye=>{ye==="enter"?o==null||o():ye==="leave"&&(l==null||l())}),Me==="leave"&&!Hf(re)&&(he("hidden"),A(w))});E.useEffect(()=>{C&&s||(ge(R),N(R))},[R,C,s]);let z=!(!s||!C||!J||xe),[,ue]=t5(z,g,R,{start:ge,end:N}),fe=Li({ref:O,className:((r=_g(_.className,oe&&u,oe&&c,ue.enter&&u,ue.enter&&ue.closed&&c,ue.enter&&!ue.closed&&f,ue.leave&&m,ue.leave&&!ue.closed&&b,ue.leave&&ue.closed&&v,!ue.transition&&R&&p))==null?void 0:r.trim())||void 0,...e5(ue)}),ce=0;V==="visible"&&(ce|=Cr.Open),V==="hidden"&&(ce|=Cr.Closed),R&&V==="hidden"&&(ce|=Cr.Opening),!R&&V==="visible"&&(ce|=Cr.Closing);let Ce=hr();return ze.createElement(Wf.Provider,{value:re},ze.createElement(o5,{value:ce},Ce({ourProps:fe,theirProps:_,defaultTag:nT,features:rT,visible:V==="visible",name:"Transition.Child"})))}function N5(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=E.useRef(null),a=eT(e),l=Yr(...a?[o,t]:t===null?[]:[t]);Vf();let u=zf();if(n===void 0&&u!==null&&(n=(u&Cr.Open)===Cr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,f]=E.useState(n?"visible":"hidden"),p=tT(()=>{n||f("hidden")}),[m,b]=E.useState(!0),v=E.useRef([n]);Nn(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),b(!1))},[v,n]);let _=E.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Nn(()=>{n?f("visible"):!Hf(p)&&o.current!==null&&f("hidden")},[n,p]);let g={unmount:s},y=ft(()=>{var O;m&&b(!1),(O=e.beforeEnter)==null||O.call(e)}),w=ft(()=>{var O;m&&b(!1),(O=e.beforeLeave)==null||O.call(e)}),C=hr();return ze.createElement(Wf.Provider,{value:p},ze.createElement(Kf.Provider,{value:_},C({ourProps:{...g,as:E.Fragment,children:ze.createElement(sT,{ref:l,...g,...i,beforeEnter:y,beforeLeave:w})},theirProps:{},defaultTag:E.Fragment,features:rT,visible:c==="visible",name:"Transition"})))}function L5(e,t){let n=E.useContext(Kf)!==null,r=zf()!==null;return ze.createElement(ze.Fragment,null,!n&&r?ze.createElement(Tg,{ref:t,...e}):ze.createElement(sT,{ref:t,...e}))}let Tg=Ln(N5),sT=Ln(D5),Ov=Ln(L5),yd=Object.assign(Tg,{Child:Ov,Root:Tg});var $5=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))($5||{}),M5=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(M5||{});let F5={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Rv=E.createContext(null);Rv.displayName="DialogContext";function qf(e){let t=E.useContext(Rv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qf),n}return t}function B5(e,t){return _s(t.type,F5,e,t)}let Yx=Ln(function(e,t){let n=E.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...f}=e,p=E.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=zf();s===void 0&&m!==null&&(s=(m&Cr.Open)===Cr.Open);let b=E.useRef(null),v=Yr(b,t),_=Pv(b.current),g=s?0:1,[y,w]=E.useReducer(B5,{titleId:null,descriptionId:null,panelRef:E.createRef()}),C=ft(()=>i(!1)),O=ft(ue=>w({type:0,id:ue})),I=Vf()?g===0:!1,[R,$]=m5(),F={get current(){var ue;return(ue=y.panelRef.current)!=null?ue:b.current}},V=JC(),{resolveContainers:he}=b5({mainTreeNode:V,portals:R,defaultContainers:[F]}),M=m!==null?(m&Cr.Closing)===Cr.Closing:!1;OB(u||M?!1:I,{allowed:ft(()=>{var ue,fe;return[(fe=(ue=b.current)==null?void 0:ue.closest("[data-headlessui-portal]"))!=null?fe:null]}),disallowed:ft(()=>{var ue;return[(ue=V==null?void 0:V.closest("body > *:not(#headlessui-portal-root)"))!=null?ue:null]})});let ne=$C.get(null);Nn(()=>{if(I)return ne.actions.push(r),()=>ne.actions.pop(r)},[ne,r,I]);let A=BC(ne,E.useCallback(ue=>ne.selectors.isTop(ue,r),[ne,r]));VB(A,he,ue=>{ue.preventDefault(),C()}),v5(A,_==null?void 0:_.defaultView,ue=>{ue.preventDefault(),ue.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),YB(u||M?!1:I,_,he),RB(I,b,C);let[J,xe]=oB(),oe=E.useMemo(()=>[{dialogState:g,close:C,setTitleId:O,unmount:c},y],[g,C,O,c,y]),ae=Hu({open:g===0}),re={ref:v,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:g===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":J,unmount:c},ge=!w5(),N=Fi.None;I&&!u&&(N|=Fi.RestoreFocus,N|=Fi.TabLock,l&&(N|=Fi.AutoFocus),ge&&(N|=Fi.InitialFocus));let z=hr();return ze.createElement(a5,null,ze.createElement(Gx,{force:!0},ze.createElement(y5,null,ze.createElement(Rv.Provider,{value:oe},ze.createElement(QC,{target:b},ze.createElement(Gx,{force:!1},ze.createElement(xe,{slot:ae},ze.createElement($,null,ze.createElement(C5,{initialFocus:o,initialFocusFallback:b,containers:he,features:N},ze.createElement(fB,{value:C},z({ourProps:re,theirProps:f,slot:ae,defaultTag:U5,features:z5,visible:g===0,name:"Dialog"})))))))))))}),U5="div",z5=nf.RenderStrategy|nf.Static;function V5(e,t){let{transition:n=!1,open:r,...s}=e,i=zf(),o=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?ze.createElement(Qx,null,ze.createElement(yd,{show:r,transition:n,unmount:s.unmount},ze.createElement(Yx,{ref:t,...s}))):ze.createElement(Qx,null,ze.createElement(Yx,{ref:t,open:r,...s}))}let K5="div";function W5(e,t){let n=E.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:a},l]=qf("Dialog.Panel"),u=Yr(t,l.panelRef),c=Hu({open:o===0}),f=ft(_=>{_.stopPropagation()}),p={ref:u,id:r,onClick:f},m=s?Ov:E.Fragment,b=s?{unmount:a}:{},v=hr();return ze.createElement(m,{...b},v({ourProps:p,theirProps:i,slot:c,defaultTag:K5,name:"Dialog.Panel"}))}let H5="div";function q5(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=qf("Dialog.Backdrop"),o=Hu({open:s===0}),a={ref:t,"aria-hidden":!0},l=n?Ov:E.Fragment,u=n?{unmount:i}:{},c=hr();return ze.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:H5,name:"Dialog.Backdrop"}))}let G5="h2";function Q5(e,t){let n=E.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=qf("Dialog.Title"),a=Yr(t);E.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Hu({open:i===0}),u={ref:a,id:r};return hr()({ourProps:u,theirProps:s,slot:l,defaultTag:G5,name:"Dialog.Title"})}let Y5=Ln(V5),J5=Ln(W5);Ln(q5);let Z5=Ln(Q5),Tp=Object.assign(Y5,{Panel:J5,Title:Z5,Description:cB});const X5=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r})=>{const[s,i]=E.useState(r),o=l=>{i(l.target.value)},a=()=>{n(s),t()};return k.jsx(yd,{appear:!0,show:e,as:E.Fragment,children:k.jsxs(Tp,{as:"div",className:"relative z-10",onClose:t,children:[k.jsxs(yd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})," "]}),k.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:k.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:k.jsx(yd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:k.jsxs(Tp.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[k.jsx(Tp.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),k.jsxs("div",{className:"mt-2",children:[k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"iast",checked:s==="iast",onChange:o,className:"mr-2"}),"IAST"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:s==="tamil_superscripted",onChange:o,className:"mr-2"}),"Tamil"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:s==="malayalam",onChange:o,className:"mr-2"}),"Malayalam"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:s==="devanagari",onChange:o,className:"mr-2"}),"Devanagari"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"itrans",checked:s==="itrans",onChange:o,className:"mr-2"}),"ITrans"]}),k.jsx("br",{})]}),k.jsxs("div",{className:"mt-4",children:[k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Save"})]})]})})})})]})})},eU=()=>{const[e,t]=E.useState(navigator.onLine);E.useEffect(()=>{const f=()=>t(!0),p=()=>t(!1);return window.addEventListener("online",f),window.addEventListener("offline",p),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{console.log("Service Worker is active:",m.active)}),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[]);const{preferredLanguage:n,setPreferredLanguage:r}=xo(),[s,i]=E.useState(!1),o=()=>i(!s),[a,l]=E.useState(!1),u=()=>l(!0),c=()=>l(!1);return k.jsx(mI,{children:k.jsxs("div",{className:"app-layout",children:[" ",k.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:k.jsx(U4,{toggleDropdown:o,isDropdownOpen:s,openLanguageSettings:u})}),k.jsx(X5,{isOpen:a,onClose:c,onLanguageSave:r,currentLanguage:n}),k.jsx(bD,{children:k.jsxs(B4,{children:[k.jsx(M4,{}),k.jsx(m4,{})]})})]})})};function tU(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(f=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await Ba(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{i?i("/new-sankeertan/sw.js",f):s==null||s(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}tU();const nU=new KI({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),rU=Pp.createRoot(document.getElementById("root"));rU.render(k.jsx(ze.StrictMode,{children:k.jsx(WI,{client:nU,children:k.jsx(wj,{children:k.jsx(PS,{children:k.jsx(eU,{})})})})}));
